!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="da031522-32ad-4d9d-a71c-cbc8172eef93",e._sentryDebugIdIdentifier="sentry-dbid-da031522-32ad-4d9d-a71c-cbc8172eef93")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"335618f7"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3055],{47547:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(94086),i=t(52757),o=t(24955),a=t(10168),l=t(32842),s=(0,i.AH)([l.wp.display.flex,l.wp.align.center,l.wp.justify.center,l.wp.backgroundColor.accentNegativeDefault,l.wp.minWidth(16),l.wp.height(16),l.wp.color.white,l.wp.position.absolute,l.wp.fontSize(o.LU.fontSizeSmall),{borderRadius:"10px",transform:"translate(50%, -50%)",padding:"2px 3px"}]),c=(0,a.x)({root:l.wp.display.flex,unreadIndicator:[l.wp.width(5),l.wp.height(5),l.wp.backgroundColor.redDefault,l.wp.position.absolute,{borderRadius:"10px",transform:"translate(8px, -1px)"}],count:s,countOverflow:[s,{transform:"translate(25%, -50%)"}]});function u(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,o=e.count,a=void 0===o?null:o,l=a&&a>99,s=l?"99+":null==a?void 0:a.toString();return(0,r.FD)("span",{css:c.root,children:[(0,r.Y)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),n?(0,r.Y)("div",{css:c.unreadIndicator}):null,!!a&&(0,r.Y)("div",{css:l?c.countOverflow:c.count,children:s})]})}},43239:(e,n,t)=>{"use strict";t.d(n,{A9:()=>C,CX:()=>R,CY:()=>P,FL:()=>x,d1:()=>_,lb:()=>F,oh:()=>U,tD:()=>D});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(75838),s=t(39528);function c(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return y=function(){return e},e}var b={},S=(0,o.J1)(c()),Y=(0,o.J1)(u()),A=(0,o.J1)(d(),S,Y),C=(0,o.J1)(p(),S,A),x=(0,o.J1)(f(),C);function _(e){var n=(0,r._)({},b,e);return a.I(x,n)}var k=(0,o.J1)(h(),C);function D(e){var n=(0,r._)({},b,e);return l.n(k,n)}var E=(0,o.J1)(m(),C);function R(e){var n=(0,r._)({},b,e);return l.n(E,n)}var I=(0,o.J1)(g(),C);function F(e){var n=(0,r._)({},b,e);return l.n(I,n)}var T=(0,o.J1)(v());function P(e){var n=(0,r._)({},b,e);return l.n(T,n)}var L=(0,o.J1)(w(),C);function U(e){var n=(0,r._)({},b,e);return s.R(L,n)}y()},26171:(e,n,t)=>{"use strict";t.d(n,{gu:()=>d,zn:()=>m,ah:()=>h});var r=t(13454),i=t(66622),o=t(5482),a=t(30758),l=t(55195),s=t(66144);function c(){return(c=(0,r._)(function(e,n,t){var r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(t===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,n({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:t})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:t}]}})})).apply(this,arguments)}var u=t(24481);function d(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n,t,r,i,a,u,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(n=e.anchor,t=e.version,r=e.transformSelection,i=e.content,!n.path)return[2,null];return[4,function(e,n,t){return c.apply(this,arguments)}(n,r,t)];case 1:if(!(a=o.sent()))return[2,null];return d=function(){if(a){var e=a.indexStart,n=a.indexEnd;try{var t=s.EY.of(i.split("\n")),r=t.lineAt(e),o=t.lineAt(n),c=t.sliceString(t.line(Math.max(r.number-2,1)).from,e),u=t.sliceString(n,t.line(Math.min(o.number+2,t.lines)).to);return{precode:c,code:t.sliceString(e,n),postcode:u}}catch(e){l.Cp(e)}}},[2,{anchor:n,newSelection:a,newPosition:u,getHighlight:d,snippet:f(i,a)}]}})})).apply(this,arguments)}var f=function(e,n){var t=s.EY.of(e.split("\n")),r=t.lineAt(n.indexStart).number,i=t.lineAt(n.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(t.lines,i+1));for(var a=r;a<=i;a++)o.push(t.line(a).text);return{startLineNumber:r,lines:o}};function h(e){var n=(0,u.A)().fs,t=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,i._)((0,a.useState)(!1),2),l=o[0],s=o[1];return(0,a.useEffect)(function(){if(e){var i=function(){r.current=null,s(!1)},o=n.watchTextFile(e,{onReady:function(e){var n=e.transformSelection,i=e.initialContent;t.current=i.toString(),r.current=n,s(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var n=e.latestContent;t.current=n}});return function(){i(),o()}}},[e,n]),{contentRef:t,transformSelectionRef:r,loadedFile:l}}function m(e){var n=(0,u.A)().fs,t=(0,i._)((0,a.useState)(null),2),r=t[0],o=t[1],s=h(null==e?void 0:e.path),c=s.contentRef,p=s.loadedFile,f=s.transformSelectionRef;return(0,a.useEffect)(function(){(null==e?void 0:e.path)&&p&&f.current&&null!==c.current&&d({anchor:e,version:n.getOTVersion(e.path),transformSelection:f.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Cp(e)})},[n,e,p,f,c]),r}},35698:(e,n,t)=>{"use strict";t.d(n,{F:()=>u});var r=t(20837),i=t(45009),o=t(30632),a=t(75838);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.n(c,n)}},72621:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(66622),i=t(30758),o=t(35698),a=t(83733);function l(e){var n=(0,a.A)(),t=(0,r._)((0,o.F)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&t({variables:{replId:n,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[n,e,t])}},21195:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(83733);function d(){var e=(l={variables:{replId:(0,u.A)()}},d=(0,r._)({},s,l),a.I(c,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var n=[];(null===(p=e.repl.owner)||void 0===p?void 0:p.username)&&"User"===e.repl.owner.__typename&&n.push(e.repl.owner);var t=!0,i=!1,o=void 0;try{for(var l,d,p,f,h=e.repl.permissions[Symbol.iterator]();!(t=(f=h.next()).done);t=!0){var m,g=f.value;(null===(m=g.user)||void 0===m?void 0:m.username)&&n.push(g.user)}}catch(e){i=!0,o=e}finally{try{t||null==h.return||h.return()}finally{if(i)throw o}}return n}},94463:(e,n,t)=>{"use strict";t.d(n,{N:()=>E,M:()=>D});var r=t(20837),i=t(43952),o=t(16530),a=t(66622),l=t(94086),s=t(30758),c=t(78910),u=t(78542),d=t(88708),p=t(66144),f=t(16608),h=t(15800),m=f.Lz.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),g=f.NZ.line({attributes:{class:"cm-diff-inserted"}}),v=f.NZ.line({attributes:{class:"cm-diff-deleted"}}),w=p.Pe.define({map:function(e,n){return e.map(n)}}),y=function(e){function n(){return(0,u._)(this,n),(0,c._)(this,n,arguments)}(0,d._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},t.ignoreEvent=function(){return!1},n}(f.xO);function b(e){var n=new p.vB,t=new y;e.sort(function(e,n){return e.character-n.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var s=a.value,c=s.character,u=s.padding,d=0;d<u;d++)n.add(c,c,f.NZ.widget({widget:t,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function S(e){var n=e.coloredLines,t=e.colorDecoration;return[m,f.Z9.fromClass(function e(r){(0,u._)(this,e);var i=new p.vB,o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value,f=r.state.doc.line(d);i.add(f.from,f.from,t)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.sU.define({create:function(){return f.NZ.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(w))return l.value}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return f.Lz.decorations.from(e)}})]}var Y=t(81383),A=t(9980),C=t(76396),x=function(){var e=function(e,n){return f.Lz.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new p.xx,t=new p.xx;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}}(),_=x.extensions,k=x.setup;function D(e){var n=e.left,t=e.right,l=e.showDiffDecorations,c=void 0===l||l,u=n.code,d=(0,o._)(n,["code"]),f=t.code,m=(0,o._)(t,["code"]),y=(0,A.A)(),Y=y.ref,C=y.view,x=(0,A.A)(),D=x.ref,E=x.view,R=(0,s.useMemo)(function(){var e=_().left;return d.extensions?[d.extensions,e]:e},[d.extensions]),I=(0,s.useMemo)(function(){var e=_().right;return m.extensions?[m.extensions,e]:e},[m.extensions]);d=(0,i._)((0,r._)({},d),{extensions:R}),m=(0,i._)((0,r._)({},m),{extensions:I});var F=(0,a._)((0,s.useState)(!1),2),T=F[0],P=F[1],L=(0,a._)((0,s.useState)(!1),2),U=L[0],N=L[1];return(0,s.useEffect)(function(){if(C&&E&&T&&U&&c){var e=setTimeout(function(){var e;k(C,E),e=(0,h.nw)(C.state.doc.sliceString(0),E.state.doc.sliceString(0)),C.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.leftColored.sort(function(e,n){return e-n}),colorDecoration:v})),w.of(b(e.leftPadded))]}),E.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.rightColored.sort(function(e,n){return e-n}),colorDecoration:g})),w.of(b(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[C,E,T,U,c]),(0,s.useEffect)(function(){C&&(C.dispatch({changes:{from:0,to:C.state.doc.length,insert:u}}),P(!0))},[u,C]),(0,s.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:f}}),N(!0))},[f,E]),{left:{view:C,ref:Y,code:u,options:d,ready:T},right:{view:E,ref:D,code:f,options:m,ready:U}}}function E(e){var n=e.diffViewer,t=(0,o._)(e,["diffViewer"]),i=(0,r._)({},n.options,t);return(0,l.FD)(l.FK,{children:[(0,l.Y)(Y.Ay,(0,r._)({ref:n.ref,css:{height:n.ready?0:"auto"},initialDoc:n.code,lineWrapping:!1,readOnly:!0},i)),!n.ready&&(0,l.Y)(C.A,{code:n.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},15800:(e,n,t)=>{"use strict";t.d(n,{PF:()=>m,nw:()=>h});var r=t(78542),i=t(66622),o=t(5482),a=t(2617),l=t.n(a),s=l().DIFF_DELETE,c=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,n){var t=new(l()),r=t.diff_linesToChars_(e,n),i=r.chars1,o=r.chars2,a=r.lineArray,s=t.diff_main(i,o,!1);return t.diff_charsToLines_(s,a),s}function p(e){return e.split("\n").length-1}function f(e,n,t){if(e>0){var r=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var i=n.indexOf("\n",r);return -1===i?null:1===t?i+1:e(n,t-1,i+1)}(t,n);if(null!==r)return{lineNumber:n,character:r,padding:e}}return null}function h(e,n){var t=!1,r=!1;t="\n"===e[e.length-1],r="\n"===n[n.length-1];for(var o=d(e+(t?"":"\n"),n+(r?"":"\n")),a=0,l=0,h=[],m=[],g=[],v=[],w=0,y=0,b=0;b<o.length;b++){var S=(0,i._)(o[b],2),Y=S[0],A=p(S[1]);switch(Y){case s:var C,x=(0,i._)(null!==(C=o[b+1])&&void 0!==C?C:[],2),_=x[0],k=x[1];a+=A;for(var D=0;D<A;D++)h.push(a-D);var E=A;_===c&&(E-=p(k));var R=f(E,l,n);R&&v.push(R);break;case c:var I,F=(0,i._)(null!==(I=o[b-1])&&void 0!==I?I:[],2),T=F[0],P=F[1];l+=A;for(var L=0;L<A;L++)m.push(l-L);var U=A;T===s&&(U-=p(P));var N=f(U,a,e);N&&g.push(N);break;case u:l>y&&(y=l),a>w&&(w=a),a+=A,l+=A}}return{leftPadded:g.filter(function(e){return e.lineNumber<y}),rightPadded:v.filter(function(e){return e.lineNumber<w}),leftColored:h,rightColored:m,changedTrailingNewline:t!==r,leftTrailingNewline:t,rightTrailingNewline:r}}var m=function(){function e(n,t){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===t[t.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(n,t),a=[],l=!0,p=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var g=(0,i._)(h.value,2),v=g[0],w=g[1].split("\n");""===w[w.length-1]&&w.pop();var y=!0,b=!1,S=void 0;try{for(var Y,A=w[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value;a.push([v,C])}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}catch(e){p=!0,f=e}finally{try{l||null==m.return||m.return()}finally{if(p)throw f}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([s,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([c,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var x=1,_=0,k=1,D=!0,E=!1,R=void 0;try{for(var I,F=a[Symbol.iterator]();!(D=(I=F.next()).done);D=!0){var T=(0,i._)(I.value,2),P=T[0],L=T[1];switch(P){case s:this.linePositions.set(x,_),this.lineLengths.set(x,L.length),this.deleted.add(x),_+=L.length+1,x++;break;case c:var U=x-1,N=this.inserted.get(U);N||(N=[],this.inserted.set(U,N)),N.push({number:k,content:L}),k++;break;case u:this.linePositions.set(x,_),this.lineLengths.set(x,L.length),_+=L.length+1,x++,k++}}}catch(e){E=!0,R=e}finally{try{D||null==F.return||F.return()}finally{if(E)throw R}}}var n=e.prototype;return n.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},n.lineIsDeleted=function(e){return this.deleted.has(e)},n.lineInsertions=function(e){var n=this.inserted.get(e);return n&&0!==n.length?n:null},n.lineInsertedContent=function(e){var n=this.lineInsertions(e);return n?n.map(function(e){return e.content}).join("\n"):null},n.offsetFor=function(e){var n,t,r;r=0+(null!==(t=null===(n=this.inserted.get(0))||void 0===n?void 0:n.length)&&void 0!==t?t:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},n.linePosition=function(e){var n;return null!==(n=this.linePositions.get(e))&&void 0!==n?n:null},n.lineLength=function(e){var n;return null!==(n=this.lineLengths.get(e))&&void 0!==n?n:null},n.line=function(e){var n=this.linePosition(e),t=this.lineLength(e);if(null===n||null===t)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:n,to:n+t,length:t,offset:r,isDeleted:i,insertions:o}},n.lines=function(){var e,n,t,r,a,l,s,c;return(0,o.YH)(this,function(o){switch(o.label){case 0:e=!0,n=!1,t=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(s=this.line(l)))throw Error("line should not be null");return[4,s];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return c=o.sent(),n=!0,t=c,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},e}()},86537:(e,n,t)=>{"use strict";t.d(n,{o:()=>a});var r=t(78542),i=t(5482),o=t(61755),a=function(){function e(n,t,i,o){(0,r._)(this,e),this.a=n,this.b=t,this.chunks=i,this.map=o}var n=e.prototype;return n.line=function(e,n){return n===o.mn.A?this.a.line(e):this.b.line(e)},n.bounds=function(e){if(0===this.chunks.length)return null;var n=(0,o.Dk)(this.chunks[0],e),t=(0,o.Dk)(this.chunks[this.chunks.length-1],e),r=e===o.mn.A?this.a.length:this.b.length,i=Math.min(t.to,r);return{from:n.from,to:i}},n.hasChanges=function(){return this.chunks.length>0},n.updateA=function(n,t,r){var i=this.b,a=(0,o.Pt)(n,i,{chunks:this.chunks,changesA:t},r),l=(0,o.k1)(n,i,a);return new e(n,i,a,l)},n.updateB=function(n,t,r){var i=this.a,a=(0,o.Pt)(i,n,{chunks:this.chunks,changesB:t},r),l=(0,o.k1)(i,n,a);return new e(i,n,a,l)},n.getContainingChunk=function(e,n){for(var t=0,r=this.chunks.length-1;t<=r;){var i=t+r>>>1,a=this.chunks[i],l=(0,o.Dk)(a,n);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(t=i+1)}return null},n.getCorrespondingLine=function(e,n){var t=this.map.get(n===o.mn.A?-e:e);return t?this.line(t,(0,o.Nl)(n)):null},n.getLineChangeType=function(e,n){if(this.map.get(n===o.mn.A?-e:e))return o.DE.UNCHANGED;var t=this.line(e,n),r=this.getContainingChunk(t.from,n);return r?(0,o.$F)(this.a,this.b,t,n,r.changes,r):o.DE.UNCHANGED},n.getLineStats=function(){for(var e={added:0,removed:0},n=1;n<=this.a.lines;n++)this.getLineChangeType(n,o.mn.A)!==o.DE.UNCHANGED&&e.removed++;for(var t=1;t<=this.b.lines;t++)this.getLineChangeType(t,o.mn.B)!==o.DE.UNCHANGED&&e.added++;return e},n.iterLines=function(e){var n,t,r,a;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e===o.mn.A?this.a:this.b,t=1,i.label=1;case 1:if(!(t<=n.lines))return[3,4];return r=n.line(t),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},n.iterRanges=function(){var e,n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];n=this.chunks[e].fromA,t=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:n+o.fromA,toA:n+o.toA,fromB:t+o.fromB,toB:t+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.r6,i=(0,o.Pt)(n,t,void 0,r),a=(0,o.k1)(n,t,i);return new e(n,t,i,a)},e}()},73712:(e,n,t)=>{"use strict";t.d(n,{X:()=>q});var r,i=t(66144),o=t(78910),a=t(78542),l=t(39487),s=t(88708),c=t(96489),u=t.n(c),d=t(16608),p=t(81272),f=t(72683),h=t(86537),m=t(19074),g=i.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),v=i.sU.define({create:function(){return{diff:null,tree:f.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(g),o=null===(t=n.state.facet(p.BH))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===f.PH.empty?e:{diff:null,tree:f.PH.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?n.docChanged&&(a=a.updateB(n.newDoc,n.changes)):(a=h.o.create(i,n.newDoc),l=f.PH.empty),(null===(r=n.startState.facet(p.BH))||void 0===r?void 0:r.parser)!==o&&(l=f.PH.empty),o&&l.length!==a.a.length)?(l=(0,m.B)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),w=t(72275),y=t(24955),b="cm-inline-diff-line-deletion-base",S="cm-inline-diff-line-deletion",Y="cm-inline-diff-text-deletion",A="cm-inline-diff-line-insertion-base",C="cm-inline-diff-line-insertion",x="cm-inline-diff-text-insertion",_="rgba(180, 0, 0, 0.075)",k="rgba(180, 0, 0, 0.125)",D="rgba(0, 180, 0, 0.075)",E="rgba(0, 180, 0, 0.125)",R="cm-inline-diff-marker",I="cm-inline-diff-marker-left",F="cm-inline-diff-marker-right";function T(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var P=d.Lz.theme((r={},(0,w._)(r,".".concat(b,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(y.LU.accentPrimaryDimmest," !important")}}),(0,w._)(r,".".concat(b),{background:T(_)}),(0,w._)(r,".".concat(S),{background:T(_,k)}),(0,w._)(r,".".concat(A),{background:T(D)}),(0,w._)(r,".".concat(C),{background:T(D,E)}),(0,w._)(r,".".concat(x),{display:"inline-block",background:E,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(E),paddingLeft:"3px",marginLeft:"-6px"}}),(0,w._)(r,".".concat(Y),{display:"inline-block",background:k,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(k),paddingLeft:"3px",marginLeft:"-6px"}}),(0,w._)(r,".".concat(R),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,w._)(r,".".concat(I),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,w._)(r,".".concat(F),{width:"50%",textAlign:"right"}),r)),L=t(61755),U=t(87100),N=function(e){function n(e,t,r){var i;return(0,a._)(this,n),(i=(0,o._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(b):"cm-line ".concat(S),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,w=!1,y=void 0;try{for(var A,C=this.changed[Symbol.iterator]();!(v=(A=C.next()).done);v=!0){var x=A.value;if(!(x.from>=f.to)&&!(x.to<=d)){var _=document.createElement("span");_.className=Y,h={from:x.from,to:x.to,dom:_},d<h.from&&m(n,h.from),n.appendChild(_);break}}}catch(e){w=!0,y=e}finally{try{v||null==C.return||C.return()}finally{if(w)throw y}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&u()(this.line,e.line)&&u()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,l._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(d.xO),O=d.NZ.line({class:A}),M=d.NZ.line({class:C}),B=d.NZ.mark({class:x}),H=d.Lz.decorations.compute([v],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,L.mn.B)===L.DE.COVERED)o.push(M.range(e.from));else{o.push(O.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,L.QG)(e,n,L.mn.B,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(B.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(v,!1);if(!t||!t.diff)return d.NZ.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r.chunks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var p=c.value;if(p.fromB!==p.endB)for(var f=r.b.lineAt(p.fromB),h=r.b.lineAt(p.endB),m=f.number;m<=h.number;m++)n(r.b.line(m),p);else p.fromA===p.endA&&n(r.b.lineAt(p.fromB),p);if(p.fromA!==p.toA)for(var g=r.a.lineAt(p.fromA),w=(0,U.A7)(i,r.a,e,p.fromA,p.endA),y=0;y<w.length;y++){var b=w[y],S=r.a.line(g.number+y),Y=r.getLineChangeType(S.number,L.mn.A)===L.DE.COVERED?null:(0,L.QG)(S,p,L.mn.A,!0),A=d.NZ.widget({widget:new N(b,S.number,Y),block:!0,side:-(w.length-y)});o.push(A.range(p.fromB))}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return d.NZ.set(o,!0)}),z=t(87660),W=(0,d.cU)({class:z.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;if(0===t.diff.a.length)return z.CI;var r=e.state.doc.lineAt(n.from);switch(t.diff.getLineChangeType(r.number,L.mn.B)){case L.DE.COVERED:case L.DE.MODIFIED:return z.CI;default:return null}},widgetMarker:function(e,n){if(!(n instanceof N))return null;var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;switch(t.diff.getLineChangeType(n.index,L.mn.A)){case L.DE.COVERED:case L.DE.MODIFIED:return z.RC;default:return null}},initialSpacer:function(e){var n=e.state.field(v,!1);return(null==n?void 0:n.diff)?z.CI:z.jn},updateSpacer:function(e,n){var t=n.state.field(v,!1),r=(null==t?void 0:t.diff)?z.CI:z.jn;return e===r?e:r}}),G=t(38332),V=function(e){function n(e,t){var r;return(0,a._)(this,n),(r=(0,o._)(this,n)).left=e,r.right=t,r}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=e.state.doc.lines.toString().length,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return t.className=R,r.className=I,i.className=F,t.style.width="".concat(2*n+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),t.appendChild(r),t.appendChild(i),t},t.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(d.wJ),j=G.DY.of(function(e,n){if(n instanceof N)return new V(n.index,null)}),Z=[G.RG.of(function(e,n){var t,r=e.state.field(v,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(n.from),o=r.diff.getCorrespondingLine(i.number,L.mn.B);return new V(null!==(t=null==o?void 0:o.number)&&void 0!==t?t:null,i.number)}}),j],q=i.sj.define({enables:function(e){return[g.computeN([e],function(n){return n.facet(e)}),z.s,v,P,H,Z,W]}})},87660:(e,n,t)=>{"use strict";t.d(n,{CI:()=>k,RC:()=>D,Ww:()=>R,jn:()=>I,n1:()=>d,s:()=>_,tH:()=>E});var r,i=t(78910),o=t(78542),a=t(72275),l=t(88708),s=t(16608),c=t(24955),u=c.LU.space2,d="cm-diff-gutter",p="".concat(d,"-element"),f="".concat(p,"-insertion"),h="".concat(p,"-modified"),m="".concat(p,"-deleted"),g="".concat(p,"-file-added"),v="".concat(p,"-empty"),w=c.LU.greenDefault,y=c.LU.greenStronger,b=c.LU.blueDefault,S=c.LU.blueStronger,Y=c.LU.redDefault,A=c.LU.redStronger,C=c.LU.greenDimmer,x=c.LU.greenDefault,_=s.Lz.theme((r={},(0,a._)(r,".".concat(d,":first-of-type, .").concat(p),{width:u}),(0,a._)(r,".".concat(f),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:y}}),(0,a._)(r,".".concat(h),{backgroundColor:b,"&.cm-activeLineGutter":{backgroundColor:S}}),(0,a._)(r,".".concat(m),{backgroundColor:Y,"&.cm-activeLineGutter":{backgroundColor:A}}),(0,a._)(r,".".concat(g),{backgroundColor:C,"&.cm-activeLineGutter":{backgroundColor:x}}),(0,a._)(r,".".concat(v),{opacity:0}),r)),k=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(f),e}return(0,l._)(n,e),n}(s.wJ)),D=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(m),e}return(0,l._)(n,e),n}(s.wJ)),E=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(h),e}return(0,l._)(n,e),n}(s.wJ)),R=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(g),e}return(0,l._)(n,e),n}(s.wJ)),I=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(v),e}return(0,l._)(n,e),n}(s.wJ))},33312:(e,n,t)=>{"use strict";t.d(n,{L:()=>c,T:()=>u});var r=t(16608),i=t(36601),o=t(82436),a=t(99813),l=t(71549),s=(0,a.eU)(!1),c=new i.k(function(e){var n=e.analyticsSurface,t=e.shouldTrack,i=e.onPaste;return r.Lz.domEventHandlers({paste:function(){t&&(0,o.u4)(o.AZ.TEXT_PASTED,{surface:n}),null==i||i()}})});function u(e){var n=e.analyticsSurface,t=(0,l.h)(s),r=(0,l.ob)(s);return c.use({analyticsSurface:n,shouldTrack:!t,onPaste:function(){return r(!0)}})}},71252:(e,n,t)=>{"use strict";t.d(n,{OR:()=>u,fJ:()=>s,sz:()=>c});var r=t(55195),i=t(66144),o=t(50117),a=i.Pe.define(),l=i.Pe.define(),s=function(e){var n=e.view,t=e.insert,r=e.scrollIntoView,i=e.overwrite,l=e.insertAt;if(i)n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:a.of(null),scrollIntoView:r,annotations:o.A.of(!0)});else{var s=null!=l?l:n.state.selection.main.head,c=null!=l?l:n.state.selection.main.from;n.dispatch({changes:{from:c,insert:t},selection:{anchor:s+t.length},effects:a.of(null),scrollIntoView:r,annotations:o.A.of(!0)})}},c=function(e){var n=e.state.field(u,!1);if(!n){r.Cp(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));return}e.dispatch({changes:n,effects:l.of(null)})},u=i.sU.define({create:function(){return null},update:function(e,n){e&&(e=e.map(n.changes));var t=!0,r=!1,i=void 0;try{for(var o,s=n.effects[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var c=o.value;c.is(a)&&(e=n.changes.invert(n.startState.doc)),c.is(l)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}return e}})},79604:(e,n,t)=>{"use strict";t.d(n,{R:()=>u,b:()=>d});var r=t(37729),i=t(29917),o=t(94789),a=t(74748),l=t(50117),s=t(70891),c=t(55313),u=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);if(!(null==n?void 0:n.presented)||Date.now()-n.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var p=n.changes.closestRange(u);if(p.value instanceof s.kp){var f=p.value.unfulfilled.toString(),h=(0,c.t)(f,e.state.tabSize);if(h>0&&h>=e.state.tabSize)return!1}}var m=n.changes.asChangeSpec(),g=e.state.changes(m),v=n.changes.extendSelection(e.state.selection);return(0,r.N)(e),e.dispatch({changes:g,selection:v,scrollIntoView:!0,effects:a.xq.of(n.dismiss(a.UW.ACCEPTED_BY_USER)),annotations:[l.A.of(!0),i._B.of("full")]}),t.onSuggestionAccepted(e,n),!0},d=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);return null!=n&&!!n.presented&&(e.dispatch({effects:a.xq.of(n.dismiss(a.UW.DISMISSED_BY_USER))}),t.onSuggestionExplicitlyDismissed(e,n),!0)}},94789:(e,n,t)=>{"use strict";t.d(n,{q:()=>r});var r=t(66144).sj.define({combine:function(e){var n=e.filter(Boolean);return{onDismiss:function(e){return n.forEach(function(n){var t;return null===(t=n.onDismiss)||void 0===t?void 0:t.call(n,e)})},onRequestIgnoredBackendOnly:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestIgnoredBackendOnly)||void 0===t?void 0:t.call(n,e)})},onRequestFirstEmit:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestFirstEmit)||void 0===t?void 0:t.call(n,e)})},onRequestEndedWithNoSuggestion:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestEndedWithNoSuggestion)||void 0===t?void 0:t.call(n,e)})},onRequestCompletelyPresented:function(e){return n.forEach(function(n){var t;return null===(t=n.onRequestCompletelyPresented)||void 0===t?void 0:t.call(n,e)})},onSuggestionExplicitlyDismissed:function(e,t){return n.forEach(function(n){var r;return null===(r=n.onSuggestionExplicitlyDismissed)||void 0===r?void 0:r.call(n,e,t)})},onSuggestionAccepted:function(e,t){return n.forEach(function(n){var r;return null===(r=n.onSuggestionAccepted)||void 0===r?void 0:r.call(n,e,t)})}}}})},24830:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(23369),d=t(62580);function p(){var e,n,t,i,o=(0,d.gc)("completeCodeEngine").preferences,l=(e=(0,r._)({},s,void 0),a.I(c,e)).data,p=null==o?void 0:o.completeCodeEngine;if(p&&(null==l?void 0:null===(n=l.currentUser)||void 0===n?void 0:n.hasOverride)&&u.Qu.has(p))return{engine:p,settings:u.W_[p]};var f=null!==(i=null==l?void 0:null===(t=l.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==i?i:u.T3;return{engine:f,settings:u.W_[f]}}},72769:(e,n,t)=>{"use strict";t.d(n,{DB:()=>m,Ay:()=>v,mS:()=>g});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  fragment CompleteCodeAuthorization on OrgAuthorizations {\n    useAdvancedModel: useAiModel(model: advanced) {\n      isAuthorized\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(['\n  query CompleteCode($orgId: String) {\n    currentUser {\n      id\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...CompleteCodeAuthorization\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ...CompleteCodeAuthorization\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ',"\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(31909),f=t(81536),h=t(83733),m=function(e){return e.None="None",e.Basic="Basic",e.Pro="Pro",e.BackendOnly="BackendOnly",e}({});function g(e){return"None"!==e&&"BackendOnly"!==e}function v(){var e,n,t,i,o,l,s=(0,h.A)(),u=(0,f.R)(s),m=u.orgId,g=u.loading,v=(e={variables:{orgId:m},skip:g},n=(0,r._)({},c,e),a.I(d,n)),w=v.data,y=v.loading,b=(0,p.f)().isTeamWithAiDisabled,S=null==w?void 0:w.currentUser;return!S||S.hasKillswitch||b||y||g?"None":m?(null===(t=w.currentUser)||void 0===t?void 0:t.org.__typename)==="Org"&&(null===(i=w.currentUser)||void 0===i?void 0:i.org.authorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic":(null===(o=w.currentUser)||void 0===o?void 0:o.personalOrgAuthorizations.__typename)==="OrgAuthorizations"&&(null===(l=w.currentUser)||void 0===l?void 0:l.personalOrgAuthorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic"}},61913:(e,n,t)=>{"use strict";t.d(n,{A:()=>e6});var r=t(13454),i=t(5482),o=t(30758),a=t(55195),l=t(78542);function s(e){return JSON.stringify({text:e})+"\n"}var c=function(){function e(){(0,l._)(this,e),this.list=[]}var n=e.prototype;return n.add=function(e,n,t){this.list.push({prefix:e,suggestion:n,tokens:t}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,n){return n.suggestion.length-e.suggestion.length})},n.retrieve=function(e,n){for(var t=0;t<this.list.length;t++){var r=this.list[t],i=r.prefix,o=r.suggestion,a=r.tokens;if(!(2*a<n)){if(e===i)return s(o);if(!(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<n)){var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var u=c.slice(e.length);if(u.trim().length)return s(u)}}}}}return null},e}(),u=t(29451),d=t(66144),p=t(16608),f=t(79604),h=d.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),m=t(97491),g=t(74748),v=t(2168),w=t(50117),y=d.sU.define({create:function(){return null},update:function(e,n){if(n.annotation(w.A)||!n.state.field(g.RJ).stopped)return null;if(!n.docChanged&&!n.selection)return e;var t=n.newDoc,r=n.newSelection.main.head;return n.annotation(d.ZX.remote)?null!==e&&(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:n.selection&&n.isUserEvent("select")?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?Date.now():null:n.docChanged&&null!==e?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:e}}),b=function(){function e(n){(0,l._)(this,e),this.view=n,this.timeout=null}var n=e.prototype;return n.update=function(e){var n=this,t=e.startState.field(y),r=e.state.field(y);t!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){n.timeout=null,n.view.dispatch({effects:[v.hB.of(v.l9.NOW)]})},2500)))},n.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),S=p.Z9.fromClass(b,{provide:function(){return y}}),Y=t(39487),A=t(20837),C=t(43952),x=t(81272),_=t(2814),k=t(94789),D=function(e){return e[e.HIGH=1]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-1]="LOW",e}({}),E=d.sj.define({combine:function(e){var n=e.filter(Boolean);return function(e){return n.map(function(n){return"function"==typeof n?n(e):n}).filter(Boolean).flat()}}});function R(e,n){switch(e){case"coffeescript":case"dockerfile":case"elixir":case"julia":case"makefile":case"perl":case"python":case"python 3":case"shellscript":case"terraform":case"yaml":return"# ".concat(n);case"sql":case"lua":return"-- ".concat(n);case"html":case"svelte":case"xml":case"xsl":return"\x3c!-- ".concat(n," --\x3e");case"css":return"/* ".concat(n," */");case"tex":case"latex":case"matlab":return"% ".concat(n);case"vb":return"' ".concat(n);case"markdown":return"[]: # ".concat(n);case"handlebars":return"{{!-- ".concat(n," --}}");case"haml":return"-# ".concat(n);case"erb":return"<%# ".concat(n," %>");default:return"// ".concat(n)}}var I=function(){function e(n){if((0,l._)(this,e),this.priority=null!==(t=n.priority)&&void 0!==t?t:D.NORMAL,this.header=n.header,this.segments=n.segments,this.accepted=0,this.curLength=0,this.segments.length){var t,r=this.header?this.header.length+1:0;this.maxLength=r+this.segments.reduce(function(e,n){return e+n.length},0),this.minLength=r+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var n=e.prototype;return n.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var n=this.segments[this.index-1],t=0===this.accepted&&this.header?this.header.length+n.length+1:n.length;return t>e?0:(this.accepted++,this.curLength+=t,t)},n.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},n.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+this.segments.slice(this.index).join("").trimEnd()},e.acceptSegments=function(e,n){for(var t=n;n>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value.acceptSegment(n);c&&(n-=c,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)break}return t-n},(0,Y._)(e,[{key:"index",get:function(){return this.segments.length-this.accepted}}]),e}(),F=function(){function e(n){(0,l._)(this,e),this.priority=n,this.chunks=[],this.size=0}var n=e.prototype;return n.add=function(e){this.chunks.push(e),this.size+=e.maxLength},n.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},n.accept=function(){I.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(n){var t=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=r.get(c.priority);u||(u=new e(c.priority),t.push(u),r.set(c.priority,u)),u.add(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t},(0,Y._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,n){return e+n.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}(),T=function(){function e(n,t){(0,l._)(this,e),this.cooldown=n,this.ignored=t}var n=e.prototype;return n.delay=function(n){return new e(Date.now()+n,this.ignored)},n.ignore=function(n){return this.ignored!==n?new e(this.cooldown,n):this},n.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},n.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},n.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},n.handle=function(e,n){switch(n.reason){case g.UW.FULLY_TYPED_INTO:case g.UW.ACCEPTED_BY_USER:return this.clear();case g.UW.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case g.UW.INCOMPATIBLE_DOCUMENT_CHANGE:case g.UW.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},n.isIgnored=function(e){return null!==this.ignored&&function(e,n){for(var t=Math.max(e.length,n.length),r=0,i=0;i<t;i++)e[i]!==n[i]&&r++;return 1-r/t}(this.ignored,e)>=.8},(0,Y._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),P=d.sj.define({combine:function(e){return!e.length||e[0]}}),L=d.sU.define({create:function(){return new T(null,null)},update:function(e,n){if(!n.state.facet(P)||(e=e.tick()).cooling)return e;var t=n.startState.field(g.RJ,!1),r=n.state.field(g.RJ,!1);return t&&r&&t.presented&&r.stopped?e.handle(t,r):e}}),U=t(75895),N=t(15892),O=t.n(N),M=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],B=M.reduce(function(e,n){return Math.max(e,n.length)},0),H=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(B,"}$")),z=null,W=function(){function e(n){var t=this;(0,l._)(this,e),this.config=n,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!t.finished){var e,n;t.finished=!0,null===(e=(n=t.config).onFinished)||void 0===e||e.call(n,null)}})}var n=e.prototype;return n.start=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,g,v,w,y,b,S,Y,A,C,x,_,k,D,E,R,I,F,T,P;return(0,i.YH)(this,function(i){switch(i.label){case 0:i.trys.push([0,13,,14]),o="",a=!0,l=!1,s=void 0;try{for(c=e.config.prefix.iter(-1)[Symbol.iterator]();!(a=(u=c.next()).done)&&(p=(d=u.value).trimEnd(),o=(d?d.slice(p.length):"\n")+o,!(p.length>0));a=!0);}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}f=e.config.prefix.length-o.length,h=o?e.config.prefix.slice(0,f):e.config.prefix,v=e.config.request({prefix:h.toString(),suffix:null===(r=e.config.suffix)||void 0===r?void 0:r.toString(),header:null!==(g=e.config.header)&&void 0!==g?g:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),w=!0,y=!!o,b="",S=!1,Y=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),C=(0,U._)(v),i.label=2;case 2:return[4,C.next()];case 3:if(!(S=!(x=i.sent()).done))return[3,5];if(_=x.value,y){if(b+=_,(0,m.Im)(_))return[3,4];if(y=!1,k=(0,m.BA)(b),D=(0,m.BA)(o),!k.indentation.startsWith(D.indentation)||!!D.newlines!=!!k.newlines)return e.abort(),[3,5];_=k.indentation.slice(D.indentation.length)+k.content}if(function(e,n){if(n){var t,r;"string"!=typeof n&&(n=n.sliceString(Math.max(0,n.length-2*B))),e=(null!==(r=null===(t=n.match(H))||void 0===t?void 0:t[0])&&void 0!==r?r:n)+e}if(null===z){var i=M.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return O()(e.toLowerCase().trim())}).sort(function(e,n){return n.length-e.length}).join("|"),o="\\b|\\d|_";z=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return z.test(e)}(_,w?h:e.suggestion))return e.abort(),null===(E=(R=e.config).onError)||void 0===E||E.call(R,Error("Slur detected in output")),[3,5];if(e.suggestion+=_,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,w))return e.abort(),[3,5];w=!1,i.label=4;case 4:return S=!1,[3,2];case 5:return[3,12];case 6:return I=i.sent(),Y=!0,A=I,[3,12];case 7:if(i.trys.push([7,,10,11]),!(S&&null!=C.return))return[3,9];return[4,C.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(Y)throw A;return[7];case 11:return[7];case 12:return[3,14];case 13:return F=i.sent(),e.aborted||e.abort(),F instanceof DOMException&&"AbortError"===F.name||null===(T=(P=e.config).onError)||void 0===T||T.call(P,F),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null===(n=(t=e.config).onFinished)||void 0===n||n.call(t,e.suggestion),[2,e.suggestion]}})})()},n.abort=function(){this.aborted||this.abortController.abort()},n.then=function(e,n){return this.promise.then(e,n)},(0,Y._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),G=t(9338),V=t(19074),j=t(96057),Z=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.text=n,this.pos=t,this.docA=r,this.treeA=i,this.parser=o}var n=e.prototype;return n.hasTree=function(){return null!==this.parser&&null!==this.treeA},n.update=function(n){var t=this,r=new e(n,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,j.s)(this.text,n),o=[];i.iterChanges(function(e,n,r,i,a){o.push({from:t.pos+e,to:t.pos+n,insert:a})});var a=d.VR.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,Y._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,m.Im)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=d.VR.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,V.B)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,V.B)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,G.G2)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,G.gJ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,G.gJ)(this.treeB,this.pos):null),this._blockB}}]),e}(),q=t(27189),K=t(72683);function $(e,n,t){var r,i=null!==(r=e.prop(n<0?K.uY.openedBy:K.uY.closedBy))&&void 0!==r?r:null;if(null===i||t&&!i.includes(t.name)){if(!t)return null;i=i?(0,q._)(i).concat([t.name]):[t.name]}return i}function J(e,n,t){var r=$(e.type,n,t);if(null===r)return null;for(var i=e.cursor(),o=0;n<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==$(i.type,n)){o++;continue}if(null!==$(i.type,-n)){if(0===o)return null;o--}}return null}function Q(e){return e.split("").reverse().join("")}function X(e){if(!e[0]||1===e.length)return e[0]||"";for(var n=0;e[0][n]&&e.every(function(t){return t[n]===e[0][n]});)n++;return e[0].substring(0,n)}function ee(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=t;a++){var l=!1;if(o.length<a+n)break;for(var s=n;s>0;s--)if(o[o.length-s]!==o[o.length-s-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}var en=function(e,n){return e.length<n.length},et=function(e,n){var t=""===e?1:parseInt(e,10),r=parseInt(n,10);return!(isNaN(t)||isNaN(r))&&t+1===r};function er(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:en;if(e.length<n)return{halt:!1};var o=e.slice(-1*n),a=X(o),l=Q(X(o.map(Q)));if(a.length<t||l.length<r)return{halt:!1};for(var s=null,c=0;c<n;c++){var u=o[c].substring(a.length),d=u.substring(0,u.length-l.length);if(!(!s||i(s,d)))return{halt:!1};s=d}return{halt:!0,truncateLine:e.length-n}}var ei=[function(e){return function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<n;r++){var i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e.length<n||e[e.length-1].trim().length<t?{halt:!1}:e[e.length-1]===e[e.length-n-1]?{halt:!0,truncateLine:e.length-n}:{halt:!1}}(e,r,t);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return er(e,3,6,3,en)},function(e){return er(e,3,6,1,et)},function(e){return ee(e,12,12," ")},function(e){return ee(e,8,16,"")}],eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;return function(n){for(var t=n.split("\n"),r=t.slice(0,-1),i=0;i<e.length;i++){var o=e[i](t);if(o.halt)return{haltAfter:!0,replacementSuggestion:t.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}(),ea=t(70891),el=/[([{]+(?=\s*$)/,es=/[)\]};]+\s*$/,ec=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.source=n,this.pos=t,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,m.Im)(i),this.text=this.empty?"":r+i,this.lines=(0,m.uz)(i)}var n=e.prototype;return n.with=function(n){var t=this.source,r=this.content,i=this.newlines;if("source"in n&&void 0!==n.source){t=n.source;var o=(0,m.BA)(t);r=o.indentation+o.content,i=o.newlines}if("text"in n&&void 0!==n.text){var a=(0,m.BA)(n.text);r=a.indentation+a.content,i=a.newlines}"content"in n&&void 0!==n.content&&(r=n.content),"newlines"in n&&void 0!==n.newlines&&(i=n.newlines);var l=this;if(t!==this.source||r!==this.content||i!==this.newlines){var s=this.ctx.update((0,m.Im)(r)?"":i+r);l=new e(t,this.pos,i,r,s)}return!l.empty&&n.process&&(l="boolean"==typeof n.process?l.process():l.process(n.process)),l},n.slice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?this.with({text:this.text.slice(e,n)}):this.with({content:this.content.slice(e,n)})},n.splice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+n);return r?this.with({text:o+t+a}):this.with({content:o+t+a})},n.clip=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return this},n.stopAtLine=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?this.newlines.length:0;if(e<0||e>this.lines.length+t)throw Error("Index out of range: "+e);if(n&&e<t)return this.with({text:this.newlines.slice(0,e)});for(var r=e-t;r<this.lines.length&&(0,m.zb)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},n.removeIncompleteLine=function(){if(1===this.lines.length)return this;var e=this.lines[this.lines.length-1];return(0,m.Im)(e)||es.test(e)?this:this.slice(0,this.content.length-e.length)},n.trimEnd=function(){return this.with({content:this.content.trimEnd()})},n.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},n.cutSuggestion=function(){if(this.empty)return this;if((0,m.zb)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,G.gu)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var n=this.pos+this.lines[0].length,t=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=n}),r=t.length?t[t.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},n.filter=function(){var e=eo(this.content).replacementSuggestion;return e?this.with({content:e}):this},n.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,m.Im)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},n.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var n=this.ctx.docA.lineAt(e.pos);if(n.number===this.ctx.docA.lines)return this;var t=e.text.slice(e.offset),r=t.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?t.slice(r+1):t;return(0,m.Im)(a)?this:(!i&&(0,m.Im)(n)&&(a=n.text+a),a===this.ctx.docA.line(n.number+1).text)?this.slice(0,o,!0):this},n.removeTrailingOpenBrackets=function(){var e=el.exec(this.content);return e?this.splice(e.index,e.length):this},n.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.removeIncompleteLine().trimEnd().removeNewlinesIfOnEmptyLine():this.removeIncompleteLine().removeNewlinesIfOnEmptyLine().cutSuggestion().filter().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,m.BA)(n),l=a.indentation+a.content,s=a.newlines,c=new Z((0,m.Im)(l)?"":s+l,t,r,i,o);return new e(n,t,s,l,c)},(0,Y._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,n=function(e){var n=function(e){var n,t,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;n=e.doc,t=e.tree;var s=d.VR.of({from:a,to:n.length,insert:o},n.length);r=s.apply(n),i=(0,V.B)({parser:l,changes:s,text:r,base:t})}else n=e.docA,t=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:n,treeA:t,docB:r,treeB:i}}(e),t=n.insertion,r=n.pos,i=n.docA,o=n.treeA,a=n.docB,l=n.treeB,s=[],c=[],u=l.cursor();do{if(null===$(u.type,-1))continue;var p=u.node,f=J(p,-1);if(f&&f.to<=r){var h=function(e,n){for(var t=n.resolveInner(e.from,1).node;t&&t.from===e.from;){if(t.type===e.type)return t;t=t.parent}return null}(f,o);if(h){s.push({openA:h,closeB:p});var m=J(h,1,p.type);m&&m.from>=r&&c.push(m)}}}while(u.prev()&&u.to>r);if(0===s.length||0===c.length)return null;var g=[],v=!0,w=!1,y=void 0;try{for(var b,S=s[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value,A=Y.openA,C=Y.closeB,x=a.sliceString(C.from,C.to),_=$(A.type,1,C.type);if(null===_)throw Error("Unexpected null matching types");for(var k=0;k<c.length;k++){var D=c[k];if(_.includes(D.name)&&i.sliceString(D.from,D.to)===x){c.splice(0,k+1),g.unshift({closeA:D,closeB:C});break}}}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}if(0===g.length)return null;var E=[{text:t,pos:r,index:0,offset:0}],R=0,I=!0,F=!1,T=void 0;try{for(var P,L=g[Symbol.iterator]();!(I=(P=L.next()).done);I=!0){var U=P.value,N=U.closeA,O=U.closeB,M=E.pop();if(!M)throw Error("Unexpected empty split");var B=O.from-r,H=0;if(M.pos<N.from){for(var z=1;function(e,n,t,r){var i=e.sliceString(t,t+1);return i===n.sliceString(r,r+1)&&""===i.trim()}(i,a,N.from-z,O.from-z)&&N.from-z>=M.pos&&O.from-z>=r;)z++;H=z-1}B-=H;var W={text:t.slice(R,B),pos:M.pos,index:M.index,offset:M.offset},G={text:t.slice(B),pos:N.to,index:B,offset:N.to-N.from+H};R=B,E.push(W,G)}}catch(e){F=!0,T=e}finally{try{I||null==L.return||L.return()}finally{if(F)throw T}}return""===E[E.length-1].text&&E.pop(),E}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});n&&(this._segments=n)}null!==(e=this._segments)&&void 0!==e||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new d.vB,n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=d.EY.of((0,m.uz)(a.text)),s=new ea.kp(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),eu=t(62506),ed=function(){function e(n){(0,l._)(this,e),this.view=n,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var n=e.prototype;return n.dispatchSuggestion=function(e){this.view.dispatch({effects:g.xq.of(e)})},n.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},n.requestSuggestion=function(e){var n,t,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===v.l9.NOW){this.requestSuggestionImmediately();return}var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!==(t=this.config.debounceTimeInsideWord)&&void 0!==t?t:0:null!==(n=this.config.debounceTimeOutsideWord)&&void 0!==n?n:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},n.requestSuggestionImmediately=function(){var e,n,t,r,i=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,m.Ph)(this.view.state.doc,this.view.state.selection.main.head)){var o=this.config,l=this.view.state,s=l.selection.main.head,c=l.doc,d=(0,x.mv)(l),p=null!==(n=null===(e=l.facet(x.BH))||void 0===e?void 0:e.parser)&&void 0!==n?n:null,f=this.fileTypeConfig,h={skipComplexProcessing:null!==(t=f.skipComplexProcessing)&&void 0!==t&&t},w=l.facet(E),y=function(e){var n=e.doc,t=e.pos,r=e.path,i=e.language,o=e.infill,a=e.context,l=e.limit,s=void 0===l?u.HB:l,c=e.reserved,d=void 0===c?u.CB:c,p=["Language: ".concat(i),"Path: ".concat(r)].map(function(e){return R(i,e)}).join("\n")+"\n";if(p.length>s)throw Error("Cannot fit required header parts in prompt");if(null==a?void 0:a.length){var f=function(e,n){if((n-=2*e.length)<=0)return null;var t=e.map(function(e){return new I(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=n}).sort(function(e,n){return e.priority===n.priority?e.minLength-n.minLength:n.priority-e.priority});if(!t.length)return null;var r=F.fromChunkViews(t),i=r.reduce(function(e,n){return e+n.size},0);if(i>n){var o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.size>n&&(i-=u.size-n,u.resize(n))}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}for(;i>n;){var d=1,p=!0,f=!1,h=void 0;try{for(var m,g=r[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(!v.empty){var w=Math.max(0,v.size-d);i-=v.size-w,v.resize(w),d++}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}var y=!0,b=!1,S=void 0;try{for(var Y,A=r[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value;C.empty||C.accept()}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}var x=r.reduce(function(e,n){return e+n.accepted},0);x<n&&I.acceptSegments(t,n-x)}else t.forEach(function(e){return e.acceptAll()});return t.map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null}(a,Math.max(d-p.length-2,s-t-p.length-2));f&&(p=f+"\n\n"+p)}var h=function(e,n,t){for(var r=e.slice(0,n);r.length>t;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-t);return r}(n,t,s-p.length),m=o?function(e,n){var t=e.slice(n);if(1===t.lines)return t;var r=0,i=null,o=!0,a=!1,l=void 0;try{for(var s,c=t.iterLines()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(r++,""!==u&&u.trimStart()===u){i=t.line(r);break}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i?t.slice(0,i.to):t}(n,t):null;if(p.length+h.length>s)throw Error("Prompt is over the maximum length");return{prefix:h,suffix:m,header:p}}({doc:c,pos:s,path:f.path,language:f.id,infill:null!==(r=this.config.infill)&&void 0!==r&&r,context:w(this.view)}),b=y.prefix,S=y.suffix,Y=y.header,A=(0,G.G2)(c,d,s)?u.nm.EMPTY_BLOCK:u.nm.DEFAULT;this.lastPrefixLength=b.length,o.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new W({request:o.request,language:f.id,maxTokens:A,prefix:b,suffix:S,header:Y,onTextReceived:function(e,n){if(n&&i.listeners.onRequestFirstEmit(i.view),o.backendOnly){i.listeners.onRequestIgnoredBackendOnly(i.view);return}if(i.suggestion.stopped||!n&&i.suggestion.slotted)return!1;var t=i.suggestion.slotted?i.suggestion.upgrade(ec.create(e,s,c,d,p).process(h)):i.suggestion.with({source:e,process:h});if(t.stopped||t.suggestion.empty)return!1;i.dispatchSuggestion(t)},onFinished:function(e){var n=i.queued;if(i.queued=!1,!o.backendOnly){if(e&&i.suggestion.active){var t=i.suggestion.suggestion.source!==e?i.suggestion.with({source:e,process:h}):i.suggestion;if(!t.stopped&&!t.suggestion.empty&&!i.regulator.isIgnored(t.suggestion.content)){i.dispatchSuggestion(t.presented?t:t.present()),i.listeners.onRequestCompletelyPresented(i.view);return}}i.dismiss(g.UW.INCOMPATIBLE_SUGGESTION),n&&i.requestSuggestion(v.l9.ENQUEUE),""===e&&i.listeners.onRequestEndedWithNoSuggestion(i.view)}},onError:function(e){a.v4(function(n){n.setExtra("prefix",b.toString()),n.setExtra("suffix",null==S?void 0:S.toString()),n.setExtra("header",Y),n.setExtra("maxTokens",A),n.setExtra("filePath",f.path),n.setExtra("language",f.id),n.setExtra("selection-head",s),n.setExtra("previous-character",c.sliceString(s-1,s)),n.setTag("ghostwriter",!0),a.Cp(e)})}})}},n.postUpdate=function(e){var n=e.startState.field(g.RJ,!1),t=e.state.field(g.RJ,!1);n&&t&&n.presented&&t.stopped&&t.reason===g.UW.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,n),(0,_.$H)(e,h,eu.Md,eu.O7)&&this.dismiss(),(0,_.$H)(e,g.RJ)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,v.SQ)(e.transactions);switch(r){case v.l9.STOP:this.active&&this.dismiss();break;case v.l9.ENQUEUE:case v.l9.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},n.destroy=function(){this.destroyed=!0,this.dismiss()},(0,Y._)(e,[{key:"config",get:function(){return this.view.state.facet(h)}},{key:"listeners",get:function(){return this.view.state.facet(k.q)}},{key:"suggestion",get:function(){return this.view.state.field(g.RJ)}},{key:"regulator",get:function(){return this.view.state.field(L)}},{key:"fileTypeConfig",get:function(){var e,n=this.view.state.facet(eu.Md),t=this.view.state.facet(eu.O7),r=null==t?void 0:null===(e=t.getFeature("ai"))||void 0===e?void 0:e.complete;return n&&t&&(null==r?void 0:r.enabled)?(0,C._)((0,A._)({},r),{id:t.id,path:n}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),ep=p.Z9.fromClass(ed,{provide:function(e){return p.Lz.updateListener.of(function(n){var t;null===(t=n.view.plugin(e))||void 0===t||t.postUpdate(n)})}}),ef=function(){function e(n){(0,l._)(this,e),this.view=n,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),n.dom.addEventListener("touchstart",this.touchstart)}var n=e.prototype;return n.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,n=this.view.viewport;if(n.from>e||n.to<e)return!1;var t=this.view.state.field(g.RJ,!1);return!!(null==t?void 0:t.presented)},n.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},n.touchFor=function(e){if(!this.gesture)return null;var n=!0,t=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null},n.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var n=e.changedTouches[0];this.gesture={id:n.identifier,start:{x:n.clientX,y:n.clientY},end:{x:n.clientX,y:n.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},n.touchmove=function(e){var n=this.touchFor(e);if(this.gesture&&n){if(this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(t>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},n.touchend=function(e){var n=this.touchFor(e);if(this.gesture&&n){this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY;var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);t<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,f.R)(this.view),e.preventDefault()),this.stop()}},n.touchcancel=function(e){this.touchFor(e)&&this.stop()},n.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},n.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),eh=p.Z9.fromClass(ef),em=t(68062),eg=d.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null},enables:function(e){return[h.compute([e],function(n){return n.facet(e)}),g.RJ,v.Lf,ep,eh,S,L,d.Nb.high(p.w4.compute([e],function(n){var t=n.facet(e),r=[];return(null==t?void 0:t.keyAcceptSuggestion)&&r.push({key:(0,em.bK)(t.keyAcceptSuggestion),run:f.R}),(null==t?void 0:t.keyDismissSuggestion)&&r.push({key:(0,em.bK)(t.keyDismissSuggestion),run:f.b}),r}))]}}),ev=t(75008),ew=t(90997),ey=[];function eb(e){if(!(e.length>800)){var n=ey.indexOf(e);-1!==n&&ey.splice(n,1),ey.unshift(e),ey.length>10&&ey.pop()}}var eS=!1;function eY(e,n){var t=(0,ew.i)(n.state),r=t.text,i=t.linewise;if(r&&r.trim()){if(i){var o=r.split(n.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;eb(d)}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}else eb(r)}}var eA=[p.Z9.define(function(){return function(){if(!eS){eS=!0;var e=function(e){var n,t=null===(n=document.getSelection())||void 0===n?void 0:n.toString();t&&t.trim()&&Promise.resolve().then(function(){e.defaultPrevented||eb(t)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}}(),{}}),d.Nb.highest(p.Lz.domEventObservers({copy:function(e,n){return eY(e,n)},cut:function(e,n){return eY(e,n)}})),E.of(function(e){if(!ey.length)return null;var n=e.state.facet(eu.O7);if(!n)return null;var t=function(e){return R(n.id,e)},r=(0,ev._)(ey),i=r[0],o=r.slice(1),a=[];if(i&&i.trim()){var l=t("Consider the current clipboard:"),s=i.trimEnd().split("\n").map(function(e){return t(e)}).join("\n");a.push({header:l,segments:[s],priority:D.HIGH})}var c=o.filter(function(e){return e&&e.trim()});if(c.length){var u=t("Consider the clipboard history:"),d=c.map(function(e){return e.trimEnd().split("\n").map(function(e,n){return 0===n?t("- ".concat(e)):t("  ".concat(e))}).join("\n")}).reverse();a.push({header:u,segments:d})}return a.length?a:null})],eC=t(66622),ex=t(60762),e_=t(21177),ek=t(36601),eD=t(82845),eE=t(53654),eR=/\n\n(?![^\S\n])/g,eI=new(function(){function e(){(0,l._)(this,e),this.map=new Map}var n=e.prototype;return n.removeExpired=function(){if(this.map.size){var e=Date.now(),n=!0,t=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,eC._)(i.value,2),l=a[0],s=a[1];e-s.timestamp>6e4&&this.map.delete(l)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.get=function(e){return this.removeExpired(),this.map.get(e)},n.add=function(e,n,t){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,s=this.map.values()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;(!r||c.timestamp<r.timestamp)&&(r=c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:n,content:t,timestamp:Date.now()})},n.clear=function(){this.map.clear()},e}()),eF=function(){function e(n,t,r){var i=this;(0,l._)(this,e),this.view=n,this.readFile=t,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var n=e.prototype;return n.updateChunks=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,g,v,w;return(0,i.YH)(this,function(y){switch(y.label){case 0:if(r=[],e.chunks=r,o=e.view.state.facet(eu.Md),a=e.view.state.facet(eu.O7),!o||!a)return[2];"all"===(s=null!==(l=null===(t=a.features.ai)||void 0===t?void 0:null===(n=t.complete)||void 0===n?void 0:n.groups)&&void 0!==l?l:[])&&(s=[]),c=e.recentFiles.current.filter(function(e){return e!==o&&(0,eE.m6)(e)}),u=!0,d=!1,p=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),f=function(){var n,t,l,c,u,d,p,f,h,v,w,y,b,S,Y;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(n=g.value,p=null==(d=null!==(u=null==(c=eI.get(n))?void 0:c.type)&&void 0!==u?u:eD.Jh.from(n))?void 0:null===(t=d.features.ai)||void 0===t?void 0:t.complete,!d||!(null==p?void 0:p.enabled))return[2,"continue"];if(!(d.id===a.id||"all"===p.groups||(null===(l=p.groups)||void 0===l?void 0:l.some(function(e){return s.includes(e)}))))return[3,3];if(void 0!==(f=null==c?void 0:c.content))return[3,2];return[4,e.readFile(n)];case 1:if(h=i.sent(),e.destroyed||e.chunks!==r)return[2,{v:void 0}];if(null===h)return[2,"continue"];f=h,eI.add(n,d,f),i.label=2;case 2:var A;if(!(v=(A=(A=f).trim())?A.split(eR).map(function(e){return e.trim()}).filter(Boolean):[]).length)return[2,"continue"];if(w=R(a.id,"Consider this snippet from ".concat((0,e_.Aj)(n,o))),y=R(a.id,""),b=v.map(function(e){return(0,m.uz)(e).map(function(e){return R(a.id,e)}).join("\n")+"\n".concat(y,"\n")}),S=r.length,Y=D.NORMAL,S<2?Y=D.HIGH:S>=5&&(Y=D.LOW),r.push({header:w,segments:b,priority:Y}),r.length>=10)return[2,"break"];i.label=3;case 3:return[2]}})},h=c[Symbol.iterator](),y.label=2;case 2:if(u=(g=h.next()).done)return[3,5];return[5,(0,i.Ju)(f())];case 3:if(v=y.sent(),"object"===(0,ex._)(v))return[2,v.v];if("break"===v)return[3,5];y.label=4;case 4:return u=!0,[3,2];case 5:return[3,8];case 6:return w=y.sent(),d=!0,p=w,[3,8];case 7:try{u||null==h.return||h.return()}finally{if(d)throw p}return[7];case 8:return[2]}})})()},n.update=function(e){(0,_.$H)(e,eu.Md,eu.O7)&&this.updateChunks()},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eT=new ek.k(function(e,n){return e&&n?p.Z9.define(function(t){return new eF(t,e,n)},{provide:function(e){return E.of(function(n){var t,r;return null!==(r=null===(t=n.plugin(e))||void 0===t?void 0:t.chunks)&&void 0!==r?r:null})}}):null}),eP=t(24830),eL=t(42121),eU=t(42741),eN=t(51439),eO=t(97096);function eM(){return(eM=(0,eU._)(function(e){var n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e.getReader(),i.label=1;case 1:return[4,(0,eL._)(n.read())];case 2:if(r=(t=i.sent()).done,o=t.value,r)return[3,4];return[4,o];case 3:return i.sent(),[3,1];case 4:return n.releaseLock(),[2]}})})).apply(this,arguments)}function eB(){return(eB=(0,eU._)(function(e){var n,t,r,o,a,l,s,c,u,d,p,f,h,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=new TextDecoder("utf-8"),t="",r=!1,o=!1,i.label=1;case 1:i.trys.push([1,11,12,17]),l=(0,U._)(function(e){return eM.apply(this,arguments)}(e)),i.label=2;case 2:return[4,(0,eL._)(l.next())];case 3:if(!(r=!(s=i.sent()).done))return[3,10];c=s.value,u=n.decode(c,{stream:!0}),t+=u,d=void 0,i.label=4;case 4:if(!(-1!==(d=t.indexOf("\n\n"))))return[3,9];if(!t.startsWith("data: ")||!("text"in(p=JSON.parse(t.slice(6,d)))))return[3,8];f=p.text.split("\n"),h=0,i.label=5;case 5:if(!(h<f.length))return[3,8];return[4,JSON.stringify({text:f[h]+"\n"})+"\n"];case 6:i.sent(),i.label=7;case 7:return h++,[3,5];case 8:return t=t.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=i.sent(),o=!0,a=m,[3,17];case 12:if(i.trys.push([12,,15,16]),!(r&&null!=l.return))return[3,14];return[4,(0,eL._)(l.return())];case 13:i.sent(),i.label=14;case 14:return[3,16];case 15:if(o)throw a;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}var eH=t(72769),ez=t(21980),eW=t(34679),eG=new Map,eV={beforeCompletion:function(e){a.ZQ({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var n=eW.gv.add(e),t=ez.vF.timeStart({engine:e.engine,replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eG.set(n,t),n},afterCompletion:function(e,n,t,r){switch(e){case"aborted":eW.gv.abort(r),eG.delete(r);break;case"success":a.ZQ({category:"ghostwriter",message:"Suggestion emitted: "+t.partialSuggestion,level:"debug"});var i,o=eG.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:t.fromCache,length:null===(i=t.partialSuggestion)||void 0===i?void 0:i.length}),eG.delete(r);break;case"finished":eW.gv.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:t.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,n){n&&(eW.gv.abort(n),eG.delete(n)),ez.vF.error("CompleteCode: error in completion provider",{err:String(e)})}},ej=t(99813),eZ=t(72653),eq=t(63679),eK=t(97285),e$="ai.codecomplete.lastTooltipHintTimestamp",eJ=(0,ej.eU)({tooltipOpen:!1,consecutiveRejections:0}),eQ=t(82436),eX=t(4350),e0=t(62580),e1=t(83733),e2=t(32904),e5=t(24481),e4=t(75820),e3=t(88859),e8=new ek.k(function(e,n,t,r,i,o,a,l,s){var c,d;return e?(n===eH.DB.Pro?(c=u.M,d=u.M):(c=a,d=a),[eg.of({request:o,infill:i,backendOnly:n===eH.DB.BackendOnly,debounceTimeOutsideWord:c,debounceTimeInsideWord:d,debounceAlways:n!==eH.DB.Pro,keyAcceptSuggestion:t,keyDismissSuggestion:r}),l?eA:[],s?[]:P.of(!1)]):null}),e7=new ek.k(function(e,n,t,r){if(!e)return null;var i,o,l,s=(i="suggestionPresented",o=null,l=function(){},{queue:function(e){if(!(Math.random()>.1)){o&&clearTimeout(o);var n=function(){(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,(0,A._)({type:i},e))};o=setTimeout(n,500),l=n}},flush:function(){o&&clearTimeout(o),l()},cancel:function(){o&&clearTimeout(o)}});return k.q.of({onDismiss:function(){s.cancel()},onRequestIgnoredBackendOnly:function(){a.ZQ({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:n,filePath:t,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var r=e.plugin(ep);r&&(a.ZQ({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),s.queue({engine:n,filePath:t,prefixLength:r.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){a.ZQ({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:n,filePath:t,reason:"noSuggestion"})},onSuggestionAccepted:function(e,i){var o=e.plugin(ep);o&&(s.flush(),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionAccepted",engine:n,filePath:t,prefixLength:o.lastPrefixLength,suggestionLength:i.suggestion.content.length}),a.ZQ({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==r||r.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var i=e.plugin(ep);i&&(s.flush(),(0,eQ.u4)(eQ.AZ.CODE_SUGGESTION_USED,{type:"suggestionDismissed",engine:n,filePath:t,prefixLength:i.lastPrefixLength}),a.ZQ({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==r||r.recordReject())}})});function e6(e){var n,t,a,l,s,d,p,f,h,m,g,v,w,y=e.filePath,b=(0,e5.A)().fs,S=(0,e1.A)(),Y=(0,e0.gc)("codeSuggestion").preferences,x=(0,eH.Ay)(),_=Y.codeSuggestion&&x!==eH.DB.None;(0,o.useEffect)(function(){eW.gv.toggle(_)},[_]);var k=(0,eP.A)(),D=k.engine,E=k.settings,I=(0,e4.Jn)(eX.Pi.acceptPrimaryCompletion.id),F=(0,e4.Jn)(eX.Pi.cancelCompletion.id),T=null!==(w=null==E?void 0:E.infill)&&void 0!==w&&w,P=(0,e2.A)(function(){return new c},[y,S,D]),L=(t=(n={engine:D,replId:S,provider:(0,e2.A)(function(){var e;return e=(0,r._)(function(e,n){var t,r,o,a,l,s,c,u,d;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,eN.lJ)()?eO.H.production:eO.H.staging,[4,(0,eN.j2)(e.replId,"completions-1")];case 1:return r=i.sent(),o={model:"replit-code-v1-5",context:e.header?e.header+e.prefix:e.prefix,max_tokens:e.maxTokens,stop_words:e.stop},[4,fetch("".concat(t,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},signal:n,body:JSON.stringify(o)})];case 2:if(l=(a=i.sent()).body,!(200!==(s=a.status)))return[3,4];return c=Error.bind,d=(u="Error (".concat(s,") response from /ai/complete: ")).concat,[4,a.text()];case 3:throw new(c.apply(Error,[void 0,d.apply(u,[i.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){return function(e){return eB.apply(this,arguments)}(l)}]}})}),function(n,t){return e.apply(this,arguments)}},[]),cache:P,hooks:eV}).engine,a=n.replId,l=n.provider,s=n.cache,d=n.hooks,(0,o.useCallback)((p=(0,eU._)(function(e){var n,r,o,c,u,p,f,h,m,g,v,w,y,b,S,Y,A,C,x,_,k,D,E,I,F;return(0,i.YH)(this,function(T){switch(T.label){case 0:if(n=e.prefix,r=e.suffix,o=e.header,c=e.language,u=e.maxTokens,p=e.signal,!n)return[2];if(f={prefix:n,suffix:r,header:o,engine:t,maxTokens:u,replId:a,stop:["\n\n","```"]},"markdown"===c&&(f.maxTokens=75,f.stop=[]),h=null==d?void 0:d.beforeCompletion(f),!(null!==(g=s.retrieve(n,u))))return[3,1];return m=(0,eU._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,g];case 1:return e.sent(),[2]}})}),[3,4];case 1:return T.trys.push([1,3,,4]),[4,(0,eL._)(l(f,p))];case 2:return m=T.sent(),[3,4];case 3:if((null==(v=T.sent())?void 0:v.name)==="AbortError")return[2];return null==d||d.erroredCompletion(v instanceof Error?v:Error("Unknown error"),h),[2];case 4:w="",y="",b=!0,S=!1,p.addEventListener("abort",function(){h&&(null==d||d.afterCompletion("aborted",f,{},h)),S=!0}),Y=!1,A=!1,T.label=5;case 5:T.trys.push([5,13,14,19]),x=(0,U._)(m()),T.label=6;case 6:return[4,(0,eL._)(x.next())];case 7:if(!(Y=!(_=T.sent()).done))return[3,12];k=_.value,y+=k,D=void 0,T.label=8;case 8:var P;if(!(-1!==(D=y.indexOf("\n"))))return[3,11];if(E=JSON.parse(y.substring(0,D)).text,y=y.substring(D+1),P=c,I=({replacementSuggestion:E.split("\n").filter(function(e){return!(e.startsWith(R(P,"Language: "))||e.startsWith(R(P,"Path: ")))}).join("\n")}).replacementSuggestion,w+=I,S)return[3,10];return[4,I];case 9:T.sent(),T.label=10;case 10:return!S&&b&&h&&(null==d||d.afterCompletion("success",f,{fromCache:!!g,partialSuggestion:I},h)),b=!1,eo(w).haltAfter&&(S=!0),[3,8];case 11:return Y=!1,[3,6];case 12:return[3,19];case 13:return F=T.sent(),A=!0,C=F,[3,19];case 14:if(T.trys.push([14,,17,18]),!(Y&&null!=x.return))return[3,16];return[4,(0,eL._)(x.return())];case 15:T.sent(),T.label=16;case 16:return[3,18];case 17:if(A)throw C;return[7];case 18:return[7];case 19:if(null===g&&w.trim().length&&s.add(n,w,u),!(!S&&y))return[3,21];return[4,y];case 20:T.sent(),T.label=21;case 21:return h&&(null==d||d.afterCompletion("finished",f,{completeSuggestion:w,fromCache:!!g},h)),[2]}})}),function(e){return p.apply(this,arguments)}),[t,a,s,d,l])),N=(h=(f=(0,eC._)((0,eZ.fp)(eJ),2))[0],m=f[1],g=(0,eq._P)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,o.useEffect)(function(){if(g&&h.tooltipOpen){var e=setTimeout(function(){return m(function(e){return(0,C._)((0,A._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[g,h.tooltipOpen,m]),(0,o.useMemo)(function(){return g?{recordAccept:function(){m(function(e){return(0,C._)((0,A._)({},e),{consecutiveRejections:0})})},recordReject:function(){m(function(e){var n=e.consecutiveRejections+1;if(n>=5){var t=eK.A.get(e$,"number");if(!t||Date.now()-t>=432e6)return eK.A.set(e$,Date.now()),(0,C._)((0,A._)({},e),{consecutiveRejections:n,tooltipOpen:!0})}return(0,C._)((0,A._)({},e),{consecutiveRejections:n})})}}:null},[g,m])),O=(0,o.useCallback)((v=(0,r._)(function(e){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,b.readFile(e)];case 1:if(null!==(n=t.sent()).error)return[2,null];return[2,n.content.toString()]}})}),function(e){return v.apply(this,arguments)}),[b]),M=(0,e3.rE)(),B=(0,eq._P)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:u.Hl,type:"number"}),H=(0,eq._P)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),z=(0,eq._P)({controlName:"flag-completely-different-regulator"}),W=[e8.use(_,x,I,F,T,L,B,H,z),e7.use(_,D,y,N),eT.use(O,M)];return(0,o.useMemo)(function(){return W},W)}},97905:(e,n,t)=>{"use strict";t.d(n,{D3:()=>U,N2:()=>I,Rc:()=>M,XT:()=>L,bX:()=>_,ce:()=>B,pd:()=>T,sb:()=>P,wi:()=>N,y1:()=>F});var r=t(66622),i=t(27189),o=t(94086),a=t(30758),l=t(51439),s=t(87546),c=t(54545),u=t(14349),d=t(63360),p=t(24955),f=t(88966),h=t(10168),m=t(2298),g=t(32842),v=t(93532),w=t(40889),y=t(65599),b=t(8367),S=t(83515),Y=t(14753),A=t(10863),C=t(49321),x=t(68753),_=400,k=[g.wp.p(4),g.wp.center,g.wp.borderRadius(4)],D=(0,h.x)({root:(0,i._)(k).concat([g.wp.cursor.pointer,(0,f.Li)("blurple")]),disabled:(0,i._)(k).concat([(0,f.Li)("grey")])});function E(e){return e.disabled||e.connecting?(0,o.Y)(b.S,{css:D.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.Y)(Y.A,{size:12}):(0,o.Y)(A.A,{size:12})}):(0,o.Y)(b.S,{"data-cy":"ghostwriter-inline-submit",css:D.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.Y)(C.A,{size:12}):(0,o.Y)(A.A,{size:12})})}var R=(0,h.x)({root:[g.wp.py(8),g.wp.pr(8),g.wp.colWithGap(4),g.wp.minWidth(300),g.wp.maxWidth(800),g.wp.position.relative,{fontFamily:p.LU.fontFamilyDefault}],container:[g.wp.position.relative,g.wp.backgroundColor.backgroundDefault],input:[m.b.outlined,g.wp.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[g.wp.p(8),g.wp.pb(0),{caretColor:"initial",fontFamily:p.LU.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:p.LU.foregroundDimmest}}],footer:[g.wp.px(8),g.wp.pr(6),g.wp.rowWithGap(8),g.wp.align.center,g.wp.position.absolute,g.wp.bottom(0),g.wp.left(0),g.wp.width("100%"),{height:36}],footerLeft:[g.wp.flex.growAndShrink(1),g.wp.align.center],footerRight:[{"& button":[g.wp.height(22),g.wp.py(6),g.wp.py(4),g.wp.borderRadius(4)]}],error:[g.wp.color.accentNegativeStronger]}),I=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,u.A)(n);return(0,o.Y)(d.A,{bsod:!0,tags:{ai:!0},extras:{type:t},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.Y)(b.S,{css:R.root,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},F=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError,s=e.innerRef;return(0,o.FD)(I,{type:t,requestMeasure:n,isCodeMirrorPocket:void 0===i||i,children:[(0,o.Y)(b.S,{css:R.container,innerRef:s,children:r}),a?(0,o.Y)(v.N,{icon:(0,o.Y)(x.A,{color:p.LU.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function T(e){var n=(0,c.A)();return(0,o.Y)(b.S,{css:R.input,children:(0,o.Y)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:R.textarea,ref:function(t){e.inputRef.current=t,n.ref(t)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input",disabled:e.disabled})})}function P(e){var n=e.readableModelName,t=e.type;return(0,o.Y)(y.m_,{tooltip:"generateCode"===t?"Generate new code based on this file".concat(n?" using ".concat(n,"."):"."):"Modify selected code based on the context of this file".concat(n?" using ".concat(n,"."):"."),children:(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(S.A,{}),(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify with ".concat(l.BP):"Generate with ".concat(l.BP)})]})})}function L(e){var n=e.loading,t=e.disabled,r=e.promptPresentation,i=e.onClick,a=e.connecting,l=e.escPressed,s=e.codeLengthExceeded;return(0,o.FD)(o.FK,{children:[n?(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(Y.A,{size:12,color:p.LU.blurpleDefault}),r?(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,o.Y)(o.FK,{children:r?(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:s?"Code length exceeded":l?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,o.Y)(E,{connecting:a,loading:n,disabled:t,onClick:i})]})}function U(e){var n=e.id,t=e.inputRef,i=e.onClose,o=e.loading,l=e.onSubmit,c=(0,r._)((0,a.useState)(""),2),u=c[0],d=c[1],p=(0,r._)((0,a.useState)(!1),2),f=p[0],h=p[1];return(0,a.useEffect)(function(){var e="inline-ai/input-state/".concat(n),r=s.A.get(e,"string");r&&d(r);var i=t.current;return function(){if(i){var n=i.value;if(0===n.length){s.A.remove(e);return}s.A.set(e,n)}}},[n,t]),{value:u,setValue:d,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),u.length?f?i():h(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?d(function(e){return e+"\n"}):!e.metaKey&&u.length&&u.trim()&&l();break;default:h(!1)}},escPressed:f}}var N=function(e){var n=(0,r._)(e.children,2),t=n[0],i=n[1];return(0,o.FD)(b.S,{css:R.footer,children:[(0,o.Y)(b.S,{css:R.footerLeft,row:!0,gap:8,children:t}),(0,o.Y)(b.S,{css:R.footerRight,row:!0,gap:4,align:"center",children:i})]})},O=(0,h.x)({default:[g.wp.width("90%")]}),M=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(x.A,{}),colorway:"red",text:"".concat(n," with AI is currently unavailable. Try again later."),closable:!0,closeAction:t})})},B=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(x.A,{}),colorway:"blurple",text:"".concat(n," with AI is unavailable while ").concat((0,l.Nn)({variant:"casual"})," is running."),closable:!0,closeAction:t})})}},42780:(e,n,t)=>{"use strict";t.d(n,{m:()=>nS});var r,i=t(30758),o=t(66144),a=t(16608),l=t(2814),s=t(9907),c=t(78910),u=t(78542),d=t(39487),p=t(88708),f=t(96489),h=t.n(f),m=t(81272),g=t(72683),v=t(86537),w=t(19074),y=o.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),b=o.sU.define({create:function(){return{diff:null,tree:g.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(y),o=null===(t=n.state.facet(m.BH))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===g.PH.empty?e:{diff:null,tree:g.PH.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?n.docChanged&&(a=a.updateA(n.newDoc,n.changes)):(a=v.o.create(n.newDoc,i),l=g.PH.empty),(null===(r=n.startState.facet(m.BH))||void 0===r?void 0:r.parser)!==o&&(l=g.PH.empty),o&&l.length!==a.b.length)?(l=(0,w.B)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),S=t(72275),Y=t(24955),A="cm-transform-diff-line-deletion-base",C="cm-transform-diff-line-deletion",x="cm-transform-diff-text-deletion",_="cm-transform-diff-line-insertion-base",k="cm-transform-diff-line-insertion",D="cm-transform-diff-text-insertion",E="cm-transform-diff-number-marker",R="rgba(180, 0, 0, 0.1)",I="rgba(180, 0, 0, 0.125)",F="rgba(0, 180, 0, 0.1)",T="rgba(0, 180, 0, 0.125)";function P(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var L=a.Lz.theme((r={},(0,S._)(r,".".concat(_,", .").concat(k),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(Y.LU.accentPrimaryDimmest," !important")}}),(0,S._)(r,".".concat(A),{background:P(R),backgroundClip:"content-box"}),(0,S._)(r,".".concat(C),{background:P(R,I),backgroundClip:"content-box"}),(0,S._)(r,".".concat(_),{background:P(F),backgroundClip:"content-box"}),(0,S._)(r,".".concat(k),{background:P(F,T),backgroundClip:"content-box"}),(0,S._)(r,".".concat(D),{display:"inline-block",background:T}),(0,S._)(r,".".concat(x),{display:"inline-block",background:I}),(0,S._)(r,".".concat(E),{opacity:.5}),r)),U=t(61755),N=t(87100),O=function(e){function n(e,t,r){var i;return(0,u._)(this,n),(i=(0,c._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(_):"cm-line ".concat(k),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,w=!1,y=void 0;try{for(var b,S=this.changed[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;if(!(Y.from>=f.to)&&!(Y.to<=d)){var A=document.createElement("span");A.className=D,h={from:Y.from,to:Y.to,dom:A},d<h.from&&m(n,h.from),n.appendChild(A);break}}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&h()(this.line,e.line)&&h()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,d._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(a.xO),M=a.NZ.line({class:A}),B=a.NZ.line({class:C}),H=a.NZ.mark({class:x}),z=a.Lz.decorations.compute([b],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,U.mn.A)===U.DE.COVERED)o.push(B.range(e.from));else{o.push(M.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,U.QG)(e,n,U.mn.A,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(H.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(b,!1);if(!t||!t.diff)return a.NZ.none;var r=t.diff,i=t.tree,o=[],l=!0,s=!1,c=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;if(p.fromA!==p.endA)for(var f=r.a.lineAt(p.fromA),h=r.a.lineAt(p.endA),m=f.number;m<=h.number;m++)n(r.a.line(m),p);else p.fromB===p.endB&&n(r.a.lineAt(p.fromA),p);if(p.fromB!==p.toB)for(var g=r.b.lineAt(p.fromB),v=(0,N.A7)(i,r.b,e,p.fromB,p.endB),w=0;w<v.length;w++){var y=v[w],S=r.b.line(g.number+w),Y=r.getLineChangeType(S.number,U.mn.B)===U.DE.COVERED?null:(0,U.QG)(S,p,U.mn.B,!0),A=a.NZ.widget({widget:new O(y,S.number,Y),block:!0,side:w+1}),C=Math.min(p.endA,r.a.length);o.push(A.range(C))}}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return a.NZ.set(o,!0)}),W=t(38332),G=function(e){function n(e){var t;return(0,u._)(this,n),(t=(0,c._)(this,n)).index=e,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className=E,e.textContent=String(this.index),e},t.eq=function(e){return this.index===e.index},n}(a.wJ),V=W.DY.of(function(e,n){if(n instanceof O)return new G(n.index)}),j=o.sj.define({enables:function(e){return[y.computeN([e],function(n){return n.facet(e)}),b,L,z,V]}}),Z=t(94086),q=t(97905),K=t(29917),$=t(71252),J=t(70121),Q=t(50117);function X(e,n){e.dispatch({effects:J.L.of(null),selection:{anchor:n.range.indexTo,head:n.range.indexTo}}),e.hasFocus||e.focus()}function ee(e,n,t){(0,$.fJ)({view:e,insert:n,scrollIntoView:!0,insertAt:t}),e.dispatch({effects:J.L.of(null)}),e.hasFocus||e.focus()}function en(e,n){e.dispatch({effects:J.M.of(n)})}function et(e,n,t){e.dispatch({changes:{from:t.range.indexFrom,to:t.range.indexTo,insert:n},scrollIntoView:!0,effects:J.L.of(null),annotations:[Q.A.of(!0),K._B.of("full")]}),e.hasFocus||e.focus()}function er(e,n){return e.range.indexFrom===n.range.indexFrom&&e.range.indexTo===n.range.indexTo&&e.filePath===n.filePath&&e.fileVersion===n.fileVersion&&e.referenceType===n.referenceType}var ei=t(76008),eo=t(10168),ea=t(32842),el=t(95235),es=t(40889),ec=t(8367),eu=t(70953),ed=(0,eo.x)({root:[ea.wp.border({color:Y.LU.outlineDimmest}),ea.wp.p(8),ea.wp.borderRadius(4)],text:[ea.wp.flex.growAndShrink(1)]}),ep=new ei.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,Z.Y)(q.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,Z.FD)(ec.S,{css:ed.root,row:!0,gap:8,children:[(0,Z.Y)(ec.S,{css:ed.text,children:(0,Z.Y)(es.EY,{children:"Code length exceeded. Please select a smaller code block."})}),(0,Z.Y)(el.K0,{alt:"Close",onClick:n,type:"button",children:(0,Z.Y)(eu.A,{})})]})})}),ef=function(e){function n(e){var t,r=e.codeReference;return(0,u._)(this,n),(t=(0,c._)(this,n)).codeReference=r,t}return(0,p._)(n,e),n.prototype.toDOM=function(e){var n=this;return ep.create({onClose:function(){return X(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(a.xO),eh=t(39113),em=function(e){return e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion",e}({}),eg=o.Pe.define(),ev=o.sU.define({create:function(){return em.Suggestion},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(eg))e=l.value;else if(l.is(J.L))e=null;else if(l.is(J.M)){var s=n.state.field(eh.z);if((null==s?void 0:s.type)==="transformCode"&&l.value){var c=n.startState.field(eh.Q),u=l.value;!c&&u&&(e=em.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),ew=t(62506),ey=o.sU.define({create:function(){return null},update:function(e,n){if(!(0,l.$H)(n,"doc",eh.z,ew.Md,ev,eh.Q))return e;var t,r=n.state.field(eh.z),i=n.state.facet(ew.Md),o=n.state.field(ev);if(!r||!i||r.codeReference.filePath!==i||o!==em.Suggestion)return null;var a=r.codeReference.range.indexFrom,s=r.codeReference.range.indexTo,c=n.state.doc.slice(a,s),u=null!==(t=n.state.field(eh.Q))&&void 0!==t?t:"",d=c.lines,p=u.split(n.state.lineBreak).length-d;return e&&e.after===a&&e.offset===p?e:{after:a,offset:p}}}),eb=W.RG.of(function(e,n){var t=e.state.doc.lineAt(n.from),r=e.state.field(ey);if(r&&!(t.from<=r.after))return new W.ib(t.number+r.offset)}),eS=W.DY.of(function(e,n){if(n instanceof eY)return new W.ib(n.index)}),eY=function(e){function n(e,t,r){var i;return(0,u._)(this,n),(i=(0,c._)(this,n)).line=e,i.block=t,i.index=r,i}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var n=!0,t=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.text,s=a.tags,c=document.createElement("span");c.textContent=l||"\xa0",s&&(c.className=s),e.appendChild(c)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},t.eq=function(e){return this.index===e.index&&(0,N.ne)(this.line,e.line)},t.ignoreEvent=function(){return!1},(0,d._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(a.xO),eA=[ey,eb,eS,a.Lz.decorations.compute([m.BH,eh.z,eh.Q,ev,b,ew.Md,o.$t.lineSeparator],function(e){var n=e.field(eh.z),t=e.facet(ew.Md),r=e.field(ev);if(!n||"transformCode"!==n.type||!t||n.codeReference.filePath!==t||r!==em.Suggestion)return a.NZ.none;var i=n.codeReference.range.indexFrom,o=n.codeReference.range.indexTo,l=e.doc.lineAt(i),s=e.doc.lineAt(o),c=e.toText(null!==(S=e.field(eh.Q))&&void 0!==S?S:""),u=e.changes({from:i,to:o,insert:c}),d=u.apply(e.doc),p=i+c.length,f=null===(b=e.facet(m.BH))||void 0===b?void 0:b.parser,h=null;if(f)h=(0,w.B)({parser:f,text:d,changes:u,base:e,upTo:p}),Y=(0,N.A7)(h,d,e,i,p);else{Y=[];var g=!0,v=!1,y=void 0;try{for(var b,S,Y,A,C=c.iterLines()[Symbol.iterator]();!(g=(A=C.next()).done);g=!0){var x=A.value;Y.push([{text:x}])}}catch(e){v=!0,y=e}finally{try{g||null==C.return||C.return()}finally{if(v)throw y}}}var _=[];Y.length>1&&i!==o&&0!==s.length&&o===s.to&&o<e.doc.length?_.push(a.NZ.replace({inclusive:!1,block:!0}).range(i,o)):_.push(a.NZ.replace({inclusiveStart:!1,block:!0}).range(i,o));for(var k=0;k<Y.length;k++){var D=Y[k],E=l.number+k,R=a.NZ.widget({widget:new eY(D,k>0,E),inlineOrder:!0,side:k+1,block:k>0});_.push(R.range(i))}return a.NZ.set(_,!0)})],eC=t(51297),ex=t(84321),e_=t(51439),ek=t(36601),eD=t(26190),eE=t(82436),eR=t(97012),eI=t(12887),eF=t(29219),eT=t(81976),eP=t(40172),eL=t(83515),eU=t(89715),eN=t(14753),eO=t(16087),eM=t(34605),eB=o.sj.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:function(){}}});new ek.k(function(e){return eB.of(e)});var eH=(0,eo.x)({root:[ea.wp.border({color:Y.LU.outlineDimmest}),ea.wp.p(8),ea.wp.borderRadius(4)],header:[ea.wp.minHeight(28)],headerLeft:[ea.wp.flex.growAndShrink(1),ea.wp.rowWithGap(8),ea.wp.align.center]}),ez=new ei.E(function(e){var n=e.requestMeasure,t=e.codeReference,r=e.onClose,o=e.openAiChatPane,a=e.source,l=(0,eT.H)(),s=(0,e_.FS)({getFileContext:l}),c=s.sessionId,u=s.sendMessage,d=s.stopMessage,p=s.loading,f=s.completed,h=s.message,m=s.retry,g=(0,e_.Nd)(),v=(0,i.useCallback)(function(){var e,n;(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:a,message_content:t.code}),u({codeReference:{code:t.code,range:t.range,filePath:t.filePath,fileContent:null!==(e=t.fileContent)&&void 0!==e?e:"",fileVersion:t.fileVersion,language:null!==(n=t.language)&&void 0!==n?n:"",referenceType:ex.fDX.INLINE}})},[u,t,a]),w=(0,eD.A)(v),y=(0,eD.A)(d);(0,i.useEffect)(function(){w.current();var e=y.current;return function(){e()}},[w,y]);var b=(0,e_.Gk)();return(0,e_.q4)()?(0,Z.Y)(q.Rc,{inlineActionType:"Explain",closeAction:r}):(0,Z.Y)(q.N2,{requestMeasure:n,type:"explainCode",children:(0,Z.FD)(ec.S,{css:eH.root,gap:8,dataCy:"ghostwriter-inline-explain-content",children:[h||p?(0,Z.FD)(ec.S,{css:eH.header,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,Z.FD)(ec.S,{css:eH.headerLeft,children:[(0,Z.Y)(eL.A,{}),(0,Z.Y)(eR.m2,{intent:ex.qRv.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:Y.LU.foregroundDimmest}})]}),f?(0,Z.Y)(el.K0,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,Z.Y)(eu.A,{onClick:function(){r(),(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:a})}})}):(0,Z.Y)(eP.$n,{iconLeft:(0,Z.Y)(eM.A,{}),size:"small",text:"Stop",onClick:function(){d(),(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:a,message_content:t.code})}})]}):null,p&&!h?(0,Z.Y)(eN.A,{}):null,h?(0,Z.Y)(eI.d2,{text:h,codeComponent:eI.vz,messageState:f?ex.qOk.COMPLETE:void 0}):null,f?(0,Z.FD)(ec.S,{row:!0,gap:8,align:"center",justify:"end",children:[(0,Z.Y)(es.EY,{variant:"small",color:"dimmer",children:"Esc to close"}),(0,Z.Y)(eP.$n,{iconLeft:(0,Z.Y)(eO.A,{}),variant:"outlined",size:"small",text:"Retry",disabled:!b,onClick:function(){m(),(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"response_regenerated",intent_type:"explain",source:a,message_content:t.code})}}),c?(0,Z.Y)(eP.$n,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:b?(0,Z.Y)(eU.A,{}):(0,Z.Y)(eN.A,{}),disabled:!b,size:"small",text:"Reply in Chat",colorway:b?"blurple":void 0,onClick:function(){(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:a,message_content:t.code}),g(c,{sessionType:ex.dF3.CHAT}),o(c)}}):null]}):null]})})}),eW=function(e){function n(e){var t,r=e.codeReference,i=e.source;return(0,u._)(this,n),(t=(0,c._)(this,n)).codeReference=r,t.source=i,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.codeReference,t=this.source;return ez.create({requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return X(e,n)},openAiChatPane:function(n){return(0,eF.zw)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:n}}})},source:t})},t.updateDOM=function(e,n){var t=this.codeReference;return ez.update(e,function(e){return(0,eC.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return X(n,t)}})}),!0},t.eq=function(e){return er(this.codeReference,e.codeReference)},n}(a.xO),eG=t(66622),eV=t(99813),ej=t(72653),eZ=t(14349),eq=t(28685),eK=t(40500),e$=t(50514),eJ=(0,eV.eU)(0),eQ=(0,eV.eU)(function(e){return e(eJ)<=q.bX?"compact":"normal"}),eX=new ei.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,o=e.updateCodeBlock,a=e.acceptSuggestion,l=e.onClose,s=e.autoFocus,c=e.source,u=function(){var e=Y();(null==e?void 0:e.code)?(a(e.code),(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:c})):k()},d=function(){var e,n;E.current=F,(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:F,source:c}),b({message:F,type:ex.Z1T.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(n=r.language)&&void 0!==n?n:"",referenceType:ex.fDX.INLINE}})},p=(0,e_.k)().assistantInlineMode,f=(0,e_.UK)().hasAccessToAdvancedModel,h=(0,eG._)((0,i.useState)(!1),2),m=h[0],g=h[1],v=(0,e_.Sg)(),w=(0,eT.H)(),y=(0,e_.Wm)({onCode:o,getFileContext:w,assistantMode:p}),b=y.sendMessage,S=y.stopMessage,Y=y.getCode,A=y.loading,C=y.completed,x=y.error,_=y.clearError,k=(0,i.useCallback)(function(){S(),l()},[S,l]),D=(0,i.useCallback)(function(){(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:c}),k()},[k,c]),E=(0,i.useRef)(null),R=(0,i.useRef)(null),I=(0,q.D3)({id:n,inputRef:R,loading:A,onSubmit:function(){M?u():d()},onClose:D}),F=I.value,T=I.setValue,P=I.onKeyDown,L=I.escPressed,U=function(){(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:F,source:c}),S()},N=(0,e_.Gk)(),O=(0,e_.q4)(),M=N&&C&&E.current===F,B=(0,eG._)((0,i.useState)(function(){return(0,eV.y$)()}),1)[0],H=(0,ej.Xr)(eJ,{store:B}),z=(0,ej.md)(eQ,{store:B}),W=(0,eZ.A)(function(e){return H(e.width)}),G=(0,e_.jt)(),V=(0,e_.hT)(),j=G&&(V===ex.g32.AGENT_STATE_RUNNING||V===ex.g32.AGENT_STATE_PAUSING);return O?(0,Z.Y)(q.Rc,{inlineActionType:"Generate",closeAction:k}):j?(0,Z.Y)(q.ce,{inlineActionType:"Generate",closeAction:k}):(0,Z.FD)(Z.FK,{children:[(0,Z.FD)(q.y1,{requestMeasure:t,type:"generateCode",error:x,clearError:_,innerRef:W,children:[(0,Z.Y)(q.pd,{value:F,inputRef:R,onChange:function(e){return T(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:P,autoFocus:s}),(0,Z.FD)(q.wi,{children:[(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(q.sb,{type:"generateCode",readableModelName:f?v.advancedModelName.readable:v.basicModelName.readable}),C?(0,Z.Y)(el.K0,{disabled:!N,alt:"Rerun the same prompt",onClick:function(){return d()},size:12,colorway:"grey",children:(0,Z.Y)(e$.A,{})}):null]}),M?(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(eP.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=Y();(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:c}),D()}}),(0,Z.Y)(eP.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:u,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,Z.Y)(q.XT,{escPressed:L,connecting:!N,loading:A,disabled:!F||!F.trim(),promptPresentation:"normal"===z,onClick:function(){A?U():d()}})]})]}),(0,Z.Y)(eK.A,{isOpen:m,onClose:function(){return g(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),e0=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,u._)(this,n),(t=(0,c._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=eX.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return X(e,t)},acceptSuggestion:function(n){return ee(e,n,t.range.indexFrom)},updateCodeBlock:function(n){return en(e,n)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(eq.W.floatingHeaderActive),i},t.updateDOM=function(e,n){var t=this.codeReference;return eX.update(e,function(e){return(0,eC.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return X(n,t)},e.acceptSuggestion=function(e){return ee(n,e,t.range.indexFrom)},e.updateCodeBlock=function(e){return en(n,e)},e.autoFocus=!1})}),!0},t.eq=function(e){return er(this.codeReference,e.codeReference)},n}(a.xO),e1=t(74748),e2=t(35737),e5=t(5846),e4=t(99655),e3=t(26205),e8=t(44529),e7=t(74495),e6=(0,eo.x)({container:[{marginRight:16},ea.wp.height("100%")],hintButton:[ea.wp.height("100%")]}),e9=new ei.E(function(e){var n=e.onGenerateCode,t=e.height,r=(0,e4.m5)(),i=(0,e7.Jn)(e3.G.id),o=Math.round(.6*t);return(0,Z.Y)(ec.S,{css:e6.container,children:(0,Z.Y)(e8.u,{keyCombo:r?void 0:i,text:"Generate",fontSize:o,css:e6.hintButton,onClick:function(){(0,eE.u4)(e5.AZ.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),n()}})})}),ne=a.Lz.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),nn=function(e){var n=e.selection.main.head;return e.doc.lineAt(n)},nt=new ek.k(function(e){return o.sU.define({create:function(e){return nn(e)},compare:h(),update:function(e,n){return nn(n.state)},provide:function(n){return[ne,o.Nb.high((0,a.qd)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,l.$H)(e,n,eh.z,e1.RJ)},markers:function(t){var r=t.state.field(n,!1);if(!r||!t.state.selection.main.empty)return[];var i=t.state.field(eh.z,!1),o=0===t.state.doc.length,a=(0,e2.R)(t.state);if(r.length>0||i||a||o)return[];var l=t.dom.querySelector(".cm-minimap-gutter"),s=(null==l?void 0:l.clientWidth)||0,c=r.to,u=t.lineBlockAt(c),d=u.top,p=u.height;return[new nr({top:d+t.documentPadding.top,height:p,right:s,pocketOpen:null!==i,activeEditor:t.hasFocus,onGenerateCode:e})]}}))]}})}),nr=function(){function e(n){(0,u._)(this,e),this.options=n}var n=e.prototype;return n.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},n.draw=function(){var e=e9.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},n.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),ni=t(50630),no=(0,eo.x)({root:[ea.wp.border({color:Y.LU.outlineDimmest}),ea.wp.p(8),ea.wp.borderRadius(4)],text:[ea.wp.flex.growAndShrink(1)]}),na=new ei.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,Z.Y)(q.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,Z.FD)(ec.S,{css:no.root,row:!0,gap:8,children:[(0,Z.Y)(ec.S,{css:no.text,children:(0,Z.Y)(ni.E,{textVariant:"text"})}),(0,Z.Y)(el.K0,{alt:"Close",onClick:n,type:"button",children:(0,Z.Y)(eu.A,{})})]})})}),nl=function(e){function n(e){var t,r=e.codeReference;return(0,u._)(this,n),(t=(0,c._)(this,n)).codeReference=r,t}return(0,p._)(n,e),n.prototype.toDOM=function(e){var n=this;return na.create({onClose:function(){return X(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(a.xO),ns=t(87546),nc=(0,eV.eU)(0),nu=(0,eV.eU)(function(e){return e(nc)<=q.bX?"compact":"normal"}),nd=new ei.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,o=e.updateCodeBlock,a=e.acceptSuggestion,l=e.onClose,s=e.autoFocus,c=e.updateDiffSelection,u=e.source,d=function(){var e=C();(null==e?void 0:e.completed)===void 0&&(null==T?void 0:T.completed)&&(e=T),(null==e?void 0:e.code)?((0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:u}),a(e.code)):U()},p=function(){var e,n;O.current=z,(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:z,source:u}),Y({message:z,type:ex.Z1T.TRANSFORM_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(n=r.language)&&void 0!==n?n:"",referenceType:ex.fDX.INLINE}})},f=(0,e_.k)().assistantInlineMode,h=(0,e_.UK)().hasAccessToAdvancedModel,m=(0,eG._)((0,i.useState)(!1),2),g=m[0],v=m[1],w=(0,e_.Sg)(),y=(0,e_.q4)(),b=(0,eT.H)(),S=(0,e_.Wm)({onCode:o,getFileContext:b,assistantMode:f}),Y=S.sendMessage,A=S.stopMessage,C=S.getCode,x=S.loading,_=S.completed,k=S.error,D=S.clearError,E=(0,eG._)((0,i.useState)(!1),2),R=E[0],I=E[1],F=(0,eG._)((0,i.useState)(null),2),T=F[0],P=F[1],L=(0,eD.A)(c);(0,i.useEffect)(function(){if(x){L.current(em.Suggestion);return}(_||R)&&L.current(k?em.Original:em.Compare)},[L,_,R,k,x]);var U=(0,i.useCallback)(function(){A(),l()},[A,l]),N=(0,i.useCallback)(function(){(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:u}),U()},[U,u]),O=(0,i.useRef)(null),M=function(){(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:z,source:u}),A()},B=(0,i.useRef)(null),H=(0,q.D3)({id:n,inputRef:B,loading:x,onSubmit:function(){K?d():p()},onClose:N}),z=H.value,W=H.setValue,G=H.onKeyDown,V=H.escPressed,j=(0,e_.Gk)(),K=j&&!k&&(_||R)&&O.current===z,$=(0,eG._)((0,i.useState)(function(){return(0,eV.y$)()}),1)[0],J=(0,ej.Xr)(nc,{store:$}),Q=(0,ej.md)(nu,{store:$}),X=(0,eZ.A)(function(e){return J(e.width)});(0,i.useEffect)(function(){var e="inline-ai/last-sent-value/".concat(n),t="inline-ai/last-completed/".concat(n),r="inline-ai/last-code-res/".concat(n),i=ns.A.get(e,"string"),o=ns.A.get(t,"boolean"),a=ns.A.get(r,"object");return i&&(O.current=i),I(!!o&&o),a&&P({code:a.code,completed:a.completed,error:a.error}),function(){ns.A.set(t,_||o);var n=C();if((null==n?void 0:n.completed)!==void 0&&ns.A.set(r,n),O.current){var i=O.current;if(0===i.length){ns.A.remove(e);return}ns.A.set(e,i)}}},[_,C,n]);var ee="basic"===f?e_.a:e_.K6,en=r.code.length>ee,et=(0,e_.jt)(),er=(0,e_.hT)(),ei=et&&(er===ex.g32.AGENT_STATE_RUNNING||er===ex.g32.AGENT_STATE_PAUSING);return y?(0,Z.Y)(q.Rc,{inlineActionType:"Modify",closeAction:U}):ei?(0,Z.Y)(q.ce,{inlineActionType:"Modify",closeAction:U}):(0,Z.FD)(Z.FK,{children:[(0,Z.FD)(q.y1,{requestMeasure:t,type:"generateCode",error:k,clearError:D,innerRef:X,children:[(0,Z.Y)(q.pd,{value:z,inputRef:B,onChange:function(e){return W(e.currentTarget.value)},placeholder:"Enter a prompt to modify selected lines",onKeyDown:G,autoFocus:s}),(0,Z.FD)(q.wi,{children:[(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(q.sb,{type:"transformCode",readableModelName:h?w.advancedModelName.readable:w.basicModelName.readable}),_||R?(0,Z.Y)(el.K0,{alt:"Rerun the same prompt",onClick:function(){return p()},size:12,colorway:"grey",disabled:!j,children:(0,Z.Y)(e$.A,{})}):null]}),K?(0,Z.FD)(Z.FK,{children:[(0,Z.Y)(eP.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=C();(null==e?void 0:e.completed)===void 0&&(null==T?void 0:T.completed)&&(e=T),(0,eE.u4)(eE.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:u}),N()}}),(0,Z.Y)(eP.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:d,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,Z.Y)(q.XT,{escPressed:V,connecting:!j,loading:x,disabled:!z||!z.trim()||en,promptPresentation:"normal"===Q,onClick:function(){x?M():p()},codeLengthExceeded:en})]})]}),(0,Z.Y)(eK.A,{isOpen:g,onClose:function(){return v(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),np=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,u._)(this,n),(t=(0,c._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,p._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=nd.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return X(e,t)},acceptSuggestion:function(n){return et(e,n,t)},updateCodeBlock:function(n){en(e,n)},updateDiffSelection:function(n){e.dispatch({effects:eg.of(n)})},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex="10",i},t.updateDOM=function(e,n){var t=this.codeReference;return nd.update(e,function(e){return(0,eC.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return X(n,t)},e.acceptSuggestion=function(e){return et(n,e,t)},e.updateCodeBlock=function(e){return en(n,e)},e.updateDiffSelection=function(e){n.dispatch({effects:eg.of(e)})},e.autoFocus=!1})}),!0},t.eq=function(e){return er(this.codeReference,e.codeReference)},n}(a.xO),nf=t(31909),nh=Y.LU.blurpleDimmest,nm=Y.LU.accentPrimaryDimmest,ng=a.Lz.theme({".cm-pocket-highlight":{backgroundColor:Y.LU.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(Y.LU.blurpleDimmest,", ").concat(nm,", ").concat(nh,", ").concat(nm,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),nv=a.Lz.decorations.compute([eh.z,ev,ew.Md],function(e){var n=e.field(eh.z),t=e.facet(ew.Md);if(!n||!t||n.codeReference.filePath!==t)return a.NZ.none;var r=e.doc.lineAt(n.codeReference.range.indexFrom).from,i={generateCode:e0,transformCode:np,explainCode:eW,ghostwriterKillswitch:nl,codeLengthExceeded:ef}[n.type],o=a.NZ.widget({widget:new i({id:n.id,codeReference:n.codeReference,source:n.source}),block:!0,side:0}).range(r);return a.NZ.set(o)}),nw=(0,a.qd)({above:!1,update:function(e){return(0,l.$H)(e,eh.z)},markers:function(e){var n=e.state.field(eh.z),t=e.state.facet(ew.Md);if(!n||!t||n.codeReference.filePath!==t)return[];var r=n.codeReference.range.indexFrom,i=n.codeReference.range.indexTo,l=e.state.doc.lineAt(i);l.from>=r&&l.to===i&&i<e.state.doc.length&&(i+=1);var s=o.OF.range(r,i),c=n.loading&&n.codeReference.range.indexFrom<n.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return a.Ip.forRange(e,c,s)}}),ny=j.compute([eh.z,eh.Q,ew.Md,ev],function(e){var n=e.field(eh.z),t=e.field(eh.Q),r=e.facet(ew.Md),i=e.field(ev);return n&&t&&r&&n.codeReference.filePath===r&&"transformCode"===n.type&&i===em.Compare?o.VR.of({from:n.codeReference.range.indexFrom,to:n.codeReference.range.indexTo,insert:t},e.doc.length).apply(e.doc):null}),nb=s.x.compute([eh.z,eh.Q,ew.Md],function(e){var n=e.field(eh.z),t=e.field(eh.Q),r=e.facet(ew.Md);return n&&t&&r&&n.codeReference.filePath===r&&"generateCode"===n.type?o.VR.of({from:n.codeReference.range.indexTo,to:n.codeReference.range.indexTo,insert:t},e.doc.length):null});function nS(e){var n=e.onGenerateCode,t=(0,nf.f)().isTeamWithAiDisabled,r=nt.use(n);return(0,i.useMemo)(function(){var e=[ng,eh.z,eh.Q,nv,nw,ev,ny,eA,nb,r];return t||e.push(r),e},[r,t])}},70121:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,M:()=>o});var r=t(66144),i=r.Pe.define(),o=r.Pe.define()},39113:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f,z:()=>p});var r=t(20837),i=t(43952),o=t(66144),a=t(16608),l=t(70121),s=t(27881),c=t(5805),u=t(82436);function d(e){var n=e.state.field(p);if(n){var t=n.type;return"explainCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:n.source}):"generateCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:n.source}):"transformCode"===t&&(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:n.source}),e.dispatch({effects:l.L.of(null)}),!0}return!1}var p=o.sU.define({create:function(){return null},update:function(e,n){if((0,c.C)(n,l.L,function(n){e=n.value?{id:n.value.id,codeReference:n.value.codeReference,type:n.value.type,source:n.value.source,loading:n.value.loading,data:n.value.data}:null}),!e||n.changes.empty)return e;var t=e.codeReference.range.indexFrom>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexTo);return t>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:t,indexTo:o,lineFrom:n.newDoc.lineAt(t).number,lineTo:n.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Nb.highest(a.w4.of([{key:"Escape",run:d}])),s.Rh.from(e,function(e){var n;return null!==(n=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==n?n:null})]}}),f=o.sU.define({create:function(){return null},update:function(e,n){if(!n.state.field(p))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;s.is(l.L)&&(e=null),s.is(l.M)&&(e=s.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}})},90997:(e,n,t)=>{"use strict";function r(e){var n=[],t=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e.selection.ranges[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.empty||(n.push(e.sliceDoc(c.from,c.to)),t.push(c))}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!n.length){var u=-1,d=!0,p=!1,f=void 0;try{for(var h,m=e.selection.ranges[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value.from,v=e.doc.lineAt(g);v.number>u&&(n.push(v.text),t.push({from:v.from,to:Math.min(e.doc.length,v.to+1)})),u=v.number}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}r=!0}return{text:n.join(e.lineBreak),ranges:t,linewise:r}}t.d(n,{i:()=>r})},50439:(e,n,t)=>{"use strict";t.d(n,{mJ:()=>d,vL:()=>f,yG:()=>p});var r=t(80421),i=t.n(r),o=t(66144),a=t(16608),l=t(62506),s=t(36601),c=t(53654),u=t(58382);function d(e){var n=e.view,t=e.event,r=e.clipboardText,a=e.filePath,l=n.state.selection;if(!a||!(0,c.e$)(a)||l.ranges.length>1||l.main.from===l.main.to||!r||!i()(r)){(function(){if(!t){var e=r||"";if(l.main.empty){var i=l.main.from+e.length;n.dispatch({changes:[{from:l.main.from,insert:e}],selection:o.OF.range(i,i)})}else n.dispatch(n.state.replaceSelection(e))}})();return}t&&t.preventDefault();var s=n.state.sliceDoc(l.main.from,l.main.to),u="[".concat(s,"](").concat(r,")"),d=l.main.from+u.length;n.dispatch({changes:{from:l.main.from,to:l.main.to,insert:u},selection:o.OF.range(d,d)})}var p=a.Lz.domEventHandlers({paste:function(e,n){var t;d({filePath:n.state.facet(l.Md),view:n,event:e,clipboardText:null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text")})}}),f=new s.k(function(e){return a.Lz.domEventHandlers({paste:function(n,t){var r=t.state.facet(l.Md),i=null==n?void 0:null===(p=n.clipboardData)||void 0===p?void 0:p.files,o=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(i){var a=!0,s=!1,d=void 0;try{for(var p,f,h=i[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var m=f.value;r&&(0,c.e$)(r)&&(0,u.U)(m,e,r).then(o)}}catch(e){s=!0,d=e}finally{try{a||null==h.return||h.return()}finally{if(s)throw d}}}}})})},84341:(e,n,t)=>{"use strict";t.d(n,{Ws:()=>b,i6:()=>Y,cA:()=>y,C3:()=>E,dz:()=>R,E3:()=>w,hb:()=>D,t5:()=>I,BH:()=>S,Ij:()=>F,fy:()=>A});var r=t(78910),i=t(78542),o=t(88708),a=t(20837),l=t(43952),s=t(66144),c=t(16608),u=t(2168),d=t(66622),p={"Anthropic API Key":/(sk-ant-api03-[\w-]{93}AA)/g,"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g},f={"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g},h=t(82436),m=function(e){function n(e,t){var o;return(0,i._)(this,n),(o=(0,r._)(this,n)).id=e,o.result=t,o}return(0,o._)(n,e),n.range=function(e,n,t){return new this(e,t).range(n.from,n.to)},n.generateId=function(){return this.secretId++},n}(s.FB);m.secretId=0;var g=function(e){function n(e){var t;return(0,i._)(this,n),(t=(0,r._)(this,n)).key=e,t}return(0,o._)(n,e),n.from=function(e){return new this(e)},n}(s.FB),v=s.Pe.define({map:function(e,n){var t=s.om.of(e).map(n).iter(),r=t.from,i=t.to;return m.range(e.value.id,s.OF.cursor(r,i),e.value.result)}}),w=s.Pe.define(),y=s.Pe.define(),b=s.Pe.define(),S=s.Pe.define(),Y=s.Pe.define(),A=function(e){var n=e.state.field(R);if(!n.size)return!1;for(var t=n.iter(),r=[];t.value;){var i=t.from,o=t.to,a=t.value;r.push({from:i,to:o,value:a}),t.next()}var l=e.state.doc.length,c=s.VR.empty(l),u=[],d=[],p=!0,f=!1,m=void 0;try{for(var g,v=r[Symbol.iterator]();!(p=(g=v.next()).done);p=!0)!function(){var e=g.value,n=e.from,t=e.to,r=e.value,i=r.result.secret,o=s.VR.of({from:n,to:t,insert:i},l).map(c,!0);u=u.map(function(e){return e.map(o)});var a=(c=c.compose(o)).mapPos(n)+i.length;u.push(s.OF.cursor(a)),d.push(w.of(r.id)),(0,h.u4)(h.AZ.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){f=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw m}}return e.dispatch({changes:c,effects:d,selection:s.OF.create(u)}),!0},C=function(e){return!!e.state.facet(I)&&!!e.state.field(R).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return y.of(e)})}),!0)},x=function(e){return!e.state.facet(I)&&_(e)},_=function(e){return!!e.state.field(R).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return w.of(e)})}),!0)};function k(e,n){var t,r=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain");if(!r)return!1;var i=function(e){if(e.length>2e3)return!1;var n=!0,t=!1,r=void 0;try{for(var i,o=[p,f][Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,s=!1,c=void 0;try{for(var u,h=Object.entries(a)[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=(0,d._)(u.value,2),g=m[0],v=m[1],w=e.search(v);if(!(w<0)){var y=e.match(v);if(y){var b=w+y[0].length;return{start:w,end:b,secret:e.slice(w,b),provider:g}}}}}catch(e){s=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(s)throw c}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1}(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var o=r.slice(0,i.start)+r.slice(i.end),c=m.generateId();return n.dispatch((0,l._)((0,a._)({},n.state.changeByRange(function(e){var n=e.from,t=e.to,r=s.OF.cursor(n+i.start);return{range:r,changes:{from:n,to:t,insert:o},effects:v.of(m.range(c,r,i))}})),{scrollIntoView:!0})),(0,h.u4)(h.AZ.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var D=s.sU.define({create:function(){return s.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(S)){var c=l.value,u=c.from,d=c.to,p=c.secret;e=e.update({add:[g.from(p).range(u,d)],filter:function(){return!1}})}l.is(Y)&&(e=s.om.empty)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),E=s.sU.define({create:function(){return null},update:function(e,n){var t=n.state.field(R,!1),r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t&&c.is(y)&&(c.value instanceof s.yn?t.between(c.value.from,c.value.to,function(n,t,r){e=r}):e=c.value),c.is(b)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),R=s.sU.define({create:function(){return s.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)!function(){var n=o.value;n.is(v)&&(e=e.update({add:[n.value],sort:!0})),n.is(w)&&(e=n.value instanceof s.yn?e.update({filter:function(){return!1},filterFrom:n.value.from,filterTo:n.value.to}):e.update({filter:function(e,t,r){return r.id!==n.value}}))}()}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[c.Lz.domEventHandlers({paste:k}),s.Nb.highest(c.w4.of([{key:"Mod-z",run:_},{key:"Enter",run:A},{key:"Tab",run:C,stopPropagation:!0},{key:"Escape",run:x}]))]}}),I=s.sj.define({combine:function(e){return e.some(Boolean)}}),F=u.Ly.of(function(e){var n=e.state.field(R,!1);if(!n||!n.size)return!1;var t=!1;return n.between(e.newSelection.main.from,e.newSelection.main.to,function(){return t=!0,!1}),t})},69418:(e,n,t)=>{"use strict";t.d(n,{f:()=>g});var r=t(94086),i=t(30758),o=t(16608),a=t(81383),l=t(9980),s=t(60023),c=t(36601),u=t(52757),d=t(32842),p=(0,u.AH)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),f=(0,u.AH)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),h={root:d.wp.backgroundColor.backgroundRoot,higher:d.wp.backgroundColor.backgroundHigher,highest:d.wp.backgroundColor.backgroundHighest,default:d.wp.backgroundColor.backgroundDefault},m=new c.k(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,o.$K)({formatNumber:function(n,t){for(var r=String(t.doc.lines).length,i=String(n+e-1);r>i.length;)i="\xa0"+i;return i}})});function g(e){var n=e.path,t=e.initialDoc,o=e.maxHeight,c=e.minHeight,d=e.extensions,g=e.allowScroll,v=e.fontSize,w=e.hideGutter,y=e.startLineNumber,b=e.style,S=e.elevation,Y=e.onNavigateToCode,A=(0,l.A)(),C=A.ref,x=A.view,_=(0,i.useMemo)(function(){var e;return e=h[null!=S?S:"default"],(0,u.AH)({".cm-editor":e,".cm-gutters":e})},[S]),k=m.use(y);return(0,r.Y)("div",{style:b,children:(0,r.Y)(a.Ay,{ref:C,initialDoc:t,css:[p,_,void 0===g||g?null:f],extensions:[k,void 0===d?[]:d],style:{minHeight:c,maxHeight:null!=o?o:"10em"},hideGutter:w,filePath:n,fontSize:v,readOnly:!0,onClick:function(e){if(Y&&x){var n=e.clientX,t=e.clientY,r=x.posAtCoords({x:n,y:t});Y(null!==r?(0,s.Z3)(x.state.doc,r):null)}}})})}},55344:(e,n,t)=>{"use strict";t.d(n,{H:()=>p,Y:()=>d});var r=t(78542),i=t(66622),o=t(60762),a=t(30758),l=t(32889),s=t.n(l),c=t(62326),u=t(97285),d=function(){function e(n){var t=this;if((0,r._)(this,e),this.saveToLocalStorage=s()(function(){u.A.set("stateCache",{version:2,entries:Array.from(t.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new c.q(20),n){if((void 0===n?"undefined":(0,o._)(n))!=="object"||null===n||!Object.prototype.hasOwnProperty.call(n,"version")||!Object.prototype.hasOwnProperty.call(n,"entries")||"number"!=typeof n.version||2!==n.version)return;var a=n.entries,l=!0,d=!1,p=void 0;try{for(var f,h=a[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=(0,i._)(f.value,2),g=m[0],v=m[1];this.map.set(g,v)}}catch(e){d=!0,p=e}finally{try{l||null==h.return||h.return()}finally{if(d)throw p}}}}var n=e.prototype;return n.set=function(e,n){this.map.set(e,n),this.saveToLocalStorage()},n.get=function(e){return this.map.get(e)},e}(),p=(0,a.createContext)(null)},66160:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(66144),i=t(5805);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=r.Pe.define(),o=r.sU.define({create:function(){return n},update:function(n,r){return(0,i.C)(r,t,function(t){n=e(t.value,n)}),n}});return{effect:t,state:o}}},18317:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(94086),i=t(30758),o=t(76396);function a(e){var n=e.json,t=(0,i.useMemo)(function(){return JSON.stringify(n,null,2)},[n]);return(0,r.Y)(o.A,{language:"json",code:t})}},58840:(e,n,t)=>{"use strict";t.d(n,{X:()=>p});var r=t(20837),i=t(43952),o=t(27189),a=t(45009),l=t(30632),s=t(72813);function c(){var e=(0,a._)(['\n  query PersonalCollaboratorGate {\n    currentUser {\n      id\n      isSubscribed\n      username\n      shouldEnforceMultiplayerLimit: gate(feature: "flag-empty-hangar")\n      personalCollaborators {\n        ... on PersonalCollaboratorsInfo {\n          count\n          limit\n          collaborators {\n            repl {\n              id\n              slug\n              url\n              title\n              nextPagePathname\n              iconUrl\n            }\n            user {\n              id\n              username\n            }\n          }\n        }\n      }\n    }\n  }\n']);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=function(){var e,n,t,a=(e={ssr:!1,fetchPolicy:"network-only"},n=(0,r._)({},u,e),s.I(d,n)),l=a.data,c=a.loading,p=a.refetch;if(c)return{type:"loading"};if(l&&(null==l?void 0:null===(t=l.currentUser)||void 0===t?void 0:t.personalCollaborators.__typename)==="PersonalCollaboratorsInfo"){var f=l.currentUser,h=f.personalCollaborators,m=h.count,g=h.limit,v=h.collaborators,w=f.isSubscribed,y=f.shouldEnforceMultiplayerLimit,b=f.username;return{type:"data",refetch:p,collaboratorCount:m,collaboratorLimit:g,collaboratorsByRepl:v.reduce(function(e,n){var t,a=n.repl,l=n.user,s=null!==(t=e.get(a.id))&&void 0!==t?t:{id:a.id,slug:a.slug,url:a.url,title:a.title,nextPagePathname:a.nextPagePathname,iconUrl:a.iconUrl,__typename:a.__typename,users:[]};return e.set(a.id,(0,i._)((0,r._)({},s),{users:(0,o._)(s.users).concat([{id:l.id,username:l.username}])})),e},new Map),isStarterUser:!w,username:b,shouldEnforceMultiplayerLimit:y}}return{type:"error"}}},5511:(e,n,t)=>{"use strict";t.d(n,{R:()=>I,y:()=>T});var r,i,o=t(72275),a=t(66622),l=t(94086),s=t(30758),c=t(1979),u=t(66061),d=t(26190),p=t(68279),f=t(43035),h=t(47079),m=t(20543),g=t(44087),v=t(39735),w=t(24955),y=t(10168),b=t(2298),S=t(1478),Y=t(32842),A=t(31955),C=t(40889),x=t(8367),_=t(62514),k=t(72602),D=(0,S.v)(["scrollToBottomTransform","opacity","overflowX","overflowY","flexDirection","buttonPx","buttonTop","buttonLeft","buttonBottom","buttonBorderRadius","buttonHeight","buttonWidth","buttonRight","scrollBehavior","scrollSnapType","padding","firstChildMargin","scrollHeight","scrollWidth","scrollTop","scrollHeight","clientHeight","trackPointerEvents","trackOpacity","trackWidth","trackTranstionDelay","trackHeight","trackPointerEvents","thumbWidth","thumbHeight","thumbTransform","thumbUIWidth"]),E=D.cssVars,R=D.styleTokens,I={height:R.scrollHeight,width:R.scrollWidth},F=(0,y.x)({root:[Y.wp.position.relative,Y.wp.flex.growAndShrink(1)],scroll:[Y.wp.flex.growAndShrink(1),{padding:R.padding,overflowY:R.overflowY,overflowX:R.overflowX,flexDirection:R.flexDirection,scrollBehavior:R.scrollBehavior,scrollSnapType:R.scrollSnapType,"&.scrollbar-hidden::-webkit-scrollbar":{display:"none"},overflow:"scroll",scrollbarWidth:"none"}],content:[{margin:R.firstChildMargin,flexDirection:R.flexDirection}],button:[Y.wp.reset.button,b.b.filledAndOutlined,Y.wp.position.absolute,Y.wp.align.center,Y.wp.rowWithGap(4),Y.wp.shadow(1),Y.wp.justify.center,{paddingRight:R.buttonPx,paddingLeft:R.buttonPx,top:R.buttonTop,bottom:R.buttonBottom,right:R.buttonRight,left:R.buttonLeft,borderRadius:R.buttonBorderRadius,height:R.buttonHeight,width:R.buttonWidth,opacity:"var(".concat(E.opacity,", 0)"),transform:R.scrollToBottomTransform,transitionProperty:"transform, opacity",transitionDuration:"300ms",transitionTimingFunction:"cubic-bezier(.4,1.60,.70,.8)"}]});function T(e){var n,t,r,i,h,g,w,y,b,S,Y,D,R,I,T,P,U,N,O,M,B,H,z,W,G,V,j,Z,q,K,$,J,Q,X,ee,en,et,er,ei,eo,ea,el,es,ec,eu,ed,ep,ef,eh=e.children,em=e.snappiness,eg=e.ramp,ev=e.scrollerRef,ew=e.shouldAutoScrollRef,ey=e.scrollCache,eb=e.scrollCacheKey,eS=e.isHorizontal,eY=e.padding,eA=e.alignToEnd,eC=e.hideScrollbar,ex=e.autoScrollBehavior,e_=e.buttonOffset,ek=void 0===e_?0:e_,eD=(W=(n={snappiness:void 0===em?16:em,ramp:void 0===eg?1:eg,shouldAutoScrollRef:ew,scrollCache:ey,scrollCacheKey:eb,isHorizontal:eS,autoScrollBehavior:void 0===ex?"instant":ex}).snappiness,G=n.ramp,V=n.shouldAutoScrollRef,j=n.scrollCache,Z=n.scrollCacheKey,q=n.isHorizontal,K=n.autoScrollBehavior,$=(0,u.HJ)(!1),Q=(J=(0,a._)((0,s.useState)(null),2))[0],X=J[1],en=(ee=(0,a._)((0,s.useState)(null),2))[0],et=ee[1],ei=(er=(0,a._)((0,s.useState)(null),2))[0],eo=er[1],ea=(0,d.A)(j),es=(el=(r=(t={scrollEl:en,isHorizontal:q,showButton:$,shouldAutoScrollRef:V}).scrollEl,i=t.isHorizontal,h=t.showButton,g=t.shouldAutoScrollRef,w=(0,u.HJ)({scrollTop:0,scrollHeight:0,clientHeight:0,scrollLeft:0,scrollWidth:0,clientWidth:0}),y=(0,u.HJ)("idle"),b=(0,u.HJ)(!1),(0,s.useEffect)(function(){var e=function(){n&&clearTimeout(n),t||(t=!0,requestAnimationFrame(function(){if(t=!1,r){var e=r.scrollWidth,o=r.scrollLeft,a=r.clientWidth,l=r.scrollHeight,s=r.scrollTop,c=r.clientHeight;i?y.set(w.current.scrollLeft>=o?"backwards":"forwards"):y.set(w.current.scrollTop>=s?"backwards":"forwards"),w.set({scrollHeight:l,scrollTop:s,clientHeight:c,scrollWidth:e,scrollLeft:o,clientWidth:a});var u=i?e-(o+a):l-(s+c);b.set(u<24),b.current&&!1===g.current&&(g.current=!0),n=setTimeout(function(){y.set("idle"),h.set(!b.current)},200)}}))};if(r){var n=null,t=!1;return e(),r.addEventListener("scroll",e),function(){r.removeEventListener("scroll",e),n&&clearTimeout(n)}}},[r,i,h,w,y,b,g]),{measurements:w,scrollDirection:y,isNearEnd:b})).measurements,ec=el.scrollDirection,eu=el.isNearEnd,ed=(S=(0,u.HJ)({width:0,height:0}),(0,s.useEffect)(function(){if(en){var e=null;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.target===en&&S.set({width:Math.round(a.contentRect.width),height:Math.round(a.contentRect.height)})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}})).observe(en),function(){null==e||e.disconnect()}}},[en,S]),{scrollSize:S}).scrollSize,ep=(D=(Y={snappiness:W,ramp:G,shouldAutoScrollRef:V,autoScrollBehavior:K,isHorizontal:q,anchorEl:Q,scrollEl:en,contentEl:ei}).snappiness,R=Y.ramp,I=Y.shouldAutoScrollRef,T=Y.autoScrollBehavior,P=Y.isHorizontal,U=Y.anchorEl,N=Y.scrollEl,O=Y.contentEl,B=(M=(0,a._)((0,s.useState)(!1),2))[0],H=M[1],z=(0,s.useRef)(T),(0,s.useEffect)(function(){if(U&&N&&O){var e=0,n=new c.F3(function(n,t){if(e+=n,!I.current)return e=0,H(!1),t();if(P){var r,i;r=N.scrollLeft,i=Math.max(Math.min(U.getBoundingClientRect().left-N.getBoundingClientRect().left+r,N.scrollWidth-N.clientWidth),0)}else r=N.scrollTop,i=Math.max(Math.min(U.getBoundingClientRect().top-N.getBoundingClientRect().top+r,N.scrollHeight-N.clientHeight),0);if("instant"===z.current)return e=0,P?N.scrollLeft=i:N.scrollTop=i,H(!1),t();var o=function(e,n,t,r,i,o){var a=n-e;if(1>=Math.abs(a))return n;var l=1;t<o&&(l=t/o);var s=1-Math.exp(-i*l*r),c=(1-s)*e+s*n;return .5>Math.abs(c-e)?e+.5*Math.sign(a):c}(r,i,e,n,D,R);if(P?N.scrollLeft=o:N.scrollTop=o,o===i)return e=0,H(!1),t();H(!0)}),t=new ResizeObserver(function(){I.current&&n.start()});return t.observe(U),t.observe(N),t.observe(O),I.current&&n.start(),function(){n.stop(),t.disconnect(),H(!1)}}},[D,R,I,P,U,N,O]),{autoScrolling:B}).autoScrolling,(0,s.useEffect)(function(){if(Q&&en){if(ep){$.set(!1);return}return(0,p.l)(Q,function(){return $.set(!1),function(){$.set(!0)}},{root:en,rootMargin:"100px"})}},[$,ep,Q,en]),(0,s.useEffect)(function(){if(Q&&en){var e=ea.current,n=e.get(Z);return n?en.scrollTo(q?n:0,q?0:n):(0,v.A)(Q,{behavior:"instant"}),function(){e.set(Z,en.scrollTop)}}},[Q,en,ea,Z,q]),(0,s.useEffect)(function(){if(en)return en.addEventListener("wheel",e),en.addEventListener("pointerdown",n),en.addEventListener("pointerup",t),function(){en.removeEventListener("wheel",e),en.removeEventListener("pointerdown",n),en.removeEventListener("pointerup",t)};function e(e){if((q?e.deltaX:e.deltaY)<0){V.current=!1;return}}function n(){V.current=!1}function t(){eu.current&&(V.current=!0)}},[en,V,q,eu]),{showButton:$,anchorRef:X,scrollRef:et,scrollEl:en,contentRef:eo,scrollToLatest:function(){Q&&(0,v.A)(Q,{behavior:"smooth"})},scrollSize:ed,measurements:es,scrollDirection:ec,autoScrolling:ep}),eE=eD.showButton,eR=eD.anchorRef,eI=eD.scrollRef,eF=eD.contentRef,eT=eD.scrollToLatest,eP=eD.scrollSize,eL=eD.measurements,eU=eD.scrollEl,eN=eD.scrollDirection,eO=eD.autoScrolling,eM=(0,s.useRef)(null),eB=(0,s.useRef)(null);(0,m.d)(eB,eP,function(e){var n;return n={},(0,o._)(n,E.scrollHeight,e.height+"px"),(0,o._)(n,E.scrollWidth,e.width+"px"),n}),(0,m.d)(eM,eE,function(e){var n;return n={},(0,o._)(n,E.scrollToBottomTransform,eS?"translate(".concat((e?0:16)-ek,"px, -50%) scaleX(").concat(e?1:.25,")"):"translate(-50%, ".concat((e?0:16)-ek,"px) scaleX(").concat(e?1:.25,")")),(0,o._)(n,E.opacity,e?"1":"0"),n},[eS,ek]);var eH="0";eA&&(eH=eS?"0 0 0 auto":"auto 0 0 0");var ez=(0,s.useCallback)(function(e){(0,f.P)(eI,ev)(e)},[eI,ev]);return(0,l.FD)(x.S,{innerRef:eB,css:F.root,style:(ef={},(0,o._)(ef,E.flexDirection,eS?"row":"column"),(0,o._)(ef,E.overflowY,eS?"hidden":"auto"),(0,o._)(ef,E.overflowX,eS?"auto":"hidden"),(0,o._)(ef,E.buttonBottom,eS?"auto":"8px"),(0,o._)(ef,E.buttonLeft,eS?"auto":"50%"),(0,o._)(ef,E.buttonRight,eS?"4px":"auto"),(0,o._)(ef,E.buttonTop,eS?"50%":"auto"),(0,o._)(ef,E.buttonHeight,eS?"44px":"28px"),(0,o._)(ef,E.buttonWidth,eS?"44px":"auto"),(0,o._)(ef,E.buttonBorderRadius,eS?"44px":"16px"),(0,o._)(ef,E.buttonPx,eS?"12px":"6px"),(0,o._)(ef,E.scrollBehavior,eS&&!eO?"smooth":"auto"),(0,o._)(ef,E.scrollSnapType,eS&&!eO?"x mandatory":"none"),(0,o._)(ef,E.padding,null!=eY?eY:"0"),(0,o._)(ef,E.firstChildMargin,eH),ef),children:[(0,l.FD)(x.S,{css:F.scroll,innerRef:ez,className:eC?"scrollbar-hidden":void 0,children:[(0,l.Y)(x.S,{css:F.content,innerRef:eF,style:eS?{height:"100%"}:void 0,children:eh}),(0,l.Y)(x.S,{innerRef:eR}),eU&&!eC?(0,l.Y)(L,{shouldAutoScrollRef:ew,scrollDirection:eN,scrollEl:eU,measurements:eL}):null]}),(0,l.Y)(A.ui,{innerRef:eM,css:F.button,elevated:!0,tag:"button",onClick:eT,children:eS?(0,l.Y)(k.A,{size:24}):(0,l.FD)(l.FK,{children:[(0,l.Y)(_.A,{size:12}),(0,l.Y)(C.EY,{variant:"small",children:"Scroll to latest"})]})})]})}var P=(0,y.x)({root:[(i={position:"absolute",width:R.trackWidth,height:R.trackHeight,opacity:R.trackOpacity,right:0,top:0,transition:"opacity 300ms",transitionDelay:R.trackTranstionDelay},(0,o._)(i,E.trackTranstionDelay,"600ms"),(0,o._)(i,E.thumbUIWidth,"40%"),(0,o._)(i,"pointerEvents",R.trackPointerEvents),(0,o._)(i,"&:hover, &:active",(r={},(0,o._)(r,E.trackTranstionDelay,"0ms"),(0,o._)(r,E.trackOpacity,"1 !important"),(0,o._)(r,E.trackPointerEvents,"auto !important"),(0,o._)(r,E.thumbUIWidth,"70%"),r)),i)],thumb:[Y.wp.position.absolute,Y.wp.py(4),Y.wp.px(2),Y.wp.align.end,{top:0,left:0,height:R.thumbHeight,transform:R.thumbTransform,width:R.thumbWidth,opacity:.5,"&:active":{opacity:.8}}],thumbUI:[{backgroundColor:w.LU.foregroundDimmest,transition:"width 200ms",width:R.thumbUIWidth},Y.wp.height("100%"),Y.wp.borderRadius(8)]});function L(e){var n=e.measurements,t=e.scrollDirection,r=e.scrollEl,i=e.shouldAutoScrollRef,a=(0,s.useRef)(null),c=(0,s.useRef)(!1),u=(0,s.useRef)(null),d=(0,s.useRef)(null),p=(0,s.useCallback)(function(){u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)},[]),f=(0,s.useCallback)(function(){p(),c.current||(u.current=setTimeout(function(){(0,g.U)(a,(0,o._)({},E.trackOpacity,"0"))},600),d.current=setTimeout(function(){(0,g.U)(a,(0,o._)({},E.trackPointerEvents,"none"))},1200))},[p]);(0,s.useEffect)(function(){var e=function(e){var n;if("idle"===e){f();return}p(),(0,g.U)(a,(n={},(0,o._)(n,E.trackOpacity,"1"),(0,o._)(n,E.trackPointerEvents,"auto"),n))};e(t.current);var n=t.subscribe(e);return function(){n(),p()}},[t,f,p]),(0,m.d)(a,n,function(e){var n,t=e.clientHeight,r=e.clientHeight/e.scrollHeight*t,i=e.scrollHeight-e.clientHeight,a=i>0?e.scrollTop/i*(t-r):0,l=e.clientHeight>=e.scrollHeight?0:16;return n={},(0,o._)(n,E.trackWidth,l+"px"),(0,o._)(n,E.trackHeight,t+"px"),(0,o._)(n,E.thumbWidth,l+"px"),(0,o._)(n,E.thumbHeight,r+"px"),(0,o._)(n,E.thumbTransform,"translate(0, ".concat(a,"px)")),n});var v=(0,s.useCallback)(function(e){var t=0;i.current=!1;var o=!1;(0,h.j)(e,{start:function(){t=r.scrollTop},move:function(e){var i=e.delta;o||(o=!0,requestAnimationFrame(function(){o=!1;var e=n.current,a=e.clientHeight,l=e.scrollHeight,s=i.y/a;r.scrollTop=t+l*s}))}})},[r,n,i]),w=(0,s.useRef)(!1),y=(0,s.useCallback)(function(e){if(e.target===e.currentTarget){var t=e.currentTarget.getBoundingClientRect(),i=(e.clientY-t.y)/t.height;r.scrollTop=n.current.scrollHeight*i}},[r,n]),b=(0,s.useCallback)(function(e){e.deltaY<0&&(i.current=!1),w.current||(w.current=!0,requestAnimationFrame(function(){w.current=!1,r.scrollTop=r.scrollTop+e.deltaY}))},[r,i]);return(0,l.Y)(x.S,{innerRef:a,css:P.root,onMouseEnter:function(){c.current=!0,p()},onMouseLeave:function(){c.current=!1,f()},onWheel:b,onClick:y,children:(0,l.Y)(x.S,{css:P.thumb,onPointerDown:v,children:(0,l.Y)(x.S,{css:P.thumbUI})})})}},8280:(e,n,t)=>{"use strict";t.d(n,{Ve:()=>r,aF:()=>i,yN:()=>o});var r="Tools",i=600,o="CommandBar"},70013:(e,n,t)=>{"use strict";t.d(n,{r:()=>el});var r=t(72275),i=t(20837),o=t(94086),a=t(30758),l=t(26190),s=t(14349),c=t(32904),u=t(20543),d=t(74495),p=t(24955),f=t(10168),h=t(2298),m=t(3460),g=t(32842),v=t(93532),w=t(8367),y=t(39520),b=t(53718),S=t(50656),Y=(0,f.x)({root:[g.wp.reset.button,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.borderRadius(0),g.wp.cursor.pointer,g.wp.color.foregroundDimmer,g.wp.px(4),{gap:p.LU.space6,"&:hover":{color:p.LU.foregroundDefault}}],icon:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],iconRight:[b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],text:[g.wp.truncate,g.wp.flex.shrink(1),{fontSize:b.eQ.fontSize}]}),A=(0,a.memo)(function(){var e=(0,y.if)(),n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,o.Y)(o.FK,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var i=e.data,a=i.label,l=i.icon;return(0,o.FD)("button",{css:Y.root,onClick:function(){return r(e)},children:[(0,o.Y)(w.S,{css:Y.icon,children:l}),t?null:(0,o.Y)(w.S,{css:Y.text,children:a}),(0,o.Y)(w.S,{css:Y.iconRight,children:(0,o.Y)(S.A,{})})]},a+n)})}):null}),C=t(52757),x=t(70953),_=t(14753),k=(0,C.AH)([g.wp.reset.button,g.wp.viewStyle,g.wp.center,g.wp.height("100%"),g.wp.cursor.pointer,g.wp.color.foregroundDimmest,g.wp.px(4),{"&:hover":{color:p.LU.foregroundDefault}},b.Ef]);function D(e){return(0,o.Y)("button",{css:k,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,o.Y)(_.A,{}):(0,o.Y)(x.A,{})})}var E=t(8280),R=t(43952),I=t(55606),F=t(76296),T=t(98541),P=t(31955),L=t(65599),U=t(80233),N=t(12420),O=t(53535),M=t(79653),B=[g.wp.position.absolute,g.wp.top(0),g.wp.left(0),g.wp.width("100%")],H=(0,f.x)({item:[B,(0,r._)({userSelect:"none",cursor:"pointer","> div":{borderRadius:"4px",marginInline:b.eQ.inputBarPadding,height:"100%",justifyContent:"center"},"&:hover > div":{backgroundColor:p.LU.interactiveBackground}},g.kL.min(E.aF,E.yN),{"> div":{borderRadius:"4px"}})]}),z=(0,a.memo)((0,a.forwardRef)(function(e,n){var t=(0,F.H)(),r=(0,y.mg)(),l=(0,y.IT)(e.index),s=l.row,c=l.active,u=l.onClick,d=l.ariaAttrs;if(!s)return null;var p={height:r?void 0:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===s.type)return(0,o.Y)(Z,{innerRef:n,path:s.path,style:p,border:e.index>0,index:e.index,tooltip:s.tooltip});var f=s.item,h=f.data,m=f.match;if("group"===h.type)return null;var g=m.render;if(g&&"content"in g&&g.content)return(0,o.FD)(w.S,(0,R._)((0,i._)({innerRef:n,css:H.item,style:p,onClick:u,"data-index":e.index},d),{children:[(0,o.Y)(P.ui,{elevated:c,children:(0,a.cloneElement)(g.content,{active:c})}),t?(0,o.Y)(K,{score:m.score}):null]}));var v=h.label,b=h.icon,S=h.dataCy,Y=g&&"ranges"in g?g.ranges:void 0;return(0,o.FD)(w.S,(0,R._)((0,i._)({innerRef:n,css:H.item,style:p,onClick:u,dataCy:S,"data-index":e.index},d),{children:[(0,o.Y)(G,{active:c,icon:b,text:v,highlight:Y,description:h.description,shortcut:h.keyboardShortcut,hasChildren:"context"===f.data.type}),t?(0,o.Y)(K,{score:m.score}):null]}))}));z.displayName="Row";var W=(0,f.x)({root:[g.wp.height("100%"),{userSelect:"none",paddingInline:b.eQ.inputBarPadding,minHeight:b.eQ.inputBarHeight}],iconText:[g.wp.maxWidth("100%"),{gap:p.LU.space8,flexShrink:1}],description:[g.wp.truncate,{fontSize:"0.9em",flexGrow:1,flexShrink:2}],right:[{gap:p.LU.space4,justifySelf:"end",marginLeft:"auto"}],chevron:"calc(".concat(b.eQ.iconSize," - 2px)")});function G(e){var n=(0,N.h)(y.KO);return(0,o.FD)(P.ui,{row:!0,align:"center",gap:b.eQ.inputBarPadding,elevated:e.active,css:W.root,children:[(0,o.FD)(w.S,{css:W.iconText,align:"center",row:!0,children:[(0,o.Y)(w.S,{className:"icon",css:V.root,children:e.icon}),(0,o.Y)(O.e,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,o.Y)(w.S,{css:W.description,style:{color:e.active?p.LU.foregroundDimmer:p.LU.foregroundDimmest},children:e.description}):null,(0,o.FD)(w.S,{css:W.right,row:!0,align:"center",children:[e.shortcut?(0,o.Y)(d._y,{keyCombo:e.shortcut,fontSize:Math.round(.85*n)}):null,e.hasChildren?(0,o.Y)(w.S,{css:W.chevron,children:(0,o.Y)(S.A,{size:12,style:{pointerEvents:"none"}})}):null]})]})}var V=(0,f.x)({root:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}]}),j=(0,f.x)({borderHeaderWrap:[B,g.wp.flex.column,{userSelect:"none",paddingTop:p.LU.space4,paddingInline:b.eQ.inputBarPadding}],borderWrap:[B,g.wp.justify.center,{userSelect:"none",paddingInline:b.eQ.inputBarPadding}],headerWrap:[{userSelect:"none",paddingInline:b.eQ.inputBarPadding},B],header:[{userSelect:"none"},{paddingInline:b.eQ.inputBarPadding}],text:[{userSelect:"none"},g.wp.flex.shrink(1),g.wp.color.foregroundDimmest,g.wp.truncate,{fontSize:"0.9em"}],border:[g.wp.height(1),g.wp.width("100%")]}),Z=(0,a.memo)(function(e){var n=(0,y.gM)(),t=(0,U.Z)(e.path,n),r=(0,o.Y)(P.ui,{elevated:!0,css:j.border});if(0===t.length)return(0,o.Y)(w.S,{"data-index":e.index,css:j.borderWrap,style:e.style,innerRef:e.innerRef,children:r});var i=(0,o.FD)(w.S,{css:j.header,row:!0,align:"center",gap:4,children:[t.map(function(e,n){return(0,o.FD)(a.Fragment,{children:[n>0?(0,o.Y)(S.A,{color:p.LU.foregroundDimmest}):null,(0,o.Y)(w.S,{css:j.text,children:e})]},e+n)}),e.tooltip?(0,o.Y)(L.m_,{tooltip:e.tooltip,placement:"right",children:(0,o.Y)(M.A,{size:12,color:p.LU.foregroundDimmest})}):null]});return e.border?(0,o.FD)(w.S,{justify:"start",gap:6,align:"stretch",css:j.borderHeaderWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,children:[r,i]}):(0,o.Y)(w.S,{css:j.headerWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,justify:"start",children:i})}),q={pill:[g.wp.position.absolute,g.wp.top("50%"),g.wp.right(4),{transform:"translateY(-50%)"}]};function K(e){var n=e.score;return(0,o.Y)(T.a,{text:"".concat(n),colorway:"red",css:q.pill})}var $=t(80619),J=(0,f.x)({root:[g.wp.flex.growAndShrink(1),g.wp.overflow("hidden"),{paddingTop:b.eQ.menuPaddingTop}],scrollParent:[g.wp.height("100%"),g.wp.overflowY("auto"),g.wp.flex.growAndShrink(1)]}),Q=(0,a.memo)(function(e){var n,t=(0,y.b)(),r=t.rows,l=t.isOpen,s=t.scrollRef,c=t.currentPathIndex,u=t.ariaAttrs,d=(0,N.ob)(y.Uo),f=(0,N.h)(y.tL),h=(0,y.mg)(),m=(0,I.Te)({count:r.length,overscan:null!==(n=e.overscan)&&void 0!==n?n:1,paddingEnd:4,getScrollElement:function(){return s.current},getItemKey:function(e){var n=r[e];return n?"section"===n.type?n.key:(0,$.p)(n.item.path):""},estimateSize:function(n){var t=r[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,i=e.compact,o=e.isFirst,a=e.minItemHeight;if("section"===t.type){var l=i?16:20,s=(0,U.Z)(t.path,r).length>0;return o?s?l:0:t.unlabeled?i?6:8:13+l}var c=t.item.match.render;return c&&"content"in c?Math.max(null!==(n=c.height)&&void 0!==n?n:a,a):a}({row:t,currentPathIndex:c,compact:f,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){d(e.getTotalSize())}}),g=m.scrollToIndex,v=m.getVirtualItems,b={borderRadius:e.hasFooter?void 0:p.LU.space8,display:l?void 0:"none"},S=(0,y.Je)();return(0,a.useEffect)(function(){var e,n=S;if(!(n<0)){if(1===n&&(null===(e=v()[0])||void 0===e?void 0:e.size))n=0;else if(!v()[n])return;g(n)}},[g,v,S]),(0,o.Y)(w.S,(0,R._)((0,i._)({css:J.root},u),{style:b,children:(0,o.Y)(w.S,{innerRef:s,css:J.scrollParent,children:(0,o.Y)(w.S,{style:{height:"".concat(m.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:l?m.getVirtualItems().map(function(e){return(0,o.Y)(z,{index:e.index,y:e.start,height:e.size,ref:h?m.measureElement:void 0},e.key.toString())}):null})})}))}),X=(0,f.x)({root:[g.wp.flex.growAndShrink(1),g.wp.width("100%"),g.wp.height("100%"),g.wp.flex.row,g.wp.justify.center,g.wp.borderRadius(4),{containerName:E.yN,containerType:b.eQ.containerType}],content:[g.wp.flex.growAndShrink(1),g.wp.maxWidth("calc(".concat(E.aF,"px - ").concat(p.LU.space16,")")),{fontSize:b.eQ.fontSize}],footer:{paddingTop:p.LU.space8},keyComboBlocks:{paddingRight:p.LU.space8},running:[g.wp.center,g.wp.flex.growAndShrink(1)],error:{padding:p.LU.space8}}),ee=(0,f.x)({root:[g.wp.viewStyle,g.wp.flex.growAndShrink(1),g.wp.height("100%"),g.wp.py(0),g.wp.px(8),{fontSize:b.eQ.fontSize,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:p.LU.foregroundDimmest},"&:hover::placeholder":{color:p.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:p.LU.foregroundDimmest}}]}),en=(0,a.memo)(function(e){var n=(0,y.Ge)();return(0,o.Y)("input",(0,i._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:ee.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},n.ariaAttrs))}),et=[h.b.filled,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.flex.growAndShrink(1),{height:b.eQ.inputBarHeight,borderRadius:4}],er=(0,f.x)({container:[{paddingTop:b.eQ.inputBarPadding,paddingInline:b.eQ.inputBarPadding,"& > div > button + input":{paddingLeft:0}}],surface:et,surfaceRunning:[et,m.S.foregroundPulse()]});function ei(e){var n=(0,y.d9)(),t=(0,y.f6)(),i=(0,N.ob)(y.wm),l=(0,s.A)(function(e){return i(e.height)}),c=(0,a.useRef)(null);return(0,u.d)(c,t,function(e){var n;return n={},(0,r._)(n,b.O3.borderBottomRightRadius,e?p.LU.space8:"0"),(0,r._)(n,b.O3.borderBottomLeftRadius,e?p.LU.space8:"0"),n}),(0,o.Y)(o.FK,{children:(0,o.Y)(w.S,{css:er.container,innerRef:l,style:{},children:(0,o.Y)(w.S,{innerRef:c,css:n?er.surfaceRunning:er.surface,children:e.children})})})}var eo=(0,a.memo)(function(e){var n=(0,y.J4)(),t=(0,y.oh)();return n?(0,o.Y)(D,{onClick:e.onClick,isLoading:t}):null}),ea=(0,a.memo)(function(){var e,n,t,i,u=(0,y.MO)(),f=u.isOpen,h=u.focus,m=u.clearCommands,S=u.isClearable,Y=u.onKeyDown,C=u.inputValue,x=u.noResults,k=u.hasHighlightedItem,D=u.isRunning,E=u.actionError,R=(0,l.A)({inputValue:C,noResults:x,hasHighlightedItem:k});e=(0,N.Ou)(y.Ai),n=(0,N.h)(y.wm),t=(0,N.AI)(y.PI),(0,a.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===i&&(i=n),t({initial:i,current:n}))};if(0!==n){var i=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var I=(0,N.h)(y.Tu),F=(0,N.h)(y.Hi),T=(0,N.h)(y.$6),P=(0,N.h)(y.nW),L=(0,N.h)(y.RY),U=(0,N.h)(y.yr),O=(0,N.Ou)(y.Ai),M=(0,c.A)(function(){return function(e){var n,t=R.current,r=O();if(null===(n=r.onKeyDown)||void 0===n||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit){r.onSubmit(t.inputValue);return}Y(e)}}},[R,Y,O]);(0,a.useEffect)(function(){L&&(L.current=h)},[h,L]);var B=(0,y._f)(),H=(0,N.ob)(y.Uz),z=(0,s.A)(function(e){return H(e.height)}),W=(0,N.h)(y.KO),G=(0,N.h)(y.tL),V=(0,N.h)(y.b7);return(0,o.Y)(w.S,{css:X.root,style:(i={},(0,r._)(i,b.O3.fontSize,W+"px"),(0,r._)(i,b.O3.iconSize,G?"12px":"16px"),(0,r._)(i,b.O3.inputBarHeight,G?"28px":"32px"),(0,r._)(i,b.O3.inputBarPadding,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.menuPaddingTop,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.containerType,G?"normal":"inline-size"),i),children:(0,o.FD)(w.S,{css:X.content,style:V?{maxWidth:"100%"}:void 0,children:[(0,o.Y)("label",{id:B.label,htmlFor:B.input,css:g.wp.visuallyHidden,children:"Commands"}),(0,o.FD)(ei,{children:[(0,o.Y)(A,{}),(0,o.Y)(en,{autoFocus:I,onKeyDown:M}),(0,o.Y)(eo,{onClick:function(){return m({focus:!0})}}),F&&!S?(0,o.Y)(w.S,{css:X.keyComboBlocks,children:(0,o.Y)(d._y,{keyCombo:F,fontSize:.85*W})}):null]}),E?(0,o.Y)(w.S,{css:X.error,children:(0,o.Y)(v.N,{colorway:"warning",text:E})}):null,f&&!D?(0,o.FD)(o.FK,{children:[(0,o.Y)(Q,{minItemHeight:U,overscan:T,hasFooter:!!P}),P?(0,o.Y)(w.S,{innerRef:z,css:X.footer,children:P}):null]}):null,D?(0,o.Y)(w.S,{css:X.running,children:(0,o.Y)(_.A,{size:24})}):null]})})});function el(e){var n=(0,y.PY)(e);return(0,o.Y)(N.Pd.Provider,{value:n,children:(0,o.Y)(ea,{})})}},80619:(e,n,t)=>{"use strict";function r(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}t.d(n,{p:()=>r})},80233:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l,k:()=>a});var r=t(66622),i=t(27189),o=t(80619);function a(e){var n=new Map;e.forEach(function(e){var t=e.path.slice(0,-1),r="section:"+(0,o.p)(t),i=n.get(r);if(i)i.items.push(e);else{var a=t[t.length-1],l=(null==a?void 0:a.data.type)==="group"||1===t.length;n.set(r,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:l,key:r,tooltip:"context"===a.data.type?null==a?void 0:a.data.tooltip:void 0})}});var t=(0,i._)(n.entries()).sort(function(e,n){var t=(0,r._)(e,2),i=(t[0],t[1]),o=(0,r._)(n,2);return(o[0],o[1]).score-i.score}),a={items:[],rows:[]},l=0;t.forEach(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];a.rows.push({type:i.type,key:t,path:i.path,unlabeled:i.unlabeled,tooltip:i.tooltip}),i.items.forEach(function(e){a.items.push(e),a.rows.push({type:"item",item:e,index:l++})})});var s=a.rows[0];return(null==s?void 0:s.type)==="section"&&s.unlabeled&&a.rows.shift(),a}function l(e,n){var t=[],r=!0,o=!1,a=void 0;try{for(var l,s=e.slice(n)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return(0,i._)(new Set(t))}},39520:(e,n,t)=>{"use strict";t.d(n,{Tu:()=>I,tL:()=>O,Ai:()=>E,RY:()=>U,KO:()=>N,nW:()=>L,Uz:()=>S,b7:()=>M,wm:()=>y,Hi:()=>F,yr:()=>B,$6:()=>P,Uo:()=>b,PI:()=>Y,if:()=>eY,MO:()=>eU,gM:()=>eh,_f:()=>$,Je:()=>et,PY:()=>eN,Ge:()=>eF,J4:()=>eg,oh:()=>ep,d9:()=>k,b:()=>eI,f6:()=>q,IT:()=>ew,mg:()=>z});var r=t(13454),i=t(20837),o=t(66622),a=t(5482),l=t(30758),s=t(51297),c=t(99813),u=t(11571),d=t(26190),p=t(32904),f=t(84911),h=t(27189);function m(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return -1}return t.length-r.length}var g=t(80233),v=t(12420),w=function(e){return"item-"+e},y=(0,c.eU)(0),b=(0,c.eU)(0),S=(0,c.eU)(0),Y=(0,c.eU)(function(e){return e(y)+e(b)+e(S)}),A=(0,c.eU)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),C=(0,c.eU)(!0);function x(){return(0,v.h)(C)}var _=(0,c.eU)(!1);function k(){return(0,v.h)(_)}var D=(0,c.eU)(null),E=(0,c.eU)({}),R=(0,u.mg)(E,function(e){return!!e.openOnInput}),I=(0,u.mg)(E,function(e){return!!e.autoFocus}),F=(0,u.mg)(E,function(e){return e.keyboardShortcut}),T=(0,u.mg)(E,function(e){return e.command}),P=(0,u.mg)(E,function(e){return e.overscan}),L=(0,u.mg)(E,function(e){return e.footer}),U=(0,u.mg)(E,function(e){return e.focusRef}),N=(0,u.mg)(E,function(e){return e.compact?12:14}),O=(0,u.mg)(E,function(e){return!!e.compact}),M=(0,u.mg)(E,function(e){return!!e.fullWidth}),B=(0,u.mg)(E,function(e){return void 0!==e.minItemHeight?e.minItemHeight:e.compact?28:32}),H=(0,u.mg)(E,function(e){var n;return null!==(n=e.showToolDescriptions)&&void 0!==n&&n});function z(){return(0,v.h)(H)}var W=(0,c.eU)(function(e){return!e(R)}),G=(0,u.mg)(E,function(e){return!!e.compact}),V=(0,c.eU)(null),j=(0,c.eU)(function(e){return e(ee)>-1}),Z=(0,c.eU)(function(e){var n=e(A);return!n.isLoading&&0===n.rows.length});function q(){return(0,v.AI)(Z)}var K=(0,c.eU)({label:"",input:"",menu:""});function $(){return(0,v.h)(K)}var J=(0,c.eU)(""),Q=(0,c.eU)(""),X=(0,c.eU)(""),ee=(0,c.eU)(-1),en=(0,c.eU)(function(e){var n=e(ee);return e(er).findIndex(function(e){return"item"===e.type&&e.index===n})});function et(){return(0,v.h)(en)}var er=(0,c.eU)(function(e){return e(A).rows}),ei=(0,c.eU)(function(e){return e(A).items}),eo=(0,c.eU)(function(e){return e(ei).length}),ea=(0,c.eU)(function(e){return e(ey).filter(function(e){return"context"===e.data.type&&!!e.match})}),el=(0,c.eU)(function(e){return e(ea).length>0}),es=(0,c.eU)(!1),ec=(0,c.eU)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(es,!0);var i=e(E).command,o=Array.isArray(i)?[i[0]]:[i];n(A,function(e){return(0,s.jM)(e,function(e){e.path=o})}),e(eP).setPath(e(ey)),n(ee,-1),n(J,""),n(Q,""),n(X,""),e(R)&&n(C,!1),r.focus&&(null===(t=e(eD))||void 0===t||t.focus())}),eu=(0,c.eU)(function(e){return e(A).placeholder}),ed=(0,c.eU)(function(e){return e(A).isLoading});function ep(){return(0,v.h)(ed)}var ef=(0,c.eU)(function(e){return e(A).path.length});function eh(){return(0,v.h)(ef)}var em=(0,c.eU)(function(e){return e(el)||!!e(J)});function eg(){return(0,v.h)(em)}var ev=(0,c.eU)(null,function(){var e=(0,r._)(function(e,n,t,r){var i,o,l,s,c,u;function d(t){var r;n(ex,null!=t?t:"Something went wrong"),null===(r=e(eD))||void 0===r||r.focus()}return(0,a.YH)(this,function(a){switch(a.label){case 0:if("group"===t.data.type)return[2];if(n(V,t),o=e(E),"context"===t.data.type)return n(ek,s=t.path),n(ee,-1),e(eP).setPath(s),null===(l=e(eD))||void 0===l||l.focus(),[2];switch(t.data.type){case"output":case"error":return n(ec),null===(c=o.onSelect)||void 0===c||c.call(o,t),[2]}n(_,!0),u=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return u=a.sent(),[3,4];case 3:return a.sent(),n(_,!1),d(),[2];case 4:if(n(_,!1),(null==u?void 0:u.type)==="error")return d(u.message),[2];return n(ec),null===(i=o.onAction)||void 0===i||i.call(o),[2]}})});return function(n,t,r,i){return e.apply(this,arguments)}}());function ew(e){var n=(0,v.ob)(ev),t=(0,l.useMemo)(function(){return(0,u.mg)(er,function(n){return n[e]})},[e]),r=(0,v.h)(t),i="item"===r.type?r.index:null,o=(0,l.useMemo)(function(){return(0,c.eU)(function(e){return null!==i&&e(ee)===i})},[i]),a=(0,v.h)(o),s=(null==r?void 0:r.type)==="item"?function(e){return n(r.item,e)}:void 0,d="item"===r.type?{id:w(e),role:"option","aria-selected":a}:void 0;return{row:r,active:a,onClick:s,ariaAttrs:d}}var ey=(0,c.eU)(function(e){return e(A).path}),eb=(0,c.eU)(function(e){return 1===e(ey).length}),eS=(0,c.eU)(null,function(e,n,t){var r=e(ey),i=r.indexOf(t);-1!==i&&(r=r.slice(0,i+1),n(ee,0),e(eP).setPath(r),n(J,""))});function eY(){return{iconOnly:(0,v.h)(G),breadcrumbs:(0,v.h)(ea),onClick:(0,v.ob)(eS)}}function eA(e,n){return n.match.score-e.match.score}var eC=(0,c.eU)(null,function(e,n,t){if(e(X)===e(X)){var r,i=t.items.sort(eA),o=t.path.length?t.path[t.path.length-1]:null,a=(0,g.k)(i),l=a.items,s=a.rows,c=null!==(r=null==o?void 0:o.data)&&void 0!==r?r:null,u=null==c?void 0:c.description;e(G)&&(null==c?void 0:c.type)!=="group"&&(u=null==c?void 0:c.label),n(A,function(e){return{items:l,rows:s,isLoading:!!t.partial,path:t.path,placeholder:u||e.placeholder}}),s.length&&-1===e(ee)&&n(ee,0)}}),ex=(0,c.eU)(null,function(e,n,t){n(D,t),n(A,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),e_=(0,c.eU)(null,function(e,n,t){n(J,t),n(ee,t?0:-1),n(D,null),n(A,function(e){return(0,s.jM)(e,function(e){e.isLoading=!!t})}),e(R)&&n(C,!!t)}),ek=(0,c.eU)(null,function(e,n,t){n(A,function(e){return(0,s.jM)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(e_,""),n(Q,""),n(X,"")}),eD=(0,c.eU)(null),eE=(0,c.eU)(null,function(e,n,t){var r=e(ee);if(!(r<0)){var i=e(ei)[r];i&&n(ev,i,t)}}),eR=(0,c.eU)(null,function(e,n,t){var r=e(C),i=e(eo),o=e(ee);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;n(ee,a<i?a:0),n(C,!0);return;case"ArrowUp":t.preventDefault(),n(ee,Math.max(-1,o-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var l=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=l:t.currentTarget.setSelectionRange(l,l);return;case"Escape":if(!e(J)||(t.preventDefault(),n(e_,""),n(Q,""),e(W)))return;n(C,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eE,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var s="PageUp"===t.key?-10:10;n(ee,function(e){return Math.max(Math.min(e+s,i-1),0)});return}});function eI(){var e=(0,v.h)(er),n=x(),t=(0,l.useRef)(null),r=eh(),i=(0,v.h)(K);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}function eF(){var e,n,t,r,i=(0,v.ob)(eD),a=(0,v.h)(eu),s=(0,o._)((e=(0,v.h)(J),n=(0,v.ob)(e_),t=(0,v.ob)(Q),r=(0,o._)((0,l.useTransition)(),2)[1],[e,(0,l.useCallback)(function(e){var i="string"==typeof e?e:e.currentTarget.value;n(i),r(function(){return t(i)})},[n,r,t])]),2),c=s[0],u=s[1],d=(0,v.ob)(ee),p=(0,v.h)(ee),f=(0,v.h)(K),h=x();return{onBlur:function(){return d(-1)},onChange:u,placeholder:a,value:c,ref:i,disabled:k(),ariaAttrs:{id:f.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":p>-1?w(p):"","aria-controls":f.menu,"aria-expanded":h,"aria-labelledby":f.label}}}var eT=(0,c.eU)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(es)&&(r=[r[0]]);var i=e(Q);n(X,i),e(eP).setPath(r,i)}),eP=(0,c.eU)({}),eL=(0,c.eU)(null,function(e,n){var t=e(ey),r=e(ea);if(r.pop()){var i=r.pop();if(!i){n(ec);return}var o=t.indexOf(i);t=t.slice(0,o+1),n(ee,0),n(ek,t),e(eP).setPath(t)}});function eU(){var e,n,t,r,i,o,a,s=x(),c=(0,v.h)(em),u=(0,v.h)(J),f=(0,v.h)(Z),h=k(),m=(0,v.h)(D),g=(0,v.ob)(eR),w=(0,v.h)(j),y=(0,v.ob)(ec),b=(0,v.Ou)(eD);e=(0,v.h)(eP),n=(0,v.h)(T),t=(0,v.AI)(eb),r=(0,v.AI)(Q),i=(0,v.ob)(X),o=(0,v.ob)(eT),a=(0,d.A)(n),(0,l.useEffect)(function(){t.current&&o(n)},[e,t,n,r,o]),(0,l.useEffect)(function(){return t.subscribe(function(e){e&&o(a.current)})},[e,r,t,o,a]),(0,l.useEffect)(function(){var n=function(n){i(n),e.search(n)};return n(r.current),r.subscribe(n)},[e,r,t,i,a]);var S=(0,p.A)(function(){return function(){var e;return null===(e=b())||void 0===e?void 0:e.focus()}},[b]),Y=(0,v.ob)(eL);return{focus:S,onKeyDown:(0,p.A)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){Y();return}return g(e)}},[g,Y]),inputValue:u,isOpen:s,isClearable:c,noResults:f,hasHighlightedItem:w,isRunning:h,actionError:m,clearCommands:y}}function eN(e){var n=(0,f.c)(),t={label:n("label"),input:n("input"),menu:n("menu")},r=(0,o._)((0,l.useState)(function(){var n,r,o=(0,c.y$)();o.set(K,t),o.set(E,e),o.set(C,!e.openOnInput),o.set(eP,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=n,o=null,a=0;function l(e){o&&clearTimeout(o);var n=++a,l=0,s=[],c=i[i.length-1];if(!c.commands){r({items:s,path:i});return}void 0!==t&&(o=setTimeout(function(){s.length&&r({items:(0,h._)(s).sort(m),partial:!0,path:i})},t)),function t(c,u,d){if(l++,!c.commands)throw Error("Expected commands");var p=(0,h._)(u).concat([c]),f=p.length===i.length;Promise.resolve(c.commands({active:f,searchQuery:e,path:p})).then(function(c){if(n!==a){o&&clearTimeout(o);return}l--,c.forEach(function(n,r){var i=(0,h._)(p).concat([n]),o=(0,h._)(d).concat([r]),a=n.match?n.match({searchQuery:e,data:n.data,path:i,active:f}):null;a&&s.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,p,o)}),l>0||(o&&clearTimeout(o),r({items:(0,h._)(s).sort(m),path:i}))})}(c,i.slice(0,i.length-1),[])}return{search:l,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i=e,l(n)},getPath:function(){return i}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:100,onUpdate:function(e){return o.set(eC,(0,i._)({},e))}}));var a=Array.isArray(e.command)?e.command[0]:e.command,l=null!==(r=null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.description)&&void 0!==r?r:null;return l&&o.set(A,function(e){return(0,s.jM)(e,function(e){e.placeholder=l})}),o}),1)[0];return(0,l.useEffect)(function(){r.set(E,e)},[r,e]),r}},12420:(e,n,t)=>{"use strict";t.d(n,{AI:()=>p,Ou:()=>u,Pd:()=>l,h:()=>c,ob:()=>d});var r=t(30758),i=t(72653),o=t(48363),a=t(8697),l=(0,r.createContext)(void 0);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){var n=s();return(0,i.md)(e,{store:n})}function u(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}var d=function(e){var n=s();return(0,i.Xr)(e,{store:n})};function p(e){return(0,a.k)(e,s())}},53718:(e,n,t)=>{"use strict";t.d(n,{Ef:()=>l,O3:()=>o,eQ:()=>a});var r=t(52757),i=(0,t(1478).v)(["fontSize","menuPaddingTop","borderBottomLeftRadius","borderBottomRightRadius","inputBarPadding","inputBarHeight","containerType","iconSize"]),o=i.cssVars,a=i.styleTokens,l=(0,r.AH)({"&& svg":{minWidth:a.iconSize,minHeight:a.iconSize,width:a.iconSize,height:a.iconSize}})},29504:(e,n,t)=>{"use strict";t.d(n,{B:()=>i,q:()=>r});var r={findOrCreateFile:3,searchFileContents:2,fork:.5,createNewRepl:.5,askAi:.7,codeSearch:.5,myRepls:.5,settings:.5},i={files:.98,settings:.9,toolDescription:.8,askAi:.7,codeSearch:.5,fileContentsSearch:.4}},69638:(e,n,t)=>{"use strict";t.d(n,{F:()=>Y});var r=t(75895),i=t(13454),o=t(66622),a=t(5482),l=t(94086),s=t(30758),c=t(40174),u=t(49711),d=t(83733),p=t(87925),f=t(82436),h=t(76862),m=t(41595),g=t(40172),v=t(76985),w=t(40889),y=t(8367),b=t(16021),S=c.ZU.Object({targetReplId:c.ZU.String(),sourceReplId:c.ZU.String(),bucketId:c.ZU.String()});function Y(){var e,n=(0,o._)((0,s.useState)(null),2),t=n[0],c=n[1],Y=(0,d.A)(),A=(0,m.i)();return(0,h.b)((e=(0,i._)(function(e,n){var t,i,o,l,s,d,h,m,g,v,w,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.session,i=n.signal,!Y||!A)return[2];l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).resReadable,s=o.reqWritable,d=!1,h=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),g=function(){var e=w.value;if(!e.ok||"requestDefaultBucketAccess"!==e.payload.$kind)return"continue";var n=e.payload.nonce;(0,f.u4)(f.AZ.MODAL_VIEWED,{modalName:"default_bucket_access_modal"}),c(function(){return function(e){if(!e){c(null),s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"user canceled"}});return}(0,p.B2)("/object-storage/replit/allowDefaultBucketAccess/targetRepl/".concat(encodeURIComponent(Y),"/sourceRepl/Dotfiles.").concat(encodeURIComponent(A.username)),{}).then(function(e){u.WT.Check(S,e)?s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"ok",targetReplId:e.targetReplId,sourceReplId:e.sourceReplId,bucketId:e.bucketId}}):s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:JSON.stringify(u.WT.Errors(S,e))}})}).catch(function(e){s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"".concat(e)}})}).finally(function(){c(null)})}})},v=(0,r._)(l),a.label=2;case 2:return[4,v.next()];case 3:if(!(d=!(w=a.sent()).done))return[3,5];g(),a.label=4;case 4:return d=!1,[3,2];case 5:return[3,12];case 6:return y=a.sent(),h=!0,m=y,[3,12];case 7:if(a.trys.push([7,,10,11]),!(d&&null!=v.return))return[3,9];return[4,v.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(h)throw m;return[7];case 11:return[7];case 12:return s.close(),[2]}})}),function(n,t){return e.apply(this,arguments)}),[Y,A]),(0,l.Y)(v.a,{isOpen:"function"==typeof t,onRequestClose:function(){null==t||t(!1),(0,f.u4)(f.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"close"}),c(null)},children:(0,l.FD)(y.S,{gap:16,children:[(0,l.Y)(w.Y9,{variant:"headerDefault",level:3,children:"Allow Dotfiles Object Storage Bucket access"}),(0,l.Y)(w.EY,{children:"Do you want the Object Storage bucket associated with your Dotfiles Repl to be accessible in this Repl? If your Dotfiles Repl has any secrets, they will be accessible to this Repl too."}),(0,l.Y)(w.EY,{children:"If you did not install the Replit dotfiles support, you should deny this."}),(0,l.FD)(y.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(g.$n,{onClick:function(){null==t||t(!1),(0,f.u4)(f.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"deny"}),c(null)},text:"Deny"}),(0,l.Y)(g.$n,{onClick:function(){null==t||t(!0),(0,f.u4)(f.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"confirm"}),c(null)},iconLeft:(0,l.Y)(b.A,{}),text:"Allow for this Repl",colorway:"primary"})]})]})})}},36788:(e,n,t)=>{"use strict";t.d(n,{$:()=>C});var r=t(75895),i=t(13454),o=t(66622),a=t(5482),l=t(94086),s=t(30758),c=t(20837),u=t(45009),d=t(30632),p=t(72813);function f(){var e=(0,u._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},m=(0,d.J1)(f()),g=t(82436),v=t(76862),w=t(24481),y=t(40172),b=t(76985),S=t(40889),Y=t(8367),A=t(16021);function C(){var e,n,t=(0,w.A)().replspaceApi,u=(0,o._)((0,s.useState)(null),2),d=u[0],f=u[1],C=(0,o._)((0,s.useState)(!1),2),x=C[0],_=C[1],k=(e=(0,c._)({},h,void 0),p.I(m,e)).data,D=(null==k?void 0:k.currentUser)||void 0;return(0,s.useEffect)(function(){return t.onConfirmSendToken(function(e){e&&(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return e})})},[t]),(0,v.b)((n=(0,i._)(function(e,n){var t,i,o,l,s,c,u,d,p,h,m,v;return(0,a.YH)(this,function(a){switch(a.label){case 0:t=n.session,i=n.signal,l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=o.resReadable,c=!1,u=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),p=function(){var e=m.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var n,t,r=e.payload.nonce,i=null!==(t=null==D?void 0:null===(n=D.gitHubInfo)||void 0===n?void 0:n.accessToken)&&void 0!==t?t:void 0;if(!i)return l.write({$kind:"githubToken",nonce:r}),"continue";if(x)return l.write({$kind:"githubToken",token:i,nonce:r}),"continue";(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return function(e){if(!e){f(null),l.write({$kind:"githubToken",nonce:r});return}l.write({$kind:"githubToken",token:i,nonce:r}),f(null),_(!0)}})}},h=(0,r._)(s),a.label=2;case 2:return[4,h.next()];case 3:if(!(c=!(m=a.sent()).done))return[3,5];p(),a.label=4;case 4:return c=!1,[3,2];case 5:return[3,12];case 6:return v=a.sent(),u=!0,d=v,[3,12];case 7:if(a.trys.push([7,,10,11]),!(c&&null!=h.return))return[3,9];return[4,h.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[D,x]),(0,l.Y)(b.a,{isOpen:"function"==typeof d,onRequestClose:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),f(null)},children:(0,l.FD)(Y.S,{gap:16,children:[(0,l.Y)(S.Y9,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.Y)(S.EY,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.Y)(S.EY,{children:"If you did not initiate a git command, you should deny this."}),(0,l.FD)(Y.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(y.$n,{onClick:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),f(null)},text:"Deny"}),(0,l.Y)(y.$n,{onClick:function(){null==d||d(!0),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),f(null)},iconLeft:(0,l.Y)(A.A,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},78709:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(94086),i=t(53426),o=t(10168),a=t(32842),l=t(74910),s=t(76554),c=t(40889),u=t(8367),d=(0,o.x)({overlay:[a.wp.position.fixed,a.wp.flex.row,a.wp.align.center,a.wp.justify.center,a.wp.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:a.U3+1,cursor:"not-allowed"}],animationWrapper:[a.wp.center,a.wp.minWidth(225),a.wp.height(225),a.wp.p(16),a.wp.color.foregroundDefault,a.wp.borderRadius(8),a.wp.backgroundColor.backgroundOverlay,a.wp.zIndex(a.U3+1),{cursor:"not-allowed"}],lockText:a.wp.mt(32)});function p(e){var n=e.reason;return(0,r.Y)(s.Z,{children:(0,r.Y)(u.S,{css:d.overlay,children:(0,r.Y)(i.Ay,{children:(0,r.FD)(u.S,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.Y)(l.A,{height:80}),(0,r.Y)(c.EY,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:n})]})})})})}},89020:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(20837),i=t(43952),o=t(94086),a=t(24955),l=t(10168),s=t(32842),c=t(81243),u=t(65599),d=t(8367),p=(0,l.x)({default:[],withOnClick:[s.wp.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:a.LU.shadow1}}]});function f(e){var n=e.user,t=e.onClick,a=e.size,l=void 0===a?24:a;return(0,o.Y)(u.m_,{placement:"bottom",tooltip:t?"Observe ".concat(n.username):n.username,children:function(e,a){return(0,o.Y)(d.S,(0,i._)((0,r._)({},e),{innerRef:a,onClick:t,children:(0,o.Y)(c.e,{size:l,src:n.image||null,username:n.username,ringColor:n.color,css:t?p.withOnClick:p.default})}))}})}},94614:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(66622),i=t(94086),o=t(30758),a=t(10168),l=t(32842),s=t(40172),c=t(28354),u=t(40889),d=t(8367),p=(0,a.x)({styles1:[l.wp.color.accentNegativeStronger]});function f(e){var n=e.prompt,t=e.desc,a=e.type,l=e.placeholder,f=e.confirmText,h=e.loading,m=e.errorMessage,g=e.onCancel,v=e.onConfirm,w=e.isDanger,y=e.buttonIcon,b=(0,r._)((0,o.useState)(),2),S=b[0],Y=b[1];return(0,i.FD)(d.S,{gap:24,children:[(0,i.Y)(u.Y9,{variant:"headerDefault",level:2,children:n}),(0,i.Y)(u.EY,{children:t}),(0,i.Y)(c.pd,{type:a,value:S,placeholder:l,autoFocus:!0,onChange:function(e){return Y(e.target.value)}}),m?(0,i.Y)(u.EY,{css:p.styles1,multiline:!1,children:m}):null,(0,i.FD)(d.S,{row:!0,gap:12,justify:"end",children:[(0,i.Y)(s.$n,{disabled:h,onClick:g,text:"Cancel"}),(0,i.Y)(s.$n,{colorway:w?"negative":"primary",disabled:h,onClick:function(){return S&&v(S)},text:f||"Ok",iconLeft:y,dataCy:"prompt-confirm-button"})]})]})}},1670:(e,n,t)=>{"use strict";t.d(n,{$p:()=>d,XV:()=>a,h7:()=>l,lX:()=>u});var r=t(54867),i=t(3596),o=t(34805),a=.01,l=function(e,n){var t=n.resourceUsageType,r=n.forceGib,i=n.precision,o=n.skipUnits,a=n.additional,l=n.minimumValue,s=n.truncateToMillions,u=n.gibsDisplayAsBytes,d=c({input:e,resourceUsageType:t,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===l?null:l,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function s(e,n){var t=n.precision,r=n.minimumValue,i=n.forceGib,o=r&&0!==e;return e>=0x40000000*(null!=r?r:1)||i?o&&e<0x40000000*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"GiB"}:{formattedValue:d(e).toFixed(t),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"MiB"}:{formattedValue:u(e).toFixed(t),units:"MiB"}}var c=function(e){var n=e.input,t=e.resourceUsageType,a=e.forceGib,l=e.precision,c=e.minimumValue,u=e.truncateToMillions,d=e.gibsDisplayAsBytes,p=c&&0!==n&&n<c;switch(t){case"Bytes":return s(n,{precision:l,minimumValue:c,forceGib:a});case"GiB":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB"};if(d)return s(0x40000000*n,{precision:l,minimumValue:c,forceGib:!1});if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB"};return{formattedValue:n.toFixed(l),units:"GiB"};case"GiB-months":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB-months"};if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB-months"};return{formattedValue:n.toFixed(l),units:"GiB-months"};case"ComputeUnits":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"compute units"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"requests"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"Deployments":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};case"Minutes":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"minutes"};case"Dollars":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2,style:"currency",currency:"USD"}),units:"dollars"};case"PlanSteps":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"plan steps"};case"Checkpoints":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"checkpoints"};case"EditRequests":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:(0,o.A)(i.go)};case"None":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:""};default:(0,r.A)(t)}},u=function(e){return e/1048576},d=function(e){return e/0x40000000}},43639:(e,n,t)=>{"use strict";t.d(n,{oD:()=>d,wo:()=>f});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(50788);function s(){var e=(0,i._)(["\n  fragment TransferReplReplInfo on Repl {\n    id\n    slug\n    title\n    owner {\n      ... on Team {\n        id\n        username\n      }\n      ... on User {\n        id\n        username\n      }\n    }\n    org {\n      id\n      slug\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query TransferReplDialog {\n    currentUser {\n      id\n      ...ReplOwnerCurrentUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s()),p=(0,o.J1)(c(),l.nM);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},27230:(e,n,t)=>{"use strict";t.d(n,{E:()=>r,s:()=>i});var r=function(e){return e[e.AI=0]="AI",e[e.Template=1]="Template",e[e.GitHub=2]="GitHub",e}({}),i=function(e){return e.Visited="visited",e.LanguageChanged="language-changed",e.ImportStarted="import-started",e.ImportEnded="import-ended",e.ConfigDone="config-done",e}({})},8726:(e,n,t)=>{"use strict";t.d(n,{F:()=>o});var r=t(45009);function i(){var e=(0,r._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(30632).J1)(i())},41155:(e,n,t)=>{"use strict";t.d(n,{y:()=>d});var r=t(94086),i=t(37824),o=t(55937),a=t(17944),l=t(40889),s=t(65599),c=t(8367),u=t(63516);function d(e){var n=e.deployment,t=e.small,d=n.currentBuild,p=a.v[d.status],f=p.title,h=p.color,m=(0,i.A)(new Date(d.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(m," by ").concat(d.user.displayName),v=d.status===o.nH.Success?"Deployed":f;return(0,r.Y)(s.m_,{tooltip:g,children:(0,r.FD)(c.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(u.A,{size:t?12:16,color:h}),(0,r.Y)(l.EY,{variant:t?"small":void 0,color:"dimmest",multiline:!1,children:v})]})})}},2750:(e,n,t)=>{"use strict";t.d(n,{F:()=>c});var r=t(66622),i=t(94086),o=t(30758),a=t(99813),l=t(68670),s=t(72145);function c(e){var n=(0,r._)((0,o.useState)(function(){var n,t,r,i,o,s,c;return t=(n={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=n.fs,i=n.dotReplit,o=n.ports,s=n.secrets,(c=(0,a.y$)()).set(l.xs,t),c.set(l.fg,r),c.set(l.Vc,i),c.set(l.kK,o),c.set(l.$s,s),c}),1)[0];return(0,i.FD)(s.rF.Provider,{value:n,children:[e.children,(0,i.Y)(l.JH,{replId:e.replId,orgId:e.orgId})]})}},68670:(e,n,t)=>{"use strict";t.d(n,{JH:()=>eZ,xs:()=>ei,Vc:()=>el,fg:()=>eo,kK:()=>es,$s:()=>ea,GQ:()=>eW,UM:()=>e5,Tp:()=>eX,_k:()=>ek,cF:()=>eF,mj:()=>ex,Jz:()=>eU,i$:()=>ey,tq:()=>eP,uS:()=>ev,kM:()=>eR,gq:()=>em,bu:()=>eS,Ol:()=>ed,om:()=>ec,O6:()=>eA,ik:()=>eE,kW:()=>eG,Rh:()=>ep,Ki:()=>eq,g$:()=>eu,e_:()=>e1});var r=t(13454),i=t(20837),o=t(43952),a=t(66622),l=t(5482),s=t(30758),c=t(74532),u=t(51297),d=t(99813),p=t(55937),f=t(45009),h=t(30632),m=t(72813),g=t(43751),v=t(39528),w=t(75838),y=t(96155);function b(){var e=(0,f._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n    hasDeploymentRepricing(orgId: $orgId)\n  }\n"]);return b=function(){return e},e}function S(){var e=(0,f._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function Y(){var e=(0,f._)(["\n  fragment DeploymentAuthorization on ReplAuthorization {\n    isAuthorized\n    code\n    message\n  }\n"]);return Y=function(){return e},e}function A(){var e=(0,f._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createAutoscaleDeploymentPrivate: createDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeployment: createDeployment(provider: gce, isPrivate: false) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeploymentPrivate: createDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createScheduledDeployment: createDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeployment: createDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeploymentPrivate: createDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeployment: redeployDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeploymentPrivate: redeployDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeployment: redeployDeployment(\n        provider: gce\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeploymentPrivate: redeployDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployScheduledDeployment: redeployDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeployment: redeployDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeploymentPrivate: redeployDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      useDeploymentDebugSummaries {\n        ...DeploymentAuthorization\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}function C(){var e=(0,f._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function x(){var e=(0,f._)(["\n  query DeploymentSession($replId: String!, $orgId: String) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,f._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function k(){var e=(0,f._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}function D(){var e=(0,f._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return D=function(){return e},e}function E(){var e=(0,f._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}var R={},I=(0,h.J1)(b()),F=(0,h.J1)(S(),y.Zc,y.UQ),T=(0,h.J1)(Y()),P=(0,h.J1)(A(),T),L=(0,h.J1)(C(),F,P),U=(0,h.J1)(x(),L,I);function N(e){var n=(0,i._)({},R,e);return g._(U,n)}var O=(0,h.J1)(_(),y.mY),M=(0,h.J1)(k(),y.UQ,y.Zc),B=(0,h.J1)(D(),F),H=(0,h.J1)(E(),y.UQ),z=t(60102),W=t(54867),G=t(81663),V=t(76634),j=t(9645),Z=t(71676);function q(){return(q=(0,r._)(function(e){var n,t,r,i,o,a,s,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.command,t=e.replId,r=e.buildId,i=e.machineConfigurationId,o=e.maxMachineInstances,!Z.V)throw Error("expected apolloClient to be initialized");return[4,Z.V.mutate({mutation:B,variables:{input:{command:n,replId:t,buildId:r,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null===(a=(u=l.sent()).errors)||void 0===a?void 0:a.length)throw Error(u.errors.map(function(e){return e.message}).join(", "));if((null===(c=u.data)||void 0===c?void 0:null===(s=c.sendDeploymentLifecycleCommand)||void 0===s?void 0:s.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null===(p=u.data)||void 0===p?void 0:null===(d=p.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function K(){return(K=(0,r._)(function(e){var n,t,r,i,o,a,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.buildId,t=e.targetDeploymentId,!Z.V)throw Error("expected apolloClient to be initialized");return[4,Z.V.mutate({mutation:H,variables:{input:{buildId:n,targetDeploymentId:t}}})];case 1:if(null===(r=(a=l.sent()).errors)||void 0===r?void 0:r.length)throw Error(a.errors.map(function(e){return e.message}).join(", "));if((null===(o=a.data)||void 0===o?void 0:null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null===(c=a.data)||void 0===c?void 0:null===(s=c.failHostingBuild)||void 0===s?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}var $=t(72145),J=t(58133),Q=t(37057),X=t(85848),ee=t(54012),en=t(26190),et=t(81536),er=t(83733),ei=(0,d.eU)({}),eo=(0,d.eU)({}),ea=(0,d.eU)({}),el=(0,d.eU)({}),es=(0,d.eU)({});function ec(){return(0,$.h)(eo)}function eu(){return(0,$.h)(ea)}function ed(){return(0,$.h)(el)}function ep(){return(0,$.h)(es)}var ef=(0,d.eU)(void 0),eh=(0,d.eU)(void 0);function em(){return(0,$.h)(eh)}var eg=(0,d.eU)(J.d.Loading);function ev(){return(0,$.h)(eg)}var ew=(0,d.eU)(void 0);function ey(){return(0,$.h)(ew)}var eb=(0,d.eU)(void 0);function eS(){return(0,$.h)(eb)}var eY=(0,d.eU)(void 0);function eA(){return(0,$.h)(eY)}var eC=(0,d.eU)(void 0);function ex(){var e,n,t=(0,$.h)(ef),r=(0,$.h)(eC),i=(0,$.h)(eI),o=(0,$.ob)(eO),l=(0,$.ob)(eK),s=(0,a._)(N({fetchPolicy:"no-cache",onCompleted:o,onError:function(e){l(e.message)}}),1)[0],c=function(e,n){if(!e||!r)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:p.S4.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:p.S4.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var i=r.createAutoscaleDeployment,o=r.createAutoscaleDeploymentPrivate,a=r.createRvmDeployment,l=r.createRvmDeploymentPrivate,s=r.createScheduledDeployment,c=r.createStaticDeployment,u=r.createStaticDeploymentPrivate,d=r.redeployAutoscaleDeployment,f=r.redeployAutoscaleDeploymentPrivate,h=r.redeployRvmDeployment,m=r.redeployRvmDeploymentPrivate,g=r.redeployScheduledDeployment,v=r.redeployStaticDeployment,w=r.redeployStaticDeploymentPrivate;switch(e){case p.Q0.Static:return{deploy:n?u:c,redeploy:n?w:v,isIncludedInSubscription:!1};case p.Q0.Cron:return{deploy:s,redeploy:g,isIncludedInSubscription:!1};case p.Q0.CloudRun:return{deploy:n?o:i,redeploy:n?f:d,isIncludedInSubscription:!1};case p.Q0.Gce:var y,b=a.isAuthorized,S=(null==t?void 0:t.__typename)==="Repl"&&(null===(y=t.owner)||void 0===y?void 0:y.__typename)==="Team";return{deploy:n?l:a,redeploy:n?m:h,isIncludedInSubscription:b&&S};case p.Q0.Extension:throw Error("Found unexpected provider");default:(0,W.A)(e)}};return{deployability:c(null==i?void 0:i.provider),getDeployabilityByProvider:c,refetch:function(){if(t)return s({variables:{replId:t.id}})},hasDebugSummariesAuthorization:null!==(n=null==r?void 0:null===(e=r.useDeploymentDebugSummaries)||void 0===e?void 0:e.isAuthorized)&&void 0!==n&&n}}var e_=(0,d.eU)(ee.Sv);function ek(){var e=(0,$.h)(e_),n=(0,s.useCallback)(function(n){return(0,ee._3)(n,e)},[e]);return(0,o._)((0,i._)({},e),{getRvmDeploymentCostDetailsByConfigurationSlug:n})}function eD(e){var n,t,r,o,a,l,s=(t={variables:{replId:e}},r=(0,i._)({},R,t),m.I(U,r)),c=s.data,u=s.refetch,d=(null==c?void 0:c.getRepl.__typename)==="Repl"?c.getRepl:null;return{isTeamRepl:(null==d?void 0:null===(o=d.owner)||void 0===o?void 0:o.__typename)==="Team",isReplitOwnedTeamRepl:!!((null==d?void 0:null===(a=d.owner)||void 0===a?void 0:a.id)&&(777914===(n=null===(l=d.owner)||void 0===l?void 0:l.id)||0xe69de0===n||3944703===n||0x1c62260===n)),refetch:u}}function eE(e){return!!eD(e).isTeamRepl}function eR(e){var n=e.replId,t=e.onError,i=e.dotReplitService,o=(0,a._)((0,s.useState)(void 0),2),c=o[0],u=o[1],d=(0,a._)((0,s.useState)(void 0),2),f=d[0],h=d[1],m=eD(n),g=m.isTeamRepl,v=m.isReplitOwnedTeamRepl;return(0,s.useEffect)(function(){if(g&&!v){u(p.Q0.Gce),h(p.Q0.Gce);return}function e(){return(e=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,X.XE)(i)];case 1:if(null===(e=r.sent()).appType)return u(p.Q0.CloudRun),h(p.Q0.CloudRun),[2];if((n=(0,Q.b3)(e.appType))===p.Q0.Extension)return t("Did not recognize template deployment provider"),[2];return u(n),h(n),[3,3];case 2:return r.sent(),t("Something went wrong"),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,i,g,v]),{activeProvider:c,setActiveProvider:u,recommendedProvider:f}}var eI=(0,d.eU)(void 0);function eF(){return(0,$.h)(eI)}var eT=(0,d.eU)(void 0);function eP(){return(0,$.h)(eT)}var eL=(0,d.eU)(void 0);function eU(){return(0,$.h)(eL)}var eN=(0,d.eU)(null,function(e,n){n(ew,void 0),n(eb,void 0),n(eI,void 0),n(eT,void 0),n(eg,J.d.Ready)}),eO=(0,d.eU)(null,function(e,n,t){var r,i="Repl"===t.getRepl.__typename?t.getRepl:null,o=(null===(r=t.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;i&&o&&n(eC,i.authorizations)}),eM=(0,d.eU)(null,function(e,n,t){var r,i,o,a="Repl"===t.getRepl.__typename?t.getRepl:null,l=(null===(r=t.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;if(a&&l){n(ef,a),n(eh,l),n(eO,t),n(e_,(0,ee.xC)({hasDeploymentRepricing:l.hasDeploymentRepricing})),n(eY,!!a.config.isVnc);var s=a.hostingDeployment;if(s){if("HostingDeployment"!==s.__typename)return n(eL,"Unexpected hosting deployment typename: ".concat(s.__typename));if(n(ew,s.id),n(eI,s.currentBuild),n(eb,s.replitAppSubdomain||(0,V.ER)({replSlug:a.slug,username:null===(o=a.owner)||void 0===o?void 0:o.username})),s.inProgressBuild){n(eT,s.inProgressBuild),n(eg,J.d.Deploying);return}return void n(eg,(0,Q.$0)(s.currentBuild.status))}n(eb,(0,V.ER)({replSlug:a.slug,username:null===(i=a.owner)||void 0===i?void 0:i.username})),n(eg,J.d.Ready)}});function eB(){var e=(0,$.ob)(eM),n=(0,$.ob)(eK);return(0,a._)(N({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){n(e.message)}}),1)[0]}var eH=(0,d.eU)(null,function(e,n,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=e(eg),i=e(eT),o=e(eI),a=t.status;if(r===J.d.Deploying){if(!i){n(eK,"No deployment in progress found");return}n(eT,(0,u.jM)(i,function(e){e.status=a})),a!==p.nH.Success&&a!==p.nH.Failed||(n(eT,void 0),a!==p.nH.Success&&o||n(eI,(0,u.jM)(i,function(e){e.status=a,e.hasImageTag=i.provider!==p.Q0.Static&&a===p.nH.Success})))}else if(r===J.d.ProcessingLifecycleCommand){if(!o){n(eK,"No current build found");return}n(eI,(0,u.jM)(o,function(e){e.status=a}))}n(eg,(0,Q.$0)(a)),t.message&&a===p.nH.Failed&&n(eK,t.message)}}),ez=(0,d.eU)(null);function eW(){return(0,$.h)(ez)}function eG(e){var n=(0,$.AI)(ez),t=(0,en.A)(e);(0,s.useEffect)(function(){return n.subscribe(function(e){e&&t.current(e)})},[n,t])}var eV=(0,d.eU)(function(e){var n,t;switch(e(eg)){case J.d.Deploying:return null===(n=e(eT))||void 0===n?void 0:n.id;case J.d.ProcessingLifecycleCommand:return null===(t=e(eI))||void 0===t?void 0:t.id;default:return}}),ej=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r;return(0,l.YH)(this,function(e){return(r=t.data.data)&&(n(eH,r.hostingBuildDeployActionUpdates),n(ez,r.hostingBuildDeployActionUpdates)),[2]})});return function(n,t,r){return e.apply(this,arguments)}}());function eZ(e){var n,t,r,o,a,l,c=e.replId,u=e.orgId;return n=eB(),t=(0,$.ob)(ej),r=(0,$.ob)(eK),(0,s.useEffect)(function(){n({variables:{replId:c,orgId:u}})},[n,c,u]),a={variables:{input:{buildId:null!=(o=(0,$.h)(eV))?o:""}},skip:!o,onData:t,onError:function(e){r(e.message)}},l=(0,i._)({},R,a),v.R(O,l),null}function eq(){var e=(0,er.A)(),n=(0,et.R)(e).orgId,t=eB(),r=(0,$.ob)(eg);return(0,s.useCallback)(function(){return r(J.d.Loading),t({variables:{replId:e,orgId:n}})},[t,r,e,n])}var eK=(0,d.eU)(null,function(e,n,t){n(eL,t)}),e$=(0,d.eU)(null,function(e,n,t){var r,i=t.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename){n(eK,i.message);return}n(eT,i.build),n(ew,i.targetDeployment.id),n(eb,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),n(eg,J.d.Deploying)}}),eJ=(0,d.eU)(null,function(e,n,t){var r,i=t.rollbackHostingBuild;if(i){if("RollbackHostingBuildResult"!==i.__typename){n(eK,i.message);return}n(eT,i.build),n(ew,i.targetDeployment.id),n(eb,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),n(eg,J.d.Deploying)}});function eQ(e){var n=e.provider,t=e.ignorePorts;switch(n){case p.Q0.Static:return p.JX.Static;case p.Q0.CloudRun:return p.JX.CloudRun;case p.Q0.Cron:return p.JX.Cron;default:return t?p.JX.Worker:p.JX.Server}}function eX(){var e,n,t,o,u=(0,er.A)(),d=ey(),f=ed(),h=(0,$.h)(ei),m=ec(),g=(0,a._)((e=(0,i._)({},R,void 0),w.n(M,e)),1)[0],v=(0,$.ob)(e$),y=(0,$.ob)(eK),b=(0,$.ob)(eJ),S=(0,$.ob)(eg),Y=(0,$.Ou)(eT),A=eF(),C=(0,a._)((0,z.Bg)(),1)[0];return{deployBuild:(0,s.useCallback)((n=(0,r._)(function(e){var n,t,r,i,o,a,s,w,b,C,x,_,k,D,E,R;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.envVars,t=e.subdomain,r=e.machineConfigurationId,i=e.maxMachineInstances,o=e.config,a=e.machineJob,s=e.isPrivate,w=e.hasAgentSession,Y())return y("Deployment already in progress"),[2];l.label=1;case 1:if(l.trys.push([1,5,,6]),b=o.buildCommand,C=o.runCommand,x=o.publicDir,_=o.ignorePorts,!(k=A?eQ({provider:null==A?void 0:A.provider,ignorePorts:!!_}):o.appType))throw new j.Kb;if(!t)throw new j.kZ;switch(k){case p.JX.Static:if(!(0,V.mU)(x))throw new j.uF;break;case p.JX.Worker:case p.JX.Server:case p.JX.CloudRun:case p.JX.Cron:if(!(0,V.mU)(C))throw new j.kS;if(k===p.JX.Cron){if(!(null==a?void 0:a.crontab)||""===a.crontab)throw new j.f_("Schedule cannot be empty.");if(!(0,c.isValidCron)(a.crontab))throw new j.f_("Invalid schedule. Must be a valid cron expression.");if(!(null==a?void 0:a.timezone)||""===a.timezone)throw new j.xF("Timezone cannot be empty.");if(!(0,G._j)(a.timezone))throw new j.xF("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,W.A)(k)}return S(J.d.Preparing),[4,(0,X.XE)(f)];case 2:return D=l.sent(),[4,(0,X.FR)({buildCommand:b,runCommand:C,appType:k,publicDir:x,ignorePorts:_},D,{dotReplit:f,fs:m,container:h})];case 3:return l.sent(),E=(0,Q.b3)(k),[4,g({variables:{input:{replId:u,targetDeploymentId:d,targetMachineConfigurationId:r,maxMachineInstances:i,commands:{build:b,run:C||""},envVars:n,subdomain:t,provider:E,appType:k,context:"workspace",machineJob:a,isPrivate:s,hasAgentSession:w}},onCompleted:v})];case 4:return l.sent(),[3,6];case 5:throw R=l.sent(),S(J.d.Ready),R;case 6:return[2]}})}),function(e){return n.apply(this,arguments)}),[g,v,y,S,Y,d,u,h,m,f,A]),redeployWithNoNewOptions:(0,s.useCallback)((t=(0,r._)(function(e){var n,t,r,i,o,a,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(n=e.hasAgentSession,Y())return y("Deployment already in progress"),[2];l.label=1;case 1:return l.trys.push([1,4,,5]),S(J.d.Preparing),[4,(0,X.XE)(f)];case 2:if(r=(t=l.sent()).buildCommand,i=t.runCommand,o=t.publicDir,a=t.ignorePorts,!d)throw new j.z7;if(!A)throw new j.bf;if(!(s=eQ({provider:A.provider,ignorePorts:!!a})))throw new j.Kb;switch(s){case p.JX.Static:if(!(0,V.mU)(o))throw new j.uF;break;case p.JX.Worker:case p.JX.Server:case p.JX.CloudRun:case p.JX.Cron:if(!(0,V.mU)(i))throw new j.kS;break;default:(0,W.A)(s)}return[4,g({variables:{input:{replId:u,targetDeploymentId:d,commands:{build:r,run:i||""},provider:(0,Q.b3)(s),appType:s,context:"workspace",isPrivate:A.isPrivate,hasAgentSession:n}},onCompleted:v})];case 3:return l.sent(),[3,5];case 4:throw c=l.sent(),S(J.d.Ready),c;case 5:return[2]}})}),function(e){return t.apply(this,arguments)}),[g,v,y,S,Y,d,u,f,A]),rollbackToPreviousBuild:(0,s.useCallback)((o=(0,r._)(function(e){var n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:if(n=e.rollbackCandidateBuildId,t=e.envVars,Y())return y("Deployment already in progress"),[2];i.label=1;case 1:if(i.trys.push([1,3,,4]),!n)throw new j.hX;if(!d)throw new j.z7;return S(J.d.Preparing),[4,C({variables:{input:{targetDeploymentId:d,rollbackCandidateBuildId:n,replId:u,envVars:t}},onCompleted:b})];case 2:return i.sent(),[3,4];case 3:throw r=i.sent(),S(J.d.Ready),r;case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),[C,b,y,S,d,u,Y])}}var e0=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r,a,s,c,d,f,h,m;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(r=t.args,a=t.replId,s=void 0,(c=r.command)===p.jP.UpdateMachineConfiguration){if(!(d=e(eI)))return n(eK,"No current build found"),[2];if(!r.machineConfigurationId)return n(eK,"No machine configuration found"),[2];(f=(0,Q.oG)(c))&&(n(eI,(0,u.jM)(d,function(e){e.status=f})),n(eg,(0,Q.$0)(f)))}if(c===p.jP.Resume||c===p.jP.Suspend){if(!(h=e(eI)))return n(eK,"No current build found"),[2];s=h.id,(m=(0,Q.oG)(c))&&(n(eI,(0,u.jM)(h,function(e){e.status=m})),n(eg,(0,Q.$0)(m)))}l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(e){return q.apply(this,arguments)}((0,o._)((0,i._)({},r),{buildId:s,replId:a}))];case 2:return l.sent(),c===p.jP.Destroy&&n(eN),[3,4];case 3:return n(eK,l.sent().message),[3,4];case 4:return[2]}})});return function(n,t,r){return e.apply(this,arguments)}}());function e1(){var e,n=(0,er.A)(),t=(0,$.ob)(e0);return(0,s.useCallback)((e=(0,r._)(function(e){return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,t({replId:n,args:e})];case 1:return r.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),[t,n])}var e2=(0,d.eU)(null,function(){var e=(0,r._)(function(e,n){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(!(t=e(ew)))return n(eK,"No deployment found"),[2];if(!(r=e(eT)))return n(eK,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){return K.apply(this,arguments)}({buildId:r.id,targetDeploymentId:t})];case 2:return o.sent(),[3,4];case 3:return n(eK,o.sent().message),[2];case 4:if(n(eT,void 0),n(eg,J.d.Ready),(i=e(eI))&&(i.status===p.nH.Success||i.status===p.nH.Failed))return[2];return n(eI,(0,u.jM)(r,function(e){e.status=p.nH.Failed})),[2]}})});return function(n,t){return e.apply(this,arguments)}}());function e5(){return(0,$.ob)(e2)}},72145:(e,n,t)=>{"use strict";t.d(n,{AI:()=>u,Ou:()=>p,h:()=>c,ob:()=>d,rF:()=>l});var r=t(30758),i=t(72653),o=t(48363),a=t(8697),l=(0,r.createContext)(null);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){return(0,i.md)(e,{store:s()})}function u(e){return(0,a.k)(e,s())}var d=function(e){return(0,i.Xr)(e,{store:s()})};function p(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}},5965:(e,n,t)=>{"use strict";t.d(n,{C5:()=>w,DO:()=>M,G:()=>R,GS:()=>N,Je:()=>P,NF:()=>h,NT:()=>T,No:()=>_,Rp:()=>d,Sh:()=>E,T1:()=>S,TJ:()=>b,VW:()=>A,WM:()=>U,Yb:()=>v,ZH:()=>s,b8:()=>y,gb:()=>x,k4:()=>I,kR:()=>F,mN:()=>L,sC:()=>H,tH:()=>O,uu:()=>B,xP:()=>l,yh:()=>f});var r=t(99813),i=t(3596),o=t(52757),a=t(24955),l=[1,2,4,8],s=(0,r.eU)(i.jc),c=(0,r.eU)(function(e){var n=e(s),t=n.costPerComputeUnitUsd*n.computeUnitsPerCpu;return[t,2*t,4*t,8*t]}),u=[[0,3],[0,4],[2,5],[3,6]],d=l.length-1,p=1/(2*d),f=(0,r.eU)(2),h=(0,r.eU)(function(e){return l[e(f)]}),m=(0,r.eU)(function(e){return e(c)[e(f)]}),g=(0,r.eU)(function(e){return u[e(f)]}),v=(0,r.eU)(0),w=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=0,i=0;return e(v)<n&&(r=(n-e(v))/p,i=n-p),e(v)>t&&(r=(e(v)-t)/p,i=t+p),{overage:r,point:i}}),y=(0,r.eU)(0),b=(0,r.eU)(0),S=[.5,1,2,4,8,16,32],Y=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],A=S.length-1,C=1/(2*A),x=(0,r.eU)(4),_=(0,r.eU)(function(e){return S[e(x)]}),k=(0,r.eU)(function(e){var n=e(s).costPerComputeUnitUsd;return e(L)*n}),D=(0,r.eU)(function(e){return Y[e(x)]}),E=(0,r.eU)(0),R=(0,r.eU)(function(e){var n=e(g)[0]/A,t=e(g)[1]/A,r=0,i=0;return e(E)<n&&(r=(n-e(E))/C,i=n-C),e(E)>t&&(r=(e(E)-t)/C,i=t+C),{overage:r,point:i}}),I=(0,r.eU)(null,function(e,n){var t=e(f),r=e(D)[0],i=e(D)[1];t<r&&n(f,r),t>i&&n(f,i)}),F=(0,r.eU)(null,function(e,n){var t=e(x),r=e(g)[0],i=e(g)[1];t<r&&n(x,r),t>i&&n(x,i)}),T=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=e(g)[0]/A,i=e(g)[1]/A;return e(v)<n?(n-e(v))/p:e(v)>t?(e(v)-t)/p:e(E)<r?(r-e(E))/C:e(E)>i?(e(E)-i)/C:0}),P=(0,r.eU)(function(e){var n;return(1e5*(n={ramCost:e(k),cpuCost:e(m)}).ramCost+1e5*n.cpuCost)/1e5}),L=(0,r.eU)(function(e){var n=e(s).computeUnitsPerRam;return e(_)*n}),U=(0,r.eU)(function(e){var n=e(s).computeUnitsPerCpu;return e(h)*n}),N=(0,r.eU)(function(e){return e(L)+e(U)}),O=function(e){return e.None="0ms",e.Normal="200ms",e}({}),M=["ArrowLeft","ArrowRight","Home","End"],B=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),H=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},39026:(e,n,t)=>{"use strict";t.d(n,{K:()=>h,r:()=>m});var r=t(94086),i=t(24955),o=t(10168),a=t(3460),l=t(32842),s=t(28354),c=t(40889),u=t(65599),d=t(8367),p=t(79653),f=(0,o.x)({self:[l.wp.colWithGap(8)],selfGrow:[l.wp.colWithGap(8),l.wp.flex.grow(1)],label:[l.wp.maxWidth("100%")],labelText:[l.wp.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[l.wp.flex.growAndShrink(1),l.wp.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[l.wp.display.flex,l.wp.flex.row,l.wp.justify.spaceBetween,l.wp.align.center],labelLoading:[a.S.foregroundPulse(),l.wp.width(200),l.wp.borderRadius(8)],inputLoading:[a.S.foregroundPulse(),l.wp.borderRadius(8)]}),h=function(e){var n=e.id,t=e.title,o=e.information,a=e.optional,l=e.detail,s=e.warning,h=e.actions,m=e.children,g=e.grow;return(0,r.FD)(d.S,{css:void 0!==g&&g?f.selfGrow:f.self,children:[(0,r.FD)(d.S,{css:f.header,children:[(0,r.FD)(d.S,{tag:"label",htmlFor:n,css:f.label,row:!0,gap:8,align:"center",children:[(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:t}),(0,r.Y)(u.m_,{tooltip:o,children:(0,r.Y)(p.A,{color:i.LU.foregroundDimmest})}),void 0!==a&&a?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,l?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:l}):null,s?(0,r.Y)(c.EY,{css:f.labelTextWarning,variant:"small",multiline:!1,children:s}):null]}),h?(0,r.Y)(d.S,{row:!0,gap:4,children:h}):null]}),m]})},m=function(){return(0,r.FD)(d.S,{gap:8,children:[(0,r.Y)(d.S,{css:f.header,children:(0,r.Y)(d.S,{css:f.labelLoading,row:!0,gap:8,align:"center",children:(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,r.Y)(d.S,{css:f.inputLoading,children:(0,r.Y)(s.pd,{disabled:!0})})]})}},73962:(e,n,t)=>{"use strict";t.d(n,{DO:()=>v,D_:()=>p,Md:()=>u,Wt:()=>f,h0:()=>d,hK:()=>l,i_:()=>s,o2:()=>h,sC:()=>y,sh:()=>m,tH:()=>g,uu:()=>w});var r=t(99813),i=t(5965),o=t(52757),a=t(24955),l=[1,2,3,4,5,6,7,8,9,10],s=l.length-1,c=1/(2*s),u=(0,r.eU)(2),d=(0,r.eU)(function(e){return l[e(u)]}),p=(0,r.eU)(function(e){return(e(i.Je)*e(d)).toFixed(6)}),f=(0,r.eU)(function(e){return e(i.GS)*e(d)}),h=(0,r.eU)(0),m=(0,r.eU)(function(e){var n=0/s,t=l.length-1/s,r=0,i=0;return e(h)<n&&(r=(n-e(h))/c,i=n-c),e(h)>t&&(r=(e(h)-t)/c,i=t+c),{overage:r,point:i}}),g=function(e){return e.None="0ms",e.Normal="120ms",e}({}),v=["ArrowLeft","ArrowRight","Home","End"],w=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),y=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},15281:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(29911),s=t(32842),c=t(8367),u=[s.wp.width("100%"),s.wp.p(8)],d=[s.wp.py(32),s.wp.minHeight("100%"),s.wp.center],p=function(e){var n=e.children,t=e.centered,s=e.maxWidth,p=(0,o._)(e,["children","centered","maxWidth"]),f=[u,t&&d,s&&l.R1.maxWidth].filter(Boolean);return(0,a.Y)(c.S,(0,i._)((0,r._)({},p),{css:f,children:n}))}},32442:(e,n,t)=>{"use strict";t.d(n,{Wx:()=>y,cN:()=>v,fw:()=>b});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(15281),s=t(10168),c=t(32842),u=t(95235),d=t(93532),p=t(8367),f=t(84761),h=t(14753),m=t(68753),g=[c.wp.p(8),c.wp.center],v=function(){return(0,a.Y)(p.S,{css:g,children:(0,a.Y)(h.A,{size:24})})},w=(0,s.x)({error:[c.wp.flex.grow(0),c.wp.mt(0)]}),y=function(e){var n=e.text,t=(0,o._)(e,["text"]);return(0,a.Y)(l.A,(0,i._)((0,r._)({css:w.error},t),{children:(0,a.Y)(d.N,{colorway:"warning",icon:(0,a.Y)(m.A,{}),text:n})}))},b=function(e){var n=e.onBack;return(0,a.Y)(p.S,{row:!0,align:"center",children:(0,a.Y)(u.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:n,children:(0,a.Y)(f.A,{})})})}},6497:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(66622),i=t(30758),o=t(24481);function a(){var e=(0,o.A)().dotReplit,n=(0,r._)((0,i.useState)(null),2),t=n[0],a=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var n;if(e.error)return a(null);a((null===(n=e.config.deployment)||void 0===n?void 0:n.target)||null)})},[e]),t}},46549:(e,n,t)=>{"use strict";t.d(n,{g:()=>s});var r=t(13454),i=t(66622),o=t(5482),a=t(30758),l=t(9546);function s(e){var n=e.secrets,t=e.replId,s=(0,i._)((0,a.useState)(null),2),c=s[0],u=s[1],d=(0,l.R_)({variables:{replId:t}}).data;return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,n.read()];case 1:return u.apply(void 0,[e.sent()]),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n]),{devSecrets:(0,a.useMemo)(function(){if(!c)return null;var e=new Map;if((null==d?void 0:d.getRepl.__typename)==="Repl"&&d.getRepl.sharedSecretLinks&&(null===(a=d.currentUser)||void 0===a?void 0:a.secrets.__typename)==="SharedSecretConnection"){var n=d.currentUser.secrets.items,t=!0,r=!1,o=void 0;try{for(var a,l,s=d.getRepl.sharedSecretLinks[Symbol.iterator]();!(t=(l=s.next()).done);t=!0)!function(){var t=l.value,r=n.find(function(e){return e.id===t.secret.id});r&&e.set(t.alias,r.value)}()}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}}var u=!0,p=!1,f=void 0;try{for(var h,m=c.entries()[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=(0,i._)(h.value,2),v=g[0],w=g[1];e.set(v,w)}}catch(e){p=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(p)throw f}}return e},[d,c])}}},64486:(e,n,t)=>{"use strict";t.d(n,{J:()=>ek,g:()=>e_});var r=t(13454),i=t(5482),o=t(94086),a=t(30758),l=t(72653),s=t(20837),c=t(45009),u=t(30632),d=t(72813),p=t(96155);function f(){var e=(0,c._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.yH),g=t(14178),v=t(68670),w=t(58133),y=t(46391),b=t(59193),S=t(72275),Y=t(66622),A=t(5965);let C=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(A.NF),1)[0],r=(0,l.Xr)(A.b8),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.xP[0])),i.current.setAttribute("aria-valuemax",String(A.xP[A.xP.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,css:[A.sC,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var x=t(44087),_=t(24955),k="min(var(--point), var(--position))",D="max(var(--point), var(--position))";let E=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.C5),r=t.overage,i=t.point,s=(0,l.md)(A.Yb),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,x.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,x.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,x.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:_.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(k,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(k,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(D,", \n                  transparent ").concat(D," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var R=t(10168),I=t(8367),F=(0,R.x)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:_.LU.outlineStronger}});function T(e){var n=e.list;return(0,o.Y)(I.S,{css:F.container,children:n.map(function(e){return(0,o.Y)(I.S,{css:F.mark},e)})})}var P=t(32842),L=P.kL.min(320),U=(0,R.x)({container:P.wp.colWithGap(4),label:[P.wp.flex.column,P.wp.pb(4),(0,S._)({},L,[P.wp.flex.row,P.wp.justify.spaceBetween,P.wp.pb(0)])],resource:P.wp.fontWeight.medium,cost:[P.wp.rowWithGap(1),P.wp.align.baseline]}),N=t(34805),O=t(40889),M=A.Rp;function B(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.yh),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/M),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*M)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(M,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=M}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(E,{ref:p}),(0,o.Y)(C,{ref:f})]}),(0,o.Y)(T,{list:A.xP})]})},[])}function H(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.NF),1)[0],r=(0,Y._)((0,l.fp)(A.WM),1)[0],i=(0,l.Xr)(A.kR);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," vCPU",t>1?"s":""]}),(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,N.A)("compute unit",r)]}),(0,o.Y)(O.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(B,{setAttrs:n})]})}let z=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(A.No),1)[0],r=(0,l.Xr)(A.TJ),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.T1[0])),i.current.setAttribute("aria-valuemax",String(A.T1[A.T1.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[A.sC,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var W="min(var(--point), var(--position))",G="max(var(--point), var(--position))";let V=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.G),r=t.overage,i=t.point,s=(0,l.md)(A.Sh),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,x.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,x.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,x.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:_.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(W,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(W,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(G,", \n                  transparent ").concat(G," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var j=A.VW;function Z(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.gb),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/j),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*j)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(j,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=j}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(V,{ref:p}),(0,o.Y)(z,{ref:f})]}),(0,o.Y)(T,{list:A.T1})]})},[])}function q(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.No),1)[0],r=(0,Y._)((0,l.fp)(A.mN),1)[0],i=(0,l.Xr)(A.k4);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," GiB RAM"]}),(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,N.A)("compute unit",r)]}),(0,o.Y)(O.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(Z,{setAttrs:n})]})}var K=t(43952),$=(0,R.x)({container:[P.wp.px(8),P.wp.width("100%"),P.wp.position.absolute,P.wp.top(60),P.wp.bottom(21),P.wp.transition.snappy,P.wp.zIndex(1),(0,S._)({},P.kL.min(320),P.wp.top(34))],svg:[P.wp.width("100%"),P.wp.height("100%"),P.wp.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function J(){var e,n=(0,l.md)(A.NT),t=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)((null===(e=r.current)||void 0===e?void 0:e.offsetWidth)||0),c=(0,l.md)(A.b8),u=(0,l.md)(A.TJ);(0,a.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var d={x1:c/(i.current-16)*100,x2:u/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,a.useEffect)(function(){(0,x.U)(t,"--opacity",String(Math.pow(n,1/3)))},[n]),(0,o.Y)(I.S,{css:$.container,id:"rope",innerRef:r,children:(0,o.FD)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:$.svg,children:[(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.outlineDimmer})),(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.outlineDefault,strokeDasharray:8})),(0,o.FD)("g",{ref:t,css:$.overage,children:[(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.accentPrimaryDefault})),(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var Q=t(54012),X=t(2298),ee=t(40172),en=t(31955),et=t(65599),er=t(18576),ei=t(79653),eo=[P.wp.borderRadius(8)],ea=(0,R.x)({container:[eo],disabled:[eo,{opacity:.5,pointerEvents:"none"}],top:[P.wp.p(16),P.wp.colWithGap(12)],bottom:[P.wp.p(16),P.wp.border({direction:"top",color:_.LU.outlineDimmer})],text:[P.wp.flex.growAndShrink(1)],edit:X.b.outlined,overviewLine:[P.wp.flex.column,(0,S._)({},P.kL.min(320),[P.wp.flex.row,P.wp.justify.spaceBetween])],overviewValue:[P.wp.fontWeight.medium],total:[P.wp.flex.shrink(1),P.wp.align.center],cost:[P.wp.flex.row,P.wp.align.baseline,{gap:1}],builder:[P.wp.position.relative,{"--cpu-transition-time":A.tH.Normal,"--cpu-progress":1,"--ram-transition-time":A.tH.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function el(e){var n=e.machineConfiguration,t=e.disabled,r=e.toggleEditable,i=void 0===r||r,s=e.hasDeploymentRepricing,c=(0,a.useRef)(null),u=(0,Y._)((0,a.useState)(!i),2),d=u[0],p=u[1],f=(0,l.md)(A.NF),h=(0,l.md)(A.No),m=(0,l.md)(A.WM),g=(0,l.md)(A.mN),v=(0,l.md)(A.Je),w=(0,l.md)(A.GS),y=(0,l.Xr)(A.ZH),b=(0,l.Xr)(A.Yb),S=(0,l.Xr)(A.Sh),C=(0,l.Xr)(A.yh),k=(0,l.Xr)(A.gb);return(0,a.useEffect)(function(){y((0,Q.xC)({hasDeploymentRepricing:null!=s&&s}).autoscaleDeploymentCostDetails)},[y,s]),(0,a.useEffect)(function(){if(n){var e=A.xP.findIndex(function(e){return e.toString()===n.vcpu}),t=A.T1.findIndex(function(e){return e.toString()===n.memory});C(e),k(t)}},[n,C,k]),(0,o.FD)(en.ui,{elevated:!0,css:t?ea.disabled:ea.container,children:[(0,o.FD)(I.S,{css:ea.top,children:[(0,o.FD)(I.S,{row:!0,gap:8,children:[(0,o.FD)(I.S,{css:ea.text,gap:4,children:[(0,o.FD)(I.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(er.A,{}),(0,o.Y)(O.EY,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,o.Y)(O.EY,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,o.Y)(ee.$n,{text:d?"Done":"Edit",css:ea.edit,onClick:function(){return p(!d)}}):null]}),d?(0,o.FD)(o.FK,{children:[(0,o.FD)(I.S,{css:ea.builder,gap:12,innerRef:c,children:[(0,o.Y)(J,{}),(0,o.Y)(H,{setAttrs:{setTransitionTime:function(e){(0,x.U)(c,"--cpu-transition-time",e)},setProgress:function(e){(0,x.U)(c,"--cpu-progress",e.toString()),b(e)}}}),(0,o.Y)(q,{setAttrs:{setTransitionTime:function(e){(0,x.U)(c,"--ram-transition-time",e)},setProgress:function(e){(0,x.U)(c,"--ram-progress",e.toString()),S(e)}}})]}),(0,o.Y)(O.EY,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.FD)(O.EY,{css:ea.overviewValue,multiline:!1,children:[f," vCPU",f>1?"s":""]}),(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,color:"dimmer",children:[m," ",(0,N.A)("compute unit",m)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.FD)(O.EY,{css:ea.overviewValue,multiline:!1,children:[h," GiB RAM"]}),(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,color:"dimmer",children:[g," ",(0,N.A)("compute unit",g)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,o.Y)(I.S,{css:ea.bottom,children:(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.Y)(O.EY,{css:ea.overviewValue,multiline:!1,children:"Total per machine"}),(0,o.FD)(I.S,{css:ea.total,row:!0,gap:4,children:[(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:[w," ",(0,N.A)("compute unit",w)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,o.Y)(et.m_,{tooltip:(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:["$",v.toFixed(6)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,o.Y)(ei.A,{color:_.LU.foregroundDimmest})})]})]})})]})}var es=t(73962);let ec=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(es.h0),1)[0],r=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin",String(es.hK[0])),r.current.setAttribute("aria-valuemax",String(es.hK[es.hK.length-1])),r.current.setAttribute("aria-valuenow",String(t))),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:r,role:"slider",tabIndex:0,css:[es.sC,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])});var eu="min(var(--point), var(--position))",ed="max(var(--point), var(--position))";let ep=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(es.sh),r=t.overage,i=t.point,s=(0,l.md)(es.o2),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,x.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,x.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,x.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:_.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(eu,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(eu,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(ed,", \n                  transparent ").concat(ed," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var ef=es.i_;function eh(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(es.Md),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/ef),h(es.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*ef)))};d(t.clientX);var p=function(e){h(es.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(es.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&es.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(ef,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=ef}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.Y)(I.S,{gap:8,children:(0,o.FD)(I.S,{innerRef:d,css:es.uu,children:[(0,o.Y)(ep,{ref:p}),(0,o.Y)(ec,{ref:f})]})})},[])}var em=(0,R.x)({costInfo:[P.wp.flex.shrink(1),P.wp.align.center]});function eg(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(es.h0),1)[0],r=(0,Y._)((0,l.fp)(es.D_),1)[0],i=(0,Y._)((0,l.fp)(es.Wt),1)[0];return(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," ",(0,N.A)("machine",t)]}),(0,o.FD)(I.S,{css:em.costInfo,row:!0,gap:4,children:[(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:[i," compute units"]}),(0,o.Y)(O.EY,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,o.Y)(et.m_,{tooltip:(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:["$",r]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,o.Y)(ei.A,{color:_.LU.foregroundDimmest})})]})]}),(0,o.Y)(eh,{setAttrs:n})]})}var ev=t(22414),ew=[P.wp.colWithGap(12),P.wp.borderRadius("container"),P.wp.p(16)],ey=(0,R.x)({container:[ew],disabled:[ew,{opacity:.5,pointerEvents:"none"}],builder:[P.wp.position.relative,{"--max-instances-transition-time":es.tH.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function eb(e){var n=e.maxMachineInstances,t=e.disabled,r=e.onError,i=(0,a.useRef)(null),s=(0,l.Xr)(es.o2),c=(0,l.Xr)(es.Md);return(0,a.useEffect)(function(){if(n){var e=es.hK.indexOf(n);if(-1===e){r("An error occurred while setting selected max machine instances.");return}c(e)}},[n,c,r]),(0,o.FD)(en.ui,{elevated:!0,css:t?ey.disabled:ey.container,children:[(0,o.FD)(I.S,{gap:4,children:[(0,o.FD)(I.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(ev.A,{}),(0,o.Y)(O.EY,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,o.Y)(O.EY,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,o.Y)(I.S,{css:ey.builder,gap:8,innerRef:i,children:(0,o.Y)(eg,{setAttrs:{setTransitionTime:function(e){(0,x.U)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,x.U)(i,"--max-instances-progress",e.toString()),s(e)}}})})]})}var eS=t(15281),eY=t(32442),eA=t(33170),eC=t(4723),ex=t(72602);function e_(e){var n,t,r=e.onError,i=(n={onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&r("Something went wrong")},onError:function(e){return r(e.message)}},t=(0,s._)({},h,n),d.I(m,t)),o=i.data,a=i.loading;return{machineConfigurations:(null==o?void 0:o.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?o.hostingMachineConfigurations.results:null,loading:a}}var ek=function(e){var n,t=(0,v.uS)(),s=(0,v.i$)(),c=(0,v.cF)(),u=(0,v.tq)(),d=(0,v.gq)(),p=void 0!==u,f=!p&&"string"!=typeof s,h=(0,l.md)(A.NF),m=(0,l.md)(A.No),S=(0,l.md)(es.h0),Y=e_({onError:e.onError}),C=Y.machineConfigurations,x=Y.loading;(0,a.useEffect)(function(){(0,y.Ae)({context:b.P.AutoscaleMachineConfiguration})},[]);var _=(0,eC.Os)(eA.IW.id,eA.Gp.ApproveDeployment),k=(0,eC.Os)(eA._t.id,eA.ij.ApproveDeployment),D=(n=(0,r._)(function(){var n,t,r,o;return(0,i.YH)(this,function(i){return(n=null==C?void 0:C.find(function(e){var n=e.vcpu,t=e.memory;return h.toString()===n&&m.toString()===t}))?(t=n.id,r=n.label,o=n.slug,e.onConfirm({configurationId:t,configurationLabel:r,configurationSlug:o,maxInstances:S}),_.goto(eA.Gp.ConfirmDeployment),k.goto(eA.ij.ConfirmDeployment)):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),E=x||e.fetching||p||t!==w.d.Ready;return(0,o.FD)(o.FK,{children:[(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.Y)(eY.fw,{onBack:function(){e.onBack(),_.goto(eA.Gp.SetupDeployment),k.goto(eA.ij.SetupDeployment)}})}),(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.FD)(I.S,{gap:16,children:[(0,o.FD)(I.S,{gap:4,children:[(0,o.Y)(O.EY,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,o.Y)(O.EY,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,o.FD)(I.S,{gap:16,children:[(0,o.Y)(el,{machineConfiguration:null==c?void 0:c.machineConfiguration,disabled:E,hasDeploymentRepricing:null==d?void 0:d.hasDeploymentRepricing}),(0,o.Y)(eb,{maxMachineInstances:null==c?void 0:c.maxMachineInstances,disabled:E,onError:e.onError})]}),(0,o.FD)(I.S,{gap:8,css:[P.wp.pt(8)],children:[(0,o.Y)(ee.$n,{colorway:"primary",text:f?"Approve and configure build settings":"Approve and update",iconRight:(0,o.Y)(ex.A,{}),onClick:D,loading:x}),(0,o.FD)(O.EY,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,o.Y)("a",{href:g.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})}},18875:(e,n,t)=>{"use strict";t.d(n,{HT:()=>m,TO:()=>v,px:()=>f,vz:()=>p});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsAuthzRepl on Repl {\n    id\n    authorizations {\n      editDeploymentSecrets {\n        isAuthorized\n        message\n      }\n      editSecrets {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query DeploymentsDeployOptionsAuthz($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeploymentsDeployOptionsAuthzRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(l()),f=(0,o.J1)(s()),h=(0,o.J1)(c(),p);function m(e){var n=(0,r._)({},d,e);return a.I(h,n)}var g=(0,o.J1)(u(),f);function v(e){var n=(0,r._)({},d,e);return a.I(g,n)}},41276:(e,n,t)=>{"use strict";t.d(n,{S:()=>ny,D:()=>nv});var r=t(13454),i=t(66622),o=t(5482),a=t(94086),l=t(30758),s=t(51297),c=t(5761),u=t(55937),d=t(18875),p=t(81663),f=t(76634),h=t(19327),m=t(9645),g=t(68670),v=t(58133),w=t(46391),y=t(20837),b=t(45009),S=t(30632),Y=t(72813);function A(){var e=(0,b._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return A=function(){return e},e}var C={},x=(0,S.J1)(A()),_=t(18682),k=t(63679),D=t(26190),E=t(35541),R=t(24955),I=t(10168),F=t(2298),T=t(3460),P=t(32842),L=t(84911),U=t(24239),N=t(95235),O=t(28354),M=t(93532),B=t(31955),H=t(40889),z=t(65599),W=t(8367),G=t(16021),V=t(70953),j=t(73886),Z=t(67324),q=t(74894),K=t(14753),$=t(68753),J=(0,I.x)({self:[P.wp.flex.growAndShrink(1)],input:[P.wp.color.greyStrongest],loading:[T.S.backgroundPulse(R.LU.backgroundHighest,R.LU.backgroundHigher)],error:[P.wp.color.accentNegativeStronger]}),Q=function(e){var n=e.id,t=e.value,r=e.loading,i=e.disabled,o=e.onChange,s=e.error,c=e.placeholder,u=e.type,d=void 0===u?"text":u,p=e.onFocus,h=(0,f.mU)(t),m=(0,l.useId)();return d||(d="text"),(0,a.FD)(W.S,{css:J.self,gap:4,children:[(0,a.Y)(O.pd,{id:n,value:!r&&h?t:"",onChange:function(e){return o(e.target.value)},css:r?J.loading:J.input,disabled:r||i,"aria-describedby":m,placeholder:r?"":c,type:d,onFocus:p}),s?(0,a.Y)(W.S,{css:J.error,"aria-live":"polite","aria-atomic":"true",id:m,children:(0,a.Y)("span",{children:s})}):null]})},X=[P.wp.borderRadius(8),P.wp.width(32),P.wp.height(32),F.b.filled,P.wp.justify.center,P.wp.align.center],ee=(0,I.x)({root:[P.wp.rowWithGap(8),P.wp.align.center],iconButton:[P.wp.height("100%"),P.wp.borderRadius(8),{"& button":P.wp.height(32)}],keyInput:[P.wp.width("40%")],valueInput:[P.wp.flex.growAndShrink(1)],secretDifferentInDev:[X,P.wp.color.orangeStrongest],secretSameInDev:[X,P.wp.color.accentPrimaryStrongest],deploymentOnly:[X,P.wp.color.accentPrimaryStrongest]});function en(e){var n=e.existsInDev,t=e.isDifferentInDev;return n?t?(0,a.Y)(z.m_,{tooltip:"The value of this secret differs from the workspace value",children:(0,a.Y)(W.S,{css:ee.secretDifferentInDev,children:(0,a.Y)(Z.A,{})})}):(0,a.Y)(z.m_,{tooltip:"The value of this secret is the same as the workspace value",children:(0,a.Y)(W.S,{css:ee.secretSameInDev,children:(0,a.Y)(j.A,{})})}):(0,a.Y)(z.m_,{tooltip:"This secret only exists as a deployment secret",children:(0,a.Y)(W.S,{css:ee.deploymentOnly,children:(0,a.Y)(q.A,{})})})}var et=function(e){var n=e.index,t=e.name,r=e.value,o=e.disabled,s=e.updateEnvVarName,c=e.updateEnvVarValue,u=e.removeEnvVar,d=e.otherKeys,p=e.devSecrets,f=e.canEditDevSecretsDisabledMessage,h=e.canEditDeploySecretsDisabledMessage,m=(0,L.c)(),g=(0,i._)((0,l.useState)(""===t||""===r),2),v=g[0],w=g[1],y=!!(t&&r),b=(0,D.A)(y),S=(0,_.A)(function(){S.current&&b.current&&w(!1)},[b]),Y=!!(p&&p.has(t)),A=!!(Y&&p&&p.get(t)!==r),C=void 0===h;return v?(0,a.FD)(a.FK,{children:[(0,a.FD)(W.S,{css:ee.root,innerRef:S,children:[(0,a.Y)(W.S,{css:ee.keyInput,children:(0,a.Y)(O.pd,{placeholder:"Name",id:"".concat(m,"-name-").concat(n),value:t,onChange:function(e){return s(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&y&&w(!1)},disabled:o})}),(0,a.Y)(W.S,{css:ee.valueInput,children:(0,a.Y)(O.pd,{placeholder:"Value",name:"".concat(m,"-value-").concat(n),value:r,onChange:function(e){return c(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&y&&w(!1)},disabled:o})}),o?null:(0,a.Y)(B.ui,{elevated:!0,css:ee.iconButton,children:(0,a.Y)(N.K0,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){y?w(!1):u()},children:y?(0,a.Y)(G.A,{}):(0,a.Y)(V.A,{})})})]}),d.includes(t)?(0,a.FD)(H.EY,{variant:"small",css:{color:R.LU.accentNegativeDefault},children:['Secret "',t,'" already exists']}):null]}):(0,a.FD)(W.S,{css:ee.root,children:[void 0===f?(0,a.Y)(en,{existsInDev:Y,isDifferentInDev:A}):null,(0,a.Y)(E.Ge,{value:t}),(0,a.Y)(E.iJ,{value:r,canEditDisabledMessage:h}),C?(0,a.Y)(E.R6,{onEdit:function(){return w(!0)},onDelete:function(){return u()}}):null]})},er=function(e){var n,t,r,i,o,s=e.id,c=e.subdomain,u=e.deploymentId,d=e.onChange,f=e.updateValidity,h=(0,k._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:p.co}),m=h!==p.co,g=(n={variables:{subdomain:c,deploymentId:u},skip:0===c.length},t=(0,y._)({},C,n),Y.I(x,t)),v=g.data,w=g.loading,b=g.error,S=(null==v?void 0:v.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&v.replitAppSubdomainAvailability.available,A=(null==v?void 0:v.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?v.replitAppSubdomainAvailability.message:null==v?void 0:null===(r=v.replitAppSubdomainAvailability)||void 0===r?void 0:r.errorMessage;return((0,l.useEffect)(function(){f(S)},[S]),b)?(0,a.Y)(M.N,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,a.FD)(W.S,{children:[(0,a.FD)(W.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(O.pd,{id:s,placeholder:"subdomain",value:c,onChange:function(e){return d(e.target.value)}}),(0,a.FD)(H.EY,{multiline:!1,children:[(null===(o=window)||void 0===o?void 0:null===(i=o.location)||void 0===i?void 0:i.hostname)!=="replit.com"?".staging":"",".",h]})]}),(0,a.FD)(W.S,{row:!0,gap:4,css:[P.wp.pt(4)],align:"center",children:[w?(0,a.FD)(a.FK,{children:[(0,a.Y)(K.A,{}),(0,a.Y)(H.EY,{multiline:!1,children:"Checking availability"})]}):null,S?(0,a.FD)(a.FK,{children:[(0,a.Y)(G.A,{color:"green"}),(0,a.Y)(H.EY,{css:[P.wp.color.greenDefault],multiline:!1,children:"Available"})]}):null,S||w?null:(0,a.FD)(a.FK,{children:[(0,a.Y)($.A,{color:"red"}),(0,a.Y)(H.EY,{css:[P.wp.color.redDefault],multiline:!1,children:A})]}),m?(0,a.Y)(M.N,{colorway:"warning",text:"The ".concat(p.co," domain is currently unavailable, please use the ").concat(h," URL above.")}):null]})]})},ei=function(e){var n=e.appType,t=e.onChange,r=(0,L.c)();return(0,a.Y)(U.e2,{name:"deploymentTargetSelector",value:n,onChange:t,row:!0,css:[P.wp.width("100%"),P.wp.flex.row],children:[{value:u.JX.Server,name:"Web Server",description:"ex. an API or website"},{value:u.JX.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,n){return(0,a.Y)(W.S,{css:[P.wp.flex.grow(1)],children:(0,a.Y)(z.m_,{tooltip:e.description,children:(0,a.Y)(U.$O,{id:r(e.value),value:e.value,text:e.name})})},n)})})},eo=t(39026),ea=t(85848),el=t(46549),es=t(30282),ec=t(72275),eu=t(67150),ed=t.n(eu),ep=t(29911),ef=t(95123),eh=t(23033),em=t(46097),eg=t(56573),ev=t(10690),ew=(0,I.x)({self:[P.wp.mt(8)],accordion:[P.wp.mb(0)],textButton:[P.wp.cursor.pointer,P.wp.reset.button,P.wp.color.accentPrimaryStronger,P.wp.focusRing,P.wp.hover(P.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[P.wp.color.foregroundDimmer,P.wp.m(4),P.wp.textAlign.left],tableWrapper:[P.wp.mb(8),P.wp.colWithGap(8),(0,ec._)({},ep.sX,P.wp.rowWithGap(0))],table:[P.wp.flex.column,P.wp.width("100%"),(0,ec._)({},ep.sX,[P.wp.width("50%"),P.wp.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+R.LU.outlineDimmer}}}])],ghostRow:[P.wp.display.none,(0,ec._)({},ep.sX,P.wp.display.flex)]}),ey=function(e){var n=e.text,t=e.onClick;return(0,a.Y)("button",{css:ew.textButton,onClick:t,children:n})};function eb(e){var n=e.hasPortsConfigured,t=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return n?t?r?(0,a.Y)(M.N,{text:(0,a.FD)(a.FK,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,a.Y)(ey,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,a.Y)(M.N,{text:(0,a.FD)(a.FK,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,a.Y)(ey,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,a.Y)(M.N,{text:(0,a.FD)(a.FK,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,a.Y)(ey,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,a.Y)(M.N,{text:(0,a.FD)(a.FK,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,a.Y)(ey,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,a.Y)(M.N,{text:(0,a.FD)(a.FK,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,a.Y)(ey,{text:"Networking pane to configure.",onClick:o})]})})}var eS=function(e){return 80===(0,eh.Zd)(e.configuration)};function eY(e){var n=e.portState,t=(0,eh.s$)(n.configuration),r=(0,eh.Zd)(n.configuration),i=eS(n);return(0,a.FD)(a.FK,{children:[(0,a.FD)(em.VP,{width:"50%",children:[(0,a.Y)(H.EY,{children:t?"localhost":"0.0.0.0"}),i&&t?(0,a.Y)(ev.A,{size:16,color:R.ky.primary.default}):null]}),(0,a.FD)(em.VP,{width:"50%",children:[(0,a.FD)(H.EY,{children:[":",r]}),i?(0,a.Y)(G.A,{size:16,color:R.ky.positive.default}):(0,a.Y)(V.A,{size:16,color:R.ky.negative.default})]})]})}function eA(e){var n=e.ports,t=e.openNetworkingPane,r=(0,ef.A)(n.portsState),o=(null==r?void 0:r.filter(function(e){return(0,eh.Zd)(e.configuration)}).sort(function(e,n){var t,r;return(null!==(t=(0,eh.Zd)(e.configuration))&&void 0!==t?t:0)-(null!==(r=(0,eh.Zd)(n.configuration))&&void 0!==r?r:0)}))||null,s=null==o?void 0:o.find(eS),c=!!s,u=!!(o&&o.length>0),d=!!o&&!!s&&!!(o.filter(eS).length>1||o.some(function(e){return(0,eh.Zd)(e.configuration)===s.configuration.localPort})),p=!!(s&&(0,eh.s$)(s.configuration)),f=u&&!c||d,h=(0,i._)((0,l.useState)(!1),2),m=h[0],g=h[1];return(0,a.Y)(eg.A,{headerContent:(0,a.FD)(W.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(eo.K,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),f?(0,a.Y)($.A,{size:16,color:R.ky.warning.strongest}):null]}),expanded:m,onClick:function(){return g(!m)},css:ew.accordion,children:(0,a.FD)(W.S,{css:ew.self,gap:8,children:[(0,a.Y)(eb,{hasPortsConfigured:u,hasPort80Configured:c,hasConflictingPorts:d,hasLocalhostPort80:p,openNetworkingPane:t}),(0,a.Y)(W.S,{children:(0,a.FD)(W.S,{css:ew.tableWrapper,children:[(0,a.FD)(W.S,{css:ew.table,children:[(0,a.Y)(H.EY,{css:ew.tableHeader,children:"Deployment expects:"}),(0,a.FD)(em.XI,{children:[(0,a.FD)(em.fI,{children:[(0,a.Y)(em.VP,{header:!0,width:"50%",children:"Host"}),(0,a.Y)(em.VP,{header:!0,width:"50%",children:"External Port"})]}),(0,a.FD)(em.fI,{children:[(0,a.Y)(em.VP,{width:"50%",children:(0,a.Y)(H.EY,{children:"0.0.0.0"})}),(0,a.FD)(em.VP,{width:"50%",children:[(0,a.Y)(H.EY,{children:":80"}),(0,a.Y)(G.A,{size:16,color:R.ky.positive.default})]})]}),u&&o?ed()((null==o?void 0:o.length)-1).map(function(e){return(0,a.Y)(em.fI,{css:ew.ghostRow,children:(0,a.Y)(em.VP,{children:(0,a.Y)(H.EY,{children:"\xa0"})})},e)}):null]})]}),(0,a.FD)(W.S,{css:ew.table,children:[(0,a.Y)(H.EY,{css:ew.tableHeader,children:"Your External Port configuration(s):"}),(0,a.FD)(em.XI,{children:[(0,a.FD)(em.fI,{children:[(0,a.Y)(em.VP,{header:!0,width:"50%",children:"Host"}),(0,a.Y)(em.VP,{header:!0,width:"50%",children:"External Port"})]}),u?null==o?void 0:o.map(function(e){return(0,a.Y)(em.fI,{children:(0,a.Y)(eY,{portState:e})},e.configuration.localPort)}):(0,a.FD)(em.fI,{children:[(0,a.Y)(em.VP,{width:"50%",children:(0,a.Y)(H.EY,{children:"-"})}),(0,a.Y)(em.VP,{width:"50%",children:(0,a.Y)(H.EY,{children:"-"})})]})]})]})]})})]})})}var eC=t(25204),ex=t.n(eC),e_=t(97407),ek=t(3005),eD=t(62562),eE=t(2420),eR=t(17283),eI=(0,I.x)({titleRow:[P.wp.gap(8),P.wp.align.center]});function eF(e){var n=e.isPrivate,t=e.setIsPrivate,r=e.isRedeploy,i=(0,ek.ET)(),o=i.loading,l=i.orgId,s=!o&&!l;return(0,a.Y)(a.FK,{children:(0,a.Y)(eD.w,{id:"privateDeployments",title:(0,a.FD)(a.FK,{children:[(0,a.FD)(W.S,{css:eI.titleRow,row:!0,children:[(0,a.Y)(H.EY,{color:"dimmer",children:"Private Deployment"}),s?(0,a.Y)(eR.A,{plan:"Teams",size:"small",tooltipProps:{description:"Private Deployments are only available on Replit ".concat(e_.$B,".")}}):null]}),(0,a.FD)(H.EY,{variant:"small",color:"dimmest",children:[s?(0,a.Y)(a.FK,{children:"Limit deployment access to team members."}):(0,a.FD)(a.FK,{children:["Limit deployment access to team members who have edit access.",r?" Visibility changes apply after next deployment.":""]})," ",(0,a.Y)(ex(),{legacyBehavior:!0,target:"_blank",href:"https://docs.replit.com/cloud-services/deployments/private-deployments",children:"Learn more"})]})]}),children:(0,a.Y)(eE.d,{"aria-label":"Private Deployments",isSelected:n,onChange:function(e){t(e)}})})})}var eT=t(55042),eP=t(82182),eL=t(84899),eU=t(43952),eN=t(27189),eO=t(29390),eM=t(30269),eB=t(32889),eH=t.n(eB),ez=t(32476),eW=t(2301),eG=t(29048),eV=t(79653),ej=(0,I.x)({self:{ul:{maxHeight:"300px"}},select:[P.wp.border()],error:[P.wp.color.accentNegativeStronger],button:[P.wp.reset.button,P.wp.viewStyle,F.b.nofill,P.wp.align.center,P.wp.display.inlineFlex,{borderColor:F.b.outlined.borderColor}],popover:[P.wp.width("max-content"),P.wp.overflow("auto"),P.wp.p(1),P.wp.minWidth(240)],listbox:[P.wp.maxHeight(300),P.wp.minWidth(300),P.wp.overflow("auto")],dropdownItemAndContainer:[P.wp.flex.row,P.wp.align.center,F.b.listItem,P.wp.px(8),P.wp.py(4)],selectedItemAndContainer:[P.wp.px(8),P.wp.py(4),P.wp.justify.spaceBetween,P.wp.align.center,P.wp.rowWithGap(8)],selectedTimezoneCode:[P.wp.textAlign.left,P.wp.rowWithGap(8)],timezoneCode:[P.wp.textAlign.left,P.wp.rowWithGap(8)],header:[P.wp.pt(8),P.wp.px(8),P.wp.pb(4),P.wp.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(R.LU.outlineDimmest)}],search:[P.wp.p(8),{borderBottom:"1px solid ".concat(R.LU.outlineDimmest)}],searchInput:[P.wp.width("100%")],dropdownHeader:[P.wp.fontWeight.medium],loading:[P.wp.maxWidth(70),T.S.backgroundPulse(R.LU.backgroundHighest,R.LU.backgroundHigher)]});function eZ(e){var n=e.initialTimezone,t=e.onChange,r=e.loading,o=e.error,s=(0,i._)((0,l.useState)(),2),c=s[0],u=s[1],d=(0,l.useId)();return(0,l.useEffect)(function(){if(!r){if(n&&!c){u(n);return}if(!c&&!n){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,p._j)(e)){t(e),u(e);return}var i="America/Los_Angeles";i&&(t(i),u(i))}}},[t,c,n,r]),(0,a.FD)(W.S,{css:ej.self,children:[r||!c?(0,a.Y)(O.pd,{css:ej.loading,disabled:!0}):(0,a.Y)(e0,{selectedTzCode:c,onSelectionChange:function(e){"string"==typeof e&&(t(e),u(e))},css:ej.select}),o?(0,a.Y)(W.S,{css:ej.error,"aria-live":"polite","aria-atomic":"true",id:d,children:(0,a.Y)("span",{children:o})}):null]})}var eq=(0,I.x)({self:[ej.dropdownItemAndContainer,P.wp.justify.spaceBetween,{backgroundColor:R.LU.interactiveBackground}]});function eK(e){var n=e.title;return(0,a.FD)(W.S,{css:ej.selectedItemAndContainer,children:[(0,a.Y)(W.S,{css:ej.selectedTimezoneCode,align:"center",children:(0,a.Y)(H.EY,{variant:"text",color:"dimmer",children:n})}),(0,a.Y)(eG.A,{})]})}function e$(e){var n=e.tzCode,t=e.selected;return(0,a.FD)(W.S,{css:t?eq.self:ej.dropdownItemAndContainer,children:[(0,a.Y)(W.S,{css:ej.timezoneCode,align:"center",children:(0,a.Y)(H.EY,{variant:"text",color:t?"default":"dimmer",children:n.replace(/_/g," ").replace(/\//g,", ")})}),(0,a.Y)(W.S,{align:"center",row:!0,children:t?(0,a.Y)(G.A,{size:16}):null})]})}var eJ=(0,I.x)({self:[ej.button,P.wp.align.center,P.wp.px(8),P.wp.py(4),(0,ec._)({},P.$_.min("mobileMax"),[P.wp.rowWithGap(4)])]});function eQ(e){return e.toLowerCase().replaceAll("_"," ")}var eX=ez.m.map(function(e){var n=e.value,t=e.abbr,r=e.utc,i=eQ(n),o=eQ(t),a=r.map(function(e){return{tzCode:e,normalizedUtcValue:eQ(e)}});return(0,eU._)((0,y._)({},e),{normalizedValue:i,normalizedAbbr:o,normalizedUtc:a,searchableText:eQ([e.value,e.abbr].concat((0,eN._)(e.utc)).join(" "))})});function e0(e){var n=e.selectedTzCode,t=e.onSelectionChange,r=(0,i._)((0,l.useState)(""),2),o=r[0],s=r[1],c=(0,i._)((0,l.useState)(ez.m),2),u=c[0],d=c[1],p=(0,i._)((0,l.useState)(ez.m.find(function(e){return e.utc.includes(n)})),2),f=p[0],h=p[1];(0,l.useEffect)(function(){h(ez.m.find(function(e){return e.utc.includes(n)}))},[n]);var m=eH()(function(e){d(function(e){if(!e)return ez.m;var n=eQ(e);return eX.map(function(t){var r=0,i=t.searchableText,o=t.normalizedValue,a=t.normalizedAbbr,l=t.normalizedUtc,s=t.utc;if(i.includes(n)){o.includes(n)&&(r+=10/(o.indexOf(n)+1)),a.includes(n)&&(r+=8/(a.indexOf(n)+1));var c=s;return l.some(function(e){return e.normalizedUtcValue.includes(n)})&&(r+=5,e.length>=3&&(c=l.map(function(e){var t=e.tzCode,r=e.normalizedUtcValue;return r.includes(n)?{tzCode:t,utcScore:5/(r.indexOf(n)+1)}:{tzCode:t,utcScore:0}}).sort(function(e,n){return n.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,eU._)((0,y._)({},t),{utc:c,score:r})}return(0,eU._)((0,y._)({},t),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,n){return n.score-e.score})}(e))},100),g=function(e){s(e),m(e)};return(0,a.FD)(eT.l6,{onSelectionChange:t,"aria-label":"Timezone Select",children:[f?(0,a.Y)(eP.$,{css:ej.button,children:(0,a.Y)(eK,{title:f.abbr})}):(0,a.Y)(z.m_,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,a.FD)(eP.$,{css:eJ.self,children:[(0,a.Y)(H.EY,{color:"dimmer",children:"Select"}),(0,a.Y)(eV.A,{})]})}),(0,a.FD)(eW.g_,{noArrow:!0,css:ej.popover,background:"default",placement:"bottom right",children:[(0,a.Y)(W.S,{css:ej.search,children:(0,a.Y)(O.pd,{css:ej.searchInput,value:o,onChange:function(e){return g(e.target.value)},placeholder:"Search"})}),(0,a.Y)(eL.qF,{css:ej.listbox,children:u.map(function(e){var t=e.value,r=e.abbr,i=e.utc;return(0,a.FD)(eO.wn,{children:[(0,a.Y)(eM.Y,{css:ej.header,children:(0,a.FD)(H.EY,{variant:"small",color:"dimmest",css:ej.dropdownHeader,children:[t," (",r,")"]})}),i.map(function(e){return(0,a.Y)(eL.nh,{id:e,textValue:e,children:(0,a.Y)(e$,{tzCode:e,selected:e===n})},e)})]},t)})})]})]})}var e1=t(74532),e2=t(84321),e5=t(51439),e4=t(56268),e3=t(82436),e8={scheduleToCronExpression:{inputTarget:e2.Hnw.ENGLISH,outputTarget:e2.Hnw.CRON},cronExpressionToSchedule:{inputTarget:e2.Hnw.CRON,outputTarget:e2.Hnw.ENGLISH}},e7=function(e){var n,t=e.type,a=e.onTranslation,s=e.onError,c=(0,l.useRef)(null),u=(0,i._)((0,l.useState)(!1),2),d=u[0],p=u[1],f=function(e,n){(0,e4.Q)({error:Error(e),context:"useScheduledMachineConfigurationTranslator"}),s(n||e)},h=(0,e5.gp)({onTranslation:function(e,n,r){if(!d&&(c.current&&clearTimeout(c.current),n)){if(!e){a("Unable to derive valid translation from description");return}var i,o=(i=e.match(/`([^`]+)`(?=[^`]*$)/))?i[1]:null;if(!o||"scheduleToCronExpression"===t&&!(0,e1.isValidCron)(o)){a("Unable to derive valid Cron expression from description");return}a(o),(0,e3.u4)(e3.AZ.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:t,translation:e,prompt:r})}},onError:function(e){return f(e,"Error translating description")}}),m=h.sendMessage,g=h.loading,v=(n=(0,r._)(function(e){var n;return(0,o.YH)(this,function(r){return(c.current&&clearTimeout(c.current),e)?"cronExpressionToSchedule"!==t||(0,e1.isValidCron)(e)?(n=e8[t],m((0,eU._)((0,y._)({},n),{content:e})),c.current=setTimeout(function(){p(!0),f("Translation timed out")},8e3)):a("Invalid cron expression"):a(""),[2]})}),function(e){return n.apply(this,arguments)});return(0,l.useEffect)(function(){return function(){c.current&&clearTimeout(c.current)}},[c]),{translate:v,loading:g}};function e6(){return(0,a.FD)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:R.LU.blurpleStronger}),(0,a.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:R.LU.blurpleStronger}),(0,a.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:R.LU.blurpleStronger})]})}var e9=P.kL.min(480),ne=(0,I.x)({cronConfig:[P.wp.pb(16),P.wp.flex.growAndShrink(1),(0,ec._)({},e9,[P.wp.colWithGap(0),P.wp.rowWithGap(8),P.wp.align.start])],scheduledLabeledInput:[P.wp.flex.growAndShrink(1)],crontabLabeledInput:[P.wp.flex.growAndShrink(1),P.wp.maxWidth(128)],translationSwitch:[P.wp.flex.shrink(1),P.wp.mb(4),(0,ec._)({transform:"rotate(90deg)",alignSelf:"flex-start"},e9,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[P.wp.height(32),P.wp.width(32),P.wp.center],timezoneSelect:[P.wp.flex.shrink(1),(0,ec._)({minWidth:75},e9,{paddingTop:30})],timeoutConfig:[P.wp.flex.growAndShrink(1),P.wp.width("100%"),P.wp.align.start,P.wp.pb(8)],selectedItemAndContainer:[P.wp.px(8),P.wp.py(4),P.wp.justify.spaceBetween,P.wp.align.center,P.wp.rowWithGap(8)],selectedTimeoutUnits:[P.wp.textAlign.left,P.wp.rowWithGap(8)],button:[P.wp.reset.button,P.wp.viewStyle,F.b.nofill,P.wp.align.center,P.wp.display.inlineFlex,{borderColor:F.b.outlined.borderColor},P.wp.minWidth(100)],timeoutUnitsDropdown:[P.wp.ml(4)],dropdownItemAndContainer:[P.wp.flex.row,P.wp.align.center,F.b.listItem,P.wp.px(8),P.wp.py(4)],dropdownItem:[P.wp.textAlign.left,P.wp.rowWithGap(8)],popover:[P.wp.width("max-content"),P.wp.overflow("auto"),P.wp.p(1),P.wp.minWidth(120)]}),nn=(0,I.x)({self:[ne.dropdownItemAndContainer,P.wp.justify.spaceBetween,{backgroundColor:R.LU.interactiveBackground}]}),nt=["minutes","hours"];function nr(e,n){var t=parseInt(e,10);return isNaN(t)?0:"hours"===n.toLowerCase()?3600*t:60*t}function ni(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function no(e,n){return ni(e)&&nr(e,n)>86400}function na(e){var n=e.title;return(0,a.FD)(W.S,{css:ne.selectedItemAndContainer,children:[(0,a.Y)(W.S,{css:ne.selectedTimeoutUnits,align:"center",children:(0,a.Y)(H.EY,{variant:"text",color:"dimmer",children:n})}),(0,a.Y)(eG.A,{})]})}function nl(e){var n=e.item,t=e.selected;return(0,a.FD)(W.S,{css:t?nn.self:ne.dropdownItemAndContainer,children:[(0,a.Y)(W.S,{css:ne.dropdownItem,align:"center",children:(0,a.Y)(H.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,a.Y)(W.S,{align:"center",row:!0,children:t?(0,a.Y)(G.A,{size:16}):null})]})}function ns(e){var n=e.callback,t=e.delay,r=(0,l.useRef)();return(0,l.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return n(e)},t)}}}function nc(e){var n=e.crontab,t=e.setCrontab,r=e.crontabError,o=e.timezone,s=e.setTimezone,c=e.timezoneError,u=e.loading,d=void 0!==u&&u,p=e.timeoutValue,f=e.setTimeoutValue,h=e.timeoutUnits,m=e.setTimeoutUnits,g=e.setTimeoutValueError,v=(0,i._)((0,l.useState)(!1),2),w=v[0],y=v[1],b=(0,i._)((0,l.useState)(null),2),S=b[0],Y=b[1],A=(0,i._)((0,l.useState)(null),2),C=A[0],x=A[1],_=(0,i._)((0,l.useState)("scheduleToCronExpression"),2),k=_[0],D=_[1],E="scheduleToCronExpression"===k,I="cronExpressionToSchedule"===k,F=e7({type:k,onTranslation:function(e){y(!1),E?t(e):I&&x(e)},onError:function(e){y(!1),Y(e)}}),T=F.translate,P=F.loading,L=ns({callback:function(e){return T(e)},delay:3e3}).callerFunction,U=ns({callback:y,delay:500}).callerFunction,N=function(e,n){switch(n){case"scheduleToCronExpression":x(e);break;case"cronExpressionToSchedule":t(e)}O&&y(!1),""!==e&&null!==e&&(U(!0),L(e))},O=P||w;if((0,l.useEffect)(function(){g(!ni(p)||no(p,h))},[p,h,g]),S)return(0,a.FD)(W.S,{children:[(0,a.Y)(W.S,{css:ne.crontabLabeledInput,children:(0,a.Y)(eo.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(S,". Enter valid Cron expression."),grow:!0,children:(0,a.Y)(Q,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:!1,onChange:t,error:r})})}),(0,a.Y)(W.S,{css:ne.timezoneSelect,children:(0,a.Y)(eZ,{initialTimezone:o,onChange:s,error:c,loading:d})})]});var M="";return ni(p)?no(p,h)&&(M="Please enter a value less than the maximum of 24 hours"):M="Please enter a positive whole number",(0,a.FD)(W.S,{children:[(0,a.FD)(W.S,{css:ne.cronConfig,gap:8,children:[(0,a.Y)(W.S,{css:ne.scheduledLabeledInput,children:(0,a.Y)(eo.K,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,a.Y)(Q,{id:"describeSchedule",value:C,placeholder:n?"":"Every day at 3:00 AM",loading:d,disabled:O&&!E,onChange:function(e){return N(e,"scheduleToCronExpression")},onFocus:function(){return D("scheduleToCronExpression")}})})}),(0,a.Y)(W.S,{css:ne.translationSwitch,children:(0,a.Y)(z.m_,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,a.Y)(W.S,{css:ne.translationSwitchIcon,children:O?(0,a.Y)(K.A,{color:R.LU.blurpleStronger}):(0,a.Y)(e6,{})})})}),(0,a.Y)(W.S,{css:ne.crontabLabeledInput,children:(0,a.Y)(eo.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,a.Y)(Q,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:O&&!I,onChange:function(e){return N(e,"cronExpressionToSchedule")},onFocus:function(){return D("cronExpressionToSchedule")},error:r})})}),(0,a.Y)(W.S,{css:ne.timezoneSelect,children:(0,a.Y)(eZ,{initialTimezone:o,onChange:s,error:c,loading:d})})]}),(0,a.Y)(W.S,{css:ne.timeoutConfig,row:!0,children:(0,a.Y)(eo.K,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,a.FD)(W.S,{row:!0,children:[(0,a.Y)(Q,{id:"timeoutValue",value:p,placeholder:"",loading:d,disabled:!1,onChange:function(e){return f(null!=e?e:"")},error:M,type:"number"}),(0,a.FD)(eT.l6,{css:ne.timeoutUnitsDropdown,defaultSelectedKey:nt[0],selectedKey:h,onSelectionChange:function(e){return m(e.toString())},children:[(0,a.Y)(eP.$,{css:ne.button,children:(0,a.Y)(na,{title:h})}),(0,a.Y)(eW.g_,{css:ne.popover,background:"default",placement:"bottom right",children:(0,a.Y)(eL.qF,{children:nt.map(function(e){return(0,a.Y)(eL.nh,{id:e,textValue:e,children:(0,a.Y)(nl,{item:e,selected:e===h})},e)})})})]})]})})})]})}var nu=t(54487),nd=t(93515),np=t(40172),nf=t(76985),nh=t(63516),nm=t(43249);function ng(){return(ng=(0,r._)(function(e){var n,t,r,i,a,l,s,c,u,d,p,f,m,g,v,w,y;return(0,o.YH)(this,function(o){switch(o.label){case 0:n=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],t=!0,r=!1,i=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),a=n[Symbol.iterator](),o.label=2;case 2:if(t=(l=a.next()).done)return[3,5];return s=l.value,[4,e.stat(s)];case 3:if(!((c=o.sent()).exists&&c.type===h.pt.File))return[3,4];return[2,"dist"];case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return u=o.sent(),r=!0,i=u,[3,8];case 7:try{t||null==a.return||a.return()}finally{if(r)throw i}return[7];case 8:d=["dist","build","public"],p=!0,f=!1,m=void 0,o.label=9;case 9:o.trys.push([9,14,15,16]),g=d[Symbol.iterator](),o.label=10;case 10:if(p=(v=g.next()).done)return[3,13];return w=v.value,[4,e.stat(w)];case 11:if(!((y=o.sent()).exists&&y.type===h.pt.Directory))return[3,12];return[2,w];case 12:return p=!0,[3,10];case 13:return[3,16];case 14:return u=o.sent(),f=!0,m=u,[3,16];case 15:try{p||null==g.return||g.return()}finally{if(f)throw m}return[7];case 16:return[2]}})})).apply(this,arguments)}function nv(e){var n=e.replId,t=e.isNewDeployment,a=e.provider,s=e.fs,d=e.secrets,p=e.onOptions,f=e.onError,h=e.dotReplit,m=(0,c.m)(),g=(0,i._)((0,l.useState)(!0),2),v=g[0],w=g[1],y=(0,D.A)(f),b=(0,D.A)(p);return(0,l.useEffect)(function(){var e=!1;function l(){return(l=(0,r._)(function(){var r,l,c,p,f,g,v,y,S;return(0,o.YH)(this,function(o){switch(o.label){case 0:return r=u.JX.Server,l=null,c=null,p=null,f=null,[4,Promise.all([t?(0,ea.n9)({secrets:d,replId:n,apolloClient:m}):Promise.resolve(null),(0,ea.XE)(h)])];case 1:if(v=(g=i._.apply(void 0,[o.sent(),2]))[0],y=g[1],e)return[2];if(t)switch(a){case u.Q0.Gce:r=y.ignorePorts?u.JX.Worker:u.JX.Server;break;case u.Q0.CloudRun:r=u.JX.CloudRun;break;case u.Q0.Static:r=u.JX.Static;break;case u.Q0.Cron:r=u.JX.Cron}else y.appType&&(r=y.appType);if(c=y.buildCommand,!(r!==u.JX.Static))return[3,2];return l=y.runCommand,[3,5];case 2:if(!y.publicDir)return[3,3];return p=y.publicDir,[3,5];case 3:return[4,function(e){return ng.apply(this,arguments)}(s)];case 4:(S=o.sent())&&(p=S),o.label=5;case 5:return a===u.Q0.Gce&&(f=y.ignorePorts),b.current({appType:r,envVars:v,buildCommand:c,runCommand:l,publicDir:p,ignorePorts:f}),w(!1),[2]}})})).apply(this,arguments)}try{!function(){l.apply(this,arguments)}()}catch(e){y.current(e.message),w(!1)}return function(){e=!0}},[m,n,a,s,h,y,b,t,d]),{loading:v}}var nw=(0,I.x)({self:P.wp.colWithGap(16),footer:P.wp.colWithGap(0),ctaGroup:[P.wp.pt(12)],deployButton:P.wp.flex.grow(1),secretsModalButtons:[P.wp.pt(8)]}),ny=function(e){var n,t,c,h,y=e.deploymentId,b=e.replId,S=e.initialSubdomain,Y=e.provider,A=e.machine,C=e.secrets,x=e.fs,_=e.ports,D=e.dotReplit,E=e.onDeploy,R=e.onCancel,I=e.onError,F=e.initialSecretsSyncExpanded,T=e.openNetworkingPane,P=e.hasAgentSession,L=(0,g.uS)(),U=(0,g.Tp)().deployBuild,N=(0,d.HT)({skip:!y,variables:{id:null!=y?y:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var n=(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(n){if(n.replitAppSubdomain&&(eu(n.replitAppSubdomain),ef(!0)),n.currentBuild.machineJob&&(e_(n.currentBuild.machineJob.timezone),eT(n.currentBuild.machineJob.crontab),n.currentBuild.machineJob.timeoutSeconds)){var t,r,i,o=n.currentBuild.machineJob.timeoutSeconds;o%3600==0?(r=o/3600,i="Hours"):(r=Math.floor(o/60),i="Minutes"),eJ(r.toString()),e0(i)}eM(n.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}})),null!=n.currentBuild.isPrivate&&e8(n.currentBuild.isPrivate)}}}),O=N.data,M=N.loading,B=(0,d.TO)({variables:{replId:b}}).data,G=nv({replId:b,provider:Y,fs:x,secrets:C,dotReplit:D,isNewDeployment:!y,onError:I,onOptions:function(e){e.appType&&en(e.appType),e.envVars&&eM(e.envVars),e.ignorePorts&&ez(e.ignorePorts),e.buildCommand&&eg(e.buildCommand),e.runCommand&&ey(e.runCommand),e.publicDir&&eV(e.publicDir)}}).loading,V=(null==O?void 0:null===(c=O.hostingDeployment)||void 0===c?void 0:c.__typename)==="HostingDeployment"?O.hostingDeployment:null,j=null==V?void 0:V.currentBuild,Z=void 0!==j,q=(null==B?void 0:B.getRepl.__typename)==="Repl"?B.getRepl.authorizations:void 0,$=null==q?void 0:q.editDeploymentSecrets,J=null==q?void 0:q.editSecrets,X=(0,i._)((0,l.useState)(u.JX.Server),2),ee=X[0],en=X[1],ea=(0,i._)((0,l.useState)(S),2),ec=ea[0],eu=ea[1],ed=(0,i._)((0,l.useState)(!1),2),ep=ed[0],ef=ed[1],eh=(0,i._)((0,l.useState)(null),2),em=eh[0],eg=eh[1],ev=(0,i._)((0,l.useState)(null),2),ew=ev[0],ey=ev[1],eb=(0,i._)((0,l.useState)(void 0),2),eS=eb[0],eY=eb[1],eC=(0,i._)((0,l.useState)(null),2),ex=eC[0],e_=eC[1],ek=(0,i._)((0,l.useState)(void 0),2),eD=ek[0],eE=ek[1],eR=(0,i._)((0,l.useState)(null),2),eI=eR[0],eT=eR[1],eP=(0,i._)((0,l.useState)(void 0),2),eL=eP[0],eU=eP[1],eN=(0,i._)((0,l.useState)(null!==(h=null==j?void 0:j.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==h?h:[]),2),eO=eN[0],eM=eN[1],eB=(0,i._)((0,l.useState)(!1),2),eH=eB[0],ez=eB[1],eW=(0,i._)((0,l.useState)(null),2),eG=eW[0],eV=eW[1],ej=(0,i._)((0,l.useState)(void 0),2),eZ=ej[0],eq=ej[1],eK=(0,i._)((0,l.useState)("10"),2),e$=eK[0],eJ=eK[1],eQ=(0,i._)((0,l.useState)(nt[0]),2),eX=eQ[0],e0=eQ[1],e1=(0,i._)((0,l.useState)(!1),2),e2=e1[0],e5=e1[1],e4=(0,i._)((0,l.useState)(!1),2),e3=e4[0],e8=e4[1],e7=(0,k._P)({controlName:p.I0,logFlagToAnalytics:!1}),e6=(0,nu.o)({controlName:p.I0,default:!1}),e9=(0,el.g)({secrets:C,replId:b}).devSecrets;(0,l.useEffect)(function(){(0,w.Ae)({context:"deploy_options"})},[]);var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,t=e.value;eM(function(e){return(0,s.jM)(e,function(e){e.push({name:null!=n?n:"",value:null!=t?t:""})})})},nn=function(e,n){eM(function(t){return(0,s.jM)(t,function(t){t[e].name=n})})},ni=function(e,n){eM(function(t){return(0,s.jM)(t,function(t){t[e].value=n})})},no=function(e){eM(function(n){return(0,s.jM)(n,function(n){n.splice(e,1)})})},na=ee!==u.JX.Static,nl=Y===u.Q0.Gce,ns=ee===u.JX.Static,ng=Y!==u.Q0.Cron&&!(null==V?void 0:V.replitAppSubdomain),ny=Y===u.Q0.Cron,nb=ee===u.JX.Server||ee===u.JX.CloudRun,nS=Y!==u.Q0.Cron&&(e7||e6),nY=(n=(0,r._)(function(){var e,n,t,r,i,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(t=(!ng||ep)&&ec.length?ec:void 0,i=null!==(r=null==V?void 0:null===(n=V.currentBuild)||void 0===n?void 0:null===(e=n.machineJob)||void 0===e?void 0:e.failureNotifications)&&void 0!==r&&r,!t)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,U({envVars:eO.filter(function(e){return(0,f.zV)(e)}),subdomain:t,machineConfigurationId:(null==A?void 0:A.configurationId)||void 0,maxMachineInstances:(null==A?void 0:A.maxInstances)||void 0,machineJob:ex&&eI?{timezone:ex,crontab:eI,timeoutSeconds:nr(e$,eX),failureNotifications:i}:void 0,config:{buildCommand:em,runCommand:ew,appType:ee,ignorePorts:eH,publicDir:eG},isPrivate:e3,hasAgentSession:P})];case 2:return o.sent(),E(),[3,4];case 3:if((a=o.sent())instanceof m.kS)return eY("Run command cannot be empty."),[2];if(a instanceof m.uF)return eq("Public directory cannot be empty."),[2];if(a instanceof m.xF)return eE(a.message||"Invalid timezone."),[2];if(a instanceof m.f_)return eU(a.message||"Invalid crontab."),[2];return I(a.message),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),nA=(0,i._)((0,l.useState)(!1),2),nC=nA[0],nx=nA[1],n_=(0,i._)((0,l.useState)(!1),2),nk=n_[0],nD=n_[1],nE=(0,(0,g.mj)().getDeployabilityByProvider)(Y,e3),nR=Z?nE.redeploy.isAuthorized:nE.deploy.isAuthorized,nI=M||G||!nR||L===v.d.Preparing||e2,nF=nI||ng&&!ep,nT=eO.map(function(e){return e.name}),nP=(t=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return nx(!0),[4,C.addEntries(eO.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),nx(!1),nD(!1),[2]}})}),function(){return t.apply(this,arguments)}),nL=G?(0,a.FD)(a.FK,{children:[(0,a.Y)(eo.r,{}),(0,a.Y)(eo.r,{}),(0,a.Y)(eo.r,{})]}):(0,a.FD)(a.FK,{children:[ny?(0,a.Y)(nc,{crontab:eI,setCrontab:eT,crontabError:eL,timezone:ex,setTimezone:e_,timezoneError:eD,loading:M,timeoutValue:e$,setTimeoutValue:eJ,timeoutUnits:eX,setTimeoutUnits:e0,setTimeoutValueError:e5}):null,ng?(0,a.Y)(eo.K,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,a.Y)(er,{id:"primaryDomain",subdomain:ec,deploymentId:y||void 0,onChange:eu,updateValidity:ef})}):null,nS?(0,a.Y)(eF,{isPrivate:e3,setIsPrivate:e8,isRedeploy:Z}):null,ns?(0,a.Y)(eo.K,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,a.Y)(Q,{id:"publicDir",value:eG,onChange:eV,loading:G,disabled:nI,error:eZ})}):null,(0,a.Y)(eo.K,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,a.Y)(Q,{id:"buildCommand",value:em,onChange:eg,loading:G,disabled:nI})}),na?(0,a.Y)(eo.K,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,a.Y)(Q,{id:"runCommand",value:ew,onChange:ey,loading:G,disabled:nI,error:eS})}):null,(0,a.Y)(eo.K,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",children:(0,a.FD)(W.S,{gap:12,children:[eO.length>0?eO.map(function(e,n){var t=e.name,r=e.value;return(0,a.Y)(et,{index:n,name:t,value:r,updateEnvVarName:function(e){return nn(n,e)},updateEnvVarValue:function(e){return ni(n,e)},removeEnvVar:function(){return no(n)},disabled:nI,otherKeys:nT.filter(function(e,t){return t!==n}),devSecrets:e9,canEditDevSecretsDisabledMessage:(null==J?void 0:J.isAuthorized)===!1?J.message:void 0,canEditDeploySecretsDisabledMessage:(null==$?void 0:$.isAuthorized)===!1?$.message:void 0},n)}):null,e9&&(null==J?void 0:J.isAuthorized)&&(null==$?void 0:$.isAuthorized)?(0,a.Y)(nd.H,{secrets:new Map(eO.map(function(e){return[e.name,e.value]})),otherSecrets:e9,otherEnvName:"workspace",onAddSecret:function(e){return ne({name:e.key,value:e.value})},initialExpanded:F}):null,(0,a.Y)(z.m_,{tooltip:null==$?void 0:$.message,isDisabled:null==$?void 0:$.isAuthorized,children:(0,a.Y)(np.$n,{onClick:function(){(0,w.Rl)({replId:b}),ne()},text:"Add deployment secret",iconLeft:(0,a.Y)(nm.A,{}),disabled:M||!(null==$?void 0:$.isAuthorized)})})]})}),nl?(0,a.Y)(eo.K,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,a.Y)(ei,{appType:ee,onChange:function(e){en(e),ez((e===u.JX.Server||e===u.JX.Worker)&&e===u.JX.Worker)}})}):null,nb?(0,a.Y)(eA,{ports:_,openNetworkingPane:T}):null]});return(0,a.FD)(a.FK,{children:[(0,a.FD)(W.S,{css:nw.self,children:[nL,(0,a.FD)(W.S,{css:nw.footer,children:[(0,a.Y)(es.Y,{deployability:nE,isRedeploy:Z}),(0,a.FD)(W.S,{css:nw.ctaGroup,row:!0,gap:8,children:[j?(0,a.Y)(np.$n,{text:"Cancel",onClick:R}):null,(0,a.Y)(W.S,{css:nw.deployButton,children:(0,a.Y)(np.$n,{colorway:"primary",onClick:nY,text:L===v.d.Preparing&&"Preparing..."||G&&"Fetching options..."||"Deploy",iconLeft:G||L===v.d.Preparing?(0,a.Y)(K.A,{}):(0,a.Y)(nh.A,{}),disabled:nF})})]})]})]}),(0,a.Y)(nf.a,{isOpen:nk,onRequestClose:function(){nC||nD(!1)},children:(0,a.FD)(W.S,{gap:8,children:[(0,a.Y)(H.EY,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,a.Y)(H.EY,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,a.FD)(W.S,{css:nw.secretsModalButtons,row:!0,gap:8,justify:"end",children:[(0,a.Y)(np.$n,{text:"Cancel",disabled:nC,onClick:function(){nD(!1)}}),(0,a.Y)(np.$n,{text:"Yes, copy secrets",colorway:"negative",disabled:nC,loading:nC,onClick:nP})]})]})})]})}},30282:(e,n,t)=>{"use strict";t.d(n,{Y:()=>p});var r=t(94086),i=t(55937),o=t(10168),a=t(32842),l=t(93532),s=t(53536),c=t(68753),u=t(40904),d=(0,o.x)({bannerButton:{span:[a.wp.textAlign.left]}});function p(e){var n=e.deployability,t=e.isRedeploy,o=n.deploy,a=n.redeploy,p=t?a:o;return p.isAuthorized?null:p.code===i.S4.RequiresActiveTeamsSubscription?(0,r.Y)(s.d,{href:"/teams/new",target:"_blank",text:"".concat(p.message," Click here to get started by creating a new organization."),colorway:"warning",iconLeft:(0,r.Y)(c.A,{}),iconRight:(0,r.Y)(u.A,{}),css:d.bannerButton}):(0,r.Y)(l.N,{text:p.message,colorway:"warning",icon:(0,r.Y)(c.A,{})})}},60102:(e,n,t)=>{"use strict";t.d(n,{Bg:()=>Y,XH:()=>b,aW:()=>g,jN:()=>w});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(75838),s=t(96155);function c(){var e=(0,i._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n      username\n      fullName\n      image\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n    envVars {\n      name\n      value\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n    isRollbackCandidate\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n              envVars {\n                name\n                value\n              }\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,o.J1)(c(),s.mY),g=(0,o.J1)(u(),m),v=(0,o.J1)(d(),g);function w(e){var n=(0,r._)({},h,e);return a.I(v,n)}var y=(0,o.J1)(p());function b(e){var n=(0,r._)({},h,e);return a.I(y,n)}var S=(0,o.J1)(f(),s.UQ,s.Zc);function Y(e){var n=(0,r._)({},h,e);return l.n(S,n)}},76813:(e,n,t)=>{"use strict";t.d(n,{Js:()=>c,iw:()=>u,QX:()=>h,Qm:()=>f,XD:()=>m,ly:()=>d,Y9:()=>p});var r=t(94086),i=t(52757),o=t(32842),a=t(8367),l=t(76421),s=(0,i.AH)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function c(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.Y)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.FD)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.Y)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.Y)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.Y)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.Y)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.Y)("clipPath",{id:"clip0_3629_246",children:(0,r.Y)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.Y)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.Y)("defs",{children:(0,r.FD)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"4"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"4"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function p(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.Y)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.Y)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.Y)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function f(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.Y)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function h(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.Y)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.FD)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.Y)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.Y)(a.S,{css:[o.wp.py(6),o.wp.px(12),o.wp.color.accentPrimaryStronger],children:(0,r.Y)(l.A,{size:32})})}},79029:(e,n,t)=>{"use strict";t.d(n,{A:()=>x});var r=t(20837),i=t(43952),o=t(66622),a=t(94086),l=t(30758),s=t(86116),c=t(73963),u=t(25759),d=t(59364),p=t(82182),f=t(52352),h=t(24955),m=t(10168),g=t(2298),v=t(32842),w=t(95235),y=t(28354),b=t(2301),S=t(84761),Y=t(72602),A=t(81603),C=(0,m.x)({group:[v.wp.display.flex,{gap:h.LU.space4},v.wp.position.relative],dateInput:[y.cO,v.wp.flex.row,{gap:h.LU.space4,'&[data-invalid="true"]':{"&, &:hover":{borderColor:h.LU.accentNegativeStronger}}}],dateSegment:[v.wp.borderRadius(2),{outline:"none","&[data-focused=true]":{outline:"2px solid ".concat(h.LU.accentPrimaryDefault),outlineOffset:1}}],iconButton:[v.wp.position.absolute,v.wp.top("50%"),v.wp.right(0),{transform:"translateY(-50%)"}],calendar:[v.wp.p(8)],calendarHeader:[v.wp.flex.row,v.wp.align.center,v.wp.justify.spaceBetween],calendarHeaderText:[v.wp.fontSize(h.LU.fontSizeDefault),v.wp.color.foregroundDefault,v.wp.fontWeight.normal],arrowButton:[g.b.listItem,v.wp.borderRadius("default"),v.wp.p(4),{appearance:"none",background:"transparent",border:"none"}],calendarGrid:[v.wp.mt(8),{th:[v.wp.height(14),v.wp.color.foregroundDimmer,v.wp.fontWeight.normal,v.wp.pb(4)]}],calendarCell:[g.b.listItem,v.wp.flex.column,v.wp.fontSize(h.LU.fontSizeDefault),v.wp.width(32),v.wp.height(28),v.wp.borderRadius("default"),{textAlign:"center",justifyContent:"center",'&[data-outside-visible-range="true"]':[v.wp.display.none],'&[data-selected="true"]':{"&, &:hover":[v.wp.backgroundColor.accentPrimaryDimmer]},'&[data-disabled="true"]':{opacity:.5},'&[data-unavailable="true"]':{opacity:.5}}]});function x(e){var n=(0,o._)((0,l.useState)(!1),2),t=n[0],h=n[1];return(0,a.Y)(s.lr,(0,i._)((0,r._)({},e),{children:(0,a.FD)(c.Y,{css:C.group,children:[(0,a.Y)(u.J3,{css:C.dateInput,children:function(e){return(0,a.Y)(u.Eu,{segment:e,css:C.dateSegment})}}),(0,a.FD)(b.Wv,{label:"Calendar",isOpen:t,onOpenChange:h,children:[(0,a.Y)(w.K0,{alt:"Open calendar",tooltipBehavior:"hidden",css:C.iconButton,children:(0,a.Y)(A.A,{})}),(0,a.FD)(d.Vv,{css:C.calendar,children:[(0,a.FD)("header",{css:C.calendarHeader,children:[(0,a.Y)(p.$,{slot:"previous",css:C.arrowButton,children:(0,a.Y)(S.A,{})}),(0,a.Y)(f.D,{css:C.calendarHeaderText}),(0,a.Y)(p.$,{slot:"next",css:C.arrowButton,children:(0,a.Y)(Y.A,{})})]}),(0,a.Y)(d.r8,{css:C.calendarGrid,children:function(e){return(0,a.Y)(d.Zr,{date:e,css:C.calendarCell})}})]})]})]})}))}},4645:(e,n,t)=>{"use strict";t.d(n,{VW:()=>L,pR:()=>P,wQ:()=>T});var r=t(20837),i=t(43952),o=t(66622),a=t(94086),l=t(30758),s=t(45009),c=t(30632),u=t(72813),d=t(96155);function p(){var e=(0,s._)(["\n  query ReservedVMMachineConfigurations($replId: String) {\n    hostingMachineConfigurations(input: { provider: gce, replId: $replId }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,c.J1)(p(),d.yH),m=t(14178),g=t(68670),v=t(46391),w=t(59193),y=t(39026),b=t(15281),S=t(32442),Y=t(24955),A=t(10168),C=t(3460),x=t(32842),_=t(40172),k=t(28354),D=t(40889),E=t(8367),R=t(54858),I=t(72602),F=(0,A.x)({header:[x.wp.mb(16)],costWrapper:[x.wp.flex.shrink(1)],cost:[x.wp.align.baseline],selectWrapper:x.wp.rowWithGap(12),selectInner:[x.wp.flex.growAndShrink(1)],select:[x.wp.border({color:Y.LU.outlineDefault}),{flex:"1 1 auto"}]});function T(e){var n,t,i=e.replId,o=e.onError,a=(n={variables:{replId:i},onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&o("Something went wrong")},onError:function(e){return o(e.message)}},t=(0,r._)({},f,n),u.I(h,t)),l=a.data,s=a.loading;return{machineConfigurations:(null==l?void 0:l.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?l.hostingMachineConfigurations.results:null,loading:s}}function P(e){var n=e.machineConfigurations;return e.isTeamRepl?n.find(function(e){return"e2-micro"===e.slug}):n.find(function(e){return"e2-small"===e.slug})}var L=function(e){var n=e.replId,t=e.initialMachineConfiguration,s=e.isTeamRepl,c=e.onChange,u=e.onConfirm,d=e.onError,p=e.onBack,f=(0,o._)((0,l.useState)(t?(0,i._)((0,r._)({},t),{maxInstances:1}):void 0),2),h=f[0],Y=f[1],A=(0,(0,g._k)().getRvmDeploymentCostDetailsByConfigurationSlug)(null==h?void 0:h.configurationSlug),L=A.costPerHour,U=A.costPerMonth,N=(0,o._)((0,l.useState)(!1),2),O=N[0],M=N[1],B=T({replId:n,onError:d}),H=B.machineConfigurations,z=B.loading;(0,l.useEffect)(function(){(0,v.Ae)({context:w.P.AutoscaleMachineConfiguration})},[]),(0,l.useEffect)(function(){if(H&&!h){var e=P({machineConfigurations:H,isTeamRepl:s});if(!e){d("An error occurred trying to validate default machine configuration");return}var n={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};Y(n),"function"==typeof c&&c(n)}},[H,h,s,c,d]);var W=H&&(null==H?void 0:H.length)>0,G=z||s||O||!W;return(0,a.FD)(a.FK,{children:[(0,a.Y)(b.A,{maxWidth:!0,children:(0,a.Y)(S.fw,{onBack:p})}),(0,a.FD)(b.A,{maxWidth:!0,children:[(0,a.FD)(E.S,{css:F.header,gap:4,children:[(0,a.Y)(D.EY,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,a.Y)(D.EY,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,a.Y)(y.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:h?(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{css:F.selectWrapper,children:s?(0,a.Y)(k.pd,{value:h.configurationLabel,disabled:!0}):(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{css:F.selectInner,children:(0,a.Y)(R.l,{css:F.select,initialSelectedItem:{id:h.configurationId,title:h.configurationLabel},items:W?Object.values(H).map(function(e){var n=e.id;return{title:e.label,id:n}}):[],onChange:function(e){var n=e.id,t=null==H?void 0:H.find(function(e){return e.id===n});if(!t){d("An error occurred trying to validate selected machine configuration");return}var r={configurationId:t.id,configurationLabel:t.label,configurationSlug:t.slug,maxInstances:1};Y(r),"function"==typeof c&&c(r)},disabled:G})}),(0,a.Y)(E.S,{css:F.costWrapper,row:!0,gap:2,align:"center",children:(0,a.FD)(E.S,{css:F.cost,row:!0,gap:4,children:[(0,a.FD)(D.EY,{variant:"subheadDefault",multiline:!1,children:["$",U]}),(0,a.Y)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,a.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["($",L,"/hour)"]})]})})]})}),"function"==typeof u?(0,a.FD)(E.S,{gap:8,css:[x.wp.pt(8)],children:[(0,a.Y)(_.$n,{colorway:"primary",text:"Approve and update",iconRight:(0,a.Y)(I.A,{}),onClick:function(){if(!h){d("An error occurred trying to validate selected machine configuration");return}M(!0),u(h)},loading:z,disabled:G}),(0,a.FD)(D.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,a.Y)("a",{href:m.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,a.Y)(E.S,{css:[C.S.foregroundPulse(),x.wp.borderRadius(8)],children:(0,a.Y)(k.pd,{disabled:!0})})})]})]})}},56268:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i});var r=t(55195);function i(e){var n=e.error,t=e.context,i=e.extras,o=e.isDeploymentsPane,a=void 0===o||o;return r.v4(function(e){e.setTag("deployments-pane",a),e.setTag("context",t),i&&e.setExtras(i),r.Cp(n)}),n}},29911:(e,n,t)=>{"use strict";t.d(n,{R1:()=>f,lQ:()=>h,sX:()=>p});var r=t(72275),i=t(20837),o=t(66622),a=t(94086),l=t(30758),s=t(769),c=t(10168),u=t(32842),d=t(8367),p=u.kL.min(600),f=(0,c.x)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[u.wp.display.none,(0,r._)({},p,u.wp.display.flex)],hiddenOnDesktop:[u.wp.display.flex,(0,r._)({},p,u.wp.display.none)]});function h(e){var n,t,r,c=e.children,u=e.render,p=e.timeout,f=void 0===p?300:p,h=e.initialHeight,m=(0,l.useRef)(null),g=(0,l.useRef)(null),v=(t=(n=(0,o._)((0,l.useState)(0),2))[0],r=n[1],(0,l.useEffect)(function(){if(g.current){var e=new ResizeObserver(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value.borderBoxSize[0].blockSize;r(l)}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}});return e.observe(g.current),function(){return e.disconnect()}}},[t,g]),t),w=v>0?v:h,y={transition:f+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},b={entering:{opacity:1,height:w},entered:{transitionProperty:"opacity",opacity:1,height:w,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,a.Y)(s.Ay,{nodeRef:m,timeout:f,in:u,children:function(e){return(0,a.Y)(d.S,{innerRef:m,style:(0,i._)({},y,b[e]),children:(0,a.Y)(d.S,{innerRef:g,children:c})})}})}},46391:(e,n,t)=>{"use strict";t.d(n,{Ae:()=>i,QH:()=>o,Rl:()=>a});var r=t(82436),i=function(e){var n=e.context;(0,r.u4)(r.AZ.DEPLOYMENT_SECTION_VIEWED,{context:n})},o=function(e,n){(0,r.u4)(r.AZ.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:n})},a=function(e){(0,r.u4)(r.AZ.DEPLOYMENT_ADD_SECRET_CLICKED,{context:e})}},59193:(e,n,t)=>{"use strict";t.d(n,{P:()=>r,k:()=>i});var r=function(e){return e.Intro="intro",e.Deployment="deployment",e.DeploymentInProgress="deployment_in_progress",e.Analytics="analytics",e.Logs="logs",e.Settings="settings",e.Schedule="schedule",e.ResourceMonitoring="resource_monitoring",e.ReservedVMTierSelection="reserved_vm_tier_selection",e.AutoscaleMachineConfiguration="autoscale_machine_configuration",e}({}),i=function(e){return e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.ChangeView="change_view",e.OpenPane="open_pane",e}({})},41928:(e,n,t)=>{"use strict";t.d(n,{u:()=>p});var r=t(94086),i=t(25204),o=t.n(i),a=t(10168),l=t(2298),s=t(32842),c=t(93532),u=t(40904),d=(0,a.x)({self:[{marginLeft:"auto",marginRight:"auto",flex:"0 1 auto"}],link:[s.wp.color.foregroundDefault,l.b.underlinedOnHover]});function p(){return(0,r.Y)(c.N,{css:d.self,icon:(0,r.Y)(u.A,{}),text:(0,r.Y)(o(),{css:d.link,target:"_blank",href:"https://docs.replit.com/billing/deployment-repricing",children:"We've updated deployment pricingsee what's new."})})}},7819:(e,n,t)=>{"use strict";t.d(n,{z:()=>u});var r=t(20837),i=t(45009),o=t(30632),a=t(75838);function l(){var e=(0,i._)(["\n  mutation CreateReplShare($input: CreateReplShareInput!) {\n    createReplShare(input: $input) {\n      ... on CreateReplShareResult {\n        share {\n          id\n          url\n          scheduledDeletionTime\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.n(c,n)}},54012:(e,n,t)=>{"use strict";t.d(n,{Sv:()=>i,_3:()=>l,xC:()=>a});var r=t(3596),i={autoscaleDeploymentCostDetails:r.jc,rvmDeploymentCostDetails:r.N3,scheduledDeploymentCostDetails:r.$S,staticDeploymentCostDetails:r.uE},o={autoscaleDeploymentCostDetails:r.xz,rvmDeploymentCostDetails:r.D6,scheduledDeploymentCostDetails:r.VH,staticDeploymentCostDetails:r.uE};function a(e){return e.hasDeploymentRepricing?o:i}function l(e,n){switch(e){case"e2-micro":case"e2-small":case"e2-medium":case"n1-custom-1-4096":case"e2-standard-2":case"e2-standard-4":return n.rvmDeploymentCostDetails[e];default:return{costPerHour:null,costPerMonth:null}}}},88940:(e,n,t)=>{"use strict";t.d(n,{_9:()=>p,t:()=>g});var r=t(20837),i=t(45009),o=t(30632),a=t(75838);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(l()),f=(0,o.J1)(s(),p),h=(0,o.J1)(c(),f),m=(0,o.J1)(u(),h,f,p);function g(e){var n=(0,r._)({},d,e);return a.n(m,n)}},83627:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(66622),i=t(55195),o=t(55937),a=t(88940),l=t(5846),s=t(58840),c=t(39651),u=t(82436);let d=function(e){var n=e.isMobileApp,t=e.isTeam,d=e.handleUpgradeTriggered,p=e.replId,f=(0,c.A)(),h=f.showConfirm,m=f.showError,g=(0,s.X)(),v=function(e,n){i.ZQ({message:n}),i.Cp(Error(e.message)),m("Something unexpected happened, please try again.")},w=(0,r._)((0,a.t)({onError:function(e){return v(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,a,s=e.addOrInviteReplMultiplayer;switch(s.__typename){case"NotFoundError":case"UnauthorizedError":m(s.message);return;case"UserError":if(s.message.includes("reached the limit")){if(n&&!t){m("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");return}if(!n&&d){d(!0);return}}m(s.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===s.result.__typename?(r=o.LI.Email,i=s.result.email):(r=o.LI.Username,i=(null===(a=s.result.user)||void 0===a?void 0:a.username)?"@".concat(s.result.user.username):"user")}"data"===g.type&&g.refetch(),(0,u.u4)(l.AZ.MULTIPLAYER_INVITED,{replId:p,inviteMethod:r}),h("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:w[0],loadingAddMutation:w[1].loading}}},1427:(e,n,t)=>{"use strict";t.d(n,{k:()=>a});var r=t(30758),i=t(84504),o=t(20387);function a(e){var n=e.runner,t=e.onRunInitiated,a=(0,o.g3)(),l=(0,o.Ah)(n),s=(0,o.qP)(),c=(0,r.useMemo)(function(){return a&&l!==i.ll.OFFLINE?a.step:l},[l,a]),u=(0,r.useCallback)(function(){c===i.ll.IDLE&&(null==t||t()),s()},[c,s,t]);return{runState:c,toggleRunState:u}}},37787:(e,n,t)=>{"use strict";t.d(n,{k:()=>i});var r=t(30758);function i(){return(0,r.useMemo)(function(){return function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[])}},43282:(e,n,t)=>{"use strict";t.d(n,{Sl:()=>p,aT:()=>f,r8:()=>c});var r=t(72275),i=t(30758),o=t(51297),a=t(66061),l=t(14349),s=t(24955);function c(){var e=(0,a.HJ)({open:!1,overlayed:!1,width:0}),n=(0,l.A)(function(n){e.set((0,o.jM)(e.current,function(e){var t=Math.min(n.width,240);e.overlayed=n.width<500+t,e.width=t}))}),t=(0,i.useCallback)(function(n){return e.set((0,o.jM)(e.current,function(e){e.open=null!=n?n:!e.open}))},[e]),r=(0,i.useCallback)(function(){var n=e.current,r=n.open,i=n.overlayed;r&&i&&t(!1)},[e,t]);return{state:e,setSidebarContainerEl:n,toggleSidebar:t,closeIfNeeded:r}}var u=(0,t(1478).v)(["sidebarTransform","sidebarWidth","sidebarHeight","paddingLeft","sidebarOpacity","sidebarPointerEvents","sidebarBorder","sidebarBlanketPointerEvents","sidebarBlanketOpacity"]),d=u.cssVars,p=u.styleTokens;function f(e){var n,t,i="calc(100% - ".concat(s.LU.space16,")"),o="translate(".concat(s.LU.space8,", ").concat(s.LU.space8,")");return e.open?(n={},(0,r._)(n,d.paddingLeft,e.overlayed?"0":e.width+6+"px"),(0,r._)(n,d.sidebarWidth,e.width+"px"),(0,r._)(n,d.sidebarOpacity,"1"),(0,r._)(n,d.sidebarBlanketOpacity,e.overlayed?"1":"0"),(0,r._)(n,d.sidebarBlanketPointerEvents,e.overlayed?"all":"none"),(0,r._)(n,d.sidebarPointerEvents,"all"),(0,r._)(n,d.sidebarTransform,o),(0,r._)(n,d.sidebarHeight,i),n):(t={},(0,r._)(t,d.paddingLeft,"0"),(0,r._)(t,d.sidebarWidth,e.width+"px"),(0,r._)(t,d.sidebarOpacity,"0"),(0,r._)(t,d.sidebarBlanketOpacity,"0"),(0,r._)(t,d.sidebarBlanketPointerEvents,"none"),(0,r._)(t,d.sidebarPointerEvents,"none"),(0,r._)(t,d.sidebarTransform,o),(0,r._)(t,d.sidebarHeight,i),t)}},73606:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(30758);let i=function(e,n,t){(0,r.useEffect)(function(){var n=setTimeout(e,t);return function(){clearTimeout(n)}},n)}},57413:(e,n,t)=>{"use strict";t.d(n,{S:()=>i});var r=t(30758);function i(e){var n=(0,r.useRef)(!1);(0,r.useEffect)(function(){n.current||(n.current=!0,e())},[e])}},31909:(e,n,t)=>{"use strict";t.d(n,{f:()=>d});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(83733);function d(){var e,n,t,i,o=(t={variables:{replId:(0,u.A)()}},i=(0,r._)({},s,t),a.I(c,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&(null===(n=o.repl.owner.organization)||void 0===n?void 0:n.isAiEnabled)===!1}}},69343:(e,n,t)=>{"use strict";t.d(n,{U:()=>o});var r=t(1175),i=t(63679);function o(){var e=(0,r.a)(),n=(0,i._P)({controlName:"flag-lobby-creation"});return!e&&n}},29581:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(66622),i=t(30758),o=t(97285);function a(e,n){var t=(0,r._)((0,i.useState)(function(){var t;return null!==(t=o.A.get(e))&&void 0!==t?t:n}),2),a=t[0],l=t[1];return(0,i.useEffect)(function(){o.A.set(e,a)},[e,a]),[a,l]}},87689:(e,n,t)=>{"use strict";t.d(n,{G:()=>s});var r=t(13454),i=t(5482),o=t(95123),a=t(21980),l=t(24481);function s(){var e=(0,l.A)().toolchain;function n(){return(n=(0,r._)(function(n){return(0,i.YH)(this,function(t){return[2,e.setModuleConfig(n)]})})).apply(this,arguments)}function t(){return(t=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.addModule(n).catch(function(e){a.vF.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.removeModule(n).catch(function(e){a.vF.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(n,t){return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(n,t).catch(function(e){a.vF.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,o.A)(e.modules),configs:(0,o.A)(e.configs),moduleConfig:(0,o.A)(e.moduleConfig),setModuleConfig:function(e){return n.apply(this,arguments)},addModule:function(e){return t.apply(this,arguments)},removeModule:function(e){return s.apply(this,arguments)},upgradeModule:function(e,n){return c.apply(this,arguments)}}}},54487:(e,n,t)=>{"use strict";t.d(n,{o:()=>h,t:()=>f});var r=t(66622),i=t(30758),o=t(20837),a=t(45009),l=t(30632),s=t(72813);function c(){var e=(0,a._)(["\n  query OrgFlags($orgId: String!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          flags {\n            id\n            type\n            value\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(3005);function f(){var e,n,t,r,a=(0,p.ET)().orgId,l=(e={skip:void 0===a,variables:{orgId:a}},n=(0,o._)({},u,e),s.I(d,n)),c=(null===(r=l.data)||void 0===r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.org.__typename)==="Org"&&l.data.currentUser.org.flags;return[(0,i.useMemo)(function(){return(c||[]).reduce(function(e,n){return"boolean"===n.type&&(e[n.id]=n.value),e},{})},[c]),l.loading]}var h=function(e){var n,t=e.controlName,i=e.default;return null!==(n=(0,r._)(f(),1)[0][t])&&void 0!==n?n:i}},81536:(e,n,t)=>{"use strict";t.d(n,{R:()=>u});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  query UseReplOrgId($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n,t,i,o=(n={variables:{replId:e}},t=(0,r._)({},s,n),a.I(c,t)),l=o.data,u=o.loading,d=o.error;return u?{loading:u,hasError:!1,orgId:void 0}:{loading:u,hasError:void 0!==d||(null==l?void 0:l.getRepl.__typename)!=="Repl",orgId:(null==l?void 0:l.getRepl.__typename)==="Repl"?null===(i=l.getRepl.org)||void 0===i?void 0:i.id:void 0}}},20797:(e,n,t)=>{"use strict";t.d(n,{sK:()=>A,j$:()=>C,Si:()=>x});var r=t(66622),i=t(30758),o=t(51297),a=t(20837),l=t(45009),s=t(30632),c=t(39528),u=t(81074);function d(){var e=(0,l._)(["\n  fragment OrgPresenceSessionUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  fragment OrgPresenceSessionProject on Project {\n    id\n    title\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,l._)(["\n  fragment OrgPresenceSessionRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    project {\n      id\n      org {\n        id\n        slug\n      }\n      ...OrgPresenceSessionProject\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,l._)(["\n  fragment OrgPresenceSessionItem on OrgPresenceSession {\n    id\n    user {\n      ...OrgPresenceSessionUser\n    }\n    repl {\n      ...OrgPresenceSessionRepl\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,l._)(["\n  subscription OrgPresence($input: OrgReplPresenceSessionEventsInput!) {\n    orgReplPresenceSessionEvents(input: $input) {\n      __typename\n      ... on OrgPresenceSessionInitEvent {\n        sessions {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionPingEvent {\n        session {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionLeaveEvent {\n        sessionId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},v=(0,s.J1)(d()),w=(0,s.J1)(p()),y=(0,s.J1)(f(),u.r,w),b=(0,s.J1)(h(),v,y),S=(0,s.J1)(m(),b);function Y(e,n){var t=n.id,r=n.repl,i=n.user;if(i&&r){var o={id:t,repl:r,user:i,project:r.project||null},a=e.findIndex(function(e){return e.id===t});-1===a?e.push(o):e.splice(a,1,o)}}var A=function(e){var n,t,l=e.orgId,s=e.projectId,u=(0,r._)((0,i.useState)([]),2),d=u[0],p=u[1];return(0,i.useEffect)(function(){p([])},[l,s]),n={variables:{input:{orgId:l,projectId:s}},onData:function(e){var n,t=null===(n=e.data.data)||void 0===n?void 0:n.orgReplPresenceSessionEvents;t&&p(function(e){return(0,o.jM)(e,function(e){!function(e,n){switch(n.__typename){case"OrgPresenceSessionInitEvent":var t=!0,r=!1,i=void 0;try{for(var o,a=n.sessions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;Y(e,l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}break;case"OrgPresenceSessionPingEvent":Y(e,n.session);break;case"OrgPresenceSessionLeaveEvent":var s=e.findIndex(function(e){return e.id===n.sessionId});if(-1===s)return;e.splice(s,1)}}(e,t)})})}},t=(0,a._)({},g,n),c.R(S,t),d},C=function(e){var n=A({orgId:e});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return n.project&&(e[n.project.id]||(e[n.project.id]={}),e[n.project.id][n.user.id]=n.user),e},{})},[n])},x=function(e){var n=A({orgId:e.orgId,projectId:e.projectId});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return e[n.repl.id]||(e[n.repl.id]={}),e[n.repl.id][n.user.id]=n.user,e},{})},[n])}},75576:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(66622),i=t(30758);function o(e){var n=(0,r._)((0,i.useState)(e),2),t=n[0],o=n[1],a=(0,r._)((0,i.useState)(null),2),l=a[0],s=a[1];return e!==t&&(s(t),o(e)),l}},15843:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(66622),i=t(30758),o=t(20837),a=t(45009),l=t(30632),s=t(75838);function c(){var e=(0,a._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(34896),f=t(7942),h=t(24481);function m(){var e,n,t,a,l,c,m,g=(0,r._)((e=(0,o._)({},u,void 0),s.n(d,e)),1)[0],v=(0,h.A)().fs,w=(a=(0,h.A)().container,c=(l=(0,r._)((0,i.useState)(null!==(t=null===(n=a.getContext())||void 0===n?void 0:n.repl)&&void 0!==t?t:null),2))[0],m=l[1],(0,i.useEffect)(function(){return a.onConnectionStateChanged(function(e){var n,t;e===f.KN.CONNECTED&&m(null!==(t=null===(n=a.getContext())||void 0===n?void 0:n.repl)&&void 0!==t?t:null)})},[m,a]),c),y=null==w?void 0:w.authorizations.editFileContents.isAuthorized,b=null==w?void 0:w.id;(0,i.useEffect)(function(){if(y&&b){var e=(0,p.A)(function(){return g({variables:{replId:b}})},{wait:6e4,maxWait:6e5}),n=v.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),n()}}},[v,b,y,g])}},20334:(e,n,t)=>{"use strict";t.d(n,{g:()=>o});var r=t(30758),i=t(271);function o(){var e=(0,r.useContext)(i.A);if(!e)throw Error("Expected Repl info to be in context");return"html"===e.language}},22657:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(66622),i=t(27189),o=t(30758),a=t(62906),l=t(20837),s=t(43952),c=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,r._)((0,o.useState)(null),2),a=i[0],u=i[1],d=(0,o.useCallback)(u,[u]),p=(0,o.useRef)(n);(0,o.useEffect)(function(){p.current=n},[n]);var f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1];return(0,o.useEffect)(function(){if(a){var e=function(){var e=a.value,n=a.selectionStart;if(!n){m(null);return}var t=1===n||c(e[n-2]||""),r=e.length?e[n-1]:null;m(function(i){if(i&&(n<i.index||0===n))return null;if(!r||!i&&!t)return i;var o=p.current.includes(r);return i||o?i?c(r)?null:(0,s._)((0,l._)({},i),{text:e.slice(i.index,n)}):{index:n,text:"",match:r}:i})},n=function(){m(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",n),function(){m(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",n)}}},[a,m]),[h,d]}function d(e){var n=(0,o.useRef)(e);(0,o.useEffect)(function(){n.current=e},[e]);var t=(0,r._)((0,o.useState)(!1),2),l=t[0],s=t[1],c=(0,r._)((0,o.useState)(null),2),d=c[0],p=c[1],f=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),h=f[0],m=f[1],g=(0,o.useRef)(h);(0,o.useEffect)(function(){g.current=h},[h]);var v=(0,a.A)(h,100);return(0,o.useEffect)(function(){if(!v){p(null);return}var e=v.match,t=v.text,r=n.current[e]?n.current[e]:null;if(!r){p(null);return}var i=!1;return s(!0),r(t).then(function(e){i||g.current!==v||(s(!1),p({textTrigger:v,results:e,applySuggestion:function(e){var n=e.targetValue,t=e.suggestionValue,r=n.slice(0,v.index),i=t,o=n.slice(v.index+v.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[v,p]),[{isLoading:l,suggestions:d},m]}},63423:(e,n,t)=>{"use strict";t.d(n,{I:()=>o});var r=t(95123),i=t(24481);function o(){var e=(0,i.A)().toolchain;return(0,r.A)(e.configs)}},1295:(e,n,t)=>{"use strict";t.d(n,{A:()=>s,L:()=>u});var r=t(66622),i=t(30758),o=t(99655),a=t(96216),l=t(26190);function s(){var e=(0,i.useRef)(0),n=(0,r._)((0,i.useState)(!1),2),t=n[0],l=n[1],s=(0,o.m5)(),u=(0,o.m6)(),d=(0,a.b)();return(0,i.useEffect)(function(){var n,t=window.visualViewport;if(t){if(u){l(null!==(n=null==d?void 0:d.isShown)&&void 0!==n&&n);return}if(s){var r=function(){l(c({current:t.height,initial:e.current}))};return e.current=t.height,t.addEventListener("resize",r),function(){t.removeEventListener("resize",r)}}}},[s,u,null==d?void 0:d.isShown]),t}function c(e){return e.current<.8*e.initial}function u(e){var n=(0,l.A)(e),t=(0,i.useRef)(0),r=(0,o.m6)();(0,i.useEffect)(function(){if(!r){var e=window.visualViewport;if(e){var i=function(){n.current(c({current:e.height,initial:t.current}))};return t.current=e.height,e.addEventListener("resize",i),function(){e.removeEventListener("resize",i)}}}},[n,r])}},78703:(e,n,t)=>{"use strict";t.d(n,{M:()=>l,r:()=>s});var r=t(27189),i=t(30758),o=t(57413),a=t(82436),l=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,o.S)(function(){a.u4.apply(void 0,(0,r._)(n))})},s=function(e,n,t,r){var o=(0,i.useRef)(!1);(0,i.useEffect)(function(){!o.current&&t()&&((0,a.u4)(e,n),o.current=!0)},r)}},16038:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(30758),i=t(66622),o=t(44019),a=t(24481),l=t(21980);function s(e,n){var t,s,c,u,d=(t=(0,a.A)().container,c=(s=(0,i._)((0,r.useState)(null),2))[0],u=s[1],(0,r.useEffect)(function(){if(t)return t.onConnectionStateChanged(function(){u(t.getConnectionMetadata())})},[t]),(0,r.useMemo)(function(){return c?(0,o.pI)(c.token):null},[c]));(0,r.useEffect)(function(){if(e&&n){var t,r,i,o=(null===(t=e.origin)||void 0===t?void 0:t.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:n.roles&&n.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(i=e.source)||void 0===i?void 0:null===(r=i.release)||void 0===r?void 0:r.id,tokenCluster:null==d?void 0:d.cluster};return(0,l.aq)(a),function(){(0,l.ve)()}}},[e,n,d])}},45963:(e,n,t)=>{"use strict";t.d(n,{W:()=>l});var r=t(13454),i=t(5482),o=t(30758),a=t(51439),l=function(){var e,n,t=(0,a.dI)(),l=(0,o.useCallback)((e=(0,r._)(function(e){var n,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return n=e.file,r=e.onError,[4,t.getResourceUploadUrl(n.type)];case 1:if(!(o=i.sent()).ok)return r("Failed to get upload URL for file: ".concat(n.name)),[2];return[4,fetch(o.payload.uploadUrl,{method:"PUT",body:n,headers:{"Content-Type":n.type}})];case 2:if(!i.sent().ok)return r("Failed to upload file: ".concat(n.name)),[2];return[2,{file:n,publicUrl:o.payload.downloadUrl}]}})}),function(n){return e.apply(this,arguments)}),[t]);return(0,o.useCallback)((n=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return n=e.files,t=e.onError,[4,Promise.all(n.map(function(e){return l({file:e,onError:t})}))];case 1:return[2,r.sent().filter(function(e){return void 0!==e})]}})}),function(e){return n.apply(this,arguments)}),[l])}},63581:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(13454),i=t(5482),o=t(53654),a=t(96367),l=/\(copy\)( \d+)?$/,s=/\d+$/;function c(e,n){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,n){var t,r,c,u,d,p;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,o._6)(e),[4,n.readDir(0===t.length?a.Dl:t)];case 1:if((r=i.sent()).error)throw r.error;return c=new Set(r.children.map(function(e){return e.filename})),u=function(e,n){var t=(0,o.an)(e),r=(0,o.J)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var a=l.test(r)?e:"".concat(r," (copy)").concat(t.length>0?".".concat(t):""),c=1;c<=n.size&&n.has(a);c++){var u=(0,o.J)(a),d=u.split(" ");s.test(u)&&d.pop(),a="".concat(d.join(" ")," ").concat(c),t.length>0&&(a+=".".concat(t))}return a}((0,o.WP)(e),c),d=t?"".concat(t,"/").concat(u):u,[4,n.copyFile(e,d)];case 2:if((p=i.sent()).error)throw p.error;return[2,d]}})})).apply(this,arguments)}},38584:(e,n,t)=>{"use strict";function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxLength:30,truncateFrom:"middle"},t=n.maxLength,r=void 0===t?30:t,i=n.truncateFrom;return e.length<=r?e:"start"===(void 0===i?"middle":i)?"..."+e.slice(e.length-r,e.length):e.slice(0,r/2)+"..."+e.slice(-r/2)}t.d(n,{U:()=>r})},20740:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});let r={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"}},47079:(e,n,t)=>{"use strict";function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===t.moveThreshold;e.preventDefault();var i={x:e.pageX,y:e.pageY},o={x:0,y:0};n.start&&n.start({mouse:i,shiftKey:e.shiftKey});var a=function(e){var a={x:e.pageX,y:e.pageY};if(o={x:a.x-i.x,y:a.y-i.y},void 0!==t.moveThreshold&&!r){if(Math.abs(o.x)<t.moveThreshold&&Math.abs(o.y)<t.moveThreshold)return;r=!0}n.move({delta:o,shiftKey:e.shiftKey,mouse:a})},l=null,s=function(e){e.preventDefault(),l&&cancelAnimationFrame(l),l=requestAnimationFrame(function(){a(e)})},c=function(){l&&cancelAnimationFrame(l),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),(void 0===t.moveThreshold||r)&&n.end&&n.end({delta:o,shiftKey:e.shiftKey})};document.addEventListener("pointermove",s),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}t.d(n,{j:()=>r})},77494:(e,n,t)=>{"use strict";t.d(n,{d:()=>C,O:()=>x});var r,i=t(94086),o=t(30758),a=t(96136),l=t(72536),s=t(63679),c=t(13454),u=t(78542),d=t(5482),p=t(7879),f=t(21980),h=new(function(){function e(){(0,u._)(this,e)}var n=e.prototype;return n.export=function(e,n){var t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s,c=a.value,u=c.spanContext(),d={name:c.name,service:"repl.it-web",trace_id:u.traceId,span_id:u.spanId,start:c.startTime,end:c.endTime,parent_id:c.parentSpanId,attributes:c.attributes};t.has(u.traceId)||t.set(u.traceId,[]),null===(s=t.get(u.traceId))||void 0===s||s.push(d)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var h=Array.from(t.values());if(0===h.length){n({code:p.V.SUCCESS});return}var m=(0,f.JM)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:h})}).then(function(){n({code:p.V.SUCCESS})}).catch(function(e){f.vF.error("Failed to send traces to Datadog: ".concat(e.message)),n({code:p.V.FAILED,error:e.message})})},n.shutdown=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},n.forceFlush=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},e}()),m=t(78910),g=t(71929),v=t(49335),w=t(88708),y=t(6878),b=t(20620),S=t(45157),Y=function(e){function n(){var e;return(0,u._)(this,n),e=(0,m._)(this,n,arguments),e.spanSet=new Map,e}(0,w._)(n,e);var t=n.prototype;return t.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y._.active(),i=(0,g._)((0,v._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},t.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(b.s),A=function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u._)(this,n),(e=(0,m._)(this,n,[t]))._wsTracers=new Map,e._wsConfig=t,e}(0,w._)(n,e);var t=n.prototype;return t.getTracer=function(e,n,t){var r="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new Y({name:e,version:n,schemaUrl:null==t?void 0:t.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},t.pruneSpansForTracer=function(e,n,t){var r,i="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");this._wsTracers.has(i)&&(null===(r=this._wsTracers.get(i))||void 0===r||r.pruneSpans())},n}(S.Z);function C(){var e=(0,s._P)({controlName:"flag-open-telemetry-tracing"});return(0,o.useEffect)(function(){e&&((r=new A).addSpanProcessor(new l.J(h)),r.register({propagator:new a.lm}))},[e]),(0,i.Y)(i.FK,{})}function x(e){r.pruneSpansForTracer(e)}},39735:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(60762),i=t(89347);function o(e,n,t){t&&i.A(e,n),n&&(void 0===n?"undefined":(0,r._)(n))==="object"?(n.skipOverflowHiddenElements=!0,i.A(e,n)):i.A(e,{skipOverflowHiddenElements:!0})}},32764:(e,n,t)=>{"use strict";t.d(n,{A:()=>U});var r=t(66622),i=t(94086),o=t(20837),a=t(45009),l=t(30632),s=t(72813),c=t(75838);function u(){var e=(0,a._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,a._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,l.J1)(u()),m=(0,l.J1)(d()),g=(0,l.J1)(p()),v=t(39651),w=t(98734),y=t(82436),b=t(24955),S=t(10168),Y=t(32842),A=t(68463),C=t(28354),x=t(53536),_=t(31955),k=t(2420),D=t(40889),E=t(8367),R=t(74894),I=t(85213),F=t(14753),T=t(68753),P=(0,S.x)({container:[Y.wp.colWithGap(12),Y.wp.px(12)],header:[Y.wp.flex.row,Y.wp.justify.spaceBetween],globeIconContainer:[Y.wp.width(40),Y.wp.height(40),Y.wp.backgroundColor.accentPrimaryDimmer,Y.wp.borderRadius("full"),Y.wp.align.center,Y.wp.justify.center],title:[Y.wp.fontWeight.medium],inviteUrlContainer:[Y.wp.borderRadius(8),Y.wp.flex.row],input:[Y.wp.borderRadius(8,0,0,8),Y.wp.color.foregroundDimmer],copyToClipboard:[Y.wp.borderRadius(0,8,8,0)]}),L=function(){return(0,i.FD)(E.S,{row:!0,gap:12,children:[(0,i.Y)(E.S,{css:P.globeIconContainer,children:(0,i.Y)(R.A,{color:b.LU.accentPrimaryStrongest,size:20})}),(0,i.FD)(E.S,{children:[(0,i.Y)(D.EY,{css:P.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.Y)(D.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function U(e){var n,t,a,l,u,d,p,S,R,U,N,O,M,B,H=e.replId,z=(0,v.A)(),W=z.showConfirm,G=z.showError,V=(n={variables:{replId:H}},t=(0,o._)({},f,n),s.I(h,t)),j=V.data,Z=V.loading,q=V.error,K=V.refetch,$=(0,r._)((a={variables:{replId:H},onError:function(e){return G(e.message)},onCompleted:function(){return W("Join link created")}},l=(0,o._)({},f,a),c.n(m,l)),2),J=$[0],Q=$[1],X=(0,r._)((u={variables:{replId:H},onError:function(e){return G(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename){G(e.deleteMultiplayerInviteLink.message);return}"Repl"===e.deleteMultiplayerInviteLink.__typename&&W("Join link deleted")}},d=(0,o._)({},f,u),c.n(g,d)),2),ee=X[0],en=X[1],et=(null==j?void 0:null===(p=j.repl)||void 0===p?void 0:p.__typename)==="Repl"?j.repl:null,er=Q.loading||en.loading,ei=(null==j?void 0:null===(S=j.repl)||void 0===S?void 0:S.__typename)==="Repl"&&(null==et?void 0:null===(R=et.owner)||void 0===R?void 0:R.__typename)==="Team",eo=(null==j?void 0:null===(U=j.repl)||void 0===U?void 0:U.__typename)==="Repl"&&(null==et?void 0:null===(N=et.owner)||void 0===N?void 0:N.__typename)==="Team"&&(null==et?void 0:null===(O=et.owner.capabilities)||void 0===O?void 0:O.isBusinessPlan)&&(null==et?void 0:null===(M=et.owner.capabilities)||void 0===M?void 0:M.hasValidSubscription),ea=(null==j?void 0:null===(B=j.repl)||void 0===B?void 0:B.__typename)==="Repl"&&(null==et?void 0:et.inviteUrl)?window.location.origin+(null==et?void 0:et.inviteUrl):null;return Z||ei&&!eo?null:q?(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),(0,i.Y)(k.d,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.Y)(x.d,{css:[Y.wp.textAlign.left],iconLeft:(0,i.Y)(T.A,{color:b.LU.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return K({replId:H})}})]}):(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),Z?(0,i.FD)(E.S,{row:!0,gap:4,align:"center",children:[(0,i.Y)(F.A,{color:b.LU.foregroundDimmer}),(0,i.Y)(D.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.Y)(k.d,{isSelected:!!ea,isDisabled:er,onChange:function(e){er||(e?J():ee())},"aria-labelledby":"link-switch-label"})]}),!Z&&ea?(0,i.FD)(i.FK,{children:[(0,i.FD)(_.ui,{css:P.inviteUrlContainer,children:[(0,i.Y)(C.pd,{type:"url",readOnly:!0,disabled:!0,value:er?"Loading...":ea,css:P.input}),(0,i.Y)(A.i,{textToCopy:ea,onClick:function(){ea?((0,w.A)(ea),(0,y.u4)(y.AZ.JOIN_LINK_COPIED,{replId:null==et?void 0:et.id,isTeamRepl:ei,source:"replEnvironment"}),W("Link copied")):G("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.Y)(I.A,{}),css:P.copyToClipboard,colorway:"primary",disabled:er})]}),(0,i.Y)(E.S,{children:(0,i.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.Y)("a",{css:Y.wp.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key||(e.preventDefault(),er||J())},onClick:function(e){e.preventDefault(),er||J()},children:"Generate a new link"})]})})]}):null]})}},37658:(e,n,t)=>{"use strict";t.d(n,{Nx:()=>es,jl:()=>ec,Ay:()=>eu});var r=t(66622),i=t(27189),o=t(94086),a=t(60049),l=t(30758),s=t(87520),c=t.n(s),u=t(55937),d=t(20837),p=t(45009),f=t(30632),h=t(72813),m=t(88940);function g(){var e=(0,p._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var v={},w=(0,f.J1)(g(),m._9),y=t(58663),b=t(97407),S=t(40500),Y=t(40889),A=function(e){var n=e.isOpen,t=e.onClose,r=e.onPurchaseComplete;return(0,o.Y)(S.A,{isOpen:n,onClose:t,type:"purchase",contextualUpsell:(0,o.FD)(o.FK,{children:[(0,o.Y)(Y.EY,{variant:"subheadBig",children:"Upgrade for more collaborators"}),(0,o.FD)(Y.EY,{multiline:!0,children:["Share your Apps with up to ",y.z$," collaborators with Replit ",b.en]})]}),onPurchaseComplete:r,analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}}})},C=t(58840),x=t(25204),_=t.n(x),k=t(44576),D=t(82436),E=t(24955),R=t(10168),I=t(3460),F=t(32842),T=t(14968),P=t(76985),L=t(8367),U=t(94767),N=t(72602),O=t(43417),M=t(27640),B=t(60372),H=t(40904),z=t(43730),W=function(e){var n=e.isOpen,t=e.onClose,r=(0,U.s)();return(0,l.useEffect)(function(){n&&(0,D.u4)(D.AZ.ORG_UPGRADE_MODAL_VIEWED,{surface:"workspace_multiplayer_header"})},[n]),(0,o.Y)(P.a,{fitContent:!0,centered:!0,maxWidth:400,isOpen:n,onRequestClose:t,noPadding:!0,children:(0,o.FD)(L.S,{css:V.self,children:[(0,o.Y)(L.S,{children:(0,o.FD)(L.S,{gap:2,children:[(0,o.Y)(Y.EY,{variant:"subheadBig",children:"Join Teams for more collaborators"}),(0,o.Y)(Y.EY,{multiline:!0,children:"Work across Apps with all your teammates"}),(0,o.FD)(L.S,{css:V.price,row:!0,gap:8,children:[(0,o.Y)(Y.Y9,{variant:"headerDefault",level:3,css:V.priceText,children:r.Teams.costInCents.monthly?(0,o.Y)(Y.Y9,{variant:"headerBig",level:3,css:V.priceText,children:(0,k.b0)(r.Teams.costInCents.monthly)}):(0,o.Y)("div",{css:V.priceLoader})}),(0,o.FD)(L.S,{children:[(0,o.Y)(Y.EY,{variant:"small",color:"dimmest",children:"per user"}),(0,o.Y)(Y.EY,{variant:"small",color:"dimmest",children:"per month"})]})]}),(0,o.FD)(L.S,{css:V.featureContainer,gap:16,children:[(0,o.Y)(G,{title:"Everything in ".concat(b.en),subtitle:"Unlimited private Apps, advanced AI chat, and more",icon:(0,o.Y)(M.A,{})}),(0,o.Y)(G,{title:"Shared projects and resources",subtitle:"Collaborate with your team in real-time",icon:(0,o.Y)(z.A,{})}),(0,o.Y)(G,{title:"Granular permissions",subtitle:"Manage permssions for each team member",icon:(0,o.Y)(O.A,{})}),(0,o.Y)(G,{title:"Centralized billing",subtitle:"Consolidate all your payments in one place",icon:(0,o.Y)(B.A,{})}),(0,o.Y)(L.S,{children:(0,o.Y)(_(),{href:"/pricing",target:"_blank",onClick:function(){(0,D.u4)(D.AZ.ORG_MORE_FEATURES_CLICKED,{surface:"workspace_multiplayer_header"})},children:(0,o.FD)(L.S,{css:V.viewMore,children:[(0,o.Y)(H.A,{}),(0,o.Y)(Y.EY,{variant:"small",color:"dimmer",children:"View More Features"})]})})})]})]})}),(0,o.Y)(T.v,{iconRight:(0,o.Y)(N.A,{}),text:"Continue with ".concat(r.Teams.planName),href:r.Teams.href,onClick:function(){(0,D.u4)(D.AZ.ORG_CONTINUE_UPGRADE_CLICKED,{surface:"workspace_multiplayer_header"})},target:"_blank"})]})})},G=function(e){var n=e.title,t=e.subtitle,r=e.icon;return(0,o.FD)(L.S,{row:!0,gap:8,children:[(0,o.Y)(L.S,{css:V.featureIcon,children:r}),(0,o.FD)(L.S,{css:V.featureText,children:[(0,o.Y)(Y.EY,{variant:"text",height:"singleLine",children:n}),t?(0,o.Y)(Y.EY,{variant:"small",color:"dimmer",height:"singleLine",children:t}):null]})]})},V=(0,R.x)({priceLoader:[I.S.backgroundPulse(E.LU.backgroundHigher,"transparent"),F.wp.height("100%"),F.wp.width(50)],featureContainer:[F.wp.pt(12)],featureText:[F.wp.flex.grow(1),F.wp.pt(1),F.wp.colWithGap(8)],featureIcon:[F.wp.color.accentPrimaryStronger],price:[F.wp.pt(8)],priceText:[F.wp.fontWeight.normal],self:[F.wp.px(32),F.wp.py(16),F.wp.colWithGap(16),F.wp.backgroundColor.backgroundOverlay,F.wp.borderRadius()],viewMore:[F.wp.color.foregroundDimmest,F.wp.rowWithGap(8),F.wp.align.center,F.wp.cursor.pointer,{fontWeight:200}]}),j=t(36335),Z=t(98541),q=t(65599),K=t(14753),$=function(e){var n=e.modalState,t=e.setModalState,r=(0,C.X)(),i=(0,l.useCallback)(function(){"data"===r.type&&t({type:"open",onUpgradeSuccess:function(){}})},[r,t]);if("loading"===r.type)return(0,o.FD)(L.S,{css:J.loading,row:!0,gap:4,align:"center",children:[(0,o.Y)(K.A,{color:E.LU.foregroundDimmer}),(0,o.Y)(Y.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]});if("data"!==r.type)return null;var a=r.collaboratorCount,s=r.collaboratorLimit,c=r.refetch,u=r.isStarterUser?(0,o.Y)(A,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})},onPurchaseComplete:function(){"open"===n.type&&n.onUpgradeSuccess(),c()}}):(0,o.Y)(W,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})}}),d=Math.max(0,s-a);return(0,o.FD)(L.S,{row:!0,gap:8,children:[(0,o.FD)(L.S,{css:J.limitsContainer,align:"center",row:!0,gap:8,children:[(0,o.Y)(q.m_,{tooltip:"Your account is limited to ".concat(s," collaborators. Manage your collaborators on the Usage page."),children:(0,o.Y)(Z.a,{colorway:"yellow",css:J.pill,text:"".concat(a," / ").concat(s),onClick:i})}),(0,o.Y)(L.S,{css:J.measureBarWrapper,onClick:i,children:(0,o.Y)(j.W,{css:J.measureBar,total:s,current:a,tooltip:"".concat(d," account collaborators remaining"),backgroundColor:E.LU.yellowDimmer,color:E.LU.yellowDefault})})]}),u]})},J=(0,R.x)({pill:[F.wp.cursor.pointer,F.wp.borderRadius(4),F.wp.pr(0)],measureBar:[F.wp.height(8),F.wp.width(60)],measureBarWrapper:[F.wp.cursor.default],limitsContainer:[F.wp.borderRadius(4),F.wp.backgroundColor.yellowDimmest,F.wp.pr(8)],loading:[F.wp.flex.grow(1),F.wp.justify.center]}),Q=t(83627),X=t(99655),ee=t(88444),en=t(6552),et=t(39797),er=t(75165),ei=t(31955),eo=t(47177),ea=t(79653);function el(e,n){return n.some(function(n){return n.id===e})}var es={root:[F.wp.color.foregroundDefault,F.wp.colWithGap(12),F.wp.align.stretch,F.wp.flex.growAndShrink(1),F.wp.px(12)],header:[F.wp.flex.row,F.wp.justify.spaceBetween,F.wp.align.center],header_mobile:[F.wp.px(0)],titleContainer:[F.wp.flex.row,F.wp.rowWithGap(4),F.wp.align.center],limitsContainer:[F.wp.align.center,F.wp.rowWithGap(8)],loading:[F.wp.rowWithGap(4),F.wp.align.center,F.wp.flex.grow(1),F.wp.justify.center],measureBar:[F.wp.height(8),F.wp.width(60)],searchContainer:[F.wp.position.relative,F.wp.maxHeight(32)],userList:[F.wp.flex.column,F.wp.colWithGap(16),F.wp.scrollbar.thin,F.wp.position.relative,F.wp.overflowY("auto"),F.wp.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[F.wp.backgroundColor.backgroundHighest,F.wp.borderRadius(4)],scrollbarColor:"".concat(E.LU.backgroundDefault," ").concat(E.LU.backgroundHighest)}],userGroup:{root:[F.wp.colWithGap(8)],titleContainer:[F.wp.rowWithGap(4),F.wp.align.center],title:[F.wp.fontWeight.medium]},emptyContainer:[F.wp.position.relative,F.wp.colWithGap(16),F.wp.py(16),F.wp.justify.start,{maxHeight:220}]},ec=function(e){var n=e.title,t=e.count,r=e.color,i=e.tooltip;return(0,o.FD)(L.S,{css:es.userGroup.titleContainer,children:[(0,o.Y)(eo.A,{color:r,size:6}),(0,o.Y)(Y.EY,{variant:"small",css:es.userGroup.title,multiline:!1,children:n}),(0,o.Y)(Y.EY,{multiline:!1,variant:"small",color:"dimmest",css:es.userGroup.title,children:t}),i?(0,o.Y)(q.m_,{tooltip:i,children:(0,o.Y)(ea.A,{})}):null]})};let eu=function(e){var n,t,s,p=e.replId,f=e.handleUpgradeTriggered,m=(0,a.useRouter)(),g=(0,X.Po)(m),b=(0,C.X)(),S=(0,Q.A)({isMobileApp:g,isTeam:!1,handleUpgradeTriggered:f,replId:p}),A=S.addOrInviteReplMultiplayer,x=S.loadingAddMutation,_=(0,er.Q4)(),k=(0,r._)((0,l.useState)({type:"closed"}),2),D=k[0],R=k[1],I=(n={variables:{replId:p},pollInterval:8e3},t=(0,d._)({},v,n),h.I(w,t)),F=I.data,T=I.loading,P=(null==F?void 0:F.repl.__typename)==="Repl"?F.repl:null,U=null==F?void 0:F.currentUser,N=(null!==(s=null==P?void 0:P.collaborators)&&void 0!==s?s:[]).reduce(function(e,n){var t=n.user;return(0,i._)(e).concat([t.username])},[]),O=(null==P?void 0:P.authorizations.editPermissions.isAuthorized)||!1,M=!!(P&&!N.length&&!P.multiplayerInvites.length),B=null==P?void 0:P.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==U?void 0:U.id)}),H=null==B?void 0:B.filter(function(e){return e&&el(e.id,_)}),z=null==B?void 0:B.filter(function(e){return e&&!el(e.id,_)}),W=B?B.length:null,G=(0,o.FD)(o.FK,{children:[null===W||(null==U?void 0:U.isSubscribed)?null:(0,o.FD)(o.FK,{children:[(0,o.FD)(Y.EY,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[W," / ",y.vF]}),(0,o.Y)(j.W,{css:es.measureBar,total:y.vF,current:W,tooltip:"".concat(y.vF-W," free editors remaining")})]}),T||(null==U?void 0:U.isSubscribed)||g?null:(0,o.Y)(et.A,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){f&&f(!0)},onCancel:function(){f&&f(!1)}})]});return(0,o.FD)(ei.ui,{background:"default",css:es.root,children:[(0,o.FD)(L.S,{css:[es.header,g&&es.header_mobile],children:[(0,o.Y)(L.S,{css:es.titleContainer,children:(0,o.Y)(Y.EY,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.FD)(L.S,{css:es.limitsContainer,children:[T?(0,o.FD)(L.S,{css:es.loading,children:[(0,o.Y)(K.A,{color:E.LU.foregroundDimmer}),(0,o.Y)(Y.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,"data"===b.type&&b.shouldEnforceMultiplayerLimit?(0,o.Y)($,{setModalState:R,modalState:D}):G]})]}),O&&N&&P?(0,o.Y)(L.S,{css:es.searchContainer,children:(0,o.Y)(en.A,{existingUsernames:N,onSubmit:function(e){if((!T||(null==U?void 0:U.isSubscribed))&&!x){var n=new Set(("data"===b.type?(0,i._)(b.collaboratorsByRepl.values()).map(function(e){return e.users}).flat():[]).map(function(e){return e.username})),t="data"===b.type&&b.shouldEnforceMultiplayerLimit&&b.collaboratorCount>=b.collaboratorLimit&&!n.has(e),r={method:c()(e)?u.LI.Email:u.LI.Username,value:e},o=function(){return A({variables:{input:{replId:p,target:r,level:u.Hy.Rw}}})};if(t){R({type:"open",onUpgradeSuccess:o});return}o()}}})}):null,M?(0,o.Y)(L.S,{css:es.emptyContainer,children:(0,o.Y)(L.S,{children:(0,o.Y)(Y.EY,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,o.FD)(ei.ui,{css:es.userList,children:[(null==H?void 0:H.length)?(0,o.FD)(L.S,{css:es.userGroup.root,children:[(0,o.Y)(ec,{title:"Online",count:H.length||0,color:E.LU.greenStrongest}),H.map(function(e){return e?(0,o.Y)(ee.A,{isPendingInvitation:!1,replId:p,canEditMultiplayers:O,user:e},e.id):null})]}):null,(null==z?void 0:z.length)?(0,o.FD)(L.S,{css:es.userGroup.root,children:[(0,o.Y)(ec,{title:"Offline",count:z.length||0,color:E.LU.outlineStrongest}),null==z?void 0:z.map(function(e){return e?(0,o.Y)(ee.A,{canEditMultiplayers:O,isPendingInvitation:!1,user:e,replId:p},e.id):null})]}):null,(null==P?void 0:P.multiplayerInvites.length)?(0,o.FD)(L.S,{css:es.userGroup.root,children:[(0,o.Y)(ec,{title:"Pending Invitations",count:(null==P?void 0:P.multiplayerInvites.length)||0,color:E.LU.outlineStrongest}),P.multiplayerInvites.map(function(e){return(0,o.Y)(ee.A,{canEditMultiplayers:O,replId:p,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]})}},88444:(e,n,t)=>{"use strict";t.d(n,{A:()=>T});var r=t(94086),i=t(25204),o=t.n(i),a=t(66622),l=t(55195),s=t(20837),c=t(45009),u=t(30632),d=t(75838),p=t(88940);function f(){var e=(0,c._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},g=(0,u.J1)(f(),p._9),v=(0,u.J1)(h(),p._9),w=t(58840),y=t(39651);let b=function(){var e,n,t,r,i=(0,y.A)(),o=i.showConfirm,c=i.showError,u=(0,w.X)(),p=function(e,n){l.ZQ({message:n}),l.Cp(Error(e.message)),c("Something unexpected happened, please try again.")},f=(0,a._)((e={onError:function(e){return p(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var n,t=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;t?o("@".concat(t," removed")):o("User removed"),"data"===u.type&&u.refetch()}},n=(0,s._)({},m,e),d.n(g,n)),2),h=f[0],b=f[1].loading,S=(0,a._)((t={onError:function(e){return p(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename){c(e.deleteMultiplayerInvite.message);return}if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;o("Invite canceled for ".concat(n))}}},r=(0,s._)({},m,t),d.n(v,r)),2);return{removeMultiplayerUser:h,loadingRemoveUser:b,deleteMultiplayerInvite:S[0],loadingDeleteInvite:S[1].loading}};var S=t(15617),Y=t(24955),A=t(10168),C=t(32842),x=t(95235),_=t(40889),k=t(68845),D=t(8367),E=t(12470),R=t(47650),I=t(70953),F=(0,A.x)({root:[C.wp.px(16),C.wp.py(4),C.wp.flex.row,C.wp.rowWithGap(8),C.wp.align.center,C.wp.cursor.default,C.wp.justify.spaceBetween],userContainer:C.wp.color.foregroundDefault,userContainer_pending:[C.wp.flex.grow(1),C.wp.flex.row,C.wp.rowWithGap(8),C.wp.align.center,{fontStyle:"italic"}]});let T=function(e){var n,t=e.isPendingInvitation,i=e.canEditMultiplayers,a=e.replId,l=b(),s=l.removeMultiplayerUser,c=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,p=!t,f=p?(0,r.Y)(E.A,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.Y)(R.A,{color:Y.LU.outlineDefault,size:32}),h=p?e.user.username:e.email;return(0,r.FD)(D.S,{css:F.root,children:[p?(0,r.Y)(S.A,{username:e.user.username,children:(0,r.Y)(o(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,r.Y)(D.D.a,{css:F.userContainer,children:(0,r.Y)(k.K,{username:e.user.username,src:null!==(n=e.user.image)&&void 0!==n?n:null})})})}):(0,r.FD)(D.S,{css:[F.userContainer_pending],children:[f,(0,r.Y)(_.EY,{color:p?"default":"dimmest",multiline:!1,children:h})]}),(0,r.FD)(D.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(_.EY,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),i?(0,r.Y)(x.K0,{alt:p?"Remove member":"Cancel invitation",onClick:function(){!i||c||d||(p?s({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}}))},children:(0,r.Y)(I.A,{size:12})}):null]})]})}},6552:(e,n,t)=>{"use strict";t.d(n,{A:()=>k});var r=t(20837),i=t(43952),o=t(66622),a=t(94086),l=t(30758),s=t(40114),c=t(87520),u=t.n(c),d=t(49017),p=t(62906),f=t(39651),h=t(24955),m=t(10168),g=t(32842),v=t(84911),w=t(40172),y=t(28354),b=t(31955),S=t(40889),Y=t(8367),A=t(12470),C=t(16021),x=t(14753),_=(0,m.x)({form:[g.wp.align.start,g.wp.display.flex,g.wp.rowWithGap(8),g.wp.width("100%")],searchContainer:[g.wp.position.relative,g.wp.flex.growAndShrink(1)],dropdownMenu:[g.wp.borderRadius(8),g.wp.overflow("hidden"),g.wp.mt(2),g.wp.zIndex(2),g.wp.border({color:h.LU.outlineDimmer,width:1,style:"solid"}),g.wp.maxHeight(280),g.wp.overflowY("auto"),g.wp.scrollbar.thin,{scrollbarColor:h.LU.backgroundHigher+" "+h.LU.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:h.LU.backgroundHighest}}],result:[g.wp.p(8),g.wp.rowWithGap(8),g.wp.justify.spaceBetween,g.wp.align.center,g.wp.cursor.pointer],result_active:[g.wp.backgroundColor.accentPrimaryDimmer],loadingContainer:[g.wp.m(8),g.wp.rowWithGap(8),g.wp.align.center],emptyText:[g.wp.m(8)]});function k(e){var n=e.onSubmit,t=e.existingUsernames,c=e.isDisabled,m=e.onChange,g=e.placeholder,k=(0,o._)((0,l.useState)(""),2),D=k[0],E=k[1],R=(0,v.c)(),I=(0,p.A)(D.trim().replace(/^@/,""),250),F=(0,d.Mj)({skip:!I||u()(D),variables:{query:I,limit:6}}),T=F.data,P=F.loading,L=F.error,U=(0,f.A)().showError;(0,l.useEffect)(function(){L&&U(L.message)},[L,U]);var N=null==T?void 0:T.usernameSearch,O=function(e){E(e.currentTarget.value),null==m||m(e.currentTarget.value)},M=function(e){"Enter"===e.key&&D.match(/.+@.+/)&&(n(D),E(""),e.currentTarget.blur())};return(0,a.FD)("form",{onSubmit:function(e){e.preventDefault(),n(D),E("")},css:_.form,children:[(0,a.Y)(s.Ay,{onChange:function(e){e&&E(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,l=e.getMenuProps,s=e.isOpen,c=e.highlightedIndex,u=e.getRootProps;return(0,a.FD)(Y.S,(0,i._)((0,r._)({css:_.searchContainer},u({refKey:"innerRef"})),{children:[(0,a.Y)(y.pd,(0,r._)({id:R("username-search")},n({ref:null,value:D,onChange:O,placeholder:null!=g?g:"Add people by username or email",autoComplete:"off",onKeyDown:M}))),s?(0,a.FD)(Y.S,{children:[N&&N.length?(0,a.Y)(b.ui,(0,i._)((0,r._)({elevated:!0,css:_.dropdownMenu,tag:"ul"},l({refKey:"innerRef"})),{children:N.map(function(e,n){return(0,a.FD)(Y.S,(0,i._)((0,r._)({tag:"li"},o({item:e,index:n})),{css:[_.result,n===c&&_.result_active],children:[(0,a.FD)(Y.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(A.A,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.Y)(S.EY,{multiline:!1,children:e.username})]}),t.includes(e.username)?(0,a.Y)(Y.S,{children:(0,a.Y)(C.A,{color:h.LU.accentPositiveStronger})}):null]}),n)})})):null,P?(0,a.Y)(b.ui,{elevated:!0,css:_.dropdownMenu,children:(0,a.FD)(Y.S,{css:_.loadingContainer,align:"center",children:[(0,a.Y)(x.A,{}),(0,a.Y)(S.EY,{color:"dimmer",multiline:!1,children:"Loading"})]})}):null,N&&0===N.length?(0,a.Y)(b.ui,{elevated:!0,css:_.dropdownMenu,children:(0,a.FD)(S.EY,{css:_.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',D,'"']})}):null]}):null]}))}}),(0,a.Y)(Y.S,{children:(0,a.Y)(w.$n,{colorway:"primary",type:"submit",disabled:c||!D,text:"Invite"})})]})}},26286:(e,n,t)=>{"use strict";t.d(n,{i:()=>b});var r=t(66622),i=t(30758),o=t(3274),a=t(20837),l=t(45009),s=t(30632),c=t(39528),u=t(75838);function d(){var e=(0,l._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return p=function(){return e},e}var f={},h=(0,s.J1)(d()),m=(0,s.J1)(p()),g=t(83733),v=t(7942),w=t(73540),y=t(24481);function b(){var e,n,t,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=(0,g.A)(),d=(0,i.useRef)((0,o.A)()),p=(0,y.A)().container,b=(0,w.A)(p),S=(0,r._)((e=(0,a._)({},f,void 0),u.n(m,e)),1)[0],Y=b!==v.KN.CONNECTED||l;(0,i.useEffect)(function(){var e=!1;if(!Y&&b===v.KN.CONNECTED){var n=null;return function t(){S({variables:{input:{sessionId:d.current}},onCompleted:function(){e||(n=setTimeout(t,1e4))}})}(),function(){e=!0,n&&clearTimeout(n)}}},[b,d,S,Y]),n={variables:{input:{replId:s,sessionId:d.current}},skip:Y},t=(0,a._)({},f,n),c.R(h,t)}},68736:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(75895),i=t(13454),o=t(5482),a=t(76862),l=t(65640);function s(){var e;return(0,a.b)((e=(0,i._)(function(e,n){var t,i,a,s,c,u,d,p;return(0,o.YH)(this,function(e){switch(e.label){case 0:return n.signal,[3,13];case 1:t=e.sent().resReadable,i=!1,a=!1,e.label=2;case 2:e.trys.push([2,7,8,13]),c=(0,r._)(t),e.label=3;case 3:return[4,c.next()];case 4:if(!(i=!(u=e.sent()).done))return[3,6];(d=u.value).ok&&(d.payload.extras?l.log("[pid2]: ".concat(d.payload.message),d.payload.extras):l.log("[pid2]: ".concat(d.payload.message))),e.label=5;case 5:return i=!1,[3,3];case 6:return[3,13];case 7:return p=e.sent(),a=!0,s=p,[3,13];case 8:if(e.trys.push([8,,11,12]),!(i&&null!=c.return))return[3,10];return[4,c.return()];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(a)throw s;return[7];case 12:return[7];case 13:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),null}},76862:(e,n,t)=>{"use strict";t.d(n,{b:()=>s});var r=t(66622),i=t(27189),o=t(30758),a=t(53460),l=t(61208);function s(e,n){var t,s,c=(0,a.yB)(),u=(0,l.X)(),d=null!==(s=null==c?void 0:c.client)&&void 0!==s?s:null,p=(0,o.useRef)(null),f=(t=(0,r._)((0,o.useState)(),2)[1],(0,o.useCallback)(function(e){try{t(function(){throw e})}catch(e){}},[]));(0,o.useEffect)(function(){if(p.current&&(p.current.abort(),p.current=null),d&&u){var n=new AbortController;p.current=n;var t=n.signal,r=[];t.addEventListener("abort",function(){var e=[],n=!0,t=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;try{l()}catch(n){e.push(n)}}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}e.length&&(1===e.length?f(e[0]):"undefined"!=typeof AggregateError?f(AggregateError(e,"Multiple errors occurred during cleanup")):f(Error("Multiple errors occurred during cleanup")))});var i=function(e){if(t.aborted)try{e()}catch(e){f(e)}else r.push(e)};try{Promise.resolve(e(d,{session:u,signal:t,addCleanup:i})).then(function(e){e&&i(e)}).catch(function(e){n.abort(),f(e)})}catch(e){throw n.abort(),e}return function(){n.abort()}}},[d,u,f].concat((0,i._)(n)))}},29665:(e,n,t)=>{"use strict";t.d(n,{I:()=>l});var r=t(27189),i=t(30758),o=t(53460),a=t(61208);function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,o.yB)(),l=(0,a.X)();return(0,i.useMemo)(function(){return t&&l?e(t.client,l):null},[t,l].concat((0,r._)(n)))}},61208:(e,n,t)=>{"use strict";t.d(n,{X:()=>s});var r=t(66622),i=t(30758),o=t(8143),a=t(39229),l=t(53460);function s(){var e=(0,l.yB)(),n=(0,r._)((0,i.useState)(null),2),t=n[0],s=n[1];return(0,i.useEffect)(function(){var n=function(e){"created"===e.status?s({id:e.session.id,from:e.session.from,to:e.session.to}):"closed"===e.status&&(0,o.flushSync)(function(){s(null)})};if(e){var t=e.transport.sessions.get(a.wG);return t&&n({status:"created",session:t}),e.transport.addEventListener("sessionStatus",n),function(){s(null),e.transport.removeEventListener("sessionStatus",n)}}},[e]),t}},33351:(e,n,t)=>{"use strict";t.d(n,{$:()=>i,L:()=>o});var r=t(82436);function i(){(0,r.u4)(r.AZ.MODAL_VIEWED,{modalName:"projects_help_dialog"})}function o(e){(0,r.u4)(r.AZ.GIT_PROJECT_FEATURE_USED,e)}},15319:(e,n,t)=>{"use strict";t.d(n,{T:()=>o});var r=t(45009);function i(){var e=(0,r._)(["\n  fragment CreateProjectForkRepl on Repl {\n    id\n    publishedAs\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(30632).J1)(i())},18466:(e,n,t)=>{"use strict";t.d(n,{B:()=>s});var r=t(66622),i=t(30758),o=t(55937),a=t(38943),l=function(e){var n,t,r,i=e.orgId,a=e.repl,l=e.forkSource;return{originId:a.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(r=null===(t=a.deployment)||void 0===t?void 0:null===(n=t.activeRelease)||void 0===n?void 0:n.id)&&void 0!==r?r:void 0,orgId:i,trackingData:{forkSource:l,isOnboarding:!1,isApp:a.publishedAs===o.Q_.App,isTemplate:a.publishedAs===o.Q_.Template}}};function s(e){var n=e.onFork,t=e.onError,o=(0,r._)((0,a.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){n()},onError:function(){t()}}),2),s=o[0],c=o[1].loading;return[(0,i.useCallback)(function(e){var n=e.repl;return s(l({orgId:e.orgId,repl:n,forkSource:e.forkSource}))},[s]),{loading:c}]}},37307:(e,n,t)=>{"use strict";t.d(n,{OI:()=>f,_O:()=>d});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(54828);function s(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s(),l.E),p=(0,o.J1)(c());function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},52537:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y,v:()=>C});var r=t(20837),i=t(43952),o=t(27189),a=t(94086),l=t(25204),s=t.n(l),c=t(78775),u=t(95344),d=t(52757),p=t(24955),f=t(32842),h=t(81243),m=t(31955),g=t(40889),v=t(8367),w=t(53055),y=t(56217),b=v.D.a,S=(0,d.AH)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function Y(e){var n=e.post,t=n.repl,o=n.user,l=t.isTemplate?"Template":"Repl";return(0,a.FD)(v.S,{gap:8,children:[(0,a.FD)(v.S,{row:!0,align:"center",justify:"space-between",children:[(0,a.Y)(v.S,{row:!0,align:"center",children:(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(h.e,{size:24,username:o.username,src:o.image}),(0,a.FD)(v.S,{row:!0,gap:4,children:[(0,a.Y)(g.EY,{multiline:!1,children:o.username}),(0,a.FD)(g.EY,{color:"dimmest",multiline:!1,children:[" ","published a ",l]})]})]})}),(0,a.Y)(y.A,{size:12})]}),(0,a.FD)(m.ui,{css:[f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8),f.wp.position.relative,{border:"1px solid "+p.LU.outlineDimmest}],children:[(0,a.Y)(v.S,{gap:16,children:(0,a.Y)(v.S,{row:!0,gap:16,justify:"space-between",children:(0,a.FD)(v.S,{css:[f.wp.flex.growAndShrink(1)],row:!0,gap:8,align:"start",children:[(0,a.Y)(u.Ay,{iconUrl:t.iconUrl,alt:t.title,size:84,css:[f.wp.backgroundColor.backgroundHigher]}),(0,a.FD)(v.S,{css:[f.wp.flex.growAndShrink(1),f.wp.colWithGap(4)],children:[(0,a.FD)(v.S,{row:!0,children:[(0,a.Y)(s(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,w.z9)(t)),{children:(0,a.Y)(b,{css:[{color:"inherit"},S,f.wp.flex.growAndShrink(1),f.wp.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.Y)(g.EY,{variant:"subheadBig",multiline:!1,children:t.title})})})),t.isTemplate?(0,a.Y)(A,{}):null]}),t.description?(0,a.Y)(g.EY,{color:"dimmer",maxLines:2,multiline:!1,children:t.description}):null]})]})})}),(0,a.Y)(v.S,{css:[f.wp.minHeight(24)],row:!0,gap:8,justify:"space-between",children:(0,a.Y)(c.A,{repl:{id:t.id,publicForkCount:0,likeCount:0}})})]})]})}var A=function(){return(0,a.Y)("span",{css:[f.wp.display.inlineFlex,f.wp.align.center,f.wp.height(24),f.wp.px(8),f.wp.borderRadius(16),f.wp.backgroundColor.yellowDimmest,f.wp.color.yellowStrongest,f.wp.justify.center,f.wp.ml(8),{fontSize:p.LU.fontSizeSmall,lineHeight:p.LU.fontSizeSmall}],children:"Template"})},C=function(){return(0,a.FD)(v.S,{gap:8,css:[{opacity:.5}],children:[(0,a.FD)(v.S,{css:[f.wp.flex.grow(1),f.wp.justify.spaceBetween],row:!0,align:"center",children:[(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(24),f.wp.height(24),f.wp.borderRadius(16)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(126),f.wp.height(12),f.wp.borderRadius(4)]})]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]})]}),(0,a.FD)(v.S,{css:[f.wp.backgroundColor.backgroundDefault,f.wp.width("100%"),f.wp.height(132),f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8)],children:[(0,a.FD)(v.S,{row:!0,gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.height(84),f.wp.width(84),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:12,css:[f.wp.pt(4),f.wp.flex.grow(1)],children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(80),f.wp.height(16),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("100%"),f.wp.height(12),f.wp.borderRadius(4)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("80%"),f.wp.height(12),f.wp.borderRadius(4)]})]})]})]}),(0,a.FD)(v.S,{css:[f.wp.flex.grow(1),f.wp.align.center,f.wp.justify.spaceBetween],row:!0,children:[(0,a.Y)(v.S,{row:!0,gap:16,children:(0,o._)([,,,]).map(function(e,n){return(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(16),f.wp.height(8),f.wp.borderRadius(2)]})]},n)})}),(0,a.Y)(v.S,{row:!0,gap:4,children:(0,o._)([,,]).map(function(e,n){return(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(48),f.wp.height(24),f.wp.borderRadius(16)]},n)})})]})]})]})}},54061:(e,n,t)=>{"use strict";t.d(n,{A:()=>p,r:()=>m});var r=t(66622),i=t(94086),o=t(30758),a=t(24955),l=t(32842),s=t(40172),c=t(8478),u=t(41760),d=t(29032);function p(e){var n=(0,r._)((0,o.useState)(!1),2),t=n[0],a=n[1],l=[],d=[];if(e.variables.length>0){var p=e.variables[0].parentVariableReference,f=!0,h=!1,g=void 0;try{for(var v,w=e.variables[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var y=v.value;y.parentVariableReference===p?l.push(y):d.push(y)}}catch(e){h=!0,g=e}finally{try{f||null==w.return||w.return()}finally{if(h)throw g}}}return(0,i.FD)(i.FK,{children:[(0,i.Y)(c.A,{truncate:!0,level:5,children:"Variables"}),(0,i.FD)(u.T,{align:"stretch",constrainWidth:!0,children:[l.map(function(n){return(0,i.Y)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)}),d.length>0&&(0,i.FD)(i.FK,{children:[(0,i.Y)(s.$n,{variant:"nofill",onClick:function(){return a(function(e){return!e})},text:"See ".concat(t?"Less":"More")}),t&&d.map(function(n){return(0,i.Y)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)})]})]})]})}function f(e){var n=e.variable,t=e.expanded;return n.variablesReference>0?(0,i.Y)("div",{css:[l.wp.transition.snappy,{transform:"rotate(".concat(t?0:-90,"deg)")}],children:(0,i.Y)(d.A,{})}):null}function h(e){var n=e.expanded,t=e.depth,r=e.variable;return 0!==t||"parentVariableReference"in r?(0,i.Y)("div",{css:[l.wp.flex.grow(0),l.wp.flex.shrink(0),l.wp.width(a.LU.space16),l.wp.display.flex,l.wp.align.center,l.wp.justify.end],children:(0,i.Y)(f,{expanded:n,variable:r})}):(0,i.Y)(f,{expanded:n,variable:r})}function m(e){var n=e.depth,t=e.variable,l=e.client,s=(0,r._)((0,o.useState)(!1),2),c=s[0],d=s[1],p=(0,r._)((0,o.useState)([]),2),f=p[0],g=p[1];return(0,o.useEffect)(function(){c&&l.fetchVariables(t.variablesReference).then(function(e){return g(e)},function(){return d(!1)})},[c,l,t.variablesReference]),(0,i.FD)(i.FK,{children:[(0,i.FD)("div",{className:"variable",onClick:function(){t.variablesReference>0&&d(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:a.LU.space32,minHeight:a.LU.space32,cursor:"pointer",color:a.LU.foregroundDimmer,borderRadius:a.LU.borderRadius4,fontSize:a.LU.fontSizeDefault,paddingLeft:"calc(".concat(n," * ").concat(a.LU.space16,")"),fontFamily:a.LU.fontFamilyCode},"&:hover":{backgroundColor:a.LU.backgroundHigher,color:a.LU.foregroundDefault},".label":{fontSize:a.LU.fontSizeDefault,paddingLeft:a.LU.space8,paddingRight:a.LU.space8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.Y)(h,{expanded:c,variable:t,depth:n}),(0,i.FD)("div",{className:"label",children:[t.name,t.type?(0,i.FD)("span",{className:"type",children:[" ",t.type]}):null,""!==t.value&&": "]}),(0,i.Y)("div",{className:"label value",children:(0,i.Y)("pre",{children:t.value})})]}),c?(0,i.Y)(u.T,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.Y)(m,{depth:n+1,variable:e,client:l},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},63048:(e,n,t)=>{"use strict";t.d(n,{n:()=>p,c:()=>f});var r=t(45009),i=t(30632),o=t(22535);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,i.J1)(a()),c=(0,i.J1)(l());function u(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}var p=(0,i.J1)(u(),s),f=(0,i.J1)(d(),o.a,c)},98686:(e,n,t)=>{"use strict";t.d(n,{mb:()=>g,dL:()=>m,cL:()=>v});var r=t(45009),i=t(30632),o=t(85800),a=t(26211);function l(){var e=(0,r._)(["\n  fragment PageTitleRepl on Repl {\n    id\n    title\n    project {\n      id\n      title\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,i.J1)(l()),c=t(98144),u=t(63048),d=t(5601);function p(){var e=(0,r._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    email\n    isAdmin: hasRole(role: ADMIN)\n    ...CrosisContextCurrentUser\n    workspacePreferences\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment ReplAiAuthorizations on ReplAuthorizations {\n    useBasicChat: useAiChat(model: basic) {\n      isAuthorized\n      code\n      message\n    }\n    useAdvancedChat: useAiChat(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,r._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    origin {\n      id\n    }\n    config {\n      isVnc\n      isServer\n      isExtension\n      isAgentRepl\n      isInPlanningPhase\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n    authorizations {\n      ...ReplAiAuthorizations\n    }\n    ...ConvertedToProjectModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}var m=(0,i.J1)(p(),a.N,u.n,d.f,o.yL),g=(0,i.J1)(f()),v=(0,i.J1)(h(),a.c,u.c,s,g,c.LM)},21374:(e,n,t)=>{"use strict";t.d(n,{C:()=>p,j:()=>c});var r=t(94086),i=t(13117),o=t(10168),a=t(32842),l=t(40889),s=t(8367),c=function(e){return e.Welcome="Welcome",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share",e}({}),u=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},d=(0,o.x)({welcome:[a.wp.maxWidth(400)],tooltipContainer:[a.wp.width("100%"),a.wp.center,a.wp.position.relative],textContainer:[a.wp.colWithGap(8),a.wp.width("100%"),a.wp.py(8)]}),p={id:"workspace-desktop-new-user-tour",steps:[{id:"Welcome",isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,r.Y)(s.S,{"data-cy":"workspace-tour-welcome",css:d.welcome,children:(0,r.FD)(l.EY,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,r.Y)("strong",{children:"Apps."}),(0,r.Y)("br",{}),"Let's explore around!"]})})}},{id:"Editor",title:"Code Editor",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("editor"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:"Examples",title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:"Run",title:"Run Button",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("run-button"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Tap the Run button to run your code and see its output."})})]})},advanceOnTargetClick:!0},{id:"Output",title:"Output",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("output"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template youre using."})})]})}},{id:"Sidepane",title:"Sidebar",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("sidebar"),autoPlay:!0,loop:!0}),(0,r.FD)(s.S,{css:d.textContainer,children:[(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Files"})," is where all of your Apps code is."]}),(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,r.Y)(l.EY,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:"Share",title:"Invite & Collaborate",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Invite others to your App to collaborate and work together at the same time."})})]})}}]}},5601:(e,n,t)=>{"use strict";t.d(n,{I:()=>s,f:()=>l});var r=t(45009),i=t(30632);function o(){var e=(0,r._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenProjectsTour2024: tourSeen(name: "workspace-repo-projects-tour")\n    hasSeenSidebarTour2022: tourSeen(name: "workspace-desktop-sidebar-tour")\n    hasSeenWorkspaceTour2021: tourSeen(name: "workspace-desktop-tour")\n    hasSeenWorkspaceTour2022: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenWorkspaceTour2024: tourSeen(name: "workspace-desktop-tour-2024")\n    timeCreated\n  }\n']);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    lesson {\n      id\n    }\n    project {\n      id\n    }\n    config {\n      isInPlanningPhase\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.J1)(o()),s=(0,i.J1)(a())},63314:(e,n,t)=>{"use strict";t.d(n,{F:()=>r,X:()=>i});var r=function(e){return e.Welcome="Welcome",e.Forks="Forks",e.ProjectPane="ProjectPane",e}({}),i={id:"workspace-repo-projects-tour",steps:[{title:"Welcome to your Project",id:"Welcome",content:"Click here to see all forks inside this Project and navigate between them.",hideOverlay:!0},{title:"Project Forks",id:"Forks",content:"Move to a different Repl within this Project, or create a new one",hideTooltip:!0,hideOverlay:!0},{title:"Project Pane",id:"ProjectPane",content:"View your changes, and merge them back into the main Repl when you're ready.",hideOverlay:!0}]}},33170:(e,n,t)=>{"use strict";t.d(n,{Gp:()=>r.jz,IW:()=>r.IW,_t:()=>i._t,ij:()=>i.jz});var r=t(13493),i=t(12169)},64744:(e,n,t)=>{"use strict";t.d(n,{l:()=>l});var r=t(45009),i=t(30632),o=t(8726);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.J1)(a(),o.F)},36741:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(66622),i=t(94086),o=t(30758),a=t(41155),l=t(34805),s=t(95344),c=t(24955),u=t(10168),d=t(32842),p=t(40172),f=t(28354),h=t(76985),m=t(93532),g=t(40889),v=t(8367),w=t(8351),y=t(68753),b=(0,u.x)({repls:[d.wp.maxHeight("60vh"),d.wp.overflow("auto"),{"& > div":[d.wp.py(8),{borderTop:"1px solid "+c.LU.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+c.LU.outlineDimmest}}],row:[d.wp.colWithGap(8)]}),S=function(e){var n,t=e.repl,l=e.onConfirmedChange,c=(0,r._)((0,o.useState)(""),2),u=c[0],d=c[1],p=(null===(n=t.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?t.hostingDeployment:null,h=(0,o.useRef)(!1),w=(null==p?void 0:p.replitAppSubdomain)?p.replitAppSubdomain:t.title;return(0,i.FD)(v.S,{gap:8,children:[(0,i.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,i.Y)(s.Ay,{size:24,iconUrl:t.iconUrl,alt:""}),(0,i.Y)(g.EY,{height:"singleLine",multiline:!1,children:t.title}),p?(0,i.Y)(a.y,{deployment:p}):null]},t.id),p?(0,i.FD)(i.FK,{children:[(0,i.Y)(m.N,{icon:(0,i.Y)(y.A,{}),colorway:"red",text:"This App has been deployed. If you delete this App, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(w)}),(0,i.Y)(f.pd,{placeholder:"Type here",value:u,onChange:function(e){var n=e.currentTarget.value;d(n);var t=n.trim()===w;t!==h.current&&l(t),h.current=t}})]}):null]})};let Y=function(e){var n=e.selectedRepls,t=e.isOpen,a=e.onClose,s=e.onDelete,c=e.deleting,u=n.length,d=(0,l.A)("Repl",u),f=n.filter(function(e){var n;return(null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"}).length,m=(0,l.A)("Deployment",f),y=f>0?" & ".concat(f>1?f+" ":""," ").concat(m):"",Y=(0,r._)((0,o.useState)(0),2),A=Y[0],C=Y[1];return(0,o.useEffect)(function(){t||C(0)},[t]),(0,i.Y)(h.a,{isOpen:t,onRequestClose:a,children:(0,i.FD)(v.S,{gap:16,children:[(0,i.FD)(g.Y9,{variant:"subheadBig",level:2,children:["Delete ",d,f>0?" & ".concat(m):"","?"]}),(0,i.Y)(g.EY,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Apps may take a few minutes to finish deleting."}),(0,i.Y)(v.S,{css:b.repls,children:n.map(function(e){return(0,i.Y)(S,{css:b.row,repl:e,onConfirmedChange:function(e){return C(function(n){return n+(e?1:-1)})}},e.id)})}),(0,i.FD)(v.S,{row:!0,gap:12,justify:"end",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:a,disabled:c}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(w.A,{}),onClick:s,disabled:c||A<f,text:"Yes, delete ".concat(u>1?u+" ":""," ").concat(d).concat(y),colorway:"negative"})]})]})})}},22611:(e,n,t)=>{"use strict";t.d(n,{Y:()=>d});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(30758),s=t(73963),c=t(10168),u=t(32842),d=(0,l.forwardRef)(function(e,n){var t=e.children,l=(0,o._)(e,["children"]);return(0,a.Y)(s.Y,(0,i._)((0,r._)({},l),{ref:n,css:p.group,children:t}))}),p=(0,c.x)({group:[u.wp.display.flex,u.wp.flex.row,u.wp.gap(1),u.wp.align.stretch,{"> :not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> :not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}]})},74910:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(20837),i=t(43952),o=t(94086),a=t(52757),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},s=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),c=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");let d=function(e){var n=e.height,t=void 0===n?24:n,a=e.color,d=e.slow,p=void 0!==d&&d,f={width:84,height:64,fill:void 0===a?"#F26207":a,rx:12};return(0,o.FD)("svg",{width:t/1.2,height:t,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"loading-animation-title",children:[(0,o.Y)("title",{id:"loading-animation-title",children:"loading animation"}),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:s}]},f),{x:8,y:8})),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:c}]},f),{x:108,y:88})),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:u}]},f),{x:8,y:168}))]})}},74893:(e,n,t)=>{"use strict";t.d(n,{K:()=>c});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(98541),s=t(8367).D.button;function c(e){var n=e.iconLeft,t=e.iconRight,c=e.text,u=e.innerRef,d=e.colorway,p=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.FD)(s,(0,i._)((0,r._)({ref:u},p),{css:[(0,l.w)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.Y)("span",{children:c}),t]}))}},53536:(e,n,t)=>{"use strict";t.d(n,{d:()=>y});var r=t(94086),i=t(25204),o=t.n(i),a=t(30758),l=t(24955),s=t(88966),c=t(2298),u=t(32842),d=t(95235),p=t(31955),f=t(40889),h=t(8367),m=t(70953),g=t(42022),v=h.D.a,w=h.D.button,y=(0,a.forwardRef)(function(e,n){var t=e.className,i=e.colorway,a=e.closable,y=e.iconLeft,b=e.iconRight,S=e.text,Y=e.closeAction,A=e.textAlign,C={container:[u.wp.flex.growAndShrink(1),A?u.wp.textAlign[A]:u.wp.textAlign.center]},x=(0,r.FD)(r.FK,{children:[(0,r.Y)(g.Z_,{size:16,children:y}),(0,r.Y)(f.EY,{css:C.container,variant:"small",children:S}),(0,r.Y)(g.Z_,{size:16,children:b})]}),_=i?l.ky[i].default:l.LU.accentPrimaryDefault,k=[u.wp.rowWithGap(4),u.wp.align.center,u.wp.p(4),u.wp.pl(8),u.wp.borderRadius(),u.wp.flex.growAndShrink(1),i?(0,s.KU)(i):c.b.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+_}}];return(0,r.FD)(h.S,{css:k,children:["href"in e?(0,r.Y)(o(),{legacyBehavior:!0,as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.Y)(v,{ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:[u.wp.reset.button,u.wp.rowWithGap(8),u.wp.center,u.wp.flex.growAndShrink(1)],children:x})}):(0,r.Y)(w,{ref:n,className:t,onClick:e.onClick,type:e.type,css:[u.wp.reset.button,u.wp.rowWithGap(8),u.wp.center,u.wp.flex.growAndShrink(1),u.wp.cursor.pointer],children:x}),a?(0,r.Y)(p.ui,{elevated:!0,css:[u.wp.flex.grow(0),{background:"transparent"}],children:(0,r.Y)(d.K0,{alt:"Close",tooltipBehavior:"hidden",colorway:i,onClick:Y,children:(0,r.Y)(m.A,{})})}):null]})});y.displayName="StatusBannerButton"},95570:(e,n,t)=>{"use strict";t.d(n,{p:()=>A});var r=t(72275),i=t(20837),o=t(94086),a=t(77325),l=t(24955),s=t(10168),c=t(1478),u=t(32842),d=t(40172),p=t(95235),f=t(40889),h=t(8367),m=t(16021),g=t(9735),v=t(50656),w=t(70953),y=(0,c.v)(["padding","backgroundColor","borderColor"]),b=y.cssVars,S=y.styleTokens,Y=(0,s.x)({root:[u.wp.position.relative,u.wp.border({width:1,style:"solid",color:S.borderColor}),u.wp.pb(12),u.wp.borderRadius(),u.wp.shadow(2),u.wp.flex.column,{padding:S.padding,backgroundColor:S.backgroundColor,gap:S.padding}],closeIconButton:[u.wp.position.absolute,u.wp.top(S.padding),u.wp.right(S.padding)],dot:[u.wp.borderRadius("full"),u.wp.width(l.LU.space8),u.wp.height(l.LU.space8)]});function A(e){var n,t=e.title,a=e.subtitle,s=e.icon,c=e.content,u=e.containerStyle,y=e.colorway,S=void 0===y?"primary":y,A=e.totalSteps,x=void 0===A?1:A,_=e.currentStepIndex,k=void 0===_?0:_,D=e.onDismiss,E=e.onCurrentStepChange,R=e.cypressCloseData,I=e.compact,F=e.hideCloseButton,T=void 0!==F&&F,P=e.hideNavigation,L=e.doneText,U=!1===S?void 0:S,N=k>=x-1;return(0,o.FD)(h.S,{css:Y.root,style:(0,i._)((n={},(0,r._)(n,b.padding,void 0===I||I?l.LU.space8:l.LU.space16),(0,r._)(n,b.backgroundColor,U?l.ky[U].dimmest:l.LU.backgroundDefault),(0,r._)(n,b.borderColor,U?l.ky[U].dimmer:l.LU.backgroundHighest),(0,r._)(n,"paddingRight",t||T?void 0:l.LU.space32),n),u),children:[T?null:(0,o.Y)(p.K0,{alt:"Close",colorway:U,css:Y.closeIconButton,onClick:D,dataCy:R,children:(0,o.Y)(w.A,{})}),t?(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[s?(0,o.Y)(s,{}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"end",children:[(0,o.Y)(f.EY,{variant:"subheadDefault",multiline:!1,children:t}),a?(0,o.Y)(f.EY,{variant:"text",color:"dimmest",multiline:!1,css:{transform:"translateY(1.5px)"},children:a}):null]})]}):null,(0,o.Y)(h.S,{children:"function"==typeof c?(0,o.Y)(c,{}):(0,o.Y)(f.EY,{children:c})}),x>1&&E&&!(void 0!==P&&P)?(0,o.FD)(h.S,{row:!0,align:"center",justify:"space-between",children:[(0,o.Y)(d.$n,{css:{visibility:k<=0?"hidden":void 0},colorway:U,text:"Back",iconLeft:(0,o.Y)(g.A,{}),onClick:function(){return E(k-1)}}),(0,o.Y)(C,{colorway:U,total:x,current:k}),(0,o.Y)(d.$n,{"data-autofocus":!0,colorway:N?"primary":U,text:N?void 0===L?"Done":L:"Next",iconLeft:N?(0,o.Y)(m.A,{}):(0,o.Y)(v.A,{}),onClick:function(){return N?D():E(k+1)}})]}):null]})}function C(e){var n=e.total,t=e.current,r=e.colorway;return(0,o.FD)(h.S,{children:[(0,o.Y)(a.s,{children:(0,o.Y)("progress",{value:t+1,max:n,"aria-label":"Step"})}),(0,o.Y)(h.S,{"aria-hidden":!0,row:!0,gap:8,children:Array(n).fill(0).map(function(e,n){return(0,o.Y)(h.S,{style:{backgroundColor:n===t?r?l.ky[r].stronger:l.LU.foregroundDimmest:r?l.ky[r].dimmer:l.LU.outlineDimmest},css:Y.dot},n)})})]})}},54718:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9 2.25a.75.75 0 0 1 .712.513L15 18.628l2.288-6.865A.75.75 0 0 1 18 11.25h4a.75.75 0 0 1 0 1.5h-3.46l-2.828 8.487a.75.75 0 0 1-1.423 0L9 5.372l-2.288 6.865A.75.75 0 0 1 6 12.75H2a.75.75 0 0 1 0-1.5h3.46l2.828-8.487A.75.75 0 0 1 9 2.25Z",clipRule:"evenodd"})}))}},79437:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M16.868 4.705h-3.365l6.133 15.51H23l-6.132-15.51Zm-9.736 0L1 20.215h3.436l1.265-3.245h6.418l1.241 3.245h3.436l-6.132-15.51H7.132Zm-.334 9.377 2.1-5.44 2.1 5.44h-4.2Z"})}))}},83515:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(20837),i=t(43952),o=t(94086),a=t(24955),l=t(42022);function s(e){return(0,o.FD)(l.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7329_267)",children:[(0,o.Y)("path",{fill:a.LU.tealDefault,d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z"}),(0,o.Y)("path",{fill:a.LU.tealStronger,d:"M11.143 12a3.429 3.429 0 1 0-6.857 0 3.429 3.429 0 0 0 6.857 0Z"}),(0,o.Y)("path",{fill:"url(#paint0_radial_7329_267)",d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z",opacity:".5"}),(0,o.Y)("path",{fill:"url(#paint1_radial_7329_267)",d:"M7.714 8.571a3.429 3.429 0 1 1 0 6.858 3.429 3.429 0 0 1 0-6.858Z",opacity:".5"})]}),(0,o.FD)("defs",{children:[(0,o.FD)("radialGradient",{id:"paint0_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.762 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.FD)("radialGradient",{id:"paint1_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.763 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.Y)("clipPath",{id:"clip0_7329_267",children:(0,o.Y)("path",{fill:"#fff",d:"M0 .274C0 .123.123 0 .274 0h23.452c.151 0 .274.123.274.274v23.452a.274.274 0 0 1-.274.274H.274A.274.274 0 0 1 0 23.726V.274Z"})})]})]}))}},50024:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},84528:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-12 4a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},81603:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8 1.25a.75.75 0 0 1 .75.75v1.25h6.5V2a.75.75 0 0 1 1.5 0v1.25H19A2.75 2.75 0 0 1 21.75 6v14A2.75 2.75 0 0 1 19 22.75H5A2.75 2.75 0 0 1 2.25 20V6A2.75 2.75 0 0 1 5 3.25h2.25V2A.75.75 0 0 1 8 1.25Zm-.75 3.5H5c-.69 0-1.25.56-1.25 1.25v3.25h16.5V6c0-.69-.56-1.25-1.25-1.25h-2.25V6a.75.75 0 0 1-1.5 0V4.75h-6.5V6a.75.75 0 0 1-1.5 0V4.75Zm13 6H3.75V20c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25v-9.25Z",clipRule:"evenodd"})}))}},95202:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.012 18.902h1.784l1.413-3.98H9.89l1.413 3.98h1.783L7.928 4.852H6.172l-5.16 14.05Zm8.343-5.489-2.25-6.339h-.11l-2.25 6.34h4.61ZM16.34 18.772c.544.251 1.15.377 1.818.377.613 0 1.132-.091 1.557-.274.425-.183.766-.405 1.022-.666.257-.26.44-.505.55-.734h.082v1.427h1.619v-6.943c0-.837-.137-1.505-.412-2.004-.274-.498-.62-.87-1.036-1.118a3.733 3.733 0 0 0-1.283-.487 6.416 6.416 0 0 0-1.166-.123c-.53 0-1.07.073-1.62.22a4.114 4.114 0 0 0-1.509.754c-.457.357-.823.855-1.098 1.495l1.537.55c.179-.385.487-.746.927-1.085.439-.338 1.045-.507 1.818-.507.745 0 1.3.187 1.667.562.37.375.556.901.556 1.578v.055c0 .26-.094.444-.282.549-.183.105-.476.18-.878.226-.398.041-.917.103-1.557.186-.49.064-.977.15-1.462.26-.48.105-.919.266-1.317.48a2.518 2.518 0 0 0-.954.892c-.238.376-.356.865-.356 1.469 0 .686.16 1.271.48 1.756.32.48.752.848 1.297 1.105Zm3.684-1.455c-.44.252-.979.378-1.62.378-.644 0-1.177-.142-1.598-.426-.416-.288-.624-.713-.624-1.276 0-.412.11-.736.33-.974.223-.243.516-.423.877-.542.366-.124.76-.213 1.18-.268.174-.023.4-.05.68-.082.283-.037.574-.078.87-.124.303-.05.568-.107.797-.171.233-.069.384-.144.453-.227v1.482a2.569 2.569 0 0 1-1.345 2.23Z",clipRule:"evenodd"})}))}},89715:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}},47177:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}},68522:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 0 1 1.06-1.06l3.72 3.72V1A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .53.22l5 5a.75.75 0 1 1-1.06 1.06l-3.72-3.72V23a.75.75 0 0 1-1.5 0v-7.19l-3.72 3.72a.75.75 0 0 1-1.06-1.06l5-5a.75.75 0 0 1 .53-.22Z",clipRule:"evenodd"})}))}},61990:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 8.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5Zm-4.7 2.562a4.751 4.751 0 0 1 9.401.004.748.748 0 0 1 .309-.066h5.95a.75.75 0 1 1 0 1.5h-5.95a.748.748 0 0 1-.309-.066 4.751 4.751 0 0 1-9.402.004.747.747 0 0 1-.299.062H1.05a.75.75 0 0 1 0-1.5H7c.106 0 .208.022.3.062Z",clipRule:"evenodd"})}))}},71594:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M14.47 20.53a.75.75 0 0 0 1.06 0l5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06l3.72 3.72H8A3.25 3.25 0 0 1 4.75 11V4a.75.75 0 0 0-1.5 0v7A4.75 4.75 0 0 0 8 15.75h10.19l-3.72 3.72a.75.75 0 0 0 0 1.06Z",clipRule:"evenodd"})}))}},29346:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.53 3.47a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 0 0 0 1.06l5 5a.75.75 0 0 0 1.06-1.06L5.81 9.75H16A3.25 3.25 0 0 1 19.25 13v7a.75.75 0 0 0 1.5 0v-7A4.75 4.75 0 0 0 16 8.25H5.81l3.72-3.72a.75.75 0 0 0 0-1.06Z",clipRule:"evenodd"})}))}},17504:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9 .25a.75.75 0 0 1 .75.75v2.25h4.5V1a.75.75 0 0 1 1.5 0v2.25H18A2.75 2.75 0 0 1 20.75 6v2.25H23a.75.75 0 0 1 0 1.5h-2.25v3.5H23a.75.75 0 0 1 0 1.5h-2.25V18A2.75 2.75 0 0 1 18 20.75h-2.25V23a.75.75 0 0 1-1.5 0v-2.25h-4.5V23a.75.75 0 0 1-1.5 0v-2.25H6A2.75 2.75 0 0 1 3.25 18v-3.25H1a.75.75 0 0 1 0-1.5h2.25v-3.5H1a.75.75 0 0 1 0-1.5h2.25V6A2.75 2.75 0 0 1 6 3.25h2.25V1A.75.75 0 0 1 9 .25Zm-3 4.5c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h12c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H6ZM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75V9Zm1.5.75v4.5h4.5v-4.5h-4.5Z",clipRule:"evenodd"})}))}},16882:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.026 3.243c-.245.269-.388.756-.388 1.767v3.083c0 .922-.208 1.894-.948 2.72-.429.48-1.006.876-1.751 1.187.745.312 1.323.708 1.752 1.189.74.828.947 1.803.947 2.729V19c0 1.005.142 1.49.388 1.756.232.254.732.493 1.974.493a.75.75 0 0 1 0 1.5c-1.346 0-2.403-.241-3.08-.978-.663-.723-.782-1.738-.782-2.77v-3.084c0-.7-.153-1.268-.566-1.73-.426-.478-1.22-.946-2.717-1.24a.75.75 0 0 1-.605-.737v-.422a.75.75 0 0 1 .605-.736c1.497-.295 2.291-.764 2.717-1.24.413-.462.566-1.026.566-1.72V5.01c0-1.038.119-2.056.782-2.78.677-.739 1.734-.98 3.08-.98a.75.75 0 0 1 0 1.5c-1.242 0-1.741.24-1.974.493ZM14.25 2a.75.75 0 0 1 .75-.75c1.346 0 2.403.241 3.08.98.663.724.782 1.742.782 2.78v3.083c0 .694.153 1.258.566 1.72.426.476 1.22.945 2.717 1.24a.75.75 0 0 1 .605.736v.422a.75.75 0 0 1-.605.736c-1.497.295-2.291.763-2.717 1.24-.413.463-.566 1.03-.566 1.73v3.084c0 1.033-.12 2.048-.783 2.771-.677.737-1.733.978-3.079.978a.75.75 0 0 1 0-1.5c1.242 0 1.742-.24 1.974-.492.246-.268.388-.752.388-1.757v-3.083c0-.926.208-1.901.947-2.73.43-.48 1.007-.876 1.752-1.188-.745-.311-1.322-.707-1.751-1.187-.74-.826-.948-1.798-.948-2.72V5.01c0-1.011-.142-1.498-.388-1.767-.233-.254-.732-.493-1.974-.493a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},1936:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.436 3.506A.75.75 0 0 1 8 3.25h13A2.75 2.75 0 0 1 23.75 6v12A2.75 2.75 0 0 1 21 20.75H8a.75.75 0 0 1-.564-.256l-7-8a.75.75 0 0 1 0-.988l7-8ZM8.34 4.75 1.997 12l6.343 7.25H21A1.25 1.25 0 0 0 22.25 18V6A1.25 1.25 0 0 0 21 4.75H8.34Zm3.13 3.72a.75.75 0 0 1 1.06 0L15 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L16.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L15 13.06l-2.47 2.47a.75.75 0 1 1-1.06-1.06L13.94 12l-2.47-2.47a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},65094:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18.5 6a1 1 0 0 1 1 1v13h-2V7a1 1 0 0 1 1-1ZM15.243 6.03a1 1 0 0 1 .727 1.213l-3.242 12.97-1.94-.485 3.242-12.97a1 1 0 0 1 1.213-.728ZM11.385 6.077a1 1 0 0 1 .538 1.308L6.538 20.308l-1.846-.77 5.385-12.923a1 1 0 0 1 1.308-.538ZM5.47 3.47a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 0 1-1.06-1.06l.72-.72H3a.75.75 0 0 1 0-1.5h3.19l-.72-.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},67324:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M18 2.5H6A1.5 1.5 0 0 0 4.5 4v16A1.5 1.5 0 0 0 6 21.5h12a1.5 1.5 0 0 0 1.5-1.5V4A1.5 1.5 0 0 0 18 2.5ZM6 1a3 3 0 0 0-3 3v16a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H6Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16 17.25c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75ZM16 9.5c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M12 13.5c-.414 0-.75-.316-.75-.706V6.206c0-.39.336-.706.75-.706s.75.316.75.706v6.588c0 .39-.336.706-.75.706Z",clipRule:"evenodd"})]}))}},2189:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M5.25 16.75a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM17.25 15.25a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 11.618c0-.298.048-.594.144-.877L3.62 4.123A2.75 2.75 0 0 1 6.226 2.25h11.548c1.18 0 2.23.754 2.606 1.873l2.227 6.618c.095.283.143.579.143.877V19A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19v-7.382ZM6.226 3.75h11.548a1.25 1.25 0 0 1 1.184.851l2.227 6.619c.043.128.065.263.065.398v.132H2.75v-.132c0-.135.022-.27.065-.398L5.042 4.6a1.25 1.25 0 0 1 1.184-.851Zm-3.476 9.5V19c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25v-5.75H2.75Z",clipRule:"evenodd"})]}))}},58506:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.25 5a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}},14019:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .53.22l5 5a.75.75 0 0 1-1.06 1.06l-3.72-3.72V10a.75.75 0 0 1-1.5 0V2.81L7.53 6.53a.75.75 0 0 1-1.06-1.06l5-5A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V14a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},4320:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M12.56 10.72a.75.75 0 0 0-1.06 0L8 14.22a.75.75 0 1 0 1.06 1.06l2.22-2.22v5.19a.75.75 0 0 0 1.5 0v-5.19L15 15.28a.75.75 0 0 0 1.06-1.06l-3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M6 1.25A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20V8a.75.75 0 0 0-.22-.53l-6-6a.75.75 0 0 0-.53-.22H6Zm-.884 1.866A1.25 1.25 0 0 1 6 2.75h7.25V8c0 .414.336.75.75.75h5.25V20A1.25 1.25 0 0 1 18 21.25H6A1.25 1.25 0 0 1 4.75 20V4c0-.332.132-.65.366-.884ZM18.19 7.25 14.75 3.81v3.44h3.44Z",clipRule:"evenodd"})]}))}},81099:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 8.25h2.325a3.751 3.751 0 0 0 7.35 0h9.825a.75.75 0 0 0 0-1.5h-9.825a3.751 3.751 0 0 0-7.35 0H2.25a.75.75 0 0 0 0 1.5Zm6-3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 15.75a.75.75 0 0 0 0 1.5h9.825a3.751 3.751 0 0 0 7.35 0h2.325a.75.75 0 0 0 0-1.5h-2.325a3.751 3.751 0 0 0-7.35 0H2.25Zm11.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z",clipRule:"evenodd"})}))}},24572:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4 3.75A1.25 1.25 0 0 0 2.75 5v14A1.25 1.25 0 0 0 4 20.25h16A1.25 1.25 0 0 0 21.25 19V8A1.25 1.25 0 0 0 20 6.75h-9a.75.75 0 0 1-.624-.334L8.599 3.75H4Zm-1.945-.695A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v11A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19V5c0-.73.29-1.429.805-1.945ZM12 10.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V17a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V11a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},44718:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M10.47 9.97a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 1 1-1.06 1.06l-2.22-2.22v5.19a.75.75 0 0 1-1.5 0v-5.19l-2.22 2.22a.75.75 0 0 1-1.06-1.06l3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.055 3.055A2.75 2.75 0 0 1 3 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H19A2.75 2.75 0 0 1 21.75 8v11A2.75 2.75 0 0 1 19 21.75H3A2.75 2.75 0 0 1 .25 19V5c0-.73.29-1.429.805-1.945ZM3 3.75A1.25 1.25 0 0 0 1.75 5v14A1.25 1.25 0 0 0 3 20.25h16A1.25 1.25 0 0 0 20.25 19V8A1.25 1.25 0 0 0 19 6.75h-9a.75.75 0 0 1-.624-.334L7.599 3.75H3Z",clipRule:"evenodd"})]}))}},47270:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6ZM6 3.75A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6ZM6.25 8A.75.75 0 0 1 7 7.25h10a.75.75 0 0 1 0 1.5H7A.75.75 0 0 1 6.25 8Zm0 4a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Zm0 4a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},90365:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M7 4.25c-.69 0-1.25.56-1.25 1.25v13.333c0 .69.56 1.25 1.25 1.25h10c.69 0 1.25-.56 1.25-1.25v-7.292a.625.625 0 1 1 1.25 0v7.292a2.5 2.5 0 0 1-2.5 2.5H7a2.5 2.5 0 0 1-2.5-2.5V5.5A2.5 2.5 0 0 1 7 3h4.375a.625.625 0 1 1 0 1.25H7Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M15.333 16.541c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625ZM15.333 10.083c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M12 13.416c-.345 0-.625-.263-.625-.588v-5.49c0-.325.28-.588.625-.588s.625.263.625.588v5.49c0 .325-.28.588-.625.588ZM17.889 1.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}},83702:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M6.196 4.696a1.475 1.475 0 0 1 1.043-.432h2.897a.632.632 0 0 0 0-1.264H7.239A2.74 2.74 0 0 0 4.5 5.74v12.642a2.74 2.74 0 0 0 2.74 2.74h11.378c.35 0 .632-.283.632-.632v-8.534a.738.738 0 0 0-1.475 0v3.687H7.24a2.74 2.74 0 0 0-1.475.431V5.74c0-.39.156-.766.432-1.043ZM7.4 17.12h10.376v2.528H7.399a1.52 1.52 0 0 1-1.007-.37 1.197 1.197 0 0 1-.417-.894c0-.335.15-.657.417-.894a1.52 1.52 0 0 1 1.007-.37Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16.389 2.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}},40940:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.53 5.47a.75.75 0 0 1 0 1.06L3.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0ZM19.5 9.5a.75.75 0 0 1 1.06 0l1.97 1.97a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06-1.06L20.94 12l-1.44-1.44a.75.75 0 0 1 0-1.06ZM14.889 3.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})}))}},32401:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.27 1.27 0 0 0 20.25 15v-4a.75.75 0 0 1 1.5 0v4A2.77 2.77 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5A2.75 2.75 0 0 1 5 2.25h8a.75.75 0 0 1 0 1.5H5Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M18.438 1.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 1.8Z",clipRule:"evenodd"})]}))}},38253:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M10.64 2.354A9.75 9.75 0 1 1 2.803 15.25a.75.75 0 0 1 1.414-.498 8.25 8.25 0 1 0 1.937-8.564L2.894 9.25H7a.75.75 0 0 1 0 1.5H1A.75.75 0 0 1 .25 10V4a.75.75 0 0 1 1.5 0v4.266l3.368-3.165a9.75 9.75 0 0 1 5.522-2.747ZM12 6.25a.75.75 0 0 1 .75.75v4.932l3.666 2.444a.75.75 0 1 1-.832 1.248l-4-2.667a.75.75 0 0 1-.334-.624V7a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},73013:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.24 3.25h9.52a2.751 2.751 0 0 1 2.462 1.526l3.449 6.888a.75.75 0 0 1 .079.336v6A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18v-6a.75.75 0 0 1 .08-.336l3.448-6.888A2.75 2.75 0 0 1 7.24 3.25Zm0 1.5a1.25 1.25 0 0 0-1.118.694l-.001.002-2.907 5.804H8a.75.75 0 0 1 .624.334l1.777 2.666H13.6l1.777-2.666A.75.75 0 0 1 16 11.25h4.786l-2.907-5.804v-.002a1.25 1.25 0 0 0-1.119-.694m4.49 8h-4.849l-1.777 2.666a.75.75 0 0 1-.624.334h-4a.75.75 0 0 1-.624-.334L7.599 12.75H2.75V18A1.25 1.25 0 0 0 4 19.25h16A1.25 1.25 0 0 0 21.25 18v-5.25Zm-4.49-8H7.24h9.52Z",clipRule:"evenodd"})}))}},40182:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 6A2.75 2.75 0 0 1 4 3.25h16A2.75 2.75 0 0 1 22.75 6v12A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18V6ZM4 4.75c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H4ZM4.25 8A.75.75 0 0 1 5 7.25h2a.75.75 0 0 1 0 1.5H5A.75.75 0 0 1 4.25 8Zm5 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1A.75.75 0 0 1 9.25 8Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm-13 4a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1-.75-.75Zm-9 4a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},1763:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M11.665 1.33a.75.75 0 0 1 .67 0l10 5a.75.75 0 0 1 0 1.34l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1 0-1.34l10-5ZM3.677 7 12 11.162 20.323 7 12 2.839 3.677 7ZM1.33 11.665a.75.75 0 0 1 1.006-.336L12 16.162l9.665-4.833a.75.75 0 0 1 .67 1.342l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1-.336-1.006Zm0 5a.75.75 0 0 1 1.006-.336L12 21.162l9.665-4.833a.75.75 0 0 1 .67 1.342l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1-.336-1.006Z",clipRule:"evenodd"})}))}},47118:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7 2.25a.75.75 0 0 1 .692.462l5 12a.75.75 0 0 1-1.384.577L9.72 11.48H4.28l-1.587 3.808a.75.75 0 0 1-1.384-.578l5-12A.75.75 0 0 1 7 2.25ZM4.904 9.98h4.192L7 4.95 4.904 9.98ZM14.25 8a.75.75 0 0 1 .75-.75h4A3.75 3.75 0 0 1 21.25 14 3.75 3.75 0 0 1 19 20.75h-4a.75.75 0 0 1-.75-.75V8Zm1.5 6.75v4.5H19a2.25 2.25 0 0 0 0-4.5h-3.25Zm3.25-1.5a2.25 2.25 0 0 0 0-4.5h-3.25v4.5H19Z",clipRule:"evenodd"})}))}},56984:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M5.25 4.125C5.25 3.504 5.754 3 6.375 3h5.25c.621 0 1.125.504 1.125 1.125V9H6.375A1.125 1.125 0 0 1 5.25 7.875v-3.75ZM12.75 9h6.375c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125H12.75V9ZM5.25 16.125c0-.621.504-1.125 1.125-1.125h6.375v4.875c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-3.75Z"})}))}},66118:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M11.863 2.632a.75.75 0 0 1-.05.814 6.25 6.25 0 0 0 8.741 8.74.75.75 0 0 1 1.193.673A9.749 9.749 0 1 1 11.14 2.253a.75.75 0 0 1 .722.379ZM9.747 4.036a8.25 8.25 0 1 0 10.217 10.217A7.75 7.75 0 0 1 9.747 4.036Z",clipRule:"evenodd"})}))}},8631:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.75 5.646a2.751 2.751 0 1 0-1.5 0V6.5A2.75 2.75 0 0 0 5 9.25h6.25v2H7.2a1.95 1.95 0 0 0-1.95 1.95v6a1.95 1.95 0 0 0 1.95 1.95h4.05v.9H9.6a.75.75 0 0 0 0 1.5h4.8a.75.75 0 0 0 0-1.5h-1.65v-.9h4.05a1.95 1.95 0 0 0 1.95-1.95v-6a1.95 1.95 0 0 0-1.95-1.95h-4.05v-2H19a2.75 2.75 0 0 0 2.75-2.75v-.854a2.751 2.751 0 1 0-1.5 0V6.5c0 .69-.56 1.25-1.25 1.25h-6.25V5.646a2.751 2.751 0 1 0-1.5 0V7.75H5c-.69 0-1.25-.56-1.25-1.25v-.854ZM1.75 3a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0ZM21 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM13.25 3a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.2 12.75a.45.45 0 0 0-.45.45v6c0 .248.201.45.45.45h9.6a.45.45 0 0 0 .45-.45v-6a.45.45 0 0 0-.45-.45H7.2Z",clipRule:"evenodd"})}))}},80149:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M1 6.359C1 3.399 3.4 1 6.359 1h11.282C20.601 1 23 3.4 23 6.359v11.282C23 20.601 20.6 23 17.641 23H6.359C3.399 23 1 20.6 1 17.641V6.359Zm5.359-3.667A3.667 3.667 0 0 0 2.692 6.36v11.282a3.667 3.667 0 0 0 3.667 3.667h11.282a3.667 3.667 0 0 0 3.667-3.667V6.359a3.667 3.667 0 0 0-3.667-3.667H6.359Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M10.65 10.73H6.536V9.708h1.59v-3.96h-.075L6.85 7.32l-.812-.635L7.45 4.825h1.946v4.882h1.252v1.024ZM15.723 10.832c-1.582 0-2.31-1.125-2.31-3.054 0-1.93.728-3.055 2.31-3.055s2.31 1.125 2.31 3.055c0 1.929-.728 3.054-2.31 3.054Zm0-.998c.753 0 1.015-.567 1.015-1.506v-1.1c0-.94-.262-1.506-1.015-1.506-.753 0-1.015.566-1.015 1.506v1.1c0 .939.262 1.506 1.015 1.506Zm0-1.557c-.39 0-.525-.178-.525-.406v-.186c0-.229.136-.407.525-.407.39 0 .525.178.525.407v.186c0 .228-.136.406-.525.406ZM8.28 19.294c-1.582 0-2.31-1.125-2.31-3.055 0-1.929.728-3.054 2.31-3.054 1.583 0 2.31 1.125 2.31 3.054 0 1.93-.727 3.055-2.31 3.055Zm0-.999c.753 0 1.016-.567 1.016-1.506v-1.1c0-.939-.263-1.506-1.016-1.506s-1.015.567-1.015 1.506v1.1c0 .94.262 1.506 1.015 1.506Zm0-1.557c-.389 0-.524-.177-.524-.406v-.186c0-.228.135-.406.524-.406.39 0 .525.178.525.406v.186c0 .229-.136.406-.525.406ZM18.092 19.192H13.98V18.17h1.59v-3.96h-.075l-1.202 1.573-.812-.634 1.413-1.862h1.946v4.883h1.252v1.023Z"})]}))}},12219:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M17.5 18.75c.69 0 1.25-.56 1.25-1.25v-11c0-.69-.56-1.25-1.25-1.25h-11c-.69 0-1.25.56-1.25 1.25v6.25a.75.75 0 0 1-1.5 0V6.5A2.75 2.75 0 0 1 6.5 3.75h11a2.75 2.75 0 0 1 2.75 2.75v11a2.75 2.75 0 0 1-2.75 2.75h-6.25a.75.75 0 0 1 0-1.5h6.25Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-9.97 9.97a.75.75 0 0 1-1.06-1.06l9.97-9.97H9A.75.75 0 0 1 8.25 9Z",clipRule:"evenodd"})]}))}},3559:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M22.28 9.823a5.979 5.979 0 0 0-.514-4.911 6.047 6.047 0 0 0-6.513-2.901A5.981 5.981 0 0 0 10.743 0a6.048 6.048 0 0 0-5.768 4.186 5.981 5.981 0 0 0-3.998 2.9 6.049 6.049 0 0 0 .744 7.09 5.978 5.978 0 0 0 .513 4.911 6.047 6.047 0 0 0 6.513 2.901 5.976 5.976 0 0 0 4.51 2.01 6.048 6.048 0 0 0 5.77-4.19 5.982 5.982 0 0 0 3.999-2.9 6.05 6.05 0 0 0-.746-7.088v.002ZM13.257 22.43a4.483 4.483 0 0 1-2.879-1.041c.037-.02.1-.055.142-.08l4.779-2.76a.777.777 0 0 0 .393-.68v-6.738l2.02 1.167a.07.07 0 0 1 .039.055v5.58a4.503 4.503 0 0 1-4.493 4.497Zm-9.662-4.127a4.478 4.478 0 0 1-.537-3.014c.036.021.098.06.142.085l4.779 2.76a.778.778 0 0 0 .785 0l5.835-3.369v2.333a.075.075 0 0 1-.029.062l-4.83 2.789a4.504 4.504 0 0 1-6.145-1.646ZM2.338 7.872A4.483 4.483 0 0 1 4.678 5.9l-.002.165v5.521c-.001.28.149.54.393.68l5.834 3.368-2.02 1.166a.071.071 0 0 1-.068.006l-4.832-2.792a4.503 4.503 0 0 1-1.646-6.141Zm16.594 3.862-5.834-3.37 2.02-1.165a.071.071 0 0 1 .068-.006l4.831 2.79a4.499 4.499 0 0 1-.694 8.116v-5.686a.777.777 0 0 0-.39-.68Zm2.01-3.026a6.493 6.493 0 0 0-.142-.084l-4.779-2.76a.778.778 0 0 0-.785 0L9.402 9.233V6.9a.075.075 0 0 1 .029-.062l4.83-2.787a4.497 4.497 0 0 1 6.68 4.657h.001ZM8.304 12.866l-2.02-1.167a.07.07 0 0 1-.04-.055v-5.58a4.498 4.498 0 0 1 7.377-3.454c-.037.02-.1.055-.142.08L8.7 5.45a.776.776 0 0 0-.393.68l-.003 6.736ZM9.401 10.5 12 9l2.599 1.5v3L12 15l-2.599-1.5v-3Z"})}))}},30433:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M3 8.276a4.259 4.259 0 0 1 4.259-4.259h8.965a4.259 4.259 0 0 1 4.259 4.259v8.965a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276Zm4.259-2.914a2.914 2.914 0 0 0-2.914 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914V8.276a2.914 2.914 0 0 0-2.914-2.914H7.26Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M9.948 5.057A3.057 3.057 0 0 1 13.006 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437a3.057 3.057 0 0 1-3.058 3.058h-6.436a3.057 3.057 0 0 1-3.058-3.058V5.057Z"})]}))}},33403:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"m5.29.765 6.398 5.895V.779h1.246v5.907L19.36.765v6.721H22v9.696h-2.63v5.985l-6.436-5.654v5.719h-1.246v-5.626l-6.39 5.63V17.18h-2.64V7.486H5.29V.765Zm5.46 7.952H3.903v7.234h1.392V13.67l5.453-4.952Zm-4.207 5.498v6.275l5.145-4.532V9.54l-5.145 4.674Zm6.427 1.683V9.535l5.147 4.674v2.973h.007v3.244l-5.154-4.528Zm6.4.053h1.384V8.717H13.96l5.41 4.9v2.334Zm-1.254-8.465V3.595l-4.224 3.891h4.224Zm-7.357 0H6.535V3.595l4.224 3.891Z",clipRule:"evenodd"})}))}},58868:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73ZM8.714 2.75l.457.915A.75.75 0 0 1 9.25 4v7a.75.75 0 0 1-.22.53c-.878.879-1.895 1.93-2.193 3.22h10.326c-.298-1.29-1.315-2.341-2.193-3.22a.75.75 0 0 1-.22-.53V4a.75.75 0 0 1 .08-.335l.457-.915H8.714Z",clipRule:"evenodd"})}))}},7079:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73Z",clipRule:"evenodd"})}))}},46186:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M23.136 7.84c-.552 2.073-1.596 4.495-3.066 6.655-.092.135-.152.3-.152.3.21.322.809.799 2.492 1.156 1.221.259.175.825-1.186.848-.635.01-1.601-.242-2.278-.571-.112 1.053-.413 3.427-.582 4.379-.143.806-.4 1.512-.943 2.06-.538.543-1.269.838-2.162 1.024-1.177.245-2.056.002-2.683-.51-.584-.477-.854-1.119-.99-1.45-.118-.285-.174-.728-.211-1.133-.04-.444-.068-.98-.086-1.533a86.601 86.601 0 0 1-.038-2.52c-.751 1.172-2.493 1.625-3.21 1.568-.599-.048-1.57-.442-.112-.984 1.185-.44 1.436-.897 1.662-1.309.05-.089.097-.176.153-.26.095-.143.194-.284.3-.406a7.553 7.553 0 0 1-.961-.342 10.607 10.607 0 0 1-.218-.067A47.998 47.998 0 0 0 7.1 16.691c-.441.515-.978.873-1.61.899-.626.026-1.15-.283-1.55-.661-.779-.734-1.411-2.026-1.91-3.34-.51-1.348-.926-2.85-1.219-4.119C.52 8.218.337 7.133.311 6.632.201 4.478.71 2.951 1.684 1.95 2.647.96 3.943.612 5.14.545c1.2-.067 2.39.143 3.26.36.383.094.762.205 1.136.33.809-.488 1.812-.774 3.036-.755A8.4 8.4 0 0 1 14.28.68c.141-.047.378-.118.712-.194.539-.122 1.321-.252 2.22-.26 1.79-.017 4.134.459 5.838 2.57.44.546.555 1.362.542 2.155-.013.836-.173 1.83-.456 2.89Zm-4.424-4.354a8.319 8.319 0 0 0-1.918-1.747c1.916-.114 3.846.46 5.087 1.999.092.114.222.467.21 1.188-.01.678-.143 1.546-.405 2.528a20.504 20.504 0 0 1-1.493 3.873c-.008-.489-.076-.967-.124-1.366a6.122 6.122 0 0 1-.062-.919c.012-.374.073-.743.131-1.113.085-.54.19-1.16.054-1.702a4.982 4.982 0 0 0-.255-.724 8.824 8.824 0 0 0-1.225-2.017Zm-.025 7.69c.01.19.01.373-.005.552a35.164 35.164 0 0 1-.495-.88c-.285-.532-.569-1.12-.756-1.675a2.14 2.14 0 0 0 1.076.016c.007.362.036.651.073.952.043.36.09.699.107 1.036ZM18 8.25c-.313 0-.574-.128-.776-.274.018-.188.074-.31.141-.385.11-.122.434-.318 1.292-.275a8.98 8.98 0 0 0-.107.798c-.16.08-.343.136-.55.136ZM6.597 8.123c.035.579.09 1.5-.07 2.609-.188 1.302.262 2.371 1.093 3.146a52.528 52.528 0 0 0-1.66 1.836c-.289.338-.469.374-.532.377-.069.003-.218-.025-.46-.253-.508-.48-1.043-1.48-1.536-2.78-.48-1.265-.877-2.698-1.16-3.926-.288-1.243-.444-2.217-.463-2.577-.097-1.89.359-2.952.95-3.56.601-.617 1.47-.897 2.464-.952.99-.055 2.018.119 2.816.317l.17.043a6.578 6.578 0 0 0-.992 1.75 9.766 9.766 0 0 0-.577 2.428 8.135 8.135 0 0 0-.042 1.542Zm3.006 5.278c.101.03.203.057.307.085.057-.205.133-.44.235-.707.104-.27.262-.59.364-.822.116-.261.221-.533.297-.859.104-.44.162-1.018.079-1.826A4.904 4.904 0 0 1 9.5 9.5c-.617 0-1.077-.382-1.37-.741.013.597-.002 1.379-.119 2.187-.109.755.116 1.314.551 1.756.263.268.615.504 1.04.7Zm-.966-5.684c.216-.09.456-.172.697-.226.413-.092.739-.085.95-.006.328.123.383.483.445.787-.358.12-.811.228-1.229.228-.18 0-.385-.114-.6-.378a2.471 2.471 0 0 1-.263-.405Zm4.888 14.303c.224.183.624.37 1.429.203.762-.159 1.16-.369 1.402-.613.238-.239.413-.601.531-1.266.184-1.033.54-3.9.598-4.584-.02-.476.053-.889.244-1.23.148-.263.342-.44.534-.56-.433-.548-.77-1.203-1.099-1.841-.099-.193-.198-.385-.298-.572-.363-.677-.783-1.543-.999-2.383-.203-.792-.295-1.833.384-2.587.49-.545 1.238-.777 2.177-.776a7.473 7.473 0 0 0-.884-1.383c-.978-1.213-2.567-2.41-4.996-2.448-.941-.015-1.657.196-2.212.525-.145.086-.28.18-.404.28C9.32 3.28 8.9 3.965 8.615 4.698a7.897 7.897 0 0 0-.42 1.58c.253-.098.528-.186.812-.25.604-.135 1.25-.159 1.836.066.644.253 1.116.79 1.296 1.6.374 1.676.34 2.84.128 3.747-.105.45-.25.815-.386 1.124-.15.338-.247.52-.335.752-.094.245-.159.45-.202.613.236.104.463.231.663.396.12.1.234.216.335.35.278.37.408.817.408 1.325 0 .75.002 1.937.038 3.016.021.647.034 1.306.141 1.946.066.392.29.807.596 1.058Z",clipRule:"evenodd"})}))}},27052:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 21.75a.75.75 0 0 0 .75-.75V10.81l3.72 3.72a.75.75 0 1 0 1.06-1.06l-5-5a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 1 0 1.06 1.06l3.72-3.72V21c0 .414.336.75.75.75Zm-9-12A.75.75 0 0 0 3.75 9V5A1.25 1.25 0 0 1 5 3.75h14A1.25 1.25 0 0 1 20.25 5v4a.75.75 0 0 0 1.5 0V5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v4c0 .414.336.75.75.75Z",clipRule:"evenodd"})}))}},16087:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.713 4.077a8.25 8.25 0 0 1 10.07 5.173.75.75 0 1 0 1.414-.5A9.75 9.75 0 0 0 5.118 5.1L1.75 8.266V4a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h6a.75.75 0 0 0 0-1.5H2.893l3.26-3.063a8.25 8.25 0 0 1 3.56-2.11ZM23.75 14a.75.75 0 0 0-.75-.75h-6a.75.75 0 0 0 0 1.5h4.107l-3.26 3.063-.018.017a8.25 8.25 0 0 1-13.612-3.08.75.75 0 1 0-1.414.5A9.75 9.75 0 0 0 18.882 18.9l3.368-3.165V20a.75.75 0 0 0 1.5 0v-6Z",clipRule:"evenodd"})}))}},29328:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M22.334 3.589 17.805 20.41h-1.482L20.853 3.59h1.482ZM12.285 12.15l.11-3.018-2.553 1.62-.658-1.153 2.69-1.4-2.69-1.4.658-1.152 2.553 1.619-.11-3.019h1.317l-.11 3.019 2.553-1.62.658 1.154-2.69 1.4 2.69 1.399-.658 1.152-2.553-1.619.11 3.019h-1.317ZM7.676 3.589 3.148 20.41H1.666L6.194 3.59h1.482Z"})}))}},89386:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M13.163 3.834a8.25 8.25 0 1 0 6.62 10.916.75.75 0 1 1 1.414.5 9.75 9.75 0 1 1-2.305-10.148l3.358 3.162V4a.75.75 0 0 1 1.5 0v6a.75.75 0 0 1-.75.75h-6a.75.75 0 0 1 0-1.5h4.11l-3.254-3.064a8.25 8.25 0 0 0-4.693-2.352Z",clipRule:"evenodd"})}))}},16231:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.365 4.356a.75.75 0 0 1 .74-.016l13 7a.75.75 0 0 1 0 1.32l-13 7A.75.75 0 0 1 2 19V5a.75.75 0 0 1 .365-.644Zm1.135 1.9v11.488L14.168 12 3.5 6.256ZM18.5 12a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75ZM11 6a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 6ZM11 18a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 18Z",clipRule:"evenodd"})}))}},42838:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14A1.25 1.25 0 0 0 5 20.25h1.25V13a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 .75.75v7.25H19A1.25 1.25 0 0 0 20.25 19V8.31l-2.5-2.5V8a.75.75 0 0 1-.75.75H7A.75.75 0 0 1 6.25 8V3.75H5Zm0-1.5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V8a.75.75 0 0 0-.22-.53l-5-5a.75.75 0 0 0-.53-.22H5Zm2.75 1.5v3.5h8.5V4.31l-.56-.56H7.75Zm8.5 16.5v-6.5h-8.5v6.5h8.5Z",clipRule:"evenodd"})}))}},32244:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M22.53 1.47a.75.75 0 0 1 .178.778l-7 20a.75.75 0 0 1-1.393.057l-3.883-8.737-8.737-3.883a.75.75 0 0 1 .057-1.393l20-7a.75.75 0 0 1 .778.178ZM11.895 13.166l3.022 6.8 5.29-15.112-8.312 8.312Zm7.25-9.372L4.034 9.083l6.8 3.022 8.313-8.311Z",clipRule:"evenodd"})}))}},33747:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.341 6.066 12 18.43l2.655-12.364a3.57 3.57 0 0 0 .029-1.183.748.748 0 0 1-.042-.21 2.262 2.262 0 0 0-.721-1.188 3.12 3.12 0 0 0-1.923-.735 3.12 3.12 0 0 0-1.923.735 2.263 2.263 0 0 0-.721 1.189.747.747 0 0 1-.042.209 3.57 3.57 0 0 0 .029 1.183Zm-1.565-.642a5.61 5.61 0 0 0 .096.944l2.46 11.441-5.034-8.286a3.551 3.551 0 0 1-.281-.7.755.755 0 0 0-.038-.148c-.152-.652-.1-1.313.187-1.846.336-.626 1.087-1.242 2.61-1.405Zm.248-1.525c-2.108.127-3.501.957-4.18 2.22-.398.74-.51 1.562-.42 2.353-1.179.603-1.866 1.732-2.09 2.892-.257 1.334.07 2.85 1.11 3.817a.758.758 0 0 0 .037.032l9.045 7.368a.75.75 0 0 0 .948 0l9.045-7.368a.723.723 0 0 0 .038-.032c1.039-.968 1.366-2.483 1.109-3.817-.224-1.161-.913-2.292-2.094-2.894.09-.79-.023-1.61-.42-2.351-.68-1.263-2.073-2.093-4.18-2.22a3.76 3.76 0 0 0-1.062-1.542c-.906-.795-2.08-1.107-2.912-1.107-.832 0-2.006.312-2.912 1.107A3.76 3.76 0 0 0 8.024 3.9Zm8.196 1.525a5.607 5.607 0 0 1-.096.944l-2.457 11.44 5.03-8.285a3.543 3.543 0 0 0 .309-.801c.166-.667.117-1.347-.176-1.893-.336-.626-1.087-1.242-2.61-1.405Zm3.932 4.54a5.077 5.077 0 0 1-.162.32l-5.092 8.388 5.653-4.605c.568-.542.823-1.481.642-2.419-.133-.688-.486-1.298-1.041-1.684ZM9.1 18.67l-5.094-8.386a5.033 5.033 0 0 1-.16-.317c-.554.385-.906.994-1.039 1.681-.18.938.074 1.877.642 2.419l5.65 4.603Z",clipRule:"evenodd"})}))}},49321:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.25 6A2.75 2.75 0 0 1 6 3.25h12A2.75 2.75 0 0 1 20.75 6v12A2.75 2.75 0 0 1 18 20.75H6A2.75 2.75 0 0 1 3.25 18V6Z",clipRule:"evenodd"})}))}},76971:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M12 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5ZM6.25 12a5.75 5.75 0 1 1 11.5 0 5.75 5.75 0 0 1-11.5 0Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M1 11.25a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5H1ZM21 11.25a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5h-2ZM19.248 20.309a.75.75 0 0 0 1.06-1.061l-1.414-1.414a.75.75 0 0 0-1.06 1.06l1.414 1.415ZM5.106 6.166a.75.75 0 0 0 1.06-1.06L4.752 3.692a.75.75 0 1 0-1.06 1.06l1.414 1.414ZM3.692 19.248a.75.75 0 0 0 1.06 1.06l1.414-1.414a.75.75 0 0 0-1.06-1.06l-1.414 1.414ZM17.834 5.106a.75.75 0 1 0 1.06 1.06l1.415-1.414a.75.75 0 1 0-1.061-1.06l-1.414 1.414ZM11.25 23a.75.75 0 0 0 1.5 0v-2a.75.75 0 0 0-1.5 0v2ZM11.25 3a.75.75 0 0 0 1.5 0V1a.75.75 0 0 0-1.5 0v2Z"})]}))}},78832:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.387 2.47a.75.75 0 0 1 0 1.06L4.811 6.107h13.618a.75.75 0 0 1 0 1.5H4.81l2.576 2.577a.75.75 0 1 1-1.06 1.06L2.47 7.388a.75.75 0 0 1 0-1.06L6.327 2.47a.75.75 0 0 1 1.06 0Zm9.226 10.285a.75.75 0 0 1 1.06 0l3.857 3.858a.75.75 0 0 1 0 1.06l-3.857 3.857a.75.75 0 0 1-1.06-1.06l2.576-2.577H5.571a.75.75 0 0 1 0-1.5H19.19l-2.576-2.577a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},58283:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.5 3.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5ZM3.75 7a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0ZM20 7.25a.75.75 0 0 1 .75.75v2.25H23a.75.75 0 0 1 0 1.5h-2.25V14a.75.75 0 0 1-1.5 0v-2.25H17a.75.75 0 0 1 0-1.5h2.25V8a.75.75 0 0 1 .75-.75ZM1.641 15.641A4.75 4.75 0 0 1 5 14.25h7A4.75 4.75 0 0 1 16.75 19v2a.75.75 0 0 1-1.5 0v-2A3.25 3.25 0 0 0 12 15.75H5A3.25 3.25 0 0 0 1.75 19v2a.75.75 0 0 1-1.5 0v-2c0-1.26.5-2.468 1.391-3.359Z",clipRule:"evenodd"})}))}},32001:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M11.063 14.918V9.021h.875v.921h.077c.122-.315.32-.56.595-.733.274-.177.603-.265.987-.265.389 0 .712.088.97.265.262.174.466.418.611.733h.062c.15-.305.377-.546.68-.726.301-.181.664-.272 1.086-.272.527 0 .959.165 1.294.495.335.328.503.838.503 1.532v3.947h-.906v-3.947c0-.435-.12-.746-.357-.933a1.321 1.321 0 0 0-.841-.28c-.415 0-.736.125-.964.376-.228.248-.342.563-.342.945v3.84h-.921v-4.04c0-.335-.109-.605-.326-.81-.218-.208-.498-.311-.841-.311-.236 0-.456.062-.66.188a1.42 1.42 0 0 0-.492.522c-.123.22-.184.475-.184.764v3.686h-.906ZM6.706 15.056c-.374 0-.713-.07-1.018-.21a1.746 1.746 0 0 1-.726-.62c-.179-.27-.268-.598-.268-.982 0-.338.066-.612.2-.822.132-.212.31-.379.533-.499.223-.12.468-.21.737-.268.271-.062.544-.11.818-.146.358-.046.649-.081.872-.104.225-.026.389-.068.491-.127.105-.059.157-.161.157-.307v-.03c0-.38-.103-.674-.31-.884-.205-.21-.516-.315-.934-.315-.432 0-.771.095-1.017.284-.246.19-.419.392-.518.607l-.86-.307c.153-.358.358-.637.614-.837.258-.202.54-.343.845-.422.307-.082.609-.123.906-.123.19 0 .407.023.652.069.249.043.488.134.718.272.233.139.427.347.58.626.154.28.23.653.23 1.122v3.885h-.906v-.799h-.046a1.595 1.595 0 0 1-.307.411c-.143.146-.334.27-.572.373-.238.102-.528.153-.871.153Zm.138-.814c.358 0 .66-.07.906-.21a1.437 1.437 0 0 0 .752-1.249v-.829c-.038.046-.122.088-.253.127a4.271 4.271 0 0 1-.445.096 20.362 20.362 0 0 1-.868.115c-.236.03-.456.08-.66.15a1.138 1.138 0 0 0-.492.303c-.123.133-.184.315-.184.545 0 .315.116.553.35.714.235.159.533.238.894.238Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M4.15 4.75A1.65 1.65 0 0 0 2.5 6.4v11.2c0 .911.739 1.65 1.65 1.65h15.2A1.65 1.65 0 0 0 21 17.6V6.4a1.65 1.65 0 0 0-1.65-1.65H4.15ZM1 6.4a3.15 3.15 0 0 1 3.15-3.15h15.2A3.15 3.15 0 0 1 22.5 6.4v11.2a3.15 3.15 0 0 1-3.15 3.15H4.15A3.15 3.15 0 0 1 1 17.6V6.4Z",clipRule:"evenodd"})]}))}},58830:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 10.75H3A1.75 1.75 0 0 1 1.25 9V3ZM3 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6A.25.25 0 0 0 9.25 9V3A.25.25 0 0 0 9 2.75H3ZM13.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 10.75h-6A1.75 1.75 0 0 1 13.25 9V3ZM15 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25V3a.25.25 0 0 0-.25-.25h-6ZM1.25 15c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 22.75H3A1.75 1.75 0 0 1 1.25 21v-6ZM3 14.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25H3Zm10.25.25c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 22.75h-6A1.75 1.75 0 0 1 13.25 21v-6Zm1.75-.25a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25h-6Z",clipRule:"evenodd"})}))}},64492:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(95836);function l(e){return(0,o.FD)(a.A,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7379_618)",children:[(0,o.Y)("path",{fill:"#188038",d:"m14.455 0 6 6-3 .545-3-.545-.546-3 .546-3Z"}),(0,o.Y)("path",{fill:"#34A853",d:"M14.455 6V0H4.635C3.732 0 3 .732 3 1.636v20.728C3 23.268 3.732 24 4.636 24h14.182c.904 0 1.636-.732 1.636-1.636V6h-6Z"}),(0,o.Y)("path",{fill:"#fff",d:"M6.273 9.273v7.909h10.909v-7.91H6.272Zm4.772 6.545H7.636V13.91h3.41v1.91Zm0-3.273H7.636v-1.909h3.41v1.91Zm4.773 3.273H12.41V13.91h3.41v1.91Zm0-3.273H12.41v-1.909h3.41v1.91Z"})]}),(0,o.Y)("defs",{children:(0,o.Y)("clipPath",{id:"clip0_7379_618",children:(0,o.Y)("path",{fill:"#fff",d:"M3 0h17.454v24H3z"})})})]}))}},20619:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(95836);function l(e){return(0,o.FD)(a.A,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7378_478)",children:[(0,o.Y)("path",{fill:"#E01E5A",d:"M5.14 15.118a2.492 2.492 0 0 1-2.494 2.495A2.492 2.492 0 0 1 .15 15.118a2.492 2.492 0 0 1 2.495-2.494H5.14v2.494Zm1.247 0a2.492 2.492 0 0 1 2.495-2.494 2.492 2.492 0 0 1 2.494 2.494v6.236a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495v-6.236Z"}),(0,o.Y)("path",{fill:"#36C5F0",d:"M8.882 5.102a2.492 2.492 0 0 1-2.495-2.494A2.492 2.492 0 0 1 8.882.113a2.492 2.492 0 0 1 2.494 2.495v2.494H8.882Zm0 1.267a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495H2.627A2.492 2.492 0 0 1 .132 8.863a2.492 2.492 0 0 1 2.495-2.494h6.255Z"}),(0,o.Y)("path",{fill:"#2EB67D",d:"M18.879 8.863a2.492 2.492 0 0 1 2.494-2.494 2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495H18.88V8.863Zm-1.248 0a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V2.608A2.492 2.492 0 0 1 15.138.113a2.492 2.492 0 0 1 2.494 2.495v6.255Z"}),(0,o.Y)("path",{fill:"#ECB22E",d:"M15.137 18.86a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V18.86h2.495Zm0-1.247a2.492 2.492 0 0 1-2.495-2.495 2.492 2.492 0 0 1 2.495-2.494h6.255a2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495h-6.255Z"})]}),(0,o.Y)("defs",{children:(0,o.Y)("clipPath",{id:"clip0_7378_478",children:(0,o.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}},75394:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(95836);function l(e){return(0,o.FD)(a.A,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{fillRule:"evenodd",clipPath:"url(#clip0_7378_479)",clipRule:"evenodd",children:[(0,o.Y)("path",{fill:"#635BFF",d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,o.Y)("path",{fill:"#fff",d:"M11.064 9.33c0-.564.462-.786 1.23-.786 1.104 0 2.496.336 3.6.93V6.066C14.688 5.586 13.5 5.4 12.3 5.4c-2.946 0-4.902 1.536-4.902 4.104 0 4.002 5.514 3.366 5.514 5.094 0 .666-.582.882-1.392.882-1.206 0-2.742-.492-3.96-1.158v3.45c1.35.582 2.712.828 3.96.828 3.018 0 5.094-1.494 5.094-4.092-.024-4.32-5.55-3.552-5.55-5.178Z"})]}),(0,o.Y)("defs",{children:(0,o.Y)("clipPath",{id:"clip0_7378_479",children:(0,o.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}},14480:(e,n,t)=>{"use strict";t.d(n,{L:()=>a});var r=t(30758),i=t(186),o=t(26190);function a(){var e=(0,i.RL)(),n=(0,o.A)(e);return(0,r.useCallback)(function(){var e,t;return!Number.isFinite(t=parseInt(null==(e=n.current)?void 0:e.variation("flag-container-retry-minimum-ms",0),10))||t<0?0:t},[n])}},76002:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(66622),i=t(30758),o={isConnecting:!0,channel:null,context:null};function a(e){var n=e.container,t=e.service,a=e.name,l=e.skip,s=void 0!==l&&l,c=(0,r._)((0,i.useState)(o),2),u=c[0],d=c[1];return(0,i.useEffect)(function(){d(o);var e=!1,r=n.openChannel({service:t,name:a,skip:function(){return s}},function(n){if(!e)return d({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||d({isConnecting:n.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[n,t,a,s]),u}},55078:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(30758),i=t(86848),o=t(14480);function a(e){var n=e.repl,t=e.currentUser,a=e.container,l=(0,o.L)(),s=(0,i.$)(n&&t?{repl:n,currentUser:t}:null);(0,r.useEffect)(function(){if(a&&s)return a.connect({context:s,getMinimumRetryDelayMs:l}),function(){a.close()}},[s,a,l])}},85311:(e,n,t)=>{"use strict";t.d(n,{Ik:()=>s,jq:()=>l,r$:()=>a});var r=t(20334),i=t(32670),o=t(29835);function a(e){return 80===e||443===e}function l(e,n){var t=new URL(e);return!n||a(n)?t.hostname.endsWith(".localhost")?t.port="8081":t.port&&(t.port=""):t.port=n.toString(),t}function s(e){var n,t,a,s=e.container,c=e.ports,u=e.noDevToolsSuffix,d=!(t=(0,o.w)(c)).length||t.some(function(e){return 80===e.configuration.externalPort})?80:null!==(n=t[0].configuration.externalPort)&&void 0!==n?n:80,p=(0,i.A)(s),f=(0,r.g)();if(!d&&!f||!p)return null;var h=l(p,d).toString(),m=l(p+"/__replco/workspace_iframe.html",d).toString();return{iframeSrc:u?(a=new URL(h)).hostname.endsWith(".localhost")?h:(a.protocol="https:",a.toString()):m,presentationUrl:h,baseUrl:p}}},59356:(e,n,t)=>{"use strict";t.d(n,{q:()=>eF});var r=t(13454),i=t(20837),o=t(43952),a=t(66622),l=t(5482),s=t(30758),c=t(6878),u=t(5846),d=t(2806),p=t(1987),f=t(23405);function h(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){return n=e.container,t=e.service,[2,new Promise(function(e){var r=n.openChannel({service:t},function(n){return e([n.channel,r]),r})})]})})).apply(this,arguments)}var g=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),v=t(55195),w=t(88467),y=t(35642),b=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),S=t(21835),Y=t(68543),A=t(15064),C=t(82436),x=t(7942),_=t(25161),k=t(27189),D=t(22824),E=t(78542),R=t(21980),I=t(42796).hp,F=new TextEncoder,T=new TextDecoder,P=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}(),L=function(){function e(n){(0,E._)(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex(function(n,t){return 13===n&&10===e[t+1]&&13===e[t+2]&&10===e[t+3]});if(-1!==n){var t=T.decode(e.slice(0,n)),r=t.match(P);if(!r)throw R.vF.error("Failed to parse LSP header, no matches",{fragment:t}),Error("Unable to match header, text: ".concat(t));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.indexOf(":");if(-1===p)throw R.vF.error("Failed to parse LSP header, missing colon",{fragment:t}),Error('Message header must separate key and value using ":"');var f=d.substr(0,p),h=d.substr(p+1).trim();if("Content-Length"===f){var m=parseInt(h,10);if(isNaN(m))throw R.vF.error("Failed to parse LSP header, NaN content length",{fragment:t}),Error("Content-Length value must be a number.");i[f]=parseInt(h,10)}else i[f]=h}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}if(null==i["Content-Length"])throw R.vF.error("Failed to parse LSP header, no Content-Length",{fragment:t}),Error("Header must provide a Content-Length property.");return{headerLength:n,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){for(this.buffer=(n=this.buffer,t=F.encode(e),(r=new Uint8Array(n.length+t.length)).set(n),r.set(t,n.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var n,t,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,n,t){var r=T.decode(e.slice(0,n));try{return{json:JSON.parse(r),buffer:e.slice(n)}}catch(s){var i=I.from(e).toString();if(s instanceof SyntaxError&&"Unexpected end of JSON input"===s.message){R.vF.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:n,rpcContent:r,attempt:"original-length",headers:JSON.stringify(t)});var o=function(e,n){for(var t=0,r=0,i=!1,o=0;o<e.length+1;o++){if(0!==o&&!t&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:t++;break;case 125:t--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=T.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){R.vF.error("Failed to parse LSP message",{givenError:e,buffer:i,length:n,rpcContent:r,attempt:"recomputed-length"})}}}else R.vF.error("Failed to parse LSP message",{givenError:s,buffer:i,length:n,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(n)}}}(this.buffer,o,this.headers),l=a.json,s=a.buffer;if(this.headers=void 0,this.buffer=s,void 0!==l)try{this.onMessage(l)}catch(e){v.Cp(e)}}},e}(),U=t(42796).hp,N=t(75877),O=t(55902),M=t(96489),B=t.n(M),H=t(82845),z=t(38049),W=t(16530),G=t(60762),V=t(19535),j=t.n(V),Z=t(60023),q=t(32856),K=t(30653),$=t(18552),J=t(38940),Q=function(e){var n=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:J.A}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:$.aK,tokenModifiers:$.md,formats:[K.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(K.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:n.clientToServer||n.serverToClient?{dynamicRegistration:!0}:void 0,configuration:n.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[K.ResourceOperationKind.Create,K.ResourceOperationKind.Delete,K.ResourceOperationKind.Rename]}}}},X=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("css-language-server")},n.onResponse=function(e,n){return"textDocument/hover"===e?this.onHover(n):n},n.onHover=function(e){if("error"in e)return e;var n=e.result;return"cancelled"in e&&!1!==e.cancelled||!n?e:(Array.isArray(n.contents)&&(n.contents={kind:"markdown",value:["```html",n.contents[0],"```",n.contents[1],""].join("\n")}),(0,o._)((0,i._)({},e),{result:n}))},e}(),ee=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return"module:dotnet-7.0/languageServer:omni-sharp"===e},n.onResponse=function(e,n){switch(e){case"textDocument/codeAction":return this.onCodeAction(n);case"textDocument/completion":return this.onCompletion(n)}return n},n.onCodeAction=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},n.onCompletion=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},e}(),en=[new(function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("typescript-language-server")},n.onResponse=function(e,n){return"textDocument/completion"===e?this.onCompletion(n):n},n.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var n=e.result;if(!n)return e;Array.isArray(n)&&(n={isIncomplete:!1,items:n});for(var t=0;t<n.items.length;t++){var r=n.items[t];r.sortText&&r.sortText.startsWith("")&&(r.sortText=r.sortText.replace("",""))}return(0,o._)((0,i._)({},e),{result:n})},e}()),new X,new ee],et=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(){return!0},n.onResponse=function(e,n){return n},e}(),er=t(54735),ei=t(42796).hp;function eo(e,n){var t,r;return null!==(r=null===(t=H.Jh.from(e))||void 0===t?void 0:t.id)&&void 0!==r?r:n}var ea=function(e){return e.INITIALIZED="INITIALIZED",e.READY="READY",e.DIAGNOSTICS="DIAGNOSTICS",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION",e.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",e.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",e}(ea||{});function el(){return Math.floor(0x7fffffff*Math.random())}function es(e){var n=JSON.stringify((0,o._)((0,i._)({},e),{jsonrpc:"2.0"})),t=ei.byteLength(n,"utf8");return"Content-Length: ".concat(t,"\r\n\r\n").concat(n)}function ec(e,n){var t,r,i,o,a,l;return n&&n?!!(B()(null==e?void 0:e.fileTypeAttrs,n.fileTypeAttrs)&&B()(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.startCommand,null===(r=n.config)||void 0===r?void 0:r.startCommand)&&B()(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=n.config)||void 0===o?void 0:o.initializationOptionsJson)&&B()(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=n.config)||void 0===l?void 0:l.configurationJson)):!!n==!!n}function eu(e,n){return ed.apply(this,arguments)}function ed(){return(ed=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(t=r.sent()).error){if(!n())return[2,{error:Error("LSPNix: Could not get working directory "+t.error),workingDirectory:null}];return[2,eu(e,n)]}return[2,{error:null,workingDirectory:t.output.replace("\n","")}]}})})).apply(this,arguments)}var ep=t(23033),ef=t(53654),eh=function(e){return e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e}({}),em=t(63943),eg=t(12139),ev=t(84504),ew=t(51297),ey=t(3274),eb=function(e){return e.MESSAGE="MESSAGE",e}(eb||{}),eS=function(){function e(n){(0,E._)(this,e),this.buffer=Array(n).fill(null),this.start=0,this.end=0,this.isFull=!1}var n=e.prototype;return n.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},n.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function eY(e){var n=new eS(e.maxHistorySize),t=(0,f.Ay)();return{emitMessage:function(e){n.write(e),t.emit("MESSAGE",e)},onMessage:function(e){return t.on("MESSAGE",e),Promise.resolve().then(function(){return e(n.readAll())}),function(){return t.removeListener("MESSAGE",e)}}}}function eA(e){var n,t,r;return(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith(".replit/"))?0:(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}function eC(e){return 1e3*e.seconds+e.nanos/1e6}var ex=t(55382).P,e_=" \x1b[?25l",ek=function(e){return e.BEFORE_RUN="BEFORE_RUN",e.SERVER="SERVER",e.NONE="NONE",e.STOPPING="STOPPING",e}(ek||{}),eD=t(24858),eE=function(e){return e.DEEPLINK_CHANGED="DEEPLINK_CHANGED",e.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED",e}({}),eR=t(72275),eI=function(e){return e.CHANNEL_OPENED="CHANNEL_OPENED",e.EVENT_SENT="EVENT_SENT",e}({});function eF(e){var n=(0,a._)((0,s.useState)(null),2),t=n[0],m=n[1];return(0,s.useEffect)(function(){var n,t,s,E,I,F,T,P,M,V,K,$,J,X,ee,ei,ea,ed,eb,eS,ek,eF,eT,eP,eL,eU,eN,eO,eM,eB,eH,ez,eW,eG,eV,ej,eZ,eq,eK,e$=function(e){var n=c._.active();if(e.openTelemetryTracing)return(0,d.Ux)(n,"workspace.useCreateServices")}(e),eJ=(s=void 0===(t=(n=(0,o._)((0,i._)({},e),{ctx:null==e$?void 0:e$.childCtx})).runnerMode)?"outputs":t,E=n.onUnrecoverableError,I=n.openFile,F=n.openMultipleFiles,T=n.openMultipleURLs,P=n.enableUserEvents,M=n.enableMultipleLSPClientsPerFile,V=n.enableReplspaceSshTokenPassthrough,K=n.onPresenceCommand,$=n.getColorForUser,J=n.openTelemetryTracing,X=n.ctx,ee=n.shouldAutoFlushRef,ei=n.usePostgresqlNixmodule,ed=function(e){var n=e.container,t=e.enabled,s=e.onEventSent,c=(0,f.Ay)();s&&c.on(eI.EVENT_SENT,s);var u=null;function d(e,n){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,r){var s,u,d,p,f,m,g,w;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(!t)return[2];return[4,function(){return h.apply(this,arguments)}()];case 1:if(d=l.sent(),f=null==(p=n.getContext())?void 0:null===(s=p.currentUser)||void 0===s?void 0:s.id,m=null==p?void 0:null===(u=p.repl)||void 0===u?void 0:u.id,g=window.location.href,w={userEvent:{eventName:e,eventData:function e(n){if(!((void 0===n?"undefined":(0,G._)(n))==="object"&&null!==n&&null!==Object.getPrototypeOf(n)))throw Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(n).reduce(function(n,t){var r=(0,a._)(t,2),l=r[0],s=r[1];return void 0===s||(void 0===s?"undefined":(0,G._)(s))==="object"&&s&&0===Object.keys(s).length?n:(0,o._)((0,i._)({},n),(0,eR._)({},l,function n(t){switch(void 0===t?"undefined":(0,G._)(t)){case"string":return{kind:"stringValue",stringValue:t};case"number":return{kind:"numberValue",numberValue:t};case"boolean":return{kind:"boolValue",boolValue:t};case"object":if(null===t)return{kind:"nullValue",nullValue:null};if(Array.isArray(t))return{kind:"listValue",listValue:{values:t.map(n)}};return{kind:"structValue",structValue:e(t)};default:throw Error("Unexpected value: ".concat(t))}}(s)))},{})}}((0,i._)({userId:f,replId:m,url:g},r))}},"open"!==d.status)return v.v4(function(e){e.setTag("service","user-events"),e.setExtra("command",w),e.setExtra("userId",f),e.setExtra("replId",m),e.setExtra("url",g),e.setExtra("channelId",d.id),v.Cp(Error("UserEvents channel is not open: ".concat(d.status)))}),[2];return c.emit(eI.EVENT_SENT,e,r),d.send(w),[2]}})})).apply(this,arguments)}function h(){return(h=(0,r._)(function(){return(0,l.YH)(this,function(e){return u?[2,u]:[2,new Promise(function(e){c.once(eI.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}return d("meta:start",{}),n.openChannel({service:"null",skip:function(){return!t}},function(e){var n=e.channel;return d("meta:ready",{}),u=n,c.emit(eI.CHANNEL_OPENED,n),function(){u=null}}),{emit:d}}({container:ea=(0,x.Ay)({onUnrecoverableError:E,ctx:X}),enabled:!!(void 0!==P&&P)}),eb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,f.Ay)();n.setMaxListeners(1e3);var t=null,r={openFiles:[],activeTab:0};function a(e){B()(r,e)||(r=e,n.emit(eE.SESSION_STATE_CHANGED,r))}return{onSessionStateChanged:function(e){return n.on(eE.SESSION_STATE_CHANGED,e),function(){n.removeListener(eE.SESSION_STATE_CHANGED,e)}},onDeeplinkUpdated:function(e){return n.on(eE.DEEPLINK_CHANGED,e),t&&(e(t),t=null),function(){n.removeListener(eE.DEEPLINK_CHANGED,e)}},openFile:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile){e.openFile({path:n,newTab:t.newTab,newPane:t.newPane,newPaneEdge:t.newPaneEdge,col:t.col,line:t.line});return}var l=t.tabIndex,s=t.newTab;if(void 0!==l){!function(e,n){var t=n||r.openFiles.length;if(e<0||e>=t||!Number.isInteger(e))throw Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(t))}(l,r.openFiles.length+1);var c=r.openFiles.slice(),u=r.openFiles.indexOf(n);if(-1===u){c.splice(l,1,n),a({openFiles:c,activeTab:c.indexOf(n)});return}if(u===l){a((0,o._)((0,i._)({},r),{activeTab:c.indexOf(n)}));return}c.splice(u,1),c.splice(l,0,n);var d=c.indexOf(n);a({openFiles:c,activeTab:d});return}if(r.openFiles.includes(n)){a((0,o._)((0,i._)({},r),{activeTab:r.openFiles.indexOf(n)}));return}var p=r.openFiles.slice();if(s){var f=0===p.length?0:r.activeTab+1;p.splice(f,0,n),a({openFiles:p,activeTab:f});return}var h=r.activeTab;p.splice(h,1,n),a({openFiles:p,activeTab:h})},updateDeeplink:function(e){n.emit(eE.DEEPLINK_CHANGED,e),t=e},getActiveFile:function(){var e=r.openFiles,n=r.activeTab;if(0!==e.length)return e[n]},getState:function(){return r}}}({openFile:I}),eS=(0,N.A)({container:ea}),ek=function(e){var n=e.container,t=e.onCommand,i=e.getColorForUser,o=(0,f.Ay)();o.setMaxListeners(1/0);var a=[],s=null,c=[],u={},d=null;function p(){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(){return(0,l.YH)(this,function(e){return d?[2,d]:[2,new Promise(function(e){o.once(eh.USERS_UPDATE,function(){if(!d)throw Error("Expected presenceChannel to be set");e(d)})})]})})).apply(this,arguments)}function m(e){B()(s,e)||(s=e,o.emit(eh.FOLLOWED_USER_CHANGED,e))}function g(){return(g=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if((null==s?void 0:s.username)===e)throw Error("Already following user with username ".concat(e));if(!s)return[3,2];return[4,v()];case 1:r.sent(),r.label=2;case 2:return[4,p()];case 3:if(n=r.sent(),!(t=a.find(function(n){return n.username===e})))return[2];return m(t),t.sessions.forEach(function(e){n.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:if(!s)throw Error("No user to unfollow");return e=s,m(null),[4,p()];case 1:return n=t.sent(),e.sessions.forEach(function(e){n.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return n.openChannel({service:"presence",name:"presencer"},function(e){var n=e.channel;return n.onCommand(function(e){null==t||t(e);var n={cmd:e,emitter:o,activeUsers:a,userIdToFile:u,followedUser:s,setFollowedUser:m,followingUsers:c,getColorForUser:i};switch(e.body){case"roster":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,s=e.getColorForUser,c=n.roster;if(c){var u=c.user,d=c.files;if(u&&d){var p=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(!(!e.id||!e.name||!e.roles||p.has(e.id))){var n=d.filter(function(n){return n.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,em.iY)(e.timestamp)}}),t=null==s?void 0:s({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=t?t:(0,em.a4)(r),sessions:n}),p.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,em.Ni)(e)}),t.emit(eh.USERS_UPDATE,(0,k._)(r)),a.filter(function(e){return!r.some(function(n){return n.id===e.id})}).forEach(function(e){var n=a.indexOf(e);-1!==n&&(a.splice(n,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id})){l(null);return}var f=i[o.id];t.emit(eh.USER_OPENED_FILE,{user:o,file:f})}}}}(n);break;case"join":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=n.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),s=Math.floor(Date.now()/1e3),c=w.google.protobuf.Timestamp.create({seconds:s}),u=(0,em.iY)(c);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),p={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,em.a4)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(p),t.emit(eh.USER_JOIN,p),t.emit(eh.USERS_UPDATE,(0,k._)(r))}}}(n);break;case"part":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(n.part&&n.part.id&&n.part.session){var s=n.part,c=s.id,u=s.session,d=r.findIndex(function(e){return e.id===c}),p=r[d];if(1===p.sessions.length){r.splice(d,1),delete i[p.id],t.emit(eh.USER_LEAVE,p),t.emit(eh.USERS_UPDATE,(0,k._)(r)),o&&l(null);var f=a.findIndex(function(e){return e.id===p.id});-1!==f&&(a.splice(f,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(a),user:p,type:"unfollow"}))}else{p.sessions=p.sessions.filter(function(e){return e.id!==u});var h=(0,em.Ni)(p);i[p.id]!==h&&(i[p.id]=h,t.emit(eh.USER_OPENED_FILE,{user:p,file:h}))}}}(n);break;case"fileOpened":!function(e){var n=e.emitter,t=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(t.fileOpened){var o=t.fileOpened,a=o.userId,l=o.file,s=o.timestamp,c=o.session,u=l||null;if(!a||!s)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var p=d.sessions.find(function(e){return e.id===c});if(!p)throw Error("Expected session with ID ".concat(p));p.activeFile=u,p.timestamp=(0,em.iY)(s),i[a]=u,n.emit(eh.USER_OPENED_FILE,{user:d,file:u})}}(n);break;case"followUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,em.fp)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(i),user:l,type:"follow"}))}(n);break;case"unfollowUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,em.fp)(a,r),s=i.findIndex(function(e){return e.id===l.id});-1!==s&&(i.splice(s,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(i),user:l,type:"unfollow"}))}(n);break;case"sessionTimestampUpdated":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=n.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,em.fp)(a,r),s=i[l.id],c=l.sessions.find(function(e){return e.id===a});if(!c)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));c.timestamp=(0,em.iY)(o.timestamp);var u=c.activeFile;u!==s&&(i[l.id]=u,t.emit(eh.USER_OPENED_FILE,{user:l,file:u}))}(n)}}),d=n,function(){d=null}}),{onUserLeave:function(e){return o.on(eh.USER_LEAVE,e),function(){o.removeListener(eh.USER_LEAVE,e)}},onUserJoin:function(e){return o.on(eh.USER_JOIN,e),function(){o.removeListener(eh.USER_LEAVE,e)}},onActiveUsersChange:function(e){return o.on(eh.USERS_UPDATE,e),function(){o.removeListener(eh.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return o.on(eh.USER_OPENED_FILE,e),function(){o.removeListener(eh.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return o.on(eh.FOLLOWED_USER_CHANGED,e),function(){o.removeListener(eh.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return o.on(eh.FOLLOWING_USERS_CHANGED,e),function(){o.removeListener(eh.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var n=u[e];if(void 0===n)throw Error("Expected file for user with ID ".concat(e," to be defined"));return n},updateOpenFile:function(e){return(0,r._)(function(){return(0,l.YH)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return n.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return g.apply(this,arguments)},unfollowUser:v,getActiveUsers:function(){return a},getFollowedUser:function(){return s},getFollowingUsers:function(){return c},getUserIdToFile:function(){return u},getPathToUserIds:function(){var e=new Map;return a.forEach(function(n){var t=n.id,r=u[t];r&&function n(t,r){if(""!==t){e.has(t)||e.set(t,[]);var i,o=e.get(t);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null===(i=e.get(t))||void 0===i||i.push(r),n((0,ef._6)(t),r))}}(r,t)}),e}}}({container:ea,onCommand:K,getColorForUser:$}),eF=(0,p.A)({container:ea,fs:eS,ctx:X}),eT=function(e){var n,t,o,s=e.container,c=(0,f.Ay)(),u=null;function d(){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(){return(0,l.YH)(this,function(e){return u&&"open"===u.status?[2,u]:[2,new Promise(function(e){c.once(g.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(){return(0,l.YH)(this,function(e){return[2,h({container:s,service:"nix"})]})})).apply(this,arguments)}return s.openChannel({service:"nix"},function(e){var n=e.channel;return u=n,c.emit(g.CHANNEL_OPENED,n),function(){u=null}}),{searchPackages:(n=(0,r._)(function(e){var n,t,r,o,s,c=arguments;return(0,l.YH)(this,function(l){switch(l.label){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},[4,m()];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],o=t[1],[4,r.request({nixPackageSearchRequest:(0,i._)({query:e},n)})];case 2:if((s=l.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(o(),s.error)return[2,{error:s.error,packages:null}];if(!s.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:s.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return n.apply(this,arguments)}),listPackages:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(t(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(t(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(t(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(t=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return t.apply(this,arguments)}),removePackages:(o=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return o.apply(this,arguments)}),packageInfo:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((n=t.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(n.error)return[2,{package:null,error:n.error}];if(!n.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!n.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:n.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:ea}),eP=(0,A.A)({container:ea,dotReplit:eF}),eL=function(e){var n=e.container,t=e.forceTrace,i=e.track,o=(0,f.Ay)(),s=new Map;function c(e){var n=s.get(e);return n||(n={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},s.set(e,n)),n}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e){var t,r,i,o,s=arguments;return(0,l.YH)(this,function(l){switch(l.label){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:0,[4,h({container:n,service:"packager3"})];case 1:if(i=(r=a._.apply(void 0,[l.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:l.sent(),l.label=3;case 3:if("open"!==i.status){if(t>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,p(e,t+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function g(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var t;return(0,l.YH)(this,function(r){return((t=c(e)).didCallOpenChannel||function(e){var t=c(e);if(t.didCallOpenChannel)throw Error("Already called open channel");t.didCallOpenChannel=!0,t.closeChannel=n.openChannel({service:"packager3",name:e||"packager",action:w.api.OpenChannel.Action.ATTACH_OR_CREATE},function(n){var r=n.channel;return r.onCommand(function(n){if(null!=n.state){var t=n.state===w.api.State.Running;o.emit(b.STATE_CHANGED,t,e)}else null!=n.output?o.emit(b.OUTPUT,n.output,e):null!=n.error&&o.emit(b.ERROR,n.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){t.packagerChannel=r,o.emit(b.CHANNEL_OPENED,r,e)}):(t.packagerChannel=r,o.emit(b.CHANNEL_OPENED,r,e)),function(){t.packagerChannel=null}})}(e),t.packagerChannel&&"open"===t.packagerChannel.status)?[2,t.packagerChannel]:[2,new Promise(function(n){o.once(b.CHANNEL_OPENED,function(t,r){r===e&&n(t)})})]})})).apply(this,arguments)}return{addPackages:function(e,n){return(0,r._)(function(){var t,r,o,a;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,g(n)];case 1:if("open"!==(r=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,r.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null===(t=a.packageAddResponse)||void 0===t?void 0:t.installedSystemDependencies)&&i&&i(u.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,!0]}})})()},removePackages:function(e,n){return(0,r._)(function(){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:return[4,g(n)];case 1:if("open"!==(t=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,t.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,n){return(0,r._)(function(){var t,r,i,o;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(n)];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=l.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return v.Cp(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,n){return(0,r._)(function(){var t,r,i,o;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(n)];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=l.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return v.Cp(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r._)(function(){return(0,l.YH)(this,function(a){var s;return[2,(0,d.ce)(e,"packager.installPackages",(s=(0,r._)(function(e){var r,a,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,g(n)];case 1:if("open"!==(r=l.sent()).status)return[2,(0,y._)("ChannelClosed")];return[4,r.request({packageInstall:{useNewResponse:!0,disableGuess:o},traceInfo:(0,d.mY)(e),forceTrace:t})];case 2:if((a=l.sent()).error)return[2,(0,y._)(a.error)];if(a.channelClosed)return[2,(0,y._)("ChannelClosed")];if(!(s=a.packageInstallResponse))return[2,(0,y._)("No package install response found")];return s.installedSystemDependencies&&i&&i(u.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,(0,y.Ok)(s)]}})}),function(e){return s.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,r._)(function(){var n,t,r,i,o,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(e)];case 1:return t=(n=a._.apply(void 0,[l.sent(),2]))[0],r=n[1],[4,t.request({packageListSpecfile:{}})];case 2:if((i=l.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(s=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:s,error:null}];default:return c="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",v.Cp(Error(c)),[2,{packages:null,error:c}]}return[2]}})})()},getPackagerIds:function(){return Array.from(s.keys())},clearPackager:function(e){var n=s.get(e);(null==n?void 0:n.closeChannel)&&n.closeChannel(),s.delete(e)},onOutput:function(e){return o.on(b.OUTPUT,e),function(){o.removeListener(b.OUTPUT,e)}},onError:function(e){return o.on(b.ERROR,e),function(){o.removeListener(b.ERROR,e)}},onStateChanged:function(e){return o.on(b.STATE_CHANGED,e),function(){o.removeListener(b.STATE_CHANGED,e)}}}}({container:ea,forceTrace:J,track:C.u4}),eU=(0,eg.Ay)({container:ea,fs:eS,openMultipleFiles:F,openMultipleURLs:T,enableReplspaceSshTokenPassthrough:V}),eB=(eM={container:ea,beforeRun:(eN=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(o){var a;return t=(null==n?void 0:n.ctx)||c._.active(),[2,(0,d.ce)(t,"beforeRun",(a=(0,r._)(function(t){var o,a,c,p,f,h,m,g,v,w,y,b,S,Y,A,x;return(0,l.YH)(this,function(_){switch(_.label){case 0:return[4,(0,d.ce)(t,"toolchain.getConfigs",function(){return eP.getConfigs()})];case 1:if((o=_.sent()).disableInstallBeforeRun)return[2];return a=(0,i._)({},n),delete a.ctx,ed.emit("user:run:prerun",(0,i._)({runnerMode:s},a)),[4,(0,d.ce)(t,"fs.flush",(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:if(!(void 0===ee||ee.current))return[3,2];return[4,eS.flush()];case 1:e.sent(),e.label=2;case 2:return[2]}})}))];case 2:if(_.sent(),e&&e("prerun flush finished"),!(null==o?void 0:o.packagers))return[3,10];c=!0,p=!1,f=void 0,_.label=3;case 3:_.trys.push([3,8,9,10]),h=o.packagers[Symbol.iterator](),_.label=4;case 4:if(c=(m=h.next()).done)return[3,7];if(!(g=m.value).guessImports)return[3,6];return v=performance.now(),w=o.disableGuessImports,[4,eL.installPackages(t,g.id,w)];case 5:y=_.sent(),b=performance.now()-v,e&&(y.error?e("prerun packager install finished",{packagerId:g.id,language:g.language,errorMessage:y.error,success:!1}):(A=(Y=(null==(S=y.value)?void 0:S.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:g.id,language:g.language,guessedPkgs:Y,guessedPkgsCount:A,guessedAnyPkgs:A>0,upmGuessDurationMs:null==S?void 0:S.upmGuessDurationMs,upmAddDurationMs:null==S?void 0:S.upmAddDurationMs,upmLockDurationMs:null==S?void 0:S.upmLockDurationMs,backendTotalDurationMs:null==S?void 0:S.totalDurationMs,frontendTotalDurationMs:b,success:!0}),A>0&&(0,C.u4)(u.AZ.PACKAGER_PACKAGES_GUESSED,{packages:Y}))),_.label=6;case 6:return c=!0,[3,4];case 7:return[3,10];case 8:return x=_.sent(),p=!0,f=x,[3,10];case 9:try{c||null==h.return||h.return()}finally{if(p)throw f}return[7];case 10:return ed.emit("user:run:initiate",{}),[2]}})}),function(e){return a.apply(this,arguments)}))]})}),eO=function(e,n){return eN.apply(this,arguments)})}).container,eH=eM.beforeRun,eW={mainClient:ez=(0,_.F)(null),connect:function(){return new Promise(function(e){ez.current||eB.openChannel({service:"debugger"},function(n){return ez.current=function(e){var n,t=e.channel,s=e.beforeRun,c=(0,_.F)("terminated"),u=(0,_.F)([]),d=(0,_.F)([]),p=(0,_.F)(new Map),h=(0,_.F)(null),m=(0,f.Ay)(),g=function(e,n){var t=new Map,o=new Map,s=new Map;function c(){return(c=(0,r._)(function(n){var r,c,u,d,p,f,h,m,g,v,w,y,b,S,Y,A,C,x,_,k,D,E,R,I,F,T,P,L,U,N,O,M,B,H,z,W,G,V,j,Z,q;return(0,l.YH)(this,function(K){switch(K.label){case 0:r=!0,c=!1,u=void 0,K.label=1;case 1:K.trys.push([1,6,7,8]),d=t.entries()[Symbol.iterator](),K.label=2;case 2:if(r=(p=d.next()).done)return[3,5];if(h=(f=(0,a._)(p.value,2))[0],m=f[1],void 0!==n&&n!==h)return[3,4];return[4,e({command:"setBreakpoints",arguments:{source:{name:h,path:h},breakpoints:m.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 3:if(!(g=K.sent()).success)return[3,4];v=!0,w=!1,y=void 0;try{for(b=o[Symbol.iterator]();!(v=(S=b.next()).done);v=!0){A=(Y=(0,a._)(S.value,2))[0],C=Y[1],(null===(x=C.source)||void 0===x?void 0:x.name)===h&&o.delete(A),_=!0,k=!1,D=void 0;try{for(E=s[Symbol.iterator]();!(_=(R=E.next()).done);_=!0)F=(I=(0,a._)(R.value,2))[0],I[1]===A&&s.delete(F)}catch(e){k=!0,D=e}finally{try{_||null==E.return||E.return()}finally{if(k)throw D}}}}catch(e){w=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(w)throw y}}T=g,P=!0,L=!1,U=void 0;try{for(N=T.body.breakpoints[Symbol.iterator]();!(P=(O=N.next()).done);P=!0)M=O.value,null!=M.id&&o.set(M.id,(0,i._)({source:{name:h,path:h}},M))}catch(e){L=!0,U=e}finally{try{P||null==N.return||N.return()}finally{if(L)throw U}}B=!0,H=!1,z=void 0;try{for(W=(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(e.length!==n.length)return[2];t=0,r.label=1;case 1:if(!(t<e.length))return[3,4];return[4,[e[t],n[t]]];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})(m,T.body.breakpoints)[Symbol.iterator]();!(B=(G=W.next()).done);B=!0)j=(V=(0,a._)(G.value,2))[0],Z=V[1],j.breakpointId&&null!=Z.id&&s.set(j.breakpointId,Z.id)}catch(e){H=!0,z=e}finally{try{B||null==W.return||W.return()}finally{if(H)throw z}}K.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return q=K.sent(),c=!0,u=q,[3,8];case 7:try{r||null==d.return||d.return()}finally{if(c)throw u}return[7];case 8:return[2]}})})).apply(this,arguments)}function u(){var e=new Map,n=new Set,r=!0,i=!1,l=void 0;try{for(var c,u=t.entries()[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=(0,a._)(c.value,2),p=d[0],f=d[1];if(0!==f.length){var h=[],m=!0,g=!1,v=void 0;try{for(var w,y=f[Symbol.iterator]();!(m=(w=y.next()).done);m=!0){var b=w.value;if(b.breakpointId&&b.line){var S=s.get(b.breakpointId),Y=void 0===S?void 0:o.get(S);Y&&n.add(S),h.push({dapId:S,pid1Id:b.breakpointId,line:Y&&Y.line||b.line,verified:!!(null==Y?void 0:Y.verified),logMessage:b.logMessage||void 0})}}}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}e.set(p,h)}}}catch(e){i=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}var A=!0,C=!1,x=void 0;try{for(var _,k=o.entries()[Symbol.iterator]();!(A=(_=k.next()).done);A=!0){var E=(0,a._)(_.value,2),R=E[0],I=E[1];if(!n.has(R)){var F=(0,D.f_)((null===(M=I.source)||void 0===M?void 0:M.path)||(null===(B=I.source)||void 0===B?void 0:B.name)||""),T=I.line;if(F&&T){var P=e.get(F);P||(P=[],e.set(F,P));var L=!1,U=!0,N=!1,O=void 0;try{for(var M,B,H,z=P[Symbol.iterator]();!(U=(H=z.next()).done);U=!0){var W=H.value;if(W.line===I.line){W.dapId=R,W.verified=I.verified,L=!0;break}}}catch(e){N=!0,O=e}finally{try{U||null==z.return||z.return()}finally{if(N)throw O}}L||P.push({dapId:R,line:T,verified:I.verified})}}}}catch(e){C=!0,x=e}finally{try{A||null==k.return||k.return()}finally{if(C)throw x}}return e}return{findPathByBreakpointId:function(e){var n=!0,r=!1,i=void 0;try{for(var o,l=t.entries()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=(0,a._)(o.value,2),c=s[0];if(s[1].some(function(n){return n.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return null},getBreakpoints:u,flush:function(e){return c.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var t=e.body,r=t.reason,a=t.breakpoint,l=a.id;if(null!=l){switch(r){case"changed":case"new":o.set(l,(0,i._)({},o.get(l),a));break;case"removed":o.delete(l);break;default:return}n(u())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,D.f_)(e.absolutePath):null;r&&(t.set(r,e.breakpoints||[]),n(u()))},handleDebugSessionEnded:function(){o.clear(),s.clear();var e=!0,r=!1,i=void 0;try{for(var l,c=t.entries()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var d=(0,a._)(l.value,2),p=d[0],f=d[1];0===f.length&&t.delete(p)}}catch(e){r=!0,i=e}finally{try{e||null==c.return||c.return()}finally{if(r)throw i}}n(u())}}}(x,function(e){p.current=e}),v=(0,_.F)(!1),y=[],b=new L(function(e){if(y.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":c.current="running";break;case"stopped":var n;c.current="paused",h.current=null!==(n=e.body.threadId)&&void 0!==n?n:null,m.emit("paused",e.body.reason),function(){F.apply(this,arguments)}();break;case"breakpoint":g.handleDAPBreakpointEvent(e)}else if("response"===e.type){var t=S.get(e.request_seq);t&&(S.delete(e.request_seq),t(e))}}),S=new Map,Y=100;function A(){c.current="terminated",u.current=[],d.current=[],h.current=null,g.handleDebugSessionEnded(),v.current=!1}var C=!1;function x(e){return E.apply(this,arguments)}function E(){return(E=(0,r._)(function(e){return(0,l.YH)(this,function(n){return[2,new Promise(function(n){var r,a=Y++;S.set(a,n);var l=(0,o._)((0,i._)({},e),{type:"request",seq:a});y.push({time:Date.now(),direction:"out",data:l});var s={debugInput:{session:"main",adapterInput:(r=JSON.stringify(l),"Content-Length: ".concat(U.byteLength(r),"\r\n\r\n").concat(r))}};y.push({time:Date.now(),direction:"out",data:s}),t.send(s)})]})})).apply(this,arguments)}function R(e){return I.apply(this,arguments)}function I(){return(I=(0,r._)(function(e){var n;return(0,l.YH)(this,function(r){switch(r.label){case 0:return y.push({time:Date.now(),direction:"out",data:e}),[4,t.request(e)];case 1:if(n=r.sent(),y.push({time:Date.now(),direction:"in",data:n}),n.error)throw n.error;return[2,n]}})})).apply(this,arguments)}function F(){return(F=(0,r._)(function(){var e,n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return u.current=[],d.current=[],[4,x({command:"stackTrace",arguments:{threadId:h.current}})];case 1:if(!(e=r.sent()).success||(u.current=e.body.stackFrames,0===u.current.length))return[2];return[4,x({command:"scopes",arguments:{frameId:u.current[0].id}})];case 2:if(!(n=r.sent()).success)return[2];return[4,Promise.all(n.body.scopes.map(function(e){return x({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(n){return{response:n,parentVariableReference:e.variablesReference}})}))];case 3:return t=r.sent(),d.current=t.filter(function(e){return e.response.success}).reduce(function(e,n){var t=n.response,r=n.parentVariableReference;return e.concat(t.body.variables.map(function(e){return(0,o._)((0,i._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=(0,r._)(function(e){var n,r,i,o,a,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if("terminated"!==c.current)throw Error("Cant start while debugger is already running");return c.current="preinitializing",u.current=[],[4,s()];case 1:if(l.sent(),"stopping"===c.current)return c.current="terminated",[2];return C=!0,c.current="initializing",i={session:"main",readOnly:!1},e&&(i.debuggerId=e.debuggerOption.id,e.filePath&&(i.filePath=e.filePath)),o={debugMain:i},y.push({time:Date.now(),direction:"out",data:o}),[4,t.request(o)];case 2:if(a=l.sent(),y.push({time:Date.now(),direction:"in",data:a}),a.error)return m.emit("output",a.error),c.current="terminated",[2];return[4,x({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(d=l.sent()).success)return c.current="terminated",[2];return v.current=!!(null===(n=d.body)||void 0===n?void 0:n.supportsStepBack),p=!(null===(r=d.body)||void 0===r?void 0:r.supportsConfigurationDoneRequest),[4,g.flush()];case 4:if(l.sent(),p)return[3,6];return[4,x({command:"configurationDone"})];case 5:l.sent(),l.label=6;case 6:return"initializing"===c.current&&(c.current="running"),m.emit("started",p),[2]}})})).apply(this,arguments)}function N(e,n){return O.apply(this,arguments)}function O(){return(O=(0,r._)(function(e,n){var t,r,i,o;return(0,l.YH)(this,function(a){switch(a.label){case 0:return t=n.line,r=n.otIndex,i=n.otVersion,o=n.logMessage,[4,R({debugAddBreakpointRequest:{path:(0,D.H$)(e)||e,line:t,otIndex:r,otVersion:i,logMessage:o}})];case 1:if(a.sent(),!("terminated"!==c.current))return[3,3];return[4,g.flush(e)];case 2:a.sent(),a.label=3;case 3:return m.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function M(e){return B.apply(this,arguments)}function B(){return(B=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return n=g.findPathByBreakpointId(e),[4,R({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(t.sent(),!("terminated"!==c.current&&n))return[3,3];return[4,g.flush(n)];case 2:t.sent(),t.label=3;case 3:return m.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function H(){return(H=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(!(t=g.findPathByBreakpointId(e)))return[2];return[4,R({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:n.logMessage}})];case 1:if(r.sent(),!("terminated"!==c.current))return[3,3];return[4,g.flush(t)];case 2:r.sent(),r.label=3;case 3:return m.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function z(){return(z=(0,r._)(function(e,n){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=p.current.get(e))||void 0===r?void 0:null===(t=r.find(function(e){return e.line===n.line&&void 0!==e.pid1Id}))||void 0===t?void 0:t.pid1Id))return[3,2];return[4,M(i)];case 1:return o.sent(),[3,4];case 2:return[4,N(e,n)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function W(e){return m.on("started",e),function(){m.removeListener("started",e)}}return t.onCommand(function(e){y.push({time:Date.now(),direction:"in",data:e});var n,t,r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,a=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&b.read(r.adapterOutput),r.output&&m.emit("output",r.output)}if(o&&g.handlePID1BreakpointEvent(o),i&&i.state===w.api.State.Stopped&&A(),((null==a?void 0:null===(n=a.sessions)||void 0===n?void 0:n.main)===w.api.State.Running||(null==i?void 0:i.state)===w.api.State.Running)&&"terminated"===c.current&&T(),(null==a?void 0:null===(t=a.sessions)||void 0===t?void 0:t.main)===w.api.State.Stopped||(null==i?void 0:i.state)===w.api.State.Stopped){if(C){C=!1;return}A()}}),{state:c,stackFrames:u,variables:d,breakpoints:p,supportsStepBack:v,onOutput:function(e){return m.on("output",e),function(){m.removeListener("output",e)}},onStarted:W,onPaused:function(e){return m.on("paused",e),function(){m.removeListener("paused",e)}},onBreakpoint:function(e){return m.on("breakpoint",e),function(){m.removeListener("breakpoint",e)}},sendInput:function(e){return(0,r._)(function(){var n,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return n={debugInput:{session:"main",input:e}},y.push({time:Date.now(),direction:"out",data:n}),[4,t.request(n)];case 1:if(r=i.sent(),y.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,x({command:"variables",arguments:{variablesReference:e}})];case 1:if((n=t.sent()).success)return[2,n.body.variables.map(function(n){return(0,o._)((0,i._)({},n),{parentVariableReference:e})})];throw Error(n.message)}})})()},evaluate:function(e){var t=e.frameId,i=void 0===t?null===(n=u.current[0])||void 0===n?void 0:n.id:t,o=e.expression,a=e.context;return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return[4,x({command:"evaluate",arguments:{frameId:i,expression:o,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:N,removeBreakpoint:M,updateBreakpoint:function(e,n){return H.apply(this,arguments)},toggleBreakpoint:function(e,n){return z.apply(this,arguments)},start:T,continue:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return u.current=[],c.current="running",[4,x({command:"continue",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return u.current=[],c.current="running",[4,x({command:"reverseContinue",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"stepBack",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"stepIn",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"next",arguments:{threadId:h.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,x({command:"stepOut",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,r._)(function(){var e,n,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if("terminated"===c.current)throw Error("Debugger already terminated");if(e=c.current,c.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return n=[],[4,Promise.race([new Promise(function(e){n.push(c.subscribe(function(){return e()}))}),new Promise(function(e){n.push(W(function(){return e()}))})])];case 1:if(o.sent(),n.forEach(function(e){return e()}),"terminated"===c.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},y.push({time:Date.now(),direction:"out",data:r}),[4,t.request(r)];case 3:if(i=o.sent(),y.push({time:Date.now(),direction:"in",data:i}),i.error)throw Error("Failed to stop debugger "+i.error);return[2]}})})()},getSource:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,x({command:"source",arguments:{source:{path:e}}})];case 1:if(!(n=t.sent()).success)throw Error(n.message);return[2,n.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:c,stackFrames:u,variables:d,breakpoints:p,threadId:h}).map(function(e){var n=(0,a._)(e,2),t=n[0],r=n[1];return"".concat(t," = ").concat(JSON.stringify(r.current instanceof Map?(0,k._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+y.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:n.channel,beforeRun:eH}),e(null),function(){ez.current=null}})})}},eG=(0,ep.kg)({container:ea,dotReplit:eF}),eV=function(e){var n;if("outputs"===e.mode?n=function(e){var n,t,o,a,s,c,u,p,h,m,g,v,y,b,S,Y,A,x=e.container,_=e.toolchain,k=e.beforeRun,D=e.packager,E=e.debuggest,I=(0,f.Ay)(),F=null,T={runId:(0,ey.A)(),runState:ev.ll.OFFLINE,runningStage:"NONE",outputBlocks:[]};function P(e){T=(0,ew.jM)(T,e)}function L(e){var n=T.outputBlocks.find(function(n){return n.id===e});if(!n)throw Error("can't find block for id: ".concat(e));I.emit(ev.sV.BLOCK_CHANGED,n)}function U(){I.emit(ev.sV.ALL_BLOCKS_CHANGED,T.outputBlocks)}function N(e){T.runState!==e&&(P(function(n){n.runState=e}),I.emit(ev.sV.STATE_CHANGE,e))}function O(){if(!F){N(ev.ll.OFFLINE);return}if("BEFORE_RUN"===T.runningStage){N(ev.ll.BEFORE_RUN);return}if("STOPPING"===T.runningStage){N(ev.ll.STOPPING);return}if("NONE"!==T.runningStage){N(ev.ll.RUNNING);return}N(ev.ll.IDLE)}function M(e,n){var t=(null!=n?n:T).outputBlocks.filter(function(n){return n.type===e}),r=t[t.length-1];if(r)return r}function B(e,n){var t;P(function(r){var i=M(e,r);i&&(t=i.id,n(i))}),t&&L(t)}function z(){return(z=(0,r._)(function(e,n){return(0,l.YH)(this,function(t){var o;return[2,(0,d.Lk)("outputs.run",(o=(0,r._)(function(t){var o,a,s,c,u,p,f,h,m,g;return(0,l.YH)(this,function(v){switch(v.label){case 0:if(T.runState!==ev.ll.IDLE&&T.runState!==ev.ll.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+T.runState);return s=T.outputBlocks.length>1&&T.outputBlocks[T.outputBlocks.length-1],(0,C.u4)(C.AZ.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(o=x.getContext())||void 0===o?void 0:o.repl.id,runId:T.runId,lastBlock:s?(0,i._)({type:s.type,isDone:s.isDone,endTime:s.endTime,startTime:s.startTime},s.type===ev._B.EXECUTION?{executionMode:s.data.executionMode,exitCode:s.data.exitCode,stderr:s.data.stderr}:{},s.type===ev._B.DEBUGGER?{debugState:s.data.debugState}:{}):void 0,previousBlockNumber:T.outputBlocks.length,previousBlocksAvgTimeMs:T.outputBlocks.length>1?Math.floor(T.outputBlocks.reduce(function(e,n){return n.endTime&&n.startTime?e+(n.endTime-n.startTime):e},0)):void 0}),c=(0,ey.A)(),P(function(e){e.runId=c,e.runningStage="BEFORE_RUN"}),I.emit(ev.sV.LOCAL_RUN,e),O(),!n&&(p=function(e,n,t,r){if(!(null==e?void 0:e.runs))return[];var i=[];if(n=n.slice(),r){var o=n.indexOf(r);-1!==o&&n.splice(o,1),n.splice(0,0,r)}var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var m,g=e.runs[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.fileParam||v.optionalFileParam){var w=(0,H.Z)(v.fileTypeAttrs);null===w&&v.language&&(w=H.Jh.from(v.language)),w&&(0,H.$h)(d,w)&&i.push({runner:v,filePath:d})}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var y=!0,b=!1,S=void 0;try{for(var Y,A=e.runs[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value;C.fileParam||i.push({runner:C})}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}return function(e){e.sort(function(e,n){var t=eA(e),r=eA(n);return t!==r?t-r:e.runner.interpreter===n.runner.interpreter?0:e.runner.interpreter?-1:1})}(i),i}(_.configs.current,[],0,(null===(u=_.configs.current)||void 0===u?void 0:u.entrypoint)||null)).length>0&&(n=p[0]),[4,k(f=R.vF.timeStart({runnerId:null==n?void 0:n.runner.id,filePath:null==n?void 0:n.filePath,isInterpreter:null==n?void 0:n.runner.interpreter,replLanguage:null===(a=x.getContext())||void 0===a?void 0:a.repl.language}),{runId:c,channelId:null==F?void 0:F.id,type:"outputs",runConfig:n,ctx:t})];case 1:if(v.sent(),T.runId!==c||"NONE"===T.runningStage||"SERVER"===T.runningStage)return[2];if(!F)throw Error("State is RUNNING but outputs is null?");if("open"!==F.status)return[2];return(h=W()).isStopped||h.stop(),m={},n&&(m.runnerId=n.runner.id,m.filePath=n.filePath),g=F,[4,(0,d.ce)(t,"timeToRunning",(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return e=performance.now(),g.send({runMain:m}),[4,new Promise(function(e){var n=g.onCommand(function(t){"state"===t.body&&(n(),e())})})];case 1:return t.sent(),n=performance.now()-e,f("run finished",{timeToRunningMs:n}),[2]}})}))];case 2:return v.sent(),[2]}})}),function(e){return o.apply(this,arguments)}))]})})).apply(this,arguments)}function W(){var e=E.mainClient.current,n=null==e?void 0:e.state.current;return{client:e,state:n,sendInput:function(n){return null==e?void 0:e.sendInput(n)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===n,isStopped:null==n||"terminated"===n}}function G(){return(G=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){if(T.runState===ev.ll.OFFLINE)return[2];if(n=W(),t=T.outputBlocks[T.outputBlocks.length-1].type===ev._B.DEBUGGER,n.isRunning&&t&&n.sendInput(e),T.runState!==ev.ll.IDLE&&T.runState!==ev.ll.RUNNING)throw Error("Can only send input when running or idle");if(!F)throw Error("State is not OFFLINE but outputs is null?");return"open"!==F.status||F.send({input:e}),[2]})})).apply(this,arguments)}return t=(n={packager:D,updateState:P,getRunningBlockOfType:M,updateRunningBlockOfType:B,emitBlockUpdate:L}).packager,o=n.updateState,a=n.getRunningBlockOfType,s=n.updateRunningBlockOfType,c=n.emitBlockUpdate,(u=[]).push(t.onOutput(function(e){var n=a(ev._B.PACKAGER);null==n||n.data.emitMessage(e.replace(/\n/g,"\n\r"))})),u.push(t.onError(function(e){s(ev._B.PACKAGER,function(n){n.error?n.error+="\n"+e:n.error=e})})),u.push(t.onStateChanged(function(e){if(e){var n=(0,ey.A)();o(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:ev.p$.EXPANDED,type:ev._B.PACKAGER,data:(0,i._)({},eY({maxHistorySize:ex}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),c(n)}else s(ev._B.PACKAGER,function(e){e.data.emitMessage(e_),e.localEndTime=Date.now(),e.isDone=!0})})),g=(p={debuggest:E,updateState:P,updateRunningBlockOfType:B,getRunningBlockOfType:M,emitRunState:N,emitBlockUpdate:L,stopCurrentRun:function(){P(function(e){e.runningStage="BEFORE_RUN"}),null==F||F.send({clear:{}})}}).debuggest,v=p.updateState,y=p.updateRunningBlockOfType,b=p.getRunningBlockOfType,S=p.emitBlockUpdate,Y=p.emitRunState,A=p.stopCurrentRun,g.mainClient.subscribe(function(e){e&&(null==m||m(),null==h||h(),m=e.state.subscribe(function(e){if("initializing"===e){A();var n=(0,ey.A)();v(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,type:ev._B.DEBUGGER,visualState:ev.p$.EXPANDED,data:(0,i._)({debugState:"paused"},eY({maxHistorySize:ex}))})}),S(n),Y(ev.ll.RUNNING)}"paused"===e&&y(ev._B.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&y(ev._B.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&Y(ev.ll.STOPPING),"terminated"===e&&(y(ev._B.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(e_),e.isDone=!0}),Y(ev.ll.IDLE))}),h=e.onOutput(function(e){var n=b(ev._B.DEBUGGER);null==n||n.data.emitMessage(e)}))}),x.openChannel({name:"output",service:"output"},function(e){var n=e.channel;return F=n,O(),n.onCommand(function(e){if(null!=e.state){var n=e.state===w.api.State.Stopped;"STOPPING"===T.runningStage&&n&&P(function(e){e.runningStage="NONE"}),n?"SERVER"===T.runningStage&&P(function(e){e.runningStage="NONE"}):P(function(e){e.runningStage="SERVER"}),O();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==T.outputBlocks.find(function(e){return e.type===ev._B.EXECUTION&&!e.isDone}))return;var t=e.outputBlockStartEvent,r=t.cgroup,o=t.executionMode,a=eC(t.measureStartTime),l=(0,ey.A)();P(function(e){e.outputBlocks.push({id:l,localStartTime:Date.now(),startTime:a,isDone:!1,type:ev._B.EXECUTION,visualState:ev.p$.EXPANDED,data:(0,i._)({cgroup:r,executionMode:o===w.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},eY({maxHistorySize:ex}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),L(l)}if(null!=e.output){var s=M(ev._B.EXECUTION);null==s||s.data.emitMessage(e.output)}if(null!=e.hint){var c=M(ev._B.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&B(ev._B.EXECUTION,function(n){n.data.stderr=(n.data.stderr||"")+e.stderr}),null!=e.error){var u=e.error;B(ev._B.EXECUTION,function(e){e.error?e.error+="\n"+u:e.error=u})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var d,p=e.outputBlockEndEvent.exitCode;(0,C.u4)(C.AZ.WS_CONSOLE_OUTPUT_RAN,{exitCode:p,replId:null===(d=x.getContext())||void 0===d?void 0:d.repl.id,runId:T.runId});var f=eC(e.outputBlockEndEvent.measureEndTime);B(ev._B.EXECUTION,function(e){e.data.emitMessage(e_),e.data.exitCode=p,e.localEndTime=Date.now(),e.endTime=f,e.isDone=!0})}}),function(){F=null,P(function(e){e.runId=(0,ey.A)(),e.runState=ev.ll.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(e_),e.localEndTime=Date.now(),e.isDone=!0;var n="Connection was lost";e.error?e.error+="\n"+n:e.error=n}})}),O(),U()}}),{mode:"outputs",run:function(e,n){return z.apply(this,arguments)},stopRun:function(){if(T.runState===ev.ll.RUNNING){var e=W();if(!e.isStopped){e.stop(),P(function(e){e.runningStage="STOPPING"}),O();return}if("BEFORE_RUN"===T.runningStage){P(function(e){e.runningStage="NONE"}),O();return}P(function(e){e.runningStage="STOPPING"}),O(),null==F||F.send({clear:{}})}},sendInput:function(e){return G.apply(this,arguments)},onLocalRun:function(e){return I.on(ev.sV.LOCAL_RUN,e),function(){I.removeListener(ev.sV.LOCAL_RUN,e)}},onStateChanged:function(e){return I.on(ev.sV.STATE_CHANGE,e),function(){return I.removeListener(ev.sV.STATE_CHANGE,e)}},getRunState:function(){return T.runState},getOutputBlocks:function(){return T.outputBlocks},clearBlockHistory:function(){P(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),U()},onBlockChanged:function(e){return I.on(ev.sV.BLOCK_CHANGED,e),function(){return I.removeListener(ev.sV.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return I.on(ev.sV.ALL_BLOCKS_CHANGED,e),function(){return I.removeListener(ev.sV.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,n){if(F&&"open"===F.status){var t=T.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("tried to resize terminal of non-existing block");t.isDone||F.send({resizeTerm:n})}},startBlock:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev.p$.EXPANDED,t=(0,ey.A)();return P(function(r){r.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:n,type:e,data:(0,i._)({},eY({maxHistorySize:ex}))})}),L(t),{id:t}},endBlock:function(e){P(function(n){var t=n.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("couldn't find a block");t.data.emitMessage(e_),t.localEndTime=Date.now(),t.isDone=!0}),L(e)},writeOutputToBlock:function(e,n){var t=T.outputBlocks.find(function(n){return n.id===e});t&&t.data.emitMessage(n)},writeErrorToBlock:function(e,n){P(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+n:r.error=n}),L(e)},setBlockVisualState:function(e,n){P(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.visualState=n}),L(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(n=function(e){var n=e.beforeRun,t=e.container,i=(0,f.Ay)(),o=ev.ll.OFFLINE,a="none",s=Math.random();function c(){var e=function(e){o!==e&&(o=e,i.emit(ev.sV.STATE_CHANGE,o))};if("none"!==a){e(ev.ll.RUNNING);return}e(ev.ll.IDLE)}function u(){return(u=(0,r._)(function(e){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(o!==ev.ll.IDLE&&o!==ev.ll.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+o);return s=t=Math.random(),i.emit(ev.sV.LOCAL_RUN,e),a="before-run",c(),[4,n(R.vF.timeStart({replLanguage:"html"}),{runId:t.toString(),type:"html"})];case 1:if(r.sent(),s!==t||"none"===a)return[2];return a="running",c(),a="none",c(),[2]}})})).apply(this,arguments)}return t.onConnectionStateChanged(function(e){e===x.KN.CONNECTED&&(a="none",c())}),{mode:"html",run:function(e){return u.apply(this,arguments)},stopRun:function(){if(o!==ev.ll.RUNNING)throw Error("stopRun must be called when running but got ".concat(o));a="none",c()},onStateChanged:function(e){return i.on(ev.sV.STATE_CHANGE,e),function(){i.removeListener(ev.sV.STATE_CHANGE,e)}},onLocalRun:function(e){return i.on(ev.sV.LOCAL_RUN,e),function(){i.removeListener(ev.sV.LOCAL_RUN,e)}},getRunState:function(){return o}}}({beforeRun:e.beforeRun,container:e.container})),!n)throw Error("mode not supported: "+e.mode);return n}({mode:s,container:ea,toolchain:eP,beforeRun:eO,packager:eL,debuggest:eW}),ej=function(e){var n=e.container,t=e.toolchain,s=e.fs,c=e.enableMultipleLSPClientsPerFile,u=void 0!==c&&c,d=new Map,p=new Map,h={},m=!0;function g(e){var n=h[e];if(!n)throw Error("LSPNix: removeLanguage called with lspId never configured");var t=n.client;if(t){n.client=null,t.destroy();var r=!0,i=!1,o=void 0;try{for(var l,s=d[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],m=p.get(u);if(m){m.delete(t),p.set(u,m);var g=!0,v=!1,w=void 0;try{for(var y,b=f[Symbol.iterator]();!(g=(y=b.next()).done);g=!0)(0,y.value)(Array.from(m))}catch(e){v=!0,w=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw w}}}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}n.closeChannel(),delete h[e]}function y(e,n){if(h[e])throw Error("LSPNix: addLanguage called with lspId already configured");h[e]={client:null,option:n,closeChannel:function(){}},m&&A(e)}var b=new Map;function S(e){if(!m)return!1;var n=h[e];return!!n&&!n.client}function Y(e,n,t){new Date().getTime()-t.getTime()<5e3?n<3?setTimeout(function(){S(e)&&A(e,n+1)},1e3*Math.pow(2,n)):R.vF.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){S(e)&&A(e)})}function A(e){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(e){var t,c,g,y,S,A,C,x,_=arguments;return(0,l.YH)(this,function(k){switch(k.label){case 0:if(t=_.length>1&&void 0!==_[1]?_[1]:0,!m)throw Error("LSPNix: Called startClient while not enabled");if(!h[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!b.get(e))return[3,2];return[4,b.get(e)];case 1:if(k.sent())return[2];k.label=2;case 2:if(g=(c=h[e]).client,c.closeChannel,y=c.option,g)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return S=function(){},A=new Promise(function(e){S=e}),b.set(e,A),C=[],x=n.openChannel({service:"lsp2",skip:function(e){var n=e.repl.language,t=n.startsWith("nix")||n.startsWith("html");return t||(R.vF.error("Skipped opening lsp channel for non-nix repl",{language:n,appService:"lspnix"}),S(null)),!t}},function(c){var g=c.channel,A=null,_=!1,k=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!_){_=!0,n||(S(null),b.delete(e)),C.forEach(function(e){return e()}),null==A||A.destroy(),(null===(o=h[e])||void 0===o?void 0:o.client)===A&&(h[e].client=null),n&&m||x();var t=!0,r=!1,i=void 0;try{for(var o,l,s=d[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],g=p.get(u);if(g&&A&&g.has(A)){g.delete(A),g.size?p.set(u,g):p.delete(u);var v=!0,w=!1,y=void 0;try{for(var Y,k=f[Symbol.iterator]();!(v=(Y=k.next()).done);v=!0)(0,Y.value)(Array.from(g))}catch(e){w=!0,y=e}finally{try{v||null==k.return||k.return()}finally{if(w)throw y}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}};if("open"!==g.status){R.vF.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});return}var D=new Date;return g.request({startLSP:{languageServerId:e}}).then(function(c){if(!c.ok){R.vF.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:c.error});return}if(m&&h[e]){C.push(g.onCommand(function(n){n.state===w.api.State.Stopped&&(R.vF.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),k(),m&&Y(e,t,D))}));var x=0;eu(n,function(){return x++<5&&m&&ec(h[e].option,y)&&"open"===g.status}).then(function(n){if(!h[e]){R.vF.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});return}if(!ec(h[e].option,y)){R.vF.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});return}if("open"!==g.status){R.vF.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});return}if(n.error){R.vF.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(_=n.error)||void 0===_?void 0:_.message});return}if(A=function(e){var n,t=e.connection,a=e.isSupportedFile,s=e.clientId,c=e.clientName,u=e.getWorkspaceConfiguration,d=e.onWorkspaceConfigurationChange,p=e.applyWorkspaceEdit,h=(0,f.Ay)();h.setMaxListeners(1/0);var m=null,g=er.b.OFFLINE,w=er.A.NOT_READY,y=null,b=!1,S=new Map,Y=new Map,A=null;function C(e){if(!m)throw Error("Expected rootUri");var n=e.slice(m.length+1);try{return decodeURIComponent(n)}catch(e){throw v.v4(function(t){t.setExtra("fragment_to_decode",n),v.Cp(e)}),e}}function x(e){if(!m)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return m+"/"+e}function _(e){g!==e&&(g!==er.b.INITIALIZED&&k(er.A.NOT_READY),g=e,h.emit("SERVER_STATE_CHANGE",g))}function k(e){w!==e&&(w=e,h.emit("SERVER_HEALTH_CHANGE",w))}function D(e){h.emit("SEND_NOTIFICATION",e),t.write(es(e))}function E(e){return I.apply(this,arguments)}function I(){return(I=(0,r._)(function(e){var n,r,a,c,u,d,p,f;return(0,l.YH)(this,function(l){if(c=void 0===(a=(r=void 0===(n=e.options)?{}:n).id)?el():a,u=r.signal,d=r.tap,p=(0,W._)(e,["options"]),!Number.isInteger(c))throw Error("Request ID must be an integer");return t.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(h.emit("REQUEST",{id:c,data:p}),null==u||u.addEventListener("abort",function(){T(c)},{once:!0}),t.write(es((0,o._)((0,i._)({},p),{id:c}))),null===A&&(A=setTimeout(function(){k(er.A.STALLED)},3e4)),f=new Promise(function(e){Y.set(c,{requestData:p,resolve:e})}),d&&d(f),[2,f.then(function(e){null!==A&&(clearTimeout(A),A=null),g!==er.b.INITIALIZED||e.cancelled||k(er.A.READY);var n=(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=en[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.supports(e))return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return new et})(s).onResponse(p.method,e);if("error"in n){var t=n.error,r=t.code,i=t.message,o=t.data;R.vF.error("LSP request failed",{code:r,lspId:s,errorMessage:i,data:JSON.stringify(o),requestData:p})}return n})])})})).apply(this,arguments)}function F(e,n){t.write(es((0,o._)((0,i._)({},n),{id:e})))}function T(e){var n=Y.get(e);n&&(h.emit("CANCEL_REQUEST",e),n.resolve({result:null,cancelled:!0}),Y.delete(e),D({method:"$/cancelRequest",params:{id:e}}))}var P=0,U=new L(function(e){var n=Y.get(e.id);if(e.id&&n){var t=n.resolve;Y.delete(e.id);var r=e.result,a=e.error;if((void 0!==r||a)&&h.emit("RESPONSE",e),void 0!==r){P=0,t({result:r,cancelled:!1});return}if(a){P++,t({error:a}),P>20&&(R.vF.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:s}),k(er.A.BROKEN),P=0);return}throw R.vF.error("LSP response message contained neither error nor result"),new q.A("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var l=e.method;if("client/registerCapability"===l){var c=e.params.registrations;if(!c||!Array.isArray(c))throw Error("Expected registrations array");c.forEach(function(e){var n=e.method;if(!n)throw Error("Expected registration method");if(!y)throw Error("Expected server capabilities");var t=e.registerOptions||!0;switch(n){case"textDocument/definition":y.definitionProvider=!0;break;case"textDocument/typeDefinition":y.typeDefinitionProvider=!0;break;case"textDocument/implementation":y.implementationProvider=!0;break;case"textDocument/references":y.referencesProvider=!0;break;case"textDocument/hover":y.hoverProvider=!0;break;case"textDocument/semanticTokens":y.semanticTokensProvider=t;break;case"textDocument/completion":y.completionProvider=t;break;case"textDocument/formatting":y.documentFormattingProvider=t;break;case"textDocument/rename":y.renameProvider=t;break;case"textDocument/codeAction":y.codeActionProvider=t;break;case"textDocument/signatureHelp":y.signatureHelpProvider=t;break;case"textDocument/didSave":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{save:t});break;case"textDocument/willSaveWaitUntil":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{change:t});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":y.executeCommandProvider=t;break;default:R.vF.info("Unexpected dynamically registered capability in LSP client",{method:n})}h.emit("SERVER_CAPABILITIES_CHANGE",y)}),F(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===l){p(e.params).then(function(n){F(e.id,{result:n,cancelled:!1})});return}if("textDocument/publishDiagnostics"===l){var d=C(e.params.uri),f=S.get(d);if(!f)return;var m=e.params.diagnostics;if(B()(f.diagnostics,m))return;f.diagnostics=m,h.emit("DIAGNOSTICS",{path:d,diagnostics:m});return}if("workspace/configuration"===l){var g,v=e.params,w=Array(v.items.length).fill(null),b=null!==(g=null==u?void 0:u())&&void 0!==g?g:null;b&&(w=v.items.map(function(e){return e.section?j()(b,e.section):b})),F(e.id,{result:w,cancelled:!1})}("window/logMessage"===l||"telemetry/event"===l)&&h.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===l&&h.emit("SEMANTIC_TOKENS_REFRESH")});function N(e){if(!y)throw Error("Expected client to be initialized");if(!y[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return y[e]}function O(e){return m&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(m):e.targetUri.startsWith(m)}):e}t.read(U.read);var M=function(){};return{initialize:function(e){var t=e.pwd,i=e.initializationOptions;return(0,r._)(function(){var e,r;return(0,l.YH)(this,function(o){switch(o.label){case 0:return _(er.b.INITIALIZING),m="file://".concat(t),[4,E({method:"initialize",params:{initializationOptions:i,capabilities:Q({configurationSupport:{serverToClient:!!u,clientToServer:!!d}}),processId:null,rootUri:m,workspaceFolders:[{name:m,uri:m}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return D({method:"initialized",params:{}}),y=e.result.capabilities,n=e.result.serverInfo,h.emit("SERVER_CAPABILITIES_CHANGE",y),_(er.b.INITIALIZED),d&&(M=d(function(e){D({method:"workspace/didChangeConfiguration",params:{settings:e}})})),u&&(r=u())&&D({method:"workspace/didChangeConfiguration",params:{settings:r}}),[2]}})})()},generateId:el,notify:{didOpen:function(e,n){if(!a(e))throw Error("Path not supported");var t,r=S.get(e);if(r&&0!==r.buffers){r.buffers++,S.set(e,r);return}var i=null!==(t=null==r?void 0:r.version)&&void 0!==t?t:0;S.set(e,{version:i,buffers:1,diagnostics:[]}),D({method:"textDocument/didOpen",params:{textDocument:{uri:x(e),languageId:eo(e,s),text:n,version:i}}})},didChange:function(e,n){var t=S.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.version++,D({method:"textDocument/didChange",params:{textDocument:{uri:x(e),version:t.version},contentChanges:n}})},didSave:function(e){if(!S.get(e))throw Error('Document for "'.concat(e,'" is not open'));N("textDocumentSync"),D({method:"textDocument/didSave",params:{textDocument:{uri:x(e)}}})},didClose:function(e){var n=S.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.buffers--,n.buffers>0||(D({method:"textDocument/didClose",params:{textDocument:{uri:x(e)}}}),S.delete(e))},cancelRequest:function(e){T(e)}},request:{completion:function(e,n,t,r){return N("completionProvider"),E({options:r,method:"textDocument/completion",params:{textDocument:{uri:x(e)},position:n,context:t}})},resolveCompletionItem:function(e){if(!N("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return E({method:"completionItem/resolve",params:e})},signatureHelp:function(e,n,t){return E({options:t,method:"textDocument/signatureHelp",params:{textDocument:{uri:x(e)},position:n}})},hover:function(e,n,t){return E({options:t,method:"textDocument/hover",params:{textDocument:{uri:x(e)},position:n}})},codeActions:function(e,n,t,r){var a=S.get(e);if(!a)throw Error("Document for path ".concat(e," is not open."));var l=a.diagnostics.filter(function(e){return(0,Z.Kk)(e.range,n)});return E({method:"textDocument/codeAction",params:{textDocument:{uri:x(e)},range:n,context:(0,o._)((0,i._)({},r),{diagnostics:l})},options:t})},resolveCodeAction:function(e){return E({method:"codeAction/resolve",params:e})},executeCommand:function(e,n){return E({method:"workspace/executeCommand",params:{command:e,arguments:n}})},format:function(e,n){return N("documentFormattingProvider"),E({method:"textDocument/formatting",params:{textDocument:{uri:x(e)},options:n}})},formatRange:function(e,n,t){return N("documentRangeFormattingProvider"),E({method:"textDocument/rangeFormatting",params:{textDocument:{uri:x(e)},range:n,options:t}})},findDefinitions:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("definitionProvider"),[4,E({options:t,method:"textDocument/definition",params:{textDocument:{uri:x(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findTypeDefinitions:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("typeDefinitionProvider"),[4,E({options:t,method:"textDocument/typeDefinition",params:{textDocument:{uri:x(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findImplementations:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("implementationProvider"),[4,E({options:t,method:"textDocument/implementation",params:{textDocument:{uri:x(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findReferences:function(e,n,t){return N("referencesProvider"),E({method:"textDocument/references",params:{textDocument:{uri:x(e)},position:n,context:t}})},rename:function(e,n,t,r){return N("renameProvider"),E({options:r,method:"textDocument/rename",params:{textDocument:{uri:x(e)},position:n,newName:t}})},prepareRename:function(e,n){var t=N("renameProvider");if("boolean"==typeof t||!t.prepareProvider)throw Error("LSP server does not support prepare rename");return E({method:"textDocument/prepareRename",params:{textDocument:{uri:x(e)},position:n}})},documentHighlights:function(e,n,t){return(0,r._)(function(){return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:t,method:"textDocument/documentHighlight",params:{position:n,textDocument:{uri:x(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,n){return(0,r._)(function(){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:n,method:"textDocument/documentSymbol",params:{textDocument:{uri:x(e)}}})];case 1:if(!("result"in(t=r.sent())))return[2,t];if(t.result)return[2,{result:t.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,n){if(!N("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return E({options:n,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:x(e)}}})},semanticTokensDelta:function(e,n,t){var r=N("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!==(0,G._)(r.full)||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return E({options:t,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:x(e)},previousResultId:n}})},semanticTokensRange:function(e,n,t){if(!N("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return E({options:t,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:x(e)},range:n}})},onDiagnostics:(0,f.gT)(h,"DIAGNOSTICS"),onServerStateChange:(0,f.gT)(h,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,f.gT)(h,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,f.gT)(h,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,f.gT)(h,"REQUEST"),onResponse:(0,f.gT)(h,"RESPONSE"),onCancelRequest:(0,f.gT)(h,"CANCEL_REQUEST"),onSendNotification:(0,f.gT)(h,"SEND_NOTIFICATION"),onReceiveNotification:(0,f.gT)(h,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,f.gT)(h,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in _(er.b.EXITING),S.clear(),Y)T(Number(e));M(),E({method:"shutdown"}).then(function(){D({method:"exit"}),_(er.b.EXITED),h.removeAllListeners()})},isDestroyed:function(){return b},destroy:function(){for(var e in b=!0,S.clear(),Y)T(Number(e));M(),_(er.b.EXITED),h.removeAllListeners()},getServerState:function(){return g},getServerHealth:function(){return w},getServerCapabilities:function(){return y},getServerInfo:function(){return n},getDiagnostics:function(e){var n=S.get(e);if(!n)throw Error("File with path ".concat(e," is not open."));return n.diagnostics},isOpen:function(e){return S.has(e)},documentUriToPath:C,pathToDocumentURI:x,isSupportedFile:a,getLanguageId:function(e){return eo(e,s)},clientId:s,clientName:c}}({connection:{read:function(e){"open"===g.status&&g.onCommand(function(n){n.output&&e(n.output)})},write:function(e){if("open"!==g.status){(null==A?void 0:A.isDestroyed())&&R.vF.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}g.send({input:e})},didClose:function(){return"open"!==g.status}},clientId:e,clientName:h[e].option.name,isSupportedFile:function(e){return(0,H.fu)(e,y)},applyWorkspaceEdit:(w=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){return(n=e.edit,A)?[2,(0,z.i)({edit:n,fs:s,client:A})]:[2,{applied:!1}]})}),function(e){return w.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null===(e=y.config)||void 0===e?void 0:e.configurationJson))return null;var e,n=null;try{n=JSON.parse(y.config.configurationJson)}catch(e){R.vF.error("Failed to parse LSP workspace configuration",{configurationJson:y.config.configurationJson})}return n}}),null===(x=y.config)||void 0===x?void 0:x.initializationOptionsJson)try{E=JSON.parse(y.config.initializationOptionsJson)}catch(e){R.vF.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:y.config.initializationOptionsJson})}var c,w,x,_,E,I=A.initialize({pwd:n.workingDirectory,initializationOptions:E}).catch(function(n){if((null==n?void 0:n.message)!=="Initialize request cancelled")throw R.vF.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==n?void 0:n.message}),n});C.push(A.onServerHealthChange(function(n){if(n===er.A.BROKEN&&(R.vF.info("LSP: Server health broken",{lspId:e}),k(),m)){R.vF.info("LSP: retrying after server health broken",{lspId:e}),Y(e,t,D);return}}),A.onServerStateChange((c=(0,r._)(function(n){var t,r,i,o,s,c,f,m,v,w,Y,C,x,_,D;return(0,l.YH)(this,function(l){switch(l.label){case 0:if("open"!==g.status)return R.vF.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:n}),k(),[2];if(!A)return R.vF.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:n}),k(),[2];if(!ec(h[e].option,y))return R.vF.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:n}),k(),[2];if(n===er.b.EXITED)return R.vF.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),k(),[2];if(n!==er.b.INITIALIZED)return[2];return[4,I];case 1:if(l.sent(),"open"!==g.status)return R.vF.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),k(),[2];S(A),b.delete(e),h[e].client=A,t=!0,r=!1,i=void 0;try{for(o=d[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)if(f=(c=(0,a._)(s.value,2))[0],m=c[1],(0,H.fu)(f,y)&&(v=p.get(f),u||!v||!v.size)){w=v?v.add(A):new Set([A]),p.set(f,w),Y=!0,C=!1,x=void 0;try{for(_=m[Symbol.iterator]();!(Y=(D=_.next()).done);Y=!0)(0,D.value)(Array.from(w))}catch(e){C=!0,x=e}finally{try{Y||null==_.return||_.return()}finally{if(C)throw x}}}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return[2]}})}),function(e){return c.apply(this,arguments)})))})}}),function(e){k(e.willReconnect)}}),h[e].closeChannel=x,[2]}})})).apply(this,arguments)}function x(e){var n=null==e?void 0:e.languageServers;if(!n||0===n.length){var t=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(h)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;g(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},c=!0,u=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value;s[m.id]=m}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}var v=!0,w=!1,b=void 0;try{for(var S,Y=Object.keys(h)[Symbol.iterator]();!(v=(S=Y.next()).done);v=!0){var A=S.value;s[A]||g(A)}}catch(e){w=!0,b=e}finally{try{v||null==Y.return||Y.return()}finally{if(w)throw b}}var C=!0,x=!1,_=void 0;try{for(var k,D=Object.keys(s)[Symbol.iterator]();!(C=(k=D.next()).done);C=!0){var E=k.value,R=h[E],I=s[E];if(!R){y(E,I);continue}ec(R.option,I)||(g(E),y(E,I))}}catch(e){x=!0,_=e}finally{try{C||null==D.return||D.return()}finally{if(x)throw _}}}function _(){return(_=(0,r._)(function(){var e;return(0,l.YH)(this,function(n){try{e=t.configs.current,x(e),t.configs.subscribe(x)}catch(e){R.vF.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return function(){_.apply(this,arguments)}(),{restart:function(e){if(m){var n=h[e];if(n){if(n.client){var t=!0,r=!1,i=void 0;try{for(var o,l,s=d[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],g=p.get(u);if(g){g.delete(n.client),p.set(u,g);var v=!0,w=!1,y=void 0;try{for(var b,S=f[Symbol.iterator]();!(v=(b=S.next()).done);v=!0)(0,b.value)(Array.from(g))}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}n.closeChannel(),null===(o=n.client)||void 0===o||o.destroy(),n.client=null,A(e)}}},disable:function(){if(m){m=!1;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.values(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.closeChannel(),null===(u=o.client)||void 0===u||u.destroy(),o.client=null;var l=!0,s=!1,c=void 0;try{for(var u,f,g=d[Symbol.iterator]();!(l=(f=g.next()).done);l=!0){var v=(0,a._)(f.value,2),w=v[0],y=v[1];if(p.has(w)){p.delete(w);var b=!0,S=!1,Y=void 0;try{for(var A,C=y[Symbol.iterator]();!(b=(A=C.next()).done);b=!0)(0,A.value)([])}catch(e){S=!0,Y=e}finally{try{b||null==C.return||C.return()}finally{if(S)throw Y}}}}}catch(e){s=!0,c=e}finally{try{l||null==g.return||g.return()}finally{if(s)throw c}}}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},enable:function(){if(!m){m=!0;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.keys(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;A(o)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},onClient:function(e,n){d.has(e)||d.set(e,[]),null===(s=d.get(e))||void 0===s||s.push(n);var t=!1,r=[],i=p.get(e);if(i&&i.size)r.push.apply(r,(0,k._)(Array.from(i)));else{var o=!0,a=!1,l=void 0;try{for(var s,c,f=Object.values(h)[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var m=c.value;if((0,H.fu)(e,m.option)&&m.client&&(r.push(m.client),!u))break}}catch(e){a=!0,l=e}finally{try{o||null==f.return||f.return()}finally{if(a)throw l}}}return Promise.resolve().then(function(){!t&&r.length&&n(r)}),function(){t=!0;var r,i=null!==(r=d.get(e))&&void 0!==r?r:[];d.set(e,i.filter(function(e){return e!==n}))}}}}({container:ea,toolchain:eP,fs:eS,enableMultipleLSPClientsPerFile:void 0!==M&&M}),eZ=(0,O.A)({container:ea,fs:eS}),eq=function(e){var n,t,i=e.container,o=e.nixService,a=e.toolchain;function s(e){return c.apply(this,arguments)}function c(){return(c=(0,r._)(function(e){return(0,l.YH)(this,function(n){switch(n.label){case 0:if(e&&(t=void 0),!t){var i;t=new Promise((i=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,o.listPackages()];case 1:if(null==(t=r.sent())?void 0:null===(n=t.packages)||void 0===n?void 0:n.some(function(e){return e.name.startsWith("pkgs.postgresql")}))return[3,3];return[4,o.addPackages(["pkgs.postgresql"])];case 2:return r.sent(),e(),[3,4];case 3:e(),r.label=4;case 4:return[2]}})}),function(e){return i.apply(this,arguments)}))}return[4,t];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=(0,r._)(function(e){return(0,l.YH)(this,function(n){if(!a)return[2,s(e)];if(e&&(t=void 0),!t){var i;t=new Promise((i=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(null==(t=a.modules)?void 0:null===(n=t.current)||void 0===n?void 0:n.some(function(e){return e.id.startsWith("postgresql")}))return[3,2];return[4,a.addModule("postgresql-16")];case 1:return r.sent(),e(),[3,3];case 2:e(),r.label=3;case 3:return[2]}})}),function(e){return i.apply(this,arguments)}))}return[2]})})).apply(this,arguments)}return e.useNixmodule,{ensureNixPsqlPackageInstalled:s,ensureNixPsqlModuleInstalled:u,run:(n=(0,r._)(function(e){var n,t,r,o,a,s,c,d,p,f,h,m,g;return(0,l.YH)(this,function(l){switch(l.label){case 0:return n=e.query,t=e.connectionString,[4,u()];case 1:l.sent(),r=(0,Y.A)({container:i}),o=[],a=null,s=new S.e(function(e){return o.push(e)}),c=null,d=!1,p=new Promise(function(e){var n=r.onStateChanged(function(t){var r=t.state,i=t.stderrBuffer;if(r===w.api.State.Running){d=!0;return}d&&(c=i,n(),e())})}),r.onOutput(function(e){try{s.process(e)}catch(n){a||(a=n,v.Cp(n,function(n){return n.setExtra("chunk",e)}))}}),l.label=2;case 2:return l.trys.push([2,,5,6]),[4,r.request({args:["psql",t,"--csv","--command",n],splitStderr:!0})];case 3:return f=l.sent(),[4,p];case 4:return l.sent(),f.error&&!c&&(c=f.error),s.flush(),[3,6];case 5:return r.dispose(),[7];case 6:if(c)return[2,{columns:s.headers(),rows:o,error:c}];if(a)return h=a.message,[2,{columns:null!==(m=s.headers())&&void 0!==m?m:[],rows:o,error:h}];return[2,{columns:null!==(g=s.headers())&&void 0!==g?g:[],rows:o,error:null}]}})}),function(e){return n.apply(this,arguments)})}}({container:ea,nixService:eT,toolchain:eP,useNixmodule:ei}),eK=(0,eD.A)({container:ea}),{session:eb,presence:ek,packager:eL,container:ea,fs:eS,runner:eV,debuggest:eW,dotReplit:eF,nixService:eT,lspnix:ej,git:eZ,psql:eq,userEvents:ed,replspaceApi:eU,toolchain:eP,ports:eG,secrets:eK});return null==e$||e$.span.end(),m(eJ),function(){m(null),setTimeout(function(){eJ.container.destroy()},500)}},[e]),t}},75877:(e,n,t)=>{"use strict";t.d(n,{A:()=>C});var r={};t.r(r),t.d(r,{checkAndTrack:()=>Y,ensureTrackedFile:()=>y,storeOp:()=>b});var i=t(47534),o=t(82436),a=t(13454),l=t(66622),s=t(60762),c=t(5482),u=t(68633),d=t(97285),p=t(20837),f={};function h(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.info("ot client dataloss",(0,p._)({case:n,startTime:t.startTime,opsSinceFlush:t.opsSinceFlush,whileReconnecting:t.whileReconnecting,replid:t.replId,filePath:t.filePath},r))}var m={replsList:function(){return"dataLossRepls"},replFiles:function(e){return"dataLossReplFiles".concat(e)},latestOp:function(e,n){return"dataLossLatestOp--".concat(e,"--").concat(n)},latestFlushedOp:function(e,n){return"dataLossLatestFlushed--".concat(e,"--").concat(n)},latestOwnOp:function(e,n){return"dataLosslatestOwnOp--".concat(e,"--").concat(n)},opsSinceFlush:function(e,n){return"dataLossOpsSinceFlush--".concat(e,"--").concat(n)}};function g(){var e=d.A.get(m.replsList(),"array");return e||(e=[],d.A.set(m.replsList(),e)),e}function v(e){var n=d.A.get(m.replFiles(e),"array");return n||(n=[],d.A.set(m.replFiles(e),n)),n}function w(e){var n=v(e),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;"string"==typeof l&&function(e,n){d.A.remove(m.latestOp(e,n)),d.A.remove(m.latestFlushedOp(e,n)),d.A.remove(m.latestOwnOp(e,n));var t=v(e).filter(function(e){return e!==n});d.A.set(m.replFiles(e),t)}(e,l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}d.A.remove(m.replFiles(e));var s=g().filter(function(n){return n!==e});d.A.set(m.replsList(),s)}function y(e){var n,t=e.replId,r=e.filePath;(n=g()).includes(t)||(n.length>20?(w(n[0]),n[0]=t):n.push(t),d.A.set(m.replsList(),n));var i=v(t);i.includes(r)||(i.length>20?(w(i[0]),i[0]=r):i.push(r),d.A.set(m.replFiles(t),i))}function b(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.op;(function(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.logger,o=e.isReconnecting,a=h.bind(null,i),l="".concat(t,"--").concat(n);f[l]||(f[l]={replId:t,filePath:n,timer:null,startTime:null,whileReconnecting:0,opsSinceFlush:0});var s=f[l];if("latestFlushedOp"===r){delete f[l];var c=s.startTime;if(c){var u=Date.now()-c;u>6e4&&a("flush_delay_received",s,{elapsed:u})}var d=s.timer;d&&(clearTimeout(d),s.timer=null)}else{s.opsSinceFlush+=1,o&&(s.whileReconnecting+=1);var p,m=null!==(p=s.startTime)&&void 0!==p?p:Date.now();s.startTime=m,s.timer||(s.timer=setTimeout(function(){a("flush_delay_timeout",s)},6e4)),150===s.opsSinceFlush?a("flush_delay_small",s):1e3===s.opsSinceFlush&&a("flush_delay_large",s)}})({filePath:n,replId:t,opType:r,logger:e.logger,isReconnecting:e.isReconnecting}),d.A.set(m[r](t,n),i)}var S={};function Y(e){return A.apply(this,arguments)}function A(){return(A=(0,a._)(function(e){var n,t,r,i,o,p,f,h;return(0,c.YH)(this,function(g){var v;return n=e.filePath,t=e.replId,r=e.serverVersion,i=e.serverContent,o=e.fetchOps,p=e.logger,S[n+t]||(S[n+t]=!0,f=function(e,n){var t={latestOp:null,latestFlushedOp:null,latestOwnOp:null},r=Object.keys(t),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,p=d.A.get(m[u](e,n),"object");p&&p&&(void 0===p?"undefined":(0,s._)(p))==="object"&&"number"==typeof p.crc32&&"number"==typeof p.version&&(t[u]=p)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t}(t,n),h=u.str(i)>>>0,Object.keys(f).forEach((v=(0,a._)(function(e){var n,t,i;return(0,c.YH)(this,function(a){switch(a.label){case 0:if(!(n=f[e]))return[2];if(r<n.version)return p.info("ot client dataloss",{opType:e,case:"server_forgot"}),[2];if(r===n.version)return h!==n.crc32&&p.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o(n.version,n.version)];case 2:return t=l._.apply(void 0,[a.sent(),1])[0],[3,4];case 3:return i=a.sent(),p.info("ot client dataloss",{opType:e,case:"error_fetching_op",originalError:String(i)}),[2];case 4:if(!t)return p.info("ot client dataloss",{opType:e,case:"op_not_found"}),[2];return t.crc32!==n.crc32&&p.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2]}})}),function(e){return v.apply(this,arguments)}))),[2]})})).apply(this,arguments)}function C(e){var n=e.container;return(0,i.Ay)({container:n,dataloss:r,track:o.u4})}},26681:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(66622),i=t(30758);function o(e,n){var t=(0,r._)((0,i.useState)(null),2),o=t[0],a=t[1];return(0,i.useEffect)(function(){var t=!1;return e.readFile(n).then(function(e){t||a(e)}),function(){t=!0}},[e,n]),o}},56948:(e,n,t)=>{"use strict";t.d(n,{D:()=>i,O:()=>r});var r="users.noreply.replit.com",i="users.noreply.github.com"},51302:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,Y:()=>r});var r=(0,t(25161).F)(null);function i(e,n,t){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=n.output)&&void 0!==i?i:"",l=n.error,s=t?o:Date.now(),c="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:s,cached:t,key:c})}},55902:(e,n,t)=>{"use strict";t.d(n,{A:()=>L});var r=t(13454),i=t(66622),o=t(27189),a=t(5482),l=t(32889),s=t.n(l),c=t(80475),u=t(23405),d=t(7942),p=t(45009),f=t(30632);function h(){var e=(0,p._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,p._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g=(0,f.J1)(h()),v=(0,f.J1)(m(),g),w=t(71676),y=t(56948);function b(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var n,t,r,i,o,l,s,u,d,p,f,h,m,g,b,S,Y,A,C,x,_,k;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.defaultUsername,t=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===w.V||void 0===w.V?void 0:w.V.query({query:v,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var D,E;return f=(p=null!==(d=null==(u=(null!==(s=a.sent())&&void 0!==s?s:{data:null}).data)?void 0:u.currentUser)&&void 0!==d?d:{username:n,id:t,firstName:null,lastName:null}).id,h=p.firstName,m=p.lastName,g=p.username,f&&g&&(S=g,h&&(S=h),m&&(S=m),h&&m&&(S=h+" "+m),A={provider:c.HJ.REPLIT_DEFAULT,email:"".concat(f,"-").concat(g,"@").concat(y.O),name:S,username:g,avatar:null!==(Y=null==u?void 0:null===(b=u.currentUser)||void 0===b?void 0:b.image)&&void 0!==Y?Y:null},l.set(A.provider,A)),(C=null==u?void 0:null===(o=u.currentUser)||void 0===o?void 0:null===(i=o.gitHubInfo)||void 0===i?void 0:i.userInfo)&&C.email&&C.username&&(null==u?void 0:null===(E=u.currentUser)||void 0===E?void 0:null===(D=E.gitHubInfo)||void 0===D?void 0:D.isAppCurrentlyInstalled)&&(k={provider:c.HJ.GITHUB,email:C.email,name:null!==(x=C.name)&&void 0!==x?x:C.username,username:C.username,avatar:null!==(_=C.avatarUrl)&&void 0!==_?_:null},l.set(k.provider,k)),r(l),[2]}})})).apply(this,arguments)}var Y=t(78542),A=t(20837),C=t(55195),x=t(39312),_=t(25161),k=t(21980),D=function(){function e(n,t){(0,Y._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=n,this.debounceTime=t}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){var n=this.cache.get(e);if(!n)throw Error("No value found for key: ".concat(e));return n.result},n.set=function(e,n){var t=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:n,timeout:setTimeout(function(){return t.cache.delete(e)},this.ttl),pending:!0};n.finally(function(){return i.pending=!1}),this.cache.set(e,i)},n.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,n=!0,t=!1,r=void 0;try{for(var o,a=this.cache[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,i._)(o.value,2),s=l[0],c=l[1];c.pending?e.set(s,c):clearTimeout(c.timeout)}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},n.clear=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.cache.clear(),this.lastInvalidation=0},e}(),E=t(51302);function R(){return(R=(0,r._)(function(e,n,t,r){var i,o,l,s,u,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:c.uA.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),l=void 0,(s=Promise.race([new Promise(function(e){return l=setTimeout(e,9e4)}),e.request({exec:{env:t,args:n,noUserEnv:!0}})])).finally(function(){o(),clearTimeout(l)}),[4,s];case 2:if(void 0===(u=a.sent()))return k.vF.error("Git request timed out.",(0,A._)({appService:"git",command:n,gitEnv:JSON.stringify(t),TIMEOUT:9e4},r)),[2,{output:i,error:c.uA.TIMEOUT}];if(!u.ok&&u.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:c.uA.CHANNEL_CLOSED}];if(u.error||!u.ok)return[2,{output:d="".concat(u.error,"\n").concat(i),error:(0,c.sg)(d)}];return[2,{output:i,error:null}];case 3:return p=a.sent(),C.v4(function(e){e.setTag("service","git"),e.setExtra("command",n),e.setExtra("env",t),r&&e.setExtra("options",r),C.Cp(p)}),[2,{output:"JS Error\n".concat(String(p)),error:c.uA.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var I=function(){function e(n){var t=this,i=n.container,o=n.getEnv,l=n.awaitPromise;(0,Y._)(this,e),this.cache=new D(3e4,2e3),this.running=(0,_.F)(!1),this.queue=[],i.openChannel({service:"exec"},function(e){var n,i,s=e.channel,c=(n=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!l)return[3,2];return[4,l];case 1:i.sent(),i.label=2;case 2:return t=Date.now(),[4,function(e,n,t,r){return R.apply(this,arguments)}(s,["bash","-c",Array.isArray(e)?e.join(" && "):e],o(),n)];case 3:if(r=i.sent(),(0,E.L)(e,r,!1,t),r.error)return[2,r];return[2,{output:(null==n?void 0:n.verbatim)?r.output:r.output.trim(),error:null}]}})}),function(e,t){return n.apply(this,arguments)}),u=function(e,n){if(0===e.length)throw Error("Expected at least one command");var r=Array.isArray(e)?e.join(" && "):e;if(t.cache.has(r)){var i=t.cache.get(r);return i.then(function(n){(0,E.L)(e,n,!0)}),i}var o=c(r,n);return t.cache.set(r,o),o},d=function(e,n){return t.cache.clear(),c(e,n)},p=(i=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:if(!(t.queue.length>0)||"open"!==s.status)return[3,7];if(!(e=t.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return n.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(d)];case 4:return[4,e.fn(c)];case 5:n.sent(),n.label=6;case 6:return[3,0];case 7:return 0===t.queue.length&&t.running.set(!1),[2]}})}),function(){return i.apply(this,arguments)});return t.running.current&&p(),t.running.subscribe(function(e){e&&p()})})}var n=e.prototype;return n.add=function(e,n){var t,i=(0,x.A)();return this.queue.push({type:n,fn:(t=(0,r._)(function(n){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e(n)];case 1:return t=r.sent(),i.resolve(t),[2]}})}),function(e){return t.apply(this,arguments)})}),this.running.current||this.running.set(!0),i.promise},n.wrap=function(e,n){var t=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.add(function(n){return e.apply(void 0,[n].concat((0,o._)(i)))},n)}},e}(),F=t(96367),T=t(19327),P=".git";function L(e){var n,t=e.container,l=e.fs,p=e.provideProfiles,f=void 0===p?b:p,h=(0,u.Ay)();h.setMaxListeners(1/0);var m=(0,c.iM)(),g=!1,v=new Map,w=null,y=t.getContext(),S=(n=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,f({defaultUsername:null==y?void 0:null===(n=y.currentUser)||void 0===n?void 0:n.username,defaultUserId:null==y?void 0:null===(t=y.currentUser)||void 0===t?void 0:t.id,onProfiles:function(n){var t=!0,r=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),u=s[0],d=s[1];v.set(u,d),h.emit(c.JC.NEW_PROFILE)}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}n.has(c.HJ.GITHUB)||v.delete(c.HJ.GITHUB);var p=v.get(c.HJ.REPLIT_DEFAULT),f=v.get(c.HJ.GITHUB);if(w&&!e&&(e=w.provider),e===c.HJ.GITHUB&&f)w=f;else{if(!p)return;w=p}h.emit(c.JC.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)}),Y=new I({container:t,getEnv:function(){return m},awaitPromise:S(c.HJ.GITHUB)});h.on(c.JC.FS_CHANGE,function(){return Y.cache.invalidate()}),h.on(c.JC.FORCED_REFRESH,function(){return Y.cache.invalidate()}),h.on(c.JC.NEW_PROFILE,function(){return Y.cache.invalidate()}),h.on(c.JC.CHANGED_PROFILE,function(){return Y.cache.invalidate()});var A=function(){var e,n=t.getContext(),r=null==n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.id;if(null!=r){var i="[init]\ndefaultBranch = main\n[user]\n";""!==m.GIT_AUTHOR_EMAIL&&(i+="email = ".concat(m.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==m.GIT_AUTHOR_NAME&&(i+="name = ".concat(m.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var o="/run/replit/user/".concat(r,"/.config/git");null!=r&&t.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(o," && echo '").concat(i,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(o,"/config")))}};return t.onConnectionStateChanged(function(e){e===d.KN.CONNECTED&&A()}),h.on(c.JC.CHANGED_PROFILE,function(){null!=w&&(m=(0,c.iM)({author:{username:w.name,email:w.email}}),A())}),{getEnv:function(){return m},getProfiles:function(){return Array.from(v.values())},hasProfile:function(e){return v.has(e)},getProfile:function(e){var n=v.get(e);if(!n)throw Error("Fetched a profile that has not been setup!");return n},addProfile:function(e){v.set(e.provider,e),h.emit(c.JC.NEW_PROFILE)},getCurrentProfile:function(){return w},setCurrentProfile:function(e){var n=v.get(e);if(!n)throw Error("Can't set a non-existent profile!");w=n,m=(0,c.iM)({author:{username:n.name,email:n.email}}),h.emit(c.JC.CHANGED_PROFILE)},onProfileAdded:function(e){var n=function(){e(Array.from(v.values()))};return h.on(c.JC.NEW_PROFILE,n),function(){h.off(c.JC.NEW_PROFILE,n)}},onCurrentProfileChanged:function(e){var n=function(){e(w)};return h.on(c.JC.CHANGED_PROFILE,n),function(){h.off(c.JC.CHANGED_PROFILE,n)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return S(e)},onRefresh:function(e){g||(function(e,n,t){var i,l,u,d,p,f,h,m,g,v,w=!1,y=!1,b=(i=function(){return t.emit(c.JC.FS_CHANGE)},d=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,p=l.cooldown,f=l.maxWait,h=null,m=!1,g=s()(function(e){return h=setTimeout(function(){return h=null},p),m=!1,u=i.apply(void 0,(0,o._)(e))},d,{maxWait:f}),(v=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return null!==h?u:(m||(m=!0),g(n))}).cancel=function(){null!==h?(clearTimeout(h),h=null):(g.cancel(),m=!1)},v.flush=function(){return null!==h?(clearTimeout(h),h=null,u):g.flush()},v.isPending=function(){return m},v.isInCooldown=function(){return null!==h},v);function S(){return(S=(0,r._)(function(){var t;return(0,a.YH)(this,function(r){return t=!0,n.watchDir(F.Dl,{onChange:function(r){!w&&r.find(function(e){return e.filename===P&&e.type===T.pt.Directory})&&(function(){if(!w){w=!0;var t=!0;n.watchDir(P,{onChange:function(){t?t=!1:b()},onMoveOrDelete:function(){w=!1,b()},onError:function(n,t){w=!1,RegExp(".+permission denied","im").test(n.message)||e.unrecoverableError(n,t)}})}}(),t||b()),t&&(t=!1)},onError:function(n,t){return e.unrecoverableError(n,t)}}),[2]})})).apply(this,arguments)}(function(){S.apply(this,arguments)})(),n.onStatusChange(function(e){w&&(e===T.sn.Syncing&&b.isInCooldown()?y=!0:e===T.sn.Clean&&(y||b(),y=!1))})}(t,l,h),g=!0);var n=function(){return e(c.JC.FS_CHANGE)},i=function(){return e(c.JC.FORCED_REFRESH)},u=function(){return e(c.JC.NEW_PROFILE)},d=function(){return e(c.JC.CHANGED_PROFILE)};return h.on(c.JC.FS_CHANGE,n),h.on(c.JC.FORCED_REFRESH,i),h.on(c.JC.NEW_PROFILE,u),h.on(c.JC.CHANGED_PROFILE,d),function(){h.off(c.JC.FS_CHANGE,n),h.off(c.JC.FORCED_REFRESH,i),h.off(c.JC.NEW_PROFILE,u),h.off(c.JC.CHANGED_PROFILE,d)}},forceRefresh:function(){h.emit(c.JC.FORCED_REFRESH)},isBusy:function(){return Y.running.current},onBusyChange:function(e){var n=!1,t=s()(e,200);return Y.running.subscribe(function(e){n&&!e?(t(!1),n=!1):!n&&e&&(t(!0),n=!0)})},init:Y.wrap(c.rv,"write"),isInitialized:Y.wrap(c.$g,"read"),lsFiles:Y.wrap(c.TR,"read"),status:Y.wrap(c.Dx,"read"),log:Y.wrap(c.FR,"read"),findDefaultBranches:Y.wrap(c.du,"read"),listBranches:Y.wrap(c.z0,"read"),setBranchUpstream:Y.wrap(c.qE,"write"),stageFiles:Y.wrap(c.Q,"write"),commit:Y.wrap(c.om,"write"),switchBranch:Y.wrap(c.He,"write"),branchExists:Y.wrap(c.xd,"read"),createBranch:Y.wrap(c.nI,"write"),getRemotes:Y.wrap(c.g$,"read"),fetch:Y.wrap(c.FW,"write"),canMergeBranches:Y.wrap(c.TL,"read"),pull:Y.wrap(c.C4,"write"),push:Y.wrap(c.Z3,"write"),getRepositoryState:Y.wrap(c.Ew,"read"),getFileContents:Y.wrap(c.Pb,"read"),addRemote:Y.wrap(c.is,"write"),removeRemote:Y.wrap(c.jz,"write"),setRemoteURL:Y.wrap(c.CY,"write"),getBranch:Y.wrap(c.j5,"read"),restoreFiles:Y.wrap(c.QA,"write"),lastFetched:Y.wrap(c.G_,"read"),merge:Y.wrap(c.pk,"write"),mergeContinue:Y.wrap(c.WC,"write"),mergeAbort:Y.wrap(c.DZ,"write"),getConflictingFiles:Y.wrap(c.gP,"read"),getMergingRefs:Y.wrap(c.U4,"read"),getFilesForCommit:Y.wrap(c.uD,"read"),getCommit:Y.wrap(c.WE,"read"),restoreCommit:Y.wrap(c.Iw,"write"),escapeHatchGitExecRead:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"read"),escapeHatchGitExecWrite:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"write"),getChangesBetweenCommits:Y.wrap(c.wP,"read")}}},36736:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(66622),i=t(27189),o=t(30758),a=t(96489),l=t.n(a),s=t(80475),c=t(26190),u=t(32904),d=t(24481);function p(e){var n,t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1],g=(0,c.A)(h),v=null===(t=null!==(n=p.keepStaleResult)&&void 0!==n?n:p.refresh)||void 0===t||t,w=(0,o.useCallback)(function(e){l()(e,g.current)||m(e)},[g]),y=(0,u.A)(function(){return e},(0,i._)(a)),b=(0,d.A)().git,S=(0,o.useRef)(null),Y=(0,o.useCallback)(function(){S.current?S.current():v||w(null);var e=!1;y(b).then(function(n){e||(w(n),S.current=null)}).catch(function(){e||(w({error:s.uA.UNKNOWN}),S.current=null)}),S.current=function(){e=!0,S.current=null,v||w(null)}},[w,y,b,v]);return(0,o.useEffect)(function(){return Y()},[Y]),(0,o.useEffect)(function(){var e;if(null===(e=p.refresh)||void 0===e||e)return b.onRefresh(Y)},[b,Y,p.refresh]),h}},18552:(e,n,t)=>{"use strict";t.d(n,{aK:()=>i,mW:()=>a,md:()=>o,sc:()=>l});var r=t(84856),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,n){var t=e.tokenTypes[n];return t&&i.includes(t)?t:null}function l(e,n){for(var t=[],r=0;r<e.tokenModifiers.length;r++)if(n&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&t.push(i)}return t}},38940:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(84856);let i=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},54735:(e,n,t)=>{"use strict";t.d(n,{A:()=>r,b:()=>i});var r=function(e){return e.NOT_READY="NOT_READY",e.READY="READY",e.STALLED="STALLED",e.BROKEN="BROKEN",e}({}),i=function(e){return e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED",e}({})},55814:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(66622),i=t(30758),o=t(89022),a=t(83733),l=t(20837),s=t(43952),c=t(83748),u=t.n(c),d=t(21980),p=t(54735);function f(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet,m=t(24481),g=t(14652);function v(e){var n=(0,a.A)(),t=(0,m.A)().lspnix,c=(0,r._)((0,i.useState)([]),2),v=c[0],w=c[1],y=(0,g.i)();return(0,i.useEffect)(function(){if(e){var n=t.onClient(e,w);return function(){n(),w([])}}},[t,e]),(0,i.useEffect)(function(){return(0,o.xW)(v.map(function(t){return function(e){var n=e.client,t=e.replId,r=e.language,i=e.debug;if(!h.has(n)){h.add(n);var a=new Map,c=function(e){var i,o=n.getServerState(),a=null!==(i=n.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===p.b.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:t,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:n.clientId}},m=u()(function(e,n){var t=f(n);t>1e4&&d.vF.time("LSP unresponsive request",t,c(n))}),g=setInterval(function(){a.forEach(function(e){m(e.id,e)})},2e3);return(0,o.xW)([n.onRequest(function(e){var n=e.id,t=e.data;(i||.01>Math.random())&&a.set(n,{id:n,method:t.method,startTime:performance.now()})}),n.onResponse(function(e){var n=e.id,t=e.error,r=a.get(n);null!=r&&(a.delete(n),d.vF.time("LSP request",f(r),(0,s._)((0,l._)({},c(r)),{result:null==t?"ok":"error"})))}),n.onCancelRequest(function(e){var n=a.get(e);null!=n&&(a.delete(e),d.vF.time("LSP request",f(n),(0,s._)((0,l._)({},c(n)),{result:"cancelled"})))}),function(){return clearInterval(g)},function(){return h.delete(n)}])}}({client:t,replId:n,language:t.getLanguageId(e),debug:y})}))},[v,n,e,y]),v}},64595:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(66622),i=t(30758),o=t(89022),a=t(69834);function l(e){var n=(0,r._)((0,i.useState)(null),2),t=n[0],l=n[1];return(0,i.useEffect)(function(){var n=function(){l((0,a.z)(e.map(function(e){return(0,a.A)(e)})))};return n(),(0,o.xW)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return n()})}))},[e]),t}},23033:(e,n,t)=>{"use strict";t.d(n,{ZA:()=>v,Zd:()=>b,gH:()=>y,kg:()=>k,s$:()=>S,th:()=>A});var r=t(13454),i=t(20837),o=t(43952),a=t(27189),l=t(5482),s=t(55195),c=t(96489),u=t.n(c),d=t(51297),p=t(32889),f=t.n(p),h=t(54867),m=t(25161),g=t(10768),v=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function w(e,n){return new Set(Array.from(e).filter(function(e){return!n.has(e)}))}var y=function(e){return e.FORWARDED="FORWARDED",e.INTERNAL_ONLY="INTERNAL_ONLY",e.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",e.MISCONFIGURED="MISCONFIGURED",e.CONFIG_MISSING="CONFIG_MISSING",e}({});function b(e){var n=e.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,h.A)(n)}}function S(e){var n;return null!==(n=e.isLocalhost)&&void 0!==n&&n}function Y(e){return e===g.wF}function A(e){return e===g.no}function C(e){return Y(e.localPort)}function x(e){return e?w(v,new Set(e.map(function(e){return b(e.configuration)}))):v}function _(e){var n=e.localPort,t=x(e.portsState.current);if(0!==t.size){var r=t.has(80),i=t.has(n);return r?80:i?n:Array.from(t).sort()[0]}}function k(e){var n=e.container,t=e.dotReplit,c=(0,m.F)(null),p=(0,m.F)(!1),g=(0,m.F)("only-global"),v=f()((0,r._)(function(){var e;return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!c.current)return[2];return e=c.current.filter(function(e){return!e.isTemporary}).map(function(e){var n=e.configuration.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return(0,i._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},S(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,h.A)(n)}}).filter(Boolean).sort(function(e,n){return e.localPort-n.localPort}),[4,t.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return n.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function y(){p.set(!0),v()}return function(e){var n=e.container,t=e.dotReplit,r=e.portsState,l=e.writeDotReplitPortsConfig,c=e.isThisServiceUpdatingDotReplit,p=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,n){var t,r;return(null!==(t=e.configuration.localPort)&&void 0!==t?t:0)-(null!==(r=n.configuration.localPort)&&void 0!==r?r:0)})}var h=[];function m(e){try{var n=function(e){var n=e.portsState,t=e.portInfo,r=e.forwardPortsAutomatically;if(null===n.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var a={pid:t.pid,cgroup:t.cgroup,address:t.address,cmdline:t.cmdline},l="127.0.0.1"===a.address,s=Y(t.port),c=A(t.port),u=n.current.find(function(e){return e.configuration.localPort===t.port});if(void 0!==u)return{isOpen:!0,isTemporary:!!s||u.isTemporary,processInfo:a,configuration:(0,o._)((0,i._)({},u.configuration),{isLocalhost:l})};if(c)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:t.port,isLocalhost:l,isVnc:s}};if("none"===r.current||"only-global"===r.current&&l||s)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"INTERNAL_ONLY",localPort:t.port,isLocalhost:l,isVnc:s}};var d=_({localPort:t.port,portsState:n});return void 0===d?{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:t.port,isLocalhost:l,isVnc:s}}:{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:d,isLocalhost:l,isVnc:s}}}({portsState:r,portInfo:e,forwardPortsAutomatically:p}),t=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.jM)(r,function(i){var o=i.findIndex(function(n){return n.configuration.localPort===e.port});return -1===o?(o=r.length,t=!0):u()(r[o].configuration,n.configuration)||(t=!0),i[o]=n,f(i)})}),t&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}function g(e){try{var n=!1;r.update(function(t){if(!t)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.jM)(t,function(t){var r,i=t.findIndex(function(n){return n.configuration.localPort===e.port});if(-1!==i){var o=t[i];o.isTemporary||(r=o.configuration.localPort,32768<=r&&r<=60999)?(t.splice(i,1),n=!0):o.isOpen=!1}})}),n&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}n.onPortOpened(function(e){null===r.current?h.push({type:"portOpen",portInfo:e}):m(e)}),n.onPortClosed(function(e){null===r.current?h.push({type:"portClose",portInfo:e}):g(e)}),t.watch(function(e){var n,t=e.config,l=null!==(n=null==t?void 0:t.ports)&&void 0!==n?n:[];if(!0===c.current){var s=r.current;if(!s||l.length!==s.length)return;l.every(function(e,n){var t,r=s[n];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(t=b(r.configuration))&&void 0!==t?t:0)})&&c.set(!1);return}r.update(function(e){e||(e=[]);var n=new Set(l.map(function(e){return e.localPort}).filter(function(e){return null!=e})),t=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),s=w(n,t),c=(m=new Set((0,a._)(Array.from(n)).concat((0,a._)(Array.from(r)))),new Set(Array.from(t).filter(function(e){return m.has(e)}))),u=[],d=!0,p=!1,h=void 0;try{for(var m,g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0)!function(){var n=g.value,t=e.find(function(e){return e.configuration.localPort===n}),r=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));if(!r)return u.push((0,o._)((0,i._)({},t),{configuration:{type:"CONFIG_MISSING",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:C(t.configuration)}}));var a=t.configuration;a=null!=r.externalPort&&0!==r.externalPort?{type:x(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:t.configuration.localPort,externalPort:r.externalPort,isLocalhost:S(t.configuration),isVnc:C(t.configuration)}:{type:"INTERNAL_ONLY",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:C(t.configuration)},u.push((0,o._)((0,i._)({},t),{configuration:a}))}()}catch(e){p=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw h}}var y=!0,b=!1,A=void 0;try{for(var _,k=s[Symbol.iterator]();!(y=(_=k.next()).done);y=!0)!function(){var e,n=_.value,t=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));var r=null!=t.externalPort&&0!==t.externalPort?t.externalPort:void 0;if(void 0!==r){var i,o=x(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:o?"FORWARDED":"MISCONFIGURED",localPort:n,externalPort:r,isLocalhost:null!==(i=t.exposeLocalhost)&&void 0!==i&&i,isVnc:Y(n)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:n,isLocalhost:null!==(e=t.exposeLocalhost)&&void 0!==e&&e,isVnc:Y(n)}})}()}catch(e){b=!0,A=e}finally{try{y||null==k.return||k.return()}finally{if(b)throw A}}return f(u)}),h.length>0&&(h.forEach(function(e){var n=e.type,t=e.portInfo;"portOpen"===n?m(t):"portClose"===n&&g(t)}),h=[])})}({container:n,dotReplit:t,portsState:c,writeDotReplitPortsConfig:y,isThisServiceUpdatingDotReplit:p,forwardPortsAutomatically:g}),{tryExposingPortAutomatically:function(e){var n=_({localPort:e,portsState:c});void 0!==n&&(c.update((0,d.jM)(function(t){if(t){var r=t.find(function(n){return n.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:r.configuration.isLocalhost,isVnc:Y(e)})}})),y())},updateDotReplitPortsMapping:function(e,n,t){c.update((0,d.jM)(function(r){var i,o=null==r?void 0:r.find(function(n){return n.configuration.localPort===e}),a=t;void 0===a&&(a=null!==(i=null==o?void 0:o.configuration.isLocalhost)&&void 0!==i&&i);var l=void 0!==n?{type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:a,isVnc:Y(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:Y(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),y()},removeDotReplitPortsMapping:function(e,n){c.update((0,d.jM)(function(t){var r;void 0!==(r=void 0!==n?null==t?void 0:t.findIndex(function(t){return t.configuration.localPort===e&&("FORWARDED"===t.configuration.type||"MISCONFIGURED"===t.configuration.type)&&t.configuration.externalPort===n}):null==t?void 0:t.findIndex(function(n){return n.configuration.localPort===e}))&&(null==t||t.splice(r,1))})),y()},portsState:c,setForwardPortsAutomatically:function(e){g.set(e)}}}},29835:(e,n,t)=>{"use strict";t.d(n,{LO:()=>u,ff:()=>s,kP:()=>c,w:()=>l});var r=t(30758),i=t(95123),o=t(23033),a=t(24481);function l(e){var n=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n?n.filter(function(e){return e.isOpen&&e.configuration.type===o.gH.FORWARDED}):[]},[n])}function s(e){var n=(0,a.A)().ports,t=(0,i.A)(n.portsState);return(0,r.useMemo)(function(){if(t)return t.find(function(n){return n.configuration.type===o.gH.FORWARDED&&n.configuration.externalPort===e})},[t,e])}function c(e){return u((0,a.A)().ports,e)}function u(e,n){var t=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n&&t?t.filter(function(e){var t;return null!==(t=e.isOpen&&(null==n?void 0:n.endsWith(e.processInfo.cgroup)))&&void 0!==t&&t}):[]},[t,n])}},57810:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(66622),i=t(30758),o=t(24481);function a(){var e=(0,o.A)().presence,n=(0,r._)((0,i.useState)(e.getFollowedUser()),2),t=n[0],a=n[1];return(0,i.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),t}},12139:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>S,ps:()=>v});var r=t(13454),i=t(5482),o=t(49711),a=t(45009);function l(){var e=(0,a._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,t(30632).J1)(l()),c=t(40174),u=c.ZU.Object({id:c.ZU.String(),user_id:c.ZU.Number(),ssh_hostname:c.ZU.String(),token:c.ZU.String()}),d=t(35642),p=t(71676),f=t(21980),h=t(87925),m=t(82436),g=["http:","https:","vscode:"];function v(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return n=e.replId,[4,(0,d.$6)(function(){return(0,h.B2)("/data/repls/".concat(n,"/get_ssh_token"))})];case 1:if((t=r.sent()).error)return[2,{type:"error",message:t.error.toString()}];if(!o.WT.Check(u,t.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:t.value}]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:if(!p.V)throw Error("Expected apollo");return[4,p.V.query({query:s})];case 1:if(!(null==(e=n.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function b(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function S(e){var n=e.container,t=e.fs,o=e.openMultipleFiles,a=e.openMultipleURLs,l=e.enableReplspaceSshTokenPassthrough,s=new Set,c=!1,u=null;return n.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var n=e.replspaceApiOpenMultipleFiles,t=n.files,r=n.urls.flatMap(function(e){var n;try{n=new URL(e)}catch(e){return[]}return g.includes(n.protocol)?[n]:[]});o&&t.length>0&&(b(),o({paths:t})),a&&r.length>0&&(b(),a({urls:r.map(function(e){return e.toString()})}))}})}),n.openChannel({service:"git",name:"git"},function(e){var n,a=e.channel;return a.onCommand((n=(0,r._)(function(e){var n,r,l,d,p,h,m,g,v,w,S,Y,A,C,x,_;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(n=e.replspaceApiOpenFile).file,l=n.waitForClose,d=n.nonce,o)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return l&&a.send({replspaceApiCloseFile:{file:r,nonce:d}}),window.alert("tried to open ".concat(r," but failed")),[2];return p=window.prompt("Enter a commit message"),[4,t.writeFile(r,null!=p?p:"")];case 2:if(i.sent(),!l)return[2];return[3,5];case 3:if(b(),o({paths:[r]}),!l||!u)return[2];return[4,u(r)];case 4:i.sent(),i.label=5;case 5:return[4,t.flush()];case 6:if(i.sent(),"open"!==a.status)return[2];return a.send({replspaceApiCloseFile:{file:r,nonce:d}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return h=function(){var n;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:"",nonce:null===(n=e.replspaceApiGetGitHubToken)||void 0===n?void 0:n.nonce}})},[4,function(){return y.apply(this,arguments)}()];case 8:if(null==(m=i.sent()).gitHubInfo)return h(),[2];if(!s.size)return h(),f.vF.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(g=function(){var n,t;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:null===(n=m.gitHubInfo)||void 0===n?void 0:n.accessToken,nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},c)return g(),[2];v=!1,w=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=s[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},S=!0,Y=!1,A=void 0;try{for(C=s[Symbol.iterator]();!(S=(x=C.next()).done)&&(_=x.value,!v);S=!0)_(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!v){if(v=!0,!e){h(),w();return}n&&(c=e),g(),w()}})}catch(e){Y=!0,A=e}finally{try{S||null==C.return||C.return()}finally{if(Y)throw A}}i.label=9;case 9:return[2]}})}),function(e){return n.apply(this,arguments)})),function(){}}),n.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var t,r;(0,m.u4)(m.AZ.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null===(r=n.getContext())||void 0===r?void 0:null===(t=r.repl)||void 0===t?void 0:t.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),void 0!==l&&l&&n.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var n,t=e.channel;t.onCommand((n=(0,r._)(function(e){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return r=(n=e.replspaceApiSSHTokenGetRequest).nonce,o=n.replid,a=function(e){"open"===t.status&&t.send({replspaceApiSSHTokenGetResponse:e})},l=function(){a({token:"",nonce:r})},[4,v({replId:o})];case 1:if(s=i.sent(),"open"!==t.status)return[2];if("error"===s.type)return l(),f.vF.error(s.message),[2];return a({token:s.data.token,nonce:r,sshHostname:s.data.ssh_hostname}),[2]}})}),function(e){return n.apply(this,arguments)}))}),{onConfirmSendToken:function(e){var n=function(n){return e(n)};return s.add(n),function(){s.delete(n)}},setWaitForFileClose:function(e){u=e}}}},43650:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(66622),i=t(30758),o=t(50670),a=t(24481);function l(){var e=(0,a.A)().toolchain,n=(0,r._)((0,i.useState)(null),2),t=n[0],l=n[1];return(0,i.useEffect)(function(){var n=!1;return e.getRegistry().then(function(e){n||l(e)}).catch(function(e){o.vF.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){n=!0}},[e]),t}},41827:(e,n,t)=>{"use strict";t.d(n,{j:()=>s});var r=t(20837),i=t(30758),o=t(63679),a=t(26190),l=t(24481);function s(e){var n=(0,l.A)().userEvents,t=(0,o._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),s=(0,a.A)(e);return(0,i.useCallback)(function(e,i){t&&n.emit(e,(0,r._)({},s.current,i))},[n,s,t])}},27382:(e,n,t)=>{"use strict";t.d(n,{Ov:()=>i,QS:()=>s,Sb:()=>l,ZM:()=>a,y$:()=>o});var r=t(60762),i="Run Repl",o=function(e){return e.startsWith("Run ")?e.slice(4):e};function a(e){return e.replace(/\/nix\/store\/[^/]+\/bin\/([^\s]+)/,"$1")}function l(e){return["PARSE_ERROR","NOT_FOUND","READ_FILE"].includes(e)}function s(e){return(void 0===e?"undefined":(0,r._)(e))==="object"&&null!==e&&"code"in e&&"string"==typeof e.code&&l(e.code)&&(void 0===e.message||"string"==typeof e.message)&&(void 0===e.extras||"string"==typeof e.extras)}},22380:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(94086),i=t(47096),o=t(99182),a=t(10168),l=t(32842),s=t(40172),c=t(93532),u=t(31955),d=t(40889),p=t(8367),f=t(16021),h=t(79653),m=(0,a.x)({connectButtonRow:[l.wp.flex.rowReverse]});function g(e){var n=e.onConfirm,t=(0,o.A)(),a="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(t,"/.ssh/replit");return(0,r.FD)(u.ui,{gap:12,children:[(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.Y9,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.FD)(d.EY,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",t,"/.ssh/config"]})]}),(0,r.Y)(i.A,{code:a,header:".ssh/config",multiline:!0}),(0,r.Y)(c.N,{text:"You can find this information later in the SSH docs",icon:(0,r.Y)(h.A,{})}),(0,r.Y)(p.S,{css:m.connectButtonRow,children:(0,r.Y)(s.$n,{text:"I updated my config",iconLeft:(0,r.Y)(f.A,{}),onClick:n,colorway:"primary",stretch:!1})})]})}},78385:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(66622),i=t(30758),o=t(24481),a=t(12975),l=t(73225);function s(e){var n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=function(e){var n,t,l,s,c=(0,a.A)(),u=(n=(0,o.A)().container,l=(t=(0,r._)((0,i.useState)("/home/runner"),2))[0],s=t[1],(0,i.useEffect)(function(){n.exec("pwd").then(function(e){var n;e.output&&s((null===(n=e.output)||void 0===n?void 0:n.replace("\n",""))||"")})},[n]),l);if(!c)return"".concat(e,"://vscode-remote/ssh-remote");var d=c.sshUser,p=c.sshHostname,f=c.sshPort,h="".concat(e,"://vscode-remote/ssh-remote+").concat(d,"@").concat(p,":").concat(f).concat(u);try{return window.encodeURI(h)}catch(e){return h}}(e),u=(0,l.A)("ssh","workspace-ssh-connect-to-vscode-config-tour"),d=u.register;return(0,i.useEffect)(function(){d()},[d]),{openEditor:(0,i.useCallback)(function(){if(u.shouldDisplay){s(!0);return}window.location.href=c},[u.shouldDisplay,c]),onConfirmConfig:(0,i.useCallback)(function(){s(!1),u.dismiss(),window.location.href=c},[u,c]),isConfigModalOpen:t,closeConfigModal:(0,i.useCallback)(function(){s(!1)},[])}}},12975:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(83733),i=t(32670),o=t(24481);function a(){var e=(0,o.A)().container,n=(0,r.A)(),t=(0,i.A)(e,{fallbackToReplCo:!1});if(!t)return null;var a=new URL(t).host,l=a.indexOf(":"),s="22";return -1!==l&&(a=a.substring(0,l),s="2022"),{sshUser:n,sshHostname:a,sshPort:s}}},84984:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=t(94086),i=t(52757);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overflow:"hidden"}}]})}},99047:(e,n,t)=>{"use strict";t.d(n,{J:()=>u,f:()=>c});var r=t(20837),i=t(94086),o=t(8143),a=t(99622),l=t(52757),s=t(24955),c=t(32842).U3-1;function u(e){var n=e.targetElement,t=e.transparent,u=e.disableAnimation,p=(0,a.my)(n);if(null==p||null==n)return null;var f=(0,l.AH)({backgroundColor:t?"transparent":s.LU.backgroundOverlay,zIndex:c,position:"fixed",transition:u?"all":"all 0.5s ease-out"});return(0,o.createPortal)((0,i.FD)(i.FK,{children:[(0,i.Y)("div",{id:"wat",css:[d((0,r._)({side:"left-top"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"top-right"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"right-bottom"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"bottom-left"},p)),f]})]}),document.body)}function d(e){var n=e.side,t=e.rect,r=e.docWidth,i=e.docHeight;switch(n){case"left-top":return(0,l.AH)({top:0,left:0,width:Math.max(0,t.left),height:Math.max(0,t.bottom)});case"top-right":return(0,l.AH)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.left),"px)"),height:Math.max(0,t.top)});case"right-bottom":return(0,l.AH)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.top),"px)")});case"bottom-left":return(0,l.AH)({bottom:0,left:0,width:Math.max(0,t.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.bottom),"px)")})}}},80242:(e,n,t)=>{"use strict";t.d(n,{w:()=>g});var r=t(20837),i=t(43952),o=t(66622),a=t(94086),l=t(30758),s=t(8143),c=t(41322),u=t(18682),d=t(14349),p=t(30921),f=t(24955),h=t(65599),m=t(95570);function g(e){var n=e.targetElement,t=e.activeStep,g=e.goto,v=e.currentStepIndex,w=e.totalSteps,y=e.done,b=e.disableAnimation,S=e.placement,Y=e.cypressCloseData,A=e.onClickOutside,C=e.innerRef,x=e.width,_=e.colorway,k=e.doneText,D=(0,o._)((0,l.useState)(null),2),E=D[0],R=D[1],I=(0,o._)((0,l.useState)(null),2),F=I[0],T=I[1],P=(0,c.E)(n,E,{placement:void 0===S?"right":S,modifiers:[{name:"arrow",options:{element:F,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),L=(0,d.A)(function(){var e;null===(e=P.update)||void 0===e||e.call(P)},{type:"throttle",wait:100});(0,l.useEffect)(function(){L(n)},[n,L]),(0,l.useImperativeHandle)(C,function(){return{updateTooltip:function(){var e;null===(e=P.update)||void 0===e||e.call(P)}}});var U=(0,u.A)(function(){A&&A()},[A]);return(0,s.createPortal)((0,a.FD)("div",(0,i._)((0,r._)({ref:function(e){U.current=e,R(e)},style:P.styles.popper,css:{transition:b?"all":"all 0.5s ease-out",zIndex:p.v+1,width:null!=x?x:320}},P.attributes.popper),{children:[(0,a.Y)(m.p,{title:t.title,subtitle:t.subtitle,icon:t.icon,content:t.content,onDismiss:y,currentStepIndex:v,onCurrentStepChange:g,totalSteps:w,cypressCloseData:void 0===Y?"tour-tooltip-close-button":Y,hideCloseButton:t.hideCloseButton,hideNavigation:t.hideNavigation,colorway:_,doneText:k}),(0,a.Y)("span",{style:P.styles.arrow,css:[h.RE,{"&::after":_?{backgroundColor:f.ky[_].dimmest,border:"1px solid "+f.ky[_].dimmer}:{backgroundColor:f.LU.backgroundDefault,border:"1px solid "+f.LU.backgroundHighest}}],ref:T})]})),document.body)}},30921:(e,n,t)=>{"use strict";t.d(n,{A:()=>p,v:()=>u});var r=t(94086),i=t(30758),o=t(99622),a=t(99047),l=t(10168),s=t(32842),c=t(76554),u=a.f+1,d=(0,l.x)({inlinePlaceholder:[s.wp.visibility.hidden,{pointerEvents:"none"}],portal:[s.wp.position.absolute,s.wp.zIndex(u)]});function p(e){var n=e.isActive,t=e.children,a=(0,i.useRef)(null),l=(0,i.useRef)(null),s=(0,o.my)(a.current),u=null==s?void 0:s.rect,p=n&&null!=u;return(0,r.FD)(r.FK,{children:[(0,r.Y)("div",{ref:a,css:p?d.inlinePlaceholder:void 0,children:t}),p?(0,r.Y)(c.Z,{children:(0,r.Y)("div",{ref:l,css:d.portal,style:{left:u.left,top:u.top,height:u.height,width:u.width},children:t})}):null]})}},60099:(e,n,t)=>{"use strict";t.d(n,{f:()=>y});var r=t(66622),i=t(94086),o=t(30758),a=t(72653),l=t(40525),s=t(26190),c=t(99622),u=t(99047),d=t(70744),p=t(80242),f=t(4723),h=t(76985),m=t(95570);function g(){var e,n,t=(0,f.rA)(),r=t.activeStep,o=t.goto,a=t.totalSteps,l=t.currentStepIndex,s=t.done;if(null==r)return null;var c=null!==(n=null===(e=r.modalConfig)||void 0===e?void 0:e.width)&&void 0!==n?n:320;return(0,i.Y)(h.a,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,transparent:!0,children:(0,i.Y)(m.p,{title:r.hideTitle?void 0:r.title,"aria-label":r.title,subtitle:r.subtitle,icon:r.icon,content:function(){return(0,i.Y)(i.FK,{children:"function"==typeof r.content?(0,i.Y)(r.content,{}):r.content})},hideCloseButton:r.hideCloseButton,hideNavigation:r.hideNavigation,onDismiss:function(){return s()},currentStepIndex:l,onCurrentStepChange:o,totalSteps:a,cypressCloseData:"tour-tooltip-close-button",compact:!0,colorway:r.colorway,containerStyle:{width:c}})})}var v=t(65640),w=d.O5.Provider;function y(e){var n,t,f=e.children,h=e.tour,m=e.onStep,y=e.onDone,b=e.colorway,S=(0,r._)((0,o.useState)(function(){return(0,d.Ws)({tour:h})}),1)[0],Y=(0,a.md)(d.MN,{store:S}),A=(0,a.md)(d.$h,{store:S});if(-1===A)throw Error("Current tour step is not in tour steps");var C=(0,r._)((0,l.en)({variables:{name:h.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:h.id,seen:!0}}}),1)[0],x=(0,a.Xr)(d._,{store:S}),_=(0,o.useRef)();(0,o.useEffect)(function(){_.current=Y},[Y]);var k=(0,a.Xr)(d.vs,{store:S}),D=(0,a.md)(d.Tf,{store:S}),E=(0,a.md)(d.DA,{store:S}),R=(0,a.Xr)(d.$t,{store:S});window.startTour=function(){v.log("starting tour:",h.id,"from",h.steps[0].id),R()};var I=(0,a.md)(d.Yg,{store:S}),F=(0,a.md)(d.b5,{store:S}),T=(0,s.A)(m),P=(0,s.A)(y);(0,o.useEffect)(function(){return S.sub(d.Nc,function(){var e,n=S.get(d.Nc);n&&(null===(e=T.current)||void 0===e||e.call(T,n))})},[S,T,P]);var L=(0,o.useRef)(!1);(0,o.useEffect)(function(){var e;!L.current&&Y&&Y.id===h.steps[0].id&&(null===(e=T.current)||void 0===e||e.call(T,Y.id),L.current=!0)},[Y,T,h]),(0,o.useEffect)(function(){return S.sub(d._,function(){var e,n=S.get(d._),t=S.get(d.Nc);n&&(t&&(null===(e=P.current)||void 0===e||e.call(P,t)),C())})},[S,C,P]);var U=(0,l.D$)({variables:{tours:h.id},onCompleted:function(e){var n;S.set(d._,!!(null==e?void 0:null===(n=e.currentUser)||void 0===n?void 0:n.toursSeen[0].seen))}}).loading,N=(0,a.Xr)(d.cS,{store:S});(0,o.useEffect)(function(){N(U)},[N,U]);var O=(0,a.md)(d.MN,{store:S}),M=(0,a.Xr)(d.Hl,{store:S}),B=(0,a.md)(d.GM,{store:S}),H=(0,a.Xr)(d.GM,{store:S});if((0,c.CW)({targetElement:D,activeTourStep:O,goToNextStep:M,setTourPausedReason:H}),!E||!Y)return(0,i.Y)(w,{value:S,children:f});if(Y.isModal)return(0,i.FD)(w,{value:S,children:[(0,i.Y)(g,{}),f]});var z=0===A||!!(null===(n=_.current)||void 0===n?void 0:n.isModal)||!!(null===(t=h.options)||void 0===t?void 0:t.disableAnimation);return(0,i.FD)(w,{value:S,children:[D?(0,i.FD)(i.FK,{children:["user"===B?null:(0,i.Y)(u.J,{targetElement:D,transparent:Y.hideOverlay||"async"===B,disableAnimation:z}),!Y.hideTooltip&&(0,i.Y)(p.w,{targetElement:D,activeStep:Y,currentStepIndex:I,done:function(){return x(!0)},goto:function(e){k(e+A-I)},totalSteps:F,disableAnimation:z,colorway:b,doneText:h.doneText})]}):null,f]})}},99622:(e,n,t)=>{"use strict";t.d(n,{AM:()=>d,CW:()=>u,my:()=>p});var r=t(66622),i=t(30758),o=t(19551),a=t.n(o),l=t(14349),s=t(4723),c=t(75165);function u(e){var n=e.targetElement,t=e.activeTourStep,r=e.goToNextStep,o=e.setTourPausedReason,a=(0,c.Av)(),l=(0,i.useRef)(void 0),s=(0,i.useCallback)(function(){(null==t?void 0:t.waitToAdvanceOn)==="webviewPortOpened"?(o("async"),l.current=a.subscribe(function(e){e&&o("user")})):r()},[null==t?void 0:t.waitToAdvanceOn,r,o,a]);(0,i.useEffect)(function(){if(null!=n&&null!=t&&t.advanceOnTargetClick)return n.addEventListener("click",s),function(){var e;n.removeEventListener("click",s),null===(e=l.current)||void 0===e||e.call(l),l.current=void 0}},[n,t,s])}function d(e){var n=(0,s._$)(),t=(0,r._)((0,i.useState)(!1),2),o=t[0],a=t[1];(0,i.useEffect)(function(){n||o||(e(),a(!0))},[n,e,o])}function p(e){var n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1],s=(0,l.A)(function(){e&&o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});return(0,i.useEffect)(function(){e&&s(e)},[e,s]),(0,i.useEffect)(function(){if(e){var n=a()(function(){o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n),n.cancel()}}},[e]),t}},41732:(e,n,t)=>{"use strict";t.d(n,{N:()=>r});var r=function(e){return e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE",e}({})},8478:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(41011);let s=function(e){var n=e.level,t=e.fontFamily,s=e.fontWeight,c=e.foreground,u=e.align,d=e.truncate,p=e.className,f=e.children,h=e.style,m=(0,o._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children","style"]),g=(0,r._)({fontSize:l.A.levels[n],fontFamily:l.A.fontFamily[void 0===t?"sans-serif":t],fontWeight:l.A.fontWeight[void 0===s?"medium":s],color:l.A.foreground[void 0===c?1:c],textAlign:void 0===u?"left":u},h);return void 0!==d&&d&&(g=(0,i._)((0,r._)({},g),{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"100%"})),(0,a.Y)("h".concat(n),(0,i._)((0,r._)({},m),{style:g,className:void 0===p?"":p,children:f}))}},48091:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(94086),i=t(10168),o=t(32842),a=t(98541),l=function(e){var n=e.className,t=e.text,i=e.iconLeft,o=e.onClick;return(0,r.Y)(a.a,{onClick:o,className:n,colorway:"yellow",css:s.self,text:t,iconLeft:i})},s=(0,i.x)({self:[o.wp.borderRadius(4),{padding:"4px 3px"}]})},72412:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(60049),i=t(30758),o=t(54867),a=t(99655),l=t(16170),s=t(92517);function c(e){var n=e.sendInput,t=e.paste,c=(0,r.useRouter)(),u=(0,a.Po)(c);(0,i.useEffect)(function(){if(u){var e=function(e,t){n(t)?(0,l.XE)(e):(0,l.Cf)(e)},r=function(e){"unknown"===e||(0,o.A)(e)},i=function(n){(0,l.V)(n,function(n){var i=n.type;switch(i){case s.tF.SHELL_INSERT_INPUT:e(n.id,n.input);break;case s.tF.SHELL_COMMAND:r(n.command);break;case s.tF.SHELL_PASTE_TEXT:t(n.text)?(0,l.XE)(n.id):(0,l.Cf)(n.id);break;default:(0,o.A)(i)}})};return window.addEventListener("message",i),function(){window.removeEventListener("message",i)}}},[u,n,t])}},39959:(e,n,t)=>{"use strict";t.d(n,{El:()=>E,GK:()=>D,qX:()=>k});var r=t(13454),i=t(78542),o=t(62640),a=t(95766),l=t(15711),s=t(9219),c=t(57093),u=t(39487),d=t(20837),p=t(43952),f=t(66622),h=t(5482),m=t(30758),g=t(98251),v=t(75362),w=t(99655),y=t(16170),b=t(92517),S=new WeakMap,Y=new WeakMap,A=new WeakMap,C=new WeakSet,x=function(){function e(n){var t,s=n.navigateIframeRef,u=n.onReceiveWebviewLog;(0,i._)(this,e);var d=this;(0,c._)(this,C),(0,a._)(this,S,{writable:!0,value:void 0}),(0,a._)(this,Y,{writable:!0,value:void 0}),(0,a._)(this,A,{writable:!0,value:void 0}),(0,l._)(this,Y,[]),(0,l._)(this,S,new v.V_(function(e){var n=function(n){return(0,y.Cw)(n,function(n){return e.next(n.paneResponse)})};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}})),(0,o._)(this,Y).push((0,o._)(this,S).subscribe((t=(0,r._)(function(e){var n,t,r;return(0,h.YH)(this,function(i){switch(i.label){case 0:if(!("webview"===e.paneType&&"navigation"===e.response.type))return[3,4];if(!(!("base"in e.response&&"path"in e.response&&"port"in e.response)&&(null===(n=(0,o._)(d,A))||void 0===n?void 0:n.path)!==e.response.path))return[3,2];return(0,l._)(d,A,{base:"",path:e.response.path,port:80}),[4,null===(t=s.current)||void 0===t?void 0:t.call(s,(0,o._)(d,A).path,(0,o._)(d,A).port)];case 1:return i.sent(),[2];case 2:var a,c;if(a=(0,o._)(d,A),c=e.response,a&&c&&a.base===c.base&&a.path===c.path&&a.port===c.port)return[3,4];return(0,l._)(d,A,e.response),[4,null===(r=s.current)||void 0===r?void 0:r.call(s,(0,o._)(d,A).path,(0,o._)(d,A).port)];case 3:i.sent(),i.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}))),(0,o._)(this,Y).push((0,o._)(this,S).subscribe(function(e){"webview"===e.paneType&&"logs"===e.response.type&&u(e.response.method,e.response.message.map(function(e){try{return JSON.stringify(e,null,0)}catch(e){return"Devtools error: console message could not be stringified"}}).join(" "))}))}var n=e.prototype;return n.dispose=function(){(0,o._)(this,Y).forEach(function(e){return e()})},n.refresh=function(){(0,s._)(this,C,_).call(this,{type:"refresh"})},n.setInsets=function(e){(0,s._)(this,C,_).call(this,{type:"setInsets",insets:e})},n.handleNavigateTo=function(e){var n,t,r,i,a,l,c,u,f;if(e.base===(null===(n=(0,o._)(this,A))||void 0===n?void 0:n.base)&&e.port===(null===(t=(0,o._)(this,A))||void 0===t?void 0:t.port)&&e.path===(null===(r=(0,o._)(this,A))||void 0===r?void 0:r.path)){this.refresh();return}(0,s._)(this,C,_).call(this,(0,p._)((0,d._)({type:"navigate"},e),{url:(l=e.base,c=null!==(i=e.path)&&void 0!==i?i:"/",u=null!==(a=e.port)&&void 0!==a?a:80,(f=new URL(l)).pathname=c.startsWith("/")?c:"/".concat(c),80!==u&&(f.port=u.toString()),f.toString())}))},(0,u._)(e,[{key:"path",get:function(){return(0,o._)(this,S).filter(function(e){return"webview"===e.paneType&&"navigation"===e.response.type}).select(function(e){return e.response.path})}}]),e}();function _(e){var n={messageType:b.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:e}};(0,y._z)(n,(0,g.Ak)())}function k(){var e=(0,w.Dr)("webviewBridge"),n=(0,w.Dr)("workspace2");return(0,m.useMemo)(function(){return e&&n},[e,n])}function D(e){var n=e.initialPort,t=e.initialPath,r=e.baseUrl,i=e.isSupported,o=e.navigateIframeRef,a=e.onReceiveWebviewLog,l=(0,f._)((0,m.useState)(null),2),s=l[0],c=l[1];(0,m.useEffect)(function(){if(i){var e=new x({navigateIframeRef:o,onReceiveWebviewLog:a});return c(e),function(){e.dispose()}}},[i,o,a]);var u=(0,m.useRef)(void 0);return(0,m.useEffect)(function(){i&&s&&r&&u.current!==n&&(u.current=n,s.handleNavigateTo({base:r,port:n,path:t}))},[r,s,t,n,i]),s}function E(e){var n=e.isVisible,t=k();(0,m.useEffect)(function(){t&&((0,y._z)({messageType:b.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"setVisibility",isVisible:n}}},(0,g.Ak)()),n||(0,y._z)({messageType:b.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"navigate",base:"",url:"INVALID_URL_TO_HIDE_NATIVE_WEBVIEW"}}},(0,g.Ak)()))},[t,n])}},15143:(e,n,t)=>{"use strict";t.d(n,{A:()=>T});var r=t(13454),i=t(66622),o=t(75008),a=t(27189),l=t(5482),s=t(94086),c=t(30758),u=t(20837),d=t(45009),p=t(30632),f=t(72813);function h(){var e=(0,d._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,p.J1)(h()),v=t(1953),w=t(52757),y=t(10168),b=t(32842),S=t(81243),Y=t(40172),A=t(76985),C=t(40889),x=t(8478),_=t(41760),k=(0,w.AH)({".sentry-error-embed-wrapper":{zIndex:"".concat(b.U3," !important")}}),D=(0,y.x)({errorStack:[b.wp.p(16),b.wp.width("100%"),b.wp.backgroundColor.backgroundHigher,b.wp.borderRadius(8),b.wp.overflowY("hidden"),{whiteSpace:"pre"}],errorStackContent:[b.wp.font.code,b.wp.fontSize(12)],error:[b.wp.font.code]}),E=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,R=/at (https:\/\/.+\.js):(\d+):(\d+)/;function I(){return(I=(0,r._)(function(e){var n,s,c,u,d,p,f,h;function m(){return(m=(0,r._)(function(e){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(t=n.get(e))return[2,t];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=o.sent(),i=new s.SourceMapConsumer(r),n.set(e,i),[2,i];case 3:return o.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.YH)(this,function(g){switch(g.label){case 0:n=new Map,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,t.e(592).then(t.t.bind(t,50592,19))];case 2:return s=g.sent(),[3,4];case 3:throw g.sent(),Error("source-map not available");case 4:var v;if(!(c=e.stack))throw Error("expected error.stack to be defined");return u=c.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),p=(d=(0,o._)(u))[0],[4,Promise.all(d.slice(1).map((v=(0,r._)(function(e){var n,t,r,o,a,s,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(E.test(e)){if(!(a=E.exec(e)))throw Error("expected result");t=(s=(0,i._)(a.slice(2),3))[0],r=s[1],o=s[2]}else{if(!R.test(e))return[2,e];if(!(c=R.exec(e)))throw Error("expected result");t=(u=(0,i._)(c.slice(1),3))[0],r=u[1],o=u[2]}return[4,function(e){return m.apply(this,arguments)}("".concat(t,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(p=d.originalPositionFor({line:Number(r),column:Number(o)}),n)return[2,"    at ".concat(p.name," (").concat(p.source,":").concat(p.line,":").concat(p.column,")")];return[2,"    at ".concat(p.source,":").concat(p.line,":").concat(p.column)]}})}),function(e){return v.apply(this,arguments)})))];case 5:return f=g.sent(),Object.assign(h=Error(),{name:e.name,stack:[p].concat((0,a._)(f)).join("\n"),message:e.message},e),[2,h]}})})).apply(this,arguments)}var F=function(e){var n=e.bsod,t=(0,i._)((0,c.useState)(null),2),o=t[0],a=t[1];(0,c.useEffect)(function(){(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return I.apply(this,arguments)}(n.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[n.error]);var u=(0,c.useMemo)(function(){var e,t,r,i;return o?null!==(r=null===(t=o.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=n.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[o,n.error.stack]);return(0,s.Y)("div",{css:D.errorStack,children:(0,s.Y)(_.T,{spacing:1,children:(0,s.FD)("div",{css:D.errorStackContent,children:[(0,s.FD)("div",{children:["Origin: ",n.origin]}),null==u?void 0:u.map(function(e,n){var t=e.replace("webpack-internal:///./",""),r=t.includes("node_modules");return(0,s.Y)("div",{css:r&&b.wp.color.foregroundDimmest,children:t},n)})]})})})};let T=function(){var e,n,t,r,o=(0,i._)((0,v.eY)(),1)[0],a=(e={skip:!o},n=(0,u._)({},m,e),f.I(g,n)),l=a.data,c=a.loading;if((0,v.ZM)(),!o)return null;var d=(null==l?void 0:null===(t=l.currentUser)||void 0===t?void 0:t.isStaff)||(null==l?void 0:null===(r=l.currentUser)||void 0===r?void 0:r.isAdmin);return(0,s.FD)(A.a,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,s.FD)(_.T,{spacing:2,align:"center",children:[(0,s.Y)(x.A,{level:2,children:" Your Repl is having a bit of trouble."}),(0,s.Y)("div",{className:"spacer"}),(0,s.Y)(C.EY,{variant:"text",multiline:!0,children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,s.Y)("div",{css:[b.wp.p(16),b.wp.width("100%"),b.wp.backgroundColor.backgroundHigher,b.wp.borderRadius(8)],children:(0,s.FD)(_.T,{spacing:1,children:[!c&&(null==l?void 0:l.currentUser)?(0,s.FD)(_.z,{spacing:2,align:"center",children:[(0,s.Y)(S.e,{src:l.currentUser.image,username:l.currentUser.username,size:48}),(0,s.Y)(C.EY,{variant:"text",multiline:!1,children:l.currentUser.username})]}):null,(0,s.FD)("div",{css:D.error,children:["Error: ",o.eventId]})]})}),d?(0,s.Y)(F,{bsod:o}):null,(0,s.Y)("div",{className:"spacer"}),(0,s.Y)(Y.$n,{onClick:function(){return window.location.reload()},colorway:"primary",stretch:!0,text:"reload"}),!1]}),(0,s.Y)(w.mL,{styles:[k]})]})}},63360:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(78910),i=t(78542),o=t(88708),a=t(20837),l=t(43952),s=t(94086),c=t(30758),u=t(55195),d=t(1953),p=t(32842),f=t(8367),h=t(65640),m=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}(0,o._)(n,e);var t=n.prototype;return t.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),h.error(e)},t.render=function(){if(this.state.hasErrored){var e,n,t;return(0,s.Y)(f.S,{css:[p.wp.font.code,p.wp.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},p.wp.backgroundColor.blurpleDefault,p.wp.height("100%")],children:(0,s.Y)(f.S,{children:null!==(t=null===(n=this.state)||void 0===n?void 0:null===(e=n.error)||void 0===e?void 0:e.stack)&&void 0!==t?t:"An unknown error occurred."})})}return this.props.children},n}(c.Component);function g(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,i=void 0===r||r,o=e.handleError,c=e.children,p=e.origin,f=void 0===p?"ErrorBoundary: (no origin provided)":p,h=e.tags,g=void 0===h?{}:h,v=e.extras,w=void 0===v?{}:v,y=(0,d.iO)();return(0,s.Y)(m,{handleError:function(e,n){t?y({error:e,extras:(0,l._)((0,a._)({},w),{errorInfo:n}),tags:(0,l._)((0,a._)({},g),{errorBoundary:!0}),origin:f}):i&&u.v4(function(t){t.setTag("errorBoundary",!0),t.setTags(g),t.setExtra("errorInfo",n),t.setExtras(w),u.Cp(e)}),o&&o(e,n)},children:c})}},86330:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(60049),i=t.n(r),o=t(37954),a=t(65640);function l(e){var n=e.throwBsod,t=e.tags,r=e.extras,l=e.origin,s=e.onNonBsodUnrecoverableError,c=void 0===s?function(){}:s;return function(e){var s=(0,o.Ay)(e);if(s===o.ub.NotFound){i().push("/home","~/");return}if(s===o.ub.LanguageTokenDenied){window.location.reload();return}if(s){c(s);return}a.error(e),n({error:e,tags:t,extras:r,origin:l})}}},59082:(e,n,t)=>{"use strict";t.d(n,{G:()=>c});var r=t(94086),i=t(10168),o=t(32842),a=t(8367),l=t(14753),s=(0,i.x)({loadingState:[o.wp.flex.growAndShrink(1),o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.loadingState,children:(0,r.Y)(l.A,{})})}},44394:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(75895),i=t(13454),o=t(66622),a=t(5482),l=t(94086),s=t(30758),c=t(76862),u=t(25264),d=t(82402),p=t(10168),f=t(32842),h=t(8367);function m(){}var g=(0,p.x)({terminalWrapper:[{"> div":[f.wp.borderRadius(4)],"& .xterm":[f.wp.borderRadius(4)]}]});function v(e){var n,t=e.processId,p=e.openPane,f=e.maxHeight,v=(0,d.V)(),w=(0,u.Ui)({maxHeight:f,openPane:p}),y=w.visibleHeight,b=w.bufferHeight,S=w.wrapperResizeRef,Y=w.xterm,A=w.xtermRef,C=(0,o._)((0,s.useState)(null),2),x=C[0],_=C[1],k=(0,s.useCallback)(function(e){return _(function(){return e}),function(){}},[]);return(0,c.b)((n=(0,i._)(function(e,n){var i,o,l,s,c,u,d,p,f;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(i=n.signal,!x)return[2];o=e.agentToolPackager.connectToInstallPackages.subscribe({processId:t},{signal:i}).resReadable,l=!1,s=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),u=(0,r._)(o),a.label=2;case 2:return[4,u.next()];case 3:if(!(l=!(d=a.sent()).done))return[3,5];if(!(p=d.value).ok){if("UNEXPECTED_DISCONNECT"===p.payload.code||"CANCEL"===p.payload.code||"NO_PROCESS_MATCHING_ID"===p.payload.code)return[3,5];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}"output"===p.payload.$kind&&x(p.payload.output),a.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return f=a.sent(),s=!0,c=f,[3,12];case 7:if(a.trys.push([7,,10,11]),!(l&&null!=u.return))return[3,9];return[4,u.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[x,t]),(0,l.Y)(h.S,{css:g.terminalWrapper,style:{height:y,background:null==v?void 0:v.background},children:(0,l.Y)(u._x,{onInput:m,xterm:Y,wrapperResizeRef:S,bufferHeight:b,setOnMessage:k,onResizeTerminal:m,children:(0,l.Y)(u.DJ,{xtermRef:A,visibleHeight:y,maxHeight:f})})})}},44080:(e,n,t)=>{"use strict";t.d(n,{A:()=>w});var r=t(75895),i=t(13454),o=t(66622),a=t(5482),l=t(94086),s=t(30758),c=t(77781),u=t(76862),d=t(25264),p=t(82402),f=t(10168),h=t(32842),m=t(8367),g=t(42796).hp,v=(0,f.x)({terminalWrapper:[h.wp.overflow("hidden"),{"& .xterm":[h.wp.borderRadius(0,0,4,4)]}]});function w(e){var n,t=e.processId,f=e.openPane,h=e.maxHeight,w=e.interactive,y=void 0!==w&&w,b=(0,c.T)(),S=(0,s.useId)(),Y=(0,p.V)(),A=(0,d.Ui)({maxHeight:h,openPane:f}),C=A.visibleHeight,x=A.bufferHeight,_=A.wrapperResizeRef,k=A.xterm,D=A.xtermRef,E=(0,o._)((0,s.useState)(null),2),R=E[0],I=E[1],F=(0,s.useCallback)(function(e){return I(function(){return e}),function(){}},[]);return(0,u.b)((n=(0,i._)(function(e,n){var o,l,s,c,u,d,p,f,h,m,v,w,Y,A;return(0,a.YH)(this,function(C){switch(C.label){case 0:var x;if(o=n.signal,!b||!R||!k)return[2];s=(l=e.shellExec.connect.stream({id:t,userId:b,processViewId:S},{signal:o})).resReadable,c=l.reqWritable,u=function(e){y&&c.write({$kind:"stdin",stdin:new Uint8Array(g.from(e))})},d=k.onResize((x=(0,i._)(function(n){return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.resize.rpc({id:t,userId:b,processViewId:S,size:n})];case 1:return r.sent(),[2]}})}),function(e){return x.apply(this,arguments)})),p=k.onData(u),f=!1,h=!1,C.label=1;case 1:C.trys.push([1,6,7,12]),v=(0,r._)(s),C.label=2;case 2:return[4,v.next()];case 3:if(!(f=!(w=C.sent()).done))return[3,5];if(!(Y=w.value).ok){if("UNEXPECTED_DISCONNECT"===Y.payload.code||"CANCEL"===Y.payload.code||"NO_PROCESS_MATCHING_ID"===Y.payload.code||"PROCESS_IS_NOT_RUNNING"===Y.payload.code)return[3,5];throw Error("[".concat(Y.payload.code,"]: ").concat(Y.payload.message))}"output"===Y.payload.$kind&&R(Y.payload.output),C.label=4;case 4:return f=!1,[3,2];case 5:return[3,12];case 6:return A=C.sent(),h=!0,m=A,[3,12];case 7:if(C.trys.push([7,,10,11]),!(f&&null!=v.return))return[3,9];return[4,v.return()];case 8:C.sent(),C.label=9;case 9:return[3,11];case 10:if(h)throw m;return[7];case 11:return[7];case 12:return[2,function(){d.dispose(),p.dispose()}]}})}),function(e,t){return n.apply(this,arguments)}),[b,y,R,t,S,k]),(0,l.Y)(m.S,{css:v.terminalWrapper,style:{height:C,background:null==Y?void 0:Y.background},children:(0,l.Y)(d._x,{xterm:k,wrapperResizeRef:_,bufferHeight:x,setOnMessage:F,children:(0,l.Y)(d.DJ,{xtermRef:D,visibleHeight:C,maxHeight:h})})})}},50970:(e,n,t)=>{"use strict";t.d(n,{K4:()=>ee});var r=t(13454),i=t(72275),o=t(66622),a=t(5482),l=t(94086),s=t(30758),c=t(72653),u=t(55937),d=t(51439),p=t(81663),f=t(76634),h=t(68670),m=t(58133),g=t(5965),v=t(73962),w=t(64486),y=t(41276),b=t(4645),S=t(56268),Y=t(41928),A=t(63679),C=t(83733),x=t(82436),_=t(49574),k=t(59082),D=t(10168),E=t(32842),R=t(40172),I=t(14968),F=t(44053),T=t(93532),P=t(31955),L=t(40889),U=t(65599),N=t(8367),O=t(16021),M=t(29048),B=t(30111),H=t(47650),z=t(85670),W=t(22414),G=t(63516),V=t(42022),j=t(14753),Z=t(95427),q=t(12219),K=t(68753),$=t(25213),J=t.n($),Q=(0,D.x)({titleShort:(0,i._)({display:"inline"},E.kL.min(411),{display:"none"}),titleLong:(0,i._)({display:"none"},E.kL.min(411),{display:"inline"})});function X(e){return e?{created:e.created}:null}var ee=(0,s.memo)(function(e){var n=e.eventId,t=e.onConfigure,r=e.paneType,i=(0,d.Al)(n,X),o=(0,h.cF)();return(0,l.Y)(en,{created:null==i?void 0:i.created,onConfigure:t,currentBuild:o,hasDeployment:!!o,paneType:r})});function en(e){var n,t,i=e.created,d=e.currentBuild,Y=e.onConfigure,_=e.hasDeployment,k=e.paneType,D=(0,o._)((0,s.useState)(void 0),2),E=D[0],R=D[1],I=(0,o._)((0,s.useState)(!1),2),T=I[0],P=I[1],L=(0,s.useCallback)(function(e){(0,S.Q)({error:Error(e),context:"SuggestDeployCard",isDeploymentsPane:!1}),P(!0)},[]),N=(0,C.A)(),O=(0,h.ik)(N),M=(0,h.Ol)(),B=(0,h.om)(),H=(0,h.g$)(),G=(0,h.gq)(),V=G&&!G.hasDeploymentRepricing,j=(0,h.kM)({replId:N,onError:L,dotReplitService:M}).recommendedProvider,q=(0,(0,h.mj)().getDeployabilityByProvider)(j).deploy,K=q.isAuthorized,$="Loading"===q.message;(0,s.useEffect)(function(){!$&&(K||R("NOT_AVAILABLE"))},[$,K]);var J=(0,o._)((0,s.useState)(null),2),X=J[0],ee=J[1],en=(0,b.wQ)({replId:N,onError:L}).machineConfigurations,er=(0,w.g)({onError:L}).machineConfigurations,ei=(0,o._)((0,c.fp)(v.h0),1)[0],eo=(0,c.md)(g.NF),ea=(0,c.md)(g.No);(0,s.useEffect)(function(){switch(j){case u.Q0.Gce:if(!en)return;var e=(0,b.pR)({machineConfigurations:en,isTeamRepl:O});if(!e){L("An error occurred trying to validate default machine configuration");return}var n=e.id,t=e.slug;ee({configurationId:n,configurationLabel:e.label,configurationSlug:t});break;case u.Q0.CloudRun:if(!er)return;var r=er.find(function(e){var n=e.vcpu,t=e.memory;return eo.toString()===n&&ea.toString()===t});if(!r){L("An error occurred trying to validate selected machine configuration");return}var i=r.id,o=r.slug;ee({configurationId:i,configurationLabel:r.label,configurationSlug:o,maxInstances:ei})}},[er,eo,ea,O,ei,j,en,L]);var el=(0,o._)((0,s.useState)(u.JX.Server),2),es=el[0],ec=el[1],eu=(0,o._)((0,s.useState)(null),2),ed=eu[0],ep=eu[1],ef=(0,o._)((0,s.useState)(null),2),eh=ef[0],em=ef[1],eg=(0,o._)((0,s.useState)(null!==(t=null==d?void 0:d.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==t?t:[]),2),ev=eg[0],ew=eg[1],ey=(0,o._)((0,s.useState)(!1),2),eb=ey[0],eS=ey[1],eY=(0,o._)((0,s.useState)(null),2),eA=eY[0],eC=eY[1],ex=(0,A._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:p.co}),e_=(0,y.D)({replId:N,provider:j,fs:B,secrets:H,dotReplit:M,isNewDeployment:!_,onError:L,onOptions:function(e){e.appType&&ec(e.appType),e.envVars&&ew(e.envVars),e.ignorePorts&&eS(e.ignorePorts),e.buildCommand&&ep(e.buildCommand),e.runCommand&&em(e.runCommand),e.publicDir&&eC(e.publicDir)}}).loading,ek=(0,o._)((0,s.useState)(void 0),2),eD=ek[0],eE=ek[1],eR=(0,o._)((0,s.useState)(void 0),2),eI=eR[0],eF=eR[1],eT=(0,o._)((0,s.useState)(void 0),2),eP=eT[0],eL=eT[1],eU=(0,o._)((0,s.useState)(void 0),2),eN=eU[0],eO=eU[1],eM=(0,h.bu)(),eB=(0,h._k)().getRvmDeploymentCostDetailsByConfigurationSlug;(0,s.useEffect)(function(){if(!e_){var e,n,t="".concat(eM).concat((null===(n=window)||void 0===n?void 0:null===(e=n.location)||void 0===e?void 0:e.hostname)!=="replit.com"?".staging":"",".").concat(ex);switch(j){case u.Q0.Gce:if(!X)return;var r=eB(X.configurationSlug).costPerMonth;eE((0,l.Y)(W.A,{})),eF("Reserved VM Deployment"),eL("$".concat(r,"/month"));var i={};i["Default URL"]=t,ed&&(i["Build Command"]=ed),i["Run Command"]=eh,eO(i);break;case u.Q0.CloudRun:if(!X)return;eE((0,l.Y)(z.A,{})),eF((0,l.FD)(l.FK,{children:[(0,l.Y)("span",{css:Q.titleShort,children:"Autoscale"}),(0,l.Y)("span",{css:Q.titleLong,children:"Autoscale Deployment"})]})),eL((0,l.Y)(U.m_,{tooltip:"Most low-traffic apps cost less than $1/month, with high-traffic apps typically around $10/month.",children:(0,l.Y)(F.A,{href:"https://docs.replit.com/cloud-services/deployments/about-deployments",target:"_blank",rel:"noopener",text:"Usually less than $1/mo"})}));var o={};o["Default URL"]=t,ed&&(o["Build Command"]=ed),o["Run Command"]=eh,eO(o);break;case u.Q0.Static:eE((0,l.Y)(Z.A,{})),eF("Static Deployment"),eL("Free");var a={"Public Directory":eA,"Default URL":t};ed&&(a["Build Command"]=ed),eO(a);break;default:eE(void 0),eF(void 0),eL(void 0),eO(void 0),R(void 0)}}},[ed,eo,eM,ex,e_,ea,j,en,eh,ei,O,X,eA,eB]);var eH=(0,h.Tp)(),ez=eH.deployBuild,eW=eH.redeployWithNoNewOptions,eG=(n=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:if(!K)return[2];if(R("DEPLOYING"),(0,x.u4)(x.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy",redeploy:_,has_agent_session:!0}),!_)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eW({hasAgentSession:!0})];case 2:return n.sent(),[3,4];case 3:return L(n.sent().message),[3,4];case 4:return[2];case 5:if(!(e=(null==eM?void 0:eM.length)?eM:void 0))return[2];n.label=6;case 6:return n.trys.push([6,8,,9]),[4,ez({envVars:ev.filter(function(e){return(0,f.zV)(e)}),subdomain:e,machineConfigurationId:(null==X?void 0:X.configurationId)||void 0,maxMachineInstances:(null==X?void 0:X.maxInstances)||void 0,config:{buildCommand:ed,runCommand:eh,appType:es,ignorePorts:eb,publicDir:eA},isPrivate:!1,hasAgentSession:!0})];case 7:return n.sent(),Y&&Y(),[3,9];case 8:return L(n.sent().message),[3,9];case 9:return[2]}})}),function(){return n.apply(this,arguments)}),eV=(0,h.uS)();(0,s.useEffect)(function(){if(!T)switch(eV){case m.d.Ready:if("FAILED"===E||"FINISHED"===E)break;R("READY");break;case m.d.Suspended:R("NOT_AVAILABLE");break;case m.d.Preparing:case m.d.Deploying:R("DEPLOYING")}},[T,eV,E]),(0,h.kW)(function(e){if(!T&&"HostingBuildDeployStatusAction"===e.__typename)switch(e.status){case u.nH.Failed:R("FAILED");break;case u.nH.Success:R("FINISHED")}}),(0,s.useEffect)(function(){(0,x.u4)(x.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy_shown",has_agent_session:!0})},[]);var ej=$||e_;return(0,l.Y)(et,{created:i,icon:eD,title:eI,cost:eP,properties:eN,status:T?"NOT_AVAILABLE":E,onDeploy:K&&j&&j!==u.Q0.Cron?eG:void 0,onConfigure:Y,hasDeployment:_,showDeploymentRepricingStatusBanner:V,loading:ej,paneType:k})}function et(e){var n=e.created,t=e.icon,r=e.title,i=e.cost,a=e.properties,c=e.status,u=void 0===c?"READY":c,d=e.onDeploy,p=e.onConfigure,f=e.hasDeployment,h=e.showDeploymentRepricingStatusBanner,m=e.loading,g=e.paneType,v=(0,o._)((0,s.useState)(!1),2),w=v[0],y=v[1],b=a&&Object.keys(a).length>0,S=(d||p)&&!f&&(!w&&"READY"===u||"DEPLOYING"===u),Y=(0,o._)((0,s.useState)(!1),2),A=Y[0],C=Y[1],x=m?(0,l.Y)(k.G,{}):(0,l.FD)(N.S,{clsx:J().container,gap:8,"data-event-type":"deploy",children:[(0,l.Y)(L.EY,{clsx:J().message,color:"STALE"===u?"dimmer":"default",children:f?"Want users to get these changes? Redeploy this App.":"Ready to share? Deploy this App in ".concat(d?"one click":"a few clicks",".")}),!b||f?null:(0,l.Y)(er,{icon:void 0===t?null:t,title:void 0===r?"Deployment":r,cost:void 0===i?"":i,properties:a,expanded:A,setExpanded:C}),d||p?(0,l.Y)(N.S,{row:!0,gap:8,align:"center",justify:b?"start":"end",children:(0,l.Y)(ea,{status:u,hasDeployment:f,onDeploy:d,onConfigure:p?function(){p(),y(!0)}:void 0,expanded:A,showDeploymentRepricingStatusBanner:h})}):null]});return"agentChat"===g?(0,l.Y)(_.e,{timestamp:n,highlighted:S,children:x}):(0,l.Y)(P.ui,{elevated:!0,clsx:J().assistant,children:x})}function er(e){var n,t=e.icon,r=e.title,a=e.cost,c=e.properties,u=e.expanded,d=e.setExpanded,p=(0,s.useId)(),f=(0,s.useId)();return(0,l.FD)(N.S,{clsx:J().properties,children:[(0,l.FD)(N.S,{clsx:J().propertiesHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.FD)(N.S,{clsx:J().propertiesTitle,row:!0,gap:8,align:"center",children:[(0,l.Y)(V.Z_,{size:20,children:t}),(0,l.Y)(L.EY,{children:r})]}),a?(0,l.Y)(L.EY,{children:a}):null]}),(0,l.Y)("div",{clsx:J().propertyListWrapper,id:f,role:"region","aria-hidden":!u,"aria-labelledby":p,children:u?(0,l.Y)("dl",{clsx:J().propertyList,children:Object.entries(c).map(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];return(0,l.FD)(s.Fragment,{children:[(0,l.Y)("dt",{clsx:J().propertyTerm,children:t}),(0,l.Y)("dd",{children:r})]},t)})}):null}),(0,l.FD)(N.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.Y)(R.$n,{clsx:(n={},(0,i._)(n,J().propertiesButton,!0),(0,i._)(n,J().isExpanded,u),n),id:p,onClick:function(){return d(function(e){return!e})},text:u?"Hide properties":"All properties",iconRight:u?(0,l.Y)(B.A,{}):(0,l.Y)(M.A,{}),variant:"nofill","aria-expanded":u,"aria-controls":f}),(0,l.Y)(I.v,{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",text:"Learn more",colorway:"primary",variant:"underlinedOnHover"})]})]})}function ei(e){var n,t,r,o,a=e.status,s=e.onDeploy,c=e.onConfigure;if("NOT_AVAILABLE"===a)return(0,l.FD)(N.S,{clsx:J().cannotDeploy,gap:8,children:[(0,l.Y)(T.N,{colorway:"warning",icon:(0,l.Y)(K.A,{}),title:"Deployments not available",text:"There is an issue preventing you from deploying. You may be able to resolve this using the Deployments pane."}),c?(0,l.Y)(R.$n,{onClick:c,iconLeft:(0,l.Y)(q.A,{}),text:"Open Deployments",alignment:"start",colorway:"primary"}):null]});var u=null;switch(a){case"DEPLOYING":u=(0,l.Y)(j.A,{}),n="Deploying",t="primary";break;case"FINISHED":u=(0,l.Y)(O.A,{}),n="Deployed",t="green",r="Click to redeploy";break;case"FAILED":u=(0,l.Y)(K.A,{}),n="Failed",t="red",r="Click to redeploy";break;case"CONFIGURED_MANUALLY":u=(0,l.Y)(H.A,{}),n="Deployment configured manually";break;case"STALE":u=(0,l.Y)(H.A,{}),n="This configuration is for an older version of the app";break;default:return null}var d=(0,l.Y)(R.$n,{onClick:s,text:n,iconLeft:u,colorway:t,loading:"DEPLOYING"===a});return"DEPLOYING"===a||"FINISHED"===a||"FAILED"===a?(0,l.FD)(l.FK,{children:[r?(0,l.Y)(U.m_,{tooltip:r,children:d}):d,c&&"FAILED"===a?(0,l.Y)(R.$n,{onClick:c,iconLeft:(0,l.Y)(q.A,{}),text:"Advanced configuration"}):null]}):(0,l.FD)(N.S,{clsx:(o={},(0,i._)(o,J().status,!0),(0,i._)(o,J().isConfiguredManually,"CONFIGURED_MANUALLY"===a),(0,i._)(o,J().isStale,"STALE"===a),o),row:!0,gap:8,align:"center",children:[u,(0,l.Y)(L.EY,{children:n})]})}var eo=(0,D.x)({group:[E.wp.width("100%"),{"> div":{width:"100%"}}]});function ea(e){var n=e.status,t=void 0===n?"READY":n,r=e.onDeploy,i=e.onConfigure,o=e.hasDeployment,a=e.expanded,s=e.showDeploymentRepricingStatusBanner;if(!r&&!i)return null;if("READY"===t){if(r)return(0,l.FD)(l.FK,{children:[(0,l.FD)(N.S,{css:eo.group,gap:6,justify:"start",align:"start",children:[s?(0,l.Y)(Y.u,{}):null,(0,l.Y)(R.$n,{onClick:r,text:o?"Redeploy":"Deploy",iconLeft:(0,l.Y)(G.A,{}),colorway:"primary"})]}),i&&a?(0,l.Y)(R.$n,{onClick:i,iconLeft:(0,l.Y)(q.A,{}),text:"Advanced configuration"}):null]});if(i)return(0,l.Y)(R.$n,{onClick:i,text:"Open Deployments",iconLeft:(0,l.Y)(G.A,{}),colorway:"primary"})}return(0,l.Y)(ei,{status:t,onDeploy:r,onConfigure:i})}},31478:(e,n,t)=>{"use strict";t.d(n,{M:()=>N});var r=t(66622),i=t(94086),o=t(30758),a=t(84321),l=t(63679),s=t(39651),c=t(79261),u=t(83416),d=t(27189),p=t(24955),f=t(10168),h=t(2298),m=t(32842),g=t(14968),v=t(98541),w=t(40889),y=t(8367),b=t(81603),S=t(20837),Y=t(43952),A=t(42022);function C(e){return(0,i.FD)(A.Ay,(0,Y._)((0,S._)({},e),{children:[(0,i.Y)("path",{d:"M18.469 2.466a.75.75 0 0 1 .292 1.019l-.75 1.352a.75.75 0 1 1-1.312-.727l.75-1.352a.75.75 0 0 1 1.02-.292Zm3.882 2.798a.75.75 0 0 1-.274 1.024l-1.837 1.06a.75.75 0 1 1-.75-1.298l1.837-1.06a.75.75 0 0 1 1.024.274ZM7.157 18.098a3 3 0 0 0 5.883-.917l-5.883.916Zm-1.49.23-1.618.254a2.1 2.1 0 0 1-2.14-1.024l-.425-.734a2.085 2.085 0 0 1 .176-2.356l9.028-11.26a2.1 2.1 0 0 1 3.454.263l5.661 9.772a2.093 2.093 0 0 1-1.49 3.117l-3.784.588a4.5 4.5 0 0 1-8.863 1.38Zm16.513-8.68-1.45-.388a.75.75 0 0 0-.387 1.449l1.448.388a.75.75 0 0 0 .389-1.449ZM11.86 4.147 2.83 15.405a.585.585 0 0 0-.05.667l.426.735a.6.6 0 0 0 .611.292l14.264-2.222a.592.592 0 0 0 .423-.881l-5.658-9.774a.6.6 0 0 0-.984-.078"}),(0,i.Y)("path",{d:"M18.469 2.466a.75.75 0 0 1 .292 1.019l-.75 1.352a.75.75 0 1 1-1.312-.727l.75-1.352a.75.75 0 0 1 1.02-.292Zm3.882 2.798a.75.75 0 0 1-.274 1.024l-1.837 1.06a.75.75 0 1 1-.75-1.298l1.837-1.06a.75.75 0 0 1 1.024.274ZM7.157 18.098a3 3 0 0 0 5.883-.917l-5.883.916Zm-1.49.23-1.618.254a2.1 2.1 0 0 1-2.14-1.024l-.425-.734a2.085 2.085 0 0 1 .176-2.356l9.028-11.26a2.1 2.1 0 0 1 3.454.263l5.661 9.772a2.093 2.093 0 0 1-1.49 3.117l-3.784.588a4.5 4.5 0 0 1-8.863 1.38Zm16.513-8.68-1.45-.388a.75.75 0 0 0-.387 1.449l1.448.388a.75.75 0 0 0 .389-1.449ZM11.86 4.147 2.83 15.405a.585.585 0 0 0-.05.667l.426.735a.6.6 0 0 0 .611.292l14.264-2.222a.592.592 0 0 0 .423-.881l-5.658-9.774a.6.6 0 0 0-.984-.078"})]}))}function x(e){return(0,i.Y)(A.Ay,(0,Y._)((0,S._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M7.945 3.052a1.25 1.25 0 0 0-.835-.302h-3a1.25 1.25 0 0 0-1.243 1.357 19.04 19.04 0 0 0 2.953 8.335l.003.006a18.75 18.75 0 0 0 5.77 5.769l.005.004a19.04 19.04 0 0 0 8.296 2.953 1.25 1.25 0 0 0 1.356-1.251V16.901a1.25 1.25 0 0 0-1.072-1.268 13.592 13.592 0 0 1-2.97-.74l-.002-.001a1.251 1.251 0 0 0-1.317.28l-.002.001-1.267 1.267a.75.75 0 0 1-.9.122 16.75 16.75 0 0 1-6.282-6.281.75.75 0 0 1 .122-.901L8.828 8.11a1.25 1.25 0 0 0 .28-1.317v-.002a13.59 13.59 0 0 1-.741-2.97 1.25 1.25 0 0 0-.422-.77ZM7.107 1.25a2.75 2.75 0 0 1 2.747 2.372c.119.904.34 1.791.659 2.645A2.75 2.75 0 0 1 9.89 9.17l-.858.858a15.249 15.249 0 0 0 4.94 4.94l.86-.86v-.001a2.75 2.75 0 0 1 2.901-.62 12.085 12.085 0 0 0 2.652.66 2.75 2.75 0 0 1 2.365 2.781v2.99a2.752 2.752 0 0 1-3.011 2.748 20.54 20.54 0 0 1-8.954-3.185 20.25 20.25 0 0 1-6.226-6.226 20.54 20.54 0 0 1-3.186-9.007A2.75 2.75 0 0 1 4.11 1.25h2.998Z",clipRule:"evenodd"})}))}var _=[m.wp.borderRadius(),m.wp.px(12),m.wp.py(16),h.b.filled,m.wp.hover({backgroundColor:p.LU.accentPrimaryDimmer}),m.wp.width("50%"),m.wp.justify.center,m.wp.flex.column],k=(0,f.x)({container:_,containerActive:(0,d._)(_).concat([m.wp.backgroundColor.accentPrimaryDimmest,m.wp.border({color:p.LU.accentPrimaryDimmer})]),headline:[m.wp.fontWeight.medium],premiumPill:[m.wp.display.inlineBlock,m.wp.height("20px"),{verticalAlign:"middle"}],text:[m.wp.width("100%")]});function D(e){var n=e.optionKey,t=e.icon,r=e.headline,o=e.description,a=e.isPremium,l=e.isActive,s=e.setSelectedOption;return(0,i.FD)(y.S,{css:l?k.containerActive:k.container,gap:6,onClick:function(){s(n)},children:[(0,i.FD)(y.S,{row:!0,gap:4,align:"center",children:[t,(0,i.Y)(w.EY,{variant:"subheadDefault",css:k.headline,children:r}),a?(0,i.Y)(v.a,{colorway:"green",text:"Premium",css:k.premiumPill}):null]}),(0,i.Y)(y.S,{row:!0,gap:4,align:"center",children:(0,i.Y)(w.EY,{variant:"small",color:"dimmer",css:k.text,children:o})})]})}var E=(0,f.x)({callOptionContainer:[m.wp.width("100%"),m.wp.flex.column,m.wp.align.center,m.wp.justify.center,m.wp.height("100px"),m.wp.border({color:p.LU.outlineDimmer}),m.wp.borderRadius()],helpButtonContainer:[m.wp.pr(6)]});function R(e){var n=e.onSubmit,t=(0,r._)((0,o.useState)(null),2),a=t[0],l=t[1],s=[{optionKey:"call",icon:(0,i.Y)(x,{size:20}),headline:"Schedule a call",description:"Have a discussion with a Replit employee over a video call.",isPremium:!0},{optionKey:"feedback",icon:(0,i.Y)(C,{size:20}),headline:"Share feedback & bugs",description:"Tell us about your experience. Feedback is reviewed by the Replit team."}];return(0,i.FD)(y.S,{gap:8,children:[(0,i.Y)(w.EY,{variant:"headerDefault",children:"Talk to us"}),(0,i.Y)(y.S,{row:!0,gap:8,css:E.helpButtonContainer,children:s.map(function(e){return(0,i.Y)(D,{icon:e.icon,headline:e.headline,description:e.description,isPremium:e.isPremium,optionKey:e.optionKey,isActive:a===e.optionKey,setSelectedOption:l},e.optionKey)})}),"call"===a?(0,i.Y)(y.S,{css:E.callOptionContainer,children:(0,i.Y)(g.v,{iconLeft:(0,i.Y)(b.A,{}),text:"Select a time to chat",colorway:"blue",target:"_blank",href:"https://calendly.com/kody-low-repl/replit-support"})}):null,"feedback"===a?(0,i.Y)(u.O,{showHeading:!1,onSubmit:function(e){n(e),l(null)}}):null]})}var I=t(40172),F=t(95235),T=t(76985),P=t(89715),L=(0,f.x)({body:[m.wp.color.foregroundDimmest]}),U=(0,f.x)({container:[m.wp.minWidth("600px")]});function N(e){var n=e.sessionId,t=e.sendAgentFeedback,d=e.variant,f=(0,r._)((0,o.useState)(!1),2),h=f[0],m=f[1],g=(0,s.A)().showConfirm,v=function(e){t({sessionId:n,feedback:{type:a.O3q.AGENT_FEEDBACK_UNKNOWN,comment:e}}),m(!1),g("Feedback received.")},w="Have feedback?";function y(){m(!0),(0,c.pI)({action:"open_feedback_modal_from_header",sessionId:n})}var b=(0,l._P)({controlName:"flag-top-ai-spenders",type:"boolean"});return(0,i.FD)(i.FK,{children:["default"===(void 0===d?"default":d)?(0,i.Y)(I.$n,{text:w,size:"small",variant:"nofill",onClick:y,style:{height:28},css:L.body}):(0,i.Y)(F.K0,{alt:w,onClick:y,children:(0,i.Y)(P.A,{color:p.LU.accentPrimaryStronger})}),(0,i.Y)(T.a,{isOpen:h,onRequestClose:function(){return m(!1)},centered:!0,css:U.container,children:b?(0,i.Y)(R,{onSubmit:v}):(0,i.Y)(u.O,{onSubmit:v})})]})}},83416:(e,n,t)=>{"use strict";t.d(n,{O:()=>d});var r=t(66622),i=t(94086),o=t(30758),a=t(40172),l=t(11822),s=t(28354),c=t(40889),u=t(8367);function d(e){var n=e.showHeading,t=e.onSubmit,d=(0,r._)((0,o.useState)(""),2),p=d[0],f=d[1];return(0,i.Y)(l.lV,{onSubmit:function(e){e.preventDefault(),t(p)},children:(0,i.FD)(u.S,{gap:8,children:[void 0===n||n?(0,i.FD)(u.S,{gap:2,children:[(0,i.Y)(c.Y9,{variant:"subheadDefault",level:1,children:"Feedback"}),(0,i.Y)(c.EY,{color:"dimmer",children:"All feedback is reviewed by the Replit team."})]}):null,(0,i.FD)(u.S,{gap:8,style:{minHeight:120},children:[(0,i.Y)(s.ov,{placeholder:"Please share bugs, feature requests, and anything else related to your experience...",autoSize:!0,value:p,onChange:function(e){return f(e.currentTarget.value)},autoFocus:!0}),(0,i.Y)(a.$n,{colorway:"primary",text:"Send feedback",type:"submit"})]})]})})}},76296:(e,n,t)=>{"use strict";t.d(n,{D:()=>s,H:()=>a});var r=t(99813),i=t(72653),o=(0,r.eU)(!1);function a(){return(0,i.md)(o)}var l=(0,r.eU)(null,function(e,n){return n(o,function(e){return!e})});function s(){return(0,i.Xr)(l)}},34679:(e,n,t)=>{"use strict";t.d(n,{uG:()=>A,gv:()=>Y});var r=t(78542),i=t(20837),o=t(43952),a=t(66622),l=t(94086),s=t(30758),c=t(25161),u=t(95123),d=t(89257),p=t(88249),f=t(59469),h=t(24955),m=t(32842),g=t(40889),v=t(8367),w=t(16021),y=t(42022);function b(e){return(0,l.FD)(y.Ay,(0,o._)((0,i._)({},e),{children:[(0,l.Y)("path",{fillRule:"evenodd",d:"M12 2.6a9.4 9.4 0 1 0 0 18.8 9.4 9.4 0 0 0 0-18.8ZM1.4 12C1.4 6.146 6.146 1.4 12 1.4c5.854 0 10.6 4.746 10.6 10.6 0 5.854-4.746 10.6-10.6 10.6-5.854 0-10.6-4.746-10.6-10.6Zm7-3a.6.6 0 0 1 .6-.6h.01a.6.6 0 0 1 0 1.2H9a.6.6 0 0 1-.6-.6Zm6 0a.6.6 0 0 1 .6-.6h.01a.6.6 0 1 1 0 1.2H15a.6.6 0 0 1-.6-.6Z",clipRule:"evenodd"}),(0,l.Y)("path",{d:"M8.71 14.515c.753-.548 1.875-1.115 3.29-1.115s2.537.567 3.29 1.115a6.538 6.538 0 0 1 1.1 1.013 3.76 3.76 0 0 1 .081.1l.009.012a.6.6 0 0 1-.959.722l-.05-.062a5.353 5.353 0 0 0-.886-.815c-.622-.452-1.5-.885-2.585-.885s-1.963.433-2.585.885a5.351 5.351 0 0 0-.886.815 2.31 2.31 0 0 0-.041.05l-.009.011a.6.6 0 0 1-.839.119.613.613 0 0 1-.093-.875l.063-.077c.053-.064.13-.152.23-.256.2-.207.492-.482.87-.757Z"})]}))}var S=t(14753),Y=new(function(){function e(){var n=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,c.F)([]),this.clear=function(){n.logs.current=[]}}var n=e.prototype;return n.toggle=function(e){this.enabled=e},n.add=function(e){var n=this,t=this.counter++;if(!this.enabled)return{id:t};var r={id:t,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,n.maxEntries)}),{id:t}},n.update=function(e,n){this.enabled&&this.logs.update(function(t){var r=t.findIndex(function(n){return n.id===e.id});if(-1===r)return t;var i=t.slice();return i[r]=n(i[r]),i})},n.complete=function(e,n){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:n,responseTime:Date.now()})})},n.abort=function(e){this.logs.update(function(n){return n.filter(function(n){return n.id!==e.id||null!=n.responseTime})})},e}()),A=function(e){var n=e.isHidden,t=(0,u.A)(Y.logs);return n?null:(0,l.FD)(v.S,{css:[m.wp.flex.column],children:[(0,l.FD)(v.S,{css:[m.wp.m(4),m.wp.position.sticky,m.wp.top(0),m.wp.backgroundColor.backgroundDefault,m.wp.zIndex(1)],row:!0,align:"center",children:[(0,l.Y)(g.EY,{css:m.wp.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.Y)(f.D,{onClick:Y.clear})]}),(0,l.FD)(v.S,{css:[m.wp.flex.grow(1),m.wp.flex.column,m.wp.overflow("auto")],children:[t.map(function(e){var n;return(0,l.Y)(C,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf())}),!t.length&&(0,l.Y)(v.S,{css:m.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},C=(0,s.memo)(function(e){var n,t=e.log,r=t.requestTime,i=t.responseTime,o=t.request,s=t.response,c=(0,a._)((0,p.A)(!0),2),u=c[0],f=c[1],y=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.FD)(v.S,{css:[m.wp.my(4),m.wp.mx(4)],children:[(0,l.FD)(v.S,{role:"button",onClick:f,onKeyDown:f,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,l.FD)(v.S,{css:[m.wp.flex.grow(1),m.wp.rowWithGap(2)],children:[(0,l.Y)(g.EY,{multiline:!1,children:(n=t.response)?"CompleteCodeResult"===n.__typename?(0,l.Y)(w.A,{}):(0,l.Y)(b,{}):(0,l.Y)(S.A,{})}),(0,l.Y)(g.EY,{multiline:!1,children:(0,l.Y)("code",{children:y})})]}),(0,l.Y)(v.S,{css:{opacity:.5},children:null!=i&&(0,l.FD)(g.EY,{css:m.wp.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!u&&(0,l.FD)(l.FK,{children:[void 0!==o&&(0,l.Y)(d.U,{name:"request",src:o}),void 0!==s&&("CompleteCodeResult"===s.__typename?(0,l.FD)("details",{children:[(0,l.Y)("summary",{children:"Response"}),(0,l.Y)("pre",{css:[m.wp.overflow("scroll"),m.wp.borderRadius(4),m.wp.p(4),{border:"1px solid ".concat(h.LU.outlineDimmest)}],children:s.code})]}):(0,l.Y)(d.U,{name:"response",src:s}))]})]})})},17789:(e,n,t)=>{"use strict";t.d(n,{G2:()=>v,R7:()=>m,hr:()=>d,jQ:()=>a,jg:()=>c,lY:()=>y,nZ:()=>b,ou:()=>f,x6:()=>S});var r=t(30758),i=t(99813),o=t(72653),a=function(e,n){var t=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!n.direction||t===n.direction)&&(!n.channels.length||!!n.channels.includes(o.channel))&&(!!(!n.regexp||!n.regexp.test||r.name&&n.regexp.test(r.name)||r.service&&n.regexp.test(r.service))||n.regexp.test(i))},l=(0,i.eU)([]),s=(0,i.eU)([]);function c(){return(0,r.useDeferredValue)((0,o.md)(s))}var u=(0,i.eU)(null,function(e,n,t){a(t,e(h))&&n(s,function(e){return e.concat(t)}),n(l,function(e){return e.concat(t)})});function d(){return(0,o.Xr)(u)}var p=(0,i.eU)(null,function(e,n){n(l,[]),n(s,[])});function f(){return(0,o.Xr)(p)}var h=(0,i.eU)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,o.md)(h)}var g=(0,i.eU)(null,function(e,n,t){var r;n(h,t),n(s,(r=e(l),(t.regexp||t.direction||t.channels.length)&&!t.highlightOnly?r.filter(function(e){return a(e,t)}):r))});function v(){return(0,o.Xr)(g)}var w=(0,i.eU)(!1);function y(){return(0,o.md)(w)}function b(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n,t){return n(w,t)})},[]))}function S(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n){return n(w,function(e){return!e})})},[]))}},5905:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(60049),i=t(30758),o=t(3274),a=t(24481),l=t(17789);function s(){var e=(0,r.useRouter)(),n=(0,a.A)().container,t=(0,l.lY)(),s=(0,l.nZ)(),c=(0,l.hr)();(0,i.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&s(!0)},[s,e.query.debug]),(0,i.useEffect)(function(){if(t)return n.client().onDebugLog(function(e){if("log"===e.type){var t={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var r=n.getContext();r&&(t.service=e.log.channel.service(r))}c({id:(0,o.A)(),channel:t,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[t,n,c])}},89257:(e,n,t)=>{"use strict";t.d(n,{U:()=>O,O:()=>U});var r=t(72275),i=t(20837),o=t(43952),a=t(66622),l=t(27189),s=t(94086),c=t(30758),u=t(18317),d=t(89022),p=t(55814),f=t(88249),h=t(59469),m=t(75165),g=t(24955),v=t(32842),w=t(84911),y=t(24239),b=t(47303),S=t(95235),Y=t(28354),A=t(2420),C=t(40889),x=t(8367),_=t(67415),k=t(16021),D=t(70953),E=t(17504),R=t(83290),I=t(81099),F=t(42022);function T(e){return(0,s.Y)(F.Ay,(0,o._)((0,i._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var P=t(79653),L=t(14753),U=function(e){var n,t,u,g,_,k,D=e.isHidden,E=(t=(n=(0,a._)((0,c.useState)(null),2))[0],u=n[1],g=(0,m.rM)(),(0,c.useEffect)(function(){g!==t&&null!=g&&u(g)},[g,t]),t),F=(0,p.A)(E||""),T=(0,a._)((0,c.useState)(null===(_=F[0])||void 0===_?void 0:_.clientId),2),P=T[0],L=T[1];P&&!F.find(function(e){return P===e.clientId})&&L(null===(k=F[0])||void 0===k?void 0:k.clientId),!P&&F.length&&L(F[0].clientId);var U=(0,w.c)(),O=(0,a._)((0,f.A)(!0),2),B=O[0],H=O[1],z=(0,a._)((0,c.useState)(""),2),W=z[0],G=z[1],V=(0,a._)((0,c.useState)(function(){return{}}),2),j=V[0],Z=V[1],q=(0,a._)((0,f.A)(!0),2),K=q[0],$=q[1],J=(0,a._)((0,f.A)(!0),2),Q=J[0],X=J[1],ee=(0,c.useCallback)(function(e,n){Z(function(t){var a;return(0,o._)((0,i._)({},t),(0,r._)({},e,[n].concat((0,l._)(null!==(a=t[e])&&void 0!==a?a:[])).slice(0,100)))})},[]),en=(0,c.useCallback)(function(e,n,t){Z(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===n){r[e][o]=t(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),et=(0,c.useCallback)(function(){P&&Z(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},P,[]))})},[P]),er=(0,c.useMemo)(function(){return F.find(function(e){return e.clientId===P})},[F,P]),ei=null==er?void 0:er.isOpen(E||""),eo=(0,c.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:E,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(E||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(E||"")}},requestTime:new Date,type:"probe"})},[ee,E,er,ei]),ea=(0,c.useMemo)(function(){if(!P)return[];var e,n,t=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!t.length)return null!==(e=j[P])&&void 0!==e?e:[];var r=null!==(n=j[P])&&void 0!==n?n:[];return K||(r=r.filter(function(e){return null==e.notification})),Q||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return t.some(function(n){var t;return null===(t=e.request||e.notification)||void 0===t?void 0:t.method.toLowerCase().includes(n.toLowerCase())})})),r},[W,j,P,K,Q]);return((0,c.useEffect)(function(){return(0,d.xW)(F.flatMap(function(e){return[e.onRequest(function(n){B&&ee(e.clientId,{id:n.id,canceled:!1,request:n.data,requestTime:new Date})}),e.onResponse(function(n){B&&en(e.clientId,n.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==n.result?{response:n.result}:{error:n.error})})}),e.onCancelRequest(function(n){B&&en(e.clientId,n,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(n){var t=n.path,r=n.diagnostics;B&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+t,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(n){B&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:n}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(n){B&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:n}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(n){B&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})}),e.onReceiveNotification(function(n){B&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})})]}))},[ee,en,B,F]),D)?null:(0,s.FD)(x.S,{css:[v.wp.flex.column],children:[(0,s.FD)(x.S,{css:[v.wp.m(4),v.wp.position.sticky,v.wp.top(0),v.wp.backgroundColor.backgroundDefault,v.wp.zIndex(1)],row:!0,align:"center",children:[(0,s.Y)(C.EY,{multiline:!1,children:P?(0,s.FD)(s.FK,{children:[(0,s.Y)(M,{})," logs for ",(0,s.Y)("code",{children:E})]}):"No LSP client available"}),(0,s.Y)(S.K0,{alt:"Probe LSP",onClick:eo,children:(0,s.Y)(R.A,{})}),(0,s.Y)(x.S,{css:v.wp.flex.grow(1)}),(0,s.Y)(A.d,{"aria-label":"Enable LSP Logs",isSelected:B,onChange:H})]}),(0,s.Y)(x.S,{children:(0,s.Y)(y.e2,{name:"Visible LSP Client",value:P,onChange:L,row:!0,children:F.map(function(e){return(0,s.Y)(y.$O,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,s.FD)(x.S,{row:!0,gap:8,css:[v.wp.m(4),v.wp.mb(8)],children:[(0,s.FD)(x.S,{row:!0,gap:4,children:[(0,s.Y)(I.A,{}),(0,s.Y)(C.EY,{multiline:!1,children:"Show"})]}),(0,s.FD)(x.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showNotifications",id:U("showNotifications"),checked:K,onChange:$}),(0,s.Y)("label",{htmlFor:U("showNotifications"),children:" Notifications"})]}),(0,s.FD)(x.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showRequests",id:U("showRequests"),checked:Q,onChange:X}),(0,s.Y)("label",{htmlFor:U("showRequests"),children:" Requests"})]}),(0,s.Y)(x.S,{css:v.wp.flex.growAndShrink(1)}),(0,s.Y)(x.S,{row:!0,gap:4,children:(0,s.Y)(h.D,{onClick:et})})]}),(0,s.Y)(x.S,{row:!0,gap:4,children:(0,s.Y)(Y.pd,{id:U("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return G(e.target.value)},value:W})}),(0,s.FD)(x.S,{css:[v.wp.flex.grow(1),v.wp.flex.column,v.wp.overflow("auto")],children:[ea.map(function(e,n){var t;return(0,s.Y)(N,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf()+""+n)}),!ea.length&&(0,s.Y)(x.S,{css:v.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},N=(0,c.memo)(function(e){var n,t,r,i,o,l=e.log,c=l.requestTime,u=l.responseTime,d=l.request,p=l.response,h=l.notification,m=l.id,g=(0,a._)((0,f.A)(!0),2),w=g[0],y=g[1];return(0,s.FD)(x.S,{css:[v.wp.my(4),v.wp.mx(4)],children:[(0,s.FD)(x.S,{role:"button",onClick:y,onKeyDown:y,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,s.FD)(x.S,{css:[v.wp.flex.grow(1),v.wp.rowWithGap(2)],children:[(0,s.Y)(C.EY,{className:"lspLog-emoji",multiline:!1,children:(n=l.type,t=l.canceled,r=l.response,i=l.notification,"state"===n?(0,s.Y)(E.A,{}):"diagnostics"===n?(0,s.Y)(_.A,{}):"capabilities"===n?(0,s.Y)(T,{}):"probe"===n?(0,s.Y)(R.A,{}):t?(0,s.Y)(D.A,{}):i?(0,s.Y)(P.A,{}):void 0!==r?(0,s.Y)(k.A,{}):(0,s.Y)(L.A,{}))}),(0,s.FD)(C.EY,{className:"lspLog-requestMethod",multiline:!1,children:[(0,s.Y)("code",{children:null===(o=d||h)||void 0===o?void 0:o.method}),null!=m&&(0,s.FD)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",m]})]})]}),(0,s.Y)(x.S,{css:{opacity:.5},children:null!=u&&(0,s.FD)(C.EY,{css:v.wp.fontSize(13),multiline:!1,children:[u.valueOf()-c.valueOf(),"ms"]})})]}),!w&&(0,s.FD)(s.FK,{children:[void 0!==d&&(0,s.Y)(O,{name:"request.params",src:d.params}),void 0!==h&&(0,s.Y)(O,{name:"notification.params",src:h.params}),void 0!==p&&(0,s.Y)(O,{name:"response",src:p})]})]})}),O=(0,c.memo)(function(e){var n=e.name,t=e.src;return(0,s.Y)(x.S,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,s.Y)(u.A,{json:(0,r._)({},n,t)})})}),M=function(){return(0,s.Y)(C.EY,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(g.LU.redDimmer," 2px 2px")},children:"LSP"})}},88249:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(66622),i=t(30758);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r._)((0,i.useState)(e),2),t=n[0],o=n[1];return[t,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},47378:(e,n,t)=>{"use strict";t.d(n,{o:()=>H});var r,i,o,a=t(66622),l=t(94086),s=t(30758),c=t(82182),u=t(51439),d=t(18525),p=t(72275),f=t(66061),h=t(34805),m=t(96068),g=t(24955),v=t(10168),w=t(2298),y=t(1478),b=t(32842),S=t(40172),Y=t(40889),A=t(52186),C=t(8367),x=t(68522),_=t(61990),k=t(14019),D=(0,y.v)(["timestampDisplay","chevronDisplay","color"]),E=D.styleTokens,R=D.cssVars,I=(0,v.x)({checkpoints:[b.wp.py(4),{width:"360px",maxHeight:"calc(50vh)",maxWidth:"calc(100vw - ".concat(g.LU.space16,")"),overflowY:"auto"}],header:[b.wp.px(6),b.wp.pt(4)],label:[b.wp.px(6)],checkpoint:[b.wp.reset.button,w.b.listItem,b.wp.align.center,b.wp.py(4),b.wp.px(6),b.wp.hover((r={},(0,p._)(r,R.color,g.LU.foregroundDefault),(0,p._)(r,R.timestampDisplay,"flex"),(0,p._)(r,R.chevronDisplay,"flex"),r)),(o={},(0,p._)(o,b.$_.canHover,(i={},(0,p._)(i,R.color,g.LU.foregroundDimmer),(0,p._)(i,R.chevronDisplay,"none"),(0,p._)(i,R.timestampDisplay,"none"),i)),(0,p._)(o,"color",E.color),o)],checkpointText:[b.wp.flex.growAndShrink(1),{textAlign:"left",color:"inherit"}],timestamp:[(0,p._)({},b.$_.canHover,{display:"var(".concat(R.timestampDisplay,", none)")})],expandButton:[{borderRadius:0}]}),F={direction:"reverse",size:100,state:{revertedToEventId:null},transformer:function(e,n){if(n.revertedToEventId===e.id&&(n.revertedToEventId=null),!n.revertedToEventId){var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentTimelineEventContents"){var r=t.agentTimelineEventContents.toolData;if((null==r?void 0:r.$kind)==="revertData"){n.revertedToEventId=r.revertData.eventIdBeforeRevert;return}if((null==r?void 0:r.$kind)==="commitData")return{commitId:r.commitData.commitId,description:r.commitData.description||"Checkpoint made",created:e.created}}}}};function T(e){var n,t=(0,u.NC)(),r=(0,f.J2)(t.sessions.get(e.sessionId)),i=(0,f.J2)(null==r?void 0:r.agent.branch),o=(0,f.Rj)(function(){return null==i?void 0:i.transform(F)},[i]),c=(0,m.g)({items:null!=o?o:[],maxVisibleItems:4,reverse:!0}),d=c.isExpanded,p=c.setIsExpanded,g=c.maxItemsReached,v=c.visibleItems,w=c.hiddenItemsCount;if(!v.length)return null;var y=null!==(n=null==o?void 0:o.length)&&void 0!==n?n:0;return(0,l.FD)(C.S,{css:I.checkpoints,gap:4,children:[(0,l.Y)(C.S,{row:!0,gap:4,align:"center",css:I.header,children:(0,l.FD)(Y.EY,{variant:"small",children:[y," ",(0,h.A)("Checkpoint",y)]})}),(0,l.FD)(C.S,{children:[v.map(function(n,t){var r=(0,a._)(n,2),i=r[0],o=r[1];return(0,l.FD)(s.Fragment,{children:[0===t?(0,l.Y)(Y.EY,{variant:"small",color:"dimmest",css:I.label,children:"Latest"}):null,1===t?(0,l.Y)(Y.EY,{variant:"small",color:"dimmest",css:I.label,children:"Earlier"}):null,(0,l.Y)(P,{getsCheckpoint:o,onClick:function(){return e.onCommitEventClick(i)}})]},i)}),g?(0,l.Y)(U,{isExpanded:d,hiddenItemsCount:w,onClick:function(){return p(!d)}}):null]})]})}function P(e){var n=(0,f.J2)(e.getsCheckpoint);return n?(0,l.Y)(L,{onClick:e.onClick,description:n.description,commitId:n.commitId,created:n.created}):null}function L(e){return(0,l.FD)(C.S,{tag:"button",onClick:e.onClick,row:!0,gap:6,css:I.checkpoint,children:[(0,l.Y)(_.A,{color:g.LU.foregroundDimmest}),(0,l.Y)(Y.EY,{variant:"small",color:"dimmer",css:I.checkpointText,multiline:!1,children:e.description}),(0,l.Y)(A.Dc,{textVariant:"small",textColor:"dimmer",css:I.timestamp,date:e.created})]})}function U(e){return(0,l.Y)(S.$n,{css:I.expandButton,size:"small",variant:"nofill",alignment:"start",onClick:e.onClick,iconLeft:e.isExpanded?(0,l.Y)(x.A,{}):(0,l.Y)(k.A,{}),text:e.isExpanded?"Show less":"Show ".concat(e.hiddenItemsCount," earlier")})}var N=t(2301),O=t(29048),M=(0,v.x)({title:[b.wp.flex.growAndShrink(1),{fontWeight:g.LU.fontWeightMedium}],popoverButton:[b.wp.viewStyle,b.wp.reset.button,w.b.nofill,b.wp.rowWithGap(4),b.wp.align.center,b.wp.px(4),b.wp.maxWidth("100%"),{marginLeft:"auto",marginRight:"auto",svg:[b.wp.color.foregroundDimmest],"&:hover svg":[b.wp.color.foregroundDimmer]}]});function B(e){return e?{id:e.id,title:e.title,sessionType:e.sessionType}:null}function H(e){var n=e.sessionId,t=e.onCommitEventClick,r=e.showCheckpointsDropdown,i=(0,a._)((0,s.useState)(!1),2),o=i[0],p=i[1],f=(0,u.C6)(n,B),h=null==f?void 0:f.title,m=(0,l.Y)(d.n,{multiline:!1,css:M.title,variant:"small",text:h||"Thinking...",color:h?"default":"dimmest"},n);return void 0===r||r?(0,l.FD)(N.Wv,{isOpen:o,onOpenChange:p,label:"Plan Details",noArrow:!0,children:[(0,l.FD)(c.$,{css:M.popoverButton,children:[m,(0,l.Y)(O.A,{size:12,style:{visibility:h?"visible":"hidden"}})]}),(0,l.Y)(T,{onCommitEventClick:function(e){p(!1),t(e)},sessionId:n})]}):m}},35487:(e,n,t)=>{"use strict";t.d(n,{F:()=>nv});var r=t(66622),i=t(94086),o=t(30758),a=t(55937),l=t(84321),s=t(51439),c=t(66061),u=t(63679),d=t(79261),p=t(40172),f=t(14968),h=t(31955),m=t(40889),g=t(8367),v=t(77425),w=t(10001),y=t(8322),b=t.n(y);function S(e){var n=e.onNewSession;return(0,i.Y)(h.ui,{clsx:b().root,elevated:!0,children:(0,i.FD)(g.S,{clsx:b().inner,children:[(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(w.A,{size:16}),text:"Continue editing this app",onClick:function(){n(),(0,d.pI)({action:"replay_completed_new_session"})}}),(0,i.Y)(g.S,{clsx:b().or,children:(0,i.Y)(m.EY,{color:"dimmest",children:"or"})}),(0,i.Y)(f.v,{iconLeft:(0,i.Y)(v.A,{size:16}),text:"Finish & start a new app",href:"/home",as:"/~",onClick:function(){(0,d.pI)({action:"replay_completed_new_app"})}})]})})}var Y=t(20837),A=t(45009),C=t(30632),x=t(72813);function _(){var e=(0,A._)(["\n  fragment AgentAuthorizations on OrgAuthorizations {\n    paidAgent: useAiAgent(tier: paid) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    freeAgent: useAiAgent(tier: free) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return _=function(){return e},e}function k(){var e=(0,A._)(["\n  query GetAgentRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return k=function(){return e},e}function D(){var e=(0,A._)(["\n  query GetAgentReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AgentAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AgentAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return D=function(){return e},e}var E={},R=(0,C.J1)(_()),I=(0,C.J1)(k()),F=(0,C.J1)(D(),R),T=t(83733),P=t(97407),L=t(40500),U=t(17392),N=t(93508),O=t(10168),M=t(32842),B=t(27640),H=(0,O.x)({root:[M.wp.py(8),M.wp.px(12),M.wp.borderRadius()],text:[M.wp.textAlign.center],buttonContainer:[M.wp.width("100%"),M.wp.justify.center],chatButton:[M.wp.width("40%")],upgradeButton:[M.wp.width("60%")]});function z(e){var n=e.openPane,t=(0,N.eg)(),a=(0,r._)((0,o.useState)(!1),2),l=a[0],c=a[1],u=(0,U.A)();return(0,i.FD)(h.ui,{elevated:!0,css:H.root,gap:8,align:"center",children:[(0,i.FD)(m.EY,{css:H.text,children:["You've reached your free usage limit. Upgrade to ",P.en," to continue using ",s.g$,"."]}),(0,i.FD)(g.S,{css:H.buttonContainer,row:!0,gap:6,children:[t?null:(0,i.Y)(p.$n,{text:"Open ".concat(s.BP),onClick:function(){return n({type:"ghostwriterChat"})},css:H.chatButton}),(0,i.Y)(p.$n,{text:"Upgrade to ".concat(P.en),iconLeft:(0,i.Y)(B.A,{}),onClick:function(){return c(!0)},colorway:"brand",css:H.upgradeButton})]}),(0,i.Y)(L.A,{isOpen:l,onClose:function(){return c(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return u()},reloadPageAfterPurchaseComplete:!0})]})}var W=t(58572),G=t(35863),V=t(80001),j=t(24955),Z=(0,O.x)({root:[M.wp.center,M.wp.p(8),M.wp.colWithGap(8),M.wp.borderRadius(),M.wp.border({color:j.LU.outlineDimmest})]});function q(e){var n=e.onNewSession;return(0,i.FD)(g.S,{css:Z.root,children:[(0,i.Y)(m.EY,{variant:"small",color:"dimmer",children:"This chat has ended"}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(V.l,{size:16}),onClick:n,text:"Start a new ".concat(s.g$," chat")})]})}var K=t(4363),$=t(61302),J=t(75165),Q=t(62906),X=t(45918),ee=t(43952),en=t(75362),et=t(39651),er=t(95123),ei=t(95235),eo=t(98541),ea=t(84962),el=new en.N({element:null,isActive:!1});function es(){el.set({element:null,isActive:!1})}var ec=(0,O.x)({container:[{'&[data-active="true"]':{backgroundColor:j.LU.interactiveBackgroundActive}},M.wp.borderRadius(4)],pill:[M.wp.mr(2)]});function eu(){var e=(0,et.A)(),n=e.showConfirm,t=e.showError,r=(0,er.A)(el);(0,o.useEffect)(function(){var e=function(e){var t,r;switch(null===(t=e.data)||void 0===t?void 0:t.type){case"ELEMENT_SELECTED":r=e.data.payload,el.set((0,ee._)((0,Y._)({},el.current),{element:r}));break;case"REPLIT_VISUAL_EDITOR_ENABLED":el.set((0,ee._)((0,Y._)({},el.current),{isActive:!0})),n("Started Visual Edit Mode");break;case"REPLIT_VISUAL_EDITOR_DISABLED":es(),n("Stopped Visual Edit Mode")}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e),es()}},[n,t]);var a=(0,o.useCallback)(function(){var e,n=document.querySelector('iframe[data-cy="ws-webview"]');if(!n){t("No webview iframe found");return}try{r.isActive&&es(),null===(e=n.contentWindow)||void 0===e||e.postMessage({type:"TOGGLE_REPLIT_VISUAL_EDITOR",enabled:!r.isActive},"*")}catch(e){t("Failed to initialize element selector")}},[t,r.isActive]);return(0,i.FD)(g.S,{row:!0,gap:4,align:"center",css:ec.container,"data-active":r.isActive,children:[(0,i.Y)(ei.K0,{size:24,alt:"[dev] Visual Editor",onClick:a,children:(0,i.Y)(ea.A,{color:j.LU.foregroundDimmer})}),r.element?(0,i.Y)(eo.a,{text:r.element.elementName,compact:!0,css:ec.pill}):null]})}var ed=t(13454),ep=t(5482),ef=t(87756),eh=t(24481),em=t(86587),eg=t(72250),ev=t(72123),ew=t(83522),ey=t(72275),eb=t(14178),eS=t(14349),eY=t(16984),eA=t(46598),eC=t(13310),ex=t(83416),e_=t(73943),ek=t(1478),eD=t(76985),eE=t(52186),eR=t(16021),eI=t(70953),eF=t(79653),eT=t(12923),eP=t(4595),eL=t(39133),eU=t(63214),eN=t(68753),eO=["Thinking","Reviewing your message","Considering options","Determining next steps"],eM=(0,ek.v)(["backgroundColor","color","transform"]),eB=eM.cssVars,eH=eM.styleTokens,ez=(0,O.x)({root:[M.wp.px(16),M.wp.position.absolute,{left:0,width:"100%",top:0,height:0}],content:[M.wp.pl(6),M.wp.borderRadius(4,4,0,0),M.wp.rowWithGap(6),M.wp.align.center,M.wp.minHeight(28),{transform:eH.transform,backgroundColor:eH.backgroundColor,color:eH.color,transitionProperty:"background-color, color, transform",transitionDuration:e_.Ds.duration,transitionTimingFunction:e_.Ds.timingFunction,"> span":[M.wp.flex.growAndShrink(1)],"> button":{marginLeft:"auto",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}}],rateLimited:[M.wp.minHeight(28),M.wp.flex.growAndShrink(1)],rateLimitedContent:[M.wp.flex.growAndShrink(1)],rateLimitedResetText:{"> span":[M.wp.py(4)],span:[{display:"inline",lineHeight:1},M.wp.flex.growAndShrink(1)]},planConcludedButtons:[M.wp.pr(2),M.wp.align.center,{justifySelf:"end"}]});function eW(e){return e?(0,eA.F)(e):null}function eG(e){var n=e.sessionId,t=e.inProgressEventId,a=e.waitingOnUserInput,u=e.onHeightChange,p=(0,r._)((0,o.useState)(!1),2),f=p[0],h=p[1],m=(0,r._)((0,o.useState)(null),2),g=m[0],v=m[1],w=(0,s.dp)(),y=(0,s.dt)(n),b=(0,s.D2)(),S=(0,s.NC)(),Y=(0,c.J2)(S.replay.playing),A=(0,c.Rj)(function(){return S.replay.session.map(function(e){return(null==e?void 0:e.id)===n})},[S,n]);a&&(y={state:"waitingOnUserResponse"});var C=(0,s.Al)(t||null,eW),x=(0,s.E8)(n);(0,o.useEffect)(function(){if((null==y?void 0:y.state)==="running"&&!t){var e=setTimeout(function(){(0,d.pI)({action:"thinking_loop",sessionId:n}),x()},3e4);return function(){clearTimeout(e)}}},[y,t,n,x]),(0,o.useEffect)(function(){h(!1)},[y]),f&&(y=null);var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";w({sessionId:n,feedback:{type:null!=g?g:l.O3q.AGENT_FEEDBACK_UNKNOWN,comment:e}}),v(null),h(!0)};return A&&!Y?null:(0,i.FD)(i.FK,{children:[(0,i.Y)(eV,{sessionId:n,inProgressEventSummary:C,updateAgentRunState:b,status:y,hidePauseButton:Y,onDismiss:function(){return h(!0)},onFeedback:v,onHeightChange:u}),(0,i.Y)(eD.a,{isOpen:null!==g,onRequestClose:function(){_()},children:null!==g?(0,i.Y)(ex.O,{onSubmit:_}):null})]})}function eV(e){var n=e.status,t=e.sessionId,r=e.inProgressEventSummary,o=e.hidePauseButton,a=e.updateAgentRunState,s=e.onFeedback,c=e.onDismiss,u=e.onHeightChange,d=(0,eS.A)(function(e){e.heightChanged&&(null==u||u(e.height))});return(0,i.Y)(g.S,{css:ez.root,style:function(e){if(null===e)return n={},(0,ey._)(n,eB.backgroundColor,"transparent"),(0,ey._)(n,eB.color,"transparent"),(0,ey._)(n,eB.transform,"translateY(-100%)"),n;var n,t,r,i,o,a,l,s,c,u="translateY(-100%)";if("disconnected"===e.state)return t={},(0,ey._)(t,eB.backgroundColor,j.LU.yellowStronger),(0,ey._)(t,eB.color,j.LU.backgroundRoot),(0,ey._)(t,eB.transform,u),t;if("running"===e.state)return r={},(0,ey._)(r,eB.backgroundColor,j.LU.blurpleDimmest),(0,ey._)(r,eB.color,j.LU.foregroundDefault),(0,ey._)(r,eB.transform,u),r;if("pausing"===e.state)return i={},(0,ey._)(i,eB.backgroundColor,j.LU.greyDimmer),(0,ey._)(i,eB.color,j.LU.foregroundDefault),(0,ey._)(i,eB.transform,u),i;if("waitingOnUserResponse"===e.state)return o={},(0,ey._)(o,eB.backgroundColor,j.LU.backgroundHigher),(0,ey._)(o,eB.color,j.LU.foregroundDefault),(0,ey._)(o,eB.transform,u),o;var d=e.transitionReason;switch(null==d?void 0:d.$kind){case"stepLimitExceeded":case"error":case"authorizationFailed":return a={},(0,ey._)(a,eB.backgroundColor,j.LU.yellowStronger),(0,ey._)(a,eB.color,j.LU.backgroundRoot),(0,ey._)(a,eB.transform,u),a;case"userPaused":return l={},(0,ey._)(l,eB.backgroundColor,j.LU.greyDimmest),(0,ey._)(l,eB.color,j.LU.foregroundDefault),(0,ey._)(l,eB.transform,u),l;case"planConcluded":return s={},(0,ey._)(s,eB.backgroundColor,j.LU.accentPositiveDimmest),(0,ey._)(s,eB.color,j.LU.accentPositiveStrongest),(0,ey._)(s,eB.transform,u),s;default:return c={},(0,ey._)(c,eB.backgroundColor,j.LU.backgroundHigher),(0,ey._)(c,eB.color,j.LU.foregroundDefault),(0,ey._)(c,eB.transform,u),c}}(n),children:(0,i.FD)(g.S,{css:ez.content,innerRef:d,children:[(null==n?void 0:n.state)==="disconnected"?(0,i.Y)(ej,{}):null,(null==n?void 0:n.state)==="running"?(0,i.Y)(eq,{inProgressEventSummary:r,onPause:function(){return a({sessionId:t,runState:l.g32.AGENT_STATE_PAUSED})},hidePauseButton:void 0!==o&&o}):null,(null==n?void 0:n.state)==="pausing"?(0,i.Y)(eK,{}):null,(null==n?void 0:n.state)==="paused"?(0,i.Y)(e$,{onDismiss:c,sessionId:t,transitionReason:null==n?void 0:n.transitionReason,onResume:function(){return a({sessionId:t,runState:l.g32.AGENT_STATE_RUNNING})},onFeedback:s}):null,(null==n?void 0:n.state)==="waitingOnUserResponse"?(0,i.Y)(eZ,{}):null]})})}function ej(){return(0,i.FD)(i.FK,{children:[(0,i.Y)(eN.A,{}),(0,i.Y)(m.EY,{children:"".concat((0,s.Nn)({capitalizeFirstChar:!0})," lost connection. Try refreshing the page.")})]})}function eZ(){return(0,i.FD)(i.FK,{children:[(0,i.Y)(eT.A,{}),(0,i.FD)(m.EY,{multiline:!1,color:"dimmer",children:["Paused"," ",(0,i.FD)(m.EY,{color:"dimmest",children:["(",s.g$," is waiting for your response)"]})]})]})}function eq(e){var n=e.inProgressEventSummary,t=e.onPause,a=e.hidePauseButton,l=(0,r._)((0,o.useState)(eO[0]),2),s=l[0],c=l[1];return(0,o.useEffect)(function(){if(n){c(eO[0]);return}var e=null;return function n(){e=setTimeout(function(){c(function(e){var n=(eO.indexOf(e)+1)%eO.length;return eO[n]}),n()},5e3)}(),function(){e&&clearTimeout(e)}},[n]),(0,i.FD)(i.FK,{children:[(0,i.Y)(V.l,{loading:!0,size:16}),(0,i.Y)(g.S,{tag:"span",css:eY.Vb,children:n?(0,i.Y)(eC.B,{summary:n}):(0,i.FD)(m.EY,{multiline:!1,children:[s,"..."]})}),void 0!==a&&a?null:(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(eT.A,{}),size:"small",variant:"nofill",colorway:"blurple",text:"Pause",onClick:t})]})}function eK(){return(0,i.FD)(i.FK,{children:[(0,i.Y)(eT.A,{}),(0,i.FD)(m.EY,{multiline:!1,color:"dimmer",children:["Pausing..."," ",(0,i.Y)(m.EY,{color:"dimmest",children:" (Waiting for action to complete)"})]})]})}function e$(e){var n=e.sessionId,t=e.transitionReason,r=e.onResume,o=e.onFeedback,a=e.onDismiss;switch(null==t?void 0:t.$kind){case"stepLimitExceeded":return(0,i.FD)(i.FK,{children:[(0,i.Y)(eN.A,{}),(0,i.FD)(m.EY,{children:["Reached maximum step limit (",t.stepLimitExceeded.maxSteps," steps)"]})]});case"rateLimited":return(0,i.Y)(eQ,{timeWhenReset:t.rateLimited.timeWhenReset});case"authorizationFailed":if(t.authorizationFailed.code===l.HkE.INSUFFICIENT_BUDGET)return(0,i.FD)(i.FK,{children:[(0,i.Y)(eN.A,{}),(0,i.Y)(m.EY,{children:"Budget exceeded"})]});return(0,i.FD)(i.FK,{children:[(0,i.Y)(eN.A,{}),(0,i.Y)(m.EY,{children:t.authorizationFailed.message})]});case"error":return(0,i.FD)(i.FK,{children:[(0,i.Y)(eN.A,{}),(0,i.FD)(m.EY,{children:[(0,s.Nn)({capitalizeFirstChar:!0})," encountered an error."," "]}),(0,i.Y)(p.$n,{text:"Try again",colorway:"yellow",variant:"nofill",size:"small",onClick:function(){r(),(0,d.pI)({action:"attempted_try_again",sessionId:n})}})]});case"planConcluded":return(0,i.Y)(eJ,{onDismiss:a,onFeedback:o});default:return(0,i.FD)(i.FK,{children:[(0,i.Y)(eT.A,{}),(0,i.FD)(m.EY,{multiline:!1,color:"dimmer",children:[(0,s.Nn)({capitalizeFirstChar:!0})," is paused"]}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(eP.A,{}),size:"small",variant:"nofill",colorway:"grey",text:"Resume",onClick:r})]})}}function eJ(e){var n=e.onFeedback,t=e.onDismiss;return(0,i.FD)(i.FK,{children:[(0,i.Y)(eR.A,{}),(0,i.Y)(m.EY,{children:"Plan completed! How'd I do?"}),(0,i.FD)(g.S,{css:ez.planConcludedButtons,row:!0,gap:2,children:[(0,i.Y)(ei.K0,{alt:"Good",colorway:"positive",onClick:function(){return n(l.O3q.AGENT_FEEDBACK_THUMB_UP)},children:(0,i.Y)(eU.A,{})}),(0,i.Y)(ei.K0,{alt:"Not good",onClick:function(){return n(l.O3q.AGENT_FEEDBACK_THUMB_DOWN)},colorway:"positive",children:(0,i.Y)(eL.A,{})}),(0,i.Y)(ei.K0,{alt:"Close",onClick:function(){return t()},colorway:"positive",children:(0,i.Y)(eI.A,{})})]})]})}function eQ(e){var n=e.timeWhenReset;return(0,i.FD)(g.S,{css:ez.rateLimited,row:!0,gap:6,align:"center",children:[(0,i.Y)(eF.A,{}),(0,i.Y)(g.S,{css:ez.rateLimitedContent,children:(0,i.FD)(m.EY,{children:["You've hit the usage limit for"," ",(0,s.Nn)({variant:"casual",capitalizeFirstChar:!1}),"."," ",(0,i.FD)(m.EY,{css:ez.rateLimitedResetText,children:["Usage will reset"," ",(0,i.Y)(eE.Dc,{date:n,dateFormat:"relative",live:!0}),"."," ",(0,i.FD)("a",{target:"_blank",href:eb.ik.AGENT,children:["Learn more"," "]})]})]})})]})}var eX=t(17668),e0=t.n(eX);function e1(e){var n,t,a,p,f,m,v,w,y,b,S=e.disabled,Y=e.loading,A=e.sessionId,C=e.sendMessage,x=e.onOpenAssistant,_=e.onNewSession,k=e.inputRef,D=e.shouldAutoscrollRef,E=e.waitingOnUserInput,R=e.feedbackButton,I=e.isSubmitDisabled,F=e.submitDisabledReason,T=e.onStatusBarHeightChange,P=(0,u._P)({controlName:"flag-agent-debug-info-button"}),L=(0,u._P)({controlName:"flag-agent-visual-editor-button"}),U=(0,u._P)({controlName:"flag-machine-meditation"}),N=(0,s.JB)(A),O=(0,Q.A)(N,1e3),M=(0,s.jX)(A),B=(t=(n={sessionId:A,sendMessage:C,shouldAutoscrollRef:D}).sessionId,a=n.sendMessage,p=n.shouldAutoscrollRef,(0,s.Ih)(null!=t?t:null),f=(0,eh.A)().fs,m=(0,d.Ay)(),v=(0,eg.Hw)(),w=(0,o.useCallback)(function(){var e,n=v(function(e){var n=(0,r._)(e,2);return"agentProgress"===(n[0],n[1]).type});if((null==n?void 0:null===(e=n.bindings)||void 0===e?void 0:e.type)!=="agentProgress")return!1;n.bindings.autoScroll()},[v]),y=(0,o.useCallback)(function(e,n,r,i){p.current=!0,w();var o=n.map(function(e){return{path:e.path,mimeType:e.file.type}}),s=el.current.element,c=e;s&&(c="[dev] Context about the element: ".concat(JSON.stringify(s),"\n\n").concat(e),es()),a({model:l.e3q.ADVANCED,message:c,uploadedFiles:o,attachedUrls:r,intent:l.qRv.AGENT,kind:"message",enableDeepThinking:i},{newSessionType:l.dF3.AGENT_SESSION}),m({action:"user_message_sent",messageText:c,sessionId:t||void 0})},[t,a,w,m,p]),{uploadFilesHandler:(0,o.useCallback)((b=(0,ed._)(function(e){var n,t;return(0,ep.YH)(this,function(r){switch(r.label){case 0:return n=e.files,t=e.onError,[4,(0,ef.Zn)({parentPath:em.Ls,files:n,fs:f,overwrite:!0,onError:function(e){return t(e.error)}})];case 1:return r.sent(),[2]}})}),function(e){return b.apply(this,arguments)}),[f]),onSubmit:y}),H=B.uploadFilesHandler,z=B.onSubmit,W=(0,s.NC)(),G=(0,c.J2)(W.sessions.agent),V=(0,c.J2)(null==G?void 0:G.agent.branch),j=(0,c.Rj)(function(){return null==V?void 0:V.reduce(e2)},[V]),Z=(0,ew.z)({type:"agent"});return(0,i.FD)(g.S,{clsx:e0().root,innerRef:Z,children:[A?(0,i.Y)(eG,{sessionId:A,inProgressEventId:j,waitingOnUserInput:E,onHeightChange:T}):null,(0,i.Y)(X.A,{sessionId:null!=A?A:void 0,blurple:E,persistenceKey:"agent-mode-input-".concat(A),status:Y?"loading":"composing",onSubmit:z,onNewSession:_,onOpenAssistant:x,inputRef:k,uploadFiles:H,disabled:S,isSubmitDisabled:I,submitDisabledReason:F,messageThresholdReached:M,debugButton:P&&A?(0,i.FD)(h.ui,{row:!0,children:[(0,i.Y)(ev.A,{sessionId:A,sessionType:l.dF3.AGENT_SESSION}),L?(0,i.Y)(eu,{}):null]}):null,feedbackButton:S?null:R,event:O,showDeepThinkingControl:U})]})}var e2={direction:"reverse",size:100,state:{eventId:null},result:function(e){return e.eventId},reducer:function(e,n){if((0,eA.F)(e)&&e.state===l.qOk.IN_PROGRESS)return n.eventId=e.id,!1}},e5=t(89223),e4=t(43249);function e3(e){var n=e.sessionId,t=(0,T.A)(),a=(0,r._)((0,o.useState)(!1),2),c=a[0],u=a[1],d=(0,s.D2)();return(0,i.FD)(i.FK,{children:[(0,i.FD)(h.ui,{css:e8.root,gap:4,elevated:!0,children:[(0,i.FD)(m.EY,{children:["Youve hit the monthly budget. Increase your usage budget to continue using the Agent."," "]}),(0,i.Y)(g.S,{css:e8.budgetButtonContainer,row:!0,gap:4,children:(0,i.Y)(p.$n,{css:e8.budgetButton,iconLeft:(0,i.Y)(e4.A,{}),text:"Increase budget",onClick:function(){return u(!0)},variant:void 0})})]}),(0,i.Y)(eD.a,{isOpen:c,onRequestClose:function(){return u(!1)},children:(0,i.Y)(e5.h,{style:"borderless",replId:t,onUpdateSuccess:function(){u(!1),d({sessionId:n,runState:l.g32.AGENT_STATE_RUNNING})}})})]})}var e8=(0,O.x)({root:[M.wp.borderRadius(4),M.wp.p(8),M.wp.textAlign.center],budgetButtonContainer:[M.wp.width("100%"),M.wp.justify.center,{containerType:"inline-size"}],budgetButton:[{"@container (max-width: 330px)":{"& span":{display:"none"}}}]}),e7=t(76222);function e6(){var e=(0,A._)(["\n  fragment AgentSessionErrorUsageInterval on UsageInterval {\n    endDate\n  }\n"]);return e6=function(){return e},e}function e9(){var e=(0,A._)(["\n  query AgentSessionError($orgId: String) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          ...AgentSessionErrorUsageInterval\n        }\n        ... on Error {\n          message\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageInterval {\n            ... on UsageInterval {\n              ...AgentSessionErrorUsageInterval\n            }\n            ... on Error {\n              message\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return e9=function(){return e},e}var ne={},nn=(0,C.J1)(e6()),nt=(0,C.J1)(e9(),nn,e7.B9),nr=t(81536),ni=t(53367),no=t(87910),na=t(89401),nl=t(72602),ns=t(60372),nc=t(20662),nu=(0,O.x)({root:[M.wp.position.relative,M.wp.p(8),M.wp.borderRadius(),M.wp.border({color:j.LU.outlineDimmest}),M.wp.colWithGap(4),{containerType:"inline-size"}]});function nd(e){return(0,i.FD)(g.S,{row:!0,gap:6,align:"center",children:[(0,i.Y)(V.l,{size:16}),(0,i.Y)(m.EY,{variant:"subheadDefault",children:e.children})]})}function np(e){return(0,i.FD)(h.ui,{elevated:!0,css:nu.root,children:[(0,i.Y)(nd,{children:"Youve hit your usage budget"}),(0,i.FD)(m.EY,{"data-chromatic":"ignore",children:["Increase your usage budget to continue using Agent now. Otherwise, your usage will reset"," ",e.creditsResetDate?(0,i.FD)(i.FK,{children:["on ",(0,na.A)(e.creditsResetDate,"MMM do, HH:mm aaa")," "]}):null,"when the next billing period begins."]}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(nc.A,{}),text:"Increase usage budget",colorway:"primary",onClick:e.onIncreaseBudget})]})}function nf(e){return(0,i.FD)(h.ui,{css:nu.root,elevated:!0,children:[(0,i.Y)(nd,{children:"Add a billing method to continue using Agent"}),(0,i.Y)(m.EY,{children:"Youve used all your monthly creditsyoull need to to add a billing method to pay for additional Agent usage."}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(ns.A,{}),text:"Add billing method",colorway:"primary",onClick:e.onAddBillingMethod})]})}function nh(){return(0,i.FD)(h.ui,{css:nu.root,elevated:!0,children:[(0,i.Y)(nd,{children:"Your subscription is not active anymore"}),(0,i.Y)(m.EY,{children:"Your subscription has expired or been canceled. To continue using Agent, make sure your subscription is active."}),(0,i.Y)(f.v,{href:"/pricing",iconRight:(0,i.Y)(nl.A,{}),text:"See pricing",colorway:"primary"})]})}function nm(e){var n=e.error;return(0,i.FD)(h.ui,{css:nu.root,elevated:!0,children:[(0,i.Y)(nd,{children:"Dev only error"}),(0,i.FD)(m.EY,{children:[n.type," - ",n.message]})]})}function ng(e){var n=(0,T.A)(),t=(0,nr.R)(n),a=t.hasError,s=t.orgId,c=(f={variables:{orgId:s},skip:void 0===s||a},h=(0,Y._)({},ne,f),x.I(nt,h)).data;v=s?(null==c?void 0:null===(w=c.currentUser)||void 0===w?void 0:w.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===c.currentUser.org.usageBasedBillingAlerts.__typename?c.currentUser.org.usageBasedBillingAlerts:void 0:(null==c?void 0:null===(y=c.currentUser)||void 0===y?void 0:y.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?c.currentUser.usageBasedBillingAlerts:void 0;var u=(0,r._)((0,o.useState)(null),2),d=u[0],p=u[1];switch(e.error.type){case l.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:var f,h,v,w,y,b,S,A=null==c?void 0:c.currentUser,C=(null==A?void 0:A.org.__typename)==="Org"?A.org:void 0;return(null==C?void 0:C.usageInterval.__typename)==="UsageInterval"?S=new Date(C.usageInterval.endDate):(null==A?void 0:null===(b=A.usageInterval)||void 0===b?void 0:b.__typename)==="UsageInterval"&&(S=new Date(A.usageInterval.endDate)),(0,i.FD)(i.FK,{children:[(0,i.Y)(np,{creditsResetDate:S,onIncreaseBudget:function(){return p(l.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET)}}),(0,i.Y)(eD.a,{isOpen:d===l.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET,onRequestClose:function(){return p(null)},children:(0,i.Y)(no.j,{org:C,initialSettings:v,onDone:function(){return window.location.reload()}})})]});case l.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:return(0,i.FD)(i.FK,{children:[(0,i.Y)(nf,{onAddBillingMethod:function(){p(l.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD)}}),(0,i.Y)(eD.a,{isOpen:d===l.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD,onRequestClose:function(){return p(null)},children:(0,i.FD)(g.S,{gap:16,children:[(0,i.Y)(m.Y9,{variant:"headerDefault",level:1,children:"Manage Payment"}),(0,i.Y)(ni.n,{})]})})]});case l.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:return(0,i.Y)(nh,{});default:return(0,i.Y)(nm,{error:e.error})}}function nv(e){var n,t,d,p,f,h,m,g,v,w,y,b,A,C,_,k,D,R,P,L,U=e.openPane,N=e.loading,O=e.sendMessage,M=e.inputRef,B=e.sessionId,H=e.onNewSession,V=e.shouldAutoscrollRef,j=e.waitingOnUserInput,Z=e.feedbackButton,Q=e.onStatusBarHeightChange,X=(0,s.q4)(),ee=(0,$.F)(),en=(y=(f=(t={variables:{replId:(0,T.A)()}},d=(0,Y._)({},E,t),p=x.I(I,d)).data,h=p.loading,m=p.error,w={orgId:(null==f?void 0:f.getRepl.__typename)==="Repl"?null===(n=f.getRepl.org)||void 0===n?void 0:n.id:void 0,loading:h,error:m}).orgId,b=w.loading,A=w.error,D=(C={variables:{orgId:y}},_=(0,Y._)({},E,C),k=x.I(F,_)).data,R=k.loading,P=k.error,L=k.refetch,b||R?{loading:!0,refetch:L}:A||P?{loading:!1,refetch:L}:void 0===y?{authorizations:(null==D?void 0:null===(v=D.currentUser)||void 0===v?void 0:v.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?D.currentUser.personalOrgAuthorizations:void 0,loading:!1,refetch:L}:{authorizations:(null==D?void 0:null===(g=D.currentUser)||void 0===g?void 0:g.org.__typename)==="Org"?D.currentUser.org.authorizations:void 0,loading:!1,refetch:L}),et=en.authorizations,er=en.loading,ei=(0,K.i)(),eo=ei.agentCheckpoints,ea=ei.loading,el=(0,u._P)({controlName:"flag-freemium-ai-load-shedder"}),es=(0,s.Ff)().transitionReason,ec=(0,s.PP)(B),eu=(0,s.Tt)(B),ed=(0,J.eg)(),ep=(0,s.NC)(),ef=(0,c.J2)(ep.replay.playing),eh=(0,J.gp)(),em=(0,r._)((0,o.useState)(null),2),eg=em[0],ev=em[1],ew=(0,o.useCallback)(function(){return U({type:"ghostwriterChat"})},[U]);if((0,s.hM)(B,function(e){switch(e.type){case l.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:case l.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:case l.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:ev(e)}}),eg)return(0,i.Y)(ng,{error:eg});if(X)return(0,i.Y)(G.x,{});var ey=!(null==et?void 0:et.paidAgent.isAuthorized)&&(null==et?void 0:et.paidAgent.code)===a.JB.InsufficientBudget,eb=(null==es?void 0:es.$kind)==="authorizationFailed"&&es.authorizationFailed.code===l.HkE.INSUFFICIENT_BUDGET;if((ey||eb)&&B)return(0,i.Y)(e3,{sessionId:B});if(!ea&&ee&&!(null==eo?void 0:eo.isUnderQuota))return(0,i.Y)(z,{openPane:U});if(ee&&el)return(0,i.Y)(W.n,{aiName:s.g$});if(ed&&eu&&!ef)return(0,i.Y)(S,{onNewSession:function(){H(),eh()}});if(ec&&(!eu||!ef))return(0,i.Y)(q,{onNewSession:H});var eS=!(null==et?void 0:et.paidAgent.isAuthorized)&&!(null==et?void 0:et.freeAgent.isAuthorized),eY=N||er||ea,eA=null;return eY?eA="Loading...":eS&&(eA="You do not have access to this feature"),(0,i.Y)(e1,{sessionId:B,onNewSession:H,onOpenAssistant:ew,sendMessage:O,loading:eY,inputRef:M,shouldAutoscrollRef:V,waitingOnUserInput:j,disabled:eu,isSubmitDisabled:eS||eY,submitDisabledReason:eA,feedbackButton:Z,onStatusBarHeightChange:Q})}},49574:(e,n,t)=>{"use strict";t.d(n,{W:()=>_,e:()=>D});var r,i,o,a=t(72275),l=t(20837),s=t(43952),c=t(94086),u=t(80001),d=t(59497),p=t(52757),f=t(24955),h=t(73943),m=t(10168),g=t(1478),v=t(32842),w=t(31955),y=t(52186),b=t(8367),S=(0,g.v)(["contentBackgroundColor","footerHeight","footerOpacity"]),Y=S.cssVars,A=S.styleTokens,C=(0,p.i7)({"0%":{offsetDistance:"-20%",opacity:0},"10%":{opacity:1},"20%":{opacity:1},"30%":{offsetDistance:"120%",opacity:0},"100%":{opacity:0}}),x=(0,p.i7)({"0%":{borderColor:f.LU.blurpleDimmest,boxShadow:"0 0 4px ".concat(f.LU.blurpleDimmest)},"50%":{borderColor:f.LU.blurpleDefault,boxShadow:"0 0 4px ".concat(f.LU.blurpleDefault)},"100%":{borderColor:f.LU.blurpleDimmest,boxShadow:"0 0 4px ".concat(f.LU.blurpleDimmest)}}),_=[v.wp.borderRadius(),(r={},(0,a._)(r,v.$_.prefersReducedMotion,{display:"none"}),(0,a._)(r,"position","absolute"),(0,a._)(r,"top","-1px"),(0,a._)(r,"left","-1px"),(0,a._)(r,"width","calc(100% + 2px)"),(0,a._)(r,"height","calc(100% + 2px)"),(0,a._)(r,"overflow","hidden"),(0,a._)(r,"pointerEvents","none"),(0,a._)(r,"@supports (offset-path: rect(0% auto 100% auto))",{"&::before":[{pointerEvents:"none",content:'""',position:"absolute",left:0,top:0,height:"64px",width:"64px",offsetPath:"rect(0% auto 100% auto)",background:"radial-gradient(".concat(f.LU.blurpleStrongest,", ").concat(f.LU.blurpleDefault,", transparent)"),animation:"".concat(C," 8s linear infinite"),transform:"rotate(45deg)",transformOrigin:"center"}]}),(0,a._)(r,"@supports not (offset-path: rect(0% auto 100% auto))",{border:"1px solid transparent",animation:"".concat(x," 3s ease-in-out infinite"),background:"none",overflow:"visible"}),r)],k=(0,m.x)({root:[v.wp.pr(32),(o={containerType:"inline-size"},(0,a._)(o,Y.footerHeight,"28px"),(0,a._)(o,Y.footerOpacity,"1"),(0,a._)(o,'+ [data-event-type*="ai"] [data-avatar]',{visibility:"hidden"}),(0,a._)(o,':has(+ [data-event-type="ai-message"], + [data-event-type="secrets"],  + [data-event-type="plan"])',(i={paddingBottom:4},(0,a._)(i,Y.footerHeight,"0px"),(0,a._)(i,Y.footerOpacity,"0"),i)),o)],avatar:[v.wp.pt(6),v.wp.position.relative],main:[v.wp.position.relative,v.wp.flex.shrink(1),v.wp.colWithGap(6)],contentWrapper:[v.wp.position.relative],contentBorder:_,content:[v.wp.borderRadius(4),v.wp.px(8),v.wp.py(6),v.wp.position.relative,{backgroundColor:A.contentBackgroundColor}],footer:[v.wp.px(8),(0,s._)((0,l._)({},function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return{transitionProperty:n.join(", "),transitionDuration:h.Ds.duration,transitionTimingFunction:h.Ds.timingFunction}}("height","opacity")),{height:A.footerHeight,opacity:A.footerOpacity})]});function D(e){var n,t=e.elevated,r=void 0===t||t,i=e.showAvatar,o=e.highlighted,l=e.children,s=e.timestamp,p=(0,d.A)();return(0,c.FD)(b.S,{css:k.root,row:!0,gap:8,"data-event-type":"ai-message",style:(n={},(0,a._)(n,Y.contentBackgroundColor,o?"color-mix(in srgb, ".concat(f.LU.blurpleDimmest," 25%, ").concat(f.LU.interactiveBackground,")"):r?f.LU.interactiveBackground:f.LU.backgroundDefault),(0,a._)(n,"paddingBottom",p?f.LU.space2:f.LU.space16),n),children:[(0,c.Y)(b.S,{css:k.avatar,"data-avatar":!0,children:(0,c.Y)(u.l,{size:22,hidden:!(void 0===i||i)})}),(0,c.FD)(b.S,{css:k.main,children:[(0,c.FD)(b.S,{css:k.contentWrapper,children:[o?(0,c.Y)(b.S,{css:k.contentBorder}):null,(0,c.Y)(w.ui,{elevated:r,css:k.content,children:l})]}),s&&!p?(0,c.Y)(b.S,{css:k.footer,"data-timestamp":!0,children:(0,c.Y)(y.Dc,{live:!0,date:s,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized"})}):null]})]})}},75577:(e,n,t)=>{"use strict";t.d(n,{p:()=>w});var r=t(72275),i=t(94086),o=t(30758),a=t(22826),l=t(10168),s=t(1478),c=t(32842),u=t(40889),d=t(65599),p=t(8367),f=(0,s.v)(["indicatorColor"]),h=f.cssVars,m=f.styleTokens,g=(0,l.x)({indicator:[c.wp.width(8),c.wp.height(8),c.wp.borderRadius("full"),{backgroundColor:m.indicatorColor}]}),v=[a.F.values.global.greenDimmer,a.F.values.global.limeDimmest,a.F.values.global.yellowDimmest,a.F.values.global.orangeDimmer,a.F.values.global.redDefault];function w(e){var n=e.fullness,t=e.messageCount,a=e.showNumber,l=(0,o.useMemo)(function(){var e=Math.max(0,Math.min(1,n))*(v.length-1),t=Math.floor(e),r=Math.ceil(e);if(t===r)return v[t];var i=e-t;return"color-mix(in srgb, ".concat(v[t]," ").concat((1-i)*100,"%, ").concat(v[r]," ").concat(100*i,"%)")},[n]),s=n>0;if(!s||t<1)return null;var c=(0,i.FD)(p.S,{row:!0,gap:4,align:"center",style:(0,r._)({},h.indicatorColor,l),children:[(0,i.Y)(p.S,{css:g.indicator}),a?(0,i.Y)(u.EY,{variant:"small",color:"dimmer",style:s?{color:m.indicatorColor}:void 0,children:t}):null]});return s?(0,i.Y)(d.m_,{tooltip:a?"Messages exchanged":"Large chats can affect performance. You've sent ".concat(t," messages. Start a new chat for better results."),placement:"top",children:(0,i.Y)(p.S,{children:c})}):c}},85830:(e,n,t)=>{"use strict";t.d(n,{T:()=>tj});var r=t(66622),i=t(27189),o=t(94086),a=t(30758),l=t(8143),s=t(51439),c=t(66061),u=t(54867),d=t(6497),p=t(99655),f=t(55937),h=t(84321),m=t(83733),g=t(49574),v=t(13454),w=t(20837),y=t(43952),b=t(5482),S=t(55195),Y=t(51297),A=t(9546),C=t(39651),x=t(75576),_=t(82436),k=t(34806),D=t(79261),E=t(3517),R=t(34805),I=t(24481),F=t(35541),T=t(24955),P=t(10168),L=t(32842),U=t(40172),N=t(47303),O=t(95235),M=t(76985),B=t(40889),H=t(8367),z=t(16021),W=t(83290),G=t(98335),V=(0,P.x)({secretName:[L.wp.fontWeight.medium],secretValueCellHeader:[L.wp.gap(4),L.wp.color.foregroundDimmer],tableRow:[L.wp.p(6),L.wp.flex.column,L.wp.gap(8)],secretsRow:[L.wp.gap(8)],checkboxCell:[{flexGrow:0,flexShrink:0,width:T.LU.space24}],secretValueCell:[L.wp.flex.column,L.wp.gap(4),{width:"30%"}],confirmationMessage:[L.wp.color.accentPositiveStronger,L.wp.flex.row,L.wp.align.center,L.wp.gap(4)]});function j(e){var n=e.value,t=e.label,i=(0,r._)((0,a.useState)(!1),2),l=i[0],s=i[1],c=(0,a.useCallback)(function(){s(function(e){return!e})},[]);return(0,o.FD)(H.S,{css:V.secretValueCell,children:[(0,o.FD)(H.S,{css:V.secretValueCellHeader,row:!0,align:"center",children:[(0,o.Y)("span",{children:t}),(0,o.Y)(O.K0,{alt:"Toggle Visibility",onClick:c,children:l?(0,o.Y)(W.A,{}):(0,o.Y)(G.A,{})})]}),(0,o.Y)(B.EY,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l?n:""})]})}function Z(e){var n=e.existingSecrets,t=e.accountSecrets,l=e.onContinue,s=e.step,c=e.linkedSecrets,u=e.onSecretsUpdated,d=(0,C.A)(),p=(0,r._)((0,E.nB)(),1)[0],h=(0,m.A)(),g=(0,I.A)().secrets,w=(0,r._)((0,F.WM)(h,g.replaceAllExternalSecrets),1)[0],y=(0,r._)((0,F.Nz)(h,g.replaceAllExternalSecrets),1)[0],Y=(0,r._)((0,a.useState)(n),2),A=Y[0],x=Y[1],k=(0,r._)((0,a.useState)(!0),2),D=k[0],T=k[1],P=(0,r._)((0,a.useState)(!1),2),L=P[0],O=P[1],W="done"===s,G=(0,r._)((0,a.useState)(new Set),2),Z=G[0],q=G[1],K=(0,r._)((0,a.useState)(!1),2),$=K[0],J=K[1];(0,a.useEffect)(function(){x(n),1===n.length&&q(new Set([n[0].key]))},[n]);var Q=(0,a.useCallback)(function(e){q(function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t})},[]),X=(0,a.useMemo)(function(){return new Map(t.map(function(e){return[e.name,e]}))},[t]),ee=(0,a.useCallback)(function(){T(!1),l()},[l]),en=(0,a.useCallback)((0,v._)(function(){var e,n,t,r,o,a,s,m,v,Y,C;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(0===Z.size)return ee(),[2];J(!0),b.label=1;case 1:if(b.trys.push([1,8,,9]),s=A.filter(function(e){return Z.has(e.key)}),!((v=((null==c?void 0:null===(n=c.getRepl)||void 0===n?void 0:n.__typename)==="Repl"&&null!==(m=c.getRepl.sharedSecretLinks)&&void 0!==m?m:[]).filter(function(e){return s.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,3];return[4,y({variables:{input:{resourceId:h,resourceType:f.U9.Repl,ids:v}}})];case 2:b.sent(),b.label=3;case 3:return[4,(e=g).removeEntries.apply(e,(0,i._)(s.map(function(e){return e.key})))];case 4:return b.sent(),[4,p({variables:{input:{ownerType:f.n0.Account,secrets:s.map(function(e){var n,t;return{id:null!==(t=null===(n=X.get(e.key))||void 0===n?void 0:n.id)&&void 0!==t?t:"",name:e.key,value:e.value}})}}})];case 5:if(Y=b.sent(),(0,_.u4)(_.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"agent"}),!((null===(t=Y.data)||void 0===t?void 0:t.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null===(o=Y.data)||void 0===o?void 0:null===(r=o.updateSharedSecrets)||void 0===r?void 0:r.updatedSecrets)))return[3,7];return[4,w({variables:{input:{resourceId:h,resourceType:f.U9.Repl,secrets:Y.data.updateSharedSecrets.updatedSecrets.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 6:b.sent(),(0,_.u4)(_.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:Y.data.updateSharedSecrets.updatedSecrets.length}),b.label=7;case 7:return T(!1),J(!1),O(!0),l(),(null===(a=Y.data)||void 0===a?void 0:a.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==u||u(s.map(function(e){return{key:e.key,selectedKey:e.key}}))),[3,9];case 8:return C=b.sent(),S.Cp(C),d.showError("Something went wrong. Please try again."),J(!1),[3,9];case 9:return[2]}})}),[p,y,A,Z,l,ee,X,d,w,h,c,u,g]),et=A.length,er=(0,R.A)("Secret",et),ei=1===et?"it":"them",eo=Z.size,ea=(0,R.A)("Secret",eo),el=(0,a.useMemo)(function(){return 1===A.length?A[0]:null},[A]);return 0!==et&&("savingExistingSecrets"===s||"done"===s)?el?(0,o.FD)(o.FK,{children:[(0,o.FD)(B.EY,{children:['A Secret named "',el.key,'" already exists in your Account Secrets. Would you like to replace it with the new value?']}),(0,o.FD)(H.S,{row:!0,gap:4,children:[(0,o.Y)(U.$n,{text:"Replace Account Secret",onClick:en,loading:$,disabled:W}),(0,o.Y)(U.$n,{text:"Not now",variant:"outlined",onClick:ee,loading:$,disabled:W})]}),W&&L&&(0,o.FD)(H.S,{css:V.confirmationMessage,children:[(0,o.Y)(z.A,{size:16}),"Secret updated and linked"]})]}):(0,o.Y)(M.a,{isOpen:D,onRequestClose:ee,children:(0,o.FD)(H.S,{gap:16,children:[(0,o.FD)(B.Y9,{level:3,variant:"subheadDefault",children:[et," matching ",er," already exist",1===et?"s":""," in your account.",(0,o.Y)("br",{}),"Would you like to replace ",ei,"?"]}),(0,o.Y)(H.S,{gap:8,children:A.map(function(e){var n=t.find(function(n){return n.name===e.key});return(0,o.FD)(H.S,{css:V.tableRow,children:[(0,o.Y)(H.S,{row:!0,align:"center",children:(0,o.Y)(B.EY,{css:V.secretName,children:e.key})}),(0,o.FD)(H.S,{css:V.secretsRow,row:!0,align:"center",children:[(0,o.Y)(H.S,{css:V.checkboxCell,children:(0,o.Y)(N.S,{checked:Z.has(e.key),onChange:function(){return Q(e.key)}})}),(0,o.Y)(j,{label:"Existing",value:(null==n?void 0:n.value)||""}),(0,o.Y)(j,{label:"New",value:e.value})]})]},e.key)})}),(0,o.FD)(H.S,{row:!0,gap:4,children:[(0,o.Y)(U.$n,{text:"Cancel",onClick:ee,disabled:$}),(0,o.Y)(U.$n,{colorway:"primary",text:"Replace ".concat(eo," ").concat(ea),onClick:en,loading:$})]})]})}):null}var q=t(43249),K=(0,P.x)({confirmationMessage:[L.wp.color.accentPositiveStronger,L.wp.flex.row,L.wp.align.center,L.wp.gap(4)]});function $(e){var n=e.newSecrets,t=e.step,l=e.onContinue,s=e.linkSecrets,c=e.unlinkSecrets,u=e.linkedSecrets,d=e.onSecretsUpdated,p=(0,C.A)(),h=(0,I.A)().secrets,m=(0,r._)((0,a.useState)(!1),2),g=m[0],w=m[1],y=(0,r._)((0,E.w7)(),1)[0],Y=(0,r._)((0,a.useState)(!1),2),A=Y[0],x=Y[1],k=(0,a.useCallback)((0,v._)(function(){var e,t,r,o,a,m,g,v;return(0,b.YH)(this,function(b){switch(b.label){case 0:w(!0),b.label=1;case 1:return b.trys.push([1,8,,9]),[4,y({variables:{input:{ownerType:f.n0.Account,secrets:n.map(function(e){return{name:e.key,value:e.value}})}}})];case 2:if(!((null===(e=(t=b.sent()).data)||void 0===e?void 0:e.createSharedSecrets)&&"createdSecrets"in t.data.createSharedSecrets&&"CreateSharedSecretsResult"===t.data.createSharedSecrets.__typename&&t.data.createSharedSecrets.createdSecrets))return[3,7];return a=t.data.createSharedSecrets.createdSecrets,[4,(r=h).removeEntries.apply(r,(0,i._)(n.map(function(e){return e.key})))];case 3:if(b.sent(),!((g=((null==u?void 0:null===(o=u.getRepl)||void 0===o?void 0:o.__typename)==="Repl"&&null!==(m=u.getRepl.sharedSecretLinks)&&void 0!==m?m:[]).filter(function(e){return n.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,5];return[4,c(g)];case 4:b.sent(),b.label=5;case 5:return[4,s(a.map(function(e){return{secretId:e.id,alias:e.name}}))];case 6:b.sent(),null==d||d(a.map(function(e){return{key:e.name,selectedKey:e.name}})),(0,_.u4)(_.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:a.length}),b.label=7;case 7:return(0,_.u4)(_.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"agent"}),x(!0),l(),[3,9];case 8:return v=b.sent(),S.Cp(v),p.showError("Something went wrong."),[3,9];case 9:return w(!1),[2]}})}),[n,l,y,p,h,s,c,u,d]);return 0===n.length?null:(0,o.FD)(o.FK,{children:[(0,o.FD)(B.EY,{children:["Would you like to save"," ",1===n.length?"this Secret":"these Secrets"," to your Account Secrets so you can easily access"," ",1===n.length?"it":"them"," in other Apps?"]}),n.length>1&&(0,o.Y)(B.EY,{color:"dimmest",children:n.map(function(e){return e.key}).join(", ")}),(0,o.FD)(H.S,{row:!0,gap:4,children:[(0,o.Y)(U.$n,{text:"Add to Account Secrets",onClick:k,iconLeft:(0,o.Y)(q.A,{}),loading:g,disabled:"savingNewSecrets"!==t||A}),(0,o.Y)(U.$n,{text:"Not now",variant:"outlined",onClick:l,disabled:"savingNewSecrets"!==t||A,loading:g})]}),A&&(0,o.FD)(H.S,{css:K.confirmationMessage,children:[(0,o.Y)(z.A,{size:16}),(0,R.A)("Secret",n.length)," saved to account"]})]})}var J=t(16530),Q=t(42022);function X(e){return(0,o.FD)(Q.Ay,(0,y._)((0,w._)({viewBox:"0 0 16 16"},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M6.95 2a2.85 2.85 0 1 0 0 5.7 2.85 2.85 0 0 0 0-5.7M5 4.85a1.95 1.95 0 1 1 3.9 0 1.95 1.95 0 0 1-3.9 0",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M4.55 9.2a2.85 2.85 0 0 0-2.85 2.85v1.2a.45.45 0 0 0 .9 0v-1.2a1.95 1.95 0 0 1 1.95-1.95h3.902a1.62 1.62 0 0 1 .322-.9z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M11.783 7.05c-.384 0-.748.136-1.012.371a1.15 1.15 0 0 0-.404.86v.936H13.2v-.935c0-.317-.141-.627-.404-.86a1.53 1.53 0 0 0-1.013-.372M13.7 9.225v-.943c0-.47-.21-.913-.572-1.235a2.03 2.03 0 0 0-1.345-.497c-.5 0-.983.176-1.344.497a1.65 1.65 0 0 0-.572 1.235v.943a.73.73 0 0 0-.469.31 1.14 1.14 0 0 0-.198.66v2.545c0 .246.07.48.198.66a.7.7 0 0 0 .57.317h3.63c.245 0 .443-.14.57-.318.128-.179.199-.412.199-.66v-2.545c0-.247-.071-.48-.199-.66a.73.73 0 0 0-.468-.309m-3.732.492c-.04 0-.102.023-.163.108a.64.64 0 0 0-.105.37v2.545c0 .155.045.284.105.369.061.085.122.108.163.108h3.63c.041 0 .102-.023.163-.108a.64.64 0 0 0 .106-.37v-2.545a.64.64 0 0 0-.106-.369c-.06-.085-.122-.108-.163-.108z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M10.356 6.954c.385-.343.9-.529 1.427-.529.528 0 1.043.186 1.428.529.387.344.614.82.614 1.328v.845c.19.06.34.189.445.335.144.202.222.462.222.732v2.546c0 .27-.078.53-.222.732-.143.2-.376.37-.672.37h-3.63c-.296 0-.528-.17-.672-.37a1.27 1.27 0 0 1-.221-.732v-2.546c0-.27.077-.53.221-.732a.88.88 0 0 1 .446-.335v-.845c0-.508.227-.984.614-1.328m1.427-.279c-.47 0-.925.166-1.261.466-.338.3-.53.71-.53 1.14v.944a.125.125 0 0 1-.105.124.6.6 0 0 0-.387.258c-.11.156-.175.363-.175.587v2.546c0 .223.064.431.175.586.11.156.275.266.468.266h3.63c.194 0 .358-.11.468-.266.111-.155.176-.363.176-.586v-2.546c0-.224-.065-.431-.176-.587a.6.6 0 0 0-.386-.258.125.125 0 0 1-.105-.124v-.943c0-.431-.193-.841-.53-1.141s-.791-.466-1.262-.466m0 .5c-.356 0-.69.126-.93.34a1.03 1.03 0 0 0-.361.767v.81h2.583v-.81c0-.279-.124-.556-.362-.768a1.4 1.4 0 0 0-.93-.339m-1.095.153a1.65 1.65 0 0 1 1.095-.403c.414 0 .808.146 1.096.403.288.255.446.6.446.954v.935a.125.125 0 0 1-.125.125h-2.833a.125.125 0 0 1-.125-.125v-.935c0-.355.158-.699.446-.954m-.719 2.514c-.004 0-.028.008-.062.056a.5.5 0 0 0-.082.296v2.546a.5.5 0 0 0 .082.296c.034.048.058.055.062.056h3.628c.005 0 .028-.008.062-.056a.5.5 0 0 0 .083-.296v-2.546a.5.5 0 0 0-.083-.296c-.034-.048-.057-.055-.062-.056zm-.265-.09c.078-.109.173-.16.264-.16h3.63c.091 0 .187.051.265.16a.77.77 0 0 1 .129.442v2.546a.77.77 0 0 1-.129.441c-.078.11-.174.161-.265.161h-3.63c-.09 0-.186-.051-.264-.16a.77.77 0 0 1-.13-.442v-2.546c0-.178.053-.333.13-.441",clipRule:"evenodd"})]}))}var ee=t(40641),en=t(27233),et=(0,P.x)({root:[L.wp.flex.row,L.wp.justify.spaceBetween,L.wp.align.center],metadata:[L.wp.flex.column,L.wp.gap(8),L.wp.width("100%")],label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},comboBox:[{"& > * > *":{backgroundColor:"".concat(T.LU.backgroundDefault," !important")}}]}),er=(0,a.forwardRef)(function(e,n){var t=e.secretKey,r=e.secretValue,i=e.isSensitive,a=(0,J._)(e,["secretKey","secretValue","isSensitive"]);return(0,o.Y)(en.if,(0,y._)((0,w._)({},a),{ref:n,textValue:t,css:et.root,children:(0,o.FD)("div",{css:et.metadata,children:[(0,o.Y)(B.EY,{color:"dimmer",variant:"small",css:et.label,children:t}),(0,o.Y)(B.EY,{variant:"small",css:et.value,"data-sensitive":i,children:i?"********":r})]})}))}),ei=(0,a.forwardRef)(function(e,n){var t=e.accountSecrets,r=e.onChange,i=e.onSelectionChange,l=e.value,s=e.isSensitive,c=e.readOnly,u=e.keyName,d=e.selectedKey,p=(0,a.useRef)(!1);return(0,o.Y)(ee.a,{ref:n,triggerIcon:(0,o.Y)(X,{}),css:et.comboBox,maxHeight:200,menuTrigger:"focus","aria-label":"".concat(u," Value"),isRequired:!0,isDisabled:c,allowsEmptyCollection:!1,selectedKey:d,onSelectionChange:function(e){if(e){p.current=!0;var n,o=t.find(function(n){return n.name===e});r(null!==(n=null==o?void 0:o.value)&&void 0!==n?n:""),i(e),setTimeout(function(){p.current=!1},50)}},onInputChange:function(e){p.current||(r(e),i(null))},inputValue:l,isInvalid:!1,allowsCustomValue:!0,formValue:"text",children:t.map(function(e){return(0,o.Y)(er,{isSensitive:s,secretKey:e.name,secretValue:e.value,label:e.name,id:e.name},e.name)})})}),eo=t(52757),ea=t(88966),el=t(28354),es=t(65599),ec=t(60676),eu=t(85213),ed=t(14753),ep=t(36954),ef=(0,eo.AH)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:T.LU.space8,"> *":{height:"fit-content"}}),eh=(0,P.x)({root:[ef]}),em=(0,P.x)({actions:[L.wp.gap(4),L.wp.flex.wrap],form:[L.wp.p(8)],secretHeader:[ef,L.wp.mb(4),L.wp.fontSize("small"),L.wp.color.foregroundDimmer,{lineHeight:T.LU.lineHeightSmall,"> div":[L.wp.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],secretValueRoot:[L.wp.gap(8),{'&[data-sensitive="true"] input':{fontFamily:"text-security-disc"}}],secretValueInput:[L.wp.flex.column,L.wp.flex.growAndShrink(1)],primaryButton:[(0,ea.Li)("blurple"),{width:"fit-content","&[disabled]":[(0,ea.Li)("grey")]}],input:[{backgroundColor:T.LU.backgroundDefault}],secretValueFooter:[L.wp.p(4),{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}]}),eg=(0,a.forwardRef)(function(e,n){var t=e.keyName,r=e.value,l=e.onChange,s=e.readOnly,c=e.accountSecrets,u=e.isSensitive,d=e.selectedKey,p=e.onSelectedKeyChange,f=(0,a.useMemo)(function(){return(0,i._)(c).sort(function(e,n){return e.name===t?-1:n.name===t?1:0})},[c,t]);return(0,o.FD)(H.S,{css:eh.root,children:[(0,o.Y)(H.S,{children:(0,o.Y)(el.pd,{value:t,disabled:!0,css:em.input})}),(0,o.Y)(H.S,{css:em.secretValueRoot,row:!0,align:"start","data-sensitive":u,children:(0,o.FD)(H.S,{css:em.secretValueInput,children:[(0,o.Y)(ei,{ref:n,accountSecrets:f,onChange:l,onSelectionChange:p,value:r,isSensitive:u,readOnly:s,keyName:t,selectedKey:d}),d?(0,o.FD)(H.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(es.m_,{tooltip:"Link Account Secret to this Repl",children:(0,o.Y)(eu.A,{color:T.LU.accentPrimaryStronger})}),(0,o.FD)(B.EY,{variant:"small",color:"dimmer",css:em.secretValueFooter,children:["Using ",d]})]}):null]})})]})});function ev(e){var n,t=e.keys,l=e.addEntries,s=e.removeEntries,c=e.onComplete,u=e.sessionId,d=e.isLast,p=e.replId,f=e.linkSecrets,h=e.unlinkSecrets,m=(0,C.A)(),g=(0,r._)((0,a.useState)(!1),2),E=g[0],R=g[1],I=(0,r._)((0,a.useState)(!0),2),F=I[0],T=I[1],P=(0,A.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,L=(0,a.useMemo)(function(){var e;return(null==P?void 0:null===(e=P.currentUser)||void 0===e?void 0:e.secrets.__typename)==="SharedSecretConnection"?P.currentUser.secrets.items:[]},[P]),N=(0,A.bM)({variables:{replId:p}}).data,M=(0,r._)((0,a.useState)(t.map(function(e){return{key:e,value:""}})),2),B=M[0],z=M[1],V=(0,r._)((0,a.useState)(new Map),2),j=V[0],q=V[1];(0,a.useEffect)(function(){L&&B.every(function(e){return""===e.value})&&(z((0,Y.jM)(function(e){e.forEach(function(e){var n=L.find(function(n){return n.name===e.key});n&&(e.value=n.value)})})),q((0,Y.jM)(function(e){t.forEach(function(n){var t=L.find(function(e){return e.name===n});t&&e.set(n,t.name)})})))},[L,t,B]);var K=(0,r._)((0,a.useState)(d?"selecting":"done"),2),J=K[0],Q=K[1],ee=(0,r._)((0,a.useState)([]),2),en=ee[0],et=ee[1],er=(0,r._)((0,a.useState)([]),2),ei=er[0],eo=er[1],ea=(0,r._)((0,a.useState)([]),2),el=(ea[0],ea[1]),es=(0,D.Ay)(),eu=(0,a.useRef)(!1);(0,a.useEffect)(function(){!eu.current&&t&&(es({action:"secrets_requested",secretsRequested:t,sessionId:u}),eu.current=!0)},[t,u,es]);var ef=(0,a.useMemo)(function(){return B.every(function(e){return!!e.value})},[B]),eh=(0,a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.nextNewSecrets,t=e.nextExistingEntries,r=e.nextMatchingEntries;n&&et(n),t&&eo(t),r&&el(r);var i=null!=n?n:en,o=null!=t?t:ei,a={selecting:function(){return i.length>0?"savingNewSecrets":o.length>0?"savingExistingSecrets":"done"},savingNewSecrets:function(){return o.length>0?"savingExistingSecrets":"done"},savingExistingSecrets:"done",done:"done"};J in a&&Q("function"==typeof a[J]?a[J]():a[J])},[ei,en,J]),ev=(0,x.Z)(J),ew=(0,a.useRef)("done"===J);(0,a.useEffect)(function(){"selecting"===J||ew.current||(j.size>0&&(0,_.u4)(_.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"copy",source:"agent",size:j.size}),ew.current=!0,c().catch(function(e){S.Cp(e),m.showError("Something went wrong. Please try again."),ew.current=!1,ev&&Q(ev)}))},[c,J,j,m,ev]);var ey=(n=(0,v._)(function(){var e,n,t,r,o,a,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:R(!0),p.label=1;case 1:if(p.trys.push([1,8,,9]),e=new Map(L.map(function(e){return[e.name,e]})),t=(n=B.reduce(function(n,t){var r=e.get(t.key);return r?r.value===t.value?n.matchingEntries.push(t):n.existingEntries.push(t):n.newEntries.push(t),n},{newEntries:[],existingEntries:[],matchingEntries:[]})).newEntries,r=n.existingEntries,!((o=n.matchingEntries).length>0||r.length>0||t.length>0))return[3,7];if(!((a=(0,i._)(o).concat((0,i._)(r),(0,i._)(t)).map(function(e){return e.key})).length>0))return[3,3];return[4,s.apply(void 0,(0,i._)(a.map(function(e){return e})))];case 2:p.sent(),p.label=3;case 3:if(c=(0,i._)(o).concat((0,i._)(r),(0,i._)(t)).map(function(e){var n=e.key,t=j.get(n);if(t){var r=L.find(function(e){return e.name===t});if(r)return{secretId:r.id,alias:n}}return null}).filter(function(e){return null!==e}),u=(0,i._)(o).concat((0,i._)(r),(0,i._)(t)).filter(function(e){return!j.has(e.key)}),!(c.length>0))return[3,5];return[4,f(c)];case 4:p.sent(),p.label=5;case 5:if(!(u.length>0))return[3,7];return[4,l(u)];case 6:p.sent(),p.label=7;case 7:return eh({nextNewSecrets:t,nextExistingEntries:r,nextMatchingEntries:o}),[3,9];case 8:return d=p.sent(),S.Cp(d),m.showError("Something went wrong. Please try again."),[3,9];case 9:return R(!1),[2]}})}),function(){return n.apply(this,arguments)}),eb=(0,a.useRef)(null),eS=(0,a.useRef)(null),eY=(0,a.useCallback)(function(){eS.current&&eS.current.focus()},[]);return(0,o.FD)(H.S,{gap:8,children:[(0,o.Y)(k.N,{icon:(0,o.Y)(ep.A,{}),title:"Secrets",children:(0,o.FD)(H.S,{css:em.form,children:[(0,o.FD)(H.S,{css:em.secretHeader,children:[(0,o.Y)(H.S,{children:"Key"}),(0,o.FD)(H.S,{children:["Value",(0,o.Y)(O.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return T(!F)},size:18,children:F?(0,o.Y)(W.A,{}):(0,o.Y)(G.A,{})})]})]}),(0,o.FD)(H.S,{gap:8,innerRef:eb,children:[B.map(function(e,n){var t,r=e.key,i=e.value;return(0,o.Y)(eg,{isSensitive:F,keyName:r,value:i,readOnly:"done"===J,accountSecrets:L,selectedKey:null!==(t=j.get(r))&&void 0!==t?t:null,onSelectedKeyChange:function(e){q(function(n){var t=new Map(n);return e?t.set(r,e):t.delete(r),t})},onChange:function(e){z(function(n){return n.map(function(n){return n.key===r?(0,y._)((0,w._)({},n),{value:e}):n})})},ref:n===B.length-1?eS:void 0},r)}),(0,o.FD)(H.S,{css:em.actions,row:!0,justify:"space-between",children:[L.length>0&&"selecting"===J?(0,o.Y)(U.$n,{iconLeft:(0,o.Y)(X,{}),text:"Choose from Account Vault",onClick:eY,disabled:"selecting"!==J,loading:E}):(0,o.Y)("span",{}),(0,o.Y)(U.$n,{css:em.primaryButton,iconLeft:E?(0,o.Y)(ed.A,{}):(0,o.Y)(ec.A,{}),text:"Continue",onClick:ey,loading:E,disabled:"selecting"!==J||!ef||E})]})]})]})}),(0,o.Y)($,{newSecrets:en,step:J,onContinue:eh,linkSecrets:f,unlinkSecrets:h,linkedSecrets:N,onSecretsUpdated:function(e){q(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}}),(0,o.Y)(Z,{existingSecrets:ei,accountSecrets:L,onContinue:eh,step:J,linkedSecrets:N,onSecretsUpdated:function(e){q(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}})]})}var ew=t(12887),ey=t(58831);function eb(e){if(!e||e.sender.type!==h.utd.AI)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)==="messageEventContents"){var t,r=(null===(t=n.messageEventContents.agentAction.optionType)||void 0===t?void 0:t.$kind)==="secretRequestAction"?n.messageEventContents.agentAction.optionType.secretRequestAction.secrets:null;return{message:n.messageEventContents.content,state:e.state,sessionId:e.sessionId,requestedSecrets:r,created:e.created}}if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var i=n.agentTimelineEventContents.toolData;if((null==i?void 0:i.$kind)==="messageData"){var o,a=(null===(o=i.messageData.agentAction.optionType)||void 0===o?void 0:o.$kind)==="secretRequestAction"?i.messageData.agentAction.optionType.secretRequestAction.secrets:null;return{message:i.messageData.content,sessionId:e.sessionId,state:e.state,requestedSecrets:a,created:e.created}}return null}var eS=(0,a.memo)(function(e){var n=e.eventId,t=e.addSecretEntries,i=e.removeSecretEntries,l=e.replaceAllExternalSecrets,c=e.isLast,u=e.waitingOnUserInput,d=e.openPane,p=e.showAvatar,h=(0,s.Al)(n,eb),g=!!(u&&c),v=(0,s.nY)(n).hasBeenReverted,w=(0,s.D2)(),y=(0,m.A)(),b=(0,r._)((0,F.WM)(y,l),1)[0],S=(0,a.useCallback)(function(e){return b({variables:{input:{resourceId:y,resourceType:f.U9.Repl,secrets:e}}})},[b,y]),Y=(0,r._)((0,F.Nz)(y,l),1)[0],A=(0,a.useCallback)(function(e){return Y({variables:{input:{resourceId:y,resourceType:f.U9.Repl,ids:e}}})},[Y,y]);return!h||v?null:(0,o.Y)(eY,{replId:y,sessionId:h.sessionId,isLast:c,requestedSecrets:h.requestedSecrets,highlighted:g,message:h.message,created:h.created,showAvatar:void 0===p||p,openPane:d,updateAgentState:w,addSecretEntries:t,removeSecretEntries:i,linkSecrets:S,unlinkSecrets:A})});function eY(e){var n=e.replId,t=e.isLast,r=e.sessionId,i=e.message,l=e.highlighted,s=e.requestedSecrets,c=e.created,u=e.showAvatar,d=e.openPane,p=e.addSecretEntries,f=e.removeSecretEntries,m=e.updateAgentState,v=e.linkSecrets,w=e.unlinkSecrets,y=(0,a.useCallback)(function(e,n){return d({type:"webview",data:{ports:{path:e,port:n,type:"local"}}})},[d]),b=(0,ey.A)({openWebview:y});return(0,o.FD)(g.e,{highlighted:l,timestamp:c,showAvatar:void 0===u||u,children:[(0,o.Y)(ew.d2,{text:i||"",messageState:h.qOk.COMPLETE,linkComponent:b}),(null==s?void 0:s.length)?(0,o.Y)(ev,{replId:n,keys:s.map(function(e){return e.key}),addEntries:p,removeEntries:f,onComplete:function(){return m({sessionId:r,runState:h.g32.AGENT_STATE_RUNNING})},sessionId:r,isLast:t,linkSecrets:v,unlinkSecrets:w}):null]})}var eA=t(75577),eC=t(31955),ex=t(54718),e_=(0,P.x)({root:[L.wp.mx(32),L.wp.mb(16),L.wp.borderRadius(),L.wp.p(8)],icon:{alignSelf:"start",position:"relative",top:2}});function ek(e){return e?{sessionType:e.sessionType}:null}function eD(e){var n=e.fullness,t=e.messageCount,r=e.onNewSession,i=e.session,a=e.agentIsWorking||(null==i?void 0:i.sessionType)===h.dF3.CHAT;return(0,o.FD)(eC.ui,{elevated:!0,css:e_.root,row:!0,gap:6,children:[(0,o.Y)(ex.A,{css:e_.icon,color:T.LU.foregroundDimmest}),(0,o.FD)(H.S,{gap:6,style:{flex:"1 1 auto"},children:[(0,o.FD)(H.S,{gap:4,row:!0,children:[(0,o.Y)(H.S,{style:{marginTop:.5},children:(0,o.Y)(eA.p,{fullness:n,messageCount:t,showNumber:!0})}),(0,o.Y)(H.S,{gap:4,row:!0,style:{flexShrink:1},children:"Large chats can affect performance. Start a new chat for better results."})]}),(0,o.Y)(es.m_,{isDisabled:!a,tooltip:"Cannot create a new session while one is in progress",children:(0,o.Y)(U.$n,{size:"small",onClick:r,disabled:a,iconLeft:(0,o.Y)(q.A,{}),variant:"outlined",text:"Start a new chat",stretch:!0})})]})]})}var eE=(0,a.memo)(function(e){var n,t=e.eventId,r=e.onNewSession,i=(0,s.Ro)(t),a=(0,s.C6)(null!==(n=null==i?void 0:i.sessionId)&&void 0!==n?n:null,ek),l=(0,s.Sw)();return i?(0,o.Y)(eD,{fullness:i.fullness,messageCount:i.messageCount,onNewSession:r,session:a,agentIsWorking:l}):null}),eR=t(18317),eI=t(67415),eF=t(29048),eT=t(30111);function eP(e){return e}var eL=(0,P.x)({data:[L.wp.p(4),L.wp.border({direction:"bottom"})]}),eU=(0,a.memo)(function(e){var n=e.eventId,t=e.isFirstOfType,i=e.isLastOfType,l=(0,r._)((0,a.useState)(!1),2),c=l[0],u=l[1],d=(0,s.Al)(n,eP);return(0,o.FD)(H.S,{title:JSON.stringify(d,null,2),gap:4,align:"center",style:{paddingBottom:i?16:0},children:[t?(0,o.Y)(B.EY,{variant:"small",color:"dimmer",children:"Hidden events (debug only)"}):null,(0,o.Y)(U.$n,{size:"small",variant:"nofill",iconLeft:(0,o.Y)(eI.A,{color:T.LU.redDefault}),iconRight:c?(0,o.Y)(eT.A,{}):(0,o.Y)(eF.A,{}),text:n,onClick:function(){return u(function(e){return!e})}}),c?(0,o.Y)(H.S,{css:eL.data,children:(0,o.Y)(eR.A,{json:d})}):null]})}),eN=(0,P.x)({wrapper:[L.wp.px(32),L.wp.pb(16)],surface:[L.wp.py(8),L.wp.pl(8),L.wp.pr(12),L.wp.borderRadius()],link:[{color:T.LU.foregroundDefault,textDecoration:"underline"}]}),eO=(0,a.memo)(function(e){return(0,o.Y)(H.S,{css:eN.wrapper,children:(0,o.Y)(eC.ui,{elevated:!0,css:eN.surface,children:(0,o.FD)(B.EY,{children:["Agent's memory is getting full. Try a"," ",(0,o.Y)("a",{role:"button",css:eN.link,tabIndex:0,onClick:e.onNewSession,onKeyDown:function(n){return"Enter"===n.key&&e.onNewSession()},children:"New Chat"})," ","to improve performance."]})})})});function eM(e){if(!e)return null;var n,t,r,i,o,a,l,s,c,u=e.contents.contents;if((null==u?void 0:u.$kind)!=="agentAskUserForActionRequest")return null;var d=u.agentAskUserForActionRequest,p=d.request,f=d.message;return(null==p?void 0:p.$kind)!=="nextStepRequest"?null:{message:f,debugEnabled:null!==(o=null===(n=p.nextStepRequest.debugRequest)||void 0===n?void 0:n.enabled)&&void 0!==o&&o,debugSelected:null!==(a=null===(t=p.nextStepRequest.debugRequest)||void 0===t?void 0:t.isSelected)&&void 0!==a&&a,keepWorkingEnabled:null!==(l=null===(r=p.nextStepRequest.keepWorkingRequest)||void 0===r?void 0:r.enabled)&&void 0!==l&&l,keepWorkingSelected:null!==(s=null===(i=p.nextStepRequest.keepWorkingRequest)||void 0===i?void 0:i.isSelected)&&void 0!==s&&s,newFeatureRequests:null!==(c=p.nextStepRequest.newFeatureRequests)&&void 0!==c?c:[],sessionId:e.sessionId}}function eB(e){var n=e.message,t=e.waitingOnUserInput;return(0,o.Y)(g.e,{highlighted:t,children:(0,o.FD)(H.S,{gap:16,align:"start",children:[(0,o.Y)(B.EY,{children:n}),(0,o.Y)(H.S,{gap:12,align:"start",children:(0,o.Y)(B.EY,{children:"If everything looks good, I can start working on a new feature"})})]})})}var eH=(0,a.memo)(function(e){var n=e.eventId,t=e.disabled,r=e.waitingOnUserInput,i=(0,s.Al)(n,eM);return i?(0,o.Y)(eB,{disabled:t,waitingOnUserInput:r,message:i.message}):null}),ez=t(60363);function eW(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentAskUserForActionResponse")return null;var t=n.agentAskUserForActionResponse.response;if(!t||"nextStepResponse"!==t.$kind)return null;var r=t.nextStepResponse;if(!r.response)return null;var i=r.response,o=null;switch(i.$kind){case"debugResponse":o="Fix issues";break;case"newFeatureResponse":o=i.newFeatureResponse.featureName;break;default:return null}return{senderUserId:parseInt(e.sender.id,10),message:o}}function eG(e){var n=e.message,t=e.userId,r=e.readFile;return(0,o.Y)(ez.RG,{userId:t,message:n,created:new Date,acknowledged:!0,attachments:[],attachedUrls:[],readFile:r})}var eV=(0,a.memo)(function(e){var n=e.eventId,t=(0,s.Al)(n,eW),r=(0,I.A)().fs;return t?(0,o.Y)(eG,{message:t.message,userId:t.senderUserId,readFile:r.readFile}):null}),ej=t(25861),eZ=t(72275),eq=t(49408),eK=t(77781),e$=t(14349),eJ=t(60872),eQ=t(98541),eX=t(47650),e0=t(70953),e1=t(79653),e2={START_BUILDING:180},e5=function(e){var n="";return e.map(function(e){n+=e.name+"\n"}),n},e4=(0,P.x)({editable:[L.wp.colWithGap(4)],readonly:[L.wp.colWithGap(8)],buttonContainer:[L.wp.pt(4)],text:[L.wp.py(8)]});function e3(e){var n=e.isEditable,t=e.steps,l=(0,r._)((0,a.useState)([]),2),s=l[0],c=l[1],u=(0,r._)((0,a.useState)(1/0),2),d=u[0],p=u[1],f=(0,a.useCallback)(function(e){p(e.width)},[]),h=(0,e$.A)(f);if(!t.length)return(0,o.Y)(e8,{editable:n});var m=function(){var n=t.filter(function(e,n){return 0===n||s.includes(e.id)});e.appovePlan(n),c([]),(0,D.pI)({action:"plan_approved",stepsApproved:s.length+1,sessionId:e.sessionId,planText:e5(n)})},g=function(n){c(function(t){return t.includes(n)?((0,D.pI)({action:"plan_step_removed",sessionId:e.sessionId}),t.filter(function(e){return e!==n})):((0,D.pI)({action:"plan_step_added",sessionId:e.sessionId}),(0,i._)(t).concat([n]))})};return(0,o.FD)(H.S,{gap:8,innerRef:h,children:[(0,o.Y)(H.S,{css:n?e4.editable:e4.readonly,children:t.map(function(e,t){return(0,o.FD)(a.Fragment,{children:[1===t&&n?(0,o.Y)(B.EY,{css:e4.text,children:"Would you like any of these additional features? We can also make changes later."}):null,(0,o.Y)(e9,{step:e,stepSelected:0===t||s.includes(e.id),isEditable:n,isDisabled:0===t&&n,onStepChange:g})]},e.id)})}),n?(0,o.Y)(H.S,{css:e4.buttonContainer,row:!0,justify:"end",gap:6,children:(0,o.Y)(U.$n,{"aria-label":"Approve plan & start",iconLeft:(0,o.Y)(z.A,{}),text:d<=e2.START_BUILDING?"":"Approve plan & start",colorway:"blurple",onClick:function(){return m()}})}):null]})}function e8(e){var n=e.editable;return(0,o.Y)(o.FK,{children:(0,o.Y)(B.EY,{color:"dimmer",children:n?"Plan is currently empty":"No plan generated yet"})})}var e7=(0,P.x)({step:[L.wp.flex.column,L.wp.colWithGap(6),L.wp.align.center,L.wp.align.stretch],iconWrapper:[L.wp.display.flex,L.wp.align.center,L.wp.justify.center,{alignSelf:"stretch"}],checkboxWrapper:[L.wp.pt(2),L.wp.display.flex,{alignSelf:"baseline"}],stepText:[L.wp.flex.growAndShrink(1)],stepCheckbox:[{'input[type="checkbox"]:checked':{backgroundColor:T.LU.blurpleDimmer,borderColor:T.LU.blurpleDefault},'& input[type="checkbox"]:disabled':{backgroundColor:"unset",borderColor:T.LU.interactiveBorder}}],integrationPill:[L.wp.display.inlineFlex,L.wp.borderRadius(4)],infoIcon:[L.wp.ml(4),L.wp.color.foregroundDimmer],integrationsContainer:[L.wp.pt(4),L.wp.flex.wrap,L.wp.width("fit-content"),L.wp.rowWithGap(4),L.wp.align.center]});function e6(e){var n=e.step,t=[],r=!0,i=!1,a=void 0;try{for(var l,s=n.blueprintData[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;""!==c.displayName.trim()&&t.push((0,o.Y)(es.m_,{tooltip:"The Agent will use Replit's support for ".concat(c.displayName,"."),children:(0,o.Y)(eQ.a,{css:e7.integrationPill,text:c.displayName,colorway:"blurple"})},c.name))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return 0===t.length?null:(0,o.FD)(H.S,{css:e7.integrationsContainer,children:[t,(0,o.Y)(O.K0,{css:e7.infoIcon,alt:"Agent will build with these integrations",children:(0,o.Y)(e1.A,{})})]})}function e9(e){var n=e.step,t=e.stepSelected,r=e.isEditable,i=e.isDisabled,l=e.onStepChange;return(0,o.Y)(a.Fragment,{children:(0,o.Y)(H.S,{css:e7.step,children:(0,o.FD)(H.S,{row:!0,gap:8,align:"center",children:[r?(0,o.Y)(H.S,{css:e7.checkboxWrapper,children:(0,o.Y)(N.S,{id:n.id,checked:t,disabled:i,onChange:function(){return l(n.id)},css:e7.stepCheckbox,name:"step-checkbox"})}):(0,o.Y)(H.S,{css:e7.iconWrapper,children:(0,o.Y)(ne,{status:n.status?n.status:h.jhd.STEP_UNKNOWN})}),(0,o.FD)(eJ.J,{htmlFor:n.id,css:e7.stepText,color:t?"default":"dimmer",variant:"text",children:[n.name,(0,o.Y)(e6,{step:n})]})]})})})}function ne(e){switch(e.status){case h.jhd.STEP_IN_PROGRESS:return(0,o.Y)(ed.A,{color:T.LU.blurpleStronger,size:e.size});case h.jhd.STEP_COMPLETE:return(0,o.Y)(z.A,{color:T.LU.accentPositiveStronger,size:e.size});case h.jhd.STEP_FAILED:return(0,o.Y)(e0.A,{color:T.LU.accentNegativeStronger,size:e.size});default:return(0,o.Y)(eX.A,{color:T.LU.foregroundDimmer,size:e.size})}}var nn=t(1478),nt=t(25877),nr=(0,nn.v)(["dividerColor"]),ni=nr.cssVars,no=nr.styleTokens,na=(0,P.x)({approvedContainer:[L.wp.px(8),L.wp.py(4),L.wp.my(1),L.wp.align.center,L.wp.rowWithGap(4),L.wp.justify.end,L.wp.color.foregroundDimmest,{flex:1}],approvedText:[L.wp.height(24)],historicalPlanContainer:[L.wp.colWithGap(2),{listStyle:"unset",listStylePosition:"outside","> li":{color:T.LU.foregroundDimmer,marginLeft:"20px"},"> li::marker":{color:T.LU.foregroundDimmer}}],historicalPlanStepText:[L.wp.width("100%"),L.wp.flex.growAndShrink(1)],divider:[L.wp.height(1),L.wp.width("100%"),{backgroundColor:no.dividerColor}]}),nl=(0,a.memo)(function(e){var n=e.eventId,t=e.waitingOnUserInput,r=(0,s.ou)(),i=(0,s.V9)(n),a=(0,eK.T)(),l=(0,s.Tt)(null==i?void 0:i.sessionId);return i?(l&&(i=(0,y._)((0,w._)({},i),{approverId:a?String(a):void 0})),(0,o.Y)(ns,{waitingOnUserInput:t,data:i,appovePlan:function(e){return r({eventId:n,steps:e})}})):null});function ns(e){var n=e.waitingOnUserInput,t=e.data,r=e.appovePlan;return(0,o.Y)(g.e,{elevated:!0,highlighted:n,children:(0,o.FD)(H.S,{gap:8,style:(0,eZ._)({},ni.dividerColor,n?T.LU.blurpleDimmest:T.LU.outlineDimmest),children:[(0,o.Y)(ew.d2,{text:t.description}),t.requiresApproval?(0,o.FD)(o.FK,{children:[(0,o.Y)(nt.a,{css:na.divider}),(0,o.Y)(e3,{appovePlan:r,steps:t.steps,isEditable:t.isEditable,sessionId:t.sessionId})]}):(0,o.FD)(o.FK,{children:[(0,o.Y)(nu,{planSteps:t.steps}),t.approverId?(0,o.FD)(o.FK,{children:[(0,o.Y)(nt.a,{css:na.divider}),(0,o.Y)(nc,{approverId:t.approverId})]}):null]})]})})}function nc(e){var n=Number(e.approverId),t=(0,eq.sx)({variables:{id:n}}).data,r=null==t?void 0:t.user;return(0,o.FD)(H.S,{css:na.approvedContainer,children:[(0,o.Y)(z.A,{color:T.LU.greenStronger}),(0,o.FD)(B.EY,{css:na.approvedText,multiline:!1,children:[null==r?void 0:r.username," approved the plan"]})]})}function nu(e){var n=e.planSteps;return(0,o.Y)(H.D.ul,{css:na.historicalPlanContainer,children:n.map(function(e,n){return(0,o.FD)("li",{children:[(0,o.Y)(B.EY,{color:"dimmer",css:na.historicalPlanStepText,children:e.name}),(0,o.Y)(e6,{step:e})]},n)})})}var nd=t(16984),np=t(81663),nf=t(63679),nh=t(51570),nm=t(52186),ng=t(22414),nv=t(29567),nw=(0,P.x)({root:[L.wp.py(8),L.wp.pl(8),L.wp.pr(12),L.wp.mx(32),L.wp.mb(16),L.wp.borderRadius()],hidden:[L.wp.mx(32),L.wp.mb(16),L.wp.textAlign.center,L.wp.position.relative],hiddenText:[L.wp.backgroundColor.backgroundRoot,L.wp.px(8),L.wp.zIndex(1),{marginLeft:"auto",marginRight:"auto"}],hiddenHr:[L.wp.position.absolute,L.wp.width("100%"),L.wp.border({direction:"top",color:T.LU.outlineDimmest,style:"dashed"}),L.wp.top("50%")],icon:{paddingTop:3},body:[L.wp.flex.growAndShrink(1),L.wp.colWithGap(2),L.wp.justify.spaceBetween],stepText:[L.wp.pt(2)],footer:[L.wp.flex.wrap,L.wp.justify.spaceBetween,L.wp.align.center],timestamp:[L.wp.flex.wrap],revertControls:[L.wp.color.foregroundDimmer]}),ny=(0,a.memo)(function(e){var n=e.eventId,t=e.openPane,r=(0,s.R6)(n);return r?(0,o.Y)(nS,{reverterId:r.reverterId,revertedAt:r.revertedAt,revertedCommitId:r.revertedCommitId,revertHiddenCount:r.revertHiddenCount,openPane:t}):null});function nb(e){var n=e.commitId,t=e.openPane,r=(0,nh.q)(),i=r.neonDatabases;return r.currentUser&&0!==i.length?(0,o.Y)(H.S,{css:nw.revertControls,row:!0,gap:6,align:"center",children:(0,o.Y)(U.$n,{onClick:function(){t({type:"neon",data:{openAtTab:{type:"settings",data:{restoreToCommitId:n}}}})},iconLeft:(0,o.Y)(ng.A,{}),size:"small",variant:"outlined",text:"Restore database to here"})}):null}function nS(e){var n=e.reverterId,t=e.revertedAt,r=e.revertedCommitId,i=e.revertHiddenCount,a=e.openPane,l=(0,nf._P)({controlName:np.g5,logFlagToAnalytics:!1});return(0,o.FD)(o.FK,{children:[(0,o.FD)(H.S,{css:nw.hidden,children:[(0,o.FD)(B.EY,{css:nw.hiddenText,color:"dimmest",variant:"small",children:[i," event",i>1?"s":""," hidden after rolling back"]}),(0,o.Y)(H.S,{css:nw.hiddenHr})]}),(0,o.FD)(eC.ui,{elevated:!0,css:nw.root,row:!0,gap:8,children:[(0,o.Y)(H.S,{css:nw.icon,children:(0,o.Y)(nv.A,{color:T.LU.foregroundDimmest})}),(0,o.FD)(H.S,{css:nw.body,children:[(0,o.Y)(H.S,{css:nw.stepText,children:(0,o.Y)(B.EY,{children:"Rollback completed"})}),(0,o.FD)(H.S,{css:nw.footer,row:!0,children:[(0,o.Y)(nY,{date:t,reverterId:n}),l?(0,o.Y)(nb,{commitId:r,openPane:a}):null]})]})]})]})}function nY(e){var n,t=e.date,r=Number(e.reverterId),i=(0,eq.sx)({variables:{id:r}}).data;return(0,o.FD)(H.S,{css:nw.timestamp,row:!0,gap:4,style:{color:T.LU.foregroundDefault},children:[(0,o.FD)(B.EY,{variant:"small",color:"dimmer",children:["Performed",(null==i?void 0:null===(n=i.user)||void 0===n?void 0:n.username)?" by ".concat(i.user.username):""]}),(0,o.Y)(nm.Dc,{textVariant:"small",textColor:"dimmer",live:!0,date:t})]})}var nA=t(82182),nC=t(78542),nx=t(75362),n_=function(){function e(){var n=this;(0,nC._)(this,e),this.isExpandable=new nx.N(!1),this.isExpanded=new nx.N(!1),this.container=null,this.resizeObserver=null,this.intersectionObserver=null,this.animationFrameId=null,this.setContainer=function(e){if(null===e)return n.disconnect();n.container=e,n.resizeObserver||(n.resizeObserver=new ResizeObserver(function(){return n.scheduleMeasurement()})),n.intersectionObserver||(n.intersectionObserver=new IntersectionObserver(function(e){e.forEach(function(e){var t,r;n.container&&e.isIntersecting&&(n.scheduleMeasurement(),null===(t=n.intersectionObserver)||void 0===t||t.unobserve(e.target),null===(r=n.resizeObserver)||void 0===r||r.observe(n.container))})})),n.intersectionObserver.observe(n.container)},this.toggle=function(){n.isExpanded.set(!n.isExpanded.current)}}var n=e.prototype;return n.scheduleMeasurement=function(){var e=this;null!==this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.animationFrameId=requestAnimationFrame(function(){return e.measureOverflow()})},n.measureOverflow=function(){if(this.container&&!this.isExpanded.current){var e=this.isExpandable.current,n=this.container.scrollHeight>this.container.clientHeight;e!==n&&this.isExpandable.set(n)}},n.disconnect=function(){var e;null!==this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.intersectionObserver&&this.container&&this.intersectionObserver.unobserve(this.container),this.intersectionObserver=null,this.resizeObserver=null},e}(),nk=((0,P.x)({button:[L.wp.reset.button,{fontSize:"inherit",lineHeight:"inherit",color:T.LU.accentPrimaryStronger,cursor:"pointer",background:"linear-gradient(to right, transparent, ".concat(T.LU.surfaceBackground," 20%)"),":hover":{color:T.LU.accentPrimaryStrongest},":active":{color:T.LU.accentPrimaryDefault}}]}),t(20778)),nD=(0,nn.v)(["contentBackgroundColor"]),nE=nD.styleTokens,nR=nD.cssVars,nI=(0,P.x)({root:[L.wp.position.relative,L.wp.overflow("hidden")],button:[L.wp.reset.button,L.wp.viewStyle,L.wp.rowWithGap(2),L.wp.align.start,L.wp.justify.center,L.wp.height(28),{fontSize:T.LU.fontSizeSmall,color:T.LU.accentPrimaryStronger,cursor:"pointer",fontWeight:T.LU.fontWeightMedium,":hover":{color:T.LU.accentPrimaryStrongest},":active":{color:T.LU.accentPrimaryDefault},'&[data-expanded="false"]':[L.wp.align.end,L.wp.position.absolute,L.wp.backgroundGradient(nE.contentBackgroundColor,"transparent","top"),{width:"100%",bottom:0,left:0}]}]});function nF(e){var n=e.children,t=e.backgroundColor,r=void 0===t?T.LU.surfaceBackground:t,i=e.maxHeight,l=(0,J._)(e,["children","backgroundColor","maxHeight"]),s=(0,a.useMemo)(function(){return new n_},[]),u=(0,c.J2)(s.isExpanded),d=(0,c.J2)(s.isExpandable);return(0,o.FD)(H.S,{css:nI.root,innerRef:s.setContainer,style:(0,eZ._)({maxHeight:u?void 0:i},nR.contentBackgroundColor,r),children:[(0,o.Y)(nk.Ay,(0,y._)((0,w._)({},l),{children:n})),d?(0,o.Y)(nT,{onClick:s.toggle,isExpanded:u}):null]})}function nT(e){var n=e.onClick,t=e.isExpanded;return(0,o.FD)(nA.$,{"data-expanded":t,onPress:n,css:nI.button,children:[(0,o.Y)(eF.A,{rotate:t?180:0}),(0,o.Y)(B.EY,{variant:"small",children:t?"Show less":"Show more"})]})}var nP=t(16231),nL="color-mix(in srgb, ".concat(T.LU.blurpleDimmest," 25%, ").concat(T.LU.surfaceBackground,")"),nU=(0,P.x)({root:[L.wp.py(8),L.wp.pl(8),L.wp.pr(12),L.wp.mx(32),L.wp.mb(16),L.wp.borderRadius(),L.wp.overflow("hidden"),{backgroundColor:nL}],icon:{paddingTop:3},body:[L.wp.flex.growAndShrink(1),L.wp.colWithGap(2),L.wp.justify.spaceBetween],stepText:[L.wp.pt(2)],footer:[L.wp.flex.wrap,L.wp.justify.spaceBetween,L.wp.align.center],timestamp:[L.wp.flex.wrap,L.wp.color.blurpleStrongest]});function nN(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData;return(null==t?void 0:t.$kind)!=="agentPlanStepBegin"?null:{name:t.agentPlanStepBegin.planStep.name,created:e.created,sessionId:e.sessionId}}function nO(e){var n=e.eventId,t=(0,s.Al)(n,nN),r=(0,s.Tt)(null==t?void 0:t.sessionId);return t?(0,o.Y)(nM,{name:t.name,created:r?null:t.created}):null}var nM=(0,a.memo)(function(e){var n=e.name,t=e.created;return(0,o.FD)(eC.ui,{elevated:!0,css:nU.root,row:!0,gap:8,children:[(0,o.Y)(H.S,{css:nU.icon,children:(0,o.Y)(nP.A,{color:T.LU.blurpleStronger})}),(0,o.FD)(H.S,{css:nU.body,children:[(0,o.Y)(nB,{name:n}),t?(0,o.Y)(H.S,{css:nU.footer,row:!0,children:(0,o.Y)(nH,{date:t})}):null]})]})});function nB(e){var n=e.name;return(0,o.Y)(H.S,{css:nU.stepText,children:(0,o.Y)(nF,{backgroundColor:nL,maxHeight:200,lineBreaks:!0,children:n})})}function nH(e){var n=e.date;return(0,o.FD)(H.S,{css:nU.timestamp,row:!0,gap:4,children:[(0,o.Y)(B.EY,{variant:"small",children:"Started"}),(0,o.Y)(nm.Dc,{textVariant:"small",live:!0,date:n})]})}function nz(e){return(0,o.Y)(Q.Ay,(0,y._)((0,w._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.155 13.024a1.25 1.25 0 0 1 0-2.048l8.628-6.04A1.25 1.25 0 0 1 11.75 5.96v4.6l8.033-5.624A1.25 1.25 0 0 1 21.75 5.96v12.08a1.25 1.25 0 0 1-1.967 1.024L11.75 13.44v4.599a1.25 1.25 0 0 1-1.967 1.024l-8.628-6.04Zm9.095-6.583L2.308 12l7.942 5.56V6.44Zm10 0L12.308 12l7.942 5.56V6.44Z",clipRule:"evenodd"})}))}var nW=t(2091),nG=(0,P.x)({buttonRow:[L.wp.flex.wrap],continueButton:[L.wp.color.foregroundDimmer]});function nV(e){return(0,o.Y)(g.e,{elevated:!0,children:(0,o.FD)(H.S,{gap:8,align:"start",children:[(0,o.Y)(ew.d2,{text:"This step is taking longer than expected, which usually means I'm stuck or the request is more expensive than I had initially estimated.\n\nI recommend starting a new session to take a new focused approach to the problem we're encountering in this step.",messageState:h.qOk.COMPLETE}),e.state===h.MOh.PENDING?(0,o.FD)(H.S,{css:nG.buttonRow,row:!0,gap:8,align:"center",children:[(0,o.Y)(U.$n,{colorway:"primary",iconLeft:(0,o.Y)(nW.A,{}),text:"Start a new chat",onClick:e.onNewSession}),(0,o.Y)(U.$n,{iconLeft:(0,o.Y)(nz,{rotate:180}),text:"Skip to the next step in the plan",onClick:e.onAbortCurrentStep}),(0,o.Y)(B.EY,{children:"or"}),(0,o.Y)(U.$n,{css:nG.continueButton,variant:"underlined",text:"Continue working on this request",onClick:e.onContinueCurrentStep})]}):null,e.state===h.MOh.ACKNOWLEDGED_ABORT_CURRENT_STEP?(0,o.Y)(B.EY,{color:"dimmer",children:"The current step will be tried again"}):null,e.state===h.MOh.ACKNOWLEDGED_CONTINUE_CURRENT_STEP?(0,o.Y)(B.EY,{color:"dimmer",children:"The step was skipped."}):null]})})}function nj(e){if(!e)return null;var n=e.contents.contents;return(null==n?void 0:n.$kind)!=="stepTooComplexEventContents"?null:{stepId:n.stepTooComplexEventContents.stepId,state:n.stepTooComplexEventContents.state,created:e.created}}var nZ=(0,a.memo)(function(e){var n=e.eventId,t=e.onNewSession,r=(0,s.Al)(n,nj),i=(0,s.Rk)();if(!r)return null;var a=function(e){return i({eventId:n,stepId:r.stepId,choice:e})};return(0,o.Y)(nV,{state:r.state,onNewSession:t,onContinueCurrentStep:function(){return a(h.MOh.ACKNOWLEDGED_CONTINUE_CURRENT_STEP)},onAbortCurrentStep:function(){return a(h.MOh.ACKNOWLEDGED_ABORT_CURRENT_STEP)}})});function nq(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData;if((null==t?void 0:t.$kind)!=="thoughts")return null;var r=t.thoughts;return{thoughts:r.thoughts,redactedThoughtsMarkers:r.redactedThoughtsMarkers}}function nK(e){var n=(0,r._)((0,a.useState)(1),2),t=n[0],i=n[1],l=(0,a.useMemo)(function(){return 0===e.thoughts.length},[e.thoughts]);return(0,a.useEffect)(function(){var e;return function n(){e=setTimeout(function(){i(function(e){return e%3+1}),l&&n()},500)}(),function(){return clearTimeout(e)}},[l]),(0,o.Y)(g.e,{highlighted:!!(e.redactedThoughtsMarkers&&e.redactedThoughtsMarkers.length&&e.redactedThoughtsMarkers[e.redactedThoughtsMarkers.length-1].index===e.thoughts.length),children:(0,o.Y)(H.S,{gap:16,align:"start",children:0===e.thoughts.length?(0,o.FD)(H.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(ed.A,{}),(0,o.FD)(B.EY,{children:["Thinking",".".repeat(t)]})]}):(0,o.Y)(B.EY,{children:e.thoughts})})})}var n$=(0,a.memo)(function(e){var n=e.eventId,t=(0,s.Al)(n,nq);return t?(0,o.Y)(nK,{thoughts:t.thoughts,redactedThoughtsMarkers:t.redactedThoughtsMarkers}):null});function nJ(e){var n=e.sessionId,t=(0,s.NC)(),r=(0,c.J2)(t.replay.playing),i=(0,c.J2)(t.sessions.get(n));return!(0,c.Rj)(function(){return null==i?void 0:i.type.select(function(e){return e===h.dF3.AGENT_REPLAY_SESSION})},[i])||r?null:(0,o.Y)(g.e,{children:(0,o.Y)(ew.d2,{text:"I've finished your prototype! How would you like to proceed?"})})}var nQ=t(80001),nX=t(50970),n0=t(47406),n1=t(98594),n2=t(59497),n5=t(59082),n4=t(99858),n3=t(97407),n8=t(3596),n7=t(5761),n6=t(7819),n9=t(68670),te=t(85848),tn=t(56268),tt=t(36736),tr=t(95427);function ti(e){var n,t,i=e.commitId,l=(0,m.A)(),s=(0,n9.g$)(),c=(0,n7.m)(),u=(0,C.A)().showError,d=function(e,n){(0,tn.Q)({context:"ViewAgentCheckpointButton",error:null!=n?n:Error(e),extras:{replId:l}}),u(e)},p=(0,r._)((0,n6.z)({onError:function(e){return d("Something went wrong.",e)},onCompleted:function(e){if("CreateReplShareResult"!==e.createReplShare.__typename){d(e.createReplShare.message);return}var n=e.createReplShare.share;window.open(n.url,"_blank")}}),2),f=p[0],h=p[1].loading,g=(n=(0,v._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return[4,(0,te.n9)({secrets:s,replId:l,apolloClient:c})];case 1:return[4,f({variables:{input:{replId:l,timestamp:e,envVars:n.sent()}}})];case 2:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),w=(0,tt.A)((t=(0,v._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getCommit({commit:i})];case 1:if((n=t.sent()).error)return[2,n];return[2,{timestamp:n.committer.date,error:null}]}})}),function(e){return t.apply(this,arguments)}),[i]),y=(0,a.useMemo)(function(){if(w&&!w.error){var e=new Date(w.timestamp);return e.setSeconds(e.getSeconds()+30),e.toISOString()}},[w]);return y?(0,o.Y)(U.$n,{size:"small",onClick:function(){return g(y)},iconLeft:h?(0,o.Y)(ed.A,{}):(0,o.Y)(tr.A,{}),disabled:h,variant:"outlined",text:"View checkpoint",stretch:!0}):null}var to=t(89851),ta=t(93532),tl=t(48729),ts=t(61990),tc=t(20662),tu=t(68753),td=(0,P.x)({root:[L.wp.mx(32),L.wp.mb(16),L.wp.borderRadius(),L.wp.p(8)],commitIcon:{alignSelf:"start",position:"relative",top:2},screenshotContainer:[L.wp.width(64),L.wp.height(64),L.wp.position.relative,L.wp.center],screenshot:[L.wp.borderRadius(4)],flexGrowAndShrink:[L.wp.flex.growAndShrink(1)]});function tp(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData;return(null==t?void 0:t.$kind)!=="commitData"?null:{description:t.commitData.description,screenshotUrl:t.commitData.screenshotUrl,sessionId:e.sessionId,created:e.created,commitId:t.commitData.commitId,isPaid:t.commitData.billingRate===h.pSr.NORMAL}}var tf=(0,a.memo)(function(e){var n,t=e.eventId,r=e.onOpenCommit,i=e.usageIndicatorVariant,a=(0,s.Al)(t,tp),l=(0,s.Au)({initialSessionId:null==a?void 0:a.sessionId}).sendMessage,c=(0,s.PP)(null!==(n=null==a?void 0:a.sessionId)&&void 0!==n?n:null),u=(0,s.nY)(t).isReverting;return a?(0,o.Y)(tm,{eventId:t,description:a.description,commitId:a.commitId,onOpenCommit:r,date:a.created,isReverting:u,isPaid:a.isPaid,isReadOnly:c,usageIndicatorVariant:i,onRevert:function(){if(c)throw Error("Cannot revert in readonly session");l({kind:"revert",model:h.e3q.MODEL_TYPE_UNKNOWN,commitHash:a.commitId,commitMessage:"Reverting to task: '".concat(a.description,"'"),eventIdBeforeRevert:t}),(0,D.pI)({action:"revert_started",messageText:"Reverting to task: '".concat(a.description,"'"),sessionId:a.sessionId})}}):null});function th(e,n){return e?n===to.G.Starter?"This used 1 of your ".concat(n3.Lm," plan Agent checkpoints."):"This checkpoint cost ".concat(n8.ri,"\xa2."):n===to.G.Starter?"This didn't use any of your ".concat(n3.Lm," plan Agent checkpoints. No significant changes were made."):"This checkpoint didn't cost you anything. No significant changes were made."}function tm(e){var n=e.description,t=e.date,r=e.screenshot,i=e.commitId,a=e.onRevert,l=e.onOpenCommit,s=e.isReverting,c=e.isPaid,u=e.eventId,d=e.isReadOnly,p=e.usageIndicatorVariant,f=i.slice(0,8),h=th(c,p),m=(0,nf._P)({controlName:np.eC});return""===i?(0,o.Y)(tg,{date:t,isPaid:c,eventId:u,usageIndicatorVariant:p}):(0,o.FD)(eC.ui,{elevated:!0,css:td.root,"data-event-id":u,row:!0,gap:6,children:[(0,o.Y)(ts.A,{css:td.commitIcon,color:T.LU.foregroundDimmest}),(0,o.FD)(H.S,{gap:6,css:td.flexGrowAndShrink,children:[(0,o.FD)(H.S,{gap:4,row:!0,css:td.flexGrowAndShrink,children:[(0,o.FD)(H.S,{gap:4,row:!0,align:"center",css:td.flexGrowAndShrink,children:[(0,o.Y)(B.EY,{multiline:!1,variant:"small",color:"dimmer",style:{flexShrink:"1"},children:"Checkpoint made"}),(0,o.Y)(nm.Dc,{textVariant:"small",textColor:"dimmest",live:!0,date:t}),(0,o.Y)(B.EY,{variant:"small",multiline:!1,color:"dimmer",children:""}),(0,o.Y)(U.$n,{variant:"underlinedOnHover",text:f,size:"small",onClick:function(){return l(i)}})]}),(0,o.Y)(es.m_,{tooltip:h,placement:"top",children:c?(0,o.Y)(tc.A,{}):(0,o.Y)(B.EY,{style:{color:T.LU.accentPositiveStronger},children:"Free"})})]}),n?(0,o.FD)(H.S,{row:!0,gap:8,children:[r?(0,o.Y)(H.S,{css:td.screenshotContainer,children:(0,o.Y)(tl.A,{css:td.screenshot,layout:"fill",src:r,alt:"Screenshot",objectFit:"cover"})}):null,(0,o.Y)(H.S,{style:{flex:"1 1 auto"},children:(0,o.Y)(B.EY,{style:{flex:"1 1 auto"},maxLines:5,children:n})})]}):null,(0,o.FD)(H.S,{row:!0,gap:4,children:[m?(0,o.Y)(ti,{commitId:i}):null,(0,o.Y)(U.$n,{size:"small",css:td.flexGrowAndShrink,onClick:a,iconLeft:s?(0,o.Y)(ed.A,{}):d?(0,o.Y)(eX.A,{}):(0,o.Y)(nv.A,{}),disabled:s||d,variant:"outlined",text:d?"Session has ended - cannot rollback":"Rollback to here",stretch:!0})]})]})]})}function tg(e){var n=e.date,t=e.isPaid,r=e.eventId,i=th(t,e.usageIndicatorVariant);return(0,o.FD)(eC.ui,{elevated:!0,css:td.root,"data-event-id":r,row:!0,gap:6,children:[(0,o.Y)(ts.A,{color:T.LU.foregroundDimmest}),(0,o.FD)(H.S,{gap:6,style:{flex:"1 1 auto"},children:[(0,o.FD)(H.S,{gap:4,row:!0,style:{flex:"1 1 auto"},children:[(0,o.FD)(H.S,{gap:4,row:!0,style:{flex:"1 1 auto",alignItems:"center"},children:[(0,o.Y)(B.EY,{multiline:!1,variant:"small",color:"dimmer",style:{flexShrink:"1"},children:"Checkpoint reached"}),(0,o.Y)(nm.Dc,{textVariant:"small",textColor:"dimmest",live:!0,date:n}),(0,o.Y)(B.EY,{variant:"small",multiline:!1,color:"dimmer",children:""}),(0,o.Y)(B.EY,{variant:"small",color:"dimmest",children:"no commit"})]}),(0,o.Y)(es.m_,{tooltip:i,placement:"top",children:t?(0,o.Y)(tc.A,{}):(0,o.Y)(B.EY,{style:{color:T.LU.accentPositiveStronger},children:"Free"})})]}),(0,o.Y)(ta.N,{colorway:"warning",text:(0,o.FD)(H.S,{gap:8,children:[(0,o.FD)(H.S,{gap:8,row:!0,align:"center",children:[(0,o.Y)(tu.A,{size:16}),(0,o.Y)(B.EY,{variant:"small",children:"Rollback is disabled for this checkpoint"})]}),(0,o.Y)(B.EY,{variant:"small",children:"An unexpected error occurred while creating a commit for this checkpoint. This prevents you from rolling back to this point. This is most likely an issue with Replit."})]})}),(0,o.Y)(U.$n,{size:"small",disabled:!0,variant:"outlined",iconLeft:(0,o.Y)(eX.A,{}),text:"Rollback to here",stretch:!0})]})]})}var tv=t(80098),tw=t(71794),ty=t(65296),tb=t(13310),tS=t(27918),tY=t(2298),tA=t(50656),tC=t(80971),tx=t.n(tC),t_=(0,P.x)({button:[tY.b.nofill]});function tk(e){var n=(0,r._)((0,a.useState)(!1),2),t=n[0],i=n[1],l=(0,s.Al)(e.eventId,nd.bQ),c=(0,n2.A)();if(!l)return null;var u=l.summary,d=l.toolDataKind,p=l.state;return(0,o.FD)(H.S,{gap:12,children:[(0,o.FD)(H.S,{tag:"button",row:!0,gap:8,align:"center",justify:"space-between",clsx:tx().button,css:t_.button,onClick:function(){return i(function(e){return!e})},children:[(0,o.FD)(H.S,{align:"center",row:!0,gap:8,clsx:tx().buttonLeft,children:[(0,o.Y)(H.S,{"data-timeline-bar":!0,clsx:tx().bar}),(0,o.Y)(tS.u,{kind:d,color:p===h.qOk.IN_PROGRESS?tv.LU.blurpleStronger:void 0}),(0,o.Y)(tb.B,{summary:null!=u?u:"",variant:c?"small":"text",color:c?"dimmest":"dimmer"})]}),(0,o.Y)(tA.A,{rotate:t?90:0,color:tv.LU.foregroundDimmest})]}),t?(0,o.Y)(tD,{openPane:e.openPane,eventId:e.eventId}):null]})}var tD=(0,a.memo)(function(e){var n=e.eventId,t=e.openPane,r=(0,s.Al)(n,tw.b);return r?(0,o.FD)(H.S,{justify:"center",gap:12,children:[r.message?(0,o.Y)(eC.ui,{elevated:!0,clsx:tx().thought,children:(0,o.FD)(B.EY,{children:[r.message," "]})}):null,(0,o.Y)(H.S,{clsx:tx().progressRendererWrap,children:(0,o.Y)(ty.r,{data:r,openPane:t})})]}):null}),tE=t(53654),tR=t(69343),tI=t(51027),tF=t(75617),tT=t(13480),tP=t(99970),tL=t(7404),tU=t(2459),tN=t(20328),tO=t.n(tN);function tM(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="startRapidBuildEventContents")return null;var t=n.startRapidBuildEventContents,r=t.mvpObjective,i=t.followupSteps,o=t.stack,a=t.uploadedFiles;return{mvpObjective:r,stack:o,followupSteps:i.length?i:null,attachments:a.map(function(e){var n;return{url:e.downloadUrl,mimeType:null!==(n=(0,tE.P7)(e.fileName))&&void 0!==n?n:"",name:e.fileName}})}}function tB(e){var n=(0,tR.U)(),t=(0,s.Al)(e.eventId,tM),r=(0,tI.e)(),i=(0,c.J2)(null==r?void 0:r.latest);return n&&t?(0,o.FD)(o.FK,{children:[i?(0,o.Y)(tF.qo,{branch:i}):null,(0,o.Y)(tH,{followupSteps:t.followupSteps,mvpObjective:t.mvpObjective,stack:t.stack,attachments:t.attachments})]}):null}function tH(e){var n,t=tP.Z.find(function(n){return n.value===e.stack});return(0,o.FD)(eC.ui,{elevated:!0,clsx:tO().root,gap:16,children:[(0,o.FD)(H.S,{gap:8,children:[(0,o.FD)(H.S,{row:!0,gap:6,align:"center",children:[(0,o.Y)(tU.A,{}),(0,o.Y)(B.EY,{variant:"subheadDefault",children:"Proposed App"})]}),(0,o.Y)(B.EY,{children:e.mvpObjective})]}),t?(0,o.FD)(H.S,{gap:8,children:[(0,o.Y)(B.EY,{variant:"small",color:"dimmer",children:"App type"}),(0,o.FD)(eC.ui,{elevated:!0,clsx:tO().stackSurface,children:[(0,o.FD)(H.S,{row:!0,gap:6,align:"center",children:[(0,o.Y)(tT.m1,{stack:t.value}),(0,o.Y)(B.EY,{children:t.title})]}),(0,o.Y)(B.EY,{variant:"small",color:"dimmer",children:t.description})]})]}):null,(null===(n=e.attachments)||void 0===n?void 0:n.length)>0?(0,o.Y)(tT.Tr,{files:e.attachments}):null,e.followupSteps?(0,o.Y)(tL.k,{features:e.followupSteps.map(function(e){return"- "+e}).join("\n")}):null]})}var tz=t(96068),tW=t(5511),tG=t(48701),tV=(0,P.x)({buttonContainer:[L.wp.display.flex,L.wp.position.relative,L.wp.zIndex(10),{paddingBottom:48}],button:[L.wp.position.absolute,L.wp.mt(8),L.wp.reset.button,tY.b.filledAndOutlined,L.wp.align.center,L.wp.rowWithGap(4),L.wp.shadow(1),L.wp.justify.center,L.wp.borderRadius(16),L.wp.height(28),L.wp.px(8),{left:0,right:0,marginInline:"auto",width:"fit-content"}]});function tj(e){var n,t=(0,s.Yg)(e.sessionId),i=t.items,f=t.inProgressEventId,h=t.eventIdsWithAvatars,m=(0,n2.A)(),g=(0,a.useRef)(new Map),v=(0,p.m5)(),w=(0,a.useRef)(null),y=(0,r._)((0,a.useState)(100),2),b=y[0],S=y[1],Y=null==i?void 0:i.slice(Math.max(0,i.length-b)),A=e.openPane,C=(0,a.useCallback)(function(){return A({type:"ghostwriterChat"})},[A]),x=(0,a.useCallback)(function(e){return A({type:"git",data:{mode:{type:n4.C.COMMIT,hash:e}}})},[A]),_=e.sessionId,k=(0,d.A)(),E=(0,a.useCallback)(function(){A({type:"deployments",flow:{skipIntro:null!==k,isAgentDeployment:null!==k}}),(0,D.pI)({action:"open_deployments_from_chat_banner",sessionId:_})},[A,_,k]),R=(0,c.J2)(e.statusBarHeight);return i&&0!==i.length?(0,o.Y)(o.FK,{children:(0,o.FD)(tW.y,{scrollCache:g.current,scrollCacheKey:e.sessionId,scrollerRef:w,shouldAutoScrollRef:e.shouldAutoscrollRef,padding:"".concat(n0.w,"px 8px ").concat(R+32,"px 8px"),hideScrollbar:v,autoScrollBehavior:v?"smooth":"instant",alignToEnd:!0,buttonOffset:R,children:[b<(null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0)?(0,o.Y)(H.S,{css:tV.buttonContainer,children:(0,o.FD)(eC.ui,{css:tV.button,elevated:!0,tag:"button",onClick:function(){var e;(0,l.flushSync)(function(){w.current&&(e=w.current.scrollHeight-w.current.scrollTop),S(function(e){return e+5})}),e&&w.current&&(w.current.scrollTop=w.current.scrollHeight-e)},children:[(0,o.Y)(tG.A,{size:12}),(0,o.Y)(B.EY,{variant:"small",children:"Show more"})]})}):null,null==Y?void 0:Y.map(function(n,t){var r,i,a=t===Y.length-1;switch(n.type){case"userMessage":return(0,o.Y)(ez.rS,{eventId:n.id},n.id);case"aiMessage":return(0,o.Y)(eS,{isLast:a,eventId:n.id,addSecretEntries:e.addSecretEntries,removeSecretEntries:e.removeSecretEntries,replaceAllExternalSecrets:e.replaceAllExternalSecrets,waitingOnUserInput:a&&e.waitingOnUserInput,openPane:e.openPane,showAvatar:m?null==h?void 0:h.has(n.id):void 0},n.id);case"timeline":return(0,o.Y)(tK,{eventId:n.id,onEventClick:e.onEventClick,inProgressEventId:f,showThoughtButton:e.showThoughtButton,openPane:e.openPane,showAvatar:m?null==h?void 0:h.has(n.id):void 0},n.id);case"revert":return(0,o.Y)(ny,{eventId:n.id,openPane:e.openPane},n.id);case"plan":return(0,o.Y)(nl,{waitingOnUserInput:a&&e.waitingOnUserInput,eventId:n.id},n.id);case"planConcluded":return(0,o.Y)(ej.lv,{eventId:n.id,onNewSession:e.onNewSession,onContinueSession:e.highlightInput,onOpenAssistant:C,costInfoVariant:e.planConcludedCostInfoVariant},n.id);case"newSessionNudge":return(0,o.Y)(eO,{onNewSession:e.onNewSession});case"deploy":return(0,o.Y)(nX.K4,{eventId:n.id,onConfigure:E,paneType:"agentChat"},n.id);case"stepStarted":return(0,o.Y)(nO,{eventId:n.id},n.id);case"stepTooComplex":return(0,o.Y)(nZ,{eventId:n.id,onNewSession:e.onNewSession},n.id);case"contextComplexityWarning":return(0,o.Y)(eE,{eventId:n.id,onNewSession:e.onNewSession},n.id);case"checkpoint":return(0,o.Y)(tf,{eventId:n.id,onOpenCommit:x,usageIndicatorVariant:e.checkpointUsageIndicatorVariant},n.id);case"nextStepRequest":return(0,o.Y)(eH,{eventId:n.id,disabled:!a||e.disableSendingMessages,waitingOnUserInput:a&&e.waitingOnUserInput},n.id);case"nextStepResponse":return(0,o.Y)(eV,{eventId:n.id},n.id);case"databaseNudge":return null;case"debug":return(0,o.Y)(eU,{isFirstOfType:(null===(r=Y[t-1])||void 0===r?void 0:r.type)!=="debug",isLastOfType:(null===(i=Y[t+1])||void 0===i?void 0:i.type)!=="debug",eventId:n.id},n.id);case"startRapidBuild":return(0,o.Y)(tB,{eventId:n.id},n.id);case"thoughts":return(0,o.Y)(n$,{eventId:n.id},n.id);default:(0,u.A)(n.type)}}),e.sessionId?(0,o.Y)(nJ,{sessionId:e.sessionId}):null,(0,o.Y)(n0.U,{})]})}):(0,o.Y)(n5.G,{})}var tZ={"& > div:last-of-type":{"[data-timeline-bar]":{display:"none"}}},tq=(0,P.x)({root:[L.wp.pr(32)],expandableProgress:[L.wp.pb(16),tZ],timeline:[tZ,L.wp.flex.growAndShrink(1)],avatar:[L.wp.pt(2)]}),tK=(0,a.memo)(function(e){var n=e.eventId,t=e.onEventClick,r=e.inProgressEventId,l=e.showAvatar,c=e.showThoughtButton,u=e.openPane,d=(0,n2.A)(),f=(0,s.p2)(n),h=(0,a.useMemo)(function(){if(!f)return[];var e=[n].concat((0,i._)(f));return r&&(e=e.filter(function(e){return e!==r})),e},[n,f,r]),m=(0,tz.g)({items:h,maxVisibleItems:d?2:3}),g=m.isExpanded,v=m.setIsExpanded,w=m.maxItemsReached,y=m.visibleItems,b=m.hiddenItemsCount,S=(0,p.m5)(),Y=(0,n1.b)();return y.length?S&&Y?(0,o.FD)(H.S,{css:tq.expandableProgress,gap:4,children:[w?(0,o.Y)(nd.L3,{isExpanded:g,onClick:function(){return v(!g)},hiddenItemsCount:b,small:d}):null,y.map(function(e){return(0,o.Y)(tk,{openPane:u,eventId:e},e)})]}):(0,o.FD)(H.S,{css:tq.root,row:!0,gap:8,"data-event-type":"ai-actions",style:{paddingBottom:d?T.LU.space8:T.LU.space16},children:[(0,o.Y)(H.S,{css:tq.avatar,"data-avatar":!0,children:(0,o.Y)(nQ.l,{size:22,hidden:!(void 0===l||l)})}),(0,o.FD)(H.S,{css:tq.timeline,gap:4,children:[w?(0,o.Y)(nd.L3,{isExpanded:g,onClick:function(){return v(!g)},hiddenItemsCount:b,small:d}):null,y.map(function(e){return(0,o.Y)(nd.CV,{showThoughtButton:c,eventId:e,onClick:t},e)})]})]}):null})},25861:(e,n,t)=>{"use strict";t.d(n,{vV:()=>E,lv:()=>F});var r=t(94086),i=t(30758),o=t(84321),a=t(51439),l=t(5846),s=t(34805),c=t(82436),u=t(3596),d=t(1175),p=t(40889);function f(e){var n=e.tool,t=(0,d.a)({tablet:!1}),i="agent"===n?u.Br:u.Iq,o="agent"===n?u.PI:u.em;return(0,r.FD)(p.EY,{variant:"small",color:"dimmest",children:[i,(0,r.Y)("br",{}),t?null:o]})}var h=t(49574),m=t(23086),g=t(12887),v=t(79261),w=t(24955),y=t(10168),b=t(2298),S=t(32842),Y=t(31955),A=t(8367),C=t(71032),x=t(83515),_=t(16021),k=t(12219),D=t(43249),E=function(e){return e.None="none",e.Paid="paid",e}({}),R=(0,y.x)({step:[S.wp.align.center],stepText:[S.wp.flex.growAndShrink(1)]});function I(e){if(!e)return null;var n,t=e.contents.contents;return(null==t?void 0:t.$kind)!=="agentPlanEventContents"?null:(null===(n=t.agentPlanEventContents)||void 0===n?void 0:n.step.subSteps.some(function(e){return e.status!==o.jhd.STEP_COMPLETE}))?null:{steps:t.agentPlanEventContents.step.subSteps,created:e.created,state:e.state,sessionId:e.sessionId}}var F=(0,i.memo)(function(e){var n,t=e.eventId,i=e.onNewSession,o=e.onContinueSession,l=e.onOpenAssistant,s=e.costInfoVariant,c=(0,a.Al)(t,I),u=(0,a.jX)(null!==(n=null==c?void 0:c.sessionId)&&void 0!==n?n:null);return c?(0,r.Y)(T,{steps:c.steps,created:c.created,onNewSession:i,onContinueSession:o,onOpenAssistant:l,userMessageThresholdReached:u,costInfoVariant:s}):null});function T(e){var n=e.steps,t=e.created,i=e.onNewSession,a=e.onContinueSession,l=e.onOpenAssistant,c=e.userMessageThresholdReached,u=e.costInfoVariant,d="I've completed the plan successfully! ".concat(n.length," ").concat(1===n.length?"step was":"steps were"," executed:");return(0,r.FD)(r.FK,{children:[(0,r.Y)(h.e,{timestamp:t,children:(0,r.FD)(A.S,{gap:8,children:[(0,r.Y)(g.d2,{text:d,messageState:o.qOk.COMPLETE}),(0,r.FD)(A.S,{children:[n.length>5?(0,r.FD)(A.S,{gap:6,row:!0,css:R.step,children:[(0,r.Y)(_.A,{color:w.LU.greyStronger}),(0,r.Y)(p.EY,{color:"dimmer",children:"".concat(n.length-5," earlier ").concat((0,s.A)("step",n.length-5))})]}):null,n.slice(Math.max(0,n.length-5)).map(function(e){return(0,r.FD)(A.S,{gap:6,row:!0,css:R.step,children:[(0,r.Y)(_.A,{color:w.LU.accentPositiveStronger}),(0,r.Y)(p.EY,{css:R.stepText,children:e.name})]},e.id)})]})]})}),(0,r.Y)(P,{onNewSession:i,onOpenAssistant:l,userMessageThresholdReached:c,onContinueSession:a,costInfoVariant:u})]})}function P(e){var n=e.onNewSession,t=e.onContinueSession,i=e.onOpenAssistant,o=e.userMessageThresholdReached,s=e.costInfoVariant;return(0,r.Y)(h.e,{elevated:!1,children:(0,r.FD)(A.S,{gap:6,children:[(0,r.Y)(p.EY,{children:"There are two ways to work with AI:"}),(0,r.FD)(A.S,{gap:6,children:[(0,r.Y)(U,{toolIcon:(0,r.Y)(C.A,{}),toolName:a.g$,rightIcon:o?(0,r.Y)(D.A,{}):void 0,description:o?"Refocus ".concat(a.g$," with a new chat"):"Keep building with ".concat(a.g$),benefitInformation:(0,r.Y)(f,{tool:"agent"}),costInformation:"paid"===s?(0,r.Y)(m.x,{tool:"agent"}):null,onClick:function(){o?((0,v.pI)({action:"new_session"}),n()):((0,v.pI)({action:"continue_session"}),t())}}),(0,r.Y)(U,{onClick:function(){(0,c.u4)(l.AZ.WS_TAB_OPENED,{paneType:"ghostwriterChat",source:"agent_chat"}),i()},toolIcon:(0,r.Y)(x.A,{}),toolName:a.BP,description:"Switch to ".concat(a.BP),benefitInformation:(0,r.Y)(f,{tool:"assistant"}),costInformation:"paid"===s?(0,r.Y)(m.x,{tool:"assistant"}):null,rightIcon:(0,r.Y)(k.A,{color:w.LU.foregroundDimmer})})]})]})})}var L=(0,y.x)({root:[S.wp.reset.button,S.wp.px(6),S.wp.py(6),S.wp.align.start,b.b.filledAndOutlined,S.wp.overflow("hidden")],toolPill:[S.wp.px(6),S.wp.py(4),S.wp.align.center,S.wp.borderRadius()],middle:[S.wp.flex.growAndShrink(1),{textAlign:"left"}]});function U(e){var n=e.toolIcon,t=e.toolName,i=e.description,o=e.costInformation,a=e.benefitInformation,l=e.onClick,s=e.rightIcon;return(0,r.FD)(Y.ui,{row:!0,gap:12,tag:"button",css:L.root,onClick:l,children:[(0,r.FD)(A.S,{css:L.middle,children:[(0,r.Y)(p.EY,{children:i}),a?(0,r.Y)(p.EY,{variant:"small",color:"dimmer",children:a}):null,o?(0,r.Y)(p.EY,{variant:"small",color:"dimmer",children:o}):null]}),(0,r.Y)(Y.ui,{elevated:!0,style:{backgroundColor:"transparent"},children:(0,r.FD)(Y.ui,{elevated:!0,gap:6,row:!0,css:L.toolPill,children:[n,(0,r.Y)(p.EY,{children:t}),s]})})]})}},16984:(e,n,t)=>{"use strict";t.d(n,{CV:()=>j,L3:()=>$,Vb:()=>G,bQ:()=>B});var r,i,o,a,l,s,c,u=t(72275),d=t(66622),p=t(94086),f=t(30758),h=t(84321),m=t(51439),g=t(18317),v=t(44087),w=t(27918),y=t(46598),b=t(13310),S=t(12887),Y=t(69891),A=t(51570),C=t(59497),x=t(75165),_=t(24955),k=t(10168),D=t(2298),E=t(1478),R=t(3460),I=t(32842),F=t(40172),T=t(95235),P=t(31955),L=t(52186),U=t(8367),N=(t(67415),t(68522)),O=t(14019),M=t(79653);function B(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents,r=t.message,i=t.toolData;return(null==i?void 0:i.$kind)==="messageData"?{type:"message",message:r,created:e.created,sender:{id:e.sender.id,type:e.sender.type}}:{summary:(0,y.F)(e),message:r,state:e.state,error:e.error,toolDataKind:null==i?void 0:i.$kind,created:e.created}}var H=(0,E.v)(["color","timestampDisplay","chevronDisplay","secondaryButtonsDisplay","statusIconTransform","statusIconWidth","animation"]),z=H.styleTokens,W=H.cssVars,G=[R.S.backgroundPulse(_.LU.blurpleStronger,_.LU.blurpleStrongest),{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent","& > span > span":{backgroundColor:"transparent"}}],V=(0,k.x)({root:[(r={},(0,u._)(r,W.secondaryButtonsDisplay,"flex"),(0,u._)(r,I.$_.canHover,(0,u._)({},W.secondaryButtonsDisplay,"none")),r),I.wp.hover((0,u._)({},W.secondaryButtonsDisplay,"flex")),{":focus-within":(0,u._)({},W.secondaryButtonsDisplay,"flex")}],row:[I.wp.position.relative],minimalButton:[I.wp.textAlign.left,I.wp.px(6),I.wp.rowWithGap(6),I.wp.height(28),I.wp.cursor.pointer,I.wp.flex.growAndShrink(1),I.wp.justify.spaceBetween,I.wp.align.center,I.wp.hover((i={},(0,u._)(i,W.color,_.LU.foregroundDefault),(0,u._)(i,W.timestampDisplay,"flex"),(0,u._)(i,W.chevronDisplay,"flex"),i)),(a={},(0,u._)(a,I.$_.canHover,(o={},(0,u._)(o,W.color,_.LU.foregroundDimmer),(0,u._)(o,W.chevronDisplay,"none"),(0,u._)(o,W.timestampDisplay,"none"),o)),(0,u._)(a,"color",z.color),(0,u._)(a,"transition","color 120ms"),(0,u._)(a,"backgroundColor","inherit"),a)],button:[I.wp.reset.button,I.wp.textAlign.left,I.wp.height(28),D.b.listItem,I.wp.borderRadius(),I.wp.hover((l={},(0,u._)(l,W.color,_.LU.foregroundDefault),(0,u._)(l,W.timestampDisplay,"flex"),(0,u._)(l,W.chevronDisplay,"flex"),l)),(c={},(0,u._)(c,I.$_.canHover,(s={},(0,u._)(s,W.color,_.LU.foregroundDimmer),(0,u._)(s,W.chevronDisplay,"none"),(0,u._)(s,W.timestampDisplay,"none"),s)),(0,u._)(c,"color",z.color),(0,u._)(c,"transition","color 120ms"),c),I.wp.px(6),I.wp.rowWithGap(6),I.wp.cursor.pointer,I.wp.flex.growAndShrink(1),I.wp.justify.spaceBetween,I.wp.align.center],timestamp:[(0,u._)({},I.$_.canHover,{display:"var(".concat(W.timestampDisplay,", none)")})],left:[I.wp.flex.growAndShrink(1),I.wp.rowWithGap(6),I.wp.align.center],buttonText:[I.wp.flex.growAndShrink(1),{color:"inherit",'&[data-loading="true"]':G}],bar:[I.wp.position.absolute,I.wp.width(1),I.wp.height(8),I.wp.borderRadius(),{backgroundColor:_.LU.outlineDimmest,zIndex:-1,bottom:-6}],messageSurface:[I.wp.p(8),I.wp.borderRadius(4),I.wp.mb(8)],secondaryButtons:[{display:z.secondaryButtonsDisplay}],expandButton:[I.wp.color.foregroundDimmest,I.wp.px(6),I.wp.height(28),I.wp.hover(I.wp.color.foregroundDefault),I.wp.border({width:0}),{svg:{marginRight:-2}}]}),j=(0,f.memo)(function(e){var n,t=e.eventId,r=e.onClick,i=e.showThoughtButton,o=(0,m.Al)(t,B),a=(null==o?void 0:o.toolDataKind)==="createPostgresqlDatabaseData";(0,A.q)({skipQuery:!a});var l=(0,x.eg)();return o?(0,p.FD)(p.FK,{children:[(0,p.Y)(Z,{eventId:t,onClick:r,summary:null!==(n=o.summary)&&void 0!==n?n:"",message:o.message,toolDataKind:o.toolDataKind,state:o.state,created:o.created,showThoughtButton:i}),l&&a?(0,p.Y)(Y.IC,{}):null]}):null});function Z(e){var n=e.eventId,t=e.onClick,r=e.showThoughtButton,i=e.message,o=e.summary,a=e.toolDataKind,l=e.state,s=e.created,c=(0,d._)((0,f.useState)(!1),2),u=c[0],m=c[1],g=(0,d._)((0,f.useState)(!1),2),y=g[0],Y=(g[1],(0,f.useRef)(l)),A=(0,f.useRef)(null),x=(0,C.A)();(0,f.useEffect)(function(){if(Y.current===h.qOk.IN_PROGRESS&&l!==h.qOk.IN_PROGRESS){(0,v.U)(A,W.color,_.LU.greenStronger);var e=setTimeout(function(){(0,v.U)(A,W.color,_.LU.foregroundDimmer)},300);return function(){clearTimeout(e)}}},[l]);var k=i.trim().length>0&&r;return u&&!k&&m(!1),(0,p.FD)(U.S,{css:V.root,gap:6,children:[(0,p.FD)(U.S,{css:V.row,row:!0,gap:4,align:"center",children:[(0,p.Y)(U.S,{tag:"button",innerRef:A,css:x?V.minimalButton:V.button,onClick:function(){return t(n)},children:(0,p.FD)(U.S,{css:V.left,children:[(0,p.Y)(w.u,{kind:a,color:l===h.qOk.IN_PROGRESS?_.LU.blurpleStronger:void 0,size:x?12:16}),(0,p.Y)(U.S,{"data-timeline-bar":!0,css:V.bar,style:{left:x?12:14}}),(0,p.Y)(U.S,{css:V.buttonText,justify:"center","data-loading":l===h.qOk.IN_PROGRESS,children:(0,p.Y)(b.B,{summary:null!=o?o:"",variant:x?"small":"text",color:x?"dimmest":"dimmer",hover:x})}),s?(0,p.Y)(L.Dc,{textVariant:"small",textColor:"dimmest",css:V.timestamp,date:s}):null]})}),(0,p.FD)(U.S,{css:V.secondaryButtons,row:!0,align:"center",children:[k?(0,p.Y)(T.K0,{alt:u?"Hide explanation":"Show explanation",onClick:function(){return m(function(e){return!e})},size:28,children:(0,p.Y)(M.A,{})}):null,null]})]}),u?(0,p.Y)(P.ui,{elevated:!0,css:V.messageSurface,children:(0,p.Y)(S.d2,{text:i,messageState:h.qOk.COMPLETE})}):null,y?(0,p.Y)(P.ui,{elevated:!0,css:V.messageSurface,children:(0,p.Y)(K,{eventId:n})}):null]})}function q(e){return e}function K(e){var n=e.eventId,t=(0,m.Al)(n,q);return(0,p.Y)(g.A,{json:t})}function $(e){return(0,p.Y)(F.$n,{css:V.expandButton,variant:"nofill",alignment:"start",onClick:e.onClick,size:e.small?"small":"default",iconLeft:e.isExpanded?(0,p.Y)(N.A,{}):(0,p.Y)(O.A,{}),text:e.isExpanded?"Show less":"Show ".concat(e.hiddenItemsCount," more")})}},60363:(e,n,t)=>{"use strict";t.d(n,{RG:()=>x,_W:()=>C,rS:()=>E,wo:()=>k});var r=t(94086),i=t(30758),o=t(84321),a=t(51439),l=t(77781),s=t(63679),c=t(24481),u=t(57382),d=t(33841),p=t(74658),f=t(39183),h=t(12887),m=t(541),g=t(24955),v=t(10168),w=t(32842),y=t(31955),b=t(52186),S=t(65599),Y=t(8367),A=(0,v.x)({userMessage:[w.wp.pb(16),w.wp.justify.end,w.wp.pl(32)],userMessageMain:[w.wp.flex.shrink(1),w.wp.align.end,w.wp.colWithGap(6),w.wp.maxWidth(400)],userMessageSurface:[w.wp.borderRadius(4),w.wp.px(8),w.wp.py(6),w.wp.colorMixBg(g.LU.accentPrimaryDefault,"transparent",.4),w.wp.maxWidth("100%"),{opacity:1,'&[data-acknowledged="false"]':{opacity:.6,backgroundColor:g.LU.accentPrimaryDimmer}}],userMessageAttachments:[w.wp.maxWidth("100%")],avatar:[w.wp.pt(6),w.wp.position.relative],timestamp:[w.wp.px(8),w.wp.rowWithGap(4)]});function C(e){var n=e.userId,t=e.created,i=e.children,o=(0,s._P)({controlName:"flag-agent-v2-web-ui"});return(0,r.FD)(Y.S,{css:A.userMessage,row:!0,gap:8,"data-event-type":"user-message","data-cy":"user-message",style:{paddingTop:o?16:0},children:[(0,r.FD)(Y.S,{css:A.userMessageMain,children:[i,t?(0,r.Y)(Y.S,{css:A.timestamp,children:(0,r.Y)(Y.S,{children:(0,r.Y)(b.Dc,{live:!0,date:t,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized"})})}):null]}),(0,r.Y)(Y.S,{css:A.avatar,children:(0,r.Y)(m.H,{id:n,showAvatarOnly:!0})})]})}function x(e){var n=e.userId,t=e.message,i=e.attachments,o=e.attachedUrls,a=e.created,l=e.acknowledged,s=e.readFile;return(0,r.FD)(C,{userId:n,created:a,children:[s?(0,r.Y)(_,{attachments:i,attachedUrls:o,readFile:s}):null,(0,r.Y)(k,{message:t,acknowledged:l})]})}function _(e){var n=e.attachments,t=e.attachedUrls,i=e.readFile;return 0===n.length&&0===t.length?null:(0,r.Y)(Y.S,{css:A.userMessageAttachments,children:(0,r.Y)(u.A,{fileAttachments:n.map(function(e){return(0,r.Y)(d.m,{readFile:i,attachment:e,getAttachmentTypeDisclaimer:(0,f.F)({aiName:(0,a.Nn)({capitalizeFirstChar:!0})})},e.path)}),urlAttachments:t.map(function(e){var n=e.url,t=e.intent;return(0,r.Y)(p.A,{url:n,intent:t},n+t)})})})}function k(e){var n=e.message,t=e.acknowledged;return n?(0,r.Y)(S.m_,{tooltip:"The agent is wrapping up its current step, and will respond shortly",isDisabled:t,children:(0,r.Y)(y.ui,{css:A.userMessageSurface,elevated:!0,"data-acknowledged":t,children:(0,r.Y)(h.d2,{text:n,messageState:o.qOk.COMPLETE})})}):null}function D(e){if(!e||e.sender.type!==o.utd.USER)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="messageEventContents")return null;var t=n.messageEventContents.agentAction.optionType;return{message:n.messageEventContents.content,uploadedFiles:n.messageEventContents.uploadedFiles,attachedUrls:n.messageEventContents.attachedUrls,userId:Number(e.sender.id),parentEventId:e.parentEventId,sessionId:e.sessionId,action:t,created:e.created}}var E=(0,i.memo)(function(e){var n=e.eventId,t=(0,l.T)(),i=(0,a.Al)(n,D),o=(0,a.Tt)(null==i?void 0:i.sessionId),s=(0,a.xr)(n),u=(0,c.A)().fs;return i?(0,r.Y)(x,{readFile:u.readFile,userId:o&&t?t:i.userId,message:i.message,attachments:i.uploadedFiles,attachedUrls:i.attachedUrls,created:o?null:i.created,acknowledged:o||s}):null})},19404:(e,n,t)=>{"use strict";t.d(n,{F:()=>l,_:()=>s});var r=t(94086),i=t(51439),o=t(40889),a=t(65599);function l(e){var n=(0,i.e2)(e.sessionId);return null===n?null:(0,r.Y)(s,{cents:n})}function s(e){return(0,r.Y)(a.m_,{tooltip:"Usage for this chat",children:(0,r.FD)(o.EY,{color:"dimmer",variant:"small",children:["$",(e.cents/100).toFixed(2)]})})}},27918:(e,n,t)=>{"use strict";t.d(n,{u:()=>P});var r=t(16530),i=t(94086),o=t(30758),a=t(92578),l=t(20837),s=t(43952),c=t(42022);function u(e){return(0,i.Y)(c.Ay,(0,s._)((0,l._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M8.25 3.5A3.25 3.25 0 0 0 5 6.75v1.378a.5.5 0 0 1-.335.472A4 4 0 0 0 6 16.375h.751a.5.5 0 0 1 0 1H6c-.338 0-.673-.033-1-.099A3.25 3.25 0 1 0 8.25 14a.5.5 0 0 1 0-1 4.25 4.25 0 0 1 3.25 1.511V6.75A3.25 3.25 0 0 0 8.25 3.5ZM12 4.75a4.25 4.25 0 0 0-8 2v1.037a5 5 0 0 0 0 9.176v.287a4.25 4.25 0 0 0 8 2 4.248 4.248 0 0 0 5.376 1.927A4.25 4.25 0 0 0 20 17.25v-.287a4.998 4.998 0 0 0 2.321-7.124A5 5 0 0 0 20 7.787V6.75a4.25 4.25 0 0 0-8-2Zm7.346 11.396a3.999 3.999 0 0 1-1.345.229h-.751a.5.5 0 1 0 0 1H18c.337 0 .673-.033 1-.099a3.25 3.25 0 0 1-6.5-.021v-.018A3.25 3.25 0 0 1 15.75 14a.5.5 0 0 0 0-1 4.25 4.25 0 0 0-3.25 1.511V6.75a3.25 3.25 0 1 1 6.5 0v1.378a.5.5 0 0 0 .335.472 4 4 0 0 1 .011 7.546ZM8.25 7.375a.5.5 0 0 1 .5.5v.75a3.125 3.125 0 0 1-3.125 3.125.5.5 0 1 1 0-1A2.125 2.125 0 0 0 7.75 8.625v-.75a.5.5 0 0 1 .5-.5Zm7.5 0a.5.5 0 0 1 .5.5v.75a2.125 2.125 0 0 0 2.125 2.125.5.5 0 1 1 0 1 3.125 3.125 0 0 1-3.125-3.125v-.75a.5.5 0 0 1 .5-.5Z",clipRule:"evenodd"})}))}var d=t(61116),p=t(89715),f=t(43417),h=t(47650),m=t(16882),g=t(22414),v=t(65094),w=t(63516),y=t(83290),b=t(59062),S=t(82887),Y=t(16709),A=t(27093),C=t(4595),x=t(43249);function _(e){return(0,i.FD)(c.Ay,(0,s._)((0,l._)({},e),{children:[(0,i.Y)("path",{fillRule:"evenodd",d:"M10.122 9.849A.75.75 0 0 0 9 10.5v6a.75.75 0 0 0 1.122.651l5.25-3a.75.75 0 0 0 0-1.302l-5.25-3Zm3.366 3.651L10.5 15.208v-3.416l2.988 1.708Z",clipRule:"evenodd"}),(0,i.Y)("path",{fillRule:"evenodd",d:"M3 5.25A2.25 2.25 0 0 1 5.25 3h13.5A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25Zm2.25-.75h13.5a.75.75 0 0 1 .75.75v1.5h-15v-1.5a.75.75 0 0 1 .75-.75ZM4.5 8.25v10.5c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V8.25h-15Z",clipRule:"evenodd"})]}))}var k=t(50514),D=t(29567),E=t(16231),R=t(99413),I=t(34605),F=t(52885),T=t(96955);function P(e){var n=e.kind,t=(0,r._)(e,["kind"]),l={createPostgresqlDatabaseData:(0,i.Y)(g.A,{}),createFileData:(0,i.Y)(b.A,{}),deployData:(0,i.Y)(w.A,{}),readFileData:(0,i.Y)(a.A,{}),readDirData:(0,i.Y)(Y.A,{}),fileEditData:(0,i.Y)(S.A,{}),shellExecutionData:(0,i.Y)(F.A,{}),packagerInstallData:(0,i.Y)(A.A,{}),screenshotData:(0,i.Y)(d.A,{}),toolchainInstallData:(0,i.Y)(T.A,{}),searchFilesystemData:(0,i.Y)(R.A,{}),searchFileData:(0,i.Y)(R.A,{}),planProgressData:(0,i.Y)(f.A,{}),packagerUninstallData:(0,i.Y)(A.A,{}),messageData:(0,i.Y)(p.A,{}),systemDependencyInstallData:(0,i.Y)(v.A,{}),systemDependencyUninstallData:(0,i.Y)(v.A,{}),workflowsStartToolData:(0,i.Y)(C.A,{}),workflowsRestartToolData:(0,i.Y)(k.A,{}),workflowsStopToolData:(0,i.Y)(I.A,{}),workflowsSetRunConfigToolData:(0,i.Y)(C.A,{}),workflowsRemoveRunConfigToolData:(0,i.Y)(m.A,{}),workflowsGetOutputToolData:(0,i.Y)(y.A,{}),presentResultsToolData:(0,i.Y)(_,{}),sqlExecutionData:(0,i.Y)(g.A,{}),summarizeObjectiveData:(0,i.Y)(a.A,{}),revertData:(0,i.Y)(D.A,{}),agentPlanStepBegin:(0,i.Y)(E.A,{}),deployConfigData:(0,i.Y)(w.A,{}),acknowledgeUserMessage:(0,i.Y)(h.A,{}),newSessionNudge:(0,i.Y)(x.A,{}),commitData:(0,i.Y)(h.A,{}),thoughts:(0,i.Y)(u,{})};return n&&l[n]?(0,o.cloneElement)(l[n],t):(0,o.cloneElement)((0,i.Y)(h.A,{}),t)}},96068:(e,n,t)=>{"use strict";t.d(n,{g:()=>a});var r=t(66622),i=t(27189),o=t(30758);function a(e){var n=e.items,t=e.maxVisibleItems,a=e.reverse,l=(0,r._)((0,o.useState)(!1),2),s=l[0],c=l[1],u=n.length-t,d=u>1,p=(0,o.useMemo)(function(){var e=a?(0,i._)(n).reverse():n;return d&&!s?a?e.slice(0,t):e.slice(-t):e},[n,d,s,t,a]);return{isExpanded:s,setIsExpanded:c,maxItemsReached:d,visibleItems:p,hiddenItemsCount:u}}},41848:(e,n,t)=>{"use strict";t.d(n,{w:()=>l});var r=t(30758),i=t(44087),o=t(39735),a=t(24955);function l(e){return(0,r.useCallback)(function(n){var t,r=null===(t=e.current)||void 0===t?void 0:t.querySelector('[data-event-id="'.concat(n,'"]'));r instanceof HTMLElement&&((0,o.A)(r,{behavior:"smooth"}),(0,i.U)(r,"outline","1px solid "+a.LU.accentPrimaryDefault),setTimeout(function(){return(0,i.U)(r,"outline","none")},2e3))},[e])}},23086:(e,n,t)=>{"use strict";t.d(n,{x:()=>a});var r=t(94086),i=t(3596),o=t(40889);function a(e){var n=e.tool,t="agent"===n?i.ri:i.a7,a="agent"===n?i.v7:i.go;return(0,r.FD)(o.EY,{variant:"small",color:"dimmest",children:[t," cents per ",a]})}},96922:(e,n,t)=>{"use strict";t.d(n,{_:()=>s});var r=t(94086),i=t(82226),o=t.n(i),a=t(51439),l=t(78053);function s(){var e=(0,a.Sw)(),n=(0,a.rM)(),t=l.O.prompt;return e?t=l.O.agentWorking:n&&(t=l.O.agentWaiting),t?(0,r.Y)(o(),{children:(0,r.Y)("link",{rel:"shortcut icon",href:t,sizes:"192x192",type:"image/png"})}):null}},58572:(e,n,t)=>{"use strict";t.d(n,{n:()=>v});var r=t(66622),i=t(94086),o=t(30758),a=t(97407),l=t(40500),s=t(17392),c=t(10168),u=t(32842),d=t(40172),p=t(31955),f=t(40889),h=t(8367),m=t(27640),g=(0,c.x)({root:[u.wp.py(8),u.wp.px(12),u.wp.borderRadius()],buttonContainer:[u.wp.width("100%"),u.wp.justify.center],upgradeButton:[u.wp.width("60%")]});function v(e){var n=e.aiName,t=(0,r._)((0,o.useState)(!1),2),c=t[0],u=t[1],v=(0,s.A)();return(0,i.FD)(p.ui,{elevated:!0,css:g.root,gap:8,align:"center",children:[(0,i.FD)(f.EY,{children:[n," is currently experiencing high demand and is temporarily unavailable for ",a.Lm," plan users."]}),(0,i.FD)(f.EY,{children:["Please try again later, or upgrade to ",a.en," for immediate access."]}),(0,i.Y)(h.S,{css:g.buttonContainer,row:!0,gap:6,children:(0,i.Y)(d.$n,{text:"Upgrade to ".concat(a.en),iconLeft:(0,i.Y)(m.A,{}),onClick:function(){return u(!0)},colorway:"brand",css:g.upgradeButton})}),(0,i.Y)(l.A,{isOpen:c,onClose:function(){return u(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return v()},reloadPageAfterPurchaseComplete:!0})]})}},82270:(e,n,t)=>{"use strict";t.d(n,{L:()=>T});var r=t(66622),i=t(94086),o=t(30758),a=t(51439),l=t(97407),s=t(31349),c=t(82436),u=t(40500),d=t(39797),p=t(4363),f=t(46982),h=t(17392),m=t(24955),g=t(10168),v=t(32842),w=t(95235),y=t(36335),b=t(2301),S=t(93532),Y=t(40889),A=t(8367),C=t(60372),x=t(14753),_=t(20662),k="agent_freemium_quota";function D(e){var n=e.title,t=e.current,r=e.max,o=e.quotaExpiresAt,a=(0,s.M)({expiryDate:o}),l=a.expiryDisplayText,c=a.expiryDisplayTextColor;return(0,i.FD)(A.S,{gap:6,children:[(0,i.FD)(A.S,{css:I.usageMeterAndTitle,children:[(0,i.FD)(A.S,{row:!0,align:"center",gap:4,children:[(0,i.Y)(Y.EY,{height:"singleLine",children:n}),l?(0,i.Y)(Y.EY,{variant:"small",style:{color:c},children:"| ".concat(l)}):null]}),(0,i.FD)(Y.EY,{height:"singleLine",color:"dimmer",children:[t," / ",r]})]}),(0,i.Y)("div",{children:(0,i.Y)(y.W,{css:I.measureBar,total:r,current:t,color:m.LU.blueDefault,tooltipHidden:!0})})]})}var E=(0,g.x)({root:[v.wp.border({color:m.LU.orangeDimmer}),v.wp.borderRadius(),v.wp.py(4),v.wp.px(6),v.wp.colorMixBg(m.LU.orangeDimmer,"transparent",.25)],text:[v.wp.color.orangeStronger]});function R(){return(0,i.Y)(A.S,{css:E.root,children:(0,i.Y)(Y.EY,{css:E.text,children:"You've used 100% of your free AI quota."})})}var I=(0,g.x)({popoverWrapper:[v.wp.p(8),v.wp.width(280)],header:[v.wp.fontWeight.bold],measureBar:[v.wp.height(8)],usageMeterAndTitle:[v.wp.display.flex,v.wp.flex.row,v.wp.justify.spaceBetween,v.wp.align.center],iconBadgeWrapper:[v.wp.position.relative]});function F(e){var n=e.limit,t=e.usage,s=e.isShowingAlertExplanation,c=e.quotaExpiresAt,p=(0,r._)((0,o.useState)(!1),2),f=p[0],m=p[1],g=(0,h.A)();if(!n||void 0===t)return(0,i.Y)(x.A,{});var v=t>=n,w=Math.floor(t/n*100),y="You've used ".concat(w,"% of your ").concat(l.Lm," plan checkpoints. ").concat(a.g$," creates checkpoints when it's finished a significant piece of work.");return(0,i.FD)(i.FK,{children:[(0,i.Y)(A.S,{gap:4,children:(0,i.Y)(D,{title:"Checkpoints",quotaExpiresAt:c,current:t,max:n})}),v?(0,i.Y)(R,{}):null,s?(0,i.Y)(S.N,{text:y,colorway:"primary"}):null,(0,i.Y)(d.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:k,iconLeft:(0,i.Y)(C.A,{}),highlightUpsell:"agent"}),(0,i.Y)(u.A,{isOpen:f,onClose:function(){return m(!1)},type:"purchase",analyticsContext:{upgrade:{context:k}},onPurchaseComplete:g,reloadPageAfterPurchaseComplete:!0})]})}function T(){var e,n=(0,r._)((0,o.useState)(!1),2),t=n[0],l=n[1],s=(0,p.i)().agentCheckpoints,u=(0,r._)((0,o.useState)(!1),2),d=u[0],h=u[1];return(0,f.N)({usage:null==s?void 0:s.usage,limit:null==s?void 0:s.limit,percentThreshold:f.h,onHitThreshold:function(){l(!0),h(!0)}}),(0,f.N)({usage:null==s?void 0:s.usage,limit:null==s?void 0:s.limit,percentThreshold:100,onHitThreshold:function(){(0,c.u4)(c.AZ.AGENT_USED,{action:"hit_freemium_quota"})}}),(0,i.FD)(b.Wv,{isOpen:t,onOpenChange:function(e){l(e),e||h(!1)},label:"Usage",placement:"bottom start",children:[(0,i.Y)(w.K0,{alt:"Usage",disabled:!s,children:(0,i.Y)(A.S,{css:I.iconBadgeWrapper,children:(0,i.Y)(_.A,{})})}),(0,i.Y)(A.S,{css:I.popoverWrapper,children:(0,i.FD)(A.S,{gap:12,children:[(0,i.FD)(Y.EY,{css:I.header,children:[a.g$," usage"]}),(0,i.Y)(F,{limit:null==s?void 0:s.limit,usage:null==s?void 0:s.usage,isShowingAlertExplanation:d,quotaExpiresAt:null!==(e=null==s?void 0:s.quotaExpiresAt)&&void 0!==e?e:void 0})]})})]})}},68958:(e,n,t)=>{"use strict";t.d(n,{ue:()=>P,le:()=>L,L5:()=>T});var r=t(13454),i=t(66622),o=t(5482),a=t(94086),l=t(30758),s=t(20837),c=t(45009),u=t(30632),d=t(75838);function p(){var e=(0,c._)(["\n  mutation AgentLobbyUpdateAgentPlanningStatus($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isAgentRepl\n          isInPlanningPhase\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(84321),g=t(51439),v=t(75362),w=t(66061),y=t(26190),b=t(83733),S=t(49574),Y=t(13480),A=t(7404),C=t(90481),x=t(40172),_=t(31955),k=t(40889),D=t(8367),E=t(72602),R=t(2459),I=t(33753),F=t.n(I);function T(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v=e.filter(function(e){var n;return(null==e?void 0:null===(n=e.formType)||void 0===n?void 0:n.$kind)==="string"});return{mvpDescription:null==v?void 0:null===(r=v.find(function(e){return"mvp_description"===e.path}))||void 0===r?void 0:null===(t=r.formType)||void 0===t?void 0:null===(n=t.string)||void 0===n?void 0:n.value,projectFullList:null==v?void 0:null===(a=v.find(function(e){return"project_full_list"===e.path}))||void 0===a?void 0:null===(o=a.formType)||void 0===o?void 0:null===(i=o.string)||void 0===i?void 0:i.value,suggestedFeatures:null==v?void 0:null===(c=v.find(function(e){return"suggested_features"===e.path}))||void 0===c?void 0:null===(s=c.formType)||void 0===s?void 0:null===(l=s.string)||void 0===l?void 0:l.value,stack:null==v?void 0:null===(p=v.find(function(e){return"stack"===e.path}))||void 0===p?void 0:null===(d=p.formType)||void 0===d?void 0:null===(u=d.string)||void 0===u?void 0:u.value.trim(),technologies:null==v?void 0:null===(m=v.find(function(e){return"technologies"===e.path}))||void 0===m?void 0:null===(h=m.formType)||void 0===h?void 0:null===(f=h.string)||void 0===f?void 0:f.value,attachments:null!==(g=null==e?void 0:e.filter(function(e){var n;return(null==e?void 0:null===(n=e.formType)||void 0===n?void 0:n.$kind)==="files"}).map(function(e){return e.formType.files.files}).flat())&&void 0!==g?g:[]}}function P(e){var n,t,c,u=e.sessionId,p=e.onAgentSession,I=(0,g.NC)(),P=(0,w.Rj)(function(){return u?I.sessions.get(u):I.sessions.query({types:[m.dF3.REPL_CREATION_V3],limit:1}).map(function(e){return Array.from(e.values())[0]})},[I,u]),N=(0,w.J2)(null==P?void 0:P.latest),O=(0,l.useMemo)(function(){return N?v.cP.from(N.reduce(L)):null},[N]),M=(0,l.useMemo)(function(){return O?O.map(function(e){return e.fields?T(e.fields):null}):null},[O]),B=(0,w.G9)(O),H=(0,l.useMemo)(function(){var e;return null!==(e=null==O?void 0:O.select(function(e){return e.isStreaming}))&&void 0!==e?e:v.cP.of(!1)},[O]),z=(0,l.useMemo)(function(){var e;return null!==(e=null==M?void 0:M.select(function(e){return!!((null==e?void 0:e.stack)&&(null==e?void 0:e.mvpDescription))}).filter(Boolean))&&void 0!==e?e:v.cP.of(!1)},[M]),W=(0,w.Rj)(function(){return v.cP.combine(z,H.select(function(e){return!e})).map(function(e){return e.every(Boolean)})},[z,H],{default:!1}),G=(0,l.useMemo)(function(){return null==M?void 0:M.map(function(e){if(!e)return null;var n,t,r,i=(null==e?void 0:e.projectFullList)||(null==e?void 0:e.suggestedFeatures),o=i?i.split("\n").map(function(e){return e.trim().replace(/^- /,"")}).filter(Boolean):[];return{mvpPrompt:null!==(n=e.mvpDescription)&&void 0!==n?n:"",stack:null!==(t=e.stack)&&void 0!==t?t:"",attachments:e.attachments,followupSteps:o,techStack:null!==(r=e.technologies)&&void 0!==r?r:""}})},[M]),V=(0,w.G9)(G),j=(0,l.useCallback)((n=(0,r._)(function(e){var n;return(0,o.YH)(this,function(t){return[2,null==N?void 0:N.append({kind:"message",intent:m.qRv.MESSAGE_ACTION_UNKNOWN,message:"",attachedForm:{formType:m.B73.ATTACHED_FORM_TYPE_REPL_CREATION_V1,fields:(0,C.k)(null==B?void 0:null===(n=B.current)||void 0===n?void 0:n.fields,[e])}})]})}),function(e){return n.apply(this,arguments)}),[N,B]),Z=(0,b.A)(),q=(0,i._)((t=(0,s._)({},f,void 0),d.n(h,t)),1)[0],K=(0,y.A)(p),$=(0,l.useCallback)((c=(0,r._)(function(e){var n,t,r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,I.sessions.create({sessionType:m.dF3.AGENT_SESSION})];case 1:if(!(n=o.sent()).ok)return[2];return[4,(t=n.payload).latest.once()];case 2:if(r=o.sent(),i="",!N)return[3,4];return[4,v.cP.from(N.reduce(U)).once()];case 3:i=o.sent().summary,o.label=4;case 4:return r.append({kind:"startRapidBuildEvent",mvpObjective:e.mvpPrompt,stack:e.stack,techStack:e.techStack,uploadedFiles:e.attachments.map(function(e){return{fileName:e.name,downloadUrl:e.url}}),followupSteps:e.followupSteps,extraDetails:i}),K.current(t.id,e.mvpPrompt),q({variables:{input:{id:Z,isInPlanningPhase:!1}}}),[2]}})}),function(e){return c.apply(this,arguments)}),[I.sessions,K,Z,q,N]),J=(0,w.Rj)(function(){return null==M?void 0:M.select(function(e){return null==e?void 0:e.mvpDescription})},[M]),Q=(0,w.Rj)(function(){return null==M?void 0:M.select(function(e){return null==e?void 0:e.stack})},[M]),X=(0,w.Rj)(function(){return null==M?void 0:M.select(function(e){return(null==e?void 0:e.projectFullList)||(null==e?void 0:e.suggestedFeatures)})},[M]),ee=(0,w.Rj)(function(){return null==M?void 0:M.select(function(e){return null==e?void 0:e.attachments})},[M]);return(0,a.Y)(D.S,{clsx:F().root,align:"center",justify:"center",children:(0,a.FD)(D.S,{gap:8,clsx:F().content,children:[(0,a.FD)(_.ui,{clsx:F().proposal,elevated:!0,gap:16,children:[(0,a.FD)(D.S,{gap:8,children:[(0,a.FD)(D.S,{gap:8,row:!0,align:"center",children:[(0,a.Y)(R.A,{}),(0,a.Y)(k.EY,{variant:"subheadDefault",children:"Proposed app"})]}),J?(0,a.Y)(k.EY,{children:J}):null]}),Q?(0,a.Y)(Y.bt,{disabled:!W,value:Q,setFormField:j}):null,(null==ee?void 0:ee.length)?(0,a.Y)(Y.Tr,{files:ee}):null,X?(0,a.Y)(A.k,{features:X}):null]}),(0,a.FD)(D.S,{clsx:F().startBuildingButton,children:[(0,a.Y)(D.S,{css:W&&S.W}),(0,a.Y)(x.$n,{size:"big",disabled:!W,onClick:function(){(null==V?void 0:V.current)&&$(V.current)},text:"Start building",colorway:"blurple",iconRight:(0,a.Y)(E.A,{})})]})]})})}var L={direction:"reverse",size:100,state:{fields:null,firstLoading:!0,isStreaming:!0},result:function(e){return e},reducer:function(e,n){var t,r,i,o,a;if((null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="messageEventContents"&&e.state===m.qOk.COMPLETE&&e.sender.type===m.utd.AI&&(null===(r=e.contents.contents.messageEventContents.content)||void 0===r?void 0:r.length)&&(n.firstLoading=!1),n.isStreaming=e.state!==m.qOk.COMPLETE,(null===(i=e.contents.contents)||void 0===i?void 0:i.$kind)==="messageEventContents"&&(null===(a=e.contents.contents.messageEventContents.attachedForm)||void 0===a?void 0:null===(o=a.fields)||void 0===o?void 0:o.length)>0)return n.firstLoading=!1,n.fields=e.contents.contents.messageEventContents.attachedForm.fields,!1}},U={direction:"forward",size:100,state:{summary:"Conversation Summary:\n"},result:function(e){return e},reducer:function(e,n){var t;if((null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="messageEventContents"&&e.state===m.qOk.COMPLETE&&e.contents.contents.messageEventContents.content){var r=e.contents.contents.messageEventContents.content,i=e.sender.type===m.utd.AI?"AI":"User";r.trim()&&("Conversation Summary:\n"!==n.summary&&(n.summary+="\n\n"),n.summary+="".concat(i,": ").concat(r))}}}},75617:(e,n,t)=>{"use strict";t.d(n,{h:()=>U,qo:()=>N});var r=t(13454),i=t(20837),o=t(43952),a=t(66622),l=t(5482),s=t(94086),c=t(30758),u=t(84321),d=t(51439),p=t(75362),f=t(66061),h=t(63679),m=t(45963),g=t(57382),v=t(33841),w=t(39183),y=t(72123),b=t(12887),S=t(49574),Y=t(60363),A=t(45918),C=t(68958),x=t(49794),_=t(99970),k=t(21133),D=t(17082),E=t(90481),R=t(25877),I=t(31955),F=t(8367),T=t(5511),P=t(74240),L=t.n(P);function U(e){var n,t=e.branch,b=e.onAppProposal,S=e.sessionId,Y=(0,c.useMemo)(function(){return p.cP.from(t.reduce(C.le))},[t]),_=(0,f.G9)(Y),P=(0,c.useCallback)((n=(0,r._)(function(e,n,r){var i,o;return(0,l.YH)(this,function(a){return t?(o=(0,E.j)({attachments:n,attachedUrls:r}),[2,t.append({kind:"message",intent:u.qRv.MESSAGE_ACTION_UNKNOWN,message:e,attachedForm:{formType:u.B73.ATTACHED_FORM_TYPE_REPL_CREATION_V1,fields:(0,E.k)(null==_?void 0:null===(i=_.current)||void 0===i?void 0:i.fields,o)}})]):[2]})}),function(e,t,r){return n.apply(this,arguments)}),[t,_]),U=(0,c.useMemo)(function(){return Y.map(function(e){return e.fields?(0,C.L5)(e.fields):null})},[Y]),O=(0,c.useMemo)(function(){return U.map(function(e){return!!((null==e?void 0:e.stack)||(null==e?void 0:e.mvpDescription)||(null==e?void 0:e.projectFullList)||(null==e?void 0:e.suggestedFeatures))}).filter(Boolean)},[U]),M=(0,f.Rj)(function(){return O},[O]);(0,f.q3)(O,{next:function(){b()}});var H=(0,c.useMemo)(function(){return p.cP.from(t.reduce(B)).filter(Boolean)},[t]),z=(0,a._)((0,c.useState)(null),2),W=z[0],G=z[1],V=(0,k._)();(0,f.q3)(H,{next:function(){null==V||V.end(),null==W||W.focus()}});var j=(0,m.W)(),Z=(0,c.useRef)(!0),q=(0,c.useRef)(new Map),K=(0,f.Rj)(function(){return null==U?void 0:U.select(function(e){return null==e?void 0:e.attachments})},[U]),$=(0,h._P)({controlName:"flag-agent-debug-info-button"});return(0,s.FD)(F.S,{clsx:L().root,children:[!M&&K&&(null==K?void 0:K.length)>0?(0,s.FD)(F.S,{clsx:L().attachmentsWrapper,gap:8,children:[(0,s.Y)(g.A,{fileAttachments:K.map(function(e){return(0,s.Y)(v.m,{attachment:(0,o._)((0,i._)({},e),{path:e.name,dataUrl:e.url}),getAttachmentTypeDisclaimer:(0,w.F)({aiName:(0,d.Nn)({capitalizeFirstChar:!0})})},e.name)})}),(0,s.Y)(R.a,{})]}):null,(0,s.Y)(T.y,{padding:"8px 8px 32px 8px",scrollCacheKey:"lobby",scrollCache:q.current,shouldAutoScrollRef:Z,autoScrollBehavior:"smooth",alignToEnd:!0,children:(0,s.Y)(N,{branch:t})}),(0,s.Y)(D.e,{branch:t}),(0,s.Y)(x.G,{children:(0,s.Y)(A.A,{inputRef:G,status:"composing",onSubmit:P,uploadFiles:j,isSubmitDisabled:!1,submitDisabledReason:null,persistenceKey:"lobby-input",disablePlaceholderAnimation:!0,requireTextToSubmit:!0,disableUrlDetectionFeature:!0,debugButton:$&&S?(0,s.Y)(I.ui,{row:!0,children:(0,s.Y)(y.A,{sessionId:S,sessionType:u.dF3.REPL_CREATION_V3})}):null})})]})}function N(e){var n=e.branch,t=(0,f.J2)((0,c.useMemo)(function(){return n.transform(M)},[n]));return(0,s.Y)(s.FK,{children:null==t?void 0:t.map(function(e){var n=(0,a._)(e,2),t=n[0],r=n[1];return(0,s.Y)(O,{item:r},t)})})}function O(e){var n=(0,f.J2)(e.item);switch(null==n?void 0:n.type){case"aiMessage":return(0,s.Y)(S.e,{timestamp:n.created,children:(0,s.Y)(b.d2,{text:n.message,messageState:u.qOk.COMPLETE})});case"userMessage":return(0,s.Y)(Y._W,{userId:n.userId,created:n.created,children:(0,s.Y)(Y.wo,{message:n.message,acknowledged:!0})})}return null}var M={direction:"forward",size:1e3,state:{latestStack:null},transformer:function(e,n){var t=e.contents.contents;if((null==t?void 0:t.$kind)==="messageEventContents"){if(e.sender.type===u.utd.AI){if(e.state!==u.qOk.COMPLETE)return;return{type:"aiMessage",message:t.messageEventContents.content,created:e.created,loading:e.state!==u.qOk.COMPLETE}}if(e.sender.type===u.utd.USER){var r=t.messageEventContents,i=r.content,o=r.attachedForm;if(""===i){var a,l=(0,C.L5)(null!==(a=null==o?void 0:o.fields)&&void 0!==a?a:[]).stack;if(l&&n.latestStack!==l){n.latestStack=l;var s=_.Z.find(function(e){return e.value===l});if(!s)return;return{type:"userMessage",message:"Change app type to "+s.title,userId:Number(e.sender.id),created:e.created}}return}return{type:"userMessage",message:i,userId:Number(e.sender.id),created:e.created}}}}},B={direction:"forward",size:10,state:{hasAgentResponse:!1},result:function(e){return e.hasAgentResponse},reducer:function(e,n){var t;if(e.sender.type===u.utd.AI&&(null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="messageEventContents"&&e.state===u.qOk.COMPLETE)return n.hasAgentResponse=!0,!1}}},13480:(e,n,t)=>{"use strict";t.d(n,{Tr:()=>P,bt:()=>F,m1:()=>I});var r=t(13454),i=t(66622),o=t(5482),a=t(94086),l=t(30758),s=t(82182),c=t(20150),u=t(77119),d=t(33841),p=t(99970),f=t(24955),h=t(10168),m=t(2298),g=t(32842),v=t(37535),w=t(31955),y=t(40889),b=t(8367),S=t(84528),Y=t(20837),A=t(43952),C=t(42022);function x(e){return(0,a.Y)(C.Ay,(0,A._)((0,Y._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5ZM21.75 5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V5Zm-1.5 4.75H3.75V19c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25V9.75ZM5.25 6A.75.75 0 0 1 6 5.25h8a.75.75 0 0 1 0 1.5H6A.75.75 0 0 1 5.25 6Zm11.5 0a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var _=t(16021),k=t(29048),D=t(14195),E=t(22414),R=(0,h.x)({formLabel:[g.wp.color.foregroundDimmer,g.wp.font.default,g.wp.mb(6)],button:[g.wp.reset.button,g.wp.px(8),g.wp.py(6),m.b.filled,g.wp.textAlign.left,{"&:focus":{outline:"none"},"&:focus-visible":{outline:"2px solid ".concat(f.LU.accentPrimaryDimmer),outlineOffset:-2}}],selectedItemText:{flex:1},menuItemBase:[g.wp.borderRadius(),g.wp.px(8),g.wp.py(6),g.wp.flex.row,g.wp.justify.spaceBetween,g.wp.align.center,g.wp.cursor.pointer,{"&:hover":{backgroundColor:f.LU.accentPrimaryDimmer}}]});function I(e){switch(e.stack){case"FULLSTACK_JS":return(0,a.Y)(x,{});case"STREAMLIT":return(0,a.Y)(S.A,{});case"FLASK_VANILLA_JS":return(0,a.Y)(E.A,{});case"BEST_EFFORT_FALLBACK":return(0,a.Y)(D.A,{});default:return null}}function F(e){var n=e.value,t=e.setFormField,r=e.disabled,o=p.Z.find(function(e){return e.value===n}),u=(0,i._)((0,l.useState)(!1),2),d=u[0],f=u[1],h=(0,a.Y)(s.$,{css:R.button,isDisabled:r,children:(0,a.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,a.FD)(b.S,{css:R.selectedItemText,children:[(0,a.FD)(b.S,{row:!0,gap:6,align:"center",children:[o?(0,a.Y)(I,{stack:null==o?void 0:o.value}):null,(0,a.Y)(y.EY,{color:(null==o?void 0:o.title)?"default":"dimmest",children:(null==o?void 0:o.title)||"Select framework"})]}),o?(0,a.Y)(y.EY,{variant:"small",color:"dimmer",children:o.description}):null]}),(0,a.Y)(k.A,{rotate:d?180:0})]})});return(0,a.FD)(b.S,{gap:8,children:[(0,a.Y)(y.EY,{variant:"small",css:R.formLabel,children:"App type"}),(0,a.Y)(v.in,{trigger:h,onOpenChange:f,children:p.Z.map(function(e){return(0,a.Y)(c.Dr,{textValue:e.value,onAction:function(){n!==e.value&&t({path:"stack",formType:{string:{value:e.value.trim()},$kind:"string"}})},children:(0,a.Y)(T,{stack:e.value,selected:e===o,title:e.title,description:e.description})},e.value)})})]})}function T(e){var n=e.selected,t=e.title,r=e.description,i=e.stack;return(0,a.FD)(w.ui,{elevated:n,row:!0,gap:8,justify:"space-between",align:"center",css:R.menuItemBase,children:[(0,a.FD)(b.S,{children:[(0,a.FD)(b.S,{row:!0,gap:6,align:"center",children:[(0,a.Y)(I,{stack:i}),(0,a.Y)(y.EY,{children:t})]}),(0,a.Y)(y.EY,{variant:"small",color:"dimmer",children:r})]}),n?(0,a.Y)(_.A,{size:16}):null]})}function P(e){var n=e.files;return(0,a.FD)(b.S,{gap:8,children:[(0,a.Y)(y.EY,{variant:"small",css:R.formLabel,children:"Attachments"}),(0,a.Y)(b.S,{row:!0,gap:8,children:n.map(function(e){return(0,a.Y)(d.m,{attachment:{path:e.name,mimeType:e.mimeType},readFile:(0,r._)(function(){var n;return(0,o.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch(e.url).then(function(e){return e.arrayBuffer()})];case 1:return n=t.sent(),[2,{content:new u.A(n),error:null}];case 2:return[2,{content:null,error:t.sent()}];case 3:return[2]}})}),getAttachmentTypeDisclaimer:function(){return null}},e.url)})})]})}},49794:(e,n,t)=>{"use strict";t.d(n,{G:()=>l});var r=t(94086),i=t(8367),o=t(93869),a=t.n(o);function l(e){return(0,r.Y)(i.S,{clsx:a().footer,children:e.children})}},7404:(e,n,t)=>{"use strict";t.d(n,{k:()=>l});var r=t(94086),i=t(40889),o=t(8367),a=t(20778);function l(e){return(0,r.FD)(o.S,{gap:4,children:[(0,r.Y)(i.EY,{color:"dimmer",variant:"small",children:"Potential features"}),(0,r.Y)(a.Ay,{children:e.features}),(0,r.Y)(i.EY,{color:"dimmest",variant:"small",children:"The agent works best step by step. These are potential features the agent can build next."})]})}},17082:(e,n,t)=>{"use strict";t.d(n,{E:()=>v,e:()=>g});var r=t(72275),i=t(94086),o=t(30758),a=t(84321),l=t(75362),s=t(20543),c=t(80001),u=t(24955),d=t(40889),p=t(8367),f=t(52652),h=t.n(f),m=(0,u.CK)("StatusBar.module.css",["--y","--delay"]);function g(e){var n=e.branch,t=(0,o.useMemo)(function(){return l.cP.from(n.reduce(w)).map(function(e){var n;return n={},(0,r._)(n,m.y,e?"-100%":"0"),(0,r._)(n,m.delay,e?"200ms":"0"),n})},[n]),a=(0,o.useRef)(null);return(0,s.d)(a,t),(0,i.Y)(v,{innerRef:a})}function v(e){return(0,i.Y)(p.S,{row:!0,gap:8,clsx:h().root,innerRef:e.innerRef,children:(0,i.FD)(p.S,{row:!0,gap:8,clsx:h().bar,align:"center",children:[(0,i.Y)(c.l,{loading:!0,size:16}),(0,i.Y)(d.EY,{clsx:h().text,children:"Thinking"})]})})}var w={direction:"reverse",size:1,state:{isThinking:!1},result:function(e){return e.isThinking},reducer:function(e,n){e.sender.type===a.utd.USER&&(n.isThinking=!0),e.sender.type===a.utd.AI&&(n.isThinking=e.state!==a.qOk.COMPLETE)}}},51027:(e,n,t)=>{"use strict";t.d(n,{O:()=>f,e:()=>p});var r=t(94086),i=t(84321),o=t(51439),a=t(66061),l=t(75617),s=t(8367),c=t(14753),u=t(77532),d=t.n(u);function p(){var e=(0,o.NC)();return(0,a.Rj)(function(){return e.sessions.query({types:[i.dF3.REPL_CREATION_V3],limit:1}).map(function(e){return Array.from(e.values())[0]})},[e])}function f(e){var n=e.onAppProposal,t=p(),i=(0,a.J2)(null==t?void 0:t.latest);return i?(0,r.Y)(l.h,{onAppProposal:n,branch:i,sessionId:null==t?void 0:t.id}):(0,r.Y)(s.S,{align:"center",justify:"center",clsx:d().loading,children:(0,r.Y)(c.A,{})})}},99970:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var r=[{value:"FULLSTACK_JS",title:"Web application",description:"Javascript web app with React, Express, Tailwind"},{value:"STREAMLIT",title:"Data Dashboard",description:"Python with Streamlit"},{value:"BEST_EFFORT_FALLBACK",title:"Scripts & automation",description:"Any other app"},{value:"FLASK_VANILLA_JS",title:"Flask app",description:"Python backend with Flask & vanilla JavaScript"}]},90481:(e,n,t)=>{"use strict";t.d(n,{j:()=>l,k:()=>a});var r=t(20837),i=t(43952),o=t(27189),a=function(e,n){var t=new Map;if(e){var a=!0,l=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if("attachments"===d.path&&(null===(p=d.formType)||void 0===p?void 0:p.$kind)==="files"){var p,f,h=t.get("attachments");if((null==h?void 0:null===(f=h.formType)||void 0===f?void 0:f.$kind)==="files"){var m=(0,i._)((0,r._)({},d),{formType:(0,i._)((0,r._)({},d.formType),{files:(0,i._)((0,r._)({},d.formType.files),{files:(0,o._)(h.formType.files.files).concat((0,o._)(d.formType.files.files))})})});t.set(d.path,m);continue}}t.set(d.path,d)}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}var g=!0,v=!1,w=void 0;try{for(var y,b=n[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var S=y.value;if("attachments"===S.path&&(null===(Y=S.formType)||void 0===Y?void 0:Y.$kind)==="files"){var Y,A,C=t.get("attachments");if((null==C?void 0:null===(A=C.formType)||void 0===A?void 0:A.$kind)==="files"){var x=(0,i._)((0,r._)({},S),{formType:(0,i._)((0,r._)({},S.formType),{files:(0,i._)((0,r._)({},S.formType.files),{files:(0,o._)(C.formType.files.files).concat((0,o._)(S.formType.files.files))})})});t.set(S.path,x);continue}}t.set(S.path,S)}}catch(e){v=!0,w=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw w}}return Array.from(t.values())},l=function(e){var n=e.attachments,t=e.attachedUrls;return(0,o._)(n.filter(function(e){return!!e.publicUrl}).map(function(e){return{path:"attachments",formType:{files:{files:[{name:e.file.name,url:e.publicUrl,mimeType:e.file.type}]},$kind:"files"}}})).concat((0,o._)(t.map(function(e){return{path:"attachedUrls",formType:{files:{files:[{name:e.url,url:e.url,mimeType:"url/".concat(e.intent)}]},$kind:"files"}}})))}},2484:(e,n,t)=>{"use strict";t.d(n,{F:()=>b,v:()=>y});var r=t(20837),i=t(43952),o=t(94086),a=t(30758),l=t(84321),s=t(51439),c=t(10768),u=t(29835),d=t(24481),p=t(44115),f=t(63764),h=t(42393),m=t(10168),g=t(32842),v=(0,m.x)({webview:[g.wp.height("auto"),g.wp.flex.grow(1),g.wp.position.relative]});function w(e){if(!e||e.sender.type!==l.utd.AI)return null;var n,t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents"||(null===(n=t.agentTimelineEventContents.toolData)||void 0===n?void 0:n.$kind)!=="presentResultsToolData")return null;var r=t.agentTimelineEventContents.toolData.presentResultsToolData;return{path:r.websiteRoute,port:r.websitePort}}var y=(0,a.forwardRef)(function(e,n){var t,l,c=e.eventId,m=e.showDeployBanner,g=e.openPane,y=e.previewScreenSize,b=e.setPreviewScreenSize,S=e.initialPort,Y=e.initialPath,A=(0,s.Al)(c,w),C=(0,d.A)(),x=C.container,_=C.runner,k=C.ports,D=(0,u.w)(k),E=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,function(){return{refresh:function(){var e;null===(e=E.current)||void 0===e||e.refresh()}}},[]),(0,f.A)({container:x,runner:_,refreshWebView:null===(t=E.current)||void 0===t?void 0:t.refresh}),(0,h.A)({runner:_,refreshWebView:null===(l=E.current)||void 0===l?void 0:l.refresh});var R=(0,a.useCallback)(function(){return g({type:"networking"})},[g]);(0,a.useEffect)(function(){if((null==A?void 0:A.path)&&(null==A?void 0:A.port)){var e;null===(e=E.current)||void 0===e||e.navigateTo(A.path,A.port)}},[null==A?void 0:A.path,null==A?void 0:A.port]);var I=(0,a.useMemo)(function(){return A?void 0!==S?S:(0,p.Eo)({ports:(0,i._)((0,r._)({},A),{type:"local"})},D):null},[A,S,D]);if(!A&&!I){var F=(0,p.Eo)({ports:{type:"local",port:80}},D);if(F)return(0,o.Y)(p.QJ,{ref:E,css:v.webview,container:x,ports:k,openPane:g,initialPath:Y,initialPort:F,openNetworkingTool:R,shouldShowAgentDeployBanner:m,previewScreenSize:y,setPreviewScreenSize:b})}return A&&I?(0,o.Y)(p.QJ,{ref:E,css:v.webview,container:x,ports:k,openPane:g,initialPath:Y,initialPort:I,openNetworkingTool:R,shouldShowAgentDeployBanner:m,previewScreenSize:y,setPreviewScreenSize:b}):null}),b=(0,a.forwardRef)(function(e,n){var t=e.openPane,r=e.previewScreenSize,i=e.setPreviewScreenSize,l=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,function(){return{refresh:function(){var e;null===(e=l.current)||void 0===e||e.refresh()}}},[]);var s=(0,d.A)(),u=s.container,f=s.ports,h=(0,a.useCallback)(function(){return t({type:"networking"})},[t]);return(0,o.Y)(p.QJ,{ref:l,css:v.webview,container:u,ports:f,openPane:t,initialPath:"/",initialPort:c.no,openNetworkingTool:h,shouldShowAgentDeployBanner:!1,previewScreenSize:r,setPreviewScreenSize:i,isReadonlyPreview:!0})})},57829:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(94086),i=t(30758),o=t(29835),a=t(24481),l=t(44115),s=t(63764),c=t(42393),u=t(23311),d=t(10168),p=t(32842),f=t(8367),h=t(14753),m=(0,d.x)({webview:[p.wp.height("auto"),p.wp.flex.grow(1)],starting:[p.wp.height("100%"),p.wp.width("100%"),p.wp.center]});function g(e){var n,t,d=e.openPane,p=e.starting,f=e.previewScreenSize,h=e.setPreviewScreenSize,g=e.initialPort,w=e.initialPath,y=(0,a.A)(),b=y.container,S=y.runner,Y=y.ports,A=(0,i.useRef)(null),C=(0,o.w)(Y),x=(0,i.useMemo)(function(){return null!=g?g:(0,l.Eo)(void 0,C)},[C,g]);(0,s.A)({container:b,runner:S,refreshWebView:null===(n=A.current)||void 0===n?void 0:n.refresh}),(0,c.A)({runner:S,refreshWebView:null===(t=A.current)||void 0===t?void 0:t.refresh});var _=(0,i.useCallback)(function(){return d({type:"networking"})},[d]),k=(0,i.useCallback)(function(){return d({type:"agentChat"})},[d]);return p?(0,r.Y)(v,{}):void 0===x?(0,r.Y)(u.A,{openNetworkingTool:_,openAgentPane:k}):(0,r.Y)(l.QJ,{ref:A,css:m.webview,initialPath:w,initialPort:x,openPane:d,openNetworkingTool:_,ports:Y,container:b,previewScreenSize:f,setPreviewScreenSize:h})}function v(){return(0,r.Y)(f.S,{css:m.starting,children:(0,r.Y)(h.A,{size:32})})}},42955:(e,n,t)=>{"use strict";t.d(n,{EI:()=>y,Io:()=>S,OS:()=>m,_b:()=>g,hg:()=>b,mt:()=>v,sj:()=>w,yI:()=>Y});var r=t(66622),i=t(30758),o=t(84321),a=t(51439),l=t(16483),s=t(54867),c=t(26190),u=t(84504),d=t(24481),p=t(19346),f=t(88859),h=t(20387),m=128,g=64,v=8,w=100,y=250,b=550,S=function(e){return e.NOT_RUNNING="NOT_RUNNING",e.STARTING="STARTING",e.RUNNING="RUNNING",e.FAILED="FAILED",e.CRASHED="CRASHED",e}({});function Y(e){var n,t,m,g,v,w,y,b,S,Y,A,C,x,_,k,D,E,R=e.refresh,I=(0,r._)((0,i.useState)(!0),2),F=I[0],T=I[1],P=(0,r._)((0,i.useState)(!1),2),L=P[0],U=P[1],N=(0,r._)((0,i.useState)(!1),2),O=N[0],M=N[1],B=(0,r._)((0,i.useState)(!1),2),H=B[0],z=B[1],W=(0,r._)((0,i.useState)(!1),2),G=W[0],V=W[1],j=(0,i.useRef)(F),Z=(0,c.A)(R),q=(0,h.g3)(),K=(0,d.A)().runner,$=(0,h.Ah)(K),J=(0,h.If)(),Q=(0,h.OK)(),X=null!==(E=(0,a.QL)())&&void 0!==E?E:null,ee=(0,a.Gk)(),en=(0,a.Ff)(),et=en.runState,er=en.transitionReason,ei=(0,a.mA)(),eo=(0,a.rM)()&&F,ea=(0,a.hX)(X),el=(0,a.Zl)(),es=el?el[el.length-1]:null,ec=(0,i.useRef)(es),eu=(0,a.Tt)(X),ed=(0,f._Q)();(0,a.EW)(X,(0,i.useCallback)(function(e){if(!eu){var n;null===(n=Z.current)||void 0===n||n.call(Z)}(null==e?void 0:e.$kind)==="presentDeployData"&&z(!0),L&&(null==e?void 0:e.$kind)==="presentResultsToolData"&&M(!0)},[eu,Z,L]));var ep=(t=(n={workflowsConfig:Q,workflowsRunState:J,pid1RunnerState:$,agentStartedWork:L}).workflowsConfig,m=n.workflowsRunState,g=n.pid1RunnerState,v=n.agentStartedWork,w=(0,i.useRef)(void 0),y=(0,i.useMemo)(function(){if(!t)switch(g){case u.ll.IDLE:case u.ll.STOPPING:case u.ll.OFFLINE:return"NOT_RUNNING";case u.ll.BEFORE_RUN:return"STARTING";case u.ll.RUNNING:return"RUNNING";default:(0,s.A)(g)}if(!m)return"NOT_RUNNING";var e,n=(e=Object.values(m).filter(function(e){return e.workflow.name===t.runButton}).sort(function(e,n){return e.startTime-n.startTime}))[e.length-1];if(!n)return"NOT_RUNNING";var r=n.step;switch(r){case l.zY.RUNNING:return"RUNNING";case l.zY.NOT_STARTED:case l.zY.FINISHED:return"NOT_RUNNING";case l.zY.FAILED:if(!w.current)return"FAILED";if("RUNNING"===w.current||"CRASHED"===w.current)return"CRASHED";if(v)return"NOT_RUNNING";return"FAILED";default:(0,s.A)(r)}},[t,m,g,w,v]),(0,i.useEffect)(function(){w.current=y},[y]),y),ef=(S=(b={workflowsConfig:Q,workflowsRunState:J,agentStartedWork:L}).workflowsConfig,Y=b.workflowsRunState,A=b.agentStartedWork,C=(0,i.useRef)(void 0),x=(0,i.useRef)(void 0),k=(_=(0,r._)((0,i.useMemo)(function(){if(!S||!Y)return["NOT_RUNNING",void 0];var e=Object.values(Y).filter(function(e){return e.step===l.zY.RUNNING&&e.tasks.some(function(e){var n;return!!e.metadata&&"shell.exec"===e.metadata.task&&(null===(n=e.metadata.openPorts)||void 0===n?void 0:n.some(function(e){return e.forwarded}))})});if(e.length>0)return["RUNNING",e[0].runId];if(void 0!==x.current){var n=Y[x.current];if(!n)return["NOT_RUNNING",void 0];var t=n.step;switch(t){case l.zY.FINISHED:case l.zY.NOT_STARTED:break;case l.zY.RUNNING:return["RUNNING",n.runId];case l.zY.FAILED:if("RUNNING"===C.current)return["CRASHED",n.runId];if("CRASHED"===C.current){if(A)return["STARTING",void 0];return["CRASHED",n.runId]}return["FAILED",n.runId];default:(0,s.A)(t)}}return["NOT_RUNNING",void 0]},[S,Y,A]),2))[0],D=_[1],(0,i.useEffect)(function(){C.current=k,x.current=D},[k,D]),k),eh=(0,i.useMemo)(function(){return F?ef:ep},[F,ef,ep]);return(0,i.useEffect)(function(){if(q&&q.stop&&q.run){var e=j.current;j.current=F,e!==F&&(F?"RUNNING"===eh&&q.stop():"RUNNING"===eh&&(q.stop(),(null==Q?void 0:Q.runButton)&&q.run(u.QG.AGENT_RUN)))}},[F,q,eh,Q]),(0,i.useEffect)(function(){var e=ec.current;ec.current=es,U(function(n){return et===o.g32.AGENT_STATE_RUNNING&&(e!==es||n)})},[es,et,er]),(0,i.useEffect)(function(){var e="CRASHED"===eh||"FAILED"===eh;!eo&&e&&M(!1)},[eo,eh]),(0,i.useEffect)(function(){et===o.g32.AGENT_STATE_RUNNING&&z(!1)},[et]),(0,i.useEffect)(function(){et!==o.g32.AGENT_STATE_RUNNING&&ed&&(0,p.N5)(ed)?(T(!1),M(!1),z(!1)):et===o.g32.AGENT_STATE_RUNNING&&T(!0)},[et,ed]),(0,i.useEffect)(function(){ee&&(X&&void 0!==et&&et!==o.g32.AGENT_STATE_UNKNOWN||ed&&(0,p.N5)(ed))&&V(!0)},[ee,X,et,ed]),{isAgentControllingRunWorkflow:F,clientConnected:ee,hasBeenReady:G,runState:et,transitionReason:er,presentResultId:ei,isWaitingOnUserInput:eo,hasInflightRevert:ea,startedWork:L,isWaitingForVisualFeedback:O,readyToDeploy:H,isReplaySession:eu,workflowState:eh}}},34806:(e,n,t)=>{"use strict";t.d(n,{N:()=>I,g:()=>T});var r=t(72275),i=t(20837),o=t(43952),a=t(16530),l=t(66622),s=t(94086),c=t(30758),u=t(16335),d=t(14349),p=t(99655),f=t(22596),h=t(98594),m=t(9408),g=t(24955),v=t(10168),w=t(1478),y=t(32842),b=t(64279),S=t(95235),Y=t(31955),A=t(40889),C=t(8367),x=t(5511),_=t(30433),k=(0,w.v)(["borderWidth","maxHeight","borderRadius"]),D=k.cssVars,E=k.styleTokens,R=(0,v.x)({root:[y.wp.border({color:g.LU.outlineDimmest}),y.wp.overflow("hidden"),{borderWidth:E.borderWidth,maxHeight:E.maxHeight,borderRadius:E.borderRadius}],header:[y.wp.py(4),y.wp.px(6),y.wp.rowWithGap(4),y.wp.align.center,y.wp.justify.spaceBetween,{backgroundColor:m.s}],left:[y.wp.mr(4)],middle:[y.wp.flex.growAndShrink(1),y.wp.rowWithGap(4),y.wp.align.center],middleText:[y.wp.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],divider:[{backgroundColor:g.LU.outlineDimmer,height:16,marginLeft:4}]});function I(e){var n,t=e.icon,i=e.title,o=e.right,a=e.onOpenPane,m=e.children,g=e.renderChildrenOnlyWhenInView,v=void 0!==g&&g,w=e.showOpenPaneButton,y=(0,p.m5)(),k=(0,c.useRef)(null),E=(0,u.W)(k,{amount:0}),I=(0,c.useMemo)(function(){return!v||E},[E,v]),F=(0,h.b)(),T=(0,l._)((0,c.useState)(0),2),P=T[0],L=T[1],U=(0,d.A)(function(e){v&&(!v||E)&&e.height>P&&L(e.height)},{type:"debounce",wait:500});return(0,s.FD)(C.S,{css:R.root,style:(n={},(0,r._)(n,D.borderWidth,y&&!F?0:"1px"),(0,r._)(n,D.maxHeight,y&&!F?"calc(".concat(x.R.height," - ").concat(f.J,"px)"):"auto"),(0,r._)(n,D.borderRadius,y?"8px":"4px"),n),innerRef:k,children:[(0,s.FD)(C.S,{css:R.header,children:[(0,s.Y)(C.S,{css:R.left,align:"center",children:(0,c.cloneElement)(t,{size:16})}),(0,s.Y)(C.S,{css:R.middle,children:(0,s.Y)(A.EY,{css:R.middleText,children:i})}),(0,s.FD)(C.S,{align:"center",row:!0,gap:2,children:[o,a&&(void 0===w||w)?(0,s.FD)(s.FK,{children:[o?(0,s.Y)(b.a,{css:R.divider}):null,(0,s.Y)(S.K0,{alt:"Open Pane",onClick:a,children:(0,s.Y)(_.A,{})})]}):null]})]}),(0,s.Y)(Y.ui,{elevated:!0,innerRef:U,style:{minHeight:P},children:I?m:null})]})}var F=(0,v.x)({content:[y.wp.p(8),(0,r._)({},y.$_.max("mobileMax"),[y.wp.maxHeight("calc(".concat(x.R.height," - 60px)")),y.wp.overflowY("auto"),{"&::-webkit-scrollbar":{display:"none"}}])],packagesWrapper:[{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:g.LU.space8}],package:[y.wp.borderRadius(4),y.wp.px(8),y.wp.py(4),y.wp.width("calc(50% - ".concat(g.LU.space4,")"))]});function T(e){var n=e.text,t=e.packageList,r=e.getPackageIcon,l=e.children,c=(0,a._)(e,["text","packageList","getPackageIcon","children"]);return(0,s.Y)(I,(0,o._)((0,i._)({renderChildrenOnlyWhenInView:!0},c),{children:(0,s.FD)(C.S,{css:F.content,gap:16,children:[t.length?(0,s.FD)(C.S,{gap:8,children:[(0,s.Y)(A.EY,{color:"dimmest",children:n}),(0,s.Y)(C.S,{css:F.packagesWrapper,children:t.map(function(e,n){return(0,s.Y)(Y.ui,{css:F.package,row:!0,gap:8,align:"center",justify:"space-between",elevated:!0,children:(0,s.FD)(C.S,{row:!0,gap:4,align:"center",children:[r(e),(0,s.Y)(A.EY,{children:e})]})},n)})})]}):null,l]})}))}},1479:(e,n,t)=>{"use strict";t.d(n,{L:()=>w});var r=t(94086),i=t(30758),o=t(51439),a=t(22596),l=t(71794),s=t(13310),c=t(65296),u=t(25623),d=t(10168),p=t(32842),f=t(31955),h=t(8367),m=t(5511),g=(0,d.x)({item:[p.wp.py(24),p.wp.px(16),{minHeight:m.R.height,scrollSnapAlign:"center"}],itemContent:[p.wp.width("100%"),p.wp.maxWidth(a.h),{marginInline:"auto"}],itemHeader:[p.wp.mb(4),p.wp.align.center]}),v=(0,d.x)({item:[p.wp.width("65vw"),p.wp.flex.growAndShrink(1)],itemContainer:[p.wp.position.relative,p.wp.flex.growAndShrink(1),p.wp.borderRadius(8),p.wp.backgroundColor.backgroundDefault,{"&::-webkit-scrollbar":{display:"none"}}],itemContent:[p.wp.flex.growAndShrink(1),p.wp.borderRadius(8)],summaryWrapper:[{textAlign:"center"},p.wp.px(8),p.wp.py(4)]}),w=(0,i.memo)(function(e){var n=e.eventId,t=e.openPane,i=e.variant,a=e.setItemRef,d=(0,o.Al)(n,l.b);if(!d||null===d.$kind)return null;var p=function(e){return a(n,e)};return"mobile"===i?(0,r.FD)(h.S,{css:v.item,justify:"space-between",innerRef:p,children:[(0,r.Y)(f.ui,{css:v.itemContainer,children:(0,r.Y)(h.S,{css:v.itemContent,gap:4,children:(0,r.Y)(c.r,{data:d,openPane:t})})}),d.summary?(0,r.Y)(h.S,{css:v.summaryWrapper,children:(0,r.Y)(s.B,{variant:"subheadDefault",summary:d.summary})}):null]}):(0,r.Y)(h.S,{css:g.item,justify:"center",innerRef:p,children:(0,r.FD)(h.S,{css:g.itemContent,gap:4,children:[(0,r.Y)(h.S,{css:g.itemHeader,children:d.summary?(0,r.Y)(s.B,{variant:"subheadDefault",color:"dimmer",summary:d.summary}):null}),d.message?(0,r.Y)(u.o,{text:d.message}):null,(0,r.Y)(c.r,{data:d,openPane:t})]})})})},65296:(e,n,t)=>{"use strict";t.d(n,{r:()=>nb});var r,i=t(94086),o=t(84321),a=t(51439),l=t(18317),s=t(78542),c=t(72275),u=t(66622),d=t(30758),p=t(16608),f=t(37976),h=t(81383),m=t(36601),g=t(1979),v=t(25161),w=t(99655),y=t(34806),b=t(93508),S=t(24955),Y=t(40172),A=t(72700),C=t(40889),x=t(5511),_="cm-agent-flash-range-element",k="rgba(100, 0, 255, 0.3)",D=p.Lz.theme((0,c._)({"&":{maxHeight:"max(calc(".concat(x.R.height," - 125px), 125px)")},".cm-gutters":{backgroundColor:S.LU.backgroundHigher}},".".concat(_),{display:"inline-block"})),E=p.Lz.theme((0,c._)({"&":{maxHeight:"calc(".concat(x.R.height," - 40px)")},".cm-scroller":{"&::-webkit-scrollbar":{display:"none"}},".cm-gutters":{backgroundColor:S.LU.backgroundHigher}},".".concat(_),{display:"inline-block"})),R=function(){function e(n,t){var r=this;(0,s._)(this,e),this.view=n,this.target=null,this.previous="",this.destroyed=!1,this.loop=new g.F3(function(e,t){if(null===r.target)return t();var i=n.lineBlockAt(r.target),o=n.scrollDOM.scrollTop,a=Math.min(Math.max(i.top,0),n.scrollDOM.scrollHeight-n.scrollDOM.clientHeight),l=a-o,s=Math.abs(l);if(s<1)return n.scrollDOM.scrollTop=a,r.target=null,t();var c=3e3*e;s<1500&&(c*=Math.sqrt(s/1500));var u=l>=0?Math.max(Math.min(c,s),.5):Math.min(Math.max(-c,-s),-.5);n.scrollDOM.scrollTop+=u}),Promise.resolve().then(function(){r.destroyed||(r.previous=t.current,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t.current}}),r.target=t.current.length,r.loop.start(),r.dispose=t.subscribe(function(e){if(e.startsWith(r.previous)){var t=r.previous.length,i=e.length,o=e.slice(t),a=f.y.of({from:t,to:i,class:_,animation:{duration:550,fill:"backwards",easing:"ease-out",keyframes:{opacity:[.675,.75,1],filter:["grayscale(0.325)","grayscale(0)","grayscale(0)"],backgroundColor:[k,k,"transparent"],offset:[0,.18181818181818182,1]}}});n.dispatch({changes:{from:t,insert:o},effects:a})}else{var l=r.view.state.doc.length;n.dispatch({changes:{from:0,to:l,insert:e}})}r.previous=e,r.target=n.state.doc.length,r.loop.start()}))})}return e.prototype.destroy=function(){var e;this.destroyed=!0,this.target=null,this.loop.stop(),null===(e=this.dispose)||void 0===e||e.call(this)},e}(),I=new m.k(function(e){return p.Z9.define(function(n){return new R(n,e)})});function F(e){var n=e.path,t=e.code,r=e.openPane,o=e.showCode,a=(0,w.m5)(),l=(0,b.eg)(),s=(0,u._)((0,d.useState)(function(){return(0,v.F)(t)}),1)[0];(0,d.useEffect)(function(){s.current!==t&&s.set(t)},[s,t]);var c=I.use(s),p=(0,d.useCallback)(function(){r&&r({type:"codeEditor",data:{path:n}})},[r,n]);return(0,i.Y)(y.N,{icon:(0,i.Y)(A.A,{path:n}),title:(0,i.Y)(T,{path:n,onClick:p}),onOpenPane:p,showOpenPaneButton:!l,children:void 0===o||o?(0,i.Y)(h.Ay,{filePath:n,extensions:[a?E:D,c],hideGutter:a,fontSize:a?12:void 0,lineWrapping:!1,hideIndentMarker:!0,readOnly:!0}):null})}function T(e){var n=e.path,t=e.onClick;return t?(0,i.Y)(Y.$n,{variant:"underlinedOnHover",text:P(n),onClick:t}):(0,i.Y)(C.EY,{children:P(n)})}function P(e){return e.replace(/^\//,"")}function L(e){var n=e.data,t=e.openPane;return(0,i.Y)(F,{path:n.path,code:n.content,openPane:t})}var U=t(75165),N=t(22414);function O(e){var n=e.openPane,t=(0,U.eg)();return(0,i.Y)(y.N,{icon:(0,i.Y)(N.A,{}),title:"Created PostgreSQL Database",onOpenPane:function(){return n({type:"neon"})},showOpenPaneButton:!t})}var M=t(55195),B=t(9070),H=t(35642),z=t(10168),W=t(32842),G=t(8367),V=t(20837),j=t(43952),Z=t(27189),q=t(31955),K=S.LU.outlineDimmest,$=(0,d.createContext)({});function J(){return(0,d.useContext)($)}function Q(e){var n=e.diff,t=e.onPathClick,r=e.onViewFullDiff,o=e.children,a=(0,d.useMemo)(function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.headers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if("index"===a.type)return{a:a.hashA,b:a.hashB}}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}},[n]),l=(0,d.useMemo)(function(){return{handlePathNavigation:t?function(e,r){var i="a"===e?n.pathA:n.pathB,o="a"===e?null==a?void 0:a.a:null==a?void 0:a.b;i&&t({path:i,revision:o,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=n.pathB||n.pathA,t=(null==a?void 0:a.b)||(null==a?void 0:a.a);e&&r({path:e,revision:t})}:void 0}},[n,t,r,a]);return(0,i.Y)($.Provider,{value:l,children:o})}var X=t(13454),ee=t(5482),en=t(57454),et=t(39647),er=t(87100),ei=t(82845),eo=t(82542);function ea(){return(ea=(0,X._)(function(e,n,t){var r,i,o,a,l,s,c;return(0,ee.YH)(this,function(u){switch(u.label){case 0:if(0===e.hunks.length)return[2,e];if(r=e.pathA?ei.Jh.from(e.pathA):null,i=e.pathB?ei.Jh.from(e.pathB):null,o=null,a=null,!(r&&r.codeMirrorLanguage))return[3,4];if(!r.codeMirrorLanguage.support)return[3,1];return l=r.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,r.codeMirrorLanguage.load()];case 2:l=u.sent().language.parser,u.label=3;case 3:o=l,u.label=4;case 4:if(!(i&&i.codeMirrorLanguage))return[3,8];if(!i.codeMirrorLanguage.support)return[3,5];return s=i.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,i.codeMirrorLanguage.load()];case 6:s=u.sent().language.parser,u.label=7;case 7:a=s,u.label=8;case 8:if(t.aborted||!o&&!a)return[2,e];return c=e.hunks.map(function(e){var t=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),r=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(t=t?"".concat(e.heading,"\n").concat(t):"",r=r?"".concat(e.heading,"\n").concat(r):"");var i=(0,er.ZE)(t,n,o),l=(0,er.ZE)(r,n,a);return e.heading&&t&&i.shift(),e.heading&&r&&l.shift(),(0,j._)((0,V._)({},e),{lines:e.lines.map(function(n){if(null!==n.numberB)t="b",r=n.numberB;else if(null!==n.numberA)t="a",r=n.numberA;else throw Error("Invalid line, no number for either side");var t,r,o="a"===t?i[r-e.fromA]:l[r-e.fromB];if(!o)throw Error("Line not found in side ".concat(t));return(0,j._)((0,V._)({},n),{content:o})})})}),[2,(0,j._)((0,V._)({},e),{hunks:c})]}})})).apply(this,arguments)}var el=new WeakSet,es=t(61184),ec=t(46490),eu=t.n(ec),ed=t(34805),ep=t(73128),ef=t(12219),eh="--number-width-a",em="--number-width-b",eg=(0,z.x)({content:{marginLeft:S.LU.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:S.LU.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:S.LU.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(S.LU.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(S.LU.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(K)}},"&.is-skipped":{paddingTop:S.LU.space4,paddingBottom:S.LU.space4,color:S.LU.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:S.LU.accentPositiveStronger},".is-removed &":{color:S.LU.accentNegativeStronger},".is-same &":{color:S.LU.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:S.LU.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(eh,")")},"&.is-side-b":{width:"var(".concat(em,")")}}});function ev(e){var n=(0,eo.D)().values;return(0,d.useMemo)(function(){if("same"===e)return"";var t="added"===e?n.global.accentPositiveDefault:n.global.accentNegativeDefault;return eu()(t).alpha(.2).hex()},[e,n.global.accentPositiveDefault,n.global.accentNegativeDefault])}function ew(e){var n=e.type,t=void 0===n?"same":n,r=e.changes,o=J().handleViewFullDiffNavigation,a=ev(t);if(r<=0)return null;var l=!1,s=!1;return("removed"===t||"same"===t)&&(l=(0,i.Y)(ep.A,{size:20})),("added"===t||"same"===t)&&(s=(0,i.Y)(ep.A,{size:20})),(0,i.FD)("div",{className:"is-".concat(t," is-skipped"),css:eg.line,style:{backgroundColor:a},children:[(0,i.Y)(eb,{side:"a",type:t,number:l}),(0,i.Y)(eb,{side:"b",type:t,number:s}),(0,i.Y)("div",{css:eg.content,children:(0,i.Y)("span",{css:eg.span,children:o?(0,i.Y)(Y.$n,{text:"view ".concat(r," more ").concat((0,ed.A)("change",r)),iconLeft:(0,i.Y)(ef.A,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return o()}}):"".concat(r," more ").concat((0,ed.A)("change",r)," not shown")})})]})}function ey(e){var n=e.type,t=e.content,r=e.numberA,o=e.numberB,a=ev(n);return(0,i.FD)("div",{className:"is-".concat(n),css:eg.line,style:{backgroundColor:a},children:[(0,i.Y)(eb,{side:"a",type:n,number:void 0===r?null:r}),(0,i.Y)(eb,{side:"b",type:n,number:void 0===o?null:o}),(0,i.Y)("div",{className:"is-".concat(n),css:eg.content,children:"string"==typeof t?(0,i.Y)("span",{css:eg.span,children:t||(0,i.Y)("span",{css:eg.nbsp,children:"\xa0"})}):t.map(function(e,n){var t=e.text,r=e.tags;return(0,i.Y)("span",{className:r,css:eg.span,children:t||(0,i.Y)("span",{css:eg.nbsp,children:"\xa0"})},n)})})]})}function eb(e){var n=e.side,t=e.type,r=e.number,o=J().handlePathNavigation;return!1===r?null:null===r?(0,i.Y)("div",{css:eg.numberContainer,className:"is-side-".concat(n)}):(0,i.Y)("div",{css:eg.numberContainer,className:"is-side-".concat(n),children:o&&"number"==typeof r?(0,i.Y)(Y.$n,{text:(0,i.Y)("span",{css:eg.number,children:r}),variant:"underlinedOnHover",onClick:function(){return o("removed"===t?"a":"b",r)}}):(0,i.Y)("span",{css:eg.number,children:r})})}var eS=(0,z.x)({hunk:[W.wp.flex.column,{":not(:first-of-type)":{borderTop:"1px solid ".concat(K)},":first-of-type [data-hunk-header]":{borderTopLeftRadius:3}}],header:[W.wp.colorMixBg(S.LU.interactiveBackground,S.LU.surfaceBackground),{gap:"1ch",padding:"".concat(S.LU.space4," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(K)}}],countAdded:[W.wp.textAlign.right,W.wp.color.accentPositiveStronger,W.wp.width("var(".concat(em,")"))],countRemoved:[W.wp.textAlign.right,W.wp.color.accentNegativeStronger,W.wp.width("var(".concat(eh,")"))],sectionHeading:[W.wp.ml(8),W.wp.font.code,W.wp.color.foregroundDimmer],hunks:[W.wp.flex.column,W.wp.font.code,(r={lineHeight:S.LU.lineHeightSmall},(0,c._)(r,"> div:last-child"+es.v,W.wp.pb(2)),(0,c._)(r,"> div:first-child"+es.v,W.wp.pt(4)),r)]});function eY(e){var n=e.hunk,t=e.hideHeader,r=e.maxLines,o=(0,d.useMemo)(function(){var e=0,t=0,r=!0,i=!1,o=void 0;try{for(var a,l=n.lines[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;"added"===s.type?t++:"removed"===s.type&&e++}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return{a:e,b:t}},[n]),a=(0,d.useMemo)(function(){return void 0!==r&&n.lines.length>r?n.lines.slice(0,r):n.lines},[n,r]);return(0,i.FD)(G.S,{css:eS.hunk,children:[t?null:(0,i.FD)(G.S,{css:eS.header,row:!0,align:"center","data-hunk-header":!0,children:[(0,i.FD)("span",{css:eS.countRemoved,children:["-",o.a]}),(0,i.FD)("span",{css:eS.countAdded,children:["+",o.b]}),n.heading?(0,i.Y)("span",{css:eS.sectionHeading,children:n.heading}):null]}),(0,i.Y)(G.S,{css:eS.hunks,children:a.map(function(e,n){return(0,i.Y)(ey,(0,V._)({},e),n)})})]})}var eA=t(72602),eC=(0,z.x)({diff:[W.wp.flex.column,{"&.is-patch-with-border":W.wp.borderRadius(4)}],header:[W.wp.rowWithGap(8),W.wp.my(8),W.wp.align.center,W.wp.flex.wrap],headerFile:{lineHeight:1,"&.is-added":W.wp.color.accentPositiveStronger,"&.is-removed":W.wp.color.accentNegativeStronger},binaryTag:[W.wp.color.accentPrimaryStronger],container:[W.wp.flex.column,W.wp.overflow("hidden"),{".is-patch-with-border &":[W.wp.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(K),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(S.LU.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(S.LU.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(S.LU.outlineDimmer)},"&.is-binary":{border:"1px solid ".concat(S.LU.outlineDimmer)}}],"&.is-no-changes":[W.wp.p(8),W.wp.center],"&.is-binary":[W.wp.p(8),W.wp.center]}],file:[W.wp.flex.column,W.wp.font.code,{lineHeight:S.LU.lineHeightSmall,"> div:last-child":W.wp.pb(2),"> div:first-child":W.wp.pt(4)}]});function ex(e){var n,t,r,o,a,l,s=e.diff,p=e.maxLines,f=e.noHeader,h=e.noBorder,m=e.background,g=e.compressed,v=e.onPathClick,w=e.onViewFullDiff,y=(t=(n=(0,u._)((0,d.useState)(s),2))[0],r=n[1],o=(0,eo.D)(),a=(0,d.useMemo)(function(){return(0,et.y)(o.values.editor.syntaxHighlighting)},[o.values.editor.syntaxHighlighting]),(0,d.useEffect)(function(){!a.module||el.has(a.module)||(en.G.mount(document,a.module),el.add(a.module))},[a.module]),(0,d.useEffect)(function(){r(s);var e=0,n=!0,t=!1,i=void 0;try{for(var o,l=s.hunks[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;if((e+=c.lines.length)>1e3)return}}catch(e){t=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}var u=new AbortController,d=u.signal;return(function(e,n,t){return ea.apply(this,arguments)})(s,a,d).then(function(e){d.aborted||r(e)}),function(){u.abort()}},[s,a]),t),b=(0,d.useMemo)(function(){var e=0,n=0,t=0,r=0,i=!0,o=!1,a=void 0;try{for(var l,c=s.hunks[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,d=0,p=0,f=!0,h=!1,m=void 0;try{for(var v,w=u.lines[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var y=v.value;y.numberA&&(t=Math.max(t,y.numberA)),y.numberB&&(r=Math.max(r,y.numberB)),"removed"===y.type&&d++,"added"===y.type&&p++}}catch(e){h=!0,m=e}finally{try{f||null==w.return||w.return()}finally{if(h)throw m}}e=Math.max(e,d),n=Math.max(n,p)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var b=t.toString().length,S=r.toString().length;if((!g||s.hunks.length>1)&&s.pathA&&s.pathB){var Y=e.toString().length+1,A=n.toString().length+1;b=Math.max(b,Y),S=Math.max(S,A)}return{a:b,b:S}},[s,g]);return(0,i.Y)(Q,{diff:s,onPathClick:v,onViewFullDiff:w,children:(0,i.FD)(G.S,{css:eC.diff,className:h?"":"is-patch-with-border",style:(l={},(0,c._)(l,eh,"".concat(b.a,"ch")),(0,c._)(l,em,"".concat(b.b,"ch")),l),children:[!f&&(s.pathA||s.pathB)?(0,i.Y)(ek,{diff:y}):null,(0,i.Y)(eE,{diff:y,compressed:g,background:m,maxLines:p})]})})}function e_(){return(0,i.Y)(C.EY,{css:eC.binaryTag,variant:"small",children:"Binary"})}function ek(e){var n=e.diff;if(n.pathA&&n.pathB&&n.pathA===n.pathB)return(0,i.FD)(G.S,{css:eC.header,children:[(0,i.Y)(eD,{diff:n,side:"b"}),n.binary?(0,i.Y)(e_,{}):null]});if(n.pathA&&n.pathB&&n.pathA!==n.pathB)return(0,i.FD)(G.S,{css:eC.header,children:[(0,i.Y)(eD,{diff:n,side:"a"}),n.binary?(0,i.Y)(e_,{}):null,(0,i.Y)(eA.A,{color:S.LU.foregroundDimmest}),(0,i.Y)(eD,{diff:n,side:"b"}),n.binary?(0,i.Y)(e_,{}):null]});var t=n.pathA?"a":"b";return(0,i.FD)(G.S,{css:eC.header,children:[(0,i.Y)(eD,{diff:n,side:t}),n.binary?(0,i.Y)(e_,{}):null]})}function eD(e){var n=e.diff,t=e.side,r=J().handlePathNavigation,o="a"===t?n.pathA:n.pathB,a="a"===t?n.pathB:n.pathA;if(!o)return null;var l="";a!==o&&(l="b"===t?"is-added":"is-removed");var s=(0,i.Y)(C.EY,{className:l,css:eC.headerFile,children:o});return r?(0,i.Y)(Y.$n,{text:s,iconLeft:(0,i.Y)(A.A,{path:o}),onClick:function(){return r(t)},variant:"underlinedOnHover"}):(0,i.FD)(i.FK,{children:[(0,i.Y)(A.A,{path:o}),s]})}function eE(e){var n=e.diff,t=e.background,r=e.compressed,o=e.maxLines,a=null===t?void 0:t||"root";if(n.binary)return(0,i.Y)(q.ui,{className:"is-binary",css:eC.container,background:a,children:(0,i.Y)(C.EY,{color:"dimmest",children:"Changes can't be shown for binary files."})});if(!n.hunks.length)return(0,i.Y)(q.ui,{className:"is-no-changes",css:eC.container,background:a,children:(0,i.Y)(C.EY,{color:"dimmer",children:"No additional changes"})});if(n.pathA&&n.pathB){var l=0,s=n.hunks.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+("same"!==n.type?1:0)},0)},0),c=n.hunks.map(function(e){if(void 0!==o&&l>=o)return null;var t=void 0!==o?o-l:void 0;return s-=e.lines.slice(0,t).reduce(function(e,n){return e+("same"!==n.type?1:0)},0),l+=e.lines.length+1,(0,i.Y)(eY,{hunk:e,hideHeader:r&&1===n.hunks.length,maxLines:t},l)});return(0,i.FD)(q.ui,{className:"is-modified",css:eC.container,background:a,children:[c,(0,i.Y)(ew,{changes:s})]})}var u=n.pathB?"b":"a",d="a"===u?"removed":"added",p=n.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===u?"added":"removed")}).map(function(e){return e.content})}),f=void 0!==o?p.slice(0,o):p,h=p.length-f.length;return(0,i.Y)(q.ui,{className:"is-".concat(d),css:eC.container,background:a,children:(0,i.FD)(G.S,{css:eC.file,children:[f.map(function(e,n){return(0,i.Y)(ey,{type:d,content:e,numberA:"a"===u&&n+1,numberB:"b"===u&&n+1},n)}),h<=0?null:(0,i.Y)(ew,{type:d,changes:h})]})})}var eR=(0,z.x)({patch:W.wp.colWithGap(12),truncatedDiffsMessage:[W.wp.pt(4),W.wp.color.foregroundDimmest,W.wp.align.center,W.wp.justify.start]}),eI=/^diff --git /m;function eF(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],binary:!1,hunks:e.hunks}}function eT(e){var n=e.patch,t=e.maxLines,r=e.maxDiffs,o=e.noHeader,a=e.noBorder,l=e.background,s=e.compressed,c=e.onPathClick,u=e.onViewFullDiff,p=(0,d.useMemo)(function(){return function e(n){return Array.isArray(n)?n.flatMap(function(n){return e(n)}):"string"==typeof n?eI.test(n)?(0,B.yf)(n):[eF((0,B.rj)(n))]:"headers"in n?[n]:[eF(n)]}(n)},[n]),f=(0,d.useMemo)(function(){var e=void 0!==r?Math.min(p.length,r):p.length;if(!s&&e===p.length)return p;for(var n=[],t=0;t<e;t++){var i=p[t];if(!s){n.push(i);continue}n.push((0,j._)((0,V._)({},i),{hunks:i.hunks.map(function(e){return function(e){for(var n,t,r,i,o=(0,Z._)(e.lines),a=e.fromA,l=e.fromB,s=e.toA,c=e.toB;(null===(n=o[0])||void 0===n?void 0:n.type)==="same"&&(null===(t=o[1])||void 0===t?void 0:t.type)==="same";)o.shift(),a++,l++;for(;(null===(r=o[o.length-1])||void 0===r?void 0:r.type)==="same"&&(null===(i=o[o.length-2])||void 0===i?void 0:i.type)==="same";)o.pop(),s--,c--;return(0,j._)((0,V._)({},e),{fromA:a,fromB:l,toA:s,toB:c,lines:o})}(e)}).filter(function(e){return e.lines.length>0})}))}return n},[p,r,s]),h=p.length-f.length,m=1===h?"file":"files";return(0,i.FD)(G.S,{css:eR.patch,children:[f.map(function(e,n){return(0,i.Y)(ex,{diff:e,maxLines:t,noHeader:o,noBorder:a,background:l,compressed:s,onPathClick:c,onViewFullDiff:u},n)}),h<=0?null:(0,i.Y)(G.S,{css:eR.truncatedDiffsMessage,row:!0,gap:4,children:u?(0,i.Y)(Y.$n,{text:"view in full (".concat(h," more changed ").concat(m,")"),iconLeft:(0,i.Y)(ef.A,{}),onClick:function(){return u({})},variant:"underlinedOnHover",colorway:"primary"}):(0,i.FD)(C.EY,{children:[h," other changed ",m," not shown"]})})]})}var eP=(0,z.x)({countRemoved:[W.wp.color.accentNegativeStronger],countAdded:[W.wp.color.accentPositiveStronger]});function eL(e){var n=e.path,t=e.type,r=e.diff,o=e.openPane,a=(0,b.eg)(),l=(0,u._)((0,d.useState)(!1),2),s=l[0],c=l[1],p=(0,d.useMemo)(function(){var e=0,n=0,t=!0,i=!1,o=void 0;try{for(var a,l=r.hunks[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=s.lines[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;"removed"===h.type?e++:"added"===h.type&&n++}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return{added:n,removed:e}},[r]),f=(0,d.useCallback)(function(){o&&o({type:"codeEditor",data:{path:n}})},[o,n]);return(0,i.Y)(y.N,{icon:(0,i.Y)(A.A,{path:n}),title:(0,i.Y)(eN,{type:t,path:n,onClick:f}),right:(0,i.Y)(G.S,{row:!0,gap:8,align:"center",children:(0,i.Y)(eU,{type:t,removed:p.removed,added:p.added})}),onOpenPane:f,showOpenPaneButton:!a,children:(0,i.Y)(eT,{patch:r,maxLines:s?void 0:16,onViewFullDiff:function(){return c(!0)},compressed:!s,background:null,noHeader:!0,noBorder:!0})})}function eU(e){var n=e.type,t=e.removed,r=e.added;switch(n){case"modify":return(0,i.FD)(i.FK,{children:[(0,i.FD)(C.EY,{css:eP.countRemoved,children:["-",t]}),(0,i.FD)(C.EY,{css:eP.countAdded,children:["+",r]})]});case"create":return(0,i.FD)(C.EY,{css:eP.countAdded,children:["+",r]});case"delete":return(0,i.FD)(C.EY,{css:eP.countRemoved,children:["-",t]})}}function eN(e){var n,t=e.type,r=e.path,o=e.onClick;switch(t){case"create":n=S.LU.accentPositiveStronger;break;case"delete":n=S.LU.accentNegativeStronger}return o?(0,i.Y)(Y.$n,{variant:"underlinedOnHover",style:{color:n},text:eO(r),onClick:o}):(0,i.Y)(C.EY,{style:{color:n},children:eO(r)})}function eO(e){return e.replace(/^\//,"")}var eM=t(93532),eB=t(68753);function eH(e){var n=e.data,t=n.path,r=n.diff,a=n.state,l=e.openPane,s=a===o.qOk.COMPLETE,c=(0,d.useRef)(null),p=(0,d.useMemo)(function(){var e=function(e){var n=e.previous,t=e.path,r=e.diff,i=e.complete;if(!r||"\n"===r)return i?(M.v4(function(e){e.setTag("agent",!0),e.setExtras({diff:r}),M.Cp(Error("No changes in diff"))}),(0,H._)("This diff cannot be displayed")):(0,H.Ok)(ez(t));if(!i)try{return(0,H.Ok)((0,B.rj)(r))}catch(e){if(n&&n.ok)return n;return(0,H.Ok)(ez(t))}try{return(0,H.Ok)((0,B.rj)(r))}catch(e){return M.v4(function(n){n.setTag("agent",!0),n.setExtras({diff:r}),M.Cp(e)}),(0,H._)("This diff cannot be displayed")}}({previous:c.current,path:t,diff:r,complete:s});return c.current=e,e},[t,r,s]),f=(0,u._)((0,d.useState)(1),2),h=f[0],m=f[1],g=(0,d.useMemo)(function(){return!s&&p.ok&&0===p.value.hunks.length},[s,p]);return((0,d.useEffect)(function(){if(g){var e=setInterval(function(){m(function(e){return e%3+1})},500);return function(){return clearInterval(e)}}},[g]),g)?(0,i.Y)(G.S,{row:!0,gap:"8px",align:"center",justify:"center",children:(0,i.FD)(C.EY,{multiline:!0,children:["Editing ",t,".".repeat(h)]})}):p.ok?(0,i.Y)(eL,{path:t,type:"modify",diff:p.value,openPane:l}):(0,i.Y)(eM.N,{icon:(0,i.Y)(eB.A,{}),colorway:"warning",text:p.error})}function ez(e){return{labelA:e,labelB:e,hunks:[]}}var eW=t(25264),eG=t(63679);function eV(){return(0,eG._P)({controlName:"flag-smooth-agent"})}var ej=t(82402),eZ=t(44394),eq=t(56573),eK=t(65094),e$=t(14753),eJ=t(27093),eQ=(0,z.x)({terminalWrapper:[W.wp.borderRadius(4),{"> div":[W.wp.borderRadius(4)],"& .xterm":[W.wp.borderRadius(4)]}]});function eX(e){var n,t=e.data,r=e.openPane,a=t.installed,l=t.isExecuting,s=t.processId,c=t.state,u=null===(n=t.output)||void 0===n?void 0:n.trim().replaceAll("\n","\r\n"),d=eV(),p=(0,ej.V)(),f="";f=l?a.length>1?"".concat(a.length," packages are being installed:"):"A package is being installed:":a.length>1?"".concat(a.length," packages were installed:"):"A package was installed:";var h=c===o.qOk.IN_PROGRESS&&l&&!u,m=(0,i.FD)(G.S,{css:eQ.terminalWrapper,style:{backgroundColor:null==p?void 0:p.background},children:[l&&s?(0,i.Y)(eZ.A,{processId:s,openPane:r,maxHeight:300}):null,!l&&u?(0,i.Y)(eW.xd,{output:u,maxHeight:300,openPane:r}):null,c===o.qOk.IN_PROGRESS||u?null:(0,i.Y)(C.EY,{children:"No output for this installation."})]});return(0,i.Y)(y.g,{icon:(0,i.Y)(eK.A,{}),title:"Dependencies",onOpenPane:function(){r({type:"dependencies"})},text:f,packageList:a,getPackageIcon:function(){return(0,i.Y)(eJ.A,{})},children:d?(0,i.Y)(eq.A,{headerContent:h?(0,i.FD)(G.S,{row:!0,gap:4,align:"center",children:[(0,i.Y)(e$.A,{}),(0,i.Y)(C.EY,{color:"dimmest",children:"Installing"})]}):(0,i.Y)(C.EY,{color:"dimmest",children:"View output"}),children:m}):(0,i.FD)(G.S,{gap:4,children:[(0,i.Y)(C.EY,{children:h?"Installing":"Command output:"}),m]})})}function e0(e){var n=e.data.uninstalled,t=e.openPane,r=n.length>1?"".concat(n.length," packages were uninstalled:"):"A package was uninstalled:";return(0,i.Y)(y.g,{icon:(0,i.Y)(eK.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,i.Y)(eJ.A,{})}})}var e1=t(16709);function e2(e){var n=e.data;return(0,i.Y)(y.N,{icon:(0,i.Y)(e1.A,{}),title:(0,i.Y)(T,{path:n.data.path}),showOpenPaneButton:!1})}function e5(e){var n=e.data,t=e.openPane;return(0,i.Y)(F,{path:n.data.filePath,code:n.data.content,openPane:t,showCode:!1})}var e4=t(48729),e3=(0,z.x)({loading:[W.wp.center,{marginLeft:"auto",marginRight:"auto"}],aspectRatio:[W.wp.position.relative,W.wp.height(0),{paddingBottom:"".concat(56.25,"%")}],image:[W.wp.coverContainer,{"& > span":[W.wp.borderRadius(4),W.wp.border({color:S.LU.outlineDimmer})]}]});function e8(e){var n=e.data.imageUrl;return n?(0,i.Y)(G.S,{css:e3.aspectRatio,children:(0,i.Y)(G.S,{css:e3.image,children:(0,i.Y)(e4.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})})}):(0,i.Y)(G.S,{css:e3.loading,children:(0,i.Y)(e$.A,{})})}var e7=t(44080),e6=t(16021),e9=t(52885),ne=(0,z.x)({wrapper:[W.wp.height("100%")],terminalWrapper:[W.wp.overflow("hidden"),{"& .xterm":[W.wp.borderRadius(0,0,4,4)]}]});function nn(e){var n=e.data.data,t=e.openPane,r=eV(),o=(0,ej.V)(),a=null;n.isExecuting||(a=0===n.exitCode?(0,i.Y)(e6.A,{}):(0,i.Y)(eB.A,{}));var l=!0===n.isExecuting,s=(0,i.Y)(G.S,{css:ne.wrapper,style:{backgroundColor:null==o?void 0:o.background},children:l?(0,i.Y)(e7.A,{processId:n.processId,openPane:t,maxHeight:300,interactive:!1}):(0,i.Y)(nt,{output:n.output,openPane:t})});return(0,i.Y)(y.N,{icon:(0,i.Y)(e9.A,{}),title:"$ ".concat(n.command),right:a,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:r?(0,i.Y)(eq.A,{headerContent:(0,i.Y)(C.EY,{color:"dimmest",children:"View output"}),children:s}):s})}function nt(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,i.Y)(G.S,{css:ne.terminalWrapper,children:(0,i.Y)(eW.xd,{maxHeight:300,output:n,openPane:t})})}var nr=(0,z.x)({wrapper:[W.wp.height("100%")],terminalWrapper:[W.wp.overflow("hidden"),{"& .xterm":[W.wp.borderRadius(0,0,4,4)]}]});function ni(e){var n,t,r=e.data.data,o=e.openPane,a=(0,ej.V)(),l=null;(null===(n=r.status)||void 0===n?void 0:n.$kind)==="exitCode"&&(l=0===r.status.exitCode?(0,i.Y)(e6.A,{}):(0,i.Y)(eB.A,{}));var s="\r"+r.command.replaceAll("\n","\r\n")+"\r\n";r.output&&(s+="\r\n"+r.output.replaceAll("\n","\r\n"));var c=(null===(t=r.status)||void 0===t?void 0:t.$kind)==="isExecuting";return(0,i.Y)(y.N,{icon:(0,i.Y)(N.A,{}),title:c?"Executing SQL query":"Executed SQL query",right:l,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,i.Y)(G.S,{css:nr.wrapper,style:{backgroundColor:null==a?void 0:a.background},children:(0,i.Y)(no,{output:s,openPane:o})})})}function no(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,i.Y)(G.S,{css:nr.terminalWrapper,children:(0,i.Y)(eW.xd,{maxHeight:300,output:n,openPane:t})})}function na(e){var n=e.data.deps,t=e.openPane,r=n.length>1?"".concat(n.length," system dependencies were installed:"):"A system dependency was installed:";return(0,i.Y)(y.g,{icon:(0,i.Y)(eK.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,i.Y)(eK.A,{})}})}function nl(e){var n=e.data.deps,t=e.openPane,r=n.length>1?"".concat(n.length," system dependencies were uninstalled:"):"A system dependency was uninstalled:";return(0,i.Y)(y.g,{icon:(0,i.Y)(eK.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,i.Y)(eK.A,{})}})}var ns=t(72563);function nc(e){var n=e.data.modules,t=e.openPane,r=n.length>1?"".concat(n.length," system modules were installed:"):"A system module was installed:";return(0,i.Y)(y.g,{icon:(0,i.Y)(eK.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(e){return(0,i.Y)(ns.A,{module:{name:e}})}})}var nu=t(75895),nd=t(77781),np=t(76862),nf=t(20387),nh=t(4595),nm=t(50514),ng=(0,z.x)({loading:[W.wp.p(8)],body:[W.wp.height("100%"),W.wp.minHeight("100%")],terminalWrapper:[W.wp.overflow("hidden"),{"& .xterm":[W.wp.borderRadius(0,0,4,4)]}]});function nv(e){var n=(0,U.eg)(),t=eV(),r=e.data,a=e.openPane,l=r.workflowName,s=r.state,c=(0,nf.If)(),u=(0,nd.T)(),p=(0,ej.V)(),f=(0,d.useMemo)(function(){if(!c)return null;var e=Object.values(c).filter(function(e){return e.workflow.name===l});return 0===e.length?null:e.sort(function(e,n){return n.startTime-e.startTime})[0]},[l,c]);if(s===o.qOk.IN_PROGRESS)return(0,i.Y)(G.S,{css:ng.loading,align:"center",children:(0,i.Y)(e$.A,{})});var h=(0,i.Y)(G.S,{css:ng.body,style:{backgroundColor:null==p?void 0:p.background},children:f&&u?(0,i.Y)(ny,{workflowRunState:f,currentUserId:u,openPane:a}):null});return(0,i.Y)(y.N,{icon:r.restart?(0,i.Y)(nm.A,{}):(0,i.Y)(nh.A,{}),title:l,onOpenPane:function(){return a({type:"runnerOutput"})},renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!n,children:t?(0,i.Y)(eq.A,{headerContent:(0,i.Y)(C.EY,{color:"dimmest",children:"View output"}),children:h}):h})}function nw(){}function ny(e){var n,t=e.workflowRunState,r=e.currentUserId,o=e.openPane,a=(0,d.useId)(),l=(0,ej.V)(),s=t.runId,c=t.tasks.findIndex(function(e){var n;return(null===(n=e.metadata)||void 0===n?void 0:n.task)==="shell.exec"}),p=(0,eW.Ui)({maxHeight:300,openPane:o}),f=p.visibleHeight,h=p.bufferHeight,m=p.wrapperResizeRef,g=p.xterm,v=p.xtermRef,w=(0,u._)((0,d.useState)(null),2),y=w[0],b=w[1],S=(0,d.useCallback)(function(e){return b(function(){return e}),function(){}},[]),Y=(0,d.useRef)(!1);return(0,np.b)((n=(0,X._)(function(e,n){var t,i,o,l,u,d,p,f,h,m,v;return(0,ee.YH)(this,function(w){switch(w.label){case 0:if(t=n.signal,Y.current||!g||!y)return[2];o=(i=e.workflows.connectToTask.stream({runId:s,taskIdx:c,userId:r,processViewId:a},{signal:t})).resReadable,l=i.reqWritable,Y.current=!0,l.write({$kind:"resize",size:g.getSize()}),u=!1,d=!1,w.label=1;case 1:w.trys.push([1,6,7,12]),f=(0,nu._)(o),w.label=2;case 2:return[4,f.next()];case 3:if(!(u=!(h=w.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&y(m.payload.chunk),w.label=4;case 4:return u=!1,[3,2];case 5:return[3,12];case 6:return v=w.sent(),d=!0,p=v,[3,12];case 7:if(w.trys.push([7,,10,11]),!(u&&null!=f.return))return[3,9];return[4,f.return()];case 8:w.sent(),w.label=9;case 9:return[3,11];case 10:if(d)throw p;return[7];case 11:return[7];case 12:return l.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[s,c,y,g,r,a]),(0,i.Y)(G.S,{css:ng.terminalWrapper,style:{height:f,background:null==l?void 0:l.background},children:(0,i.Y)(eW._x,{onInput:nw,xterm:g,wrapperResizeRef:m,bufferHeight:h,setOnMessage:S,onResizeTerminal:nw,children:(0,i.Y)(eW.DJ,{xtermRef:v,visibleHeight:f,maxHeight:300})})})}function nb(e){var n=e.data,t=e.openPane,r=(0,a.oh)();switch(null==n?void 0:n.$kind){case"fileEditData":return(0,i.Y)(eH,{data:n,openPane:t});case"createFileData":return(0,i.Y)(L,{data:n,openPane:t});case"readFileData":return(0,i.Y)(e5,{data:n,openPane:t});case"readDirData":return(0,i.Y)(e2,{data:n});case"shellExecutionData":return(0,i.Y)(nn,{data:n,openPane:t});case"packagerInstallData":return(0,i.Y)(eX,{data:n,openPane:t});case"packagerUninstallData":return(0,i.Y)(e0,{data:n,openPane:t});case"systemDependencyInstallData":return(0,i.Y)(na,{data:n,openPane:t});case"systemDependencyUninstallData":return(0,i.Y)(nl,{data:n,openPane:t});case"toolchainInstallData":return(0,i.Y)(nc,{data:n,openPane:t});case"screenshotData":return(0,i.Y)(e8,{data:n});case"workflowsStartToolData":case"workflowsRestartToolData":case"workflowsSetRunConfigToolData":return(0,i.Y)(nv,{data:n,openPane:t});case"createPostgresqlDatabaseData":return(0,i.Y)(O,{openPane:t});case"sqlExecutionData":return(0,i.Y)(ni,{data:n,openPane:t});default:if((null==n?void 0:n.state)===o.qOk.IN_PROGRESS)return(0,i.Y)(nY,{});if(!r)return null;return(0,i.FD)(G.S,{children:[(0,i.Y)(eM.N,{icon:(0,i.Y)(eB.A,{}),text:"No renderer",colorway:"warning"}),(0,i.Y)(l.A,{json:n})]})}}var nS=(0,z.x)({loading:[W.wp.px(16),W.wp.py(48),W.wp.center]});function nY(){return(0,i.Y)(G.S,{css:nS.loading,children:(0,i.Y)(e$.A,{})})}},25623:(e,n,t)=>{"use strict";t.d(n,{o:()=>y});var r,i=t(72275),o=t(94086),a=t(84321),l=t(9408),s=t(12887),c=t(24955),u=t(10168),d=t(1478),p=t(32842),f=t(31955),h=t(8367),m=(0,d.v)(["thoughtBackgroundColor","thoughtDotsColor","thoughtDotsAnimation","thoughtBorderColor"]),g=m.styleTokens,v=m.cssVars,w=(0,u.x)({thoughts:[p.wp.mb(16),p.wp.p(8),p.wp.borderRadius(),p.wp.border({width:1,color:g.thoughtBorderColor}),(r={width:"100%",marginTop:8,marginLeft:"auto",marginRight:"auto",position:"relative"},(0,i._)(r,v.thoughtBorderColor,c.LU.outlineDimmest),(0,i._)(r,v.thoughtBackgroundColor,l.s),(0,i._)(r,v.thoughtDotsAnimation,"none"),(0,i._)(r,v.thoughtDotsColor,c.LU.outlineDefault),r)],dot:[p.wp.borderRadius("full"),{pointerEvents:"none",transitionProperty:"background-color, border-color",transitionDuration:"120ms",backgroundColor:g.thoughtDotsColor,width:6,height:6,position:"absolute",'&[data-state="tl"]':{top:0,left:0,transform:"translate(-50%, -50%)"},'&[data-state="tr"]':{top:0,right:0,transform:"translate(50%, -50%)"},'&[data-state="bl"]':{bottom:0,left:0,transform:"translate(-50%, 50%)"},'&[data-state="br"]':{bottom:0,right:0,transform:"translate(50%, 50%)"}}]});function y(e){return(0,o.FD)(f.ui,{css:w.thoughts,children:[(0,o.Y)(s.d2,{text:e.text,messageState:a.qOk.COMPLETE}),["tl","tr","bl","br"].map(function(e){return(0,o.Y)(h.S,{css:w.dot,"data-state":e},e)})]})}},71794:(e,n,t)=>{"use strict";t.d(n,{b:()=>o});var r=t(84321),i=t(46598);function o(e){if(!e)return null;if(e.error.type!==r.fqQ.EVENT_ERROR_TYPE_UNKNOWN)return{$kind:"error",error:e.error};var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData,o=n.agentTimelineEventContents.message,a=(0,i.F)(e),l={$kind:null,message:o,summary:a,state:e.state};switch(null==t?void 0:t.$kind){case"fileEditData":var s=null==t?void 0:t.fileEditData,c=null==s?void 0:s.filePath,u=null==s?void 0:s.diff;if(void 0===c||void 0===u)return l;return{$kind:"fileEditData",state:e.state,path:c,diff:u,message:o,summary:a};case"createFileData":var d=null==t?void 0:t.createFileData,p=null==d?void 0:d.filePath,f=null==d?void 0:d.content;if(void 0===p||void 0===f)return l;return{$kind:"createFileData",content:f,path:p,message:o,summary:a};case"shellExecutionData":return{$kind:"shellExecutionData",data:t.shellExecutionData,message:o,summary:a};case"readFileData":return{$kind:"readFileData",data:t.readFileData,message:o,summary:a};case"readDirData":return{$kind:"readDirData",data:t.readDirData,message:o,summary:a};case"packagerInstallData":var h=t.packagerInstallData,m=h.inputLanguage,g=h.inputPackages,v=h.output,w=h.isExecuting,y=h.processId;if(void 0===m||void 0===g)return l;return{$kind:"packagerInstallData",state:e.state,language:m,installed:g,output:void 0===v?void 0:v,isExecuting:void 0!==w&&w,processId:void 0===y?void 0:y,message:o,summary:a};case"packagerUninstallData":var b=t.packagerUninstallData;return{$kind:"packagerUninstallData",language:b.inputLanguage,uninstalled:b.inputPackages,summary:a,message:o};case"systemDependencyInstallData":var S=t.systemDependencyInstallData.deps;if(void 0===S)return l;return{$kind:"systemDependencyInstallData",deps:S,summary:a,message:o};case"systemDependencyUninstallData":var Y=t.systemDependencyUninstallData.deps;if(void 0===Y)return l;return{$kind:"systemDependencyUninstallData",deps:Y,summary:a,message:o};case"toolchainInstallData":return{$kind:"toolchainInstallData",modules:t.toolchainInstallData.modules,message:o,summary:a};case"screenshotData":return{$kind:"screenshotData",imageUrl:t.screenshotData.imageUrl,message:o,summary:a};case"planProgressData":case"agentPlanStepBegin":case"workflowsStopToolData":case"workflowsGetOutputToolData":case"workflowsRemoveRunConfigToolData":return null;case"workflowsStartToolData":return{$kind:t.$kind,workflowName:t.workflowsStartToolData.name,state:e.state,summary:a,message:o};case"workflowsRestartToolData":return{$kind:t.$kind,workflowName:t.workflowsRestartToolData.name,state:e.state,restart:!0,summary:a,message:o};case"workflowsSetRunConfigToolData":return{$kind:t.$kind,workflowName:t.workflowsSetRunConfigToolData.name,state:e.state,summary:a,message:o};case"deployData":return{$kind:t.$kind,summary:a,result:t.deployData,message:o};case"presentResultsToolData":return{$kind:t.$kind,summary:a,result:t.presentResultsToolData,message:o};case"createPostgresqlDatabaseData":return{$kind:t.$kind,message:o,summary:a};case"sqlExecutionData":return{$kind:t.$kind,data:t.sqlExecutionData,message:o,summary:a};default:return l}}},85895:(e,n,t)=>{"use strict";t.d(n,{AN:()=>g,Ed:()=>w,u0:()=>y});var r=t(27189),i=t(94086),o=t(30758),a=t(51439),l=t(24955),s=t(10168),c=t(2298),u=t(32842),d=t(31955),p=t(40889),f=t(52186),h=t(8367),m=(0,s.x)({sessions:[u.wp.overflowY("auto"),u.wp.flex.growAndShrink(1)],item:[u.wp.reset.button,c.b.nofill,u.wp.py(4),u.wp.px(6),u.wp.colWithGap(2),{textAlign:"left"}]});function g(e){var n=(0,a.ET)();return(0,i.FD)(h.S,{css:m.sessions,gap:2,children:[e.sessionId?null:(0,i.Y)(y,{onClick:function(){return e.onNewSession()}}),(0,r._)(n).reverse().map(function(n){return(0,i.Y)(w,{onClick:function(){return e.onSessionClick(n.id)},sessionId:n.id,selected:n.id===e.sessionId},n.id)})]})}function v(e){return e?{title:e.title,updated:e.updated,sessionType:e.sessionType}:null}function w(e){var n=(0,a.C6)(e.sessionId,v);return n?(0,i.FD)(d.ui,{tag:"button",elevated:e.selected,css:m.item,onClick:e.onClick,style:e.selected?{backgroundColor:l.LU.surfaceBackground}:void 0,children:[(0,i.Y)(p.EY,{multiline:!1,children:n.title||"Thinking"}),(0,i.Y)(f.Dc,{textColor:"dimmest",textVariant:"small",date:n.updated,live:!0})]}):null}function y(e){var n=e.onClick,t=(0,o.useRef)(Date.now());return(0,i.FD)(d.ui,{elevated:!0,tag:"button",css:m.item,onClick:n,children:[(0,i.Y)(p.EY,{color:"dimmer",children:"New chat"}),(0,i.Y)(f.Dc,{textColor:"dimmest",textVariant:"small",date:t.current,live:!0})]})}},13310:(e,n,t)=>{"use strict";t.d(n,{B:()=>u});var r=t(94086),i=t(30758),o=t(24955),a=t(10168),l=t(32842),s=t(40889),c=(0,a.x)({codeText:[l.wp.font.code]});function u(e){var n=e.summary,t=e.variant,a=e.color,l=e.hover,u=(0,i.useMemo)(function(){return function(e){for(var n,t=/`([^`]+)`/g,r=[],i=0;null!==(n=t.exec(e));)i<n.index&&r.push({text:e.substring(i,n.index),isCode:!1}),r.push({text:n[1],isCode:!0}),i=n.index+n[0].length;return i<e.length&&r.push({text:e.substring(i),isCode:!1}),r}(n)},[n]);return(0,r.Y)(s.EY,{multiline:!1,variant:t,color:a,css:l?{"&:hover":{color:o.LU.foregroundDefault}}:void 0,children:u.map(function(e,n){return e.isCode?(0,r.Y)("span",{css:c.codeText,children:e.text},n):(0,r.Y)(i.Fragment,{children:e.text},n)})})}},22596:(e,n,t)=>{"use strict";t.d(n,{J:()=>i,h:()=>r});var r=680,i=30},46598:(e,n,t)=>{"use strict";t.d(n,{F:()=>i});var r=t(84321);function i(e){var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=e.state===r.qOk.IN_PROGRESS,i=n.agentTimelineEventContents,o=i.toolName,a=i.toolData;if("screenshot_tool"===o)return"".concat(t?"Taking":"Took"," a screenshot");switch(null==a?void 0:a.$kind){case"deployData":return"Suggested deploying project";case"deployConfigData":return"Configured Deployment";case"createPostgresqlDatabaseData":return"Created PostgreSQL database";case"sqlExecutionData":return"".concat(t?"Executing":"Executed"," SQL query `").concat(a.sqlExecutionData.command,"`");case"fileEditData":return"".concat(t?"Editing":"Edited"," `").concat(a.fileEditData.filePath,"`");case"createFileData":return"".concat(t?"Creating":"Created"," `").concat(a.createFileData.filePath,"`");case"readFileData":return"".concat(t?"Reading":"Opened"," `").concat(a.readFileData.filePath,"`");case"readDirData":return"".concat(t?"Reading":"Opened"," `").concat(a.readDirData.path,"` directory");case"shellExecutionData":return"".concat(t?"Executing":"Executed"," `").concat(a.shellExecutionData.command,"`");case"toolchainInstallData":return"".concat(t?"Adding":"Added"," support for ").concat(a.toolchainInstallData.modules.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerInstallData":var l=a.packagerInstallData.inputPackages;if(!t){if(0===l.length)return"Installed dependencies";return"Installed ".concat(l.map(function(e){return"`".concat(e,"`")}).join(", "))}if(0===l.length)return"Installing packages...";if(0===l.length)return"Installing dependencies...";return"Installing ".concat(l.map(function(e){return"`".concat(e,"`")}).join(", "),"...");case"packagerUninstallData":var s=a.packagerUninstallData.inputPackages;return"Uninstalled ".concat(s.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyInstallData":return"Installed ".concat(a.systemDependencyInstallData.deps.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyUninstallData":return"Uninstalled ".concat(a.systemDependencyUninstallData.deps.join(", "));case"searchFileData":return"".concat(t?"Searching":"Searched",' "').concat(a.searchFileData.filePath,'" for "').concat(a.searchFileData.query,'"');case"searchFilesystemData":return"".concat(t?"Searching":"Searched",' for "').concat(a.searchFilesystemData.queryDescription,'"');case"screenshotData":return"".concat(t?"Taking":"Took"," a screenshot");case"agentPlanStepBegin":case"planProgressData":return null;case"presentResultsToolData":return"Presented results to the user";case"workflowsStartToolData":return"Started `".concat(a.workflowsStartToolData.name,"`");case"workflowsRestartToolData":return"Restarted `".concat(a.workflowsRestartToolData.name,"`");case"workflowsStopToolData":return"Stopped `".concat(a.workflowsStopToolData.name,"`");case"workflowsSetRunConfigToolData":var c=a.workflowsSetRunConfigToolData,u=c.name,d=c.command;if(t||0===u.length||0===d.length)return"Configuring run...";return"Configured `".concat(u,"` to run `").concat(d,"`");case"workflowsRemoveRunConfigToolData":return"Removed configuration for `".concat(a.workflowsRemoveRunConfigToolData.name,"`");default:return t?"Working...":"Did something..."}}},89851:(e,n,t)=>{"use strict";t.d(n,{G:()=>r});var r=function(e){return e.Starter="starter",e.Paid="paid",e}({})},60419:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(66622),i=t(30758),o=t(55195),a=t(84321),l=t(51439),s=t(66061),c=t(39651),u=t(29665),d=t(84504),p=t(79261),f=t(75165),h=t(20387),m=function(e){return e[e.ERROR=0]="ERROR",e[e.NOT_A_REPLAY=1]="NOT_A_REPLAY",e[e.DRIZZLE_SETUP=2]="DRIZZLE_SETUP",e[e.STARTING_WORKFLOW=3]="STARTING_WORKFLOW",e[e.DONE=4]="DONE",e}(m||{});function g(){var e=(0,r._)((0,i.useState)(1),2),n=e[0],t=e[1],m=(0,i.useRef)(!1),g=(0,i.useRef)(!1),v=(0,i.useRef)(null),w=(0,f.eg)(),y=(0,l.NC)(),b=(0,s.J2)(y.replay.state),S=(0,s.J2)(y.replay.playing),Y=(0,h.g3)(),A=(0,c.A)().showError,C=(0,u.I)(function(e){return function(){return e.agentReplays.drizzlePushIfNeeded.rpc({})}},[]);(0,i.useEffect)(function(){S?(0,p.PR)(!0):m.current&&setTimeout(function(){(0,p.PR)(!1)}),!m.current&&S?(m.current=!0,(0,p.pI)({action:"agent_replay_started",forceTracking:!0})):m.current&&!S&&(m.current=!1,(0,p.pI)({action:"agent_replay_completed",forceTracking:!0}))},[S]),(0,i.useEffect)(function(){return function(){(0,p.PR)(!1)}},[]),(0,i.useEffect)(function(){if(!g.current)switch(n){case 0:g.current=!0,(0,p.PR)(!1),A("Failed to setup. Your app may not work as expected."),v.current&&(o.Cp(v.current),v.current=null);break;case 1:w&&null!==b&&t(2);break;case 2:if(!C)break;g.current=!0,C().then(function(e){g.current=!1,e.ok?t(3):(v.current=Error("".concat(e.payload.code,": ").concat(e.payload.message)),t(0))},function(e){g.current=!1,v.current=e,t(0)});break;case 3:if(!w){t(4);break}if(!Y||!Y.run)break;g.current=!0;var e=Y.run(d.QG.AGENT_RUN);if(!e){g.current=!1,t(0);break}e.then(function(e){g.current=!1,e.ok?t(4):(v.current=Error("".concat(e.payload.code,": ").concat(e.payload.message)),t(0))},function(e){g.current=!1,v.current=e,t(0)});break;case 4:b===a.Rq4.ERROR&&t(0)}},[n,w,b,Y,C,A])}},18525:(e,n,t)=>{"use strict";t.d(n,{n:()=>c});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(30758),s=t(40889);function c(e){var n=e.text,t=(0,o._)(e,["text"]),c=(0,l.useRef)(null),u=(0,l.useRef)(n);return(0,l.useEffect)(function(){if(u.current!==n){var e=n.length;!function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){var i=c.current;i&&(i.textContent=n.slice(0,r),r!==e&&t(r+1))})}()}},[n]),(0,l.useEffect)(function(){u.current=n},[n]),(0,a.Y)(s.EY,(0,i._)((0,r._)({},t),{ref:c,children:n}))}},14636:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(20837),i=t(43952),o=t(94086),a=t(42022);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M8.09945 1.00012C9.8352 1.00012 11.2423 2.40723 11.2423 4.14298L11.2422 4.16743C11.2554 6.75801 13.358 8.85436 15.951 8.85727L15.9566 8.85726C17.6924 8.85726 19.0995 10.2644 19.0995 12.0001C19.0995 13.7359 17.6924 15.143 15.9566 15.143C13.3611 15.143 11.2554 17.2404 11.2422 19.8328C11.2423 19.841 11.2423 19.8491 11.2423 19.8573C11.2423 21.593 9.8352 23.0001 8.09945 23.0001C6.3637 23.0001 4.9566 21.593 4.9566 19.8573C4.9566 18.1215 6.3637 16.7144 8.09945 16.7144C8.10155 16.7144 8.10365 16.7144 8.10575 16.7144C10.7064 16.7109 12.8136 14.6016 12.8136 12.0001C12.8136 9.39653 10.703 7.2859 8.09939 7.28584C6.36367 7.28581 4.9566 5.87871 4.9566 4.14298C4.9566 2.40723 6.3637 1.00012 8.09945 1.00012Z",fill:"url(#paint0_linear_434_35354)"}),(0,o.Y)("path",{d:"M11.2423 12.0001C11.2423 10.2644 9.83518 8.85729 8.09943 8.85729C6.36368 8.85729 4.95657 10.2644 4.95657 12.0001C4.95657 13.7359 6.36368 15.143 8.09943 15.143C9.83518 15.143 11.2423 13.7359 11.2423 12.0001Z",fill:"url(#paint1_linear_434_35354)"}),(0,o.FD)("defs",{children:[(0,o.FD)("linearGradient",{id:"paint0_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#69D9F0"}),(0,o.Y)("stop",{offset:"1",stopColor:"#0093B0"})]}),(0,o.FD)("linearGradient",{id:"paint1_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#69D9F0"}),(0,o.Y)("stop",{offset:"1",stopColor:"#0093B0"})]})]})]}))}},35863:(e,n,t)=>{"use strict";t.d(n,{x:()=>p});var r=t(94086),i=t(51439),o=t(10168),a=t(32842),l=t(93532),s=t(8367),c=t(68753),u="Connection to ".concat(i.BP," lost. Try refreshing the page."),d=(0,o.x)({root:[a.wp.px(8),a.wp.pb(8),{justifySelf:"end"}],errorBannerContainer:[a.wp.display.flex,a.wp.align.center,a.wp.flex.grow(1),a.wp.minHeight(32),a.wp.maxHeight(300),a.wp.overflow("auto")],errorBanner:[a.wp.minHeight("fit-content"),a.wp.p(8)]});function p(){return(0,r.Y)(s.S,{css:d.root,children:(0,r.Y)(s.S,{css:d.errorBannerContainer,justify:"center",children:(0,r.Y)(s.S,{css:d.errorBanner,children:(0,r.Y)(l.N,{icon:(0,r.Y)(c.A,{}),colorway:"red",text:u})})})})}},70904:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>_,Gw:()=>S,V2:()=>b});var r,i,o=t(72275),a=t(20837),l=t(43952),s=t(94086),c=t(50543),u=t(30758);t(84321);var d=t(51439);t(78452);var p=t(52757),f=t(24955),h=t(10168),m=t(2298),g=t(1478),v=t(32842),w=t(40889),y=t(8367),b=450,S=v.kL.min(b),Y=(0,p.i7)({"0%":{opacity:0},"100%":{opacity:1}}),A=(0,g.v)(["animationDelay","themeColor","themeColorOpacity10","themeColorOpacity20"]),C=A.styleTokens,x=A.cssVars;function _(e){var n=e.prompts,t=e.onClick,r=e.colorway;return(0,s.Y)(s.FK,{children:n.map(function(e,n){return(0,c.n)(D,(0,l._)((0,a._)({},e),{colorway:r,index:n,key:e.description,onClick:function(){return t(e)}}))})})}var k=(0,h.x)({root:[v.wp.width("100%"),v.wp.reset.button,m.b.filled,v.wp.borderRadius(4),v.wp.align.center,v.wp.p(6),v.wp.cursor.pointer,v.wp.align.start,v.wp.textAlign.left,v.wp.overflow("hidden"),(i={color:C.themeColor},(0,o._)(i,S,[v.wp.rowWithGap(6),v.wp.align.center]),(0,o._)(i,f.qo.interactiveBackground,C.themeColorOpacity10),(0,o._)(i,f.qo.interactiveBackgroundActive,C.themeColorOpacity20),(0,o._)(i,"opacity",0),(0,o._)(i,"animationName",Y),(0,o._)(i,"animationDuration","800ms"),(0,o._)(i,"animationFillMode","forwards"),(0,o._)(i,"animationTimingFunction","ease-out"),(0,o._)(i,"animationDelay",C.animationDelay),(0,o._)(i,"&.unsupported",(r={},(0,o._)(r,f.qo.interactiveBackground,f.LU.orangeDimmer),(0,o._)(r,f.qo.interactiveBackgroundActive,f.LU.orangeStronger),r)),i)],icon:[v.wp.display.none,(0,o._)({},S,[v.wp.display.inlineFlex])]});function D(e){(0,d.qK)();var n,t=void 0,r="teal"===e.colorway?f.LU.tealDefault:f.LU.blurpleDefault,i=function(e){return"color-mix(in srgb, ".concat(r," ").concat(100*e,"%, transparent)")};return(0,s.FD)(y.S,{className:"",css:k.root,onClick:e.onClick,style:(n={},(0,o._)(n,x.animationDelay,20*e.index+"ms"),(0,o._)(n,x.themeColor,r),(0,o._)(n,x.themeColorOpacity10,i(.1)),(0,o._)(n,x.themeColorOpacity20,i(.2)),n),children:[(0,s.FD)(y.S,{row:!0,gap:4,align:"center",children:[(0,s.Y)(y.S,{css:k.icon,children:(0,u.cloneElement)(e.icon,{size:16,color:r})}),e.title?(0,s.Y)(w.EY,{variant:"small",children:e.title}):null]}),(0,s.Y)(w.EY,{variant:"small",color:"dimmer",children:null!=t?t:e.description})]})}},97012:(e,n,t)=>{"use strict";t.d(n,{D8:()=>v,m2:()=>A,vc:()=>C});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(84321),s=t(10168),c=t(32842),u=t(40889),d=t(8367),p=t(18576),f=t(27640),h=t(83702),m=t(84962),g=new Map([[l.e3q.BASIC,p.A],[l.e3q.ADVANCED,f.A]]);function v(e){var n=e.model,t=(0,o._)(e,["model"]),i=g.get(n);return i?(0,a.Y)(i,(0,r._)({},t)):null}l.e3q.BASIC,l.e3q.ADVANCED;var w=new Map([[l.qRv.GENERATE,m.A],[l.qRv.TRANSFORM,m.A],[l.qRv.EXPLAIN,h.A],[l.qRv.REPLIT_DOCS,h.A]]),y=new Map([[l.qRv.GENERATE,"Generate"],[l.qRv.TRANSFORM,"Modify"],[l.qRv.EXPLAIN,"Explain"],[l.qRv.REPLIT_DOCS,"Ask replit.com"]]),b=new Map([[l.Z1T.GENERATE_CODE,m.A],[l.Z1T.TRANSFORM_CODE,m.A],[l.Z1T.EXPLAIN_CODE,h.A],[l.Z1T.DEBUGGER,h.A]]),S=new Map([[l.Z1T.GENERATE_CODE,"Generate"],[l.Z1T.TRANSFORM_CODE,"Modify"],[l.Z1T.EXPLAIN_CODE,"Explain"],[l.Z1T.DEBUGGER,"Debug"]]),Y=(0,s.x)({iconLabel:[c.wp.rowWithGap(4),c.wp.align.center]});function A(e){var n=e.intent,t=e.icon,o=e.text,l=w.get(n),s=y.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}function C(e){var n=e.type,t=e.icon,o=e.text,l=b.get(n),s=S.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}},49408:(e,n,t)=>{"use strict";t.d(n,{sx:()=>p});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  fragment AiChatMessageUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query AiChatMessageUserData($id: Int!) {\n    user(id: $id) {\n      ...AiChatMessageUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u);function p(e){var n=(0,r._)({},c,e);return a.I(d,n)}},541:(e,n,t)=>{"use strict";t.d(n,{H:()=>s});var r=t(94086),i=t(49408),o=t(81243),a=t(40889),l=t(8367);function s(e){var n,t,s,c,u,d,p,f=(0,i.sx)({variables:{id:e.id}}).data,h=null==f?void 0:f.user;return e.showAvatarOnly?(0,r.Y)(o.e,{size:24,username:null!==(n=null==h?void 0:h.username)&&void 0!==n?n:"",fullName:null!==(t=null==h?void 0:h.fullName)&&void 0!==t?t:"",src:null!==(s=null==h?void 0:h.image)&&void 0!==s?s:""}):(0,r.FD)(l.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(o.e,{size:24,username:null!==(c=null==h?void 0:h.username)&&void 0!==c?c:"",fullName:null!==(u=null==h?void 0:h.fullName)&&void 0!==u?u:"",src:null!==(d=null==h?void 0:h.image)&&void 0!==d?d:""}),(0,r.Y)(a.EY,{variant:"small",color:"dimmer",children:null!==(p=null==h?void 0:h.username)&&void 0!==p?p:""})]})}},47406:(e,n,t)=>{"use strict";t.d(n,{U:()=>w,w:()=>f});var r=t(72275),i=t(94086),o=t(30758),a=t(75362),l=t(20543),s=t(24955),c=t(73943),u=t(10168),d=t(1478),p=t(32842),f=40,h=(0,d.v)(["opacity"]),m=h.cssVars,g=h.styleTokens,v=(0,u.x)({fade:[p.wp.position.absolute,p.wp.top(-1),p.wp.left(0),p.wp.width("100%"),p.wp.height(f),p.wp.backgroundGradient(s.LU.surfaceBackground,"transparent"),{pointerEvents:"none",opacity:g.opacity,transitionProperty:"opacity",transitionDuration:c.Ds.duration,transitionTimingFunction:c.Ds.timingFunction}]});function w(e){var n=e.show,t=(0,o.useRef)(null);return(0,l.d)(t,null!=n?n:new a.N(!0),function(e){return(0,r._)({},m.opacity,e?"1":"0")}),(0,i.Y)("div",{ref:t,css:v.fade})}},50630:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,E:()=>u});var r=t(94086),i=t(24955),o=t(32842),a=t(40889),l=t(8367),s=t(48729);let c=function(e){var n=e.textVariant,t=e.showImage;return(0,r.FD)(l.S,{css:[o.wp.center,o.wp.textAlign.center,o.wp.px(16),o.wp.colWithGap(8),o.wp.flex.growAndShrink(1)],children:[(0,r.Y)(u,{textVariant:n}),t?(0,r.Y)(s.A,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(i.LU.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})};function u(e){var n=e.textVariant;return(0,r.FD)(a.EY,{variant:n,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.Y)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}},52750:(e,n,t)=>{"use strict";t.d(n,{T:()=>R});var r=t(20837),i=t(43952),o=t(66622),a=t(94086),l=t(30758),s=t(84321),c=t(51439),u=t(99655),d=t(82436),p=t(29454),f=t(80001),h=t(70904),m=t(38584),g=t(88859),v=t(39736),w=t(35584),y=t(10168),b=t(32842),S=t(95235),Y=t(31955),A=t(40889),C=t(8367),x=t(48729),_=t(83515),k=t(79653),D=t(86955),E=(0,y.x)({root:[b.wp.flex.growAndShrink(1),{overflowY:"auto"}],content:[b.wp.center,b.wp.colWithGap(16),b.wp.maxWidth(320),b.wp.px(8),b.wp.py(32),{textAlign:"center",margin:"auto"}]});function R(e){var n,t,c=(n=({sessionType:e.sessionType}).sessionType,t=(0,o._)((0,g.ql)(),1)[0],(0,l.useMemo)(function(){return n===s.dF3.CHAT?[{icon:(0,a.Y)(v.A,{}),description:"How does ".concat((0,m.U)(null!=t?t:"this code")," work?")},{icon:(0,a.Y)(v.A,{}),description:"What is causing the error in ".concat((0,m.U)(null!=t?t:"this code",{maxLength:20}),"?")},{icon:(0,a.Y)(v.A,{}),description:"What features should I consider next?"},{icon:(0,a.Y)(v.A,{}),description:"Please clean up the the code to be more readable."}]:[{icon:(0,a.Y)(v.A,{}),description:"Add a new feature. "},{icon:(0,a.Y)(v.A,{}),description:"Help me brainstorm ideas for new features. "},{icon:(0,a.Y)(v.A,{}),description:"Check my app for bugs. "}]},[t,n]));return(0,a.Y)(I,(0,i._)((0,r._)({},e),{promptSuggestions:c}))}function I(e){var n=e.titleContent,t=e.showIntroVideoCard,r=e.showPromptSuggestions,i=e.sessionType,m=e.onPromptSuggestionClick,g=e.promptSuggestions,v=e.footerContent,y=(0,u.m5)(),b=(0,o._)((0,l.useState)(!1),2),Y=b[0],x=b[1],D=(0,p.Z)("workspace-assistant-intro-video"),R=i===s.dF3.CHAT,I=R?c.BP:c.g$,F=R?(0,a.Y)(_.A,{size:48}):(0,a.Y)(f.l,{size:48});function L(){y?P(R?c.Wd:c.pF):x(!0),D.setAsDone()}return(0,a.FD)(C.S,{css:E.root,children:[(0,a.FD)(C.S,{css:E.content,children:[(0,a.Y)(C.S,{gap:8,align:"center",children:!t||D.isLoading||D.isDone?(0,a.FD)(a.FK,{children:[F,null!=n?n:(0,a.FD)(C.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(A.Y9,{level:1,variant:"subheadDefault",children:"New ".concat(I," Chat")}),(0,a.Y)(S.K0,{alt:"More info",onClick:L,children:(0,a.Y)(k.A,{})})]})]}):(0,a.Y)(T,{title:R?"Meet ".concat(c.BP):"What is ".concat(c.g$,"?"),imageSrc:"/public/images/ai/onboarding/meet-".concat(R?"assistant":"agent","-video-thumb.png"),onClick:L})}),(0,a.Y)(A.EY,{color:"dimmer",children:R?c.C3:c.RB}),void 0===r||r?(0,a.FD)(C.S,{gap:8,align:"center",children:[(0,a.Y)(A.EY,{color:"dimmest",variant:"small",children:"Try a prompt:"}),(0,a.Y)(h.Ay,{colorway:R?"teal":"blurple",onClick:function(e){var n,t=null!==(n=e.promptToFill)&&void 0!==n?n:e.description;(0,d.u4)(d.AZ.ASSISTANT_USED,{action:"prompt_suggestion_clicked",title:e.title}),null==m||m({intent:e.intent,text:t})},prompts:g})]}):null,v]}),y?null:(0,a.Y)(w.A,{paneType:i===s.dF3.CHAT?"ghostwriterChat":"agentChat",isOpen:Y,onClose:function(){return x(!1)}})]})}var F=(0,y.x)({root:[b.wp.position.relative,b.wp.flex.column,b.wp.center,b.wp.width(200),b.wp.height(110),b.wp.hover([b.wp.cursor.pointer])],title:[b.wp.position.absolute,b.wp.top(4),b.wp.left(8),b.wp.color.white],image:[b.wp.position.absolute,b.wp.top(0),b.wp.left(0),b.wp.right(0),b.wp.bottom(0)],icon:[b.wp.color.white]});function T(e){var n=e.title,t=e.imageSrc,r=e.onClick;return(0,a.FD)(Y.ui,{css:F.root,onClick:r,children:[(0,a.Y)(x.A,{alt:"Video thumbnail",src:t,css:F.image,layout:"fill"}),(0,a.Y)(A.Y9,{level:2,variant:"subheadDefault",css:F.title,children:n}),(0,a.Y)(D.A,{size:24,css:F.icon})]})}var P=function(e){window.open(e,"_blank")}},72123:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(13454),i=t(66622),o=t(5482),a=t(94086),l=t(29390),s=t(20837),c=t(45009),u=t(30632),d=t(43751);function p(){var e=(0,c._)(["\n  query AiSessionDebugInfoCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(51439),g=t(39651),v=t(83733),w=t(98734),y=t(24955),b=t(95235),S=t(37535),Y=t(67415);function A(e){var n,t,c,u=e.sessionId,p=e.sessionType,A=(0,v.A)(),C=(0,g.A)().showConfirm,x=(t=(0,v.A)(),c=(0,i._)((n=(0,s._)({},f,void 0),d._(h,n)),1)[0],(0,r._)(function(){var e,n,r,i,a,l,s,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,c()];case 1:if(r=null==(n=o.sent())?void 0:null===(e=n.data)||void 0===e?void 0:e.currentUser,!u||!r)return[2,""];return i=(0,m.Yd)(u,p),a=(0,m.nv)(t,u),l=(0,m.Ds)(u),[2,"\n User ID: ".concat(null!==(s=null==r?void 0:r.id)&&void 0!==s?s:"N/A","\n Username: ").concat(null!==(d=null==r?void 0:r.username)&&void 0!==d?d:"N/A","\n Repl ID: ").concat(null!=t?t:"N/A","\n Session ID: ").concat(null!=u?u:"N/A","\n \uD83D\uDD25 traceforge URL: ").concat(a,"\n LangSmith URL: ").concat(null!=i?i:"N/A","\n Temporal URL: ").concat(null!=l?l:"N/A","\n    ").trim()]}})}));return(0,a.Y)(S.in,{trigger:(0,a.Y)(b.K0,{alt:"[Staff] Debug tools",children:(0,a.Y)(Y.A,{color:y.LU.foregroundDimmer})}),children:(0,a.FD)(l.wn,{children:[(0,a.Y)(S.j,{text:"[Staff] Debug tools"}),(0,a.Y)(S.Dr,{label:"Copy debug info",onAction:(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,x()];case 1:return e=n.sent(),(0,w.A)(e),C("Copied debug info to clipboard"),[2]}})})}),(0,a.Y)(S.Dr,{href:(0,m.nv)(A,u),label:"Go to \uD83D\uDD25 traceforge",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Yd)(u,p),label:"Go to LangSmith",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Ds)(u),label:"Go to Temporal",target:"_blank"})]})})}},25264:(e,n,t)=>{"use strict";t.d(n,{DJ:()=>_,O3:()=>Y,Ui:()=>k,Ww:()=>b,_x:()=>x,eQ:()=>A,xd:()=>E});var r=t(20837),i=t(43952),o=t(16530),a=t(66622),l=t(94086),s=t(30758),c=t(26190),u=t(14349),d=t(24481),p=t(19346),f=t(55382),h=t(82402),m=t(10168),g=t(1478),v=t(32842),w=t(8367);function y(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=t[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){n=r+1;break}}}return n}var b=8,S=(0,g.v)(["topOffset"]),Y=S.cssVars,A=S.styleTokens,C=(0,m.x)({wrapper:{display:"grid",gridTemplateColumns:"1fr"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:A.topOffset,"& .xterm":[v.wp.py(b),v.wp.pl(b),v.wp.height("100%"),v.wp.overflow("hidden")],"& .xterm-viewport":[v.wp.overflow("hidden")]},terminalForHistoricalOutputWrapper:[v.wp.overflow("hidden")]});function x(e){var n=e.autoFocus,t=e.wrapperResizeRef,a=e.xterm,c=e.bufferHeight,u=e.onInput,d=e.setOnMessage,p=e.onResizeTerminal,f=e.children,h=(0,o._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,s.useEffect)(function(){n&&a&&a.focus()},[a,n]),(0,s.useEffect)(function(){if(a){var e=a.onData(function(e){u&&u(e)}),n=a.onResize(function(){p&&p(a.getSize())});return function(){e.dispose(),n.dispose()}}},[a,u,p]),(0,s.useEffect)(function(){if(a)return d(function(e){return a.write(e)})},[d,a]),(0,l.Y)(w.S,{innerRef:t,children:(0,l.Y)(w.S,(0,i._)((0,r._)({},h),{css:C.wrapper,style:(0,r._)({height:c},h.style),children:f}))})}function _(e){var n=e.xtermRef,t=e.visibleHeight,a=e.maxHeight,s=(0,o._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,l.Y)(w.S,(0,i._)((0,r._)({innerRef:n,css:C.terminal},s),{style:(0,i._)((0,r._)({},s.style),{height:t,maxHeight:a})}))}function k(e){var n=e.maxHeight,t=e.openPane,r=(0,d.A)().fs,i=(0,s.useCallback)(function(e){return t({type:(0,p.QY)(e),data:e})},[t]),o=(0,s.useCallback)(function(e,n){return t({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[t]),l=(0,a._)((0,f.A)({autoFit:!1,size:{rows:10},openFile:i,listFiles:r.listFiles,openWebview:o,openPane:t}),2),h=l[0],m=l[1],g=(0,s.useMemo)(function(){return null==h?void 0:h._term},[h]),v=(0,a._)((0,s.useState)(function(){var e,n,t=null==g?void 0:g._core;return null!==(n=null==t?void 0:null===(e=t._renderService)||void 0===e?void 0:e.dimensions.css.cell.height)&&void 0!==n?n:16}),2),w=v[0],S=v[1];(0,s.useEffect)(function(){if(g){var e,n=null==g?void 0:g._core,t=null==n?void 0:null===(e=n._renderService)||void 0===e?void 0:e.onDimensionsChange(function(e){S(e.css.cell.height)});return function(){null==t||t.dispose()}}},[g]);var Y=(0,s.useMemo)(function(){return Math.floor((n-2*b)/w)},[n,w]),A=(0,a._)((0,s.useState)("normal"),2),C=A[0],x=A[1],_=(0,a._)((0,s.useState)(1),2),k=_[0],D=_[1],E=(0,a._)((0,s.useState)(1),2),R=E[0],I=E[1],F=(0,a._)((0,s.useState)(!1),2),T=F[0],P=F[1],L=(0,c.A)(k),U=(0,c.A)(R),N=(0,c.A)(C);(0,s.useEffect)(function(){if(g){var e=g.buffer.onBufferChange(function(e){x(e.type),"alternate"===e.type&&(D(Y),I(Y),P(!1))});return function(){e.dispose()}}},[g,Y]);var O=(0,s.useCallback)(function(){if(g){if("alternate"===N.current)D(Y);else{var e=y(g),n=e>Y;I(e),D(Math.min(e,Y)),P(n)}}},[g,Y,N]),M=(0,u.A)(function(e){var n=e.widthChanged;g&&h&&n&&(h.fit(),O())},{type:"debounce",wait:200});(0,s.useEffect)(function(){var e=function(){if(g&&"alternate"!==N.current){var e=y(g),n=Math.min(e,Y);e>U.current&&I(e),n>L.current&&D(n),e>Y&&P(!0)}};if(g){var n=[g.onLineFeed(e),g.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[g,L,N,U,Y]),(0,s.useEffect)(function(){if(g&&h){var e=h.getSize();e.rows!==Y&&g.resize(e.cols,Y),O()}},[g,h,Y,O]);var B=(0,s.useMemo)(function(){return Math.ceil((Math.min(k,R)+1)*w+2*b)},[k,R,w]),H=(0,s.useMemo)(function(){return Math.ceil(T?(R+1)*w+2*b:B)},[w,T,B,R]);return(0,s.useEffect)(function(){h&&h.fit()},[h,k,R]),{visibleHeight:B,visibleLines:k,bufferHeight:H,bufferLines:R,bufferMode:C,hasScrollback:T,wrapperResizeRef:M,xterm:h,xtermRef:m}}function D(){}function E(e){var n=e.output,t=e.maxHeight,r=k({maxHeight:t,openPane:e.openPane}),i=r.visibleHeight,o=r.bufferHeight,a=r.wrapperResizeRef,c=r.xterm,u=r.xtermRef,d=(0,s.useCallback)(function(e){return c&&(null==c||c.clear(),e(n)),D},[c,n]),p=(0,h.V)();return(0,l.Y)(w.S,{css:C.terminalForHistoricalOutputWrapper,style:{height:i,background:null==p?void 0:p.background},children:(0,l.Y)(x,{onInput:D,xterm:c,wrapperResizeRef:a,bufferHeight:o,setOnMessage:d,onResizeTerminal:D,children:(0,l.Y)(_,{xtermRef:u,visibleHeight:i,maxHeight:t})})})}},87189:(e,n,t)=>{"use strict";t.d(n,{F0:()=>e_,r9:()=>eY,o0:()=>eA,MC:()=>eS,B6:()=>ex});var r=t(13454),i=t(27189),o=t(5482),a=t(94086),l=t(30758),s=t(3274),c=t(51439),u=t(66144),d=t(16608),p=t(75163),f=t(41588),h=t(38028),m=t(70121),g=t(90997);function v(e){var n=e.selection,t=e.doc,r=n.ranges.map(function(e){return e.extend(t.lineAt(e.from).from,t.lineAt(e.to).to)});return u.OF.create(r)}var w=t(88741),y=t(92736),b=t(46572),S=t(98271),Y=t(50439),A=t(43198),C=t(60023),x=t(36601),_=t(63679),k=t(98734),D=t(21980),E=t(82436),R=t(55814),I=t(64595),F=t(24481),T=t(89090),P=t(83478),L=t(84321),U=t(53654);function N(e,n,t){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,U.an)(n);return{code:i,filePath:n,fileVersion:t,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o,referenceType:L.fDX.INLINE}}var O=t(29219),M=t(26205),B=t(80062),H=t(44603),z=t(30175),W=t(12867),G=t(74495),V=t(68062),j=t(30321),Z=t(24955),q=t(29895),K=t(20837),$=t(43952),J=t(42022);function Q(e){return(0,a.Y)(J.Ay,(0,$._)((0,K._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M7 3.75A1.25 1.25 0 0 0 5.75 5v14.543l5.814-4.153a.75.75 0 0 1 .872 0l5.814 4.153V5A1.25 1.25 0 0 0 17 3.75H7Zm-1.945-.695A2.75 2.75 0 0 1 7 2.25h10A2.75 2.75 0 0 1 19.75 5v16a.75.75 0 0 1-1.186.61L12 16.922 5.436 21.61A.75.75 0 0 1 4.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}var X=t(92578),ee=t(67415),en=t(89715),et=t(2459);function er(e){return(0,a.Y)(J.Ay,(0,$._)((0,K._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M2.25 5A2.75 2.75 0 0 1 5 2.25h8A2.75 2.75 0 0 1 15.75 5v.293A.749.749 0 0 1 16 5.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v.293A.749.749 0 0 1 19 8.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v8A2.75 2.75 0 0 1 19 21.75h-8A2.75 2.75 0 0 1 8.25 19c0-.088.015-.172.043-.25H8A2.75 2.75 0 0 1 5.25 16c0-.088.015-.172.043-.25H5A2.75 2.75 0 0 1 2.25 13V5Zm4.457 10.75a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V8A1.245 1.245 0 0 0 16 6.75a.749.749 0 0 1-.25-.043V13A2.75 2.75 0 0 1 13 15.75H6.707Zm3 3a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25v-8A1.245 1.245 0 0 0 19 9.75a.749.749 0 0 1-.25-.043V16A2.75 2.75 0 0 1 16 18.75H9.707ZM5 3.75c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"})}))}var ei=t(30846);function eo(e){return(0,a.Y)(J.Ay,(0,$._)((0,K._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M5.614 1.357a.75.75 0 0 1 1.03.257l8.872 14.788a3.25 3.25 0 1 1-1.286.772L5.357 2.386a.75.75 0 0 1 .257-1.03Zm12.772 0a.75.75 0 0 1 .257 1.029l-4.2 7a.75.75 0 1 1-1.286-.772l4.2-7a.75.75 0 0 1 1.029-.257Zm-7.5 12.5a.75.75 0 0 1 .257 1.029L9.77 17.174a3.25 3.25 0 1 1-1.286-.772l1.373-2.288a.75.75 0 0 1 1.029-.257ZM7.5 17.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Zm9 0a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Z",clipRule:"evenodd"})}))}var ea=t(10001),el=t(40904),es=t(53323),ec=t(47270),eu=t(90365),ed=t(83702),ep=t(40940),ef=t(39736),eh=t(85213),em=t(2209),eg=t(42838),ev=t(99413),ew=t(84659);function ey(e){var n=e.label,t=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:B.G2,data:{type:"action",label:n,icon:t,run:r,keyboardShortcut:i,dataCy:o}}}function eb(e){var n=e.view,t=e.mainSelection,r=e.codeReference;n.dispatch({selection:{anchor:t.to},effects:[m.L.of({id:(0,s.A)(),codeReference:r,type:"ghostwriterKillswitch"}),d.Lz.scrollIntoView(t.to,{y:"center"})]})}function eS(e){var n=e.path,t=(0,F.A)().fs,r=(0,_._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e,i){var o=e.state,a=o.doc,l=o.selection,c=o.lineBreak,p=a.lineAt(l.main.head);p.length&&e.dispatch({changes:{from:p.to,insert:c},selection:u.OF.cursor(p.to+1)});var f=t.getOTVersion(n),h=N(e.state,n,f);if((0,E.u4)(E.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r){eb({view:e,mainSelection:e.state.selection.main,codeReference:h});return}var g=e.state.selection.main.to;e.dispatch({selection:{anchor:g},effects:[m.L.of({id:(0,s.A)(),codeReference:h,type:"generateCode",source:i}),d.Lz.scrollIntoView(g,{y:"center"})]})},[n,t,r])}function eY(e){var n=e.path,t=(0,F.A)().fs,r=(0,_._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e,i){e.dispatch({selection:v(e.state)});var o=t.getOTVersion(n),a=N(e.state,n,o);if(r){eb({view:e,mainSelection:e.state.selection.main,codeReference:a});return}(0,E.u4)(E.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[m.L.of({id:(0,s.A)(),type:"transformCode",codeReference:a,source:i}),d.Lz.scrollIntoView(l,{y:"center"})]})},[n,t,r])}function eA(e){var n=e.path,t=(0,F.A)().fs,r=(0,_._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,l.useCallback)(function(e,i){e.dispatch({selection:v(e.state)});var o,a,l,u,p=t.getOTVersion(n),f=N(e.state,n,p);(0,E.u4)(E.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i});var h=e.state.selection.main.to-e.state.selection.main.from>c.a;if(h){a=(o={view:e,mainSelection:e.state.selection.main,codeReference:f}).view,l=o.mainSelection,u=o.codeReference,a.dispatch({selection:{anchor:l.to},effects:[m.L.of({id:(0,s.A)(),codeReference:u,type:"codeLengthExceeded"}),d.Lz.scrollIntoView(l.to,{y:"center"})]});return}if(r||h){eb({view:e,mainSelection:e.state.selection.main,codeReference:f});return}var g=e.state.selection.main.to;e.dispatch({selection:{anchor:g},effects:[m.L.of({id:(0,s.A)(),codeReference:f,type:"explainCode",source:i}),d.Lz.scrollIntoView(g,{y:"center"})]})},[t,n,r])}var eC=function(){var e=(0,G.Jn)("editor.action.saveFile");return(0,l.useCallback)(function(n){var t=[];return t.push(ey({label:"Save file",icon:(0,a.Y)(eg.A,{}),keyboardShortcut:e,run:function(){(0,A.F)(n)}})),t},[e])};function ex(e){var n,t,s,u,d,m,v,A,x,E,F,P,L,U,N,B,K,$=e.path,J=e.view,eg=(n=eS({path:$}),t=eY({path:$}),s=eA({path:$}),u=(0,G.Jn)(M.G.id),(0,l.useCallback)(function(e){var r=[],i=!e.state.selection.main.empty;return n&&!i&&r.push(ey({label:"Generate with "+c.BP,icon:(0,a.Y)(ep.A,{color:Z.LU.tealStronger}),keyboardShortcut:u,run:function(){n(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),i&&(r.push(ey({label:"Explain with "+c.BP,icon:(0,a.Y)(ed.A,{color:Z.LU.tealStronger}),dataCy:"context-menu-ExplainCode",run:function(){s(e,"action_menu")}})),r.push(ey({label:"Modify with "+c.BP,icon:(0,a.Y)(eu.A,{color:Z.LU.tealStronger}),keyboardShortcut:u,dataCy:"context-menu-TransformCode",run:function(){t(e,"action_menu")}}))),r},[n,t,s,u])),eb=(d=(0,G.Jn)("editor.action.startThread"),(0,l.useCallback)(function(e){var n=[];return n.push(ey({label:"Start thread",icon:(0,a.Y)(en.A,{}),keyboardShortcut:d,run:function(){(0,T.BR)(e)}})),n},[d])),ex=(0,l.useCallback)(function(e){var n=[ey({label:"Copy link to position",icon:(0,a.Y)(eh.A,{}),run:function(){var n=(0,C.Z3)(e.state.doc,e.state.selection.main.head),t=n.line,r=n.character,i=(0,j.Ax)({path:$,line:t+1,col:r});(0,k.A)(i)}}),ey({label:"Copy",icon:(0,a.Y)(ei.A,{}),keyboardShortcut:(0,V.FM)({cmdOrCtrl:!0,key:"c"}),run:function(){var n=(0,g.i)(e.state).text;(0,k.A)(n)}}),ey({label:"Cut",icon:(0,a.Y)(eo,{}),keyboardShortcut:(0,V.FM)({cmdOrCtrl:!0,key:"x"}),run:function(){var n=(0,g.i)(e.state),t=n.text,r=n.ranges;(0,k.A)(t),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&n.push(ey({label:"Paste",icon:(0,a.Y)(et.A,{}),keyboardShortcut:(0,V.FM)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var n,t;return(0,o.YH)(this,function(r){switch(r.label){case 0:n="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return n=r.sent(),[3,4];case 3:return t=r.sent(),D.vF.error("CodeMirror context menu paste failed",{message:t.message}),[2];case 4:return(0,Y.mJ)({filePath:$,view:e,clipboardText:n}),[2]}})})()}})),n},[$]),e_=(m=(0,R.A)($),v=(0,I.A)(m),A=(0,G.Jn)("editor.action.goToDefinition"),x=(0,G.Jn)("editor.action.goToTypeDefinition"),E=(0,G.Jn)("editor.action.goToImplementation"),F=(0,G.Jn)("editor.action.goToReferences"),P=(0,G.Jn)("editor.selection.allOccurrences"),L=(0,G.Jn)("editor.action.sourceActions"),U=(0,G.Jn)("editor.action.formatDocument"),N=(0,G.Jn)("editor.action.codeActions"),B=(0,G.Jn)("editor.action.renameSymbol"),(0,l.useCallback)(function(e){var n=[],t=v&&m.length;t&&v.isFindDefinitionSupported&&n.push(ey({label:"Go to definition",icon:(0,a.Y)(el.A,{}),dataCy:"context-menu-JumpToDefinition",run:function(n){(0,b.Fn)(e,n)},keyboardShortcut:A})),t&&v.isFindTypeDefinitionSupported&&n.push(ey({label:"Go to type definition",icon:(0,a.Y)(X.A,{}),run:function(){(0,b.fS)(e)},keyboardShortcut:x})),t&&v.isFindImplementationSupported&&n.push(ey({label:"Go to implementation",icon:(0,a.Y)(ew.A,{}),run:function(){(0,b.M9)(e)},keyboardShortcut:E})),t&&(v.isFindDefinitionSupported||v.isFindReferencesSupported)&&n.push(ey({label:"Show references",icon:(0,a.Y)(Q,{}),keyboardShortcut:F,run:function(){(0,y.y)(e)}})),n.push(ey({label:"Find in Repl",icon:(0,a.Y)(ev.A,{}),run:function(){var n=(0,g.i)(e.state).text;(0,O.zw)(e.state,{pane:{type:"searchReplace",data:{initialQuery:n}}})}})),t&&v.isRenameSupported&&n.push(ey({label:"Rename all occurrences",icon:(0,a.Y)(ea.A,{}),keyboardShortcut:B,run:function(){(0,S.C)(e)}})),e.state.facet(f.hb)&&n.push(ey({label:"Format document",icon:(0,a.Y)(ec.A,{}),keyboardShortcut:U,run:function(){(0,f.BD)(e)}})),!e.state.selection.main.empty&&e.state.facet(h.Aq)&&n.push(ey({label:"Format selection",icon:(0,a.Y)(ec.A,{}),run:function(){(0,f.vl)(e)}})),n.push(ey({label:"Select all occurrences",icon:(0,a.Y)(er,{}),keyboardShortcut:P,run:function(){(0,T.Gd)(e)}}));var r=void 0!==e.state.field(p.ZP,!1);return t&&r&&n.push(ey({label:"Toggle breakpoint",icon:(0,a.Y)(ee.A,{}),run:function(){(0,T._P)(e)}})),t&&v.isCodeActionsSupported&&(v.isSourceActionsSupported&&n.push(ey({label:"Source actions",icon:(0,a.Y)(es.A,{}),keyboardShortcut:L,run:function(){(0,w._H)(e)}})),n.push(ey({label:"More actions",icon:(0,a.Y)(ef.A,{}),keyboardShortcut:N,run:function(){(0,w.w1)(e,{force:!0})}}))),n},[v,m,P,L,A,x,E,F,B,U,N])),ek=(K=(0,z.Zp)(W.P.EditorContextMenu),(0,l.useCallback)(function(e){var n=[];return n.push({data:{type:"group",key:"extensions"},commands:(0,r._)(function(){var n;return(0,o.YH)(this,function(t){switch(t.label){case 0:var i;return n=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(K.map((i=(0,r._)(function(e){var t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,e.create({path:n})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,H.l)(t,{path:n})]}})}),function(e){return i.apply(this,arguments)})))];case 1:return[2,t.sent().filter(Boolean)]}})})}),n},[K])),eD=eC(),eE=(0,_._P)({controlName:"flag-draft-buffers"});return(0,l.useCallback)(function(){var e=J?[{data:{type:"context",label:c.BP,icon:(0,a.Y)(q.A,{})},commands:function(){return eg(J)}},{data:{type:"context",label:"Code actions",icon:(0,a.Y)(ef.A,{})},commands:function(){return e_(J)}}].concat((0,i._)(eE?[{data:{type:"context",label:"File actions",icon:(0,a.Y)(es.A,{})},commands:function(){return eD(J)}}]:[]),[{data:{type:"context",label:"Social",icon:(0,a.Y)(en.A,{})},commands:function(){return eb(J)}},{data:{type:"context",label:"Clipboard",icon:(0,a.Y)(et.A,{})},commands:function(){return ex(J)}},{data:{type:"context",label:"Extensions",icon:(0,a.Y)(em.A,{})},commands:function(){return ek({view:J,filePath:$})}}]):[];return{data:{type:"context",label:"Search actions",icon:(0,a.Y)(ev.A,{})},commands:function(){return e}}},[J,eg,e_,eb,ex,eD,$,ek,eE])}var e_=new x.k(function(e,n,t){return e?null:[(0,P.M)(n),d.Lz.domEventHandlers({contextmenu:function(e,n){var r=e.clientX,i=e.clientY,o=n.state.selection.main,a=n.posAtCoords({x:r,y:i}),l=n.state.doc.length,s=null===a?l:a;if(s<o.from||s>o.to){var c=u.OF.cursor(s);n.dispatch({selection:c})}return t(e),!0}})]})},45354:(e,n,t)=>{"use strict";t.d(n,{U:()=>em});var r,i=t(66622),o=t(94086),a=t(30758),l=t(20837),s=t(45009),c=t(30632),u=t(72813);function d(){var e=(0,s._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d());function h(e){var n=(0,l._)({},p,e);return u.I(f,n)}var m=t(66144),g=t(60225),v=t(5805),w=t(82845),y=t(53654),b=t(31909),S=t(82436),Y=t(21374),A=t(4723),C=t(72275),x=t(76396),_=t(52757),k=t(73943),D=t(2298),E=t(32842),R=t(40889),I=t(8367),F=t(14753),T=I.D.button;function P(e){var n=e.name,t=e.children,r=e.onClick;return(0,o.FD)(T,{onClick:function(){return r()},css:[D.b.nofill,E.wp.p(8),E.wp.focusRing,E.wp.textAlign.left],children:[(0,o.Y)(R.EY,{variant:"subheadDefault",css:E.wp.pb(16),multiline:!1,children:n}),(0,o.Y)(I.S,{css:[E.wp.backgroundColor.backgroundDefault,E.wp.p(8),E.wp.borderRadius(8)],children:t})]})}var L="@media (min-width: ".concat(k.LO.tabletMax,"px)"),U=(0,_.AH)([E.wp.colWithGap(16),(0,C._)({},L,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function N(e){var n=e.children;return(0,o.Y)(I.S,{css:[(0,C._)({},L,[E.wp.rowWithGap(16)])],children:n})}function O(e){var n=e.mainFile,t=e.examples,r=e.onSelect;return(0,o.FD)(I.S,{gap:24,children:[(0,o.Y)(R.Y9,{level:1,variant:"headerDefault",children:"Code examples"}),(0,o.Y)(R.EY,{children:"Get started with some program examples."}),(0,o.FD)(N,{css:[E.wp.colWithGap(16)],children:[(0,o.Y)(I.S,{css:U,children:t.slice(0,(t.length+1)/2).map(function(e){return(0,o.Y)(P,{name:e.name,onClick:function(){return r(e)},children:(0,o.Y)(x.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,o.Y)(I.S,{css:U,children:t.slice((t.length+1)/2).map(function(e){return(0,o.Y)(P,{name:e.name,onClick:function(){return r(e)},children:(0,o.Y)(x.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function M(e){var n=e.filePath,t=e.language,r=e.onSelect,i=h({variables:{language:t}}),a=i.data,l=i.loading,s=i.error;if(l)return(0,o.Y)(I.S,{css:[E.wp.pt(32),E.wp.pb(32)],gap:0,justify:"center",align:"center",children:(0,o.Y)(F.A,{})});if(s)return(0,o.Y)(I.S,{css:[E.wp.pt(32),E.wp.pb(32)],gap:0,justify:"center",align:"center",children:s.message});var c=(null==a?void 0:a.languageExamples.__typename)==="LanguageExamples"?a.languageExamples.examples:null;return(null==c?void 0:c.length)?(null==c?void 0:c.length)?(0,o.Y)(O,{mainFile:n,examples:c,onSelect:r}):(0,o.Y)(I.S,{css:[E.wp.pt(32),E.wp.pb(32)],gap:0,justify:"center",align:"center",children:(0,o.FD)(R.EY,{children:["Sorry, this language doesnt have any examples. Want to add some? Contact us at ",(0,o.Y)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var B=t(78542),H=t(96489),z=t.n(H),W=t(16608),G=t(2814),V=t(39113),j=t(84341),Z=t(76008),q=t(36601),K=t(5934),$=t(74495),J=t(24955),Q=(0,t(10168).x)({root:[E.wp.p(16),E.wp.align.center,E.wp.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[E.wp.reset.button,E.wp.rowWithGap(6),E.wp.align.center,E.wp.color.foregroundDimmest,E.wp.cursor.pointer,{fontFamily:J.LU.fontFamilyDefault,"*":{borderColor:J.LU.foregroundDimmest,color:J.LU.foregroundDimmest},":hover *":{borderColor:J.LU.foregroundDefault,color:J.LU.foregroundDefault}}]}),X={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},ee=W.Lz.theme((r={},(0,C._)(r,".".concat(X.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,C._)(r,".".concat(X.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),r)),en=function(){function e(n){(0,B._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.ctas,t=e.view,r=e.width,i=(0,Z.J)((0,o.Y)(I.S,{css:Q.root,children:n.map(function(e){return(0,o.FD)(I.S,{css:Q.button,onClick:function(){return e.onClick(t)},children:[(0,o.FD)(I.S,{row:!0,gap:4,children:[e.icon,(0,o.Y)(R.EY,{variant:"small",children:e.text})]}),e.shortcut?(0,o.Y)($._y,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=X.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},n.eq=function(e){return z()(e.options,this.options)},e}(),et=new q.k(function(e){var n=function(e){var n;return!(e.doc.length>0||e.field(V.z)||(null===(n=e.field(j.dz,!1))||void 0===n?void 0:n.size)||e.field(K.dg,!1))},t=m.sU.define({create:n,update:function(e,t){return n(t.state)}}),r=(0,W.qd)({above:!0,class:X.layer,update:function(e){return(0,G.$H)(e,t)},markers:function(n){if(!n.state.field(t,!1))return[];var r=n.dom.getBoundingClientRect();return[new en({ctas:e,width:Math.round(n.contentDOM.getBoundingClientRect().right-r.left),view:n})]}});return[ee,t,r]}),er=t(29219),ei=t(26205),eo=t(43740),ea=t(76985),el=t(40940),es=t(1763),ec=t(84659);function eu(e){var n=e.cta,t=e.version;(0,S.u4)(S.AZ.EDITOR_EMPTY_STATE_CLICKED,{cta:n,version:t})}var ed=m.Pe.define(),ep=m.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,v.C)(n,ed,function(e){t=e.value}),t}}),ef=g.X.from(ep,function(e){if(!e)return null;var n=e.language,t=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:ed.of(null)})};return(0,o.Y)(ea.a,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,o.Y)(eg,{onRequestClose:r,language:n,filePath:t})})}}}),eh=[ep,ef];function em(e){var n,t,r,i,l,s=e.isMobile,c=e.filePath,u=e.generateCode,d=(0,$.Jn)(ei.G.id),p=null!==(i=null===(n=w.Jh.from(c))||void 0===n?void 0:n.id)&&void 0!==i?i:null,f=(0,b.f)().isTeamWithAiDisabled,m=h({variables:{language:p},skip:!p}).data,g=(null!==(l=null==m?void 0:null===(r=m.languageExamples)||void 0===r?void 0:null===(t=r.examples)||void 0===t?void 0:t.length)&&void 0!==l?l:0)>=1,v=(0,a.useMemo)(function(){var e=[];return(0,y.e$)(c)||f||e.push({icon:(0,o.Y)(el.A,{}),text:"Generate Code with AI",shortcut:s?void 0:d,onClick:function(e){eu({cta:"generate",version:"new"}),u(e,"shortcut")}}),p&&g&&e.push({icon:(0,o.Y)(ec.A,{}),text:"Start with a code example",onClick:function(e){eu({cta:"examples",version:"new"}),e.dispatch({effects:ed.of({language:p,filePath:c})})}}),e.push({icon:(0,o.Y)(es.A,{}),text:"Add powerful Integrations",onClick:function(e){(0,er.zw)(e.state,{pane:{type:"integrations"},secondary:!0}),eu({cta:"integrations",version:"new"}),(0,S.u4)(S.AZ.TOOL_OPENED,{source:"fileEditorEmptyState",tool:"integrations"})}}),e},[c,f,p,g,s,d,u]);return[et.use(v),eh]}function eg(e){var n=e.onRequestClose,t=e.language,r=e.filePath,l=(0,A.Os)(Y.C.id,Y.j.Examples),s=(0,A.Os)(Y.C.id,Y.j.Editor),c=(0,i._)((0,a.useState)(!1),2),u=c[0],d=c[1],p=(0,eo.A)(r),f=(0,a.useRef)(null==l?void 0:l.isActive),h=(0,a.useRef)();h.current=null==l?void 0:l.isActive;var m=(0,a.useRef)(null==l?void 0:l.goto);return(m.current=null==l?void 0:l.goto,(0,a.useEffect)(function(){return function(){var e;h.current&&(null===(e=m.current)||void 0===e||e.call(m,Y.j.Editor))}},[]),(0,a.useEffect)(function(){if((null==s?void 0:s.isActive)&&!f.current){if(!u){d(!0);return}s.goto(Y.j.Examples)}},[s,n,u]),(0,a.useEffect)(function(){if(null==l?void 0:l.isActive){f.current=!0;return}f.current&&n(null)},[n,null==l?void 0:l.isActive]),p)?(0,o.Y)("div",{ref:null==l?void 0:l.tourRef,children:(0,o.Y)(M,{filePath:r,language:t,onSelect:function(e){p({code:e.code,insertAt:0}),n({exampleName:e.name})}})}):(0,o.Y)("div",{children:"Please make sure you have a file open"})}},26205:(e,n,t)=>{"use strict";t.d(n,{G:()=>X,C:()=>ee});var r,i=t(94086),o=t(30758),a=t(51439),l=t(16608),s=t(78542),c=t(72275),u=t(20837),d=t(43952),p=t(96489),f=t.n(p),h=t(66144),m=t(2814),g=t(39113),v=t(76008),w=t(5805),y=t(36601),b=t(44087),S=t(54191),Y=t(74495),A=t(79672),C=t(24955),x=t(10168),_=t(2298),k=t(1478),D=t(32842),E=t(31955),R=t(40889),I=t(65599),F=t(8367),T=t(73128),P=(0,k.v)(["opacity","transform"]),L=P.cssVars,U=P.styleTokens,N=[D.wp.display.flex,D.wp.reset.button,D.wp.cursor.pointer,D.wp.center,_.b.nofill,D.wp.height("100%"),D.wp.borderRadius(0)],O=[N,D.wp.width(28),{"& svg":D.wp.display.block}],M=(0,x.x)({root:[D.wp.borderRadius(6),D.wp.border({color:C.LU.outlineDefault}),D.wp.position.relative,D.wp.height(30),{opacity:U.opacity,transform:U.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:O,button:[N,D.wp.rowWithGap(4),D.wp.align.center,D.wp.pl(4),D.wp.pr(6),D.wp.flex.growAndShrink(1),D.wp.border({direction:"right",color:C.LU.outlineDefault}),{fontFamily:C.LU.fontFamilyDefault,"*":{color:C.LU.foregroundDimmer},":hover *":{color:C.LU.foregroundDefault},".shortcut":{color:C.LU.foregroundDimmest},":hover .shortcut":{color:C.LU.foregroundDimmer}}],iconButton:[O,D.wp.border({direction:"right",color:C.LU.outlineDefault})]}),B=new v.E(function(e){var n,t=e.controls,r=e.verticalPlacement,a=e.onMoreClick,l=(0,o.useRef)(null),s=(0,S.vm)(),p=(0,A.zg)();(0,o.useEffect)(function(){var e;p(),(0,b.U)(l,(e={},(0,c._)(e,L.opacity,"1"),(0,c._)(e,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(C.LU.space4,"))")),e))},[r,p]);var f=(0,o.useRef)((0,A.Nf)());return(0,i.FD)(E.ui,{innerRef:l,elevated:!0,css:M.root,align:"stretch",row:!0,style:(n={},(0,c._)(n,L.opacity,"0"),(0,c._)(n,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(C.LU.space16,"))")),n),children:[t.map(function(e){if(f.current){var n=(0,i.FD)(F.S,{row:!0,gap:2,align:"center",children:[(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.Y)(R.EY,{variant:"small",className:"shortcut",color:"dimmest",children:(0,Y.LH)(e.shortcut,s)}):null]});return(0,i.Y)(I.m_,{tooltip:n,children:function(n,t){return(0,i.Y)(F.S,(0,d._)((0,u._)({},n),{innerRef:t,css:M.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.FD)(F.S,{css:M.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.FD)(R.EY,{variant:"small",className:"shortcut",children:["(",(0,Y.LH)(e.shortcut,s),")"]}):null]},e.text)}),a?(0,i.Y)(F.S,{"aria-label":"More",css:M.moreButton,onClick:function(e){var n=(l.current||e.currentTarget).getBoundingClientRect();a({top:n.top,right:n.right})},tag:"button",children:(0,i.Y)(T.A,{size:16})}):null]})}),H={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},z=l.Lz.theme((r={},(0,c._)(r,".".concat(H.layer),{width:"100%"}),(0,c._)(r,".".concat(H.dom),{position:"absolute"}),r)),W=function(){function e(n){(0,s._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.controls,t=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=B.create({controls:n,onMoreClick:t,verticalPlacement:o});return a.className=H.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},n.eq=function(e){return f()(e.options,this.options)},e}(),G=h.Pe.define(),V=h.sU.define({create:function(){return null},update:function(e,n){var t;return!n.state.selection||(null===(t=n.state.selection)||void 0===t?void 0:t.main.empty)?null:((0,w.C)(n,G,function(n){e=n.value}),e)}}),j=h.sU.define({create:function(e){return!e.selection.main.empty},update:function(e,n){return!n.state.selection.main.empty}}),Z=l.Z9.define(function(e){var n=function(){var n=e.state.selection.main;e.dispatch({effects:G.of(n.empty?null:Date.now())})},t=function(e){"Shift"===e.key&&n()},r=function(){document.addEventListener("mouseup",n),document.addEventListener("keyup",t)},i=function(){document.removeEventListener("mouseup",n),document.removeEventListener("keyup",t)};return{update:function(e){(0,m.$H)(e,j)&&(e.state.field(j)?r():i())},destroy:i}}),q=new y.k(function(e){return[z,(0,l.qd)({above:!0,class:H.layer,update:function(e){return(0,m.$H)(e,g.z,V)},markers:function(n){if(!n.hasFocus)return[];var t=n.state.field(V)?n.state.selection.main:null;if(!t||n.state.field(g.z,!1))return[];var r=function(e,n){for(var t=Math.min(n.from,n.to),r=Math.max(n.from,n.to),i=null;t<=r;){var o=e.lineAt(t);t=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(n.state.doc,t);if(!r)return[];var i=n.coordsAtPos(r.to);if(!i)return[];var o=n.lineBlockAt(Math.min(t.anchor,t.head)),a=n.dom.getBoundingClientRect(),l=n.contentDOM.getBoundingClientRect(),s=o.top+n.documentPadding.top-30,c=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(s<n.scrollDOM.scrollTop){var d=n.lineBlockAt(t.to);s=d.top+d.height,u="bottom"}return[new W({top:s,align:c,controls:e.controls(n),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),j,V,Z]}),K=t(31909),$=t(68062),J=t(83702),Q=t(84962),X={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,$.FM)({cmdOrCtrl:!0,key:"i"})};function ee(e){var n=e.editCode,t=e.explainCode,r=e.generateCode,s=e.onMoreClick,c=(0,K.f)().isTeamWithAiDisabled,u=(0,Y.Jn)(X.id),d=(0,o.useMemo)(function(){if(!u)return[];var e=Array.isArray(u)?u.join(" "):u;return l.w4.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):n(e,"shortcut"),!0}}])},[u,r,n]),p=(0,o.useMemo)(function(){return{controls:function(e){return c?[]:[{text:"Modify with "+a.BP,icon:(0,i.Y)(Q.A,{size:16,color:C.LU.blurpleStronger}),onClick:function(){return n(e,"highlight")},shortcut:u},{text:"Explain with "+a.BP,icon:(0,i.Y)(J.A,{size:16,color:C.LU.blurpleStronger}),onClick:function(){return t(e,"highlight")}}]},onMoreClick:s}},[n,t,s,u,c]),f=q.use(p);return(0,o.useMemo)(function(){return[f,d]},[f,d])}},58382:(e,n,t)=>{"use strict";t.d(n,{U:()=>d});var r=t(13454),i=t(5482),o=t(77119),a=t(53654),l=t(94423),s=t(96367),c=RegExp("_(?<num>\\d+)$");function u(){return(u=(0,r._)(function(e,n){var t,r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,a._6)(n),[4,e.readDir(t||s.Dl)];case 1:if((r=i.sent()).error)return[2,n];return l=(o=function(e){if(r.children.find(function(n){return"FILE"===n.type&&n.filename===e})){var n,t=(0,a.J)(e),i=(0,a.an)(e),l=t.match(c);if(null==l?void 0:null===(n=l.groups)||void 0===n?void 0:n.num){var s=Number(l.groups.num);return o("".concat(t.replace(c,""),"_").concat(s+1,".").concat(i))}return o("".concat(t,"_2.").concat(i))}return e})((0,a.WP)(n)),[2,t?t+"/"+l:l]}})})).apply(this,arguments)}var d=function(){var e=(0,r._)(function(e,n,t){var r,s,c,d,p,f;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=encodeURI(e.name),[4,function(e,n){return u.apply(this,arguments)}(n,(s=(0,a._6)(t))?s+"/"+r:r)];case 1:return c=i.sent(),[4,(0,l.g6)(e)];case 2:return d=i.sent(),[4,n.writeFile(c,o.A.from(d))];case 3:return i.sent(),p=(0,a.J)(e.name),f=(0,a.WP)(c),[2,"![".concat(p,"](").concat(f,")")]}})});return function(n,t,r){return e.apply(this,arguments)}}()},60768:(e,n,t)=>{"use strict";t.d(n,{$1:()=>l,jy:()=>o,mV:()=>a});var r=t(52757),i=t(24955),o=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.LU.backgroundDefault}),l=(0,r.AH)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},15656:(e,n,t)=>{"use strict";t.d(n,{SS:()=>A,UI:()=>b,dt:()=>Y});var r=t(13454),i=t(5482),o=t(94086),a=t(59314),l=t(53654),s=t(3722),c=t(24955),u=t(10168),d=t(32842),p=t(72700),f=t(40889),h=t(8367),m=t(29504),g=t(53535),v=(0,u.x)({root:[d.wp.flex.growAndShrink(1),d.wp.px(8),{userSelect:"none"}],header:[{fontSize:c.LU.fontSizeSmall,opacity:.6},d.wp.color.foregroundDimmest,d.wp.truncate],fileName:[d.wp.truncate,d.wp.flex.row]});function w(e){var n=e.height,t=e.active,r=e.match,i=r.directory,a=r.filename,l=e.description;return(0,o.FD)(h.S,{css:v.root,row:!0,gap:8,align:"center",style:{height:n},children:[(0,o.Y)(p.A,{path:a.text,size:16}),(0,o.FD)(h.S,{gap:0,children:[i?(0,o.Y)(h.S,{css:v.header,children:(0,o.Y)(g.e,{text:i.text+"/",highlight:i.ranges,dimmed:!t})}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(h.S,{css:v.fileName,children:(0,o.Y)(g.e,{text:a.text,highlight:a.ranges,dimmed:!t})}),(0,o.Y)(f.EY,{variant:"small",color:"dimmest",children:l})]})]})]})}var y={match:a.fq,forward:!1,tiebreakers:[function(e,n,t){var r=t(e.item),i=t(n.item),o=r.lastIndexOf("/"),a=i.lastIndexOf("/"),l=Array.from(e.positions).filter(function(e){return e>o}).length;return Array.from(n.positions).filter(function(e){return e>a}).length-l},function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function b(e,n){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e,n){var t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,new a.$S(n,y).find(e)];case 1:return t=i.sent().map(function(e){return{path:e.item,score:Math.floor(e.score*m.B.files),ranges:(0,s.WJ)(e.positions)}}),[2,(r=(0,s.hS)({queryLength:e.length}))?t.filter(function(e){return e.score>=r}):t]}})})).apply(this,arguments)}function Y(e){var n=e.ranges,t=e.path,r=(0,l.WP)(t),i=(0,l._6)(t);if(!i)return{filename:{text:r,ranges:n.length?n:void 0}};var o=i.length,a=o+1,s=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;if(m.from<o){s.push({from:m.from,to:Math.min(m.to,o)});var g=m.to-a;if(g<=0)continue;c.push({from:0,to:g});continue}m.from<a||c.push({from:m.from-a,to:m.to-a})}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:s.length?s:void 0}}}function A(e){var n=e.path,t=e.ranges,r=e.description,i=Y({path:n,ranges:null!=t?t:[]}),a=i.directory?44:32;return{height:a,content:(0,o.Y)(w,{match:i,height:a,description:r})}}},39428:(e,n,t)=>{"use strict";t.d(n,{g:()=>S,h:()=>w});var r=t(13454),i=t(66622),o=t(27189),a=t(5482),l=t(94086),s=t(55195),c=t(77119),u=t(80062),d=t(15656),p=t(72700),f=t(40889),h=t(8367),m=t(29504),g=t(53323),v=t(68753);function w(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(n=e.searchQuery,t=e.paths,r=e.run,i=e.description,!n)return[2,t.map(function(e){return{data:{type:"action",label:e,icon:(0,l.Y)(p.A,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,d.SS)({path:e,description:i})}}}})];return[4,(0,d.UI)(n,t)];case 1:return[2,o.sent().map(function(e){var n=e.path,t=e.score,o=e.ranges;return{data:{type:"action",label:n,icon:(0,l.Y)(p.A,{path:n}),run:function(){return r(n)}},match:function(){return{score:t,render:(0,d.SS)({path:n,ranges:o,description:i})}}}})]}})})).apply(this,arguments)}function b(){return(0,l.FD)(h.S,{row:!0,gap:8,children:[(0,l.Y)(v.A,{}),(0,l.Y)(f.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's files. Please try again."})]})}function S(e){var n;return(0,u.gu)({type:"context",label:"Files",description:"Find a file",icon:(0,l.Y)(g.A,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.u4)({defaultScore:m.q.findOrCreateFile}),commands:(n=(0,r._)(function(n){var t,u,d,f,h,m,g,y,S,Y,A,C,x,_,k,D,E,R,I,F;return(0,a.YH)(this,function(T){switch(T.label){case 0:return t=e.fs,u=e.shouldHideFile,[4,Promise.resolve(e.getRecentFiles())];case 1:if(d=T.sent(),f=[],!(n.searchQuery||n.active))return[3,3];return[4,t.listFiles()];case 2:if((h=T.sent()).error)return s.Cp(Error("Find or create file returned an error"),{extra:{message:h.error}}),[2,[{data:{type:"error",label:h.error,icon:(0,l.Y)(v.A,{})},match:function(){return{score:1,render:{content:(0,l.Y)(b,{})}}}}]];if(!h.files)throw Error("Expected files");m=!0,g=!1,y=void 0;try{for(S=h.files[Symbol.iterator]();!(m=(Y=S.next()).done);m=!0)A=Y.value,u(A)||d.includes(A)||f.push(A)}catch(e){g=!0,y=e}finally{try{m||null==S.return||S.return()}finally{if(g)throw y}}T.label=3;case 3:return C=[],[4,Promise.all([w({searchQuery:n.searchQuery,paths:d,description:"Recently opened",run:function(n){e.openFile({path:n})}}),w({searchQuery:n.searchQuery,paths:f,run:function(n){e.openFile({path:n})}})])];case 4:if(_=(x=i._.apply(void 0,[T.sent(),2]))[0],k=x[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({searchQuery:n.searchQuery})];case 5:E=T.sent(),(D=C).push.apply(D,(0,o._)(E)),T.label=6;case 6:return _.length&&(R=C).push.apply(R,(0,o._)(_)),k.length&&(I=C).push.apply(I,(0,o._)(k)),0===k.length&&0===_.length&&n.active&&(F=n.searchQuery,C.push({data:{label:F,description:"Create a new file",icon:(0,l.Y)(p.A,{path:F}),type:"action",run:(0,r._)(function(){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,t.writeFile(F,c.A.from(""))];case 1:if(n.sent().error)return[2,{type:"error",message:'Could not create "'+F+'"'}];return e.openFile({path:F}),[2]}})})},match:function(){return{score:1}}})),[2,C]}})}),function(e){return n.apply(this,arguments)})})}},50052:(e,n,t)=>{"use strict";t.d(n,{G:()=>k,Y:()=>D});var r=t(13454),i=t(66622),o=t(5482),a=t(94086),l=t(55195),s=t(3722),c=t(80062),u=t(68062),d=t(20268),p=t(24955),f=t(10168),h=t(32842),m=t(72700),g=t(40889),v=t(8367),w=t(29504),y=t(95780),b=t(99413),S=t(68753),Y=(0,f.x)({root:[h.wp.flex.growAndShrink(1),h.wp.p(8)],singleLine:[{whiteSpace:"nowrap",fontFamily:p.LU.fontFamilyCode},h.wp.truncate,h.wp.color.foregroundDimmest]});function A(e){var n=e.path,t=e.line;return(0,a.FD)(v.S,{css:Y.root,gap:4,align:"start",children:[(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(m.A,{path:n,size:12}),(0,a.FD)(g.EY,{variant:"small",color:"dimmest",multiline:!1,children:[n.replace(/^\.\//,""),":",t.lineNumber]})]}),(0,a.Y)(v.S,{css:Y.singleLine,children:(0,a.Y)(y.eK,{source:t.content,matches:t.matches})})]})}function C(){return(0,a.FD)(v.S,{css:[h.wp.px(8),h.wp.rowWithGap(8),h.wp.align.center],children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's contents. Please try again."})]})}function x(){return(0,a.FD)(v.S,{row:!0,gap:8,css:[h.wp.p(8),h.wp.align.center],children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function _(){return(0,a.Y)(v.S,{row:!0,gap:8,css:[h.wp.p(8),h.wp.align.center],children:(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Nothing came up searching your App's content."})})}var k=(0,u.FM)({cmdOrCtrl:!0,shift:!0,key:"f"});function D(e){var n,t,u=(0,d.v)({container:e.container});return(0,c.gu)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.Y)(b.A,{}),keyboardShortcut:e.keyboardShortcut?k:void 0},{match:(0,c.u4)({defaultScore:w.q.searchFileContents}),commands:(n=(0,r._)(function(n){var r,c,d,p,f,h,g,y,b,Y,k,D;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!n.searchQuery||!n.active&&e.activeOnly)return[2,[]];return t=r=Math.random(),[4,u({query:n.searchQuery})];case 1:if(d=(c=o.sent()).results,p=c.error,f=c.isPartialResult,r!==t)return[2,[]];if(null!==p){if(!n.active)return[2,[]];return l.Cp(Error("Search file contents returned an error"),{extra:{message:p}}),[2,[{data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1,render:{content:(0,a.Y)(C,{})}}}}]]}h=[],g=!0,y=!1,b=void 0;try{for(Y=function(){var t=(0,i._)(D.value,2),r=t[0];t[1].forEach(function(t){var i=t.matches[0].column;h.push({match:function(){var e=(0,s.w2)(n.searchQuery,t.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*w.B.fileContentsSearch),render:{height:60,content:(0,a.Y)(A,{path:r,line:t})}}},data:{type:"action",label:r,icon:(0,a.Y)(m.A,{path:r}),key:[r,t.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:t.lineNumber,col:i})}}})})},k=Object.entries(d)[Symbol.iterator]();!(g=(D=k.next()).done);g=!0)Y()}catch(e){y=!0,b=e}finally{try{g||null==k.return||k.return()}finally{if(y)throw b}}if(0===h.length&&n.active)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(_,{})}}}}]];if(n.active){if(0===h.length)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(_,{})}}}}]];f&&h.push({data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1/0,render:{content:(0,a.Y)(x,{})}}}})}return[2,h]}})}),function(e){return n.apply(this,arguments)})})}},20041:(e,n,t)=>{"use strict";t.d(n,{k:()=>k,T:()=>D});var r=t(20837),i=t(94086),o=t(3722),a=t(43952),l=t(16530),s=t(54191),c=t(74495),u=t(52757),d=t(32842),p=t(98541),f=t(40889),h=(0,u.AH)([d.wp.fontSize(13)]);function m(e){var n=e.name,t=(0,l._)(e,["name"]),o=(0,c.Jn)(n.id),u=(0,s.vm)();if(!o)return null;var d=(0,c.LH)(o,u);return""===d.trim()?null:(0,i.Y)(p.a,(0,a._)((0,r._)({},t),{text:(0,i.Y)(f.EY,{css:h,color:"dimmest",children:d})}))}var g=t(89814),v=t(19346),w=t(75165),y=t(24955),b=t(10168),S=t(8367),Y=t(39520),A=t(53718),C=t(29504),x=t(53535),_=(0,b.x)({root:[d.wp.flex.growAndShrink(1),{paddingInline:A.eQ.inputBarPadding,"&:hover .icon":{backgroundColor:"var(".concat(y.qo.interactiveBackground,")")}}],iconAndIndicator:[d.wp.position.relative],iconContainer:[d.wp.position.relative,A.Ef,{width:A.eQ.iconSize,height:A.eQ.iconSize}],textContent:[d.wp.flex.growAndShrink(1)],aliasContainer:[d.wp.color.foregroundDimmest,d.wp.align.center,d.wp.flex.growAndShrink(1)],descriptionText:[{fontSize:"0.9em"}]});function k(e){var n=e.pane,t=e.active,o=e.labelHighlights,a=(0,v.Vv)(),l=a.Icon({pane:n}),s=a.getTitle(n),c=(0,v.qo)(n),u=a.getTitlePill(n),d=(0,w.F9)({paneType:n.type}),h=(0,Y.mg)();return(0,i.FD)(S.S,{css:_.root,row:!0,align:"center",gap:A.eQ.inputBarPadding,style:h?{paddingTop:A.eQ.inputBarPadding,paddingBottom:A.eQ.inputBarPadding}:void 0,children:[(0,i.FD)(S.S,{css:_.iconAndIndicator,children:[(0,i.Y)(S.S,{css:_.iconContainer,style:{opacity:e.active?1:.7},children:l}),d?(0,i.Y)(g.b,{color:d}):null]}),(0,i.FD)(S.S,{css:_.textContent,gap:2,children:[(0,i.FD)(S.S,{row:!0,gap:4,justify:"space-between",children:[e.alias?(0,i.FD)(S.S,{row:!0,gap:8,css:_.textContent,children:[(0,i.Y)(f.EY,{children:s}),(0,i.FD)(S.S,{css:_.aliasContainer,row:!0,gap:4,children:["(",e.aliasPrefix?(0,i.FD)(f.EY,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,i.Y)(x.e,{dimmed:!0,text:e.alias,highlight:o}),")"]})]}):(0,i.Y)(x.e,{dimmed:!t,text:s,highlight:o}),h&&null!=u?(0,i.Y)(p.a,(0,r._)({},u)):null]}),h&&null!=c?(0,i.Y)(x.e,{dimmed:!t,text:c,highlight:e.descriptionHighlights,multiline:!0,css:_.descriptionText}):null]}),e.shortcutCommand?(0,i.Y)(m,{name:e.shortcutCommand}):null]})}function D(e){var n=e.pane,t=e.aliases,r=void 0===t?[]:t;return function(e){var t=e.searchQuery,a=e.data,l=e.active;if("group"===a.type)return null;if(!t)return{score:1,render:{content:(0,i.Y)(k,{pane:n})}};var s=(0,o.w2)(t,a.label,{filterLowMatchScores:!0}),c=null;if(null!=a.description&&(c=(0,o.w2)(t,a.description,{filterLowMatchScores:!0,fuzzy:!1}))&&(c.score*=C.B.toolDescription),null!=s||null!=c)return{score:null!==(h=null!==(f=null==s?void 0:s.score)&&void 0!==f?f:null==c?void 0:c.score)&&void 0!==h?h:0,render:{content:(0,i.Y)(k,{pane:n,labelHighlights:null!==(m=null==s?void 0:s.ranges)&&void 0!==m?m:[],descriptionHighlights:null!==(g=null==c?void 0:c.ranges)&&void 0!==g?g:[],active:l})}};var u=!0,d=!1,p=void 0;try{for(var f,h,m,g,v,w=r[Symbol.iterator]();!(u=(v=w.next()).done);u=!0){var y=v.value,b="string"==typeof y?{alias:y,prefix:void 0}:y,S=b.alias,Y=b.prefix,A=(0,o.w2)(t,S,{filterLowMatchScores:!0});if(A)return{score:A.score,render:{content:(0,i.Y)(k,{pane:n,active:l,alias:S,aliasPrefix:Y,labelHighlights:A.ranges})}}}}catch(e){d=!0,p=e}finally{try{u||null==w.return||w.return()}finally{if(d)throw p}}return null}}},51681:(e,n,t)=>{"use strict";t.d(n,{f:()=>r});var r=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",["Chat",{alias:"Ghostwriter",prefix:"previously"}]],["shell",["Terminal"]],["objectStorage",["Blobject Storage","Blob Cloud"]],["dependencies",["Packages","System dependencies","Nix","Modules"]],["integrations",["Cloud Services","OpenAI","Slack"]],["agentProgress",["Agent Progress","AI Agent"]]])},14965:(e,n,t)=>{"use strict";t.d(n,{A:()=>er});var r=t(13454),i=t(16530),o=t(66622),a=t(5482),l=t(94086),s=t(30758),c=t(21847),u=t(87689),d=t(43650),p=t(90132),f=t(27230),h=t(83733),m=t(21980),g=t(85471),v=t(82436),w=t(24481),y=t(6696);function b(e,n){var t=[];return t.push((0,y.m_)("interpreter")),t.push((0,y.m_)("entrypoint")),e&&(t.push((0,y.Ez)(e)),t.push((0,y.eH)(e))),n?(t.push((0,y.Up)(n)),t.push((0,y.dA)(n))):(t.push((0,y.m_)("compile")),t.push((0,y.m_)("deployment/build"))),t}var S=t(53654),Y=function(e){return e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Flask="FLASK",e.FastAPI="FASTAPI",e.Pyramid="PYRAMID",e.Starlette="STARLETTE",e.Streamlit="STREAMLIT",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN",e}({}),A="package.json",C="requirements.txt",x=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),_=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function k(){return(k=(0,r._)(function(e,n){var t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=e.initRunCommand,r=e.isCompiled,!((o=new Set(i=e.allFiles)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(A))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!i.some(function(e){return"csproj"===(0,S.an)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(C))return[3,8];return[4,n.readFile(C)];case 7:if(!(l=a.sent()).error){if((s=l.content.toString()).includes("django"))return[2,"DJANGO"];if(s.includes("flask"))return[2,"FLASK"];if(s.includes("fastapi"))return[2,"FASTAPI"];if(s.includes("pyramid"))return[2,"PYRAMID"];else if(s.includes("starlette"))return[2,"STARLETTE"];else if(s.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(x.test(t))return[2,"REGULAR_RUN"];a.label=9;case 9:return[2,"UNKNOWN"]}})})).apply(this,arguments)}function D(){return(D=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(A)];case 1:n=o.sent();try{if(!n.error&&(r=null==(t=JSON.parse(n.content.toString()))?void 0:t.scripts,i=["dev","serve","watch","start:dev","start"].find(function(e){return null==r?void 0:r[e]})))return[2,"npm run ".concat(i)]}catch(e){}return[2,"node index.js"]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(e,n,t){var r,i,o,l;return(0,a.YH)(this,function(a){switch(r=n.initRunCommand,o=(i=n.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,function(e){return D.apply(this,arguments)}(t)];case"REGULAR_RUN":var s;if(null==(l=null!==(s=i.filter(function(e){return!_.test(e)}).find(function(e){return x.test(e)}))&&void 0!==s?s:null))return[2,null];return[2,r.replace(x,l)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(o)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==o?void 0:o.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(o)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}return[2]})})).apply(this,arguments)}function R(){return(R=(0,r._)(function(e,n,t,r){var i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(0===t.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,n){return k.apply(this,arguments)}(i={initRunCommand:e,isCompiled:n,allFiles:t},r)];case 1:return l={projType:o=a.sent()},[4,function(e,n,t){return E.apply(this,arguments)}(o,i,r)];case 2:return[2,(l.runCommand=a.sent(),l.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(o),l)]}})})).apply(this,arguments)}var I=t(24955),F=t(32842),T=t(31955),P=t(8367),L=t(16915),U=t(98833),N=t(20837),O=t(43952),M=t(52757),B=t(10168),H=(0,M.i7)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),z=(0,B.x)({one:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}});let W=function(e){var n=(0,L._)({},(0,U._)(e));return(0,l.FD)(l.FK,{children:[(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.one,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.two,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.three,children:"."}))]})};function G(e){var n=e.children;return(0,l.Y)(T.ui,{background:"default",css:[F.wp.borderRadius(8),{width:"100%",height:"calc(100% - ".concat(I.LU.space2,")"),backgroundColor:I.LU.backgroundDefault,overflowY:"auto",marginTop:"0px"}],children:(0,l.Y)(P.S,{css:[F.wp.p(16),F.wp.justify.center,F.wp.align.center,{flex:"1 1 auto"}],children:n})})}function V(){return(0,l.Y)(G,{children:(0,l.FD)(P.S,{children:[(0,l.Y)(P.S,{children:"We couldn't read your .replit file"}),(0,l.Y)("a",{css:[F.wp.pt(8),{fontSize:I.LU.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function j(){return(0,l.Y)(G,{children:(0,l.Y)(P.S,{children:(0,l.FD)("p",{children:["Importing from GitHub",(0,l.Y)(W,{style:{color:I.LU.foregroundDefault}})]})})})}var Z=t(64999),q=t(88072),K=t(40172),$=t(28354),J=t(64251),Q=t(40889),X=t(14753),ee=t(68753),en=P.D.a,et=(0,B.x)({root:[F.wp.maxWidth(420),F.wp.display.flex,F.wp.gap(12),F.wp.py(4),{margin:"0 auto"}],section:[F.wp.display.flex,F.wp.p(12),F.wp.gap(12)],loading:[F.wp.center,F.wp.flex.growAndShrink(1)],multiParagraph:[F.wp.flex.column,F.wp.gap(8),{a:[F.wp.display.inline]}]});let er=function(e){var n,t,y,S,A,C,x,_,k,D,E,T,L,U,N,O,M,B,H,z,W,G,er,ei,eo,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg,ev,ew=e.flow,ey=(0,i._)(e,["flow"]),eb=(n=ey.closeConfigPane,t=ey.openSidebar,y=ey.onNewPaneSelected,S=ey.openConsole,A=(0,g.pE)("gitImport","boolean"),C=(0,h.A)(),_=(x=(0,w.A)()).fs,k=x.dotReplit,E=(D=(0,o._)((0,s.useState)(null),2))[0],T=D[1],U=(L=(0,o._)((0,s.useState)(null),2))[0],N=L[1],O=(0,s.useCallback)(function(){y({type:"codeEditor",data:{path:".replit"}})},[y]),(0,s.useEffect)(function(){if(!E)return k.watch(function(e){T(e.config),"NOT_FOUND"!==e.error&&N(e.error)})},[k,E]),B=(M=(0,o._)((0,s.useState)(!1),2))[0],H=M[1],W=(z=(0,o._)((0,s.useState)(""),2))[0],G=z[1],ei=(er=(0,o._)((0,s.useState)(""),2))[0],eo=er[1],el=(ea=(0,o._)((0,s.useState)(!1),2))[0],es=ea[1],eu=(ec=(0,o._)((0,s.useState)(Y.Unknown),2))[0],ed=ec[1],ef=(ep=(0,o._)((0,s.useState)(!1),2))[0],eh=ep[1],(0,s.useEffect)(function(){if(!ef)return _.watchDir(".git",{onChange:function(e){eh(e.length>0)},onMoveOrDelete:function(){eh(!0)},onError:function(){eh(!1)}})}),(0,s.useEffect)(function(){(ef||!A)&&function(){e.apply(this,arguments)}();function e(){return(e=(0,r._)(function(){var e,n,t,r,i,o,l,s,c,u,d,f,h,g,v,w,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!E)return[2];return n=(0,p.a8)(null!==(e=E.run)&&void 0!==e?e:void 0),r=(0,p.a8)(null!==(t=E.compile)&&void 0!==t?t:void 0),i=!!E.compile,[4,_.listFiles()];case 1:return o=a.sent(),[4,_.readDir(".git")];case 2:if(l=a.sent(),o.error||null==o.files||A&&l.error)return[2];return s=o.files,[4,function(e,n,t,r){return R.apply(this,arguments)}(n,i,s,_)];case 3:if(u=(c=a.sent()).projType,d=c.runCommand,f=c.compileCommand,h=s.includes("Procfile"),g=function(e,n){return e||n},v=h?g(n,d):g(d,n),w=f||r,G(v||""),eo(w),es(u!==Y.Unknown&&u!==Y.RegularRun),ed(u),!A)return[3,6];return v||m.vF.warn("Failed to autosuggest run command"),u===Y.Unknown&&m.vF.warn("Failed to detect project type"),y=b(v||"",w),[4,k.updateDotReplit(y)];case 4:return a.sent(),[4,_.flush()];case 5:a.sent(),_.persist({skipDebounce:!0}),a.label=6;case 6:return[2]}})})).apply(this,arguments)}},[k,E,_,ef,A]),eg=(0,s.useCallback)((em=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.run,t=e.compile,r=e.runChanged,i=e.compileChanged,o=e.projType,(0,v.u4)(v.AZ.NIX_GH_IMPORT_USED,{action:f.s.ConfigDone,isCompiled:""!==t,runChanged:r,compileChanged:i,projType:o,replId:C}),l=b(n,t),[4,k.updateDotReplit(l)];case 1:return a.sent(),_.flush().then(function(){_.persist({skipDebounce:!0})}),[2]}})}),function(e){return em.apply(this,arguments)}),[k,_,C]),{fs:_,applyConfig:eg,closeConfigPane:n,dotReplitConfig:E,dotReplitError:U,isApplyingConfig:B,setIsApplyingConfig:H,initialBuild:ei,initialRun:W,isFrameworkRecommended:el,projType:eu,openDotReplit:O,openSidebar:t,openConsole:S}),eS=(0,u.G)(),eY=eS.modules,eA=eS.configs,eC=(0,d.A)(),ex=(0,o._)((0,s.useState)("Overview"),2),e_=ex[0],ek=ex[1],eD=(0,s.useMemo)(function(){return null==eY?void 0:eY.filter(function(e){return"replit"!==e.id})},[eY]),eE=eb.dotReplitConfig,eR=eb.dotReplitError,eI=eb.initialRun,eF=eb.initialBuild,eT=void 0===eF?"":eF,eP=eb.openConsole,eL=eb.openDotReplit,eU=eb.applyConfig,eN=eb.isApplyingConfig,eO=eb.setIsApplyingConfig,eM=eb.closeConfigPane,eB=eb.openSidebar,eH=eb.projType,ez=!!eH&&eH===Y.Rails,eW=(0,c.W)(eI,function(e){if(!e)return{message:"Add a run command"}}),eG=(0,o._)((0,s.useState)(eT),2),eV=eG[0],ej=eG[1];if((0,s.useEffect)(function(){eW.setValue(eI)},[eI]),(0,s.useEffect)(function(){ej(null!=eT?eT:"")},[eT]),eR)return(0,l.Y)(V,{});if(!eE&&"githubImport"===ew)return(0,l.Y)(j,{});if(!eY||!eD||!eA||!eC)return(0,l.Y)(P.S,{css:et.loading,children:(0,l.Y)(X.A,{})});switch(e_){case"ModuleSearch":return(0,l.Y)(q.m,{onBack:function(){return ek("Overview")},disableCategorySelection:!0,initialCategory:"Modules",openConsole:eP});case"Overview":return(0,l.FD)(P.S,{css:et.root,children:[(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"headerDefault",level:1,children:"Configure your App"}),(0,l.Y)(J.s,{color:"dimmer",css:et.multiParagraph,children:"githubImport"===ew?(0,l.FD)(l.FK,{children:[(0,l.FD)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,l.Y)("a",{href:"",onClick:function(e){e.preventDefault(),eL()},children:".replit file"}),", which configures your App's behavior."," ",(0,l.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,l.FD)("p",{children:["To get started, verify our recommended platform dependencies and commands. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})]}):(0,l.Y)(l.FK,{children:(0,l.FD)("p",{children:["Before configuring your Run command, make sure you've installed any"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"dependencies"})},children:"languages and packages"})," ","necessary for your project. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})})})]}),"githubImport"===ew?(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Modules"}),(0,l.Y)(Q.EY,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,l.Y)(Z.A,{modules:eD}),(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){ek("ModuleSearch")}})]}):null,(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(P.S,{row:!0,justify:"space-between",children:(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,l.Y)("form",{onSubmit:(ev=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),eO(!0),!eW.value)return eW.validate(),[2];return[4,eU({run:eW.value,compile:null!=eV?eV:"",runChanged:eW.value!==eI,compileChanged:eV!==eT,projType:eH})];case 1:return n.sent(),"githubImport"===ew&&(eM(),null==eB||eB()),eO(!1),[2]}})}),function(e){return ev.apply(this,arguments)}),css:[{width:"100%"}],children:(0,l.Y)(P.S,{gap:8,children:(0,l.FD)(P.S,{gap:8,children:[(0,l.FD)(P.S,{gap:8,children:[eT?(0,l.FD)(P.S,{gap:4,children:[(0,l.Y)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,l.Y)(Q.EY,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,l.Y)($.pd,{disabled:eN,id:"compile-sel",type:"text",value:eV,placeholder:"Enter a command to compile the program",onChange:function(e){ej(e.currentTarget.value)},css:{"&:disabled":{color:I.LU.foregroundDimmer}}})]}):null,(0,l.Y)("label",{htmlFor:"run-sel",css:[F.wp.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,l.Y)($.pd,{disabled:eN,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:eW.value,placeholder:"Enter a command to run the program",onChange:function(e){eW.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:I.LU.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),eW.error||!eW.value?(0,l.FD)(P.S,{css:[F.wp.color.accentNegativeDefault,F.wp.rowWithGap(4),F.wp.align.center],children:[(0,l.Y)(ee.A,{size:12}),(0,l.Y)(P.S,{children:eW.error?eW.error.message:"Add a run command"})]}):null]}),(0,l.FD)(Q.EY,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,l.Y)(en,{css:F.wp.color.accentPrimaryStronger,target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use or running multiple apps?"})]}),ez?(0,l.Y)(P.S,{children:(0,l.FD)(Q.EY,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,l.FD)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replits features."]})}):null,(0,l.Y)(P.S,{css:[F.wp.flex.column,F.wp.pt(16)],children:(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",type:"submit",text:eN?"Saving...":"githubImport"===ew?"Confirm and close":"Save",loading:eN,disabled:eN||!!eW.error||!eW.value,dataCy:"import-config-done"})})]})})})]})]})}}},26030:(e,n,t)=>{"use strict";t.d(n,{tz:()=>Q,SF:()=>S,EF:()=>V});var r=t(72275),i=t(20837),o=t(94086),a=t(30758),l=t(9491),s=t(45640),c=t(20543),u=t(51297),d=t(99813),p=t(11571),f=t(66622),h=t(72653),m=t(8697),g=(0,a.createContext)(null);function v(){var e=(0,a.useContext)(g);if(!e)throw Error("Expected store in context");return e}function w(e){return(0,h.md)(e,{store:v()})}function y(e){return(0,m.k)(e,v())}var b=function(e){return(0,h.Xr)(e,{store:v()})};function S(e){var n=(0,f._)((0,a.useState)(function(){return(0,d.y$)()}),1)[0];return(0,o.Y)(g.Provider,{value:n,children:e.children})}var Y=(0,t(1478).v)(["display","visibility","transform","maxHeight","width"]),A=Y.cssVars,C=Y.styleTokens,x=t(24955),_=t(31955),k=(0,d.eU)(null),D=(0,d.eU)("default"),E=(0,d.eU)({command:null,offset:{x:0,y:0},visible:!1}),R=(0,p.mg)(E,function(e){return e.offset}),I=(0,p.mg)(E,function(e){return e.command}),F=(0,p.mg)(E,function(e){return e.visible}),T=(0,p.mg)(E,function(e){return e.onKeyDownHandler}),P=(0,p.mg)(k,function(e){var n;return null!==(n=null==e?void 0:e.initial)&&void 0!==n?n:null}),L=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.y,r=window.innerHeight-t,i=e(P),o=null!==i?i-r:0;return o>0&&(t=Math.max(16,t-Math.min(200,o))),t}),U=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.x,r=window.innerWidth,i=e(O),o=t+(null!=i?i:M)-r+16;return o>0&&(t=Math.max(16,t-o)),t}),N=(0,d.eU)(function(e){var n=e(U),t=e(L);return null==n||null===t?null:(0,r._)({},A.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),O=(0,d.eU)(null),M=180,B=(0,d.eU)(function(e){var n=e(O);return(0,r._)({},A.width,(null===n?M:n)+"px")}),H=(0,d.eU)(function(e){var n=e(L);return null===n?null:(0,r._)({},A.maxHeight,"calc(100vh - ".concat(x.LU.space16," - ").concat(n,"px)"))}),z=(0,d.eU)(null,function(e,n){n(k,null),n(O,null),n(W,null),n(E,function(e){return(0,u.jM)(e,function(e){e.visible=!1,e.command=null})})}),W=(0,d.eU)(null),G=(0,d.eU)(null,function(e,n,t){if(n(D,t.background),t.width&&n(O,t.width),t.target){var r=t.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};n(W,r),n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=i,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})});return}n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})})});function V(){var e=b(G),n=b(z),t=y(F),r=(0,_.X$)({elevated:!0});return{openContextMenu:(0,a.useCallback)(function(n){e(n.target instanceof HTMLElement?{command:n.command,target:n.target,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler}:{command:n.command,offset:n.target,target:null,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler})},[e,r]),closeContextMenu:n,isVisible:t,onContextMenu:(0,a.useCallback)(function(n,t){var i=t.command,o=t.width,a=t.onKeyDownHandler;n.preventDefault(),e({command:i,offset:{x:n.clientX,y:Math.min(window.innerHeight-64,n.clientY)},target:null,width:o,background:r,onKeyDownHandler:a})},[e,r])}}var j=t(10168),Z=t(32842),q=t(76554),K=t(70013),$=(0,j.x)({surface:[Z.wp.shadow(3),Z.wp.borderRadius(8),Z.wp.position.absolute,{top:0,left:0,border:"1px solid",borderColor:x.LU.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(x.LU.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(x.LU.space16,"))"),maxHeight:C.maxHeight,width:C.width,transform:C.transform,visibility:C.visibility,display:C.display}]});function J(){var e=w(W);return e?(0,o.Y)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var Q=(0,a.memo)(function(){var e=b(z),n=w(I),t=w(T),u=y(F),d=(0,a.useRef)(function(){});(0,a.useEffect)(function(){var e=function(e){if(e){var n;null===(n=d.current)||void 0===n||n.call(d);return}};return e(u.current),u.subscribe(e)},[u]);var p=b(k),f=(0,a.useRef)(null);(0,a.useEffect)(function(){var n=function(n){var t;n.target instanceof HTMLElement&&(null===(t=f.current)||void 0===t?void 0:t.contains(n.target))||e()},t=function(){e()},r=function(e){e?(window.addEventListener("blur",t),document.addEventListener("pointerdown",n)):(window.removeEventListener("blur",t),document.removeEventListener("pointerdown",n))},i=u.subscribe(r);return function(){i(),r(!1)}},[u,e]);var h=y(N);(0,c.d)(f,h),(0,c.d)(f,y(H)),(0,c.d)(f,u,function(e){var n;return n={},(0,r._)(n,A.visibility,e?"visible":"hidden"),(0,r._)(n,A.display,e?"flex":"none"),n});var m=y(B);(0,c.d)(f,m);var g=(0,s.A)(),v=w(F)&&!g,S=w(D),Y=(0,i._)({},h.current,m.current);return n?(0,o.FD)(q.Z,{children:[(0,o.Y)(J,{}),(0,o.Y)(l.n1,{autoFocus:v,restoreFocus:!0,contain:!0,children:(0,o.Y)(_.ui,{onKeyDown:function(n){"Escape"===n.key&&e()},innerRef:f,css:$.surface,style:Y,background:S,children:(0,o.Y)(K.r,{iconBreadcrumbs:!0,command:n,onAction:e,onSelect:e,onTotalHeightChange:p,onKeyDown:t,focusRef:d,compact:!0})})})]}):null})},49722:(e,n,t)=>{"use strict";t.d(n,{A:()=>_});var r=t(66622),i=t(27189),o=t(94086),a=t(30758),l=t(87689),s=t(82436),c=t(72563),u=t(10168),d=t(32842),p=t(56573),f=t(25877),h=t(95235),m=t(31955),g=t(40889),v=t(65599),w=t(8367),y=t(73197),b=t(79653),S=t(14753),Y=t(8351),A=(0,u.x)({module:[d.wp.borderRadius(4),d.wp.width("100%"),d.wp.overflow("hidden")],submodule:[d.wp.p(4)],submoduleName:[d.wp.truncate,d.wp.mx(8),d.wp.flex.growAndShrink(1)],moduleHeader:[d.wp.flex.growAndShrink(1)],moduleActions:[d.wp.center],divider:[d.wp.backgroundColor.outlineDimmer]});function C(e){var n=e.isModifying,t=e.isInstalled,r=e.onInstallClick,i=e.onRemoveClick,a=e.module;if(n)return(0,o.Y)(h.K0,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,o.Y)(S.A,{})});if(t){var l="replit"===a.id;return(0,o.Y)(h.K0,{alt:l?"The base module can't be removed":"Remove module",disabled:l,onClick:i,children:(0,o.Y)(Y.A,{})})}return(0,o.Y)(h.K0,{alt:"Add module",onClick:r,children:(0,o.Y)(y.A,{})})}function x(e){var n=e.module,t=e.isInstalled,i=(0,l.G)(),c=i.addModule,u=i.removeModule,d=(0,r._)((0,a.useState)(!1),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){f(!1)},[t]),(0,o.FD)(w.S,{css:A.moduleHeader,row:!0,justify:"space-between",children:[(0,o.FD)(w.S,{row:!0,gap:12,children:[(0,o.Y)(g.EY,{children:n.name}),n.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:n.displayVersion}):null]}),(0,o.FD)(w.S,{css:A.moduleActions,row:!0,gap:4,children:[n.description?(0,o.Y)(v.m_,{tooltip:n.description,children:(0,o.Y)(b.A,{})}):null,(0,o.Y)(C,{module:n,isInstalled:t,isModifying:p,onInstallClick:function(){f(!0),c(n.id),(0,s.u4)(s.AZ.NIX_MODULE_ADDED,{moduleId:n.id})},onRemoveClick:function(){f(!0),u(n.id),(0,s.u4)(s.AZ.NIX_MODULE_REMOVED,{moduleId:n.id})}})]})]})}function _(e){var n=e.module,t=e.defaultExpanded,r=e.isInstalled,a=(0,i._)(n.runners).concat((0,i._)(n.packagers),(0,i._)(n.formatters),(0,i._)(n.languageServers));return(0,o.Y)(m.ui,{elevated:!0,css:A.module,children:(0,o.FD)(p.A,{round:!1,defaultExpanded:t,headerContent:(0,o.Y)(x,{module:n,isInstalled:r}),children:[a.length>0?(0,o.Y)(f.a,{css:A.divider}):null,a.map(function(e){return(0,o.FD)(w.S,{css:A.submodule,row:!0,align:"center",children:[(0,o.Y)(c.A,{module:e}),(0,o.Y)(g.EY,{css:A.submoduleName,children:e.name}),e.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}},64999:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(94086),i=t(30758),o=t(49722),a=t(8367);function l(e){var n=e.modules,t=(0,i.useMemo)(function(){return n.filter(function(e){return"replit"!==e.id})},[n]);return(0,r.Y)(a.S,{gap:8,children:t.map(function(e){return(0,r.Y)(o.A,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}},88072:(e,n,t)=>{"use strict";t.d(n,{Y:()=>eh,m:()=>eg});var r=t(13454),i=t(20837),o=t(43952),a=t(16530),l=t(66622),s=t(5482),c=t(94086),u=t(30758),d=t(59314),p=t(88538),f=t.n(p),h=t(6299),m=t.n(h),g=t(5846),v=t(73606),w=t(87689),y=t(78703),b=t(43650),S=t(49722),Y=t(29761),A=t(8367),C=/(.+)(?:\S+)?<([^>,]+)[>,]/,x=A.D.span;function _(e){var n=e.author,t=C.exec(n);if(t){var r=t[1],i=t[2];return(0,c.FD)(c.FK,{children:["By ",r,(0,c.FD)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,c.FD)(x,{children:["By ",n]})}var k=t(14195),D=t(73197),E=t(14753),R=t(8351);function I(e){var n=e.isInstalled,t=e.isInQueue;return e.isCurrentAction?(0,c.Y)(E.A,{}):t?(0,c.Y)(k.A,{}):n?(0,c.Y)(R.A,{}):(0,c.Y)(D.A,{})}var F=t(19677),T=t(62714),P=t(85325),L=t(24955),U=t(10168),N=t(3460),O=t(32842),M=t(40172),B=t(95235),H=t(93532),z=t(31955),W=t(40889),G=t(50656),V=t(52885),j=t(68753),Z=A.D.span,q=(0,U.x)({metadataSkeleton:[O.wp.pt(4)],metadataSkeletonVersion:[N.S.foregroundPulse(),O.wp.height(16),O.wp.maxWidth(64),O.wp.borderRadius(4)],metadataSkeletonDescription:[N.S.foregroundPulse(),O.wp.height(16),O.wp.borderRadius(4),O.wp.maxWidth(425)],root:[O.wp.borderRadius(8),O.wp.p(8)],headerTitle:[O.wp.display.flex,O.wp.rowWithGap(8),O.wp.flex.growAndShrink(1)],headerTitleText:[O.wp.display.inline,O.wp.flex.growAndShrink(1),O.wp.overflow("hidden"),O.wp.truncate],headerTitlePills:[O.wp.display.inlineFlex,O.wp.rowWithGap(4),O.wp.flex.shrink(0)],headerButton:[],error:[O.wp.mt(4)],actions:[O.wp.mt(8)],consoleButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],cancelButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],actionButton:[O.wp.flex.grow(1),O.wp.flex.shrink(0)]});function K(e){var n=e.title,t=e.content,r=e.isExpanded;return(0,c.FD)(A.S,{gap:2,children:[n?(0,c.Y)(W.EY,{color:"dimmer",children:n}):null,t?(0,c.Y)(W.EY,{maxLines:r?void 0:1,children:t}):null]})}function $(e){var n=e.title,t=e.content;return(0,c.FD)(A.S,{css:q.metadataSkeleton,gap:8,children:[void 0===n||n?(0,c.Y)(A.S,{css:q.metadataSkeletonVersion}):null,void 0===t||t?(0,c.Y)(A.S,{css:q.metadataSkeletonDescription}):null]})}function J(e){var n,t=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,s=(0,P.UK)(),d=(0,T.H_)(null==s?void 0:s.id),p=(0,T.xB)(null==s?void 0:s.id),f=(0,T.BL)(),h=(0,T.n5)(),m=(0,T.D6)(),g=(0,F.A)(r.license),v=(0,u.useMemo)(function(){return!!(null!==f&&f.pkgs.find(function(e){return e.name===r.name}))},[f]),w=(0,u.useMemo)(function(){return h.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[h]),y=h.length>1&&!!w,b=(0,u.useMemo)(function(){return!!d.find(function(e){var n,t;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null===(t=r.name)||void 0===t?void 0:t.toLowerCase())})},[d]),S=!!(r.homepageURL||r.license||r.author),Y=(0,u.useMemo)(function(){return!!p.find(function(e){return e.name===r.name})},[p]),C=(0,l._)((0,u.useState)(!1),2),x=C[0],k=C[1],D=(0,T.rD)(),E=(0,T.q3)(),R=(0,T.Gg)();return(0,c.FD)(z.ui,{css:q.root,elevated:!0,children:[(0,c.FD)(A.S,{row:!0,justify:"space-between",children:[(0,c.FD)(W.Y9,{css:q.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,c.FD)(Z,{css:q.headerTitleText,children:[null!=t?t:r.name,r.version?(0,c.FD)(W.EY,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,c.Y)(A.S,{css:q.headerTitlePills,children:a}):null]}),S?(0,c.Y)(B.K0,{css:q.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return k(function(e){return!e})},children:(0,c.Y)(G.A,{rotate:x?90:0})}):null]}),(0,c.Y)(A.S,{gap:4,children:void 0!==i&&i?(0,c.Y)($,{title:!1}):(0,c.FD)(c.FK,{children:[(0,c.Y)(K,{content:null!==(n=r.description)&&void 0!==n?n:"This package has no description.",isExpanded:!0}),r.homepageURL&&x?(0,c.Y)(K,{content:(0,c.Y)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:x}):null,g&&x?(0,c.Y)(K,{content:g,isExpanded:x}):null,r.author&&x?(0,c.Y)(K,{content:(0,c.Y)(_,{author:r.author}),isExpanded:x}):null]})}),Y?(0,c.Y)(H.N,{css:q.error,colorway:"negative",icon:(0,c.Y)(j.A,{}),text:"Couldn't ".concat(b?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,c.Y)(A.S,{css:q.actions,row:!0,gap:8,children:Y?(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.consoleButton,text:"Console",onClick:function(){o()},disabled:v||y,colorway:"primary",iconLeft:(0,c.Y)(V.A,{})}),(0,c.Y)(M.$n,{css:q.actionButton,text:"Try Again",onClick:function(){(null==s?void 0:s.id)&&(m(s.id,[r]),b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||y,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:y,isCurrentAction:v})})]}):(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.actionButton,text:v?(null==f?void 0:f.kind)===T.Vr.Install?"Installing":"Removing":y?(null==w?void 0:w.kind)===T.Vr.Install?"Waiting to install":"Waiting to remove":b?"Remove":"Install",onClick:function(){(null==s?void 0:s.id)&&(b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||y,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:y,isCurrentAction:v})}),y?(0,c.Y)(M.$n,{css:q.cancelButton,text:"Cancel",onClick:function(){r.name&&R(r.name)},disabled:v,loading:v}):null]})})]})}var Q=t(57218),X=t(24481),ee=t(60569),en=t(18562),et=t(27233),er=t(98541),ei=t(69929),eo=t(38520),ea=t(65599),el=t(84761),es=t(2189),ec=(0,U.x)({root:[O.wp.flex.column,O.wp.flex.growAndShrink(1)],headerRoot:[O.wp.border({color:L.LU.outlineDimmest,width:1,direction:"bottom"})],header:[O.wp.width("100%"),O.wp.maxWidth(Y.Vq),O.wp.colWithGap(8),O.wp.p(8),{margin:"0 auto"},O.wp.rowWithGap(8),O.wp.p(8),O.wp.align.center],searchInput:[O.wp.flex.growAndShrink(1)],select:[O.wp.minWidth(160)],resultsRoot:[O.wp.flex.growAndShrink(1),O.wp.overflow("auto")],resultsScroller:[O.wp.width("100%"),O.wp.maxWidth(600),O.wp.flex.growAndShrink(1),O.wp.p(8),{margin:"0 auto"},O.wp.overflow("auto")]});function eu(e){var n,t,o=e.query,a=e.openConsole,d=e.computePills,p=(0,l._)((0,u.useState)([]),2),f=p[0],h=p[1],m=(0,u.useRef)(0),g=(0,l._)((0,u.useState)(!1),2),w=g[0],y=g[1],b=(n=(0,X.A)(),t=(0,P.Ot)(),(0,u.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t();return(null==o?void 0:o.id)?(0,ee.N)(o.id).search((0,i._)({id:o.id,query:e,services:n},r)):[]},[]));return((0,u.useEffect)(function(){if(""===o.trim()){h([]);return}y(!0)},[o]),(0,v.A)(function(){var e,n=++m.current;(e=(0,r._)(function(){var e;return(0,s.YH)(this,function(t){switch(t.label){case 0:return[4,b(o)];case 1:return e=t.sent(),n===m.current&&(h(e),y(!1)),[2]}})}),function(){return e.apply(this,arguments)})()},[o],500),w)?(0,c.Y)(Y.Gu,{}):0===f.length?(0,c.Y)(Y.pp,{children:o?"No results were found.":"Start typing above to see results."}):(0,c.Y)(A.S,{gap:8,children:f.map(function(e){var n,t=null!==(n=null==d?void 0:d(e))&&void 0!==n?n:[];return(0,c.Y)(J,{pkg:e,openConsole:a,pills:t},e.name)})})}function ed(e){return e.length>0&&m()(e)}function ep(e){var n,t,r,i,o,a=e.query,l=(0,b.A)(),s=(0,w.G)().modules,p=(0,u.useMemo)(function(){return new Set(null==s?void 0:s.map(function(e){return e.id}))},[s]),h=(t=(n={modules:null!==(o=null==l?void 0:l.fullModules)&&void 0!==o?o:[],query:a}).modules,r=n.query,i=(0,u.useMemo)(function(){return new d.Rk(t,{selector:function(e){return e.name},tiebreakers:[function(e,n){var t=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===n.item.displayVersion.split(".").length?"".concat(n.item.displayVersion,".0"):n.item.displayVersion;return ed(t)||ed(r)?!ed(r)&&ed(t)?1:!ed(t)&&ed(r)||f()(t,r)?-1:f()(r,t)?1:0:0}]})},[t]),(0,u.useMemo)(function(){return r?i.find(r).map(function(e){return e.item}):t},[i,t,r]));return 0===(h=(0,u.useMemo)(function(){return h.sort(function(e,n){var t=e.internal||e.demoted,r=n.internal||n.demoted;return t&&!r?1:!t&&r?-1:0})},[h])).length?(0,c.Y)(Y.pp,{children:a?"No results were found.":"Start typing above to see results."}):(0,c.Y)(A.S,{gap:8,children:h?h.map(function(e){var n="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),t=p.has(e.id);return(0,c.Y)(A.S,{row:!0,align:"center",justify:"space-between",children:(0,c.Y)(S.A,{module:e,isInstalled:t,defaultExpanded:!1})},n)}):null})}function ef(e){var n=e.onBack,t=e.initialQuery,r=e.setQuery,i=e.categories,o=e.category,a=e.setCategory,s=e.children,d=e.disableCategorySelection,p=e.searchPlaceholder,f=(0,l._)((0,u.useState)(null!=t?t:""),2),h=f[0],m=f[1],g=(0,u.useDeferredValue)(h);return(0,u.useEffect)(function(){r(g)},[g,r]),(0,c.FD)(A.S,{css:ec.root,children:[(0,c.Y)(A.S,{css:ec.headerRoot,children:(0,c.FD)(A.S,{css:ec.header,children:[(0,c.Y)(B.K0,{alt:"Back",onClick:function(){return n()},children:(0,c.Y)(el.A,{})}),!d&&i&&i.length>0?(0,c.Y)(eo.l,{items:i,css:ec.select,"aria-label":"Change search context",selectedKey:o,onSelectionChange:function(e){var n=null==i?void 0:i.find(function(n){return n.value===e});if(!n)throw Error("Expected config");m(""),a(n.value)},children:function(e){return(0,c.Y)(et.nh,{id:e.value,label:e.label})}}):null,(0,c.Y)(A.S,{css:ec.searchInput,children:(0,c.Y)(ei.I,{value:h,onChange:function(e){m(e.target.value)},onClear:function(){return m("")},placeholder:void 0===p?"Search packages...":p,autoFocus:!0})})]})}),(0,c.Y)(A.S,{css:ec.resultsRoot,children:(0,c.Y)(A.S,{css:ec.resultsScroller,children:s})})]})}function eh(e){var n=e.onBack,t=e.initialCategory,r=e.openConsole,s=(0,a._)(e,["onBack","initialCategory","openConsole"]),d=(0,Q.J)().configs,p=(0,l._)((0,u.useState)(""),2),f=p[0],h=p[1],m=(0,u.useMemo)(function(){return d.filter(function(e){return"nix"!==e.id}).map(function(e){return{value:e.id,label:e.name.replace(/\s*packager\s*.*$/,"")}})},[d]),g=(0,l._)((0,u.useState)(null!=t?t:m[0].value),2),v=g[0],w=g[1],y=(0,u.useMemo)(function(){return d.find(function(e){return e.id===v})},[v,d]);return(0,c.Y)(ef,(0,o._)((0,i._)({categories:m,initialQuery:f,setQuery:h,onBack:n,setCategory:function(e){h(""),w(e)},category:v},s),{children:(0,c.Y)(en.A,{config:y,children:(0,c.Y)(eu,{query:f,openConsole:r})})}))}var em=[{value:"Modules",label:"Modules"},{value:"Packages",label:"Packages"}];function eg(e){var n=e.onBack,t=e.initialCategory,r=void 0===t?em[0].value:t,s=e.openConsole,d=(0,a._)(e,["onBack","initialCategory","openConsole"]),p=(0,Q.J)().configs,f=(0,u.useMemo)(function(){return p.find(function(e){return"nix"===e.id})},[p]),h=(0,l._)((0,u.useState)(""),2),m=h[0],v=h[1],w=(0,l._)((0,u.useState)(r),2),b=w[0],S=w[1];return((0,y.r)(g.AZ.NIX_MODULE_SEARCH_VIEWED,{},function(){return"Modules"===b},[]),(0,y.r)(g.AZ.NIX_MODULE_SEARCH_USED,{query:m},function(){return!!(m&&"Modules"===b)},[m]),f)?(0,c.Y)(ef,(0,o._)((0,i._)({categories:em,initialQuery:m,setQuery:v,onBack:n,setCategory:function(e){v(""),S(e)},category:b,searchPlaceholder:"Modules"===b?"Search modules...":void 0},d),{children:"Packages"===b?(0,c.Y)(en.A,{config:f,children:(0,c.Y)(eu,{query:m,openConsole:s,computePills:function(e){var n;return null!==(n=e.present)&&void 0!==n&&n?[(0,c.Y)(ea.m_,{tooltip:"Cached packages are faster to install in your App",children:(0,c.Y)(er.a,{text:"cached",iconLeft:(0,c.Y)(es.A,{}),colorway:"green"})},"cached-".concat(e.name,"-").concat(e.version))]:[]}})}):(0,c.Y)(ep,{query:m})})):null}},72563:(e,n,t)=>{"use strict";t.d(n,{A:()=>O});var r=t(94086),i=t(88467),o=t(16882),a=t(47270),l=t(20837),s=t(43952),c=t(95836);function u(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#3E474A",fillRule:"evenodd",d:"m19.91 5.492-6.945-4.123a2.62 2.62 0 0 0-2.68 0L3.34 5.492A2.77 2.77 0 0 0 2 7.878v8.245c0 .984.51 1.894 1.34 2.386l6.945 4.122a2.623 2.623 0 0 0 2.68 0l6.945-4.122a2.77 2.77 0 0 0 1.34-2.386V7.878a2.77 2.77 0 0 0-1.34-2.386Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",d:"m3.583 18.087 6.945 4.122a2.15 2.15 0 0 0 1.097.302c.123 0 .244-.014.365-.035-.367-.111-.606-.494-.605-1.086v-8.097c0-.987.604-1.525 1.424-2.004l6.57-4.058c.606-.354 1.125-.22 1.355.271a2.272 2.272 0 0 0-1.067-1.588l-6.945-4.123a2.15 2.15 0 0 0-2.194 0L3.582 5.914a2.285 2.285 0 0 0-1.1 1.964v8.245c0 .808.421 1.56 1.1 1.964Z"}),(0,r.Y)("path",{fill:"#47B353",fillRule:"evenodd",d:"m18.09 16.92-1.73 1.035c-.046.027-.08.057-.08.112v.453c0 .055.037.078.083.051l1.756-1.067c.046-.027.053-.078.053-.133v-.4c0-.054-.037-.078-.082-.05Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",fillRule:"evenodd",d:"M14.407 13.11c.056-.028.102.007.102.08l.006.599c.25-.1.468-.126.666-.08.042.01.061.069.044.138l-.132.53a.227.227 0 0 1-.06.106.138.138 0 0 1-.035.025.078.078 0 0 1-.051.009c-.09-.02-.304-.067-.641.103-.353.18-.477.486-.474.714.003.271.142.354.624.362.642.01.919.291.926.938.006.634-.333 1.316-.85 1.733l.01.593c.001.071-.045.153-.101.181l-.35.202c-.057.029-.103-.006-.104-.078l-.006-.582c-.3.125-.605.155-.8.077-.036-.015-.052-.069-.037-.13l.127-.536a.221.221 0 0 1 .063-.111.132.132 0 0 1 .033-.024.07.07 0 0 1 .056-.006c.21.07.478.037.736-.093.327-.166.546-.5.543-.832-.004-.3-.167-.426-.563-.429-.504.002-.975-.098-.982-.84-.007-.612.311-1.248.815-1.65l-.007-.598c0-.073.044-.154.102-.183l.34-.217Z",clipRule:"evenodd"})]}))}var d=t(56834),p=t(36853),f=t(61290),h=t(80308),m=t(98718),g=t(3412),v=t(44671),w=t(64253),y=t(9369),b=t(59045),S=t(24435),Y=t(78952);function A(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#009118",d:"M12.902.99a1.815 1.815 0 0 0-1.804 0l-2.02 1.165c-2.064 1.19-4.128 2.38-6.192 3.568A1.74 1.74 0 0 0 2 7.233v9.534a1.75 1.75 0 0 0 .92 1.525c.297.165.59.336.884.507.484.282.969.565 1.467.819.925.475 2.082.58 3.018.085.76-.41 1.097-1.323 1.096-2.162.004-1.987.003-3.974.002-5.961V8.102c.018-.14-.082-.289-.228-.286-.35-.005-.7-.003-1.05 0-.132-.014-.261.101-.251.24-.003 1.637-.002 3.275-.002 4.913l-.001 4.467c.008.432-.272.848-.671.994-.452.172-.956.038-1.366-.187l-.74-.426-1.446-.834a.263.263 0 0 1-.115-.108.272.272 0 0 1-.033-.157V7.283a.292.292 0 0 1 .173-.293L8.21 4.37c1.21-.698 2.42-1.394 3.63-2.09a.28.28 0 0 1 .32 0l3.615 2.08 4.569 2.629a.296.296 0 0 1 .172.294V16.718a.273.273 0 0 1-.147.268l-4.218 2.43-3.845 2.215-.051.03c-.117.07-.25.15-.38.072-.403-.233-.804-.471-1.205-.71-.298-.177-.597-.355-.897-.53-.076-.05-.173-.071-.253-.016-.02.01-.038.021-.057.032-.296.163-.593.327-.915.431-.041.017-.085.03-.128.045-.119.037-.24.075-.316.18.094.132.231.21.368.288a1140.648 1140.648 0 0 0 2.571 1.517c.54.351 1.266.377 1.824.05l3.893-2.24c1.44-.83 2.879-1.66 4.32-2.489.544-.29.924-.89.92-1.524V7.234a1.738 1.738 0 0 0-.857-1.492L16.317 2.96 12.902.99Z"}),(0,r.Y)("path",{fill:"#009118",d:"M17.032 8.148c-1.074-.6-2.352-.633-3.546-.554-.863.089-1.77.338-2.398.984-.645.649-.785 1.697-.479 2.545.22.599.772.988 1.343 1.195.735.27 1.508.355 2.28.439.706.076 1.41.153 2.088.371.277.096.6.243.684.557.078.373-.007.806-.297 1.065-.52.43-1.226.46-1.871.489l-.105.004a45.379 45.379 0 0 0-.206-.002c-.754-.009-1.555-.018-2.205-.446-.367-.255-.525-.706-.59-1.136-.007-.134-.11-.257-.25-.247a50.703 50.703 0 0 0-1.046 0c-.122-.011-.248.08-.255.209-.028.768.254 1.564.83 2.075.674.607 1.582.842 2.455.943.929.093 1.878.087 2.792-.12.687-.164 1.376-.465 1.85-1.018.583-.672.697-1.673.436-2.51-.2-.625-.772-1.025-1.356-1.231-.795-.285-1.625-.397-2.456-.51-.645-.087-1.29-.174-1.92-.342l-.031-.01c-.244-.078-.528-.169-.634-.427-.118-.376-.018-.843.313-1.074.43-.306.977-.35 1.486-.378H14c.68-.008 1.4-.015 2.021.303.416.218.658.665.757 1.116.019.133.104.271.251.265.237.005.474.005.711.004l.328-.001c.12.009.25-.062.273-.189-.015-.943-.476-1.909-1.308-2.37Z"})]}))}var C=t(73106),x=t(70489);function _(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#56B3B4",d:"M20.238 4.762h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.595.595h-1.19a.59.59 0 0 1-.596-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 23.81h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.596Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M16.667 14.286h3.571a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-3.571a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M9.524 14.286h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 14.286h4.763a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 19.048h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 9.524h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M8.333 2.381h11.905a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H8.333a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 2.381h3.572a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M7.143 21.429h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M7.143 7.143h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 21.429h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M2.38 7.143h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M11.905 11.905h9.524a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 11.905h3.572a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 11.905h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M13.095 4.762h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-4.762a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 4.762h8.334a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 16.667h10.715a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 16.667h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M16.667 7.143h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M16.667 9.524h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 0h14.287a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595A.59.59 0 0 1 2.38 0Z"})]}))}var k=t(86227),D=t(79383),E=t(83501),R=t(66063),I=t(55076),F=t(38536),T=t(57732),P=t(49941),L=t(27093),U=t(44273),N=t(16231);function O(e){var n=e.module,t=n.name.toLowerCase(),l=t.split(" ");return t.includes("node")?(0,r.Y)(A,{}):t.includes("typescript")?(0,r.Y)(T.A,{}):t.includes("python")||t.includes("pyright")?(0,r.Y)(k.A,{}):t.includes("c++")||t.includes("cpp")||t.includes("clang")||t.includes("ccls")?(0,r.Y)(f.A,{}):t.includes("java")||t.includes("maven")?(0,r.Y)(b.A,{}):t.includes("rust")||t.includes("cargo")?(0,r.Y)(R.A,{}):l.includes("go")||t.includes("gopls")?(0,r.Y)(v.A,{}):t.includes("ruby")?(0,r.Y)(E.A,{}):t.includes("elixir")?(0,r.Y)(g.A,{}):t.includes("bash")?(0,r.Y)(u,{}):t.includes("clojure")?(0,r.Y)(p.A,{}):t.includes("php")?(0,r.Y)(x.A,{}):t.includes("swift")?(0,r.Y)(F.A,{}):t.includes("haskell")?(0,r.Y)(w.A,{}):t.includes("lua")?(0,r.Y)(S.A,{}):t.includes("dart")?(0,r.Y)(m.A,{}):t.includes("css")?(0,r.Y)(h.A,{}):t.includes("html")?(0,r.Y)(y.A,{}):l.includes("r")?(0,r.Y)(D.A,{}):t.includes("nix")?(0,r.Y)(Y.A,{}):t.includes("npm")?(0,r.Y)(C.A,{}):"bun"===t?(0,r.Y)(d.A,{}):t.includes("prettier")?(0,r.Y)(_,{}):t.includes("vue")?(0,r.Y)(P.A,{}):t.includes("svelte")?(0,r.Y)(I.A,{}):t.includes(".replit")?(0,r.Y)(U.A,{}):n instanceof i.api.PackagerOption?(0,r.Y)(L.A,{}):n instanceof i.api.LanguageServerOption?(0,r.Y)(o.A,{}):n instanceof i.api.FormatterOption?(0,r.Y)(a.A,{}):n instanceof i.api.RunOption?(0,r.Y)(N.A,{}):(0,r.Y)(L.A,{})}},29761:(e,n,t)=>{"use strict";t.d(n,{Gu:()=>u,Vq:()=>s,_0:()=>p,pp:()=>d});var r=t(94086),i=t(10168),o=t(32842),a=t(8367),l=t(14753),s=600,c=(0,i.x)({overviewPane:[o.wp.p(12),o.wp.flex.column,o.wp.gap(24),o.wp.width("100%"),o.wp.maxWidth(s),{margin:"0 auto"}],loading:[o.wp.center,o.wp.flex.growAndShrink(1)],emptyState:[o.wp.center,o.wp.flex.growAndShrink(1)]}),u=function(){return(0,r.Y)(a.S,{css:c.loading,children:(0,r.Y)(l.A,{})})},d=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.emptyState,children:n})},p=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.overviewPane,children:n})}},95210:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(94086),i=t(25204),o=t.n(i),a=t(60049),l=t(14178),s=t(85471),c=t(32842),u=t(76985),d=t(40889),p=t(8367);function f(){var e=(0,a.useRouter)(),n=(0,s.pE)("didMigrateToNix","boolean");return(0,r.Y)(u.a,{isOpen:n,onRequestClose:function(){(0,s.HQ)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.FD)(p.S,{gap:16,children:[(0,r.Y)(d.Y9,{level:1,variant:"headerDefault",children:"We've upgraded your App!"}),(0,r.FD)(d.EY,{children:["Your App is now using"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.FD)(p.D.ul,{css:c.wp.colWithGap(4),children:[(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:[""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:l.ik.DEPENDENCY_MANAGEMENT,children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:[""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your App"})," ","with more capabilities."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:[""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:l.ik.DEPENDENCY_MANAGEMENT,children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,r.FD)(d.EY,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please visit"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://replit.com/community",children:"replit.com/community"})," ","to get help."]}),(0,r.Y)(d.EY,{multiline:!1,children:"Thank you for your patience"})]})})}},11880:(e,n,t)=>{"use strict";t.d(n,{P:()=>w});var r=t(66622),i=t(94086),o=t(30758),a=t(28281),l=t(56170),s=t(73540),c=t(24481),u=t(10168),d=t(32842),p=t(40172),f=t(76985),h=t(40889),m=t(8367),g=(0,u.x)({splitContainer:[d.wp.mt(8)],text:[d.wp.mt(8)]}),v=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),n=e[0],t=e[1];return(0,o.useEffect)(function(){var e=function(){t(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),n},w=function(){var e=(0,c.A)().container,n=(0,r._)((0,o.useState)(!1),2),t=n[0],u=n[1],d=(0,o.useRef)(!1),w=(0,s.A)(e),y=(0,o.useMemo)(function(){return w===a.KN.CONNECTED},[w]),b=(0,l.T)(),S=v(),Y=(0,o.useCallback)(function(){u(!1)},[]),A=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!d.current&&!y&&b&&S){var e=setTimeout(function(){u(!0),d.current=!0},6e4);return function(){return clearTimeout(e)}}},[y,b,S]),(0,i.Y)(f.a,{isOpen:t,onRequestClose:Y,maxWidth:360,centered:!0,children:(0,i.FD)(m.S,{gap:8,children:[(0,i.Y)(h.Y9,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.Y)(h.EY,{css:g.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.FD)(m.S,{css:g.splitContainer,row:!0,gap:8,justify:"space-between",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:Y}),(0,i.Y)(m.S,{row:!0,gap:8,children:(0,i.Y)(p.$n,{text:"Refresh",onClick:A,colorway:"blue"})})]})]})})}},93515:(e,n,t)=>{"use strict";t.d(n,{H:()=>Y,j:()=>b});var r=t(66622),i=t(27189),o=t(94086),a=t(30758),l=t(34805),s=t(35541),c=t(24955),u=t(10168),d=t(2298),p=t(32842),f=t(40172),h=t(40889),m=t(8367),g=t(29048),v=t(30111),w=t(43249),y=t(68753);function b(e){var n=e.secrets,t=e.otherSecrets,i=new Map,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,r._)(s.value,2),d=u[0],p=u[1];n.has(d)||i.set(d,p)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{missing:i}}var S=(0,u.x)({root:[p.wp.borderRadius(8),{border:"1px solid "+c.LU.outlineDimmer}],button:[p.wp.reset.button,d.b.nofill,p.wp.rowWithGap(8),p.wp.align.center,p.wp.height(32),p.wp.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[p.wp.flex.growAndShrink(1),p.wp.rowWithGap(8),p.wp.align.center],expanded:[p.wp.px(8),p.wp.pb(8)],missingSecret:[p.wp.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+c.LU.outlineDimmest,top:-1},p.wp.py(8),p.wp.position.relative]});function Y(e){var n=e.secrets,t=e.otherSecrets,u=e.otherEnvName,d=e.onAddSecret,p=e.initialExpanded,Y=b({secrets:n,otherSecrets:t}).missing,A=(0,r._)((0,a.useState)(p),2),C=A[0],x=A[1],_=0===Y.size;if((0,a.useEffect)(function(){_&&x(!1)},[_]),_)return null;var k="".concat(Y.size," ").concat((0,l.A)("secret",Y.size)," out of sync"),D=1===Y.size?"A ".concat(u," secret is missing from this environment"):"".concat(Y.size," ").concat(u," secrets are missing from this environment");return(0,o.FD)(m.S,{css:S.root,children:[(0,o.FD)(m.S,{css:S.button,tag:"button",onClick:function(){return x(function(e){return!e})},children:[(0,o.FD)(m.S,{css:S.buttonText,children:[(0,o.Y)(y.A,{color:c.LU.orangeDefault}),(0,o.Y)(h.EY,{multiline:!1,children:k})]}),C?(0,o.Y)(v.A,{}):(0,o.Y)(g.A,{})]}),C?(0,o.FD)(m.S,{css:S.expanded,children:[(0,o.Y)(h.EY,{css:S.subtitle,color:"dimmer",children:D}),(0,o.Y)(m.S,{gap:8,children:(0,i._)(Y.entries()).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return(0,o.FD)(m.S,{row:!0,gap:8,children:[(0,o.FD)(m.S,{css:S.missingSecret,row:!0,gap:8,children:[(0,o.Y)(s.Ge,{value:t}),(0,o.Y)(s.iJ,{value:i})]}),i?(0,o.Y)(f.$n,{iconLeft:(0,o.Y)(w.A,{}),variant:"outlined",text:"Add secret",onClick:function(){return d({key:t,value:i})}}):null]},t)})})]}):null]})}},66733:(e,n,t)=>{"use strict";t.d(n,{A:()=>g,M:()=>w});var r=t(20837),i=t(16530),o=t(94086),a=t(53654),l=t(10168),s=t(32842),c=t(40172),u=t(68463),d=t(31955),p=t(40889),f=t(8367),h=t(50656),m=(0,l.x)({code:[s.wp.font.code,s.wp.flex.grow(1)],surface:[s.wp.borderRadius(8),s.wp.p(8),s.wp.flex.row,s.wp.rowWithGap(8),s.wp.align.center,s.wp.width("100%"),s.wp.overflowX("auto")]});function g(e){var n=w(e.filePath,e.keyName);if(!n)return null;var t=n.import,i=n.access;return(0,o.FD)(f.S,{gap:8,children:[t?(0,o.Y)(v,(0,r._)({code:t},e)):null,(0,o.Y)(v,(0,r._)({code:i},e))]})}function v(e){var n=e.code,t=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.FD)(d.ui,{elevated:r.elevated,css:m.surface,children:[(0,o.Y)(u.r,{textToCopy:n}),(0,o.Y)(p.EY,{variant:"small",css:m.code,multiline:!1,children:n}),t?(0,o.Y)(c.$n,{variant:"outlined",size:"small",onClick:function(){return t(n)},text:"Insert",iconRight:(0,o.Y)(h.A,{})}):null]})}function w(e,n){if(!e)return null;switch((0,a.an)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(n,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(n,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(n,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(n,'")')};case"rb":return{import:null,access:'ENV["'.concat(n,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(n,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(n,'");')};case"sh":return{import:null,access:'"$'.concat(n,'"')};default:return null}}},35541:(e,n,t)=>{"use strict";t.d(n,{g1:()=>ep.g1,R6:()=>eO,Ge:()=>ep.Ge,iJ:()=>ep.iJ,Ay:()=>eZ,WM:()=>ej,Nz:()=>eV});var r=t(13454),i=t(72275),o=t(20837),a=t(43952),l=t(66622),s=t(27189),c=t(5482),u=t(94086),d=t(30758),p=t(55937),f=t(9546),h=t(14178),m=t(39651),g=t(83733),v=t(20334),w=t(82436),y=t(84504),b=t(24481),S=t(29454),Y=t(25204),A=t.n(Y),C=t(87590),x=t(10168),_=t(32842),k=t(93532),D=t(8367),E=t(79653),R=(0,x.x)({buttonLink:[_.wp.reset.button,_.wp.linkStyle]});function I(){return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(D.S,{gap:4,children:[(0,u.FD)("div",{children:[(0,u.Y)("code",{children:"HTML/CSS/JS"})," Apps don't support secrets since they are statically hosted."]}),(0,u.Y)("div",{children:(0,u.Y)(A(),{href:h.ik.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}function F(e){var n=e.performPaneOperation,t=e.editSecretsAuthz;return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(D.S,{gap:4,children:[t.isAuthorized?null:(0,u.Y)(k.N,{icon:(0,u.Y)(E.A,{}),text:t.message}),(0,u.Y)("div",{children:(0,u.Y)(A(),{href:h.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})}),(0,u.FD)("div",{children:["Not sure where to start?"," ",(0,u.Y)("button",{onClick:function(){n({operation:"open",pane:{type:"integrations"}}),(0,w.u4)(w.AZ.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})},css:R.buttonLink,children:"Explore Integrations."})]})]})})}function T(e){var n=e.message;return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(D.S,{gap:4,children:[(0,u.Y)("div",{children:n}),(0,u.Y)("div",{children:(0,u.Y)(A(),{href:h.ik.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}var P=t(66733),L=t(43740),U=t(75165),N=t(24955),O=t(40172),M=t(47303),B=t(95235),H=t(31955),z=t(40889),W=t(65599),G=t(83290),V=t(98335),j=t(85213),Z=(0,x.x)({root:[_.wp.flex.column,_.wp.p(8),_.wp.colWithGap(8)],header:[_.wp.gap(4),_.wp.align.start,{"& > *:first-child":[_.wp.flex.growAndShrink(1),{alignSelf:"end"}]}],list:[_.wp.flex.column,_.wp.borderRadius(),_.wp.overflow("hidden")],item:[_.wp.display.grid,_.wp.align.center,_.wp.justify.spaceBetween,_.wp.px(8),_.wp.py(12),_.wp.border({direction:"bottom",color:N.LU.outlineDimmer,width:1}),{gridTemplateColumns:"1fr 1fr","&:last-child":{borderBottom:"none"},"> *:last-child":{justifyContent:"end"}}],itemName:[_.wp.flex.row,_.wp.gap(8),_.wp.align.center,_.wp.overflow("hidden"),{"*":{overflow:"hidden",textOverflow:"ellipsis"}}],itemValue:[_.wp.overflow("hidden"),_.wp.flex.row,_.wp.gap(4),_.wp.align.center,{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},span:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}]}),q=function(e){var n=e.name,t=e.value,r=e.checked,i=e.onCheck,o=e.disabled,a=e.disabledReason,s=e.linked,c=(0,l._)((0,d.useState)(!0),2),p=c[0],f=c[1];return(0,u.FD)(D.S,{css:Z.item,children:[(0,u.FD)("div",{css:Z.itemName,children:[s?(0,u.Y)(W.m_,{tooltip:"Linked to Account Secrets",children:(0,u.Y)(j.A,{color:N.LU.accentPrimaryStronger})}):(0,u.Y)(M.S,{checked:r,onChange:i,id:"secret-".concat(n),name:"Select secret",disabled:o}),(0,u.Y)("label",{htmlFor:"secret-".concat(n),children:n}),o&&!s&&a?(0,u.Y)(W.m_,{tooltip:a,children:(0,u.Y)(E.A,{color:N.LU.foregroundDimmer})}):null]}),(0,u.FD)(D.S,{css:Z.itemValue,"data-sensitive":p,children:[(0,u.Y)("span",{children:p?"****************":t}),(0,u.Y)(B.K0,{alt:p?"Hide secret":"Show secret",onClick:function(){return f(!p)},children:p?(0,u.Y)(V.A,{}):(0,u.Y)(G.A,{})})]})]})};function K(e){var n=e.secrets,t=e.onSelectSecrets,r=e.actionText,i=e.helpText,o=e.existingKeys,a=e.linkedSecrets,s=void 0===a?[]:a,c=(0,l._)((0,d.useState)(new Set),2),p=c[0],f=c[1],h=s.length>=10,m=s.length+p.size>=10,g=(0,d.useCallback)(function(){return n.filter(function(e){return p.has(e.name)})},[n,p]),v=new Set(s.map(function(e){return e.secret.id}));return(0,u.FD)(D.S,{css:Z.root,children:[h?(0,u.Y)(k.N,{colorway:"warning",icon:(0,u.Y)(E.A,{}),text:"You've reached the limit of ".concat(10," linked secrets. Please unlink some secrets before adding more.")}):m?(0,u.Y)(k.N,{colorway:"warning",icon:(0,u.Y)(E.A,{}),text:"Selecting another secret would exceed the limit of ".concat(10," linked secrets.")}):null,(0,u.FD)(D.S,{css:Z.header,row:!0,justify:"space-between",children:[(0,u.Y)(z.EY,{variant:"subheadDefault",children:"Account secrets are only visible to you."}),(0,u.Y)(O.$n,{colorway:"primary",text:r,disabled:0===p.size,onClick:function(){return t(g())},size:"small"})]}),(0,u.Y)(z.EY,{color:"dimmer",children:i}),(0,u.Y)(H.ui,{elevated:!0,css:Z.list,children:n.map(function(e){return(0,u.Y)(q,{checked:p.has(e.name),onCheck:function(n){n&&s.length+p.size>=10||f(function(t){var r=new Set(t);return n?r.add(e.name):r.delete(e.name),r})},value:e.value||"",name:e.name,linked:v.has(e.id),disabled:o.has(e.name)||h||!p.has(e.name)&&m,disabledReason:o.has(e.name)?"A secret with this name already exists in this Repl":h?"Secret limit reached. Please unlink some secrets before adding more.":m&&!p.has(e.name)?"Cannot select more secrets. This would exceed the limit of ".concat(10):void 0},e.name)})})]})}var $=t(55195),J=t(6570),Q=t(16608),X=t(81383),ee=t(9980),en=t(26150),et=t(68062),er=t(76985),ei=t(16021),eo=t(16882),ea=t(10690),el=t(53323),es=w.AZ.ENV_EDITOR_USED;function ec(e){var n,t=e.secrets,i=e.update,o=e.disabledMessage,a=(0,l._)((0,d.useState)(!1),2),s=a[0],p=a[1],f=(0,l._)((0,d.useState)(!1),2),h=f[0],m=f[1],g=(0,l._)((0,d.useState)(!1),2),v=g[0],y=g[1],b=(0,l._)((0,d.useState)(0),2),S=b[0],Y=b[1],A=(0,l._)((0,d.useState)(0),2),C=A[0],x=A[1],E=0===S,R=(0,J.bu)(function(e){var n=e.state.doc.toString(),t=0===C?eu(n):ed(n);return Y(t),(0,w.u4)(es,{action:0===t?"rawEditorUpdatedSuccess":"rawEditorUpdatedError"}),[]}),I=(0,ee.A)(),F=I.ref,T=I.view,P=function(){h||p(!1)},L=function(){y(!1),p(!0),(0,w.u4)(es,{action:"rawEditorOpened"})},U=function(){if(!T)return!1;var e=T.state.doc.toString(),n=0===C?eu(e):ed(e);return Y(n),0===n},M=(n=(0,r._)(function(){var e,n;return(0,c.YH)(this,function(t){switch(t.label){case 0:if(!T||!U())return[2];m(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),e=T.state.doc.toString(),[4,i(0===C?new Map(Object.entries(JSON.parse(e)).map(function(e){var n=(0,l._)(e,2);return[n[0],n[1]]})):en.A.parse(e))];case 2:return t.sent(),m(!1),y(!0),setTimeout(function(){P(),setTimeout(function(){y(!1)},500)},500),[3,4];case 3:return n=t.sent(),$.Cp(n),(0,w.u4)(es,{action:"rawEditorUpdatedError"}),Y(4),m(!1),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,d.useEffect)(function(){if(T){var e=0===C?JSON.stringify(Object.fromEntries(t.entries()),null,2):en.A.serialize(t);0===C&&"{}"===e&&(e="{\n  \n}"),T.dispatch({changes:{from:0,to:T.state.doc.length,insert:e}}),T.dispatch({selection:{anchor:T.state.doc.length-(0===C?2:0)}}),T.focus()}},[T,t,C]),(0,u.FD)(W.m_,{isDisabled:void 0===o,tooltip:o,children:[(0,u.FD)(D.S,{row:!0,gap:8,children:[(0,u.Y)(O.$n,{onClick:function(){x(0),L()},text:"Edit as JSON",iconLeft:(0,u.Y)(eo.A,{}),size:"small",disabled:void 0!==o||h}),(0,u.Y)(O.$n,{onClick:function(){x(1),L()},text:"Edit as .env",iconLeft:(0,u.Y)(el.A,{}),size:"small",disabled:void 0!==o||h})]}),(0,u.Y)(er.a,{isOpen:s,onRequestClose:function(){return P()},children:(0,u.FD)(D.S,{gap:24,children:[(0,u.Y)(z.Y9,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,u.Y)(z.EY,{children:0===C?"Secrets are specified in JSON. Values must be strings.":'Secrets are specified in .env format (KEY="value").'}),(0,u.Y)(H.ui,{css:[_.wp.borderRadius(8),_.wp.transition.snappy,_.wp.p(4),{border:"1px solid ".concat(N.LU.outlineDimmer),":hover":{borderColor:N.LU.outlineStronger}}],elevated:!0,children:(0,u.Y)(X.Ay,{ref:F,readOnly:h||v,extensions:[R,Q.w4.of([{key:(0,et.FM)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return M(),!0},preventDefault:!0,stopPropagation:!0}])],language:0===C?"json":"properties",hideGutter:!0})}),(0,u.FD)(D.S,{row:!0,gap:4,justify:"end",children:[!E&&(0,u.Y)(k.N,{icon:(0,u.Y)(ea.A,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return'Make sure the data is in valid .env format (KEY="value").';case 3:return"Make sure that all values are strings.";case 5:return"Make sure that all keys are non-empty strings.";case 4:return"There was an error saving the secrets.";default:return""}}(S)}),(0,u.FD)(D.S,{row:!0,gap:12,children:[(0,u.Y)(O.$n,{onClick:P,text:"Cancel"}),(0,u.Y)(O.$n,{iconLeft:(0,u.Y)(ei.A,{}),stretch:!0,colorway:v?"positive":"primary",text:v?"Saved!":"Save",disabled:!E||h||v,onClick:function(){return M()}})]})]})]})})]})}function eu(e){try{var n=JSON.parse(e);for(var t in n){if("string"!=typeof t||"string"!=typeof n[t])return 3;if(!t.trim())return 5}return 0}catch(e){return 1}}function ed(e){try{var n=e.replace(/#.*$/gm,"").split("\n"),t="",r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if((t+=(t?"\n":"")+c).trim()){var u=(t.match(/'/g)||[]).length,d=(t.match(/"/g)||[]).length;if(u%2!=0||d%2!=0){if(c===n[n.length-1])return 2;continue}t=""}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var p=en.A.parse(e),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)if(!(0,l._)(g.value,1)[0].trim())return 5}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}return 0}catch(e){return 2}}var ep=t(37599),ef=t(52757),eh=t(14968),em=t(25877),eg=t(57542),ev=t(28354),ew=t(60872),ey=t(31520),eb=t(17605),eS=t(12770),eY=t(54858),eA=t(92578),eC=t(10001),ex=t(14753),e_=t(43249),ek=t(99413),eD=t(46086),eE=t(8351),eR=(0,ef.AH)([_.wp.center,_.wp.coverContainer]),eI=_.kL.max(420),eF=(0,x.x)({root:[_.wp.flex.column,_.wp.flex.growAndShrink(1),_.wp.height("100%")],body:[_.wp.flex.growAndShrink(1),_.wp.overflowY("auto")],header:[_.wp.border({color:N.LU.outlineDimmest,width:1,direction:"bottom"}),_.wp.overflowX("auto"),_.wp.overflowY("hidden")],tabs:[_.wp.flex.growAndShrink(1),{height:"100%",'[role="tablist"]':{height:"100%","& > *":{borderRadius:0}}}],tabExtraText:(0,i._)({},eI,{display:"none"}),headerButtons:[_.wp.gap(8),_.wp.p(8)],addSecretTitleContainer:[_.wp.width("40%")],addSecretValueSection:[_.wp.flex.growAndShrink(1)],secretSelect:[_.wp.minWidth(48)],addSecretContainer:[_.wp.flex.column,_.wp.colWithGap(8),_.wp.py(8),_.wp.flex.column,_.wp.colWithGap(8)],addSecretValue:[],addSecretValueLabel:[{label:[_.wp.display.flex,_.wp.flex.row,_.wp.gap(4),_.wp.align.center]}]}),eT=(0,x.x)({body:[_.wp.flex.growAndShrink(1),_.wp.overflowY("auto")],footer:[_.wp.p(4),_.wp.border({color:N.LU.outlineDimmer,width:1,direction:"top"}),{"& > *":{width:"fit-content"}}],accessSecret:[_.wp.px(8),_.wp.py(16),_.wp.colWithGap(8)],link:[_.wp.linkStyle,_.wp.color.foregroundDefault]}),eP=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function eL(e){var n=e.onClose,t=e.onAdd,r=e.otherKeys,i=(0,l._)((0,d.useState)(!0),2),s=i[0],c=i[1],p=(0,l._)((0,d.useState)({key:"",value:""}),2),f=p[0],h=p[1],m=(0,l._)((0,d.useState)(function(){var e=Math.floor(Math.random()*eP.length);return eP[e]}),1)[0],g=(0,d.useMemo)(function(){return null!==f.key.match(ep.Hs)},[f.key]),v=(0,d.useMemo)(function(){return r.includes(f.key)?"Secret already exists":!g&&f.key?ep.ll:void 0},[r,f.key,g]),w=f.key.length>0&&!v,y=function(){w&&(t({key:f.key.trim(),value:f.value}),h({key:"",value:""}))};return(0,u.FD)(D.S,{css:eF.addSecretContainer,onKeyDown:function(e){"Enter"===e.key&&y()},children:[(0,u.FD)(D.S,{row:!0,gap:8,children:[(0,u.Y)(D.S,{css:eF.addSecretTitleContainer,children:(0,u.FD)(eb.A_,{validate:function(){return v},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:f.key,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{key:e})})},isInvalid:!!v,children:[(0,u.Y)(ew.J,{color:"dimmer",multiline:!1,children:"Key"}),(0,u.Y)(ev.pd,{placeholder:m,autoComplete:"off",autoFocus:!0}),(0,u.Y)(eg.bg,{children:v})]})}),(0,u.Y)(D.S,{css:eF.addSecretValueSection,gap:4,children:(0,u.FD)(eb.A_,{isRequired:!0,minLength:1,name:"secretValue",value:f.value,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{value:e})})},css:eF.addSecretValue,children:[(0,u.FD)(ew.J,{color:"dimmer",multiline:!1,css:eF.addSecretValueLabel,children:["Value",(0,u.Y)(B.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return c(!s)},size:12,children:s?(0,u.Y)(G.A,{}):(0,u.Y)(V.A,{})})]}),(0,u.Y)(ev.pd,{"data-sensitive":s,autoComplete:"off"})]})})]}),(0,u.FD)(D.S,{row:!0,gap:8,justify:"end",children:[(0,u.Y)(O.$n,{size:"small",text:"Cancel",onClick:function(){return n()}}),(0,u.Y)(O.$n,{size:"small",text:"Add Secret",colorway:"primary",disabled:!w,onClick:y})]})]})}var eU=[_.wp.flex.row,_.wp.rowWithGap(8),_.wp.align.center],eN=(0,x.x)({root:[_.wp.height("100%"),_.wp.borderRadius(8),{'& [aria-haspopup="listbox"]':[_.wp.height(32)]}],item:eU,itemDanger:[eU,{color:N.LU.accentNegativeStronger}]});function eO(e){var n=e.onEdit,t=e.onDelete,r=e.onSearch;return(0,u.Y)(H.ui,{elevated:!0,css:eN.root,children:(0,u.Y)(eS.A,{label:"Options",items:[{label:(0,u.FD)(D.S,{css:eN.item,children:[(0,u.Y)(eC.A,{}),(0,u.Y)(z.EY,{multiline:!1,children:"Edit"})]}),onClick:n},r&&{label:(0,u.FD)(D.S,{css:eN.item,children:[(0,u.Y)(ek.A,{}),(0,u.Y)(z.EY,{multiline:!1,children:"Find Usages"})]}),onClick:r},{label:(0,u.FD)(D.S,{css:eN.itemDanger,children:[(0,u.Y)(eE.A,{}),(0,u.Y)(z.EY,{multiline:!1,children:"Delete"})]}),isDestructive:!0,onClick:t}].filter(Boolean),onItemClick:function(e){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e)}})})}var eM=(0,x.x)({container:[_.wp.py(8)],blankSecretsContainer:[_.wp.px(8)],nonBlankSecretsContainer:[_.wp.px(8)],secretItem:[_.wp.p(8),_.wp.borderRadius(8),_.wp.backgroundColor.backgroundRoot]});function eB(e){var n=e.secrets,t=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,a=e.onSearch,c=e.onClose,p=e.editAuthorizationErrorMessage,f=e.linkedSecrets,h=e.userSecrets,m=e.onUpdateLink,g=e.onUnlink,v=(0,d.useMemo)(function(){return new Set((0,s._)(n.keys()).concat((0,s._)((null==f?void 0:f.map(function(e){return e.alias}))||[])))},[n,f]),w=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""===(n[0],n[1])})},[n]),y=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""!==(n[0],n[1])})},[n]);return o||0!==w.length||0!==y.length||(null==f?void 0:f.length)?(0,u.FD)(D.S,{css:eM.container,gap:8,children:[0!==w.length&&(0,u.FD)(u.FK,{children:[(0,u.FD)(D.S,{css:eM.blankSecretsContainer,gap:8,children:[(0,u.Y)(z.EY,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,u.Y)(z.EY,{variant:"small",children:"This App contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,u.Y)(D.S,{gap:8,children:w.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(H.ui,{elevated:!0,css:eM.secretItem,children:(0,u.Y)(ep.aL,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:function(){},editAuthorizationErrorMessage:p})},i)})})]}),(0,u.Y)(em.a,{})]}),(0,u.FD)(D.S,{css:eM.nonBlankSecretsContainer,gap:8,children:[o?(0,u.Y)(eL,{onClose:c,onAdd:i,otherKeys:Object.keys(n)}):null,y.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(ep.aL,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:a,editAuthorizationErrorMessage:p},i)}),f&&f.length>0?(0,u.FD)(u.FK,{children:[y.length>0?(0,u.Y)(em.a,{}):null,f.map(function(e){return(0,u.Y)(ep.x7,{link:e,onUpdateLink:m,onUnlink:g,userSecrets:h,existingKeys:v},e.id)})]}):null]})]}):null}function eH(e){var n=e.secrets,t=e.activeFile,r=(0,l._)((0,d.useState)(n.keys().next().value),2),i=r[0],o=r[1];return(0,L.A)(t)&&(0,P.M)(t,i)&&n.size>0?(0,u.FD)(D.S,{css:eT.accessSecret,children:[(0,u.FD)(D.S,{row:!0,gap:8,align:"center",children:[(0,u.Y)(z.EY,{multiline:!1,children:"Access secret"}),(0,u.Y)(eY.l,{css:eF.secretSelect,items:(0,s._)(n.keys()).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,u.Y)(P.A,{elevated:!0,keyName:i,filePath:t})]}):null}var ez=(0,x.x)({container:[_.wp.p(8)],text:[_.wp.flex.growAndShrink(1)]}),eW=function(e){var n,t,i,o,a,l=e.performPaneOperation,s=e.getRunState,d=e.showAddSecret,p=e.setShowAddSecret,f=e.secrets,g=e.editAuthorization,S=e.error,Y=e.dismissibleElement,A=Y.isDone,C=Y.setAsDone,x=e.linkedSecrets,_=e.userSecrets,R=e.onUpdateLink,P=e.onUnlink,L=(0,m.A)().showConfirm,N=(0,b.A)().secrets,O=(0,U.rM)(),M=(0,v.g)(),B=function(){p(!1)},H=(n=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,w.u4)(w.AZ.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),N.addEntries([{key:e.key,value:e.value}]),s()===y.ll.RUNNING&&L("Re-run your App to use this secret"),B(),[2]})}),function(e){return n.apply(this,arguments)}),W=(t=(0,r._)(function(e,n){var t;return(0,c.YH)(this,function(r){return(0,w.u4)(w.AZ.ENV_EDITOR_USED,{action:"updated",multiline:n.value.includes("\n")}),(t=new Map(f)).delete(e),t.set(n.key,n.value),N.replaceAll(t),[2]})}),function(e,n){return t.apply(this,arguments)}),G=(i=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,w.u4)(w.AZ.ENV_EDITOR_USED,{action:"deleted"}),N.removeEntries(e),[2]})}),function(e){return i.apply(this,arguments)}),V=f.size>0||x&&x.length>0;return M?(0,u.Y)(I,{}):!g||S?(0,u.Y)(T,{message:null!==(a=null==S?void 0:S.message)&&void 0!==a?a:"Unable to determine secret eligibility, please refresh your browser."}):(0,u.FD)(u.FK,{children:[(0,u.FD)(D.S,{css:eT.body,children:[g.isAuthorized&&!A?(0,u.Y)(D.S,{css:ez.container,children:(0,u.Y)(k.N,{icon:(0,u.Y)(E.A,{}),closable:!0,closeAction:function(){return C()},colorway:"primary",text:(0,u.FD)(z.EY,{css:ez.text,children:["Secrets are accessible to anyone who has access to this App. To restrict secret access, you must update App invite permissions. For more information, visit"," ",(0,u.Y)("a",{href:h.ik.SECRETS,target:"_blank",css:eT.link,children:"our documentation"}),"."]})})}):null,V||!1!==d?null:(0,u.Y)(F,{performPaneOperation:l,editSecretsAuthz:g}),(0,u.Y)(eB,{secrets:f,onUpdateSecret:W,onDeleteSecret:G,onAddSecret:H,showAddSecret:d,onSearch:function(e){return l({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},editAuthorizationErrorMessage:g.isAuthorized?void 0:g.message,onClose:B,linkedSecrets:x,userSecrets:_,onUpdateLink:R,onUnlink:P}),O&&V?(0,u.Y)(eH,{secrets:f,activeFile:O}):null]}),(0,u.Y)(D.S,{css:eT.footer,children:(0,u.Y)(ec,{secrets:f,update:(o=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return[4,N.replaceAll(e)];case 1:return n.sent(),[2]}})}),function(e){return o.apply(this,arguments)}),disabledMessage:g.isAuthorized?void 0:g.message})})]})},eG={SECRETS:0,ACCOUNT_SECRETS:1};function eV(e,n){return(0,f.AH)({update:function(t,r,i){var l=r.data,s=i.variables;(null==l?void 0:l.unlinkSharedSecrets.__typename)==="UnlinkSharedSecretsResult"&&t.updateQuery({query:f.tD,variables:{replId:e}},function(e){if(!(null==e?void 0:e.getRepl)||"Repl"!==e.getRepl.__typename||!s)return e;var t,r,i=null!==(r=null===(t=e.getRepl.sharedSecretLinks)||void 0===t?void 0:t.filter(function(e){return!s.input.ids.includes(e.id)}))&&void 0!==r?r:[];return n(i.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:i})})})}})}function ej(e,n){return(0,f.DX)({update:function(t,i){var l=i.data;return(0,r._)(function(){var r,i,u,d,p,h;return(0,c.YH)(this,function(c){switch(c.label){case 0:if((null==l?void 0:l.linkSharedSecrets.__typename)!=="LinkSharedSecretsResult")return[3,2];return i=l.linkSharedSecrets.links,p=(null==(u=t.readQuery({query:f.tD,variables:{replId:e}}))?void 0:null===(r=u.getRepl)||void 0===r?void 0:r.__typename)==="Repl"&&null!==(d=u.getRepl.sharedSecretLinks)&&void 0!==d?d:[],[4,n((h=(0,s._)(p).concat((0,s._)(i))).map(function(e){return{key:e.alias,url:e.secret.signedUrl}}))];case 1:c.sent(),t.updateQuery({query:f.tD,variables:{replId:e}},function(e){return(null==e?void 0:e.getRepl)&&"Repl"===e.getRepl.__typename?(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:h})}):e}),c.label=2;case 2:return[2]}})})()}})}function eZ(e){var n,t,i,v,y=e.getRunState,Y=e.performPaneOperation,A=(0,g.A)(),C=(0,b.A)().secrets,x=(0,l._)(eV(A,C.replaceAllExternalSecrets),1)[0],_=(0,l._)(ej(A,C.replaceAllExternalSecrets),1)[0],k=(0,l._)((n=(0,b.A)().secrets,(0,f.vC)({update:function(e,t){var r=t.data;if((null==r?void 0:r.updateSharedSecretLink.__typename)==="SharedSecretLink"){var i=r.updateSharedSecretLink;e.updateQuery({query:f.tD,variables:{replId:A}},function(e){if((null==e?void 0:null===(t=e.getRepl)||void 0===t?void 0:t.__typename)!=="Repl")return e;var t,r,l,s=null!==(l=null===(r=e.getRepl.sharedSecretLinks)||void 0===r?void 0:r.map(function(e){return e.id===i.id?i:e}))&&void 0!==l?l:[];return n.replaceAllExternalSecrets(s.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:s})})})}}})),1)[0],E=(0,l._)((0,d.useState)(eG.SECRETS),2),R=E[0],I=E[1],F=(0,l._)((0,d.useState)(new Map),2),T=F[0],P=F[1],L=(0,l._)((0,d.useState)(!1),2),U=L[0],N=L[1],M=(0,m.A)(),B=(0,S.Z)("editors-have-secret-access-warning"),H=(0,f.d3)({variables:{replId:A}}),z=H.data,G=H.loading,V=H.error,j=(null==z?void 0:z.getRepl.__typename)==="Repl"?z.getRepl:void 0,Z=null==j?void 0:j.authorizations.editSecrets,q=(0,f.bM)({variables:{replId:A}}),$=q.data,J=q.loading,Q=(0,f.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,X=(0,d.useMemo)(function(){if((null==$?void 0:$.getRepl.__typename)==="Repl"&&$.getRepl.sharedSecretLinks)return $.getRepl.sharedSecretLinks},[$]),ee=(0,d.useMemo)(function(){var e;return(null==Q?void 0:null===(e=Q.currentUser)||void 0===e?void 0:e.secrets.__typename)==="SharedSecretConnection"?Q.currentUser.secrets.items:[]},[Q]),en=(0,d.useMemo)(function(){return new Set((0,s._)(T.keys()).concat((0,s._)((null==X?void 0:X.map(function(e){return e.alias}))||[])))},[T,X]),et=(0,d.useMemo)(function(){return ee.map(function(e){return{id:e.id,value:e.value||""}})},[ee]);(0,d.useEffect)(function(){(0,w.xm)(w.AZ.ENV_EDITOR_USED,{action:"opened",tab:R===eG.ACCOUNT_SECRETS?"account":"repl"})},[R]),(0,d.useEffect)(function(){var e=C.watch(function(e){P(e)});return function(){e()}},[C,P]);var er=(t=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_({variables:{input:{resourceId:A,resourceType:p.U9.Repl,secrets:e.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 1:return n.sent(),M.showConfirm("Secrets linked to this App"),I(eG.SECRETS),(0,w.u4)(w.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"secrets-pane",count:e.length,keys:e.map(function(e){return e.name})}),[3,3];case 2:return n.sent(),M.showError("Failed to link secrets"),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)});return!T||G||J||B.isLoading?(0,u.Y)(D.S,{css:eR,children:(0,u.Y)(ex.A,{size:24})}):(0,u.FD)(D.S,{css:eF.root,children:[(0,u.FD)(D.S,{css:eF.header,row:!0,gap:8,align:"center",children:[(0,u.Y)(ey.tU,{selectedIndex:R,onSelectionChange:function(e){return I(e)},css:eF.tabs,children:(0,u.FD)(ey.wb,{withDividers:!1,withUnderline:!1,children:[(0,u.FD)(ey.oz,{children:["App ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Secrets"})]},eG.SECRETS),(null==j?void 0:j.isOwner)?(0,u.FD)(ey.oz,{children:["Account ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Secrets"})]},eG.ACCOUNT_SECRETS):null]})}),(0,u.FD)(D.S,{css:eF.headerButtons,row:!0,children:[(0,u.Y)(eh.v,{iconLeft:(0,u.Y)(eA.A,{}),href:h.ik.SECRETS,size:"small",text:"Docs",target:"_blank"}),R===eG.SECRETS?(0,u.Y)(W.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(O.$n,{iconLeft:(0,u.Y)(e_.A,{}),text:(0,u.FD)(u.FK,{children:["New ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Secret"})]}),colorway:"primary",size:"small",disabled:!(null==Z?void 0:Z.isAuthorized),onClick:function(){return N(!0)}})}):null,R===eG.ACCOUNT_SECRETS?(0,u.Y)(W.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(eh.v,{iconLeft:(0,u.Y)(eD.A,{}),text:(0,u.FD)(u.FK,{children:["Manage ",(0,u.Y)("span",{css:eF.tabExtraText,children:"Account"})]}),colorway:"primary",size:"small",href:"/account#account-secrets",target:"_blank"})}):null]})]}),(0,u.FD)(D.S,{css:eF.body,children:[R===eG.SECRETS?(0,u.Y)(eW,{getRunState:y,performPaneOperation:Y,showAddSecret:U,setShowAddSecret:N,secrets:T,dismissibleElement:B,editAuthorization:Z,error:V,linkedSecrets:X,userSecrets:et,onUpdateLink:(i=(0,r._)(function(e,n){return(0,c.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,k({variables:{input:{id:e,resourceId:A,resourceType:p.U9.Repl,alias:n}}})];case 1:return t.sent(),M.showConfirm("Secret link updated"),[3,3];case 2:return t.sent(),M.showError("Failed to update secret link"),[3,3];case 3:return[2]}})}),function(e,n){return i.apply(this,arguments)}),onUnlink:(v=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,x({variables:{input:{resourceId:A,resourceType:p.U9.Repl,ids:[e]}}})];case 1:return n.sent(),M.showConfirm("Secret unlinked"),[3,3];case 2:return n.sent(),M.showError("Failed to unlink secret"),[3,3];case 3:return[2]}})}),function(e){return v.apply(this,arguments)})}):null,R===eG.ACCOUNT_SECRETS?(0,u.Y)(K,{secrets:ee,actionText:"Link to this App",helpText:"Linked secrets will stay in sync with your Account Secrets.",existingKeys:en,onSelectSecrets:er,linkedSecrets:X}):null]})]})}},37163:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(66622),i=t(27189),o=t(30758),a=t(24481);function l(){var e=(0,a.A)().secrets,n=(0,r._)((0,o.useState)(null),2),t=n[0],l=n[1],s=(0,o.useMemo)(function(){return!!t&&(0,i._)(t.values()).some(function(e){return!e})},[t]);return(0,o.useEffect)(function(){return e.watch(l)},[t,e]),s}},50809:(e,n,t)=>{"use strict";t.d(n,{UC:()=>B,ou:()=>z,Y9:()=>T,Bm:()=>L,Yw:()=>O,Gp:()=>W,af:()=>H,KA:()=>G});var r=t(13454),i=t(5482),o=t(94086),a=t(60049),l=t.n(a),s=t(30758),c=t(19327),u=t(63679),d=t(32904),p=t(98734),f=t(53654);function h(){return(h=(0,r._)(function(e,n){var t,r,o,a,l;return(0,i.YH)(this,function(i){return t=(0,f.P7)(e),r=(0,f.WP)(e),o=new Blob([n.toBuffer()],{type:t}),(a=document.createElement("a")).download=r,l=window.URL.createObjectURL(o),a.href=l,a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),URL.revokeObjectURL(l)},1e4),[2]})})).apply(this,arguments)}var m=t(63581),g=t(24481),v=t(80062),w=t(36361),y=t(30321),b=t(19346),S=t(75165),Y=t(52757),A=t(24955),C=t(32842),x=t(8367),_=t(2459),k=t(30846),D=t(73197),E=t(85213),R=t(42838),I=t(8351),F=(0,Y.AH)([C.wp.height(28),C.wp.flex.row,C.wp.align.center,{borderBottom:"1px solid ".concat(A.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function T(e){return"/replEnvironmentDesktop"!==l().pathname?null:(0,o.Y)(x.S,{css:F,children:e.children})}var P=(0,Y.AH)([C.wp.flex.row,C.wp.align.center,C.wp.flex.growAndShrink(1),C.wp.overflowX("auto"),C.wp.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function L(e){return(0,o.Y)(x.S,{css:P,children:e.children})}var U=(0,Y.AH)([C.wp.flex.row,C.wp.align.center,C.wp.height("100%")]),N=(0,Y.AH)([C.wp.flex.row,C.wp.align.center,C.wp.height("100%"),C.wp.px(2)]);function O(e){return(0,o.Y)(x.S,{css:U,children:(0,o.Y)(x.S,{css:N,children:e.children})})}var M=(0,Y.AH)([C.wp.flex.growAndShrink(1),C.wp.position.relative,C.wp.overflow("hidden"),C.wp.borderRadius(0,0,8,8)]);function B(e){return(0,o.Y)(x.S,{css:[M,e.children&&C.wp.center],children:e.children})}function H(e){return{type:(0,b.QY)({path:e}),data:{path:e}}}function z(e){var n=e.path,t=e.performPaneOperation,r=e.children,i=(0,s.useCallback)(function(e){t({operation:"replace",pane:H(e)})},[t]);return(0,o.FD)(T,{children:[(0,o.Y)(L,{children:(0,o.Y)(w.D,{path:n,onFileClick:i})}),r?(0,o.Y)(O,{children:r}):null]})}function W(e,n){return{match:v.G2,data:{label:"Download",icon:(0,o.Y)(D.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,n.readFile(e)];case 1:if((t=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,function(e,n){return h.apply(this,arguments)}(e,t.content)];case 2:return r.sent(),[2]}})})()}}}}function G(e){var n=e.path,t=e.performPaneOperation,a=(0,g.A)(),l=(0,S.gi)(),s=(0,u._P)({controlName:"flag-draft-buffers"});return(0,d.A)(function(){if(!n)return null;var e,u,d,f=[{match:v.G2,data:{label:"Copy file path",icon:(0,o.Y)(_.A,{}),type:"action",run:function(){(0,p.A)(n)}}},{match:v.G2,data:{label:"Copy link",icon:(0,o.Y)(E.A,{}),type:"action",run:function(){var e=(0,y.Ax)({path:n});(0,p.A)(e)}}},(e=a.fs,u=function(e){t({operation:"replace",pane:{type:(0,b.QY)({path:e}),data:{path:e}}})},{match:v.G2,data:{label:"Duplicate file",icon:(0,o.Y)(k.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,m.A)(n,e)];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return u(t),[2]}})})()}}}),W(n,a.fs),{match:v.G2,data:{label:"Delete",icon:(0,o.Y)(I.A,{color:A.LU.redDefault}),type:"action",run:function(){l(n)}}}];return s&&f.unshift((d=a.fs,{match:v.G2,data:{label:"Save file",icon:(0,o.Y)(R.A,{}),type:"action",run:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,d.flush(new Set([n]),c.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()}}})),f},[n,a.fs,t,l,s])}},60221:(e,n,t)=>{"use strict";t.d(n,{SS:()=>v});var r=t(20837),i=t(43952),o=t(94086),a=t(30758),l=t(40114),s=t(63679),c=t(24955),u=t(2298),d=t(32842),p=t(31955),f=t(40889),h=t(8367),m=t(82489),g=t(73128),v={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}},w={self:[d.wp.position.relative,d.wp.width(20),d.wp.height("100%"),d.wp.justify.center,{"& span":{height:"100%"}}],self2:[d.wp.position.relative,d.wp.width(16),d.wp.height("100%"),d.wp.justify.center,d.wp.pr(1)],button:[d.wp.display.flex,d.wp.align.center,d.wp.justify.center,d.wp.py(2),d.wp.top(0),d.wp.width("100%"),d.wp.border({width:0,color:"none"}),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.borderRadius(4),u.b.filled,d.wp.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[d.wp.display.flex,d.wp.align.center,d.wp.py(2),d.wp.width("100%"),d.wp.height("100%"),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.focusRing,d.wp.borderRadius(4),{backgroundColor:"transparent",":hover":{color:c.LU.foregroundDefault}}],list:[d.wp.flex.column,d.wp.justify.center,d.wp.borderRadius(8),d.wp.zIndex(1),d.wp.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[d.wp.color.foregroundDefault,d.wp.p(8),d.wp.fontWeight.normal,d.wp.cursor.pointer,{whiteSpace:"nowrap"},n&&[d.wp.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:c.LU.accentNegativeDefault},":hover .option-label":{color:c.LU.white}}]]},optionLabel:function(e){return e?[d.wp.color.accentNegativeStronger]:[]}};function y(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,o.Y)(h.S,{css:w.option(n,t),children:(0,o.Y)(f.EY,{className:"option-label",css:w.optionLabel(n),multiline:!1,children:r})})}var b=h.D.ul,S=h.D.li,Y=h.D.button,A=h.D.div;(0,a.forwardRef)(function(e,n){var t=e.isActive,u=e.actions,C=e.onAction,x=e.onOpenChange,_=(0,a.useRef)(!1),k=(0,l.WM)({items:u,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(_.current||C(n),P())}}),D=k.isOpen,E=k.getToggleButtonProps,R=k.getMenuProps,I=k.highlightedIndex,F=k.getItemProps,T=k.openMenu,P=k.reset;(0,a.useImperativeHandle)(n,function(){return{open:T}}),(0,a.useEffect)(function(){x&&x(D)},[D,x]);var L=E(),U=(0,s._P)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,o.Y)(h.S,{css:U?w.self2:w.self,children:(0,o.FD)(m.A,{elevated:!0,showArrow:!0,isOpen:D,placement:"right-start",padding:0,onClickOutside:P,children:[(0,o.Y)(p.ui,{background:t?"default":"root",css:[d.wp.height("100%"),{background:t?c.LU.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,o.Y)(Y,(0,i._)((0,r._)({},L),{css:U?w.button2:w.button,size:20,onClick:function(e){e.stopPropagation(),L.onClick(e)},children:(0,o.Y)(g.A,{})}))}),(0,o.Y)(A,(0,i._)((0,r._)({},R({},{suppressRefError:!0})),{children:D?(0,o.Y)(b,{css:w.list,children:u.map(function(e,n){return(0,o.Y)(S,(0,i._)((0,r._)({"data-cy":"filetree-node-action-".concat(e.type)},F({item:e,index:n,onClick:function(n){_.current=!0,setTimeout(function(){_.current=!1}),C(e),n.stopPropagation()}})),{children:(0,o.Y)(y,{isHighlighted:I===n,isNegative:e.type===v.Delete.type,children:(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(f.EY,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},45234:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(94086),i=t(53654),o=t(40172),a=t(40889),l=t(8367),s=t(16087);function c(e){var n,t=e.paths,c=e.onCancel,u=e.onConfirm;return(0,r.FD)(l.S,{gap:24,children:[(0,r.Y)(a.Y9,{level:1,variant:"headerDefault",children:t.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.FD)(a.EY,{children:[(n=(n=t).map(i.WP)).length<2?n[0]:"".concat(n.slice(0,-1).join(", ")," and ").concat(n.slice(-1))," already"," ",t.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",t.length>1?"them":"it","? This cannot be undone."]}),(0,r.FD)(l.S,{row:!0,gap:12,justify:"end",children:[(0,r.Y)(o.$n,{onClick:function(){return c()},text:"Cancel"}),(0,r.Y)(o.$n,{colorway:"negative",onClick:function(){return u()},text:"Yes, overwrite ".concat(t.length>1?"these files":"this file"),iconLeft:(0,r.Y)(s.A,{})})]})]})}},90857:(e,n,t)=>{"use strict";t.d(n,{$f:()=>a,Pi:()=>o,cl:()=>i});var r=t(68062),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.FM)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},34366:(e,n,t)=>{"use strict";t.d(n,{Cv:()=>g,Vw:()=>v,Yi:()=>S,_g:()=>y,e0:()=>h,mO:()=>w,mi:()=>Y,qW:()=>m});var r=t(94086),i=t(53654),o=t(24955),a=t(10168),l=t(32842),s=t(40889),c=t(65599),u=t(8367),d=t(20778),p=t(61317),f=(0,a.x)({revertText:[l.wp.color.orangeStronger,l.wp.fontWeight.medium],mergeText:[l.wp.color.purpleStronger,l.wp.fontWeight.medium],pullRequestId:[l.wp.fontWeight.medium],hash:[l.wp.fontWeight.medium],filePathPrefix:[l.wp.color.foregroundDimmest],commitBody:[l.wp.font.code,{whiteSpace:"pre-wrap"},{fontSize:o.LU.fontSizeSmall}],clickableName:[l.wp.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[l.wp.display.inlineFlex,l.wp.rowWithGap(4),l.wp.align.center],path:[{fontSize:o.LU.fontSizeSmall},l.wp.font.code],currentBranchIndicator:[l.wp.height(16),l.wp.width(16),l.wp.align.center],currentBranchDot:[l.wp.height(6),l.wp.width(6),l.wp.backgroundColor.accentPrimaryStronger,l.wp.borderRadius("full")],branchNameWrapper:[l.wp.flex.row,l.wp.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[l.wp.display.inlineFlex,l.wp.rowWithGap(4),l.wp.align.center,l.wp.flex.shrink(1),l.wp.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},l.wp.mr(4)],headingCurrent:[l.wp.px(4)],current:[l.wp.position.relative,l.wp.top("-1px"),l.wp.display.inlineFlex,l.wp.pl(2),l.wp.pr(8)],icon:[{verticalAlign:"baseline !important"},l.wp.mr(4)],bodyContainer:[l.wp.border({color:o.LU.outlineDimmest,direction:"full"}),l.wp.borderRadius(8),l.wp.p(16)]});function h(e){var n=e.text,t=e.className;return(0,r.Y)("span",{className:t,css:f.revertText,children:n})}function m(e){var n=e.text,t=e.className;return(0,r.Y)("span",{className:t,css:f.mergeText,children:n})}function g(e){var n,t=e.id,i=e.hash,o=e.className;return n=void 0===i||i?"string"==typeof t&&t.startsWith("#")?t:"#".concat(t):"string"==typeof t&&t.startsWith("#")?t.slice(1):"".concat(t),(0,r.Y)("span",{className:o,css:f.pullRequestId,children:n})}function v(e){var n=e.hash,t=e.length,i=e.className;return(0,r.Y)("span",{className:i,css:f.hash,children:n.slice(0,(void 0===t?8:t)+1)})}function w(e){var n=e.subject,t=e.remoteName,i=e.quoted,o=void 0!==i&&i,a=e.className;return t?(0,r.Y)(d.Ay,{className:a,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:t},children:o?'"'.concat(n,'"'):n}):(0,r.Y)("span",{className:a,children:o?'"'.concat(n,'"'):n})}function y(e){var n=e.body,t=e.view,i=e.className;return"Source"===(void 0===t?"Source":t)?(0,r.Y)(u.S,{css:f.bodyContainer,children:(0,r.Y)("pre",{className:i,css:f.commitBody,children:n})}):(0,r.Y)(u.S,{css:f.bodyContainer,children:(0,r.Y)(d.Ay,{className:i,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:n})})}function b(){return(0,r.Y)("span",{css:f.fixTooltipDisplay,children:(0,r.Y)(c.m_,{tooltip:"This is your current branch",children:(0,r.Y)(u.S,{css:f.currentBranchIndicator,children:(0,r.Y)(u.S,{css:f.currentBranchDot})})})})}function S(e){var n=e.name,t=e.remote,i=e.current,o=void 0!==i&&i,a=e.heading,l=void 0!==a&&a,c=e.icon,u=void 0!==c&&c,d=e.onClick,h=e.className,m=null;return(!0===u?m=l?(0,r.Y)(p.A,{size:16}):(0,r.Y)(p.A,{css:f.icon,size:12}):u&&(m=u),l)?(0,r.FD)("div",{css:f.headingWrapper,children:[m,(0,r.FD)(s.EY,{variant:"subheadDefault",multiline:!1,children:[t?(0,r.FD)(r.FK,{children:[(0,r.Y)("span",{css:f.headingRemote,children:t}),(0,r.Y)("span",{css:f.headingRemote,children:"/"})]}):null,d?(0,r.Y)(C,{label:"View branch",onClick:d,children:n}):(0,r.Y)("span",{children:n})]}),o?(0,r.Y)("span",{css:l?f.headingCurrent:f.current,children:(0,r.Y)(b,{})}):null]}):(0,r.FD)("span",{className:h,css:f.branchNameWrapper,children:[m,t?(0,r.FD)("span",{children:[t,"/"]}):null,d?(0,r.Y)(C,{label:"View branch",onClick:d,children:n}):(0,r.Y)("span",{children:n}),o?(0,r.Y)(b,{}):null]})}function Y(e){var n=e.path,t=e.prefix,o=e.onClick,a=e.className,l=(0,i.WP)(n),s=!o&&(l===n||null!==t&&t+l===n);return(0,r.Y)("span",{css:f.fixTooltipDisplay,children:(0,r.Y)(c.m_,{maxWidth:"auto",tooltip:(0,r.Y)(A,{path:n,openable:!!o}),isDisabled:s,children:o?(0,r.FD)(C,{label:"Open ".concat(l),onClick:o,className:a,children:[t?(0,r.Y)("span",{css:f.filePathPrefix,children:t}):null,(0,r.Y)("span",{children:l})]}):(0,r.FD)("span",{className:a,children:[t?(0,r.Y)("span",{css:f.filePathPrefix,children:t}):null,(0,r.Y)("span",{children:l})]})})})}function A(e){var n=e.path,t=e.openable;return(0,r.FD)("span",{css:f.tooltip,children:[void 0===t||t?(0,r.Y)("span",{children:"Open"}):null,(0,r.Y)("span",{css:f.path,children:n})]})}function C(e){var n=e.label,t=e.onClick,i=e.className,o=e.children;return(0,r.Y)("span",{className:i,css:f.clickableName,role:"button",tabIndex:-1,"aria-label":n,onClick:t,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==t||t())},children:o})}},99858:(e,n,t)=>{"use strict";t.d(n,{$:()=>a,C:()=>o});var r=t(40174),i=t(80475),o=function(e){return e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS",e.COMMIT="COMMIT",e}({}),a=r.ZU.Union([r.ZU.Object({type:r.ZU.Literal("DASHBOARD")}),r.ZU.Object({type:r.ZU.Literal("BRANCH"),branch:i.AR}),r.ZU.Object({type:r.ZU.Literal("CURRENT_BRANCH")}),r.ZU.Object({type:r.ZU.Literal("SETTINGS")}),r.ZU.Object({type:r.ZU.Literal("COMMIT"),hash:r.ZU.String()})])},29309:(e,n,t)=>{"use strict";t.d(n,{V4:()=>c,VU:()=>d,aU:()=>u});var r=t(45009),i=t(30632),o=t(81074);function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on ReplSubscriptionExpired {\n    isOwner\n    replId\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    isOwner\n    language\n    ...ReplLinkRepl\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      connectToWorkspace {\n        isAuthorized\n      }\n    }\n    org {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c=(0,i.J1)(a()),u=(0,i.J1)(l()),d=(0,i.J1)(s(),o.r)},84124:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(94086),i=t(60049),o=t(30758),a=t(51823),l=t(85471),s=t(78709),c=t(53055);function u(e,n){return!!e&&("ReplRedirect"===e.__typename||"ReplSubscriptionExpired"===e.__typename||!e.authorizations.editFileContents.isAuthorized||!e.org&&!e.authorizations.connectToWorkspace.isAuthorized||!(0,l.Rq)(n.query.skipNixMigration,"boolean")&&(0,a.A)(e))}function d(e){var n=e.replResponse,t=e.replUrl,a=e.children,l=(0,i.useRouter)();if((0,o.useEffect)(function(){if(u(n,l)){if("ReplSubscriptionExpired"===n.__typename){var e=n.replId,r=n.isOwner,i=t.split("/")[1].slice(1),o=l.asPath.indexOf("#"),a=o<0?l.asPath:l.asPath.slice(0,o);l.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:i,replId:e}},a);return}if("ReplRedirect"===n.__typename){window.location.href=n.replUrl;return}if("Repl"===n.__typename&&!n.org&&!n.authorizations.connectToWorkspace.isAuthorized){var s=n.isOwner,d=n.id,p=n.url,f=l.asPath.indexOf("#"),h=f<0?l.asPath:l.asPath.slice(0,f);l.replace({pathname:"/replMinutesLimit",query:{isOwner:s,replId:d,replUrl:p}},h);return}if(!n.authorizations.editFileContents.isAuthorized){var m=(0,c.z9)(n),g=m.href,v=m.as;l.replace(g,v);return}window.location.reload()}},[n,t,l]),u(n,l)){var d="";return"ReplRedirect"===n.__typename?d="Repl moved, redirecting":"ReplSubscriptionExpired"===n.__typename?d="Subscription expired, redirecting":n.org||n.authorizations.connectToWorkspace.isAuthorized?n.authorizations.editFileContents.isAuthorized&&(d="Your Repl requires an upgrade, please wait"):d="Repl minutes exceeded, redirecting",(0,r.Y)(s.A,{reason:d})}return(0,r.Y)(r.FK,{children:a})}},44529:(e,n,t)=>{"use strict";t.d(n,{u:()=>m});var r=t(72275),i=t(94086),o=t(6083),a=t(24955),l=t(10168),s=t(1478),c=t(32842),u=t(8367),d=(0,s.v)(["fontSize"]),p=d.cssVars,f=d.styleTokens,h=(0,l.x)({button:[c.wp.reset.button,c.wp.flex.row,c.wp.align.center,c.wp.cursor.pointer,c.wp.hover({opacity:1}),{opacity:.6,fontFamily:a.LU.fontFamilyDefault,"*":{fontSize:f.fontSize,borderColor:a.LU.foregroundDimmest,color:a.LU.foregroundDimmest},":hover *":{borderColor:a.LU.foregroundDefault,color:a.LU.foregroundDefault}}],keyCombo:[{marginLeft:"calc(".concat(f.fontSize," * 0.3)")}]});function m(e){return(0,i.FD)(u.S,{className:e.className,tag:"button",css:h.button,style:(0,r._)({},p.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,i.Y)(u.S,{children:e.text}),e.keyCombo?(0,i.Y)(u.S,{css:h.keyCombo,justify:"center",children:(0,i.Y)(o._y,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}},6806:(e,n,t)=>{"use strict";t.d(n,{DH:()=>g,GK:()=>w,N_:()=>m,aP:()=>d,pX:()=>u,s7:()=>v,sC:()=>p});var r=t(20837),i=t(43952),o=t(30758),a=t(99813),l=t(72653),s=t(25161),c=t(32904),u=(0,s.F)(function(){return null}),d=(0,s.F)(function(){return null});function p(e){var n=d.current();(0,o.useEffect)(function(){e!==n&&d.set(function(){return e})},[e,n])}var f=(0,a.eU)(null),h=(0,a.eU)(null,function(e,n,t){var o,a,l=e(f),s=l?(0,r._)({},l,t):(0,r._)({},t),c=null==s?void 0:s.changes,d=null==s?void 0:s.filePath;if(!d||!c)throw Error('"filePath", "changes", "users" required when initializing history state');var p=(a=(o=(0,i._)((0,r._)({},s),{changes:c,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return p});var h=p.changes.length;if(0===h){n(f,p);return}(null==l?void 0:l.changes)&&p.changes!==l.changes&&(p.count=h,p.version=Math.min(p.version,h-1),p.playing=!1,p.comparing=!1),p.version===h-1&&(p.playing=!1),n(f,p)});function m(){return(0,l.md)(f,{store:y()})}function g(){return(0,l.Xr)(h,{store:y()})}function v(){return(0,l.Xr)((0,c.A)(function(){return(0,a.eU)(null,function(e,n){n(f,null)})},[]),{store:y()})}var w=(0,o.createContext)(null);function y(){var e=(0,o.useContext)(w);if(!e)throw Error("Expected store in context");return e}},48391:(e,n,t)=>{"use strict";t.d(n,{C:()=>l});var r=t(94086),i=t(56071),o=t(39667),a=t(89960);function l(e){var n=e.org,t=e.disabled,l=n?(0,i.EG)({slug:n.slug}):void 0,s=l?l.home.href:"/home",c=l?l.home.as:"/~";return(0,r.Y)(o.A,{"aria-label":"Home",alt:"Home",dataCy:"home-button",href:s,size:32,as:c,disabled:t,children:(0,r.Y)(a.A,{})})}},21809:(e,n,t)=>{"use strict";t.d(n,{Xh:()=>c,cR:()=>s,oL:()=>u});var r=t(66622),i=t(94086),o=t(30758),a=t(8143),l=(0,o.createContext)({left:null,right:null,setLeft:function(){},setRight:function(){}});function s(e){var n=e.children,t=e.side,r=(0,o.useContext)(l);if(!r)return null;var i=r[t];return i?a.createPortal(n,i):null}function c(e){var n,t,a,s,c,u,d=e.children,p=(t=(n=(0,r._)((0,o.useState)(null),2))[0],a=n[1],c=(s=(0,r._)((0,o.useState)(null),2))[0],u=s[1],(0,o.useMemo)(function(){return{left:t,right:c,setLeft:a,setRight:u}},[t,c]));return(0,i.Y)(l.Provider,{value:p,children:d})}function u(){return(0,o.useContext)(l)}},10699:(e,n,t)=>{"use strict";t.d(n,{A:()=>_});var r=t(94086),i=t(25204),o=t.n(i),a=t(60049),l=t(20837),s=t(45009),c=t(30632),u=t(72813);function d(){var e=(0,s._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(14178),m=t(83733),g=t(24955),v=t(10168),w=t(32842),y=t(40172),b=t(76985),S=t(40889),Y=t(65599),A=t(8367),C=t(45891),x=(0,v.x)({staffHelpers:[w.wp.border({color:g.LU.accentNegativeDefault,width:1,style:"solid"}),w.wp.overflow("hidden")]});let _=function(e){var n,t,i,s=e.isOpen,c=(0,a.useRouter)(),d=(n={skip:!s},t=(0,l._)({},p,n),u.I(f,t)).data,g=(0,m.A)(),v=null==d?void 0:null===(i=d.currentUser)||void 0===i?void 0:i.isStaff;return(0,r.Y)(b.a,{preventClose:!0,isOpen:s,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.FD)(A.S,{gap:32,children:[(0,r.Y)(A.S,{row:!0,gap:16,align:"center",children:(0,r.Y)(S.Y9,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You cant run this Repl right now."})}),(0,r.FD)(A.S,{gap:16,children:[(0,r.FD)(S.EY,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:h.aC.TERMS_OF_SERVICE,children:"Terms of Service"}),"."]}),(0,r.Y)(S.EY,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),v?(0,r.FD)(A.S,{css:x.staffHelpers,gap:8,children:[(0,r.FD)(A.S,{row:!0,gap:8,children:[(0,r.Y)(Y.m_,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.Y)(C.A,{})}),(0,r.Y)(S.Y9,{level:3,children:"Debug Info"})]}),(0,r.Y)(A.S,{children:(0,r.FD)(S.EY,{children:["Repl ID ",g," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.Y)(A.S,{children:(0,r.FD)(S.EY,{multiline:!1,children:[(0,r.Y)(o(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(g),children:"All datadog logs"})," ",""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(g,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.FD)(A.S,{row:!0,gap:16,justify:"end",children:[(0,r.Y)(y.$n,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.Y)(y.$n,{text:"Leave",onClick:function(){c.push("/home","~/")}})]})]})})}},14359:(e,n,t)=>{"use strict";t.d(n,{T:()=>_,O:()=>C});var r=t(20837),i=t(43952),o=t(94086),a=t(30758),l=t(32904),s=t(26928),c=t(51297),u=t(99813),d=t(66622),p=t(72653);function f(){return(0,d._)((0,a.useState)(function(){return(0,u.y$)()}),1)[0]}var h=(0,a.createContext)(null),m=function(e){return(0,p.Xr)(e,{store:function(){var e=(0,a.useContext)(h);if(!e)throw Error("Expected store in context");return e}()})},g=(0,u.eU)(-1),v=(0,u.eU)([]),w=(0,u.eU)(void 0),y=(0,u.eU)(null,function(e,n,t){var r=e(w);switch(r&&(clearTimeout(r.id),r.cb()),t){case"forward":n(g,function(n){return Math.min(e(v).length,n+1)});break;case"backward":n(g,function(e){return Math.max(0,e-1)})}var i=e(v),o=e(g);return o>=i.length?"":i[o]}),b=(0,u.eU)(null,function(e,n,t){clearTimeout(null===(r=e(w))||void 0===r?void 0:r.id);var r,i=function(){if(t.length>0){var r=!1;n(v,function(n){return(0,c.jM)(n,function(n){if(t!==n[e(g)])for(r=!0,n.push(t);n.length>20;)n.shift()})}),r&&n(g,e(v).length-1)}n(w,void 0)};n(w,{id:setTimeout(i,2e3),cb:i})}),S=t(28354);function Y(e){var n,t=m(b),o=(n=m(y),{forward:(0,l.A)(function(){return function(){return n("forward")}},[n]),backward:(0,l.A)(function(){return function(){return n("backward")}},[n])}),c=o.forward,u=o.backward,d=(0,a.useRef)(e.value);return(0,a.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&t(e.value),d.current=e.value)},[t,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,l.A)(function(){return function(n){if(n.shiftKey||(0,s.T$)(n)){null===(r=e.onKeyDown)||void 0===r||r.call(e,n);return}var t,r,i=n.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===n.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),n.preventDefault(),n.stopPropagation();return}if("ArrowDown"===n.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),n.preventDefault(),n.stopPropagation();return}null===(t=e.onKeyDown)||void 0===t||t.call(e,n)}},[u,c,e]),onChange:(0,l.A)(function(){return function(n){e.onChange(n.target.value)}},[e])})}var A=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.ov,(0,r._)({ref:n},t))}),C=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(A,(0,r._)({ref:n},e))})}),x=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.pd,(0,r._)({ref:n},e,t))}),_=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(x,(0,r._)({ref:n},e))})})},69891:(e,n,t)=>{"use strict";t.d(n,{Bt:()=>S,IC:()=>b,To:()=>y,ex:()=>w});var r=t(94086),i=t(83323),o=t(97407),a=t(3005),l=t(39797),s=t(51570),c=t(10168),u=t(32842),d=t(93532),p=t(40889),f=t(8367),h=t(36954),m=t(8351),g=(0,c.x)({title:[u.wp.pr(2)],emphasis:[u.wp.fontWeight.medium,u.wp.flex.shrink(1)],list:[u.wp.pt(2)],row:[u.wp.rowWithGap(8),u.wp.align.center],rowText:[u.wp.flex.shrink(1)],cta:[u.wp.pt(12),u.wp.pb(4)]});function v(e){var n=e.title,t=e.isFrozen,o=e.scheduledFreezeTime,a=e.scheduledDeletionTime,l=new Date,s=o?(0,i.A)(new Date(o),l):-1,c=a?(0,i.A)(new Date(a),l):-1;return(0,r.FD)(f.S,{gap:4,children:[(0,r.Y)(f.S,{css:g.title,row:!0,gap:4,align:"center",justify:"space-between",children:(0,r.Y)(p.EY,{css:g.emphasis,children:void 0===n?"Upgrade for a permanent database":n})}),(0,r.Y)(p.EY,{variant:"small",children:"Databases created on your free Starter plan are temporary."}),(0,r.FD)(f.S,{css:g.list,gap:8,children:[t?(0,r.FD)(f.S,{css:g.row,children:[(0,r.Y)(h.A,{size:16}),(0,r.Y)(p.EY,{css:g.rowText,variant:"small",children:"Your database has been paused, preventing further edits."})]}):null,!t&&s>-1?(0,r.FD)(f.S,{css:g.row,children:[(0,r.Y)(h.A,{size:16}),(0,r.FD)(p.EY,{css:g.rowText,variant:"small",children:[(0,r.FD)("span",{css:g.emphasis,children:["In ",s," days:"]})," ","Your database will be paused, preventing further edits."]})]}):null,c>-1?(0,r.FD)(f.S,{css:g.row,children:[(0,r.Y)(m.A,{size:16}),(0,r.FD)(p.EY,{css:g.rowText,variant:"small",children:[(0,r.FD)("span",{css:g.emphasis,children:["In ",c," days:"]})," ","Your database will be permanently deleted."]})]}):null]})]})}function w(e){var n=e.currentUser,t=(0,a.ET)().orgId;return!(null==n?void 0:n.isMemberOfAnyOrg)&&!(null==n?void 0:n.userSubscriptionType)&&void 0===t}function y(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return w({currentUser:e.currentUser})?(0,r.Y)(f.S,{children:(0,r.Y)(d.N,{text:(0,r.FD)(f.S,{children:[(0,r.Y)(v,{isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i}),(0,r.Y)(f.S,{css:g.cta,children:(0,r.Y)(l.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(o.en),colorway:"brand",variant:"outlined"})})]})})}):null}function b(){var e=(0,s.q)(),n=e.neonDatabases,t=e.currentUser;if(!t||0===n.length)return null;var i=n[0];return i.isEphemeral?(0,r.Y)(y,{currentUser:t,isFrozen:i.isFrozen,scheduledFreezeTime:i.scheduledFreezeTime,scheduledDeletionTime:i.scheduledDeletionTime}):null}function S(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return(0,r.Y)(f.S,{style:{maxWidth:240},children:(0,r.Y)(v,{title:"We created a temporary database for you, manage it here",isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i})})}},20038:(e,n,t)=>{"use strict";t.d(n,{y:()=>b});var r=t(94086),i=t(55922),o=t(52757),a=t(24955),l=t(10168),s=t(32842),c=t(65599),u=t(8367),d=t(85670),p=t(75276),f=t(20837),h=t(43952),m=t(42022);function g(e){return(0,r.Y)(m.Ay,(0,h._)((0,f._)({},e),{children:(0,r.Y)("path",{d:"M2.47 5.53a.75.75 0 0 1 1.06-1.06l16 16a.75.75 0 1 1-1.06 1.06l-16-16ZM1.291 11.215a7.593 7.593 0 0 1 1.42-3.675l1.077 1.077a6.024 6.024 0 0 0-.376 6.128 6.352 6.352 0 0 0 2.402 2.554 6.73 6.73 0 0 0 3.462.951h4.146l1.5 1.5H9.277a8.23 8.23 0 0 1-4.234-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211ZM5.828 5l1.15 1.15.02-.008a6.787 6.787 0 0 1 3.593-.263 6.62 6.62 0 0 1 3.185 1.603 6.2 6.2 0 0 1 1.81 2.962.75.75 0 0 0 .725.556h1.145c1.015 0 1.983.389 2.693 1.072a3.544 3.544 0 0 1 1.101 2.553c0 .952-.393 1.871-1.101 2.553a3.817 3.817 0 0 1-1.317.825l1.134 1.134a5.286 5.286 0 0 0 1.223-.878 5.044 5.044 0 0 0 1.561-3.634 5.044 5.044 0 0 0-1.56-3.634A5.385 5.385 0 0 0 17.455 9.5h-.593a7.725 7.725 0 0 0-2.074-3.124 8.118 8.118 0 0 0-3.907-1.968A8.287 8.287 0 0 0 5.828 5Z"})}))}var v=(0,o.i7)("0%,100%{opacity:1;}50%{opacity:0.25;}"),w=(0,l.x)({root:[s.wp.height(20),s.wp.width(20),s.wp.center]}),y=(0,l.x)({root:[w.root],pulseRoot:[w.root,{animation:"".concat(v," 2s infinite")}]});function b(){var e=(0,i.A)(),n=e.isSaving;return e.isOffline?(0,r.Y)(c.m_,{tooltip:"Reconnecting, changes will be synced when youre online",placement:"right",children:(0,r.Y)(u.S,{css:y.root,children:(0,r.Y)(g,{size:16,color:a.LU.redDefault})})}):n?(0,r.Y)(c.m_,{tooltip:"Saving",placement:"right",children:(0,r.Y)(u.S,{css:y.pulseRoot,children:(0,r.Y)(d.A,{size:16,color:a.LU.foregroundDimmest})})}):(0,r.Y)(c.m_,{tooltip:"Saved",placement:"right",children:(0,r.Y)(u.S,{css:y.root,children:(0,r.Y)(p.A,{size:16,color:a.LU.foregroundDimmest})})})}},26325:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(94086),i=t(25204),o=t.n(i),a=t(33242),l=t(24955),s=t(10168),c=t(32842),u=t(68463),d=t(40889),p=t(8367),f=(0,s.x)({url:[c.wp.color.accentPositiveStronger,c.wp.fontSize("small"),c.wp.focusRing,{"&:hover":[c.wp.cursor.pointer,c.wp.color.accentPositiveStrongest]}],qrCodeWrapper:[c.wp.p(8),c.wp.borderRadius(4),c.wp.display.inlineBlock,c.wp.border({width:1,color:l.LU.outlineDefault}),{backgroundColor:"white"}]});function h(e){var n=e.url;return(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.EY,{children:"Dev URL:"}),(0,r.Y)(p.S,{row:!0,gap:4,children:(0,r.FD)(p.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(o(),{legacyBehavior:!0,href:n,passHref:!0,children:(0,r.Y)("a",{css:f.url,target:"_blank",children:n})}),(0,r.Y)(u.r,{textToCopy:n,tooltipText:"Copy link",tooltipDelay:"none"})]})}),(0,r.Y)(p.S,{align:"start",children:(0,r.Y)(p.S,{css:f.qrCodeWrapper,children:(0,r.Y)(a.Ay,{size:128,value:n})})}),(0,r.Y)(d.EY,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})}},46097:(e,n,t)=>{"use strict";t.d(n,{VP:()=>p,XI:()=>f,fI:()=>d});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(10168),s=t(32842),c=t(8367),u=(0,l.x)({table:{},tableRow:[s.wp.rowWithGap(12),s.wp.align.center,s.wp.border({direction:"bottom"}),{boxSizing:"border-box"}],column:[s.wp.display.flex,s.wp.colWithGap(0),s.wp.justify.center,s.wp.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[s.wp.rowWithGap(4),s.wp.align.center,s.wp.color.foregroundDimmest,s.wp.justify.spaceBetween,s.wp.fontSize("small"),s.wp.mx(4),s.wp.py(2),{overflow:"hidden",whiteSpace:"nowrap"}]}),d=function(e){var n=e.children,t=(0,o._)(e,["children"]);return(0,a.Y)("tr",(0,i._)((0,r._)({css:u.tableRow},t),{children:(0,a.Y)(c.S,{row:!0,gap:0,children:n})}))},p=function(e){var n=e.header,t=e.width,r=e.last,i=e.children,o={};return(t&&(o.width=t),r&&(o.marginLeft="auto"),void 0!==n&&n)?(0,a.Y)("th",{style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})}):(0,a.Y)("td",{css:u.column,style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})})},f=function(e){var n=e.children;return(0,a.Y)("table",{css:u.table,children:n})}},89814:(e,n,t)=>{"use strict";t.d(n,{b:()=>c});var r=t(94086),i=t(52757),o=t(24955),a=t(32842),l=t(8367),s=(0,i.AH)([a.wp.borderRadius("full"),a.wp.position.absolute,a.wp.top(-3),a.wp.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.LU.redStronger:n,i=e.small,a=e.className,c=i?6:8;return(0,r.Y)(l.S,{className:a,style:{backgroundColor:t,width:c,height:c,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.LU.backgroundDefault)},css:s})}},29975:(e,n,t)=>{"use strict";t.d(n,{A:()=>tV,G:()=>tG});var r=t(13454),i=t(66622),o=t(27189),a=t(5482),l=t(94086),s=t(30758),c=t(72653),u=t(20837),d=t(45009),p=t(30632),f=t(72813),h=t(75838);function m(){var e=(0,d._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,d._)(["\n  query ObjectStoragePane(\n    $replId: String!\n    $bucketsAfter: String\n    $bucketsCount: Int\n  ) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n          editObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        buckets(after: $bucketsAfter, count: $bucketsCount) {\n          ... on BucketConnection {\n            __typename\n            items {\n              ...ObjectStorageBucket\n            }\n            pageInfo {\n              nextCursor\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,d._)(["\n  mutation ObjectStoragePaneCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var w={},y=(0,p.J1)(m()),b=(0,p.J1)(g(),y),S=(0,p.J1)(v(),y);function Y(e){var n=(0,u._)({},w,e);return h.n(S,n)}var A=t(6696),C=t(39651),x=t(83733),_=t(43035),k=t(33170),D=t(24481),E=t(4723);function R(){var e=(0,d._)(["\n  query CreateBucketName($teamId: Int, $name: String) {\n    bucketName: replTitle(teamId: $teamId, title: $name)\n  }\n"]);return R=function(){return e},e}var I={},F=(0,p.J1)(R()),T=t(10168),P=t(32842),L=t(84911),U=t(40172),N=t(28354),O=t(60872),M=t(76985),B=t(31955),H=t(40889),z=t(8367),W=t(14753),G=t(43249),V=(0,T.x)({createBucketButton:[P.wp.flex.growAndShrink(1),P.wp.justify.center,P.wp.textAlign.center],labeledInput:[P.wp.flex.growAndShrink(1),P.wp.textAlign.left],row:[P.wp.flex.growAndShrink(1),P.wp.pt(16),P.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[P.wp.flex.wrap]});function j(e){var n,t,r,o,a,c,d,p,h,m,g,v,w,y,b=e.isOpen,S=e.loading,Y=e.handleCreateBucket,A=e.onRequestClose,C=(t=(n={}).preferredName,r=n.teamId,a=(o=(0,i._)((0,s.useState)(""),2))[0],c=o[1],d=(0,s.useRef)(null),p=(0,s.useRef)(!1),v=(h={variables:{name:t,teamId:r},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},m=(0,u._)({},I,h),g=f.I(F,m)).data,w=g.previousData,y=(null==v?void 0:v.bucketName)||(null==w?void 0:w.bucketName),(0,s.useEffect)(function(){y&&!p.current&&c(y)},[y]),{name:a,setName:(0,s.useCallback)(function(e){p.current=!0,c(e.slice(0,60))},[]),nameInputRef:d}),_=C.name,k=C.setName,D=C.nameInputRef,E=(0,x.A)();return(0,l.Y)(z.S,{children:(0,l.Y)(M.a,{fitContent:!0,isOpen:b,onRequestClose:A,children:(0,l.FD)(B.ui,{children:[(0,l.Y)(H.Y9,{level:1,variant:"subheadBig",children:"Create a Bucket"}),(0,l.FD)(z.S,{css:V.wrapper,row:!0,children:[(0,l.Y)(z.S,{css:V.row,children:(0,l.Y)(Z,{name:_,setName:k,nameInputRef:D,disabled:S})}),(0,l.Y)(z.S,{css:V.row,children:(0,l.Y)(U.$n,{css:V.createBucketButton,text:S?"Creating bucket...":"Create bucket",onClick:function(){return Y({name:_,replId:E})},colorway:"primary",iconLeft:S?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:S})})]})]})})})}function Z(e){var n=e.name,t=e.setName,r=e.nameInputRef,i=e.disabled,o=(0,L.c)();return(0,l.FD)(z.S,{css:V.labeledInput,gap:8,children:[(0,l.Y)(O.J,{htmlFor:o("bucketName"),children:"Name"}),(0,l.Y)(N.pd,{spellCheck:!1,id:o("bucketName"),disabled:i,onChange:function(e){t(e.currentTarget.value)},value:n,ref:r,placeholder:"Name your Bucket"})]})}var q=t(43952),K=t(55195),$=t(49711),J=t(37062),Q=t(77119),X=t(45038),ee=t(94423),en=t(40174),et=en.ZU.Object({id:en.ZU.String(),name:en.ZU.String(),contentType:en.ZU.Optional(en.ZU.String()),timeCreated:en.ZU.String(),size:en.ZU.String()}),er=en.ZU.Array(et),ei={FILE:"file"},eo=function(e){return e[e.Direct=1]="Direct",e[e.Multipart=2]="Multipart",e}({});function ea(e){return"".concat(e.status," - ").concat(e.statusText)}function el(){return(el=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.pageToken,i=void 0===(r=e.maxResults)?1e3:r,o=e.matchGlob,l=new URLSearchParams({maxResults:i.toString()}),t&&l.append("pageToken",t),o&&l.append("matchGlob","**".concat(o,"**")),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o?").concat(l.toString()),{method:"GET",credentials:"same-origin"})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to get objects: ".concat(ea(s)));return[4,s.json()];case 2:if(d=null!==(u=(c=a.sent()).items)&&void 0!==u?u:[],!$.WT.Check(er,d))throw(0,X.$J)(er,d);return[2,{items:d,nextPageToken:c.nextPageToken}]}})})).apply(this,arguments)}function es(e){return ec.apply(this,arguments)}function ec(){return(ec=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(n=e.bucketExternalId,t=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return eu.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})];case 2:return[2,function(e){return eh.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})]}return[2]})})).apply(this,arguments)}function eu(){return(eu=(0,r._)(function(e){var n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,i=encodeURIComponent(t),[4,fetch("/object-storage/upload/storage/v1/b/".concat(n,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(ea(o)));return[2]}})})).apply(this,arguments)}function ed(){return(ed=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.file,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=a.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(ea(i)));return[4,i.text()];case 2:if(o=a.sent(),!(l=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,l]}})})).apply(this,arguments)}function ep(){return(ep=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(l=a.sent()).ok)throw Error("Failed to upload chunk: ".concat(ea(l)));if(!(s=l.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:s}]}})})).apply(this,arguments)}function ef(){return(ef=(0,r._)(function(e){var n,t,r,i,o,l,s,c;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.uploadId,i=e.parts,l=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var n=o.createElement("Part"),t=o.createElement("PartNumber");t.textContent=e.partNumber.toString(),n.appendChild(t);var r=o.createElement("ETag");r.textContent=e.etag,n.appendChild(r),l.appendChild(n)}),o.appendChild(l),s=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":s.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:s})];case 1:if(!(c=a.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(ea(c)));return[2]}})})).apply(this,arguments)}function eh(){return(eh=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,[4,(0,ee.g6)(r)];case 1:return i=a.sent(),l=(o=Q.A.from(i)).toBuffer(),s=encodeURIComponent(t),[4,function(e){return ed.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,file:r})];case 2:return c=a.sent(),u=(0,J.A)(5),[4,Promise.all(Array(Math.ceil(o.length/0x2000000)).fill(0).map(function(e,t){var r=l.subarray(0x2000000*t,(t+1)*0x2000000);return u(function(){return function(e){return ep.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,partNumber:t+1,uploadId:c,chunk:r})})}))];case 3:return d=a.sent(),[4,function(e){return ef.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,uploadId:c,parts:d})];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function em(e){return eg.apply(this,arguments)}function eg(){return(eg=(0,r._)(function(e){var n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:return n=e.bucketExternalId,t=encodeURIComponent(e.objectName),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(t),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(ea(r)));return[2]}})})).apply(this,arguments)}function ev(){return(ev=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.sourceBucketExternalId,t=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),l=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(o,"/copyTo/b/").concat(t,"/o/").concat(l),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to copy object: ".concat(ea(s)));return[2]}})})).apply(this,arguments)}var ew=t(51297),ey=t(99813),eb=t(3274),eS=(0,ey.eU)(new Map);function eY(e){var n=e.items,t=e.objects,r=new Set(n.map(function(e){return e.name})),i=t.filter(function(e){return!r.has(e.name)});return(0,o._)(n).concat((0,o._)(i))}var eA=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.objects,o=t.nextPageToken,a=t.isSearch;n(eS,function(e){return(0,ew.jM)(e,function(n){var t,l,s=e.get(r),c=n.get(r);if(!c){n.set(r,{items:i,nextPageToken:o,isLoading:!1});return}var u=eY({items:c.items,objects:i}),d=c.search;if(a){d={items:eY({items:null!==(l=null==d?void 0:d.items)&&void 0!==l?l:[],objects:i}),currentPageToken:null==s?void 0:null===(t=s.search)||void 0===t?void 0:t.currentPageToken,nextPageToken:o},c.search=d,c.items=u,c.isLoading=!1;return}c.items=u,c.search=void 0,c.currentPageToken=null==s?void 0:s.nextPageToken,c.nextPageToken=o,c.isLoading=!1})})}),eC=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.isLoading;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(r);if(!n){e.set(r,{items:[],isLoading:i});return}n.isLoading=i})})}),ex=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.name,o=t.contentType,a=t.size,l={id:"optimistic-"+(0,eb.A)(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(r);if(!n){e.set(r,{items:[l],isLoading:!1});return}var t=n.items.find(function(e){return e.name===i});t?Object.assign(t,l):n.items.push(l)})})}),e_=(0,ey.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId,o=t.isPendingDeletion,a=t.isOptimisticallyInserted;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when updating object");var t=n.items.findIndex(function(e){return e.name===r});if(-1===t)throw Error("Bucket not found when updating object");void 0!==o&&(n.items[t].isPendingDeletion=o),void 0!==a&&(n.items[t].optimisticallyInserted=a)})})}),ek=(0,ey.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when removing object");var t=n.search;if(t){t.items=t.items.filter(function(e){return e.name!==r});return}e.set(i,{items:n.items.filter(function(e){return e.name!==r}),isLoading:n.isLoading,nextPageToken:n.nextPageToken,search:t})})})}),eD=new Intl.Collator;function eE(e){return e.sort(function(e,n){return eD.compare(e.displayName,n.displayName)})}var eR=[1e3,2500,5e3];function eI(){var e,n=(0,c.md)(eS),t=(0,c.Xr)(eA),o=(0,c.Xr)(eC),l=(0,i._)((0,s.useState)(!1),2),u=l[0],d=l[1],p=(0,i._)((0,s.useState)(1e3),2),f=p[0],h=p[1];return{fetchObjects:(0,s.useCallback)((e=(0,r._)(function(e){var r,i,l,s,c,u,p,h,m,g,v,w;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r=e.bucketExternalId,i=e.matchGlob,l=e.loadMorePageToken,s=e.isNewBucket,c=e.onError,s)return t({bucketExternalId:r,objects:[],isSearch:i}),[2];d(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),o({bucketExternalId:r,isLoading:!0}),p=n.get(r),h=i?null==p?void 0:null===(u=p.search)||void 0===u?void 0:u.currentPageToken:null==p?void 0:p.currentPageToken,[4,function(e){return el.apply(this,arguments)}({bucketExternalId:r,pageToken:null!=l?l:h,matchGlob:i,maxResults:f})];case 2:return g=(m=a.sent()).items,v=m.nextPageToken,t({bucketExternalId:r,objects:g,nextPageToken:v,isSearch:i}),[3,5];case 3:return w=a.sent(),K.Cp(w,{tags:{bucketExternalId:r,action:"fetchObjects"}}),null==c||c(w instanceof Error?w:Error("Failed to fetch objects")),[3,5];case 4:return o({bucketExternalId:r,isLoading:!1}),d(!1),[7];case 5:return[2]}})}),function(n){return e.apply(this,arguments)}),[t,o,n,f]),setMaxResults:h,maxResults:f,loading:u}}function eF(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(ex),l=(0,c.Xr)(ek),u=(0,c.Xr)(e_);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:n=e.bucketExternalId,i=e.files,s=e.targetFolder,c=e.onError,t(!0),p.label=1;case 1:var f;return p.trys.push([1,3,,4]),[4,Promise.all(i.map((f=(0,r._)(function(e){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:t=s+(e.webkitRelativePath||e.dirPath||e.name),o({bucketExternalId:n,name:t,contentType:e.type,size:null==e?void 0:e.size.toString()}),r=e.size>0x1e00000?eo.Multipart:eo.Direct,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,es({bucketExternalId:n,objectName:t,file:e,uploadMethod:r})];case 2:return i.sent(),u({bucketExternalId:n,name:t,isOptimisticallyInserted:!1}),[3,4];case 3:return i.sent(),l({bucketExternalId:n,name:t}),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),null==c||c(d),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return d.apply(this,arguments)},loading:n}}function eT(){var e=(0,d._)(["\n  query UserBuckets($input: CurrentUserBucketsInput!) {\n    currentUser {\n      id\n      buckets(input: $input) {\n        ... on BucketConnection {\n          __typename\n          items {\n            ...ObjectStorageBucket\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eT=function(){return e},e}function eP(){var e=(0,d._)(["\n  query OrgBuckets($orgId: String!, $input: OrgBucketsInput!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          buckets(input: $input) {\n            ... on BucketConnection {\n              __typename\n              items {\n                ...ObjectStorageBucket\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eP=function(){return e},e}function eL(){var e=(0,d._)(["\n  mutation AddReplBucket($input: AddReplBucketInput!) {\n    addReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eL=function(){return e},e}var eU={},eN=(0,p.J1)(eT(),y),eO=(0,p.J1)(eP(),y),eM=(0,p.J1)(eL(),y),eB=t(55042),eH=t(82182),ez=t(84899),eW=t(24955),eG=t(2298),eV=t(3460),ej=t(27233),eZ=t(2301),eq=t(16021),eK=t(29048),e$=(0,T.x)({self:[P.wp.flex.growAndShrink(1)],error:[P.wp.color.accentNegativeStronger],button:[P.wp.reset.button,P.wp.viewStyle,eG.b.nofill,P.wp.display.inlineFlex,{borderColor:eG.b.outlined.borderColor},P.wp.flex.growAndShrink(1)],select:[P.wp.display.flex,P.wp.flex.growAndShrink(1)],selectDisabled:[{backgroundColor:eW.LU.backgroundHigher}],popover:[P.wp.width("max-content"),P.wp.overflow("auto"),P.wp.p(1),P.wp.minWidth(240)],labeledInput:[P.wp.flex.growAndShrink(1),P.wp.minWidth(250)],listbox:[P.wp.maxHeight(300),P.wp.minWidth(300),P.wp.overflow("auto")],dropdownItemAndContainer:[P.wp.flex.row,P.wp.align.center,eG.b.listItem,P.wp.px(8),P.wp.py(4)],selectedItemAndContainer:[P.wp.px(8),P.wp.py(4),P.wp.justify.spaceBetween,P.wp.align.center,P.wp.rowWithGap(8)],selectedBucketName:[P.wp.align.center,P.wp.textAlign.left,P.wp.rowWithGap(8)],bucketName:[P.wp.textAlign.left,P.wp.rowWithGap(8)],selectedCheckIcon:[P.wp.pl(8)],loading:[P.wp.minWidth(200),P.wp.display.flex,P.wp.flex.grow(1),eV.S.backgroundPulse(eW.LU.backgroundHighest,eW.LU.backgroundHigher)]});function eJ(e){var n=e.buckets,t=e.error,r=e.loading,i=e.onChange,o=e.onLoadMore,a=e.selectedBucketId,c=(0,s.useId)();return(0,l.FD)(z.S,{css:e$.self,children:[(0,l.Y)(e2,{buckets:n,loading:r,selectedBucketId:a,onLoadMore:o,onSelectionChange:function(e){"string"==typeof e&&i(e)}}),t?(0,l.Y)(z.S,{css:e$.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,l.Y)("span",{children:t})}):null]})}var eQ=(0,T.x)({self:[e$.dropdownItemAndContainer,P.wp.justify.spaceBetween,{backgroundColor:eW.LU.interactiveBackground}]});function eX(){return(0,l.Y)(z.S,{css:e$.selectDisabled,children:(0,l.Y)(z.S,{css:e$.selectedItemAndContainer,children:(0,l.Y)(z.S,{css:e$.selectedBucketName,children:(0,l.Y)(H.EY,{color:"dimmer",variant:"text",children:"No buckets available to add"})})})})}function e0(e){var n=e.title;return(0,l.FD)(z.S,{css:e$.selectedItemAndContainer,children:[(0,l.Y)(z.S,{css:e$.selectedBucketName,children:(0,l.Y)(H.EY,{variant:"text",children:n})}),(0,l.Y)(eK.A,{})]})}function e1(e){var n=e.bucketName,t=e.selected;return(0,l.FD)(z.S,{css:t?eQ.self:e$.dropdownItemAndContainer,children:[(0,l.Y)(z.S,{css:e$.bucketName,align:"center",children:(0,l.Y)(H.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,l.Y)(z.S,{css:e$.selectedCheckIcon,align:"center",row:!0,children:t?(0,l.Y)(eq.A,{}):null})]})}function e2(e){var n=e.buckets,t=e.loading,r=e.selectedBucketId,i=e.onLoadMore,o=e.onSelectionChange,a=(0,L.c)(),c=(0,s.useMemo)(function(){return n.find(function(e){return e.id===r})},[n,r]);return(0,l.FD)(z.S,{css:e$.labeledInput,gap:8,children:[(0,l.Y)(O.J,{htmlFor:a("bucket"),children:"Bucket"}),t?(0,l.Y)(N.pd,{css:e$.loading,disabled:!0}):(0,l.FD)(eB.l6,{css:e$.select,id:a("bucket"),onSelectionChange:o,"aria-label":"Bucket Select",children:[(0,l.Y)(eH.$,{css:e$.button,isDisabled:!c,children:c?(0,l.Y)(e0,{title:c.name}):(0,l.Y)(eX,{})}),(0,l.Y)(eZ.g_,{noArrow:!0,css:e$.popover,background:"default",placement:"bottom left",children:(0,l.Y)(ej.qF,{css:e$.listbox,onLoadMore:i,children:n.map(function(e){var n=e.id,t=e.name;return(0,l.Y)(ez.nh,{id:n,textValue:t,children:(0,l.Y)(e1,{bucketName:t,selected:n===r})},n)})})})]})]})}var e5=(0,T.x)({addBucketButton:[P.wp.flex.growAndShrink(1),P.wp.justify.center,P.wp.textAlign.center],row:[P.wp.flex.growAndShrink(1),P.wp.pt(16),P.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[P.wp.flex.wrap]});function e4(e){var n,t,r,a,c,d,p,m,g,v,w,y,b,S,Y,A,C,_,k,D,E,R,I,F,T,P=e.excludeBucketIds,L=e.isOpen,N=e.onBucketAdded,O=e.onError,V=e.onRequestClose,j=e.orgId,Z=(0,i._)((0,s.useState)(),2),K=Z[0],$=Z[1],J=(0,x.A)(),Q=(g=(n={onError:O,orgId:j}).orgId,y=(t={fetchPolicy:"network-only",onError:v=n.onError,skip:void 0!==g,ssr:!1,variables:{input:e3}},r=(0,u._)({},eU,t),w=f.I(eN,r)).data,b=w.fetchMore,S=w.loading,Y=(0,s.useCallback)(function(){var e,n,t;b({variables:{input:(0,q._)((0,u._)({},e3),{after:null==y?void 0:null===(t=y.currentUser)||void 0===t?void 0:null===(n=t.buckets)||void 0===n?void 0:null===(e=n.pageInfo)||void 0===e?void 0:e.nextCursor})},updateQuery:function(e,n){if(!(null===(a=n.fetchMoreResult)||void 0===a?void 0:null===(i=a.currentUser)||void 0===i?void 0:null===(r=i.buckets)||void 0===r?void 0:r.items))return e;var t=(0,u._)({},n.fetchMoreResult);if(null===(l=t.currentUser)||void 0===l?void 0:l.buckets){var r,i,a,l,s,c,d,p=null!==(d=null==e?void 0:null===(c=e.currentUser)||void 0===c?void 0:null===(s=c.buckets)||void 0===s?void 0:s.items)&&void 0!==d?d:[],f=t.currentUser.buckets.items;t.currentUser.buckets.items=(0,o._)(f).concat((0,o._)(p))}return t}})},[b,y]),C=(a={fetchPolicy:"network-only",onError:v,skip:void 0===g,ssr:!1,variables:{input:e3,orgId:g||""}},c=(0,u._)({},eU,a),A=f.I(eO,c)).data,_=A.fetchMore,k=A.loading,E=(null==(D=(null==C?void 0:null===(d=C.currentUser)||void 0===d?void 0:d.org.__typename)==="Org"?null==C?void 0:null===(p=C.currentUser)||void 0===p?void 0:p.org:void 0)?void 0:D.buckets.__typename)==="BucketConnection"?null==D?void 0:D.buckets:void 0,R=(0,s.useCallback)(function(){_({variables:{input:(0,q._)((0,u._)({},e3),{after:null==E?void 0:E.pageInfo.nextCursor})},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult,a=null==i?void 0:i.currentUser;if((null==a?void 0:a.__typename)!=="CurrentUser")return e;var l=null==i?void 0:null===(t=i.currentUser)||void 0===t?void 0:t.org;if((null==l?void 0:l.__typename)!=="Org")return e;var s=l.buckets;if("BucketConnection"!==s.__typename)return e;var c=null==e?void 0:null===(r=e.currentUser)||void 0===r?void 0:r.org;if((null==c?void 0:c.__typename)!=="Org")return i;var d=c.buckets;return"BucketConnection"!==d.__typename?i:(0,q._)((0,u._)({},i),{currentUser:(0,q._)((0,u._)({},a),{__typename:"CurrentUser",org:(0,q._)((0,u._)({},l),{__typename:"Org",buckets:(0,q._)((0,u._)({},s),{__typename:"BucketConnection",items:(0,o._)(s.items).concat((0,o._)(d.items))})})})})}})},[_,E]),I=(0,s.useCallback)(function(){g?R():Y()},[g,R,Y]),{buckets:g?null==E?void 0:E.items:null==y?void 0:null===(m=y.currentUser)||void 0===m?void 0:m.buckets.items,fetchMore:I,loading:k||S}),X=Q.buckets,ee=Q.fetchMore,en=Q.loading;(0,s.useEffect)(function(){!K&&X&&X.length>1&&$(X[0].id)},[K,X]);var et=(0,s.useMemo)(function(){return X?X.filter(function(e){return!(null!=P?P:[]).includes(e.id)}):[]},[X,P]);(0,s.useEffect)(function(){!K&&et&&et.length>0&&$(et[0].id)},[et,K]);var er=(0,i._)((F={variables:{input:{bucketId:null!=K?K:"",replId:J}}},T=(0,u._)({},eU,F),h.n(eM,T)),2),ei=er[0],eo=er[1].loading;return(0,l.Y)(z.S,{children:(0,l.Y)(M.a,{fitContent:!0,isOpen:L,onRequestClose:V,children:(0,l.FD)(B.ui,{children:[(0,l.Y)(H.Y9,{level:1,variant:"subheadBig",children:"Choose a Bucket"}),(0,l.FD)(z.S,{css:e5.wrapper,row:!0,children:[(0,l.Y)(z.S,{css:e5.row,children:(0,l.Y)(eJ,{buckets:et,loading:en,onChange:$,onLoadMore:ee,selectedBucketId:K})}),(0,l.Y)(z.S,{css:e5.row,children:(0,l.Y)(U.$n,{css:e5.addBucketButton,text:eo?"Adding Bucket to Repl...":"Add Bucket to Repl",onClick:function(){ei({onCompleted:function(e){var n="Bucket"===e.addReplBucket.__typename?e.addReplBucket:null;if(!n){O(Error("Failed to create bucket"));return}N(n,!1),$(void 0)},onError:O})},colorway:"primary",iconLeft:eo||en?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:eo||!K})})]})]})})})}var e3={count:10},e8=t(60762),e7=t(86295),e6=t(57218),e9=t(62714),ne=t(93532),nn=t(20778),nt=t(54858),nr=t(73886),ni=t(332),no=t(86227),na=[{icon:(0,l.Y)(ni.A,{}),title:"JavaScript",value:"js"},{icon:(0,l.Y)(no.A,{}),title:"Python",value:"py"},{icon:(0,l.Y)(nr.A,{}),title:"All other languages",value:"other"}],nl={js:{packagerConfigLanguage:"nodejs",description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e7.A,(0,u._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e7.A,(0,u._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e7.A,(0,u._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your App or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},ns=(0,T.x)({statusBanner:[P.wp.maxWidth("fit-content")]});function nc(e){var n=e.onError,t=(0,i._)((0,s.useState)("js"),2),o=t[0],c=t[1],d=(0,C.A)().showConfirm,p=(0,D.A)().packager,f=(0,e6.J)().configs,h=(0,e9.hF)(),m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1],w=f.find(function(e){return e.language===nl[o].packagerConfigLanguage}),y=!!(nl[o].packagerConfigLanguage&&nl[o].packageName&&w),b=!!(w&&h(w.id).some(function(e){return e.name===nl[o].packageName})),S=(0,i._)((0,s.useState)(!1),2),Y=S[0],A=S[1];function x(){return(x=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!y)return n(Error("Package not available for selected language")),[2];return v(!0),[4,p.addPackages([{name:nl[o].packageName}])];case 1:return e.sent()?(d("Installed ".concat(nl[o].packageName," package")),A(!0)):n(Error("Failed to install ".concat(nl[o].packageName," package"))),[2]}})})).apply(this,arguments)}var _=na.find(function(e){return e.value===o}),k=Y||b;return(0,s.useLayoutEffect)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=na[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=function(){var e=r.value;if(nl[e.value].packagerConfigLanguage&&f.find(function(n){return n.language===nl[e.value].packagerConfigLanguage}))return c(e.value),{v:void 0}}();if("object"===(0,e8._)(o))return o.v}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}c("other")},[]),(0,l.FD)(z.S,{gap:16,children:[(0,l.Y)(z.S,{row:!0,gap:0,children:(0,l.Y)(nt.l,{items:na,selectedItem:_,initialSelectedItem:na[0],onChange:function(e){A(!1),c(e.value)}})}),nl[o].description?nl[o].description:null,!k&&y?(0,l.Y)(U.$n,{onClick:function(){return x.apply(this,arguments)},text:"Install ".concat(nl[o].packageName," package"),colorway:"primary",loading:g}):null,_&&k?(0,l.Y)(ne.N,{text:"Package installed",colorway:"positive",css:ns.statusBanner}):null,nl[o].commands.map(function(e){return(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(H.EY,{children:e.label}),(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e7.A,(0,u._)({language:o},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}function nu(){var e=(0,d._)(["\n  query ObjectStorageReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return nu=function(){return e},e}var nd={},np=(0,p.J1)(nu()),nf=t(55937),nh=t(54867),nm=t(23108),ng=t(99655),nv=t(69796),nw=t(39797),ny=t(89223),nb=t(53536),nS=t(66286),nY=t(60372),nA=t(68753),nC=(0,T.x)({ctaStatusBanner:[P.wp.textAlign.left],cta:[P.wp.width("100%"),P.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],payment:[P.wp.p(16),P.wp.borderRadius(12),P.wp.textAlign.left,P.wp.shadow(2)]});function nx(e){var n=e.children,t=e.createBucketAuthz,o=e.actionDescription,c=e.refetchAuthzQueryData,u=e.loading,d=e.replId,p=(0,i._)((0,s.useState)(!1),2),f=p[0],h=p[1],m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1];return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{gap:8,children:[(0,l.Y)(n_,{replId:d,mainActionCTA:n,showPaymentMethodForm:f,setShowPaymentMethodForm:function(){return h(!0)},setShowSupportForm:function(){return v(!0)},createBucketAuthz:t,actionDescription:o,refetchAuthzQueryData:c,loading:u}),f?(0,l.Y)(B.ui,{elevated:!0,css:nC.payment,children:(0,l.Y)(nv.y,{onSuccess:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return h(!1),[4,c()];case 1:return e.sent(),[2]}})}),context:"workspace_object_storage_pane"})}):null]}),(0,l.Y)(M.a,{isOpen:g,onRequestClose:function(){return v(!1)},children:(0,l.Y)(nS.A,{onRequestClose:function(){return v(!1)}})})]})}function n_(e){var n=e.mainActionCTA,t=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,o=e.createBucketAuthz,a=e.actionDescription,s=e.refetchAuthzQueryData,c=e.loading,u=e.replId,d=(0,ng.m6)();if(!o)return null;if(!o.isAuthorized&&d)return(0,l.Y)(ne.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner});switch(o.code){case nf.S4.RequiresActiveSubscription:case nf.S4.RequiresPaymentMethodOrSubscription:return(0,l.FD)(z.S,{gap:8,align:"center",children:[(0,l.Y)(nw.A,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(a,"."),css:nC.cta,colorway:"primary",variant:"default",disabled:t,onPlanCheckoutComplete:s}),(0,l.Y)(U.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:nC.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nY.A,{}),onClick:function(){return r()}})]});case nf.S4.RequiresSmsVerification:return(0,l.Y)(nm.A,{context:nf.SG.ObjectStorage,onSuccess:s});case nf.S4.RequiresPaymentMethod:return(0,l.Y)(U.$n,{colorway:"primary",text:"Add a payment method",css:nC.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nY.A,{}),onClick:function(){return r()}});case nf.S4.RequiresUnbanning:return(0,l.Y)(nb.d,{text:"Your account is not currently allowed to ".concat(a,". We're here to help! Please reach out to our support team for assistance."),colorway:"warning",iconLeft:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner,onClick:function(){return i()}});case nf.S4.InsufficientBudget:return(0,l.FD)(l.FK,{children:[(0,l.Y)(ne.N,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(a,"."),colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner}),(0,l.Y)(ny.h,{onUpdateSuccess:s,replId:u})]});case nf.S4.FeatureDisabled:case nf.S4.FeatureUnsupportedForReplitTeams:case nf.S4.FeatureUnsupportedForTeamsEdu:case nf.S4.FeatureUnsupportedForTeamsFree:case nf.S4.FeatureUnsupportedForTeamsPro:case nf.S4.InsufficientPermissions:case nf.S4.InsufficientQuota:case nf.S4.RequiresActiveTeamsSubscription:case nf.S4.RequiresEmailVerification:return(0,l.Y)(ne.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nC.ctaStatusBanner});case nf.S4.Authorized:case nf.S4.AuthorizedQuota:return(0,l.Y)(l.FK,{children:n});default:(0,nh.A)(o.code)}}var nk=t(87590),nD=t(65599),nE=t(48729),nR=t(99413),nI=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],nF=(0,T.x)({action:[P.wp.width("100%"),P.wp.maxWidth(320),P.wp.px(32),{marginLeft:"auto",marginRight:"auto"}],rowText:[P.wp.flex.growAndShrink(1),P.wp.textAlign.left]});function nT(e){var n,t,r,o,a=e.createBucketAuthz,c=e.editBucketAuthz,d=e.refetchAuthzQueryData,p=e.onBucketAdded,h=e.onError,m=e.innerRef,g=(0,i._)((0,s.useState)(!1),2),v=g[0],w=g[1],y=(0,s.useCallback)(function(){return w(!1)},[]),b=(0,s.useCallback)(function(){return w(!0)},[]),S=(0,i._)((0,s.useState)(!1),2),A=S[0],C=S[1],_=(0,s.useCallback)(function(){return C(!1)},[]),k=(0,s.useCallback)(function(){return C(!0)},[]),D=(0,x.A)(),E=(n={variables:{replId:D}},t=(0,u._)({},nd,n),f.I(np,t)).data,R=(null==E?void 0:E.getRepl.__typename)==="Repl"?null===(r=E.getRepl.org)||void 0===r?void 0:r.id:void 0,I=(0,i._)(Y(),2),F=I[0],T=I[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.Y)(e4,{isOpen:v,onBucketAdded:p,onError:h,onRequestClose:y,orgId:R}),(0,l.Y)(j,{isOpen:A,loading:T,handleCreateBucket:function(e){F({variables:{input:e},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n){h(Error("Failed to create bucket"));return}p(n)},onError:h})},onRequestClose:_}),(0,l.Y)(nk.A,{pane:{type:"objectStorage"},maxWidth:450,body:nI.map(function(e,n){return(0,l.FD)(z.S,{row:!0,gap:16,children:[(0,l.Y)(z.S,{children:(0,l.Y)(nE.A,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,l.Y)(H.EY,{css:nF.rowText,children:e.text})]},n)}),innerRef:m,action:(0,l.FD)(nx,{replId:D,createBucketAuthz:a,actionDescription:"create a bucket",refetchAuthzQueryData:d,loading:T,children:[(0,l.Y)(U.$n,{css:nF.action,text:T?"Creating bucket...":"Create new bucket",onClick:k,colorway:"primary",iconLeft:T?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:T}),(0,l.Y)(z.S,{children:(0,l.Y)(nD.m_,{isDisabled:null==c?void 0:c.isAuthorized,tooltip:null!==(o=null==c?void 0:c.message)&&void 0!==o?o:"You are not authorized to edit buckets",delay:"default",placement:"bottom-start",children:(0,l.Y)(U.$n,{css:nF.action,text:"Use an existing bucket",onClick:b,iconLeft:(0,l.Y)(nR.A,{}),disabled:T||!(null==c?void 0:c.isAuthorized)})})})]})})]})}var nP=t(72275),nL=t(93629),nU=t(55606),nN=t(80425),nO=t(18682),nM=t(76306),nB=t(25930),nH=t(33005),nz=function(e){var n=e.folderPath,t=e.onDropNativeFiles,r=(0,i._)((0,nB.H)(function(){return{accept:[ei.FILE,nH.FILE],drop:function(e){return"files"in e&&t(e.files),{name:n}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},nW=function(e){var n=e.currentFolder,t=e.onDropNativeFiles,r=(0,i._)((0,nB.H)(function(){return{accept:[nH.FILE],drop:function(e,n){n.didDrop()||e.dirContent.then(function(e){t(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[n]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},nG=t(22846),nV=t(1478),nj=t(22611),nZ=t(95235),nq=t(69929),nK=t(38520),n$=t(52186),nJ=t(1694),nQ=t(61116),nX=t(73197),n0=t(53323),n1=t(4320),n2=t(16709),n5=t(24572),n4=t(44718),n3=t(91918),n8=t(91364),n7=t(50514),n6=t(8351),n9="1px dashed ".concat(eW.LU.accentPrimaryDefault),te=P.kL.min(500),tn=(0,nV.v)(["bodyOutline","bodyMarginBottom"]),tt=tn.cssVars,tr=tn.styleTokens,ti=(0,T.x)({wrapper:[P.wp.flex.growAndShrink(1)],buttons:[(0,nP._)({},te,[P.wp.rowWithGap(8)])],secondaryButtons:[P.wp.flex.grow(1)],tableWrapper:[P.wp.flex.growAndShrink(1),P.wp.borderRadius(4),{outline:tr.bodyOutline,marginBottom:tr.bodyMarginBottom}],tableHeader:[P.wp.position.sticky,P.wp.top(0),P.wp.textAlign.left,P.wp.zIndex(1),P.wp.backgroundColor.backgroundDefault],tableHeaderMainColumn:[P.wp.textAlign.left,P.wp.p(4)],footer:[P.wp.mb(8),P.wp.pt(8),P.wp.flex.growAndShrink(1)],loadMoreButton:[P.wp.flex.growAndShrink(1)],pageSizeSelect:[P.wp.minWidth(75),{borderTopRightRadius:"".concat(eW.LU.space4," !important"),borderBottomRightRadius:"".concat(eW.LU.space4," !important")}],searchWrapper:[P.wp.flex.grow(1)]});function to(e){var n,t,d,p,f,h,m,g,v=e.bucketExternalId,w=e.onOpenCommandsTab,y=e.onError,b=(0,i._)((0,s.useState)(""),2),S=b[0],Y=b[1],A=(0,c.md)(eS).get(v),C=null!==(m=null==A?void 0:A.isLoading)&&void 0!==m&&m,x=(0,i._)((0,s.useState)(""),2),_=x[0],k=x[1],D=(t=(n={searchQuery:S,bucketState:A,currentFolder:_}).bucketState,d=n.currentFolder,(0,s.useMemo)(function(){if(!t)return{displayedItems:[],nextPageToken:void 0,total:0};var e=t.items,n=t.search,r=t.nextPageToken,i=n?n.items:e,a=n?n.nextPageToken:r,l=n?n.items.length:e.length,s=[],c=new Map,p=!0,f=!1,h=void 0;try{for(var m,g=i[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.name.startsWith(d)&&v.name!==d){var w=v.name.slice(d.length);if(!w.includes("/")){s.push((0,q._)((0,u._)({},v),{isFolder:!1,displayName:w}));continue}var y=w.split("/")[0];if(c.get(y)||c.set(y,{isFolder:!0,name:d+y+"/",displayName:y}),v.name===d+y+"/"){var b=c.get(y);if(!b)throw Error("Folder should have been added to map");b.optimisticallyInserted=v.optimisticallyInserted,b.isPendingDeletion=v.isPendingDeletion}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}var S=eE(Array.from(c.values())),Y=eE(s);return{displayedItems:(0,o._)(S).concat((0,o._)(Y)),nextPageToken:a,total:l}},[t,d])),E=D.displayedItems,R=D.nextPageToken,I=D.total,F=!!R,T=(0,s.useMemo)(function(){return[{accessorKey:"name",header:"Name",size:500},{accessorKey:"added",header:"Added",size:200},{accessorKey:"size",header:"Size",size:200}]},[]),P=(0,nL.useReactTable)({data:E,columns:T,getCoreRowModel:(0,nL.getCoreRowModel)()}),L=P.getRowModel().rows,N=(0,s.useRef)(null),O=(0,nU.Te)({count:F?L.length+1:L.length,getScrollElement:function(){return N.current},estimateSize:function(){return 34},overscan:20}),M=eI(),B=M.fetchObjects,G=M.maxResults,V=M.setMaxResults,j=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(ex),l=(0,c.Xr)(e_),u=(0,c.Xr)(ek);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=e.bucketExternalId,r=e.folderName,i=e.currentFolder,s=e.onError,r.includes("/"))return null==s||s(Error("Folder name cannot contain a forward slash")),[2];t(!0),o({bucketExternalId:n,name:c=i+r+"/",contentType:"text/plain",size:"0"}),d=new File([""],r,{type:"text/plain"}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,es({bucketExternalId:n,objectName:c,file:d})];case 2:return a.sent(),l({bucketExternalId:n,name:c,isOptimisticallyInserted:!1}),[3,4];case 3:return p=a.sent(),null==s||s(p),u({bucketExternalId:n,name:c}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return d.apply(this,arguments)},loading:n}}().createFolder,Z=eF().uploadFiles,K=(0,s.useRef)(null),$=(0,s.useRef)(null),J=(0,i._)((0,s.useState)(!1),2),Q=J[0],X=J[1],ee=(0,i._)((0,s.useState)(null),2),en=ee[0],et=ee[1],er=nW({currentFolder:_,onDropNativeFiles:function(e){Z({bucketExternalId:v,files:e,targetFolder:_,onError:y})}}),ei=er.isOverCurrent,eo=er.drop,ea=function(e){Y(e),""===e&&B({bucketExternalId:v,onError:y})},el=!(E&&E.length);return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{css:ti.wrapper,children:[(0,l.FD)(z.S,{css:ti.buttons,gap:8,children:[(0,l.FD)(z.S,{row:!0,gap:8,children:[(0,l.Y)(U.$n,{onClick:function(){K.current&&K.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,l.Y)(n1.A,{})}),(0,l.Y)(U.$n,{onClick:function(){$.current&&$.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,l.Y)(n4.A,{})})]}),(0,l.FD)(z.S,{css:ti.secondaryButtons,row:!0,gap:8,justify:"space-between",children:[(0,l.Y)(U.$n,{onClick:function(){return X(!0)},text:"Create folder",iconLeft:(0,l.Y)(n5.A,{})}),(0,l.Y)(z.S,{css:ti.searchWrapper,children:(0,l.Y)(nq.I,{value:S,onChange:function(e){return ea(e.target.value)},onKeyDown:function(e){"Escape"===e.key&&ea(""),"Enter"===e.key&&B({bucketExternalId:v,matchGlob:S,onError:y})},onClear:function(){return ea("")},disabled:C})}),(0,l.Y)(U.$n,{onClick:function(){return B({bucketExternalId:v,matchGlob:S,onError:y})},text:"Refresh",loading:C,iconLeft:(0,l.Y)(n7.A,{})})]})]}),(0,l.FD)(z.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.Y)(tb,{currentFolder:_,bucketExternalId:v,setCurrentFolder:k,onError:y}),(0,l.Y)(z.S,{children:C?(0,l.Y)(W.A,{size:12}):(0,l.FD)(H.EY,{color:"dimmer",variant:"small",children:[F?"Loaded":"Total"," ",I]})})]}),(0,l.Y)(z.S,{innerRef:eo,css:ti.tableWrapper,style:(g={},(0,nP._)(g,tt.bodyOutline,(f=(p={isOverCurrent:ei,isEmpty:el}).isOverCurrent,h=p.isEmpty,f?n9:h?"1px dashed ".concat(eW.LU.outlineDefault):void 0)),(0,nP._)(g,tt.bodyMarginBottom,ei||el?eW.LU.space8:void 0),g),children:!el||Q?(0,l.Y)("div",{ref:N,className:"container",style:{overflow:"auto",flex:"1 1 auto"},children:(0,l.Y)("div",{style:{height:"".concat(O.getTotalSize(),"px")},children:(0,l.FD)("table",{style:{width:"100%"},children:[(0,l.Y)("thead",{css:ti.tableHeader,children:P.getHeaderGroups().map(function(e){return(0,l.Y)("tr",{children:e.headers.map(function(e){return(0,l.Y)("th",{css:ti.tableHeaderMainColumn,colSpan:e.colSpan,style:{width:e.getSize()},children:(0,nL.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,l.FD)("tbody",{children:[Q?(0,l.Y)(tA,{onCreateFolder:function(e){X(!1),j({bucketExternalId:v,folderName:e,currentFolder:_,onError:y})},onCanceled:function(){return X(!1)}}):null,O.getVirtualItems().map(function(e,n){if(e.index>L.length-1)return(0,l.Y)("tr",{style:{height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start-n*e.size,"px)")},children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(nj.Y,{css:ti.footer,children:[(0,l.Y)(U.$n,{css:ti.loadMoreButton,onClick:function(){return B({bucketExternalId:v,matchGlob:S,loadMorePageToken:R,onError:y})},text:C?"":"Load more",iconLeft:C?(0,l.Y)(W.A,{}):void 0,loading:C,disabled:C||!F}),(0,l.Y)(nK.l,{css:ti.pageSizeSelect,isDisabled:C||!F,"aria-label":"Select page size",selectedKey:G.toString(),onSelectionChange:function(e){return V(Number(e))},items:eR.map(function(e){return{id:e.toString()}}),children:function(e){return(0,l.Y)(ej.nh,{label:e.id},e.id)}})]})})},e.key.toString());var t=E[e.index];return t?t.isFolder?(0,l.Y)(tc,{index:n,virtualRow:e,item:t,setCurrentFolder:k,onDeleteClick:et,bucketExternalId:v,onError:y},t.name):(0,l.Y)(tu,{index:n,virtualRow:e,item:t,bucketExternalId:v,onDeleteClick:et,onError:y},t.name):null})]})]})})}):(0,l.Y)(l.FK,{children:C?(0,l.Y)(z.S,{align:"center",justify:"center",style:{flex:1},children:(0,l.Y)(W.A,{})}):(0,l.Y)(tk,{onOpenCommandsTab:w})})}),(0,l.Y)(nG.v,{fileUploadInputRef:K,dirUploadInputRef:$,uploadFiles:function(e){return Z({bucketExternalId:v,files:e.files,targetFolder:_,onError:y})}})]}),(0,l.Y)(tx,{bucketExternalId:v,requestedDeleteItem:en,onRequestClose:function(){return et(null)},onError:y})]})}var ta=(0,nV.v)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),tl=ta.cssVars,ts=ta.styleTokens;function tc(e){var n,t=e.index,r=e.virtualRow,i=e.item,o=e.bucketExternalId,a=e.setCurrentFolder,s=e.onDeleteClick,c=e.onError,u=eF().uploadFiles,d=(0,C.A)().showConfirm,p=nz({folderPath:i.name,onDropNativeFiles:function(e){d('Uploading files to "'.concat(i.name,'"')),u({bucketExternalId:o,files:e,targetFolder:i.name,onError:c})}}),f=p.isDraggedOver,h=p.drop;return(0,l.Y)(th,{index:t,virtualRow:r,item:i,ref:h,onDeleteClick:function(){return s(i)},icon:(0,l.Y)(n2.A,{}),timeCreatedCell:"-",sizeCell:"-",style:(n={},(0,nP._)(n,tl.rowOutline,f?n9:void 0),(0,nP._)(n,tl.rowCursor,"pointer"),n),onClick:function(){return a(i.name)},onKeyDown:function(e){"Enter"===e.key&&a(i.name)}})}function tu(e){var n,t,o,u,d,p=e.index,f=e.virtualRow,h=e.item,m=e.bucketExternalId,g=e.onDeleteClick,v=e.onError,w=encodeURIComponent(h.name),y="/object-storage/storage/v1/b/".concat(m,"/o/").concat(w,"?alt=media"),b=!!(h.optimisticallyInserted||h.isPendingDeletion),S=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(ex),u=(0,c.Xr)(ek);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.object,i=e.destinationFolder,s=e.onError,c=e.onSuccess,t(!0),d=i+r.name.split("/").pop(),o({bucketExternalId:n,name:r.name,isPendingDeletion:!0}),l({bucketExternalId:n,name:d,contentType:r.contentType,size:r.size}),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,function(e){return ev.apply(this,arguments)}({destinationBucketExternalId:n,sourceBucketExternalId:n,sourceObjectName:r.name,destinationObjectName:d})];case 2:return a.sent(),[4,em({bucketExternalId:n,objectName:r.name})];case 3:return a.sent(),u({bucketExternalId:n,name:r.name}),o({bucketExternalId:n,name:d,isOptimisticallyInserted:!1}),null==c||c(),[3,5];case 4:return p=a.sent(),null==s||s(p),o({bucketExternalId:n,name:r.name,isPendingDeletion:!1}),u({bucketExternalId:n,name:d}),[3,5];case 5:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,moveObject:function(e){return d.apply(this,arguments)}}}().moveObject,Y=(0,C.A)().showConfirm,A=(t=(n={item:h,disableDrag:b,onDropOverFolder:function(e){return S({bucketExternalId:m,object:h,destinationFolder:e,onSuccess:function(){Y('Moved "'.concat(h.name,'" to "').concat(e,'"'))},onError:v})}}).item,o=n.disableDrag,u=n.onDropOverFolder,{isDragging:(d=(0,i._)((0,nM.i)(function(){return{type:ei.FILE,canDrag:!o,item:function(){return{name:t.name,type:ei.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,n){var t=n.getDropResult();t&&t&&u(t.name)}}},[o]),2))[0].isDragging,drag:d[1]}),x=A.isDragging,_=A.drag;return(0,l.Y)(th,{index:p,virtualRow:f,item:h,ref:_,onDeleteClick:function(){return g(h)},icon:(0,l.Y)(tC,{contentType:h.contentType}),timeCreatedCell:(0,l.Y)(n$.Dc,{date:h.timeCreated}),sizeCell:(0,nN.z)(Number(h.size),{isKib:!0,isKibNotation:!0}),style:(0,nP._)({},tl.rowOpacity,x?.5:void 0),additionalActionButtons:(0,l.Y)(l.FK,{children:(0,l.Y)(nZ.K0,{alt:"Download",css:tp.rowActionButton,children:(0,l.Y)("a",{download:h.displayName,href:y,css:P.wp.color.foregroundDefault,children:(0,l.Y)(nX.A,{})})})})})}var td=(0,T.x)({row:[P.wp.position.relative,P.wp.borderRadius(4),{outline:ts.rowOutline,outlineOffset:-1,opacity:ts.rowOpacity,cursor:ts.rowCursor,":hover":{background:"".concat(eW.LU.backgroundHigher," !important")},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(eW.LU.accentPrimaryDefault)}}],text:[P.wp.flex.shrink(1)]}),tp=(0,T.x)({row:[td.row],pendingRow:[td.row,P.wp.color.foregroundDimmest],tableData:[P.wp.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],text:td.text,strikeThroughText:[td.text,{textDecoration:"line-through"}],actionButtonTableData:[P.wp.position.relative],rowActionButtonGroup:[P.wp.px(4),P.wp.position.absolute,P.wp.right(0),P.wp.top(0),P.wp.bottom(0),P.wp.rowWithGap(4),P.wp.align.center,P.wp.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[eG.b.filled],loadingTableData:[P.wp.position.relative],loadingIconWrapper:[P.wp.position.absolute,P.wp.right(4),P.wp.top(0),P.wp.bottom(0),P.wp.justify.center],loadingIcon:[{borderRadius:"50%"},P.wp.backgroundColor.backgroundDefault]}),tf=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],r=(0,i._)((0,s.useState)(null),2),o=r[0],a=r[1];return(0,s.useEffect)(function(){if(null!==o){var e=function(){t(o.offsetWidth<o.scrollWidth||o.offsetHeight<o.scrollHeight)};e();var n=new ResizeObserver(e);return n.observe(o),function(){return n.disconnect()}}},[o]),{attachObserver:a,isOverflowing:n}},th=(0,s.forwardRef)(function(e,n){var t=e.index,r=e.virtualRow,i=e.item,o=e.onDeleteClick,a=e.icon,s=e.timeCreatedCell,c=e.sizeCell,d=e.style,p=e.onClick,f=e.onKeyDown,h=e.additionalActionButtons,m=i.isPendingDeletion?tp.strikeThroughText:tp.text,g=i.optimisticallyInserted||i.isPendingDeletion,v=tf(),w=v.attachObserver,y=v.isOverflowing;return(0,l.FD)("tr",{style:(0,q._)((0,u._)({},d),{height:"".concat(r.size,"px"),transform:"translateY(".concat(r.start-t*r.size,"px)"),background:r.index%2==0?"color-mix(in srgb, ".concat(eW.LU.backgroundDefault," 60%, ").concat(eW.LU.backgroundRoot,")"):void 0}),ref:n,tabIndex:0,css:g?tp.pendingRow:tp.row,onClick:p,onKeyDown:f,children:[(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(nD.m_,{isDisabled:!y,tooltip:i.displayName,children:(0,l.FD)(z.S,{row:!0,gap:8,align:"center",children:[a,(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,ref:w,children:i.displayName})]})})}),(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,children:s})}),(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,children:c})}),g?null:(0,l.Y)("td",{css:tp.actionButtonTableData,children:(0,l.FD)(z.S,{css:tp.rowActionButtonGroup,id:"action-buttons",children:[h,(0,l.Y)(nZ.K0,{onClick:o,alt:"Delete",css:tp.rowActionButton,children:(0,l.Y)(n6.A,{color:eW.LU.accentNegativeDefault})})]})}),g?(0,l.Y)("td",{css:tp.loadingTableData,children:(0,l.Y)(z.S,{css:tp.loadingIconWrapper,children:(0,l.Y)(W.A,{css:tp.loadingIcon})})}):null]},i.name)}),tm=(0,nV.v)(["breadcrumbOutline","breadcrumbTextColor"]),tg=tm.cssVars,tv=tm.styleTokens,tw=(0,T.x)({wrapper:[P.wp.pt(12),P.wp.pb(4)],breadcrumb:[{color:tv.breadcrumbTextColor,outline:tv.breadcrumbOutline}]}),ty=function(e){var n=e.split("/").filter(function(e){return""!==e}),t=n.map(function(e,t){return{folderName:e,path:n.slice(0,t+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,o._)(t))};function tb(e){var n=e.currentFolder,t=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=ty(n);return(0,l.Y)(z.S,{css:tw.wrapper,row:!0,gap:2,align:"center",children:o.map(function(e,n){var a=e.folderName,c=e.path,u=n===o.length-1;return(0,l.FD)(s.Fragment,{children:[(0,l.Y)(tS,{folderPath:c,folderName:a,bucketExternalId:t,onClick:function(){return r(c)},isLastBreadcrumb:u,onError:i}),u?null:(0,l.Y)(H.EY,{color:"dimmest",children:"/"})]},c)})})}function tS(e){var n,t=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,s=e.onError,c=eF().uploadFiles,u=nz({folderPath:t,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:t,onError:s})}}),d=u.isDraggedOver,p=u.drop;return(0,l.Y)(U.$n,{ref:p,text:r,variant:"nofill",onClick:o,iconLeft:(0,l.Y)(n2.A,{}),size:"small",disabled:a,style:(n={},(0,nP._)(n,tg.breadcrumbTextColor,a?eW.LU.foregroundDefault:void 0),(0,nP._)(n,tg.breadcrumbOutline,d?n9:void 0),n),css:tw.breadcrumb})}var tY=(0,T.x)({icon:[P.wp.height(24),P.wp.width(24),P.wp.center]});function tA(e){var n=e.onCreateFolder,t=e.onCanceled,r=(0,i._)((0,s.useState)(""),2),o=r[0],a=r[1],c=(0,nO.A)(t,[]);return(0,l.Y)("tr",{children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(z.S,{innerRef:c,row:!0,gap:8,align:"center",children:[(0,l.Y)(z.S,{css:tY.icon,children:(0,l.Y)(n2.A,{})}),(0,l.Y)(N.pd,{value:o,autoFocus:!0,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(n(o),a("")),"Escape"===e.key&&t()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function tC(e){var n=e.contentType;return n?n.startsWith("image/")?(0,l.Y)(n3.A,{}):n.startsWith("video/")?(0,l.Y)(nQ.A,{}):n.startsWith("audio/")?(0,l.Y)(n8.A,{}):(0,l.Y)(n0.A,{}):(0,l.Y)(n0.A,{})}function tx(e){var n,t=e.bucketExternalId,o=e.requestedDeleteItem,u=e.onRequestClose,d=e.onError,p=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(ek);function u(){return(u=(0,r._)(function(e){var n,r,i,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.objectName,i=e.onError,t(!0),o({bucketExternalId:n,name:r,isPendingDeletion:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,em({bucketExternalId:n,objectName:r})];case 2:return a.sent(),l({bucketExternalId:n,name:r}),[3,4];case 3:return s=a.sent(),null==i||i(s),o({bucketExternalId:n,name:r,isPendingDeletion:!1}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteObject:function(e){return u.apply(this,arguments)}}}().deleteObject,f=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(ek),u=(0,c.md)(eS);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d,p,f;return(0,a.YH)(this,function(h){switch(h.label){case 0:n=e.bucketExternalId,i=e.folderPath,s=e.onError,t(!0),p=(null!==(d=null===(c=u.get(n))||void 0===c?void 0:c.items)&&void 0!==d?d:[]).filter(function(e){return e.name.startsWith(i)}),h.label=1;case 1:var m;return h.trys.push([1,3,,4]),[4,Promise.all(p.map((m=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:o({bucketExternalId:n,name:e.name,isPendingDeletion:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,em({bucketExternalId:n,objectName:e.name})];case 2:return t.sent(),l({bucketExternalId:n,name:e.name}),[3,4];case 3:return t.sent(),o({bucketExternalId:n,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return m.apply(this,arguments)})))];case 2:return h.sent(),[3,4];case 3:return f=h.sent(),null==s||s(f),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteFolder:function(e){return d.apply(this,arguments)}}}().deleteFolder,h=(n=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!(null==o?void 0:o.isFolder))return[3,2];return[4,f({bucketExternalId:t,folderPath:o.name,onError:d})];case 1:return e.sent(),u(),[2];case 2:if(!o)return[3,4];return[4,p({bucketExternalId:t,objectName:o.name,onError:d})];case 3:e.sent(),u(),e.label=4;case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,l.Y)(M.a,{isOpen:!!o,onRequestClose:u,children:o?(0,l.Y)(nJ.A,{name:o.displayName,description:'"'.concat(o.displayName,'" ').concat(o.isFolder?" and all its contents":""),entityType:o.isFolder?"folder":"file",hideModal:u,delete:h}):null})}var t_=(0,T.x)({wrapper:[P.wp.center,P.wp.colWithGap(16),P.wp.flex.grow(1),P.wp.justify.center,P.wp.borderRadius(4),P.wp.mb(8)],textWrapper:[P.wp.center,P.wp.colWithGap(4)],text:[P.wp.center],textButton:[P.wp.color.accentPrimaryStronger]});function tk(e){var n=e.onOpenCommandsTab;return(0,l.Y)(z.S,{css:t_.wrapper,children:(0,l.FD)(z.S,{css:t_.textWrapper,children:[(0,l.Y)(H.EY,{variant:"subheadBig",children:"No objects"}),(0,l.FD)(z.S,{css:t_.text,children:[(0,l.Y)(H.EY,{children:"Drag and drop or click to upload,"}),(0,l.FD)(z.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(H.EY,{children:"or"}),(0,l.Y)(U.$n,{variant:"underlinedOnHover",colorway:"primary",onClick:n,text:"upload using commands",css:t_.textButton})]})]})]})})}function tD(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return tD=function(){return e},e}function tE(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsRemoveReplBucket(\n    $input: RemoveReplBucketInput!\n  ) {\n    removeReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return tE=function(){return e},e}var tR={},tI=(0,p.J1)(tD()),tF=(0,p.J1)(tE(),y),tT=t(63481),tP=t(70953);function tL(e){var n,t,r=e.bucketId,o=e.bucketExternalId,a=e.onSettingsUpdate,c=e.onError,d=(0,x.A)(),p=(0,i._)((0,s.useState)(!1),2),f=p[0],m=p[1],g=function(){return m(!1)},v=(0,i._)((0,s.useState)(!1),2),w=v[0],y=v[1],b=function(){return y(!1)},S=(0,i._)((n=(0,u._)({},tR,void 0),h.n(tI,n)),2),Y=S[0],A=S[1].loading,C=(0,i._)((t=(0,u._)({},tR,void 0),h.n(tF,t)),2),_=C[0],k=C[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{gap:32,children:[(0,l.Y)(z.S,{gap:12,children:(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(H.EY,{variant:"subheadDefault",children:"Bucket ID"}),(0,l.Y)(nn.Ay,{children:"```\n".concat(o)})]})}),(0,l.FD)(z.S,{gap:12,children:[(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(U.$n,{text:k?"Removing Bucket from Repl...":"Remove Bucket from Repl",loading:k,css:P.wp.color.accentNegativeStronger,onClick:function(){return y(!0)}}),(0,l.Y)(H.EY,{color:"dimmest",children:"Your Repl will no longer be able to access this bucket. No data will be deleted and you can re-add this bucket at any time."})]}),(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(U.$n,{text:A?"Deleting":"Delete Bucket",loading:A,iconLeft:(0,l.Y)(n6.A,{color:eW.LU.accentNegativeStronger}),css:P.wp.color.accentNegativeStronger,onClick:function(){return m(!0)}}),(0,l.Y)(H.EY,{color:"dimmest",children:"You cannot undo this action."})]})]})]}),(0,l.Y)(M.a,{isOpen:w,onRequestClose:b,children:(0,l.Y)(tT.A,{prompt:"Remove Bucket?",desc:"This action will revoke this Repl's access to this bucket.",onCancel:b,confirmText:"Remove Bucket",icon:(0,l.Y)(tP.A,{}),onConfirm:function(){_({variables:{input:{bucketId:r,replId:d}},onError:c,onCompleted:function(e){"Bucket"===e.removeReplBucket.__typename?a({type:"removeBucket",data:{bucketId:r}}):c(Error("Failed to remove bucket: "+e.removeReplBucket.message))}}),b()}})}),(0,l.Y)(M.a,{isOpen:f,onRequestClose:g,children:(0,l.Y)(nJ.A,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:g,delete:function(){return Y({variables:{input:{bucketId:r}},onError:c,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?a({type:"deleteBucket",data:{bucketId:r}}):c(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var tU=t(15785),tN=t(25877),tO=t(37535),tM=t(61465),tB=t(80149),tH=t(46086),tz=[{icon:(0,l.Y)(tB.A,{}),title:"Objects",value:"objects"},{icon:(0,l.Y)(nr.A,{}),title:"Commands",value:"commands"},{icon:(0,l.Y)(tH.A,{}),title:"Settings",value:"settings"}],tW=(0,T.x)({self:[P.wp.flex.growAndShrink(1)],controls:[P.wp.px(8),P.wp.py(4)],controlSeparator:[P.wp.color.outlineDefault,P.wp.px(8)],errorWrapper:[P.wp.p(16)],panels:[P.wp.flex.column,P.wp.px(8),P.wp.pt(12),P.wp.flex.growAndShrink(1)],objectTabPanel:[P.wp.flex.column,P.wp.flex.growAndShrink(1)]}),tG=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.onError,o=t.onCompleted,a=(0,x.A)(),l=(0,s.useCallback)(function(e){if((null==e?void 0:e.repl.__typename)==="Repl")try{return function(e){if("Repl"!==e.__typename)throw Error("Failed to fetch bucket data");var n,t=e.buckets;if(t&&"BucketConnection"!==t.__typename)throw Error(t.message);var r=null!==(n=null==t?void 0:t.items)&&void 0!==n?n:[];if(!r.length)return{buckets:r};var i=e.defaultBucket;if(i){if("Bucket"===i.__typename)return{initialBucket:i,buckets:r};throw Error(i.message)}return{initialBucket:r[0],buckets:r}}(e.repl)}catch(e){null==r||r(e)}},[]),c=(e={variables:{replId:a,bucketsCount:10},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){if((null==e?void 0:e.repl.__typename)==="Repl"){var n=l(e);n&&(null==o||o(n))}}},n=(0,u._)({},w,e),f.I(b,n)),d=c.data,p=c.loading,h=c.error,m=c.refetch,g=(0,i._)((0,s.useState)(d?l(d):void 0),2),v=g[0],y=g[1];return(0,s.useEffect)(function(){d&&y(l(d))},[l,d]),{buckets:null==v?void 0:v.buckets,initialBucket:null==v?void 0:v.initialBucket,data:d,loading:p,error:h,refetch:m}};function tV(){var e,n,t,u,d,p,f=(0,i._)((0,s.useState)(),2),h=f[0],m=f[1],g=(0,s.useMemo)(function(){return null==h?void 0:h.map(function(e){return e.id})},[h]),v=(0,i._)((0,s.useState)(),2),w=v[0],y=v[1],b=(0,i._)((0,s.useState)("objects"),2),S=b[0],x=b[1],R=(0,i._)((0,s.useState)(!1),2),I=R[0],F=R[1],T=(0,s.useCallback)(function(){return F(!1)},[]),P=(0,s.useCallback)(function(){return F(!0)},[]),L=(0,i._)((0,s.useState)(!1),2),U=L[0],N=L[1],O=(0,s.useCallback)(function(){return N(!1)},[]),M=(0,s.useCallback)(function(){return N(!0)},[]),B=(0,c.md)(eS).get(null!==(d=null==w?void 0:w.externalId)&&void 0!==d?d:""),W=eI(),G=W.fetchObjects,V=W.loading,Z=(0,s.useCallback)(function(e){y(e),x("objects"),G({bucketExternalId:e.externalId})},[G]),q=(0,D.A)().dotReplit;(0,s.useEffect)(function(){w&&q.updateDotReplit([(0,A.Xl)(w.externalId)])},[w,q]);var $=(0,C.A)(),J=$.showConfirm,Q=$.showError,X=function(e){Q(e.message),K.v4(function(n){n.setTag("object-storage-pane",!0),K.Cp(e)})},ee=tG({onError:X,onCompleted:function(e){var n=e.buckets,t=e.initialBucket;m(n),!w&&t&&(y(t),G({bucketExternalId:null==t?void 0:t.externalId}))}}),en=ee.data,et=ee.loading,er=ee.error,ei=ee.refetch,eo=(0,i._)(Y(),2),ea=eo[0],el=eo[1].loading,es=(0,s.useCallback)(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];m(function(n){return n?[e].concat((0,o._)(n)):[e]}),y(e),ei(),G({bucketExternalId:e.externalId,isNewBucket:n})},[G,ei]),ec=(0,s.useCallback)(function(e){var n=(null!=h?h:[]).filter(function(n){return n.id!==e});if(m(n),0===n.length){y(void 0),x("objects"),q.updateDotReplit([{path:"objectStorage",op:"remove"}]);return}y(n[0]),G({bucketExternalId:n[0].externalId}),x("objects")},[G,h,q]),eu=(null==en?void 0:en.repl.__typename)==="Repl"?en.repl.authorizations.createObjectBucket:void 0,ed=(null==en?void 0:en.repl.__typename)==="Repl"?en.repl.authorizations.editObjectBucket:void 0,ep=(null==en?void 0:en.repl.__typename)==="Repl"?null===(u=en.repl.org)||void 0===u?void 0:u.id:void 0,ef=(e=(0,E.Jw)(k._t.id,k.ij.UploadImages),n=(0,E.Jw)(k._t.id,k.ij.FindBucketId),(0,_.P)(e,n,{breadcrumb:"client/workspace/components/ObjectStorage/index.tsx:690"}));if(er)return(0,l.Y)(z.S,{css:tW.errorWrapper,children:(0,l.Y)(ne.N,{text:'Error: "'.concat(er.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(et&&!h)return(0,l.Y)(nk.A,{pane:{type:"objectStorage"},maxWidth:450,loading:!0,innerRef:ef});if(!w)return(0,l.Y)(nT,{createBucketAuthz:eu,editBucketAuthz:ed,refetchAuthzQueryData:ei,onBucketAdded:(t=(0,r._)(function(e){var n=arguments;return(0,a.YH)(this,function(t){return es(e,!(n.length>1)||void 0===n[1]||n[1]),[2]})}),function(e){return t.apply(this,arguments)}),onError:X,innerRef:ef});switch(S){case"objects":p=V&&void 0===B?(0,l.Y)(tU.A,{}):(0,l.Y)(z.S,{css:tW.objectTabPanel,children:(0,l.Y)(tM.A,{children:(0,l.Y)(to,{bucketExternalId:w.externalId,onOpenCommandsTab:function(){x("commands")},onError:X})})});break;case"commands":p=(0,l.Y)(z.S,{children:(0,l.Y)(nc,{onError:X})});break;case"settings":p=(0,l.Y)(z.S,{children:(0,l.Y)(tL,{bucketId:w.id,bucketExternalId:w.externalId,onSettingsUpdate:function(e){("deleteBucket"===e.type||"removeBucket"===e.type)&&ec(e.data.bucketId),"deleteBucket"===e.type&&J("Bucket deleted successfully"),"removeBucket"===e.type&&J("Bucket removed from Repl successfully")},onError:X})})}return(0,l.FD)(z.S,{innerRef:ef,css:tW.self,children:[(0,l.Y)(e4,{excludeBucketIds:null!=g?g:[],isOpen:I,onBucketAdded:function(e){T(),es(e,!1),J("Bucket added to Repl successfully")},onError:X,onRequestClose:T,orgId:ep}),(0,l.Y)(j,{isOpen:U,loading:el,handleCreateBucket:function(e){ea({variables:{input:{name:e.name,replId:e.replId}},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n){X(Error("Failed to create bucket"));return}O(),es(n),J("Bucket created successfully")},onError:X})},onRequestClose:O}),(0,l.FD)(z.S,{css:tW.controls,align:"center",row:!0,children:[(0,l.Y)(tj,{buckets:h,onRequestAddBucket:P,onRequestCreateBucket:M,onSelect:Z,selectedBucketId:null==w?void 0:w.id}),(0,l.Y)(H.EY,{css:tW.controlSeparator,variant:"small",children:"/"}),(0,l.Y)(tZ,{onSelect:x,selectedView:S})]}),(0,l.Y)(tN.a,{}),(0,l.Y)(z.S,{css:tW.panels,children:p})]})}function tj(e){var n=e.buckets,t=e.onRequestAddBucket,r=e.onRequestCreateBucket,i=e.onSelect,o=e.selectedBucketId,a=(0,s.useMemo)(function(){if(n&&o)return n.find(function(e){return e.id===o})},[n,o]);return a&&n?(0,l.Y)(z.S,{children:(0,l.FD)(tO.in,{label:a.name,items:n,trigger:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:a.name,iconRight:(0,l.Y)(eK.A,{size:12})}),children:[n.map(function(e){return(0,l.Y)(tO.Dr,{icon:(0,l.Y)(eq.A,{visibility:e.id===a.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:e.id!==a.id?function(){i(e)}:void 0},e.id)}),(0,l.Y)(tO.wv,{}),(0,l.Y)(tO.Dr,{icon:(0,l.Y)(G.A,{}),id:"create-new",label:"Create new bucket",onAction:r},"create-new"),(0,l.Y)(tO.Dr,{icon:(0,l.Y)(nR.A,{}),id:"add-existing",label:"Add an existing bucket",onAction:t},"add-existing")]})}):(0,l.Y)(z.S,{children:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:"Loading...",iconRight:(0,l.Y)(eK.A,{size:12})})})}function tZ(e){var n=e.onSelect,t=e.selectedView,r=(0,s.useMemo)(function(){return tz.find(function(e){return e.value===t})},[t]);return r?(0,l.Y)(z.S,{children:(0,l.Y)(tO.in,{onAction:function(e){var t=tz.find(function(n){return n.value===e});t&&n(t.value)},label:r.title,items:tz,trigger:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:r.title,iconLeft:r.icon,iconRight:(0,l.Y)(eK.A,{size:12})}),children:function(e){return(0,l.Y)(tO.Dr,{icon:e.icon,id:e.value,label:e.title},e.value)}})}):null}},19677:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(30758),i=t(81054),o=t.n(i);function a(e){return(0,r.useMemo)(function(){return!e||e.length>40?"Unknown License":o()(e,{upgrade:!1})||"Unknown License"},[e])}},57218:(e,n,t)=>{"use strict";t.d(n,{J:()=>u});var r=t(20837),i=t(43952),o=t(30758),a=t(63679),l=t(20334),s=t(63423),c={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python2:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],python3:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,s.I)(),n=(0,l.g)(),t=(0,a._P)({controlName:"flag-system-dependencies-search"});return{configs:(0,o.useMemo)(function(){var o=(null==e?void 0:e.packagers)||[],a=(null==o?void 0:o.map(function(e){var n,t;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null===(n=e.packagerFiles)||void 0===n?void 0:n.length)?e.packagerFiles:null!==(t=c[e.language])&&void 0!==t?t:[]})}))||[];return n&&a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:t,guessImports:!1,packagerFiles:["replit.nix"]}),a},[e,n,t]),loading:!e}}},60569:(e,n,t)=>{"use strict";t.d(n,{N:()=>u});var r=t(13454),i=t(5482),o="index.html",a=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/;let l={name:"html",getInstalledPackages:function(e){var n=e.services.fs;return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,n.stat(o)];case 1:var t;if(!e.sent().exists)return[2,[]];return[2,new Promise((t=(0,r._)(function(e){var t;return(0,i.YH)(this,function(r){return t=n.watchTextFile(o,{onReady:function(n){var r=n.initialContent,i=[],o=!0,l=!1,s=void 0;try{for(var c,u=r.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value.match(a);d&&i.push({name:d[1],version:d[2]})}}catch(e){l=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}t(),e(i)},onError:function(){t(),e([])}}),[2]})}),function(e){return t.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var n=e.name;return(0,r._)(function(){var e,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(t=r.sent())return[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var n=e.query;return(0,r._)(function(){var e;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=t.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,t.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()},install:function(e){var n=e.pkgs,t=e.services.fs;return(0,r._)(function(){var e,a,l,s,c,u,d;return(0,i.YH)(this,function(p){switch(p.label){case 0:return[4,t.stat(o)];case 1:if(!p.sent().exists)return[2];e=!0,a=!1,l=void 0,p.label=2;case 2:p.trys.push([2,7,8,9]),s=function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:var a;return e=u.value,[4,new Promise((a=(0,r._)(function(n){var a;return(0,i.YH)(this,function(l){return a=t.watchTextFile(o,{onReady:function(o){var l=o.initialContent,s=o.writeChange;return(0,r._)(function(){var r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:r='<script src="'.concat(e.sourceCodeURL,'"><\/script>\n'),-1===(o=l.indexOf("<script"))&&(o=l.indexOf("</body>")),-1===o&&(o=l.length),s({from:o,insert:r}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,t.flush()];case 2:case 3:return i.sent(),[3,5];case 4:return a(),n(),[7];case 5:return[2]}})})()},onError:function(){a(),n()}}),[2]})}),function(e){return a.apply(this,arguments)}))];case 1:return n.sent(),[2]}})},c=n[Symbol.iterator](),p.label=3;case 3:if(e=(u=c.next()).done)return[3,6];return[5,(0,i.Ju)(s())];case 4:p.sent(),p.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=p.sent(),a=!0,l=d,[3,9];case 8:try{e||null==c.return||c.return()}finally{if(a)throw l}return[7];case 9:return[2]}})})()},uninstall:function(e){var n=e.pkgs,t=e.services.fs;return(0,r._)(function(){var e,l,s,c,u,d,p;return(0,i.YH)(this,function(f){switch(f.label){case 0:return[4,t.stat(o)];case 1:if(!f.sent().exists)return[2];e=!0,l=!1,s=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),c=function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:var l;return e=d.value,[4,new Promise((l=(0,r._)(function(n){var l;return(0,i.YH)(this,function(s){return l=t.watchTextFile(o,{onReady:function(o){var s=o.initialContent,c=o.writeChange;return(0,r._)(function(){var r,o,u,d,p,f,h,m,g;return(0,i.YH)(this,function(i){switch(i.label){case 0:r=0,o=!0,u=!1,d=void 0;try{for(p=s.split("\n")[Symbol.iterator]();!(o=(f=p.next()).done);o=!0)(m=(h=f.value).match(a))&&(g=m[1],e.name===g&&c({from:r,to:r+h.length+1})),r+=h.length+1}catch(e){u=!0,d=e}finally{try{o||null==p.return||p.return()}finally{if(u)throw d}}i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,t.flush()];case 2:case 3:return i.sent(),[3,5];case 4:return l(),n(),[7];case 5:return[2]}})})()},onError:function(){l(),n()}}),[2]})}),function(e){return l.apply(this,arguments)}))];case 1:return n.sent(),[2]}})},u=n[Symbol.iterator](),f.label=3;case 3:if(e=(d=u.next()).done)return[3,6];return[5,(0,i.Ju)(c())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return p=f.sent(),l=!0,s=p,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(l)throw s}return[7];case 9:return[2]}})})()}};var s=t(87884);let c={name:"upm",getInstalledPackages:function(e){var n=e.id,t=e.services.packager;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.listSpecfile(n)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()},getPackageInfo:function(e){var n=e.id,t=e.name,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,o.fetchPackageInfo(t,n)]})})()},search:function(e){var n=e.id,t=e.query,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,o.searchPackages(t,n)]})})()},install:function(e){var n=e.id,t=e.pkgs,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,o.addPackages(t,n)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()},uninstall:function(e){var n=e.id,t=e.pkgs,o=e.services.packager;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return e.name}).map(function(e){return e.name}),[4,o.removePackages(e,n)];case 1:if(!r.sent())throw Error("Package uninstall failed");return[2]}})})()}};function u(e){switch(e){case"html":return l;case"nix":return s.A;default:return c}}},87884:(e,n,t)=>{"use strict";t.d(n,{A:()=>a,y:()=>o});var r=t(13454),i=t(5482);function o(e){return null==e?void 0:e.replace(/^pkgs\./,"")}let a={name:"nix",getInstalledPackages:function(e){var n=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,n.listPackages()];case 1:if(null!==(e=t.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()},getPackageInfo:function(e){var n=e.name,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.packageInfo(n)];case 1:if(null!==(e=r.sent()).error)return[2,{}];return[2,e.package]}})})()},search:function(e){var n=e.query,t=e.services.nixService,o=e.nixOpts;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.searchPackages(n,o)];case 1:if(null!==(e=r.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var n,t;return{name:e.name,version:e.version,description:e.description,homepageURL:null!==(n=e.homepageURL[0])&&void 0!==n?n:null,license:null!==(t=e.licenses[0])&&void 0!==t?t:null}})]}})})()},install:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.addPackages(e)];case 1:return r.sent(),[2]}})})()},uninstall:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.removePackages(e)];case 1:return r.sent(),[2]}})})()}}},75771:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(13454),i=t(5482),o=t(94086),a=t(30758),l=t(32889),s=t.n(l),c=t(39651),u=t(82436),d=t(24481),p=t(57218),f=t(60569),h=t(62714);function m(){var e=(0,d.A)(),n=(0,h.h)(h.bO),t=(0,h.h)(h.hQ),o=(0,h.Ou)(h.hQ),l=(0,h.ob)(h.hQ),m=(0,h.h)(h.E2),g=(0,h.cW)(),v=(0,h.wy)(),w=(0,h.Ff)(),y=(0,h.hq)(),b=(0,c.A)(),S=(0,p.J)().configs,Y=(0,h.ov)();return(0,a.useEffect)(function(){if(0!==S.length){var n=[],t=!1,r=!0,i=!1,a=void 0;try{for(var l,c=S[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=v(r.id),c=s()(function(){var n=v(r.id),a=o();if(n===h.d_.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,f.N)(r.id);i=i.then(function(){if(!t)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){t||(w(r.id,e),g(r.id,h.d_.Idle))})})}},500);if(r.packagerFiles.length>0){var u=!0,d=!1,p=void 0;try{for(var m,y=r.packagerFiles[Symbol.iterator]();!(u=(m=y.next()).done);u=!0)!function(){var t=m.value;if(!t.endsWith("/")){var r=null!==a&&a!==h.d_.Initializing&&a!==h.d_.Uninitialized,i=e.fs.watchFilePath(t,{onChange:function(){if(!r){r=!0;return}c()}});n.push(i)}}()}catch(e){d=!0,p=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw p}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){t=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[S,e.fs]),(0,a.useEffect)(function(){var n,t=!1;return(n=(0,r._)(function(){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){n=!0,r=!1,o=void 0;try{for(a=function(){var n=s.value,r=v(n.id);if(r&&r!==h.d_.Uninitialized&&r!==h.d_.Initializing)return"continue";g(n.id,h.d_.Initializing),(0,f.N)(n.id).getInstalledPackages({id:n.id,services:e}).then(function(e){t||(w(n.id,e),g(n.id,h.d_.Idle))})},l=S[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return n.apply(this,arguments)})(),function(){t=!0}},[S]),(0,a.useEffect)(function(){if(null===t&&0!==n.length){var e=n[0];v(e.id)===h.d_.Idle&&y(e)}},[m,t,n]),(0,a.useEffect)(function(){if(null!==t){var n,o=!1;return(n=(0,r._)(function(){var n,r,a,s,c,d,p,m,v,y,S,A,C,x,_,k,D,E;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(n=(0,f.N)(t.id),t.kind){case h.Vr.Install:return[3,1];case h.Vr.Uninstall:return[3,6]}return[3,11];case 1:g(t.id,h.d_.Installing),r=!0,a=!1,s=void 0;try{for(c=t.pkgs[Symbol.iterator]();!(r=(d=c.next()).done);r=!0)p=d.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"installed",packageId:p.name})}catch(e){a=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,n.install({id:t.id,pkgs:t.pkgs,services:e})];case 3:return i.sent(),1===t.pkgs.length?b.showNotice("Installed ".concat(null!==(m=t.pkgs[0].name)&&void 0!==m?m:"package")):b.showNotice("Installed ".concat(t.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===t.pkgs.length?b.showError("Failed to install ".concat(null!==(v=t.pkgs[0].name)&&void 0!==v?v:"package")):b.showError("Failed to install ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,5];case 5:return[3,11];case 6:g(t.id,h.d_.Uninstalling),y=!0,S=!1,A=void 0;try{for(C=t.pkgs[Symbol.iterator]();!(y=(x=C.next()).done);y=!0)_=x.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"removed",packageId:_.name})}catch(e){S=!0,A=e}finally{try{y||null==C.return||C.return()}finally{if(S)throw A}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,n.uninstall({id:t.id,pkgs:t.pkgs,services:e})];case 8:return i.sent(),1===t.pkgs.length?b.showNotice("Removed ".concat(null!==(k=t.pkgs[0].name)&&void 0!==k?k:"package")):b.showNotice("Removed ".concat(t.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===t.pkgs.length?b.showError("Failed to remove ".concat(null!==(D=t.pkgs[0].name)&&void 0!==D?D:"package")):b.showError("Failed to remove ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,n.getInstalledPackages({id:t.id,services:e})];case 12:if(E=i.sent(),o)return[2];return w(t.id,E),g(t.id,h.d_.Idle),l(null),[2]}})}),function(){return n.apply(this,arguments)})(),function(){o=!0}}},[t]),null}function g(e){var n=e.children,t=(0,h.PY)();return(0,o.FD)(h.tB.Provider,{value:t,children:[(0,o.Y)(m,{}),n]})}},18562:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(94086),i=t(85325);function o(e){var n=e.children,t=e.config,o=(0,i.ob)(i.Ai);return t.id&&o(t),(0,r.Y)(r.FK,{children:n})}function a(e){var n=e.children,t=e.config,a=(0,i.PY)();return(0,r.Y)(i.uB.Provider,{value:a,children:t?(0,r.Y)(o,{config:t,children:n}):n})}},62714:(e,n,t)=>{"use strict";t.d(n,{BL:()=>R,D6:()=>x,E2:()=>_,Ff:()=>U,Gg:()=>G,H_:()=>P,Ou:()=>b,PY:()=>g,Vr:()=>m,bO:()=>I,cW:()=>D,d_:()=>h,h:()=>S,hF:()=>L,hQ:()=>E,hq:()=>z,n5:()=>F,ob:()=>y,ov:()=>C,q3:()=>B,rD:()=>O,tB:()=>v,wy:()=>k,xB:()=>A});var r=t(72275),i=t(20837),o=t(43952),a=t(66622),l=t(75008),s=t(30758),c=t(51297),u=t(99813),d=t(72653),p=t(48363),f=t(87884),h=function(e){return e.Uninitialized="Uninitialized",e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle",e}({}),m=function(e){return e.Install="Install",e.Uninstall="Uninstall",e}({});function g(){return(0,a._)((0,s.useState)(function(){return(0,u.y$)()}),1)[0]}var v=(0,s.createContext)(null);function w(){var e=(0,s.useContext)(v);if(!e)throw Error("Expected store in context");return e}var y=function(e){return(0,d.Xr)(e,{store:w()})};function b(e){return(0,p.yF)((0,s.useCallback)(function(n){return n(e)},[e]),{store:w()})}function S(e){return(0,d.md)(e,{store:w()})}var Y=(0,u.eU)({});function A(e){var n,t=S(Y);return e&&null!==(n=t[e])&&void 0!==n?n:[]}function C(){var e=y(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(!r||0===r.length){e[n]=t;return}var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value;r.find(function(n){return n.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}})})}}function x(){var e=y(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value,n=r.findIndex(function(n){return n.name===e.name});-1!==n&&r.splice(n,1)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})})}}var _=(0,u.eU)({});function k(){var e=b(_);return function(n){var t;return null!==(t=e()[n])&&void 0!==t?t:null}}function D(){var e=y(_);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t))})}}var E=(0,u.eU)(null);function R(){return S(E)}var I=(0,u.eU)([]);function F(){return S(I)}var T=(0,u.eU)({});function P(e){var n,t=S(T);return e&&null!==(n=t[e])&&void 0!==n?n:[]}function L(){var e=b(T);return function(n){var t;return null!==(t=e()[n])&&void 0!==t?t:[]}}function U(){var e=y(T);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t.map(function(e){return"nix"===n?(0,o._)((0,i._)({},e),{name:(0,f.y)(e.name)}):e})))})}}var N=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Install"===e.kind});n?n.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function O(){return y(N)}var M=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Uninstall"===e.kind});n?n.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function B(){return y(M)}var H=(0,u.eU)(null,function(e,n,t){var r=(0,l._)(e(I)),i=r[0],o=r.slice(1);t===i&&(n(I,o),n(E,t))});function z(){return y(H)}var W=(0,u.eU)(null,function(e,n,t){n(I,function(e){return(0,c.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=l.pkgs.findIndex(function(e){return e.name===t});-1!==s&&l.pkgs.splice(s,1)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})});function G(){return y(W)}},85325:(e,n,t)=>{"use strict";t.d(n,{Ai:()=>p,Ot:()=>h,PY:()=>s,UK:()=>f,ob:()=>d,uB:()=>c});var r=t(66622),i=t(30758),o=t(99813),a=t(72653),l=t(48363);function s(){return(0,r._)((0,i.useState)(function(){return(0,o.y$)()}),1)[0]}var c=(0,i.createContext)(null);function u(){var e=(0,i.useContext)(c);if(!e)throw Error("Expected store in context");return e}var d=function(e){return(0,a.Xr)(e,{store:u()})},p=(0,o.eU)(null);function f(){return(0,a.md)(p,{store:u()})}function h(){return(0,l.yF)((0,i.useCallback)(function(e){return e(p)},[p]),{store:u()})}},81149:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(27189),i=t(94086),o=t(82226),a=t.n(o),l=t(88859);function s(e){var n,t=e.repl,o=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r._)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.mU)(),null==t?void 0:null===(n=t.project)||void 0===n?void 0:n.title,t.title);return(0,i.Y)(a(),{children:(0,i.Y)("title",{children:o},"title")})}},87590:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(72275),i=t(94086),o=t(19346),a=t(10168),l=t(1478),s=t(32842),c=t(40889),u=t(8367),d=t(64804),p=t(14753),f=(0,l.v)(["maxWidth"]),h=f.cssVars,m=f.styleTokens,g=(0,a.x)({container:[s.wp.width("100%"),s.wp.minHeight("100%"),s.wp.center],centeredContent:[s.wp.width("100%"),s.wp.maxWidth(m.maxWidth),s.wp.colWithGap(16),s.wp.p(16),s.wp.center],imageWithHeader:[s.wp.center,s.wp.flex.shrink(1),s.wp.textAlign.center],bodyText:[s.wp.textAlign.center]});function v(e){var n=e.pane,t=e.asciiArt,a=e.headerText,l=e.bodyText,s=e.body,f=e.action,m=e.icon,v=e.loading,w=e.maxWidth,y=e.innerRef,b=(0,o.Vv)(),S=b.getDescription(n),Y=(0,i.Y)(b.Icon,{pane:n,size:48}),A=null!=s?s:S;void 0!==v&&v?A=(0,i.Y)(u.S,{children:(0,i.FD)(c.EY,{css:g.bodyText,children:["Loading ",(0,i.Y)(p.A,{size:16})]})}):void 0!==l&&(A=(0,i.Y)(u.S,{children:(0,i.Y)(c.EY,{css:g.bodyText,multiline:!0,children:l})}));var C=Y;return void 0!==m?C=m:void 0!==t&&(C=(0,i.Y)(d.A,{art:t})),(0,i.Y)(u.S,{css:g.container,style:(0,r._)({},h.maxWidth,"".concat(void 0===w?600:w,"px")),innerRef:y,children:(0,i.FD)(u.S,{css:g.centeredContent,children:[(0,i.FD)(u.S,{css:g.imageWithHeader,gap:16,children:[C,(0,i.Y)(c.Y9,{level:1,variant:"subheadDefault",multiline:!0,children:null!=a?a:S})]}),A,f]})})}},37673:(e,n,t)=>{"use strict";t.d(n,{g:()=>w,k:()=>v});var r=t(20837),i=t(43952),o=t(16530),a=t(27189),l=t(94086),s=t(24955),c=t(10168),u=t(2298),d=t(32842),p=t(2420),f=t(8367),h=t(42022),m=[d.wp.reset.button,d.wp.p(2),d.wp.height(22),d.wp.rowWithGap(4),d.wp.align.center,u.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],g=(0,c.x)({button:m,disabledButton:(0,a._)(m).concat([{color:s.LU.foregroundDimmest,cursor:"default"}]),text:[{fontSize:s.LU.fontSizeSmall}],switchWrapper:[d.wp.height(22),d.wp.pr(4),u.b.nofill,{opacity:.8,userSelect:"none","& > label":{gap:0,cursor:"pointer"},"& > label > svg":{scale:"0.6"}}]});function v(e){var n=e.altText,t=e.buttonText,a=e.icon,s=(0,o._)(e,["altText","buttonText","icon"]);return(0,l.FD)(f.S,(0,i._)((0,r._)({},s),{alt:n,tag:"button",css:s.disabled?g.disabledButton:g.button,children:[(0,l.Y)(h.Vx.Provider,{value:{size:12},children:a}),(0,l.Y)(f.S,{css:g.text,children:t})]}))}function w(e){var n=e.text,t=e.isSelected,r=e.onChange;return(0,l.Y)(f.S,{css:g.switchWrapper,row:!0,align:"center",children:(0,l.Y)(p.d,{colorway:"primary","aria-label":n,isSelected:t,onChange:r,children:(0,l.Y)(f.S,{css:g.text,children:n})})})}},35584:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(94086),i=t(30758),o=t(51439),a=t(48358),l=t(10168),s=t(32842),c=t(76985),u=t(8367),d=(0,l.x)({container:[s.wp.position.relative,s.wp.height(450)]});function p(e){var n=e.embedUrl,t=e.title,i=e.isOpen,o=e.onClose;return(0,r.Y)(c.a,{isOpen:null!=i&&i,onRequestClose:o,maxWidth:800,fitContent:!0,noPadding:!0,centered:!0,children:(0,r.Y)(u.S,{css:d.container,children:(0,r.Y)(a.L9,{embedUrl:n,title:t,borderRadius:[4,4,4,4]})})})}function f(e){var n=e.paneType,t=e.isOpen,a=e.onClose,l=(0,i.useMemo)(function(){return"ghostwriterChat"===n?{embedUrl:o.Wd,title:"Meet ".concat(o.BP)}:"agentChat"===n?{embedUrl:o.pF,title:"What is ".concat(o.g$,"?")}:{embedUrl:null,title:null}},[n]),s=l.embedUrl,c=l.title;return s?(0,r.Y)(p,{isOpen:t,embedUrl:s,title:c,onClose:a}):null}},15785:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(94086),i=t(10168),o=t(32842),a=t(8367),l=t(14753),s=(0,i.x)({root:[o.wp.coverContainer,o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.root,children:(0,r.Y)(l.A,{size:32})})}},61780:(e,n,t)=>{"use strict";t.d(n,{P:()=>f});var r=t(94086),i=t(24955),o=t(10168),a=t(2298),l=t(32842),s=t(40172),c=t(98541),u=t(31955),d=t(8367),p=(0,o.x)({root:[{borderBottom:"1px solid ".concat(i.LU.outlineDimmest)}],inner:[l.wp.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[l.wp.overflowX("auto"),l.wp.pl(8)],tab:[a.b.nofill,l.wp.borderRadius(0),l.wp.px(12),l.wp.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:i.LU.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[l.wp.position.absolute,l.wp.borderRadius(16),l.wp.width(8),l.wp.height(8),l.wp.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),f=function(e){var n=e.tabs,t=e.value,o=e.onClick;return(0,r.Y)(u.ui,{css:p.root,children:(0,r.Y)(d.S,{css:p.inner,children:(0,r.Y)(d.S,{css:p.tabs,row:!0,align:"center",children:n.map(function(e){return(0,r.FD)(d.S,{css:l.wp.position.relative,children:[(0,r.Y)(s.$n,{style:{borderBottom:"1px solid "+(t===e.value?i.LU.foregroundDefault:"transparent")},css:p.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,r.Y)(c.a,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return o(e)}}),e.showDot?(0,r.Y)(d.S,{css:p.dot}):null]},e.value)})})})})}},34926:(e,n,t)=>{"use strict";t.d(n,{yN:()=>T});var r=t(66622),i=t(94086),o=t(30758),a=t(54867),l=t(34805),s=t(85311),c=t(23033),u=t(29454),d=t(10168),p=t(32842),f=t(40172),h=t(95235),m=t(40889),g=t(8367),v=t(70953),w=t(74894),y=t(20837),b=t(43952),S=t(42022);function Y(e){return(0,i.Y)(S.Ay,(0,b._)((0,y._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M12 1.25a10.7 10.7 0 0 1 5.843 1.725l-1.089 1.089a9.19 9.19 0 0 0-3.05-1.157 16.05 16.05 0 0 1 1.556 2.651l-1.137 1.137A14.546 14.546 0 0 0 12 3.15a14.55 14.55 0 0 0-3.214 8.101h.782l-2.221 2.221c-.027-.24-.049-.48-.065-.721H2.78a9.194 9.194 0 0 0 1.284 4.004l-1.089 1.089A10.7 10.7 0 0 1 1.25 12C1.25 6.063 6.063 1.25 12 1.25Zm7.936 5.996 1.089-1.089A10.7 10.7 0 0 1 22.75 12c0 5.937-4.813 10.75-10.75 10.75a10.7 10.7 0 0 1-5.843-1.725l1.089-1.089a9.191 9.191 0 0 0 3.05 1.157 16.05 16.05 0 0 1-1.556-2.651l1.137-1.137A14.548 14.548 0 0 0 12 20.85a14.55 14.55 0 0 0 3.214-8.101h-.782l2.221-2.221c.027.24.049.48.065.721h4.502a9.193 9.193 0 0 0-1.284-4.004ZM2.78 11.25h4.502a16.05 16.05 0 0 1 3.014-8.343A9.255 9.255 0 0 0 2.78 11.25Zm10.924 9.843a16.051 16.051 0 0 0 3.014-8.343h4.502a9.255 9.255 0 0 1-7.516 8.343ZM22.53 2.53a.75.75 0 0 0-1.06-1.06l-20 20a.75.75 0 1 0 1.06 1.06l20-20Z",clipRule:"evenodd"})}))}var A=t(46086),C=(0,d.x)({wrapper:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.backgroundHigher],wrapperWarning:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.orangeDimmest],body:[p.wp.flex.growAndShrink(1)],firstLine:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden")],secondLine:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.foregroundDimmest],secondLineWarning:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.orangeStrongest],buttons:[p.wp.pr(6)],verticalDivider:[p.wp.ml(6),p.wp.mr(6),p.wp.height("1em"),p.wp.width(1),p.wp.backgroundColor.foregroundDefault]});function x(e){var n=e.openNetworkingTool,t=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,l=e.secondLine,s=e.renderSecondLine,c=e.renderDontExposeButton,u=e.renderDoExposeButton,d=e.isWarning,p=void 0!==d&&d;return(0,i.FD)(g.S,{css:p?C.wrapperWarning:C.wrapper,children:[(0,i.FD)(g.S,{css:C.body,children:[(0,i.Y)(g.S,{css:C.firstLine,children:a}),s?(0,i.Y)(g.S,{css:p?C.secondLineWarning:C.secondLine,children:l}):null]}),(0,i.FD)(g.S,{css:C.buttons,row:!0,children:[(0,i.Y)(h.K0,{alt:"Networking tool",onClick:n,children:(0,i.Y)(A.A,{})}),void 0!==c&&c?(0,i.Y)(h.K0,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.Y)(Y,{})}):null,void 0!==u&&u?(0,i.Y)(h.K0,{alt:"Expose this port to the web",onClick:o,children:(0,i.Y)(w.A,{})}):null,(0,i.Y)(h.K0,{alt:"Close",onClick:t,children:(0,i.Y)(v.A,{})})]})]})}function _(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.renderSecondLine,c=(0,s.r$)(n.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(n.externalPort);return(0,i.Y)(x,{openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:["Port :",n.localPort," opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:c,onClick:t})]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:l,renderDontExposeButton:!0,onDontExposePort:a})}function k(e){var n=e.configuration,t=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,a=e.onDoExposePort;return(0,i.Y)(x,{openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but not exposed to the web."),secondLine:(0,i.Y)(f.$n,{variant:"underlined",text:"Expose this port?",onClick:t}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:a})}function D(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"Remove an external port in"}),(0,i.Y)(f.$n,{variant:"underlined",text:"port configuration",onClick:n}),(0,i.Y)(m.EY,{children:"to open a new port."})]}),renderSecondLine:o})}function E(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but is not configured properly."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function R(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but has missing configuration."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function I(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.onDoExposePort,u=e.renderSecondLine,d=n.type;switch(d){case c.gH.FORWARDED:return(0,i.Y)(_,{configuration:n,openWebview:t,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDontExposePort:l});case c.gH.INTERNAL_ONLY:return(0,i.Y)(k,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDoExposePort:s});case c.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.Y)(D,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.MISCONFIGURED:return(0,i.Y)(E,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.CONFIG_MISSING:return(0,i.Y)(R,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});default:(0,a.A)(d)}}function F(e){var n=e.configurations,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.renderSecondLine,s=n.filter(function(e){return e.type===c.gH.FORWARDED}),u=n.filter(function(e){return e.type!==c.gH.FORWARDED});return(0,i.Y)(x,{isWarning:!1,openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[s.length>0?(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:[s.length," ",(0,l.A)("port",s.length)," ","opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:"{...}.replit.dev",onClick:t})]}):null,s.length>0&&u.length>0?(0,i.Y)(g.S,{css:C.verticalDivider}):null,u.length>0?(0,i.FD)(m.EY,{children:[u.length," ",(0,l.A)("port",u.length)," ","did not open"]}):null]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:a})}function T(e){var n=e.configurations,t=e.openWebview,a=e.openNetworkingTool,l=e.onClose,s=e.onDontExposePort,c=e.onDoExposePort,d=(0,u.Z)("port-nudges"),p=(0,r._)((0,o.useState)(!1),2),f=p[0],h=p[1],m=!d.isDone,g=(0,r._)((0,o.useState)(!0),2),v=g[0],w=g[1];function y(){w(!1),null==l||l()}return((0,o.useEffect)(function(){0===n.length&&w(!0)},[n]),(0,o.useEffect)(function(){if(!d.isDone){if(n.length>0&&!f){h(!0);return}0===n.length&&f&&d.setAsDone()}},[n,d,f]),v&&0!==n.length)?1===n.length?(0,i.Y)(I,{configuration:n[0],openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:y,onDontExposePort:s,onDoExposePort:c}):(0,i.Y)(F,{configurations:n,openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:y}):null}},99083:(e,n,t)=>{"use strict";t.d(n,{j:()=>w,n:()=>v});var r=t(72275),i=t(94086),o=t(62562),a=t(10168),l=t(32842),s=t(40172),c=t(27233),u=t(98541),d=t(38520),p=t(2420),f=t(40889),h=t(8367),m=(0,a.x)({select:l.wp.minWidth(200),wrapper:[l.wp.rowWithGap(8),l.wp.align.center,(0,r._)({},o.c,[l.wp.flex.rowReverse])],rightComponentWrapper:(0,r._)({},o.c,[l.wp.ml(8)]),titleHeading:[l.wp.center,l.wp.justify.start],staffOnlyPill:[l.wp.height(18)]});function g(e){var n=e.children,t=e.settingName,r=e.settingDescription,a=e.settingId,l=e.title,s=e.rightComponent,c=e.isStaffOnly,d=l;return l||(d=r?(0,i.FD)(i.FK,{children:[(0,i.FD)(h.S,{css:m.titleHeading,row:!0,gap:8,children:[(0,i.Y)(f.EY,{multiline:!1,children:t}),c?(0,i.Y)(u.a,{css:m.staffOnlyPill,text:"Staff-only",colorway:"warning"}):null]}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:r})]}):(0,i.Y)(f.EY,{multiline:!1,children:t})),(0,i.Y)(o.w,{id:a,title:d,children:(0,i.FD)(h.S,{css:m.wrapper,children:[s?(0,i.Y)(h.S,{css:m.rightComponentWrapper,children:s}):null,n]})})}function v(e){var n=e.setting,t=e.currentValue,o=e.update,a=e.rightComponent,l=e.filterOptions,s=e.title;if("select"===n.type){var u,f=l?n.options.filter(l):n.options;return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(d.l,{"aria-label":n.name,style:{marginRight:0},items:f,defaultSelectedKey:null===(u=f.find(function(e){return t===e.editorPreferencesValue}))||void 0===u?void 0:u.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,null===(t=f.find(function(n){return n.id===e}))||void 0===t?void 0:t.editorPreferencesValue))},css:m.select,dataCy:n.id,children:function(e){return(0,i.Y)(c.nh,{id:e.id,label:e.title,dataCy:e.id,fixedHeight:32},e.id)}})})}if("boolean"===n.type)return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(p.d,{"aria-label":n.name,isSelected:t,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})});throw Error("Unsupported setting type")}function w(e){var n,t=e.setting,r=e.currentValueOption,a=e.disabledReason,l=(0,i.FD)(i.FK,{children:[(0,i.Y)(f.EY,{multiline:!1,children:t.name}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:a})]});return(0,i.Y)(o.w,{id:t.id,title:l,children:(0,i.Y)(h.S,{css:m.wrapper,children:r?(0,i.Y)(s.$n,{text:null!==(n=null==r?void 0:r.title)&&void 0!==n?n:"Disabled",disabled:!0}):null})})}},10121:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>v,fq:()=>y,pi:()=>m});var r=t(66622),i=t(94086),o=t(30758),a=t(69932),l=t(62580),s=t(99083),c=t(62562),u=t(10168),d=t(32842),p=t(25877),f=t(28354),h=t(40889),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],g=(0,u.x)({sizeInput:[d.wp.py(6),d.wp.flex.growAndShrink(0),{border:"none"}]});function v(){var e=(0,l.gc)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),n=e.preferences,t=e.update;return(0,i.FD)(i.FK,{children:[(0,i.Y)(s.n,{setting:a.KY.indentationDetection,currentValue:n.indentDetection,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentFormatPastes,currentValue:n.indentFormatPastes,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentIsSpaces,currentValue:n.indentIsSpaces,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(c.w,{id:"indentSize",title:(0,i.FD)(i.FK,{children:[(0,i.Y)(h.EY,{multiline:!1,children:"Indentation Size"}),(0,i.Y)(h.EY,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.Y)(y,{css:g.sizeInput,size:n.indentSize,onChange:function(e){t({indentSize:e})}})})]})}function w(e){return null==e?2:("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function y(e){var n=e.size,t=e.onChange,a=e.className,l=(0,r._)((0,o.useState)(null),2),s=l[0],c=l[1],u=null!==s?s:n.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.Y)(f.pd,{type:"number",style:{width:d},className:a,min:1,max:16,value:u,onBlur:function(){return c(null)},onChange:function(e){var n=e.target.value.trim(),r=e.target.valueAsNumber;if(""===n||isNaN(r)){c(n);return}e.target.validity.valid?(c(null),t(w(r))):(c(n),""===n||isNaN(parseInt(n,10))||t(w(n)))}})}},62562:(e,n,t)=>{"use strict";t.d(n,{c:()=>d,w:()=>f});var r=t(72275),i=t(94086),o=t(30758),a=t(10168),l=t(32842),s=t(84911),c=t(40889),u=t(8367),d="@container (max-width: 480px)",p=(0,a.x)({wrapper:[(0,r._)({},d,[l.wp.colWithGap(8),l.wp.align.start])],inner:[l.wp.flex.growAndShrink(1)]});function f(e){var n=e.id,t=e.title,r=e.children,a=(0,s.c)()(n);return(0,i.FD)(u.S,{css:p.wrapper,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,i.Y)(u.S,{css:p.inner,tag:"label",htmlFor:a,children:"string"==typeof t?(0,i.Y)(c.EY,{multiline:!1,children:t}):t}),(0,o.cloneElement)(r,{id:a})]})}},23094:(e,n,t)=>{"use strict";t.d(n,{_:()=>s});var r=t(94086),i=t(52757),o=t(32842),a=t(98541),l=(0,i.AH)([o.wp.height(18)]);function s(){return(0,r.Y)(a.a,{css:l,text:"Staff-only",colorway:"warning"})}},30598:(e,n,t)=>{"use strict";t.d(n,{A:()=>nx});var r=t(94086),i=t(99655),o=t(20837),a=t(43952),l=t(60049),s=t(69932),c=t(62580),u=t(63679),d=t(26928),p=t(82436),f=t(54191),h=t(66622),m=t(27189),g=t(30758),v=t(45009),w=t(30632),y=t(72813);function b(){var e=(0,v._)(["\n  query AiDeveloperSection {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return b=function(){return e},e}var S={},Y=(0,w.J1)(b()),A=t(51439),C=t(78452),x=t(62562),_=t(23094),k=t(32842),D=t(95235),E=t(28354),R=t(40889),I=t(8367),F=t(54858),T=t(16021),P=t(50514),L=(0,A.qK)(),U=A.Ku?[{title:"override",value:A.Ku}]:Array.from((0,m._)(Object.entries(C.B)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),N=(0,A.lJ)()||A.Ku?U[0]:U[1];function O(){var e,n,t,i=(e=(0,o._)({},S,void 0),y.I(Y,e)).data,a=(null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:n.isStaff)||!1,l=(0,h._)((0,g.useState)(!Object.values(U).map(function(e){return e.value}).includes(L)),2),s=l[0],c=l[1],u=(0,h._)((0,g.useState)(""),2),d=u[0],p=u[1];return a?(0,r.Y)(x.w,{id:"chatServiceEndpoint",title:(0,r.FD)(r.FK,{children:[(0,r.FD)(I.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,r.Y)(R.EY,{multiline:!1,children:"AI Chat Service Endpoint"}),(0,r.Y)(_._,{})]}),(0,r.FD)(I.S,{gap:8,children:[(0,r.FD)(R.EY,{variant:"small",color:"dimmest",children:["Current endpoint: ",L]}),(0,r.Y)(R.EY,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,r.FD)(I.S,{gap:12,children:[(0,r.Y)(F.l,{css:[k.wp.minWidth(184)],initialSelectedItem:null!==(t=U.find(function(e){return e.value===L}))&&void 0!==t?t:L?U[U.length-1]:N,onChange:function(e){(null==e?void 0:e.title)!=="custom"?((0,A.WQ)(e.value),c(!1),window.location.reload()):c(!0)},items:U}),s?(0,r.FD)(I.S,{row:!0,gap:4,children:[(0,r.Y)(E.pd,{value:d,onChange:function(e){p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,A.WQ)(d)}}),(0,r.Y)(D.K0,{alt:"Update custom url",onClick:function(){(0,A.WQ)(d),window.location.reload()},children:L!==d?(0,r.Y)(P.A,{}):(0,r.Y)(T.A,{})})]}):null]})}):null}var M=t(2420);function B(e){var n=e.preferences,t=e.update;return(0,r.Y)(x.w,{id:"codeActionsOnSave",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{multiline:!1,children:"Code Actions on Save"}),(0,r.Y)(R.EY,{variant:"small",color:"dimmest",children:"Run 'Fix all' Code Actions for the current editor on save."})]}),children:(0,r.Y)(M.d,{"aria-label":"Code Actions on Save",isSelected:n.codeActionsOnSave,onChange:function(e){t({codeActionsOnSave:e})}})})}var H=t(55937);function z(){var e=(0,v._)(["\n  query CodeSuggestionPreferences($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}var W={},G=(0,w.J1)(z()),V=t(24830),j=t(97407),Z=t(40500),q=t(40172);function K(e){var n=e.context,t=e.text,i=(0,h._)((0,g.useState)(!1),2),o=i[0],a=i[1];return(0,r.FD)(r.FK,{children:[(0,r.Y)(q.$n,{text:void 0===t?"Activate":t,colorway:"primary",onClick:function(){return a(!0)}}),(0,r.Y)(Z.A,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",analyticsContext:{upgrade:{context:n}}})]})}var $=t(31909),J=t(83733),Q=t(99083),X=t(25877);function ee(){var e,n,t,a,d=(0,u._P)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),f=(e={variables:{replId:(0,J.A)()}},n=(0,o._)({},W,e),y.I(G,n)).data,m=(null==f?void 0:null===(t=f.currentUser)||void 0===t?void 0:t.userSubscriptionType)===H.Oh.HackerPro,g=(null==f?void 0:f.getRepl.__typename)==="Repl"&&null!==(a=f.getRepl.org)&&void 0!==a&&!!a.id,v=(0,i.Po)((0,l.useRouter)()),w=(0,$.f)().isTeamWithAiDisabled,b=(0,c.gc)("codeSuggestion","completeCodeEngine"),S=b.preferences,Y=b.update,A=(0,V.A)().engine,C=function(e){var n=Y(e),t=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,h._)(o.value,2),s=l[0],c=l[1];(0,p.u4)(p.AZ.SETTINGS_TOGGLED,{settingChanged:s,updatedValue:c})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n};return w?null:(0,r.FD)(I.S,{gap:12,children:[(0,r.Y)(Q.n,{currentValue:S.codeSuggestion,update:C,setting:s.KY.codeSuggestion,title:(0,r.FD)(r.FK,{children:[(0,r.Y)(I.S,{row:!0,gap:8,align:"center",children:(0,r.Y)(R.EY,{multiline:!1,children:"AI Code Completion"})}),(0,r.FD)(R.EY,{variant:"small",color:"dimmest",children:["Code completion provides inline ghost text suggestions while you code.",(0,r.Y)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),g||m||v?null:(0,r.FD)(I.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,r.Y)(R.EY,{children:"Upgrade for full access to Replit AI"}),(0,r.Y)(K,{text:"Upgrade to Replit ".concat(j.en),context:"workspace_settings_pane"})]}),d?(0,r.FD)(r.FK,{children:[(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{title:(0,r.FD)(r.FK,{children:[(0,r.FD)(I.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,r.Y)(R.EY,{multiline:!1,children:"AI Code Completion Engine"}),(0,r.Y)(_._,{})]}),(0,r.FD)(R.EY,{variant:"small",color:"dimmest",children:["Current applied engine: ",A]})]}),currentValue:S.completeCodeEngine,update:C,setting:s.KY.completeCodeEngine})]}):null]})}function en(e){var n=e.preferences,t=e.update;return(0,r.Y)(x.w,{id:"formatOnSave",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{multiline:!1,children:"Format on Save"}),(0,r.Y)(R.EY,{variant:"small",color:"dimmest",children:"Controls whether files are automatically formatted when saved"})]}),children:(0,r.Y)(M.d,{"aria-label":"Format on Save",isSelected:n.formatOnSave,onChange:function(e){t({formatOnSave:e})}})})}var et=t(10121),er=t(24955),ei=t(10168),eo=t(31955),ea=t(1936),el=t(43249);function es(e){return e.slice().sort(function(e,n){return e-n})}var ec=(0,ei.x)({ruler:[k.wp.py(4),k.wp.px(8),k.wp.rowWithGap(4),k.wp.align.center,k.wp.borderRadius(8)],remove:[k.wp.borderRadius(4)],title:[k.wp.pr(8),k.wp.overflow("visible"),k.wp.flex.shrink(0)],body:[k.wp.flex.wrapReverse,k.wp.align.start,k.wp.justify.end,k.wp.flex.growAndShrink(1),{gap:er.LU.space4}],list:[k.wp.flex.wrap,k.wp.flex.growAndShrink(1),k.wp.align.end,k.wp.justify.end,{gap:er.LU.space4}]});function eu(e){var n=e.pos,t=e.onRemove;return(0,r.FD)(eo.ui,{css:ec.ruler,elevated:!0,children:[(0,r.Y)(R.EY,{multiline:!1,children:n}),(0,r.Y)(D.K0,{css:ec.remove,alt:"Remove ruler",onClick:t,children:(0,r.Y)(ea.A,{})})]})}function ed(){var e=(0,h._)((0,g.useState)(!1),2),n=e[0],t=e[1],i=(0,h._)((0,g.useState)(80),2),o=i[0],a=i[1],l=(0,g.useRef)(null),s=(0,g.useRef)(null),u=-1===o,d=o>=0&&o<=1e3,p=(0,c.gc)("rulers"),f=p.preferences,v=p.update,w=es(f.rulers);return(0,r.Y)(x.w,{id:"rulers",title:(0,r.Y)(R.EY,{css:ec.title,multiline:!1,children:"Rulers"}),children:(0,r.FD)(I.S,{css:ec.body,row:!0,children:[(0,r.Y)(I.S,{css:ec.list,row:!0,children:w.map(function(e,n){return(0,r.Y)(eu,{pos:e,onRemove:function(){v({rulers:w.filter(function(e,t){return t!==n})})}},n)})}),n?(0,r.FD)(I.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(E.pd,{ref:l,type:"number",style:{width:u?"6ch":o.toString().length+5.5+"ch"},value:o>=0?o.toString():"",onChange:function(e){if(""===e.target.value)a(-1);else{var n=parseInt(e.target.value,10);isNaN(n)||a(n)}},onKeyDown:function(e){"Escape"===e.key?(a(80),t(!1)):"Enter"===e.key&&d&&(v({rulers:es((0,m._)(w).concat([o]))}),t(!1),a(80))},onBlur:function(e){e.relatedTarget!==s.current&&(t(!1),a(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.Y)(q.$n,{ref:s,text:"Accept",colorway:"primary",iconLeft:(0,r.Y)(T.A,{}),disabled:!d,onClick:function(){d&&(v({rulers:es((0,m._)(w).concat([o]))}),t(!1),a(80))},onBlur:function(e){e.relatedTarget!==l.current&&(t(!1),a(80))}})]}):(0,r.Y)(r.FK,{children:w.length>=10?null:(0,r.Y)(q.$n,{text:"Add Ruler",iconLeft:(0,r.Y)(el.A,{}),onClick:function(){return t(!0)}})})]})})}var ep=t(72275),ef=(0,ei.x)({container:[(0,ep._)({},x.c,[k.wp.colWithGap(8)])],title:[k.wp.flex.growAndShrink(1)],switchWrapper:[k.wp.rowWithGap(8),k.wp.align.center,k.wp.justify.end,(0,ep._)({},x.c,[k.wp.flex.rowReverse])],switchLabel:[(0,ep._)({},x.c,[k.wp.ml(8)])]});function eh(){var e=(0,c.gc)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),n=e.preferences,t=e.update;return(0,r.FD)(I.S,{css:ef.container,row:!0,justify:"space-between",align:"start",children:[(0,r.FD)(I.S,{css:ef.title,children:[(0,r.Y)(R.EY,{children:"Show Whitespace"}),(0,r.Y)(R.EY,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.FD)(I.S,{gap:12,children:[(0,r.FD)(I.S,{css:ef.switchWrapper,tag:"label",children:[(0,r.Y)(R.EY,{variant:"small",css:ef.switchLabel,children:"Leading"}),(0,r.Y)(M.d,{"aria-label":"Show leading whitespace",isSelected:n.showLeadingWhitespace,onChange:function(e){t({showLeadingWhitespace:e})}})]}),(0,r.FD)(I.S,{css:ef.switchWrapper,tag:"label",children:[(0,r.Y)(R.EY,{variant:"small",css:ef.switchLabel,children:"Enclosed"}),(0,r.Y)(M.d,{"aria-label":"Show enclosed whitespace",isSelected:n.showEnclosedWhitespace,onChange:function(e){t({showEnclosedWhitespace:e})}})]}),(0,r.FD)(I.S,{css:ef.switchWrapper,tag:"label",children:[(0,r.Y)(R.EY,{variant:"small",css:ef.switchLabel,children:"Trailing"}),(0,r.Y)(M.d,{"aria-label":"Show trailing whitespace",isSelected:n.showTrailingWhitespace,onChange:function(e){t({showTrailingWhitespace:e})}})]}),(0,r.FD)(I.S,{css:ef.switchWrapper,tag:"label",children:[(0,r.Y)(R.EY,{variant:"small",css:ef.switchLabel,children:"Selected"}),(0,r.Y)(M.d,{"aria-label":"Show selected whitespace",isSelected:n.showSelectedWhitespace,onChange:function(e){t({showSelectedWhitespace:e})}})]})]})]})}var em=t(56677),eg=t(16530),ev=t(43751);function ew(){var e=(0,v._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return ew=function(){return e},e}function ey(){var e=(0,v._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return ey=function(){return e},e}function eb(){var e=(0,v._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eb=function(){return e},e}var eS={},eY=(0,w.J1)(ew()),eA=(0,w.J1)(ey(),eY),eC=(0,w.J1)(eb(),eY),ex=t(39651),e_=t(98427),ek=t(77325),eD=t(40114),eE=t(40577),eR=t(27343),eI=function(e){var n=(0,h._)((0,g.useState)(0),2),t=n[0],r=n[1];return(0,eR.A)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),t},eF=t(26190),eT=t(74328),eP=t(25204),eL=t.n(eP),eU=t(12628),eN=t(2298),eO=t(976),eM=(0,ei.x)({self:[{border:"1px solid",borderColor:er.LU.outlineDimmest},k.wp.zIndex(5),k.wp.maxHeight(300),k.wp.position.absolute,k.wp.overflowY("auto"),k.wp.width("100%"),k.wp.left(0),k.wp.borderRadius(8),k.wp.flex.column],apron:[k.wp.flex.grow(1),{borderTop:"1px solid",borderTopColor:er.LU.outlineDimmest}],menuItems:[k.wp.flex.growAndShrink(1),k.wp.overflowY("auto"),{listStyle:"none"}],menuApronItem:[k.wp.p(8),k.wp.rowWithGap(12),k.wp.justify.start,k.wp.align.center,eN.b.listItem],menuApronWrapper:[k.wp.flex.column]}),eB=(0,eU.xQ)();let eH=function(e){var n=e.children,t=e.className,i=e.bottomOffset;return(0,r.FD)(eo.ui,{className:t,tag:"ul",elevated:!0,css:eM.self,style:{bottom:"calc(".concat(i,"px + ").concat(er.LU.space8,")")},children:[(0,r.Y)(I.S,{css:eM.menuItems,children:n}),(0,r.Y)(eo.ui,{css:eM.apron,children:(0,r.FD)(I.S,{css:eM.menuApronWrapper,children:[(0,r.Y)(eL(),{legacyBehavior:!0,href:eB.href,as:eB.as,children:(0,r.FD)(I.D.a,{css:eM.menuApronItem,children:[(0,r.Y)(eO.A,{}),(0,r.Y)(R.EY,{multiline:!1,children:"Explore Themes"})]})}),(0,r.Y)(eL(),{legacyBehavior:!0,href:eU.y_.href,as:eU.y_.as,children:(0,r.FD)(I.S,{css:eM.menuApronItem,children:[(0,r.Y)(el.A,{}),(0,r.Y)(R.EY,{multiline:!1,children:"Create a Theme"})]})})]})})]})};var ez=t(29032),eW=t(14753),eG=(0,ei.x)({trigger:[eN.b.filled,k.wp.p(8),k.wp.color.foregroundDefault,k.wp.border({width:0})],chevron:[k.wp.transition.snappy],selectLabel:[k.wp.flex.growAndShrink(1),{textAlign:"left",lineHeight:er.LU.lineHeightHeaderBig}],menuWrapper:[k.wp.position.relative],sectionHeadings:[k.wp.p(8),k.wp.fontWeight.bold,k.wp.fontSize(12),{borderTop:"1px solid ".concat(er.LU.outlineDimmer),textTransform:"uppercase"}],officialHeading:[k.wp.p(8),k.wp.fontWeight.bold,k.wp.fontSize(12),{textTransform:"uppercase"}],spinnerWrapper:[k.wp.p(8),k.wp.align.center]}),eV=I.D.li;function ej(e){var n=e.id,t=e.sections,i=e.initialSelectedItem,l=e.selectedItem,s=e.onChange,c=e.placeholder,u=e.dataCy,d=e.paginationOptions,p=(0,eg._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),f=(0,g.useId)(),h=(0,eF.A)(s),m=(0,g.useRef)(null),v=eI(m),w=Object.values(t).flat(),y=(0,eD.WM)((0,a._)((0,o._)({items:w,initialSelectedItem:i,onSelectedItemChange:function(e){var n=e.selectedItem;n&&h.current(n)},stateReducer:function(e,n){var t=n.type,r=n.changes;switch(t){case eD.WM.stateChangeTypes.MenuKeyDownEnter:case eD.WM.stateChangeTypes.MenuKeyDownSpaceButton:case eD.WM.stateChangeTypes.ItemClick:return(0,a._)((0,o._)({},r),{isOpen:!0});default:return r}}},void 0!==l&&{selectedItem:l}),{id:f})),b=(0,eT.A)({onLoadMore:d.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,S=function(e){var n,t=e.item,i=e.index;return(0,r.Y)(eV,(0,a._)((0,o._)({},y.getItemProps({item:t,index:i})),{"data-cy":t.dataCy,children:(0,r.Y)(eE.A,{highlighted:i===y.highlightedIndex,selected:t.id===(null===(n=y.selectedItem)||void 0===n?void 0:n.id),title:t.title})}))};return(0,r.FD)(I.S,{id:n,dataCy:u,children:[(0,r.Y)(ek.s,{children:(0,r.Y)("label",(0,a._)((0,o._)({},y.getLabelProps()),{children:"select a theme"}))}),(0,r.Y)("button",(0,a._)((0,o._)({type:"button",css:eG.trigger},p,y.getToggleButtonProps({ref:m})),{children:(0,r.FD)(I.S,{align:"center",row:!0,gap:8,children:[(0,r.Y)(eO.A,{size:16}),y.selectedItem?(0,r.Y)(R.EY,{css:eG.selectLabel,multiline:!1,children:y.selectedItem.title}):(0,r.Y)(R.EY,{color:"dimmer",css:eG.selectLabel,multiline:!1,children:c}),(0,r.Y)(ez.A,{rotate:y.isOpen?180:0,css:eG.chevron})]})})),(0,r.Y)("div",(0,a._)((0,o._)({},y.getMenuProps()),{css:eG.menuWrapper,children:y.isOpen&&w.length>0?(0,r.FD)(eH,{bottomOffset:v,children:[(0,r.Y)(R.EY,{color:"dimmer",css:eG.officialHeading,multiline:!1,children:"Official Themes"}),t.official.map(function(e,n){return(0,r.Y)(S,{item:e,index:n},"".concat(e.id))}),t.authored.length?(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{color:"dimmer",css:eG.sectionHeadings,multiline:!1,children:"Your Themes"}),t.authored.map(function(e,n){var i=t.official.length;return(0,r.Y)(S,{item:e,index:i+n},"".concat(e.id))})]}):null,t.installed.length?(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{color:"dimmer",css:eG.sectionHeadings,multiline:!1,children:"Community Themes"}),t.installed.map(function(e,n){var i=t.official.length+t.authored.length;return(0,r.Y)(S,{item:e,index:i+n},"".concat(e.id))})]}):null,d.authoredHasNextPage||d.installedHasNextPage?(0,r.Y)(I.S,{align:"center",children:d.loading?(0,r.Y)(I.S,{css:eG.spinnerWrapper,children:(0,r.Y)(eW.A,{size:12})}):(0,r.Y)(D.K0,{tooltipBehavior:"hidden",alt:"Show more",onClick:d.loadMore,ref:b,children:(0,r.Y)(ez.A,{})})}):null]}):null}))]})}var eZ=function(e,n){var t,r,i=n.fetchMoreResult;if((null===(t=e.currentUser)||void 0===t?void 0:t.authoredThemes.__typename)==="CustomThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var l=e.currentUser.authoredThemes.items,s=i.currentUser.authoredThemes.items;return(0,a._)((0,o._)({},i),{currentUser:(0,a._)((0,o._)({},i.currentUser),{authoredThemes:(0,a._)((0,o._)({},i.currentUser.authoredThemes),{items:(0,m._)(l).concat((0,m._)(s))})})})}return i},eq=function(e,n){var t,r,i=n.fetchMoreResult;if((null===(t=e.currentUser)||void 0===t?void 0:t.installedThemes.__typename)==="InstalledThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var l=e.currentUser.installedThemes.items,s=i.currentUser.installedThemes.items;return(0,a._)((0,o._)({},i),{currentUser:(0,a._)((0,o._)({},i.currentUser),{installedThemes:(0,a._)((0,o._)({},i.currentUser.installedThemes),{items:(0,m._)(l).concat((0,m._)(s))})})})}return i},eK=function(e){var n=e.authoredThemesData,t=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,g.useCallback)(function(){var e,o;(null==n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&n.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:n.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:eZ}):(null==t?void 0:null===(o=t.currentUser)||void 0===o?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&t.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:t.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:eq})},[n,t,r,i])},e$=t(27007),eJ=t(82542),eQ=t(3460),eX=t(93532),e0={select:function(e){return[e?eQ.S.backgroundPulse(er.LU.accentPrimaryDefault,er.LU.accentPrimaryDimmest):{}]}};let e1=function(e){var n,t,i,l,s,c,u,d,p,f,m=e.context,v=(0,eg._)(e,["context"]),w=(0,g.useId)(),b=(0,ex.A)().showError,S=(n={variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return b(e.message)},onCompleted:function(e){var n,t=null===(n=e.currentUser)||void 0===n?void 0:n.authoredThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&b(t.message)}},t=(0,o._)({},eS,n),y.I(eA,t)),Y=S.data,A=S.loading,C=S.error,x=S.fetchMore,_=(0,h._)((i={variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return b(e.message)},onCompleted:function(e){var n,t=null===(n=e.currentUser)||void 0===n?void 0:n.installedThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&b(t.message)}},l=(0,o._)({},eS,i),ev._(eC,l)),2),D=_[0],E=_[1],R=E.data,F=E.loading,T=E.error,P=E.fetchMore,L=(0,eJ.D)(),U=L.setActiveTheme,N=L.isSaving,O=L.error,M=L.theme;(0,g.useEffect)(function(){var e,n=null==Y?void 0:null===(e=Y.currentUser)||void 0===e?void 0:e.authoredThemes;(null==n?void 0:n.__typename)!=="CustomThemeConnection"||n.pageInfo.hasNextPage||D()},[Y,D]);var B=((null==R?void 0:null===(c=R.currentUser)||void 0===c?void 0:null===(s=c.installedThemes)||void 0===s?void 0:s.__typename)==="InstalledThemeConnection"?R.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),H=(null==Y?void 0:null===(d=Y.currentUser)||void 0===d?void 0:null===(u=d.authoredThemes)||void 0===u?void 0:u.__typename)==="CustomThemeConnection"?Y.currentUser.authoredThemes.items:[];(0,g.useEffect)(function(){O&&b(O.message)},[O,b]);var z=eK({authoredThemesData:Y,installedThemesData:R,fetchMoreAuthored:x,fetchMoreInstalled:P}),W=(null==Y?void 0:null===(p=Y.currentUser)||void 0===p?void 0:p.authoredThemes.__typename)==="CustomThemeConnection"&&Y.currentUser.authoredThemes.pageInfo.hasNextPage,G=(null==R?void 0:null===(f=R.currentUser)||void 0===f?void 0:f.installedThemes.__typename)==="InstalledThemeConnection"&&R.currentUser.installedThemes.pageInfo.hasNextPage;if(C||T)return(0,r.Y)(I.S,{children:(0,r.Y)(eX.N,{colorway:"negative",text:"Something went wrong loading your themes"})});var V={official:e_.U,authored:H,installed:B};return(0,r.Y)(I.S,{children:(0,r.Y)(ej,(0,o._)({css:[e0.select(N),k.wp.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:er.LU.backgroundHigher}}],id:w,dataCy:"preferences-theme-dropdown",sections:V,disabled:N,paginationOptions:{loadMore:z,authoredHasNextPage:W,installedHasNextPage:G,loading:A||F},selectedItem:M.isOfficial?e_.U.find(function(e){return e.id===M.id}):(0,a._)((0,o._)({},M),{title:M.name}),onChange:function(e){U(e.id),"isCurrentUserThemeAuthor"in e&&(0,e$.Ot)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:m})}},v))})};var e2=(0,ei.x)({container:[k.wp.p(16),k.wp.colWithGap(12)],statusBannerContainer:[k.wp.pt(8),k.wp.maxWidth("calc(100% - 12px)")],themesSwitcher:[k.wp.minWidth(184),k.wp.backgroundColor.backgroundHigher]});function e5(e){var n=e.hideLayoutControl,t=e.className,h=e.resetLayout,m=(0,c.gc)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","agentAudioNotification","agentPushNotification","assistantPushNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching","codeRepairHighlight"),g=m.preferences,v=m.update,w=(0,i.Po)((0,l.useRouter)()),y=(0,i.m5)(),b=(0,em.oR)(),S=(0,f.vm)(),Y=(0,u._P)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),A=(0,u._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),C=(0,u._P)({controlName:"flag-authentic-zealous-robots"}),_=(0,u._P)({controlName:"flag-agent-mobile-push"}),k=(0,u._P)({controlName:"flag-assistant-mobile-push"}),E=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,p.u4)(p.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t})}),v(e)};if(!g)return null;var F=(0,a._)((0,o._)({},s.KY.multiselectModifierKey),{options:s.KY.multiselectModifierKey.options.map(function(e){return(0,a._)((0,o._)({},e),{title:(0,d.t3)("cmdOrCtrlKey"===e.id?d.YX.CMD_OR_CTRL_KEY:d.YX.ALT_KEY,S)})})});return(0,r.FD)(eo.ui,{className:t,background:"default",css:e2.container,children:[n?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(Q.n,{setting:s.KY.layout,update:E,currentValue:g.isLayoutStacked,rightComponent:h?(0,r.Y)(D.K0,{alt:"Reset layout",onClick:function(){h.reset()},children:h.resetting?(0,r.Y)(eW.A,{}):(0,r.Y)(P.A,{})}):null}),(0,r.Y)(X.a,{})]}),(0,r.Y)(Q.n,{setting:s.KY.fontSize,update:E,currentValue:g.fontSize}),(0,r.Y)(X.a,{}),(0,r.Y)(x.w,{id:"acceptSuggestionOnCommitCharacter",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{children:"Accept Suggestion on Commit Character"}),(0,r.FD)(R.EY,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,r.Y)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,r.Y)(M.d,{"aria-label":"Accept suggestion on commit character",isSelected:g.acceptSuggestionOnCommitCharacter,onChange:function(e){E({acceptSuggestionOnCommitCharacter:e})}})}),(0,r.Y)(X.a,{}),(0,r.Y)(x.w,{id:"enableCloseBracketMatching",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{children:"Auto close brackets"}),(0,r.Y)(R.EY,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,r.Y)(M.d,{"aria-label":"Auto close brackets",isSelected:g.enableCloseBracketMatching,onChange:function(e){E({enableCloseBracketMatching:e})}})}),(0,r.Y)(X.a,{}),(0,r.Y)(et.Ay,{}),(0,r.Y)(X.a,{}),Y?(0,r.FD)(r.FK,{children:[(0,r.Y)(B,{preferences:g,update:E}),(0,r.Y)(X.a,{}),(0,r.Y)(en,{preferences:g,update:E}),(0,r.Y)(X.a,{})]}):null,(0,r.Y)(Q.n,{setting:s.KY.wrapping,update:E,currentValue:g.wrapping}),(0,r.Y)(X.a,{}),y?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(Q.n,{setting:s.KY.minimap,update:E,currentValue:g.minimapDisplay}),(0,r.Y)(X.a,{})]}),(0,r.Y)(ed,{}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.keyboardHandler,update:E,currentValue:g.keyboardHandler}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:F,update:E,currentValue:g.multiselectModifierKey}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.showFileTreeGitStatus,update:E,currentValue:g.showFileTreeGitStatus}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.codeRepairHighlight,update:E,currentValue:g.codeRepairHighlight}),(0,r.Y)(X.a,{}),(0,r.Y)(ee,{}),(0,r.Y)(X.a,{}),(0,r.Y)(O,{}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.codeIntelligence,update:E,currentValue:g.codeIntelligence}),(0,r.Y)(X.a,{}),A&&g.codeIntelligence?(0,r.FD)(r.FK,{children:[(0,r.Y)(Q.n,{setting:s.KY.semanticTokens,update:E,currentValue:g.semanticTokens}),(0,r.Y)(X.a,{})]}):null,(0,r.Y)(eh,{}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.accessibleTerminal,update:E,currentValue:g.accessibleTerminal}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.shellBellAudio,update:E,currentValue:g.shellBellAudio}),(0,r.Y)(X.a,{}),(0,r.Y)(x.w,{id:"webviewAutoOpenOnPortOpened",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{children:b?"Automatic Webview (unavailable in this Repl)":"Automatic Webview"}),(0,r.Y)(R.EY,{variant:"small",color:"dimmest",children:"Open a webview automatically when a port is open"}),b?(0,r.Y)(I.S,{css:e2.statusBannerContainer,children:(0,r.Y)(eX.N,{colorway:"orange",text:'This preference is unavailable in Extension Apps. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.Y)(M.d,{"aria-label":"Automatic Webview",isSelected:g.webviewAutoOpenOnPortOpened,isDisabled:b,onChange:function(e){E({webviewAutoOpenOnPortOpened:e})}})}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.forwardPortsAutomatically,update:E,currentValue:g.forwardPortsAutomatically}),w?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(X.a,{}),(0,r.Y)(x.w,{id:"theme",title:"Theme",children:(0,r.Y)(e1,{css:e2.themesSwitcher,context:e$.iu.WorkspacePreferencesPane})})]}),(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.chatAudioNotification,update:E,currentValue:g.chatAudioNotification}),C?(0,r.FD)(r.FK,{children:[(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.agentAudioNotification,update:E,currentValue:g.agentAudioNotification})]}):null,_?(0,r.FD)(r.FK,{children:[(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.agentPushNotification,update:E,currentValue:g.agentPushNotification})]}):null,k?(0,r.FD)(r.FK,{children:[(0,r.Y)(X.a,{}),(0,r.Y)(Q.n,{setting:s.KY.assistantPushNotification,update:E,currentValue:g.assistantPushNotification})]}):null]})}var e4=t(9491),e3=t(18682),e8=t(32904),e7=t(40811),e6=t(68062),e9=t(6083),ne=t(75820),nn=t(52757),nt=t(53535),nr=t(47177),ni=t(10001),no=t(40182),na=t(8351),nl=t(68753);function ns(e){var n=(0,g.useRef)(null),t=(0,g.useRef)([]);function r(){n.current&&clearTimeout(n.current),t.current=[]}function i(n){e({type:"success",shortcut:n.length>1?[n[0],n[1]]:n[0]}),r()}return{onKeyDown:function(r){var o=n.current,a=t.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,e6.yz)(r);if(l){if((0,e6.RW)(l)){e({type:"update",recorded:a.length?[a[0],l]:[l]});return}if(a.length>0&&"Enter"===l){i(a);return}a.push(l),e({type:"update",recorded:a});var s=2===a.length?0:600;n.current=setTimeout(function(){return i(a)},s)}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var nc=(0,ei.x)({row:[k.wp.minHeight(28)],left:[k.wp.flex.grow(0),k.wp.flex.shrink(1)],right:[k.wp.position.relative,k.wp.flex.grow(1),k.wp.flex.shrink(0)],recordingRow:[k.wp.flex.column,k.wp.align.center,k.wp.justify.end],recordingRowKeys:[k.wp.position.relative],recordingRowPlaceholder:[k.wp.display.flex,k.wp.align.baseline,k.wp.rowWithGap(4),{fontStyle:"italic"}],keys:[k.wp.display.inlineFlex,k.wp.rowWithGap(12)],secondaryText:[k.wp.display.flex,k.wp.flex.row,k.wp.align.center,k.wp.rowWithGap(4)],secondaryTextId:[k.wp.flex.grow(1),k.wp.flex.shrink(0)],secondaryTextDescription:[k.wp.flex.grow(0),k.wp.flex.shrink(1),k.wp.color.foregroundDimmest]}),nu=(0,ei.x)({input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function nd(e){var n,t,i,o,a=e.command,l=e.filter,s=e.shortcutsToCommands,c=e.onViewShortcutConflicts,u=(0,ne.ef)(),d=(0,ne.vU)(),p=(0,ne.UU)(a.id),f=(0,h._)((0,g.useState)(null),2),m=f[0],v=f[1],w=ns(function(e){switch(e.type){case"start":v({recorded:[]});return;case"stop":v(null);return;case"update":v({recorded:e.recorded});return;case"success":var n=(0,e6.u7)(e.shortcut);if(!n||u(a.id,n)){v(null);return}v(null);return;case"error":v(function(n){var t;return{error:e.message,recorded:null!==(t=null==n?void 0:n.recorded)&&void 0!==t?t:[]}});return}}),y=w.stopRecording,b=w.startRecording,S=w.onKeyDown,Y=(0,e3.A)(function(){return y()},[]),A=!!m;nv(A);var C=null!==(o=null==m?void 0:m.recorded)&&void 0!==o?o:[],x=null==m?void 0:m.error,_=l.length>0,k=null===(n=e7.A.match(l,a.name))||void 0===n?void 0:n.ranges,E=null===(t=e7.A.match(l,a.id))||void 0===t?void 0:t.ranges,F=(null==a?void 0:a.description)?null===(i=e7.A.match(l,a.description))||void 0===i?void 0:i.ranges:void 0,T=(0,e8.A)(function(){return l.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[l]);return(0,r.FD)(I.S,{gap:8,"data-testid":a.id,children:[(0,r.FD)(I.S,{css:nc.row,row:!0,gap:8,align:"center",children:[(0,r.FD)(I.S,{css:nc.left,gap:2,children:[(0,r.Y)(nt.e,{text:a.name,highlight:k,dimmed:_}),(0,r.FD)(R.EY,{variant:"small",css:nc.secondaryText,multiline:!1,children:[_?(0,r.Y)(nt.e,{css:nc.secondaryTextId,text:a.id,highlight:E,dimmed:_}):null,a.description?(0,r.FD)(r.FK,{children:[_?(0,r.Y)(R.EY,{color:"dimmest",multiline:!1,children:""}):null,(0,r.Y)(nt.e,{css:nc.secondaryTextDescription,text:a.description,highlight:F,dimmed:_})]}):null]})]}),(0,r.FD)(I.S,{innerRef:A?Y:void 0,css:nc.right,row:!0,gap:16,align:"center",justify:"end",children:[A?(0,r.Y)(e4.n1,{autoFocus:!0,restoreFocus:!0,children:(0,r.Y)("input",{onKeyDown:S,css:nu.input})}):null,a.shortcut&&!A&&s.length>1?(0,r.Y)(D.K0,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){(0,g.startTransition)(function(){a.shortcut&&c(np([a.shortcut]))})},children:(0,r.Y)(nl.A,{color:er.LU.foregroundDimmer})}):null,a.shortcut&&!A?(0,r.Y)(e9._y,{small:!0,keyCombo:a.shortcut,match:T}):null,a.shortcut||A?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(q.$n,{size:"small",variant:"outlined",iconLeft:(0,r.Y)(el.A,{}),text:"Add shortcut",onClick:function(){return b()}}),p?(0,r.Y)(D.K0,{alt:"Reset",onClick:function(){return u(a.id,p)},children:(0,r.Y)(P.A,{})}):null]}),A?(0,r.Y)(I.S,{css:nc.recordingRow,children:(0,r.FD)(I.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(I.S,{css:nc.recordingRowKeys,children:C.length>0?(0,r.Y)(I.S,{css:nc.keys,children:C.map(function(e,n){return(0,r.Y)(e9._y,{small:!0,keyCombo:e},"".concat(e,"-").concat(n))})}):(0,r.Y)(R.EY,{multiline:!1,color:"dimmest",css:nc.recordingRowPlaceholder,children:"Recording"})}),(0,r.Y)(D.K0,{alt:"Stop",onClick:function(){return y()},children:(0,r.Y)(nb,{})})]})}):null,a.shortcut&&!A?(0,r.FD)(I.S,{row:!0,gap:4,children:[p&&p!==a.shortcut?(0,r.Y)(D.K0,{alt:"Reset",onClick:function(){return u(a.id,p)},children:(0,r.Y)(P.A,{})}):null,(0,r.Y)(D.K0,{alt:"Change",onClick:function(){return b()},children:(0,r.Y)(ni.A,{})}),(0,r.Y)(D.K0,{alt:"Remove",onClick:function(){return d(a.id)},children:(0,r.Y)(na.A,{})})]}):null]})]}),x?(0,r.Y)(eX.N,{icon:(0,r.Y)(nl.A,{}),colorway:"warning",text:x,closable:!0,closeAction:function(){return v(function(e){var n;return{recorded:null!==(n=null==e?void 0:e.recorded)&&void 0!==n?n:[]}})}}):null]})}function np(e){var n=e.flat();return n.length>1?n.map(function(e){return np([e])}).join(" "):(0,e6.Ft)(n[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var nf=(0,ei.x)({root:[k.wp.p(0)],surface:[k.wp.pt(8),k.wp.borderRadius(8),k.wp.colWithGap(12)]});function nh(e){var n=e.search,t=e.setSearch,i=(0,g.useRef)(null),o=(0,h._)((0,g.useState)(!1),2),a=o[0],l=o[1];nv(a);var s=ns(function(e){var n,r,o;switch(e.type){case"start":l(!0),t(""),null==i||null===(n=i.current)||void 0===n||n.focus();return;case"stop":case"error":l(!1),null==i||null===(r=i.current)||void 0===r||r.focus(),null==i||null===(o=i.current)||void 0===o||o.select();return;case"success":t(np([e.shortcut]));return;case"update":t(np(e.recorded));return}}),c=s.stopRecording,u=s.startRecording,d=s.onKeyDown;return(0,r.FD)(I.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(e4.n1,{children:(0,r.Y)(E.pd,{ref:i,placeholder:a?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:a?c:void 0,onChange:function(e){t(e.currentTarget.value)},onKeyDown:a?function(e){"Escape"===e.key?c():d(e)}:void 0,value:n})}),(0,r.Y)(I.S,{row:!0,gap:4,align:"center",children:a?(0,r.FD)(r.FK,{children:[(0,r.Y)(R.EY,{color:"dimmest",css:nu.searchingText,multiline:!1,children:"Searching"}),(0,r.Y)(D.K0,{alt:"Stop Recording",onClick:c,children:(0,r.Y)(nb,{})})]}):(0,r.Y)(D.K0,{alt:"Record Keys",onClick:u,children:(0,r.Y)(no.A,{})})}),(0,r.Y)(D.K0,{alt:"Clear Input",disabled:0===n.length,onClick:function(){var e;t(""),null==i||null===(e=i.current)||void 0===e||e.focus()},children:(0,r.Y)(ea.A,{})})]})}function nm(){var e=(0,h._)((0,g.useState)(""),2),n=e[0],t=e[1],i=(0,g.useDeferredValue)(n);return(0,r.FD)(I.S,{css:nf.root,gap:8,children:[(0,r.Y)(nh,{search:n,setSearch:t}),(0,r.Y)(ng,{search:i,setSearch:t})]})}var ng=(0,g.memo)(function(e){var n=e.search,t=e.setSearch,i=(0,ne.RI)(),o=(0,e8.A)(function(){return(0,m._)(i.values())},[i]),a=(0,g.useMemo)(function(){return e7.A.filter(n,o,{extract:function(e){var n="".concat(e.name," ").concat(e.id);return e.description&&(n+=" ".concat(e.description)),e.shortcut&&(n+=" ".concat(np([e.shortcut]))),n}})},[n,o]),l=(0,g.useMemo)(function(){return a.reduce(function(e,n){var t=n.original,r=t.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(t):i=[t],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,r.Y)(eo.ui,{css:nf.surface,children:a.map(function(e,i){var o;return(0,r.FD)(g.Fragment,{children:[i>0?(0,r.Y)(eo.ui,{elevated:!0,style:{height:1}}):null,(0,r.Y)(nd,{command:e.original,filter:n,shortcutsToCommands:null!==(o=l.get(e.original.shortcut))&&void 0!==o?o:[],onViewShortcutConflicts:t})]},e.original.id)})}):null});function nv(e){var n="You have unsaved changes";(0,g.useEffect)(function(){var t=function(e){return e.preventDefault(),e.returnValue=n,n};if(e)return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}},[e])}var nw=(0,nn.i7)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),ny=(0,ei.x)({background:[{animationName:nw,animation:"".concat(nw," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(er.LU.redStronger)},k.wp.height(11),k.wp.width(11),k.wp.borderRadius("full"),k.wp.position.absolute],container:[k.wp.position.relative,k.wp.align.center,k.wp.justify.center],icon:[{zIndex:1}]});function nb(){return(0,r.FD)(I.S,{css:ny.container,children:[(0,r.Y)(nr.A,{css:ny.icon,color:er.LU.redStronger}),(0,r.Y)(I.S,{css:ny.background})]})}var nS=t(84911);function nY(){var e=(0,nS.c)()("keyboard_shortcuts");return(0,r.FD)(eo.ui,{background:"default",css:[k.wp.px(16),k.wp.pb(16),k.wp.colWithGap(12)],children:[(0,r.Y)(I.S,{tag:"label",htmlFor:e}),(0,r.Y)(nm,{})]})}var nA=t(31520),nC=(0,ei.x)({headerContainer:[k.wp.flex.column,k.wp.justify.center,k.wp.px(16),k.wp.py(8)],subheading:[{fontStyle:"italic"},k.wp.color.foregroundDimmer,k.wp.mt(8),k.wp.mb(8)],tabs:[{width:"100%"}],tabList:[{"[aria-selected=true]":[k.wp.fontWeight.medium]}],tab:[k.wp.py(8),k.wp.px(16)]});function nx(e){var n=e.hideLayoutControl,t=e.resetLayout,o=(0,i.m5)();return(0,r.FD)(r.FK,{children:[(0,r.FD)(I.S,{css:nC.headerContainer,children:[(0,r.Y)(R.Y9,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.Y)(R.EY,{variant:"small",css:nC.subheading,children:"The following settings apply to your account and will be used across all your Apps."})]}),o?(0,r.Y)(e5,{hideLayoutControl:n,resetLayout:t}):(0,r.Y)(I.S,{children:(0,r.FD)(nA.tU,{css:nC.tabs,children:[(0,r.FD)(nA.wb,{withDividers:!1,css:nC.tabList,children:[(0,r.Y)(nA.oz,{css:nC.tab,children:"Editor preferences"}),(0,r.Y)(nA.oz,{css:nC.tab,children:"Keyboard shortcuts"})]}),(0,r.FD)(nA.T2,{children:[(0,r.Y)(nA.Kp,{children:(0,r.Y)(e5,{resetLayout:t})}),(0,r.Y)(nA.Kp,{children:(0,r.Y)(nY,{})})]})]})})]})}},98144:(e,n,t)=>{"use strict";t.d(n,{DY:()=>f,LM:()=>d});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(15319);function s(){var e=(0,i._)(["\n  fragment ConvertedToProjectModalRepl on Repl {\n    id\n    org {\n      id\n    }\n    project {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query ConvertedToProjectModal($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          slug\n        }\n        project {\n          id\n          title\n          mainRepl {\n            id\n          }\n        }\n        ...CreateProjectForkRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s()),p=(0,o.J1)(c(),l.T);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},91677:(e,n,t)=>{"use strict";t.d(n,{y:()=>x});var r=t(72275),i=t(20837),o=t(43952),a=t(66622),l=t(94086),s=t(25204),c=t.n(s),u=t(30758),d=t(98144),p=t(39651),f=t(83733),h=t(56071),m=t(18466),g=t(10168),v=t(32842),w=t(40172),y=t(14968),b=t(76985),S=t(40889),Y=t(8367),A=(0,g.x)({self:[v.wp.container("root")],actions:[(0,r._)({},v.kL.max(475,"root"),[v.wp.colWithGap(8),v.wp.align.end])],buttons:[(0,r._)({},v.kL.max(350,"root"),[v.wp.colWithGap(8),v.wp.align.end])]}),C=function(){var e=(0,f.A)(),n=(0,d.DY)({variables:{id:e},ssr:!1,context:{noBatch:!0},pollInterval:6e4}),t=n.data,r=n.previousData,s=(0,p.A)(),g=s.showConfirm,v=s.showError,C=(0,a._)((0,m.B)({onFork:function(){g("Repl forked, redirecting...")},onError:function(){v("Error creating fork - please try again")}}),2),x=C[0],_=C[1].loading,k=(null==t?void 0:t.getRepl.__typename)==="Repl"?t.getRepl:null,D=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,E=(null==k?void 0:k.org)?k.org:null,R=(null==k?void 0:k.project)?k.project:null,I=(0,a._)((0,u.useState)(!1),2),F=I[0],T=I[1];return((0,u.useEffect)(function(){var n,t,r,i;if((null==k?void 0:null===(n=k.project)||void 0===n?void 0:n.mainRepl)&&D&&k.project.mainRepl.id===e)return(null===(r=D.project)||void 0===r?void 0:null===(t=r.mainRepl)||void 0===t?void 0:t.id)&&D.project.mainRepl.id===e||(i=setTimeout(function(){T(!0)},6e3)),function(){i&&clearTimeout(i)}},[e,k,D]),k&&E&&R)?(0,l.Y)(b.a,{isOpen:F,onRequestClose:function(){return T(!1)},centered:!0,children:(0,l.FD)(Y.S,{css:A.self,gap:16,children:[(0,l.Y)(S.Y9,{level:2,variant:"subheadBig",children:"This Repl is now part of a Project"}),(0,l.FD)(S.EY,{children:["This Repl is now the source of truth for a Project called"," ",R.title,". Continued development in this Repl may lead to unexpected changes."]}),(0,l.FD)(Y.S,{css:A.actions,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,l.Y)(c(),{href:"https://docs.replit.com/teams/projects/overview",target:"_blank",children:(0,l.Y)(S.EY,{children:"Learn more"})}),(0,l.FD)(Y.S,{css:A.buttons,row:!0,gap:8,children:[(0,l.Y)(w.$n,{text:"Work in a new fork",onClick:function(){_||x({orgId:E.id,repl:k,forkSource:"convertedToProjectModal"})},disabled:_,loading:_}),(0,l.Y)(y.v,(0,o._)((0,i._)({colorway:"primary"},(0,h.gm)({org:E,projectId:R.id})),{text:"Visit Project dashboard"}))]})]})]})}):null},x=function(e){return e.repl.org?(0,l.Y)(C,{}):null}},85736:(e,n,t)=>{"use strict";t.d(n,{H3:()=>h,NP:()=>g,lb:()=>p});var r=t(20837),i=t(45009),o=t(30632),a=t(75838),l=t(43751);function s(){var e=(0,i._)(["\n  fragment CreateProjectBeforeForkReplContext on Repl {\n    id\n    title\n    description\n    publishedAs\n    user {\n      id\n      username\n    }\n    deployment {\n      activeRelease {\n        id\n      }\n    }\n    org {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query CreateProjectCheckForProject($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(s()),f=(0,o.J1)(c());function h(e){var n=(0,r._)({},d,e);return a.n(f,n)}var m=(0,o.J1)(u());function g(e){var n=(0,r._)({},d,e);return l._(m,n)}},83527:(e,n,t)=>{"use strict";t.d(n,{I:()=>s});var r=t(94086),i=t(24955),o=t(10168),a=t(8367),l=(0,o.x)({container:[{maskImage:"linear-gradient(to right, white 80%, transparent)"}]}),s=function(e){var n=e.className;return(0,r.Y)(a.S,{className:n,css:l.container,children:(0,r.FD)("svg",{viewBox:"0 0 448 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("path",{d:"M28 14.5C56 14.5 56 44.5 84 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M196 14.5C224 14.5 224 44.5 252 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M280 14.5C308 14.5 308 44.5 336 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M364 14.5C392 14.5 392 44.5 420 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M168 14.5C140 14.5 140 44.5 112 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M112 14.5C140 14.5 140 44.5 168 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M336 14.5C308 14.5 308 44.5 280 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M420 14.5C392 14.5 392 44.5 364 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M252 14.5C224 14.5 224 44.5 196 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("rect",{width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6868 9.64645C11.8821 9.84171 11.8821 10.1583 11.6868 10.3536L8.04036 14L11.6868 17.6464C11.8821 17.8417 11.8821 18.1583 11.6868 18.3536C11.4915 18.5488 11.175 18.5488 10.9797 18.3536L6.9797 14.3536C6.78444 14.1583 6.78444 13.8417 6.9797 13.6464L10.9797 9.64645C11.175 9.45118 11.4915 9.45118 11.6868 9.64645ZM16.313 9.64645C16.5083 9.45118 16.8249 9.45118 17.0201 9.64645L21.0201 13.6464C21.2154 13.8417 21.2154 14.1583 21.0201 14.3536L17.0201 18.3536C16.8249 18.5488 16.5083 18.5488 16.313 18.3536C16.1178 18.1583 16.1178 17.8417 16.313 17.6464L19.9595 14L16.313 10.3536C16.1178 10.1583 16.1178 9.84171 16.313 9.64645Z",fill:i.LU.accentPositiveStrongest}),(0,r.Y)("rect",{x:"84",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.6868 40.6464C95.8821 40.8417 95.8821 41.1583 95.6868 41.3536L92.0404 45L95.6868 48.6464C95.8821 48.8417 95.8821 49.1583 95.6868 49.3536C95.4915 49.5488 95.175 49.5488 94.9797 49.3536L90.9797 45.3536C90.7844 45.1583 90.7844 44.8417 90.9797 44.6464L94.9797 40.6464C95.175 40.4512 95.4915 40.4512 95.6868 40.6464ZM100.313 40.6464C100.508 40.4512 100.825 40.4512 101.02 40.6464L105.02 44.6464C105.215 44.8417 105.215 45.1583 105.02 45.3536L101.02 49.3536C100.825 49.5488 100.508 49.5488 100.313 49.3536C100.118 49.1583 100.118 48.8417 100.313 48.6464L103.959 45L100.313 41.3536C100.118 41.1583 100.118 40.8417 100.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"168",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M179.687 40.6464C179.882 40.8417 179.882 41.1583 179.687 41.3536L176.04 45L179.687 48.6464C179.882 48.8417 179.882 49.1583 179.687 49.3536C179.492 49.5488 179.175 49.5488 178.98 49.3536L174.98 45.3536C174.784 45.1583 174.784 44.8417 174.98 44.6464L178.98 40.6464C179.175 40.4512 179.492 40.4512 179.687 40.6464ZM184.313 40.6464C184.508 40.4512 184.825 40.4512 185.02 40.6464L189.02 44.6464C189.215 44.8417 189.215 45.1583 189.02 45.3536L185.02 49.3536C184.825 49.5488 184.508 49.5488 184.313 49.3536C184.118 49.1583 184.118 48.8417 184.313 48.6464L187.959 45L184.313 41.3536C184.118 41.1583 184.118 40.8417 184.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"252",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.687 40.6464C263.882 40.8417 263.882 41.1583 263.687 41.3536L260.04 45L263.687 48.6464C263.882 48.8417 263.882 49.1583 263.687 49.3536C263.492 49.5488 263.175 49.5488 262.98 49.3536L258.98 45.3536C258.784 45.1583 258.784 44.8417 258.98 44.6464L262.98 40.6464C263.175 40.4512 263.492 40.4512 263.687 40.6464ZM268.313 40.6464C268.508 40.4512 268.825 40.4512 269.02 40.6464L273.02 44.6464C273.215 44.8417 273.215 45.1583 273.02 45.3536L269.02 49.3536C268.825 49.5488 268.508 49.5488 268.313 49.3536C268.118 49.1583 268.118 48.8417 268.313 48.6464L271.959 45L268.313 41.3536C268.118 41.1583 268.118 40.8417 268.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"336",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M347.687 40.6464C347.882 40.8417 347.882 41.1583 347.687 41.3536L344.04 45L347.687 48.6464C347.882 48.8417 347.882 49.1583 347.687 49.3536C347.492 49.5488 347.175 49.5488 346.98 49.3536L342.98 45.3536C342.784 45.1583 342.784 44.8417 342.98 44.6464L346.98 40.6464C347.175 40.4512 347.492 40.4512 347.687 40.6464ZM352.313 40.6464C352.508 40.4512 352.825 40.4512 353.02 40.6464L357.02 44.6464C357.215 44.8417 357.215 45.1583 357.02 45.3536L353.02 49.3536C352.825 49.5488 352.508 49.5488 352.313 49.3536C352.118 49.1583 352.118 48.8417 352.313 48.6464L355.959 45L352.313 41.3536C352.118 41.1583 352.118 40.8417 352.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"420",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.687 40.6464C431.882 40.8417 431.882 41.1583 431.687 41.3536L428.04 45L431.687 48.6464C431.882 48.8417 431.882 49.1583 431.687 49.3536C431.492 49.5488 431.175 49.5488 430.98 49.3536L426.98 45.3536C426.784 45.1583 426.784 44.8417 426.98 44.6464L430.98 40.6464C431.175 40.4512 431.492 40.4512 431.687 40.6464ZM436.313 40.6464C436.508 40.4512 436.825 40.4512 437.02 40.6464L441.02 44.6464C441.215 44.8417 441.215 45.1583 441.02 45.3536L437.02 49.3536C436.825 49.5488 436.508 49.5488 436.313 49.3536C436.118 49.1583 436.118 48.8417 436.313 48.6464L439.959 45L436.313 41.3536C436.118 41.1583 436.118 40.8417 436.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("line",{x1:"28",y1:"14",x2:"444",y2:"14",stroke:i.LU.accentPositiveDimmest,strokeWidth:"2"})]})})}},2807:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f});var r=t(20837),i=t(43952),o=t(55937),a=t(45009),l=t(30632),s=t(72813);function c(){var e=(0,a._)(["\n  query CheckForProjectByRepl($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(83733);function f(){var e,n,t,a,l,c,f=(l={variables:{id:(0,p.A)()}},c=(0,r._)({},u,l),s.I(d,c)),h=(null===(n=f.data)||void 0===n?void 0:null===(e=n.getRepl)||void 0===e?void 0:e.__typename)==="Repl"?f.data.getRepl.org:void 0,m=!!h&&h.type===o.NT.Team&&(h.authorizations.createPrivateRepl.isAuthorized||h.authorizations.createPublicRepl.isAuthorized)&&h.authorizations.createProject.isAuthorized;return(0,i._)((0,r._)({},f),{hasProject:(null===(t=f.data)||void 0===t?void 0:t.getRepl.__typename)==="Repl"&&!!(null===(a=f.data.getRepl.project)||void 0===a?void 0:a.id),isEligibleForProject:m})}},77660:(e,n,t)=>{"use strict";t.d(n,{Q:()=>u,x:()=>c});var r=t(13454),i=t(66622),o=t(5482),a=t(30758),l=t(80475),s=t(24481),c=function(e){return e.escapeHatchGitExecWrite("git config --local core.sshCommand replit-git-ssh")};function u(){var e=(0,s.A)(),n=e.container,t=e.fs,u=e.git,d=(0,i._)((0,a.useState)({state:"loading"}),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return f({state:"loading"}),[4,u.getRepositoryState()];case 1:if((e=n.sent()).error&&f({state:"error",error:"Could not get repository status"}),e.error||e.state===l.Gi.NOT_INITIALIZED)return f({state:"error",error:"Could not get repository status"}),[2];return[4,c(u)];case 2:if(n.sent().error)return f({state:"error",error:"Could not configure SSH"}),[2];return f({state:"finished",hasInstalled:!0}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,t,u]),p}},71105:(e,n,t)=>{"use strict";t.d(n,{A:()=>ew,x:()=>ev});var r=t(13454),i=t(66622),o=t(5482),a=t(94086),l=t(30758),s=t(20837),c=t(45009),u=t(30632),d=t(72813);function p(){var e=(0,c._)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(14178),g=t(53654),v=t(1987),w=t(6696),y=t(76605),b=t(83733),S=t(82436),Y=t(24481),A=t(57218),C=t(87590),x="Import HTML package",_=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() <\/script>'}]}],k=[{title:x,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"><\/script>'}]}],D=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],E=t(27189),R=t(54867),I=t(77119),F=t(98734),T="Import Node package",P=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],L=[{title:T,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],U=t(43740),N=t(75165),O=t(10168),M=t(32842),B=t(40172),H=t(95235),z=t(28354),W=t(31955),G=t(40889),V=t(8367),j=t(72602),Z=t(30846),q=t(79653),K=(0,O.x)({templateContainer:[M.wp.backgroundColor.backgroundRoot,M.wp.borderRadius(4),M.wp.p(4),M.wp.align.center],input:[M.wp.minWidth(64),M.wp.flex.growAndShrink(1)],codeExampleContainer:[M.wp.borderRadius(4),M.wp.flex.shrink(1)],codeExampleText:[M.wp.font.code,M.wp.color.foregroundDimmer,M.wp.py(4),M.wp.flex.growAndShrink(1)]}),$=function(e){var n=e.title,t=e.content,r=(0,i._)((0,l.useState)(t),2),o=r[0],s=r[1];return(0,a.FD)(V.S,{gap:4,children:[(0,a.FD)(V.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(G.EY,{variant:"subheadDefault",children:n}),"Get user info"===n?(0,a.Y)(H.K0,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,a.Y)(q.A,{})}):null]}),(0,a.FD)(V.S,{gap:4,children:[(0,a.Y)(V.S,{css:K.templateContainer,row:!0,gap:4,justify:"center",children:t.map(function(e,t){var r=e.type;switch(r){case"input":return(0,a.Y)(z.pd,{onChange:function(e){var n=(0,E._)(o);n[t].value=e.target.value,s(n)},placeholder:e.placeholder,value:e.value||"",css:K.input},"".concat(n,"-").concat(t));case"code":return(0,a.Y)(V.S,{css:K.codeExampleContainer,children:(0,a.Y)(G.EY,{multiline:!1,css:K.codeExampleText,children:e.value})},"".concat(n,"-").concat(t));default:(0,R.A)(r)}})}),(0,a.Y)(J,{code:o.reduce(function(e,n){return"input"===n.type?e+(n.value||n.placeholder):e+n.value},""),packageImport:n===T||n===x})]})]})},J=function(e){var n=e.code,t=e.packageImport,r=(0,N.rM)(),i=(0,U.A)(r),o=(0,Y.A)().fs,l=(0,N.vO)();return i?(0,a.Y)(W.ui,{children:(0,a.Y)(B.$n,{size:"small",variant:"outlined",onClick:function(){var e,a;if(t&&r&&o){if("html"!==(0,g.an)(r)){i({code:n,insertAt:0});return}o.readFile(r).then(function(e){if(e.error)throw e.error;var t=I.A.from(e.content).toString(),r=t.indexOf("</head>")-1;-1===r&&(r=t.indexOf("<script")),-1===r&&(r=t.indexOf("</body>")),-1===r&&(r=t.length),i({code:n,insertAt:r})});return}i({code:n,insertAt:null!==(a=null===(e=l())||void 0===e?void 0:e.position.offset)&&void 0!==a?a:0})},text:t?"Auto add":"Insert",iconRight:(0,a.Y)(j.A,{}),css:{width:"fit-content"}})}):(0,a.Y)(W.ui,{children:(0,a.Y)(B.$n,{size:"small",variant:"outlined",onClick:function(){return(0,F.A)(n)},text:"Copy",iconLeft:(0,a.Y)(Z.A,{}),css:{width:"fit-content"}})})},Q=function(e){var n=e.examples;return(0,a.Y)(V.S,{gap:16,children:n.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};let X=function(e){var n=e.langKey;return(0,a.FD)(V.S,{gap:8,children:[" ","html"!==n&&(0,a.Y)(Q,{examples:k}),(0,a.Y)(Q,{examples:D})]})};var ee=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],en=t(52757),et=(0,en.AH)([M.wp.colWithGap(16)]);let er=function(){return(0,a.Y)(V.S,{css:et,children:ee.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};var ei=(0,en.AH)([M.wp.colWithGap(8)]);let eo=function(e){var n=e.langKey,t=(0,a.Y)(er,{});switch(n){case"html":t=(0,a.Y)(Q,{examples:_});break;case"nodejs":t=(0,a.Y)(Q,{examples:P})}return(0,a.Y)(V.S,{css:ei,children:t})},ea=function(e){var n=e.langKey,t=null;switch(n){case"html":t=k;break;case"nodejs":t=L}return t?(0,a.Y)(V.S,{gap:8,children:(0,a.Y)(Q,{examples:t})}):null};var el=t(19346),es=t(24955),ec=t(14968),eu=t(25877),ed=t(93532),ep=t(39274),ef=t(58283),eh=t(91297),em=t(68753),eg=(0,O.x)({link:[M.wp.color.accentPrimaryStronger,M.wp.cursor.pointer],errorContainer:[M.wp.textAlign.center,M.wp.colWithGap(4)],usageSectionTitleText:[{color:es.LU.foregroundDimmest,textTransform:"uppercase",fontWeight:es.LU.fontWeightMedium}],divider:[M.wp.backgroundColor.outlineDimmer]}),ev=function(){var e=(0,Y.A)(),n=e.dotReplit,t=e.fs,a=(0,i._)((0,l.useState)(),2),s=a[0],c=a[1],u=(0,i._)((0,l.useState)(!1),2),d=u[0],p=u[1],f=(0,i._)((0,l.useState)(!1),2),h=f[0],m=f[1],g=(0,i._)((0,l.useState)(!0),2),w=g[0],b=g[1],S=(0,i._)((0,l.useState)(!0),2),A=S[0],C=S[1],x=(0,l.useCallback)((0,r._)(function(){var e,t,r,i,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:c(void 0),b(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,n.getConfig({bypassCache:!0})];case 2:switch((a=o.sent()).error){case y.DO.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case y.DO.Disconnected:throw Error("Disconnected, cannot read .replit file.");case y.DO.NotFound:return C(!1),[2]}return p(!!(null==a?void 0:null===(t=a.config)||void 0===t?void 0:null===(e=t.auth)||void 0===e?void 0:e.buttonEnabled)),m(!!(null==a?void 0:null===(i=a.config)||void 0===i?void 0:null===(r=i.auth)||void 0===r?void 0:r.pageEnabled)),[3,5];case 3:return c(o.sent().message),[3,5];case 4:return b(!1),[7];case 5:return[2]}})}),[n,c,b,C,p,m]);return(0,l.useEffect)(function(){var e;(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:if(!t)return[2];return[4,x()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[t,x]),(0,l.useEffect)(function(){if(t){var e=t.watchTextFile(v.v,{onChange:(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),[2]}})})});return function(){e(),m(!1),p(!1),b(!1)}}},[t,m,x]),{error:s,isDotReplitAuthButtonEnabled:d,isDotReplitAuthPageEnabled:h,isDotReplitAuthLoading:w,hasDotReplit:A,setError:c,setIsDotReplitAuthLoading:b,isDotReplitAuthEnabled:d||h}};function ew(){var e,n,t,c,u,p,v=(0,b.A)(),y=(0,Y.A)().dotReplit,x=(0,N.rM)(),_=x?(0,g.an)(x):null,k=(0,A.J)().configs,D=(0,i._)((0,l.useState)(""),2),E=D[0],R=D[1],I=(e={variables:{replID:v}},n=(0,s._)({},f,e),d.I(h,n)),F=I.data,T=I.error,P=I.loading,L=(null==F?void 0:F.repl.__typename)==="Repl"&&(null==F?void 0:null===(c=F.repl)||void 0===c?void 0:null===(t=c.config)||void 0===t?void 0:t.isServer),U=null!==(p=null==F?void 0:null===(u=F.currentUser)||void 0===u?void 0:u.isLoggedIn)&&void 0!==p&&p,O=ev(),H=O.error,z=O.isDotReplitAuthButtonEnabled,W=O.isDotReplitAuthPageEnabled,j=O.isDotReplitAuthLoading,Z=O.hasDotReplit,q=O.setError,K=O.setIsDotReplitAuthLoading,$=O.isDotReplitAuthEnabled;(0,l.useEffect)(function(){if(k.find(function(e){return"react"===e.language})||"jsx"===_||"tsx"===_){R("react");return}k.length>0&&R(k[0].language)},[_,E,R,k]);var J=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,y.updateDotReplit([(0,w.qG)(!0),(0,w.D8)(!1)])];case 1:return e.sent().error&&(q("Couldn't enable login page, please try again"),K(!1)),[2]}})}),[K,y,q]),Q=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,y.updateDotReplit([(0,w.qG)(!1),(0,w.D8)(!0)])];case 1:return e.sent().error&&(q("Couldn't enable login button, please try again"),K(!1)),[2]}})}),[K,y,q]),ee=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,y.updateDotReplit([(0,w.qG)(!1),(0,w.D8)(!1)])];case 1:return e.sent().error&&(q("Couldn't disable Log in with Replit, please try again"),K(!1)),[2]}})}),[K,y,q]),en=(0,l.useMemo)(function(){return U?Z?T?(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"An error ocurred retrieving auth for this App. Please try again later."})}):"html"===E||L?void 0:(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"Run your web app to use Log in with Replit"})}):(0,a.FD)(V.S,{css:eg.errorContainer,children:[(0,a.Y)(ed.N,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,a.Y)(G.EY,{children:(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ey,{})})},[T,Z,U,L,E]),et="html"===E||"nodejs"===E,er=(0,a.Y)(G.EY,{color:"dimmer",children:"You can use Log in with Replit with all web Apps. We have language clients for Nodejs and HTML - switch to an App that uses that language to see how to use it."}),ei=(0,a.FD)(V.S,{gap:24,children:[(0,a.FD)(V.S,{gap:8,children:[W?(0,a.FD)(G.EY,{color:"dimmer",children:["Your App will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,a.FD)("span",{onClick:Q,css:eg.link,onKeyDown:Q,role:"button",tabIndex:0,children:[" ","or use your own custom button."]}),(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]}):(0,a.FD)(G.EY,{color:"dimmer",children:["Your users can log in to your App using a custom button. Start by importing the package below"," ",(0,a.FD)("span",{onClick:J,css:eg.link,onKeyDown:J,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),et?void 0:er]}),(0,a.FD)(V.S,{children:["nodejs"===E&&z?null:(0,a.Y)(ea,{langKey:E}),z?(0,a.Y)(X,{langKey:E}):null]}),(0,a.FD)(V.S,{gap:8,children:[(0,a.FD)(V.S,{gap:2,children:[(0,a.Y)(G.EY,{multiline:!1,variant:"small",css:eg.usageSectionTitleText,children:"Usage"}),(0,a.Y)(eu.a,{css:eg.divider})]}),(0,a.Y)(V.S,{children:(0,a.FD)(V.S,{gap:12,children:[" ","nodejs"===E&&z?(0,a.Y)(ea,{langKey:E}):null,(0,a.Y)(eo,{langKey:E})]})})]}),(0,a.Y)(B.$n,{onClick:ee,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:j||P})]}),es=(0,el.Vv)().getDescription({type:"replAuth"}),ef=(0,a.FD)(V.S,{gap:8,children:[(0,a.Y)(G.EY,{css:M.wp.textAlign.center,children:es}),(0,a.Y)(B.$n,{colorway:"primary",onClick:J,text:"Enable Login Page",loading:j||P,disabled:!!H,iconLeft:(0,a.Y)(eh.A,{})}),(0,a.FD)(G.EY,{color:"dimmer",css:M.wp.textAlign.center,children:["Alternatively,"," ",(0,a.Y)("span",{onClick:Q,css:eg.link,onKeyDown:Q,role:"button",tabIndex:0,children:"use a custom login button"}),".",(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]})]}),ew=(0,a.Y)(ec.v,{href:m.ik.REPL_AUTH,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,a.Y)(ep.A,{}),text:"Learn more"});return(0,a.Y)(C.A,{pane:{type:"replAuth"},maxWidth:$?600:450,headerText:"Login with Replit",body:(0,a.FD)(a.FK,{children:[H?(0,a.Y)(ed.N,{text:H,colorway:$?void 0:"warning",icon:(0,a.Y)(em.A,{})}):null,null!=en?en:$?ei:ef]}),action:en?void 0:ew})}var ey=function(){return(0,a.FD)(V.S,{gap:16,children:[(0,a.FD)(G.EY,{children:[(0,a.Y)("a",{href:m.ik.REPL_AUTH,target:"_blank",rel:"noopener",css:eg.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your App. Try it out by logging in or signing up."]}),(0,a.Y)(ec.v,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,a.Y)(ef.A,{})})]})}},90423:(e,n,t)=>{"use strict";t.d(n,{dh:()=>A,aI:()=>I,P6:()=>x,SY:()=>k,KZ:()=>E});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(75838);function s(){var e=(0,i._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return s=function(){return e},e}var c=(0,o.J1)(s()),u=t(43639),d=t(72143),p=t(37307),f=t(64744),h=t(9782),m=t(85736),g=t(22535);function v(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    imageUrl\n    workspaceCta\n    publishedAs\n    publicForkCount\n    timeUpdated\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n        message\n      }\n      editResources {\n        isAuthorized\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...ForkContextRepl\n    ...WorkspaceHeaderReplMetadataRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...CreateProjectBeforeForkReplContext\n    ...TransferReplReplInfo\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return S=function(){return e},e}var Y={},A=(0,o.J1)(v(),h.N,c,g.a,p._O,f.l,m.lb,u.oD),C=(0,o.J1)(w(),A);function x(e){var n=(0,r._)({},Y,e);return a.I(C,n)}var _=(0,o.J1)(y(),d.xS);function k(e){var n=(0,r._)({},Y,e);return l.n(_,n)}var D=(0,o.J1)(b(),A);function E(e){var n=(0,r._)({},Y,e);return l.n(D,n)}var R=(0,o.J1)(S());function I(e){var n=(0,r._)({},Y,e);return l.n(R,n)}},11141:(e,n,t)=>{"use strict";t.d(n,{A:()=>rt});var r=t(20837),i=t(43952),o=t(66622),a=t(94086),l=t(60049),s=t(30758),c=t(55195),u=t(55937),d=t(90423),p=t(84199),f=t(54341),h=t(26190),m=t(39651),g=t(83733),v=t(50704),w=t(37965),y=t(82436),b=t(56071),S=t(68384),Y=t(96311),A=t(35988),C=t(72275),x=t(72143),_=t(13454),k=t(5482),D=t(19327),E=t(63679),R=t(1175),I=t(24955),F=t(2298),T=t(32842),P=t(40889),L=t(8367),U=t(16021),N=L.D.button,O=function(){return(0,a.Y)(L.S,{css:[T.wp.flex.grow(1),{borderTop:"1px solid ".concat(I.LU.outlineDimmest)}],row:!0})},M=function(e){var n=e.isActive,t=e.isComplete,r=e.children,i=e.onClick,o=e.disabled;return(0,a.FD)(N,{type:"button",css:[T.wp.reset.button,T.wp.position.relative,F.b.nofill,n&&T.wp.backgroundColor.backgroundHigher,T.wp.p(4),T.wp.borderRadius(4)],onClick:i,disabled:o,children:[(0,a.Y)(P.EY,{variant:"small",multiline:!1,children:r}),t?(0,a.Y)(U.A,{size:6,strokeWidth:6,color:I.LU.foregroundDimmer,css:[T.wp.position.absolute,{top:2,right:-2}]}):null]})},B=t(78910),H=t(78542),z=t(88708),W=t(54013),G=t(45009),V=t(30632),j=t(72813);function Z(){var e=(0,G._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}var q={},K=(0,V.J1)(Z(),x.xS),$=t(21847),J=t(75838),Q=t(37307);function X(){var e=(0,G._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return X=function(){return e},e}function ee(){var e=(0,G._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return ee=function(){return e},e}var en={},et=(0,V.J1)(X(),x.xS,Q._O),er=(0,V.J1)(ee(),x.xS,Q._O),ei="Something went wrong publishing your Template";function eo(e){if(e.error)return e.error.message||ei;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return ei}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return ei}}}function ea(){var e,n,t,i,a=(0,o._)((e=(0,r._)({},en,void 0),J.n(et,e)),2),l=a[0],s=a[1],c=(0,o._)((n=(0,r._)({},en,void 0),J.n(er,n)),2),u=c[0],d=c[1];return{createRelease:(t=(0,_._)(function(e){var n,t;return(0,k.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u({refetchQueries:["ReplEnvironmentHeader"],variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eo(t)}];case 3:return r.sent(),[2,{data:null,error:ei}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),createDeployment:(i=(0,_._)(function(e){var n,t;return(0,k.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l({variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eo(t)}];case 3:return r.sent(),[2,{data:null,error:ei}];case 4:return[2]}})}),function(e){return i.apply(this,arguments)}),data:s.data||d.data,loading:s.loading||d.loading,error:eo(s||d)}}function el(){var e=(0,G._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return el=function(){return e},e}var es={},ec=(0,V.J1)(el(),x.xS);function eu(e){var n,t,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(t=e.data)||void 0===t?void 0:null===(n=t.setReplViewSettings)||void 0===n?void 0:n.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplViewSettings)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(l=e.data)||void 0===l?void 0:l.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function ed(){var e=(0,G._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var ep={},ef=(0,V.J1)(ed(),x.xS);function eh(e){return e.message||"Something went wrong saving updates to your App"}var em=function(e){return e[e.Default=0]="Default",e[e.Saved=1]="Saved",e[e.Current=2]="Current",e}({}),eg=t(24129),ev=t(41705),ew=t(95344),ey=t(31955),eb=t(10001),eS=t(14753),eY=t(51326);function eA(e){var n=(0,o._)((0,s.useState)(null),2),t=n[0],a=n[1],l=(0,o._)((0,s.useState)(null),2),c=l[0],u=l[1],d=(0,eg.A)({onUpload:function(n){var t=n.url;a(null),e(t)},onUploadPreview:function(e){var n=e.dataUrl;u(null),a(n)},onError:function(e){a(null),u(e.message)}}),p=(0,s.useCallback)(function(){return u(null)},[]);return(0,i._)((0,r._)({},d),{error:c,clearError:p,previewUrl:t})}var eC=function(e){return e.ReplFile="repl_file",e.ReplImage="repl_image",e}({});function ex(e){return"repl_file"===e||"repl_image"===e}var e_=function(e){function n(){return(0,H._)(this,n),(0,B._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error)),ek=function(e){function n(){return(0,H._)(this,n),(0,B._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error)),eD=function(e){function n(){return(0,H._)(this,n),(0,B._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error));function eE(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your App a title"}}function eR(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this App do?"}}var eI=(0,s.createContext)(null),eF=function(e){var n=(0,s.useContext)(eI);if(!n)throw Error("usePublishField must be used within a PublishInputContext");return n["".concat(e,"Field")]},eT=function(){var e=(0,s.useContext)(eI);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eP=t(25204),eL=t.n(eP),eU=t(29010),eN=t(73943),eO=t(10168),eM=t(14968),eB=t(68463),eH=t(53055),ez=t(73670),eW=(0,eO.x)({flexGrowAndShrink:[T.wp.flex.growAndShrink(1)],truncateText:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),eG=function(e){var n=e.repl,t=(0,eH.z9)(n),o=n.url?(0,eH.fJ)(n):"",l=(0,eU.A)({text:"Check out what I just made on Replit: ".concat(n.title),url:o});return(0,a.FD)(ey.ui,{background:"default",css:[T.wp.borderRadius(8),T.wp.overflow("hidden"),T.wp.colWithGap(16),T.wp.width(510),T.wp.p(16),T.wp.flex.growAndShrink(1),(0,C._)({},"@media (max-width: ".concat(eN.LO.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,a.FD)(L.S,{gap:16,children:[(0,a.Y)(P.EY,{variant:"subheadBig",multiline:!1,children:"Share your App"})," ",(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)(P.EY,{variant:"small",multiline:!1,color:"dimmer",children:"Cover page link"}),(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(eL(),(0,i._)((0,r._)({legacyBehavior:!0},t),{css:eW.flexGrowAndShrink,children:(0,a.Y)("a",{css:eW.truncateText,children:o})})),(0,a.Y)(eB.r,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:o})]})]})]}),(0,a.Y)(L.S,{css:[(0,C._)({alignItems:"flex-end"},T.$_.max("mobileMax"),[T.wp.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],row:!0,gap:12,justify:"end",children:(0,a.Y)(eM.v,{prefetch:!1,href:l,iconLeft:(0,a.Y)(ez.A,{}),text:"Share to X",target:"_blank",css:[(0,C._)({},T.$_.max("mobileMax"),[T.wp.mr(0)])]})})]})},eV=t(52537),ej=t(68753);function eZ(e){var n=e.error,t=e.dataCy;return n?(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(ej.A,{css:[T.wp.color.accentNegativeStronger]}),(0,a.Y)(P.EY,{css:[T.wp.flex.growAndShrink(1),T.wp.color.accentNegativeStronger],dataCy:t,children:n.message})]}):null}var eq=t(84911),eK=t(28354),e$=L.D.label,eJ=(0,s.forwardRef)(function(e,n){return(0,a.Y)(e$,(0,i._)((0,r._)({},e),{ref:n,css:T.wp.color.foregroundDimmer}))}),eQ=function(){var e=(0,eq.c)(),n=e("replName"),t=e("replDescription"),r=eT(),i=r.replTitleField,o=r.replDescriptionField,l=r.isSaving;return(0,a.FD)(L.S,{gap:16,css:[T.wp.flex.growAndShrink(1)],children:[(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)(L.S,{css:[T.wp.align.baseline,T.wp.justify.spaceBetween],row:!0,children:(0,a.Y)(eJ,{css:[T.wp.color.foregroundDimmer,{lineHeight:I.LU.lineHeightSmall}],htmlFor:n,children:"Repl name"})}),i.value]}),(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{css:[T.wp.align.baseline,T.wp.justify.spaceBetween],row:!0,children:[(0,a.Y)(eJ,{css:[T.wp.color.foregroundDimmer,{lineHeight:I.LU.lineHeightSmall}],htmlFor:t,children:"Repl description"}),(0,a.FD)(P.EY,{multiline:!1,css:{color:o.value.length>1e3?I.LU.accentNegativeStronger:I.LU.foregroundDimmest},children:[o.value.length,"/",1e3]})]}),(0,a.Y)(eK.ov,{id:t,value:o.value,disabled:l,onChange:function(e){o.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[T.wp.minHeight(128),T.wp.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),o.touched?(0,a.Y)(eZ,{error:o.error,dataCy:"publish-form-repl-description-error"}):null]})]})},eX=t(40581),e0=function(e){var n=e.showPlayButton,t=e.children,r=e.active;return(0,a.FD)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.Y)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?I.LU.accentPrimaryDimmest:void 0},children:t}),(0,a.FD)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.Y)("rect",{width:"268",height:"17",fill:I.LU.backgroundDefault}),(0,a.Y)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:I.LU.accentPositiveDimmer}),(0,a.Y)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:I.LU.backgroundHighest}),(0,a.Y)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:I.LU.backgroundHighest}),(0,a.Y)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?I.LU.accentPrimaryDefault:I.LU.outlineDimmer}),n?(0,a.Y)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:I.LU.white}):null,(0,a.Y)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?I.LU.accentPrimaryDefault:I.LU.outlineDimmer,strokeWidth:"1"})]})]})},e1=t(40114),e2=t(53654),e5=t(52757),e4=t(69929),e3=L.D.ol,e8=L.D.li,e7=(0,e5.AH)([T.wp.py(4),T.wp.borderRadius(8),{border:"1px solid ".concat(I.LU.outlineDimmest),borderRadius:I.LU.borderRadius8,backgroundColor:I.LU.interactiveBackground,zIndex:T.U3,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:I.LU.space8,listStyle:"none"}]),e6={backgroundColor:I.LU.interactiveBackgroundActive},e9={backgroundColor:I.LU.accentPrimaryDimmer},ne=(0,e5.AH)([T.wp.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,r._)({},e6),":active":(0,r._)({},e9)}}]);function nn(e){var n,t,l,c,u,d,p,f,m,g,v,w,y,b,S,Y,A=e.fs,C=e.initiallySelectedFile,x=e.onFileSelect,D=e.onClear,E=(0,s.useRef)(null),R=(t=(n=(0,o._)((0,s.useState)({isLoading:!0,error:null,files:[]}),2))[0],l=n[1],(0,s.useEffect)(function(){function e(){return(e=(0,_._)(function(){var e,n;return(0,k.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,A.listFiles()];case 1:if((e=t.sent()).error)throw Error(e.error);return l({isLoading:!1,error:null,files:(null!==(n=e.files)&&void 0!==n?n:[]).slice().sort(function(e,n){return e.localeCompare(n)}).map(function(e){return{file:e,pathDepth:(0,e2.jP)(e)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return t.sent(),l({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[A]),(0,r._)({},t)),I=R.isLoading,F=R.files,U=R.error,N=(u=(c={files:F,inputRef:E,initiallySelectedFile:C}).files,d=c.inputRef,p=c.initiallySelectedFile,m=(f=(0,o._)((0,s.useState)(!1),2))[0],g=f[1],w=(v=(0,o._)((0,s.useState)(u),2))[0],y=v[1],b=(0,s.useCallback)(function(e){return u.filter(function(n){return n.toLowerCase().includes(e.toLowerCase())})},[u]),S=(0,e1.Bp)({items:w,isOpen:m,initialInputValue:p,initialSelectedItem:w.find(function(e){return e===p}),onIsOpenChange:function(e){g(!!e.isOpen)},onInputValueChange:function(e){var n;y(b(null!==(n=e.inputValue)&&void 0!==n?n:""))}}),Y=(0,s.useCallback)(function(){var e;g(!1),null===(e=d.current)||void 0===e||e.blur()},[d]),(0,s.useEffect)(function(){var e;y(b(null!==(e=S.inputValue)&&void 0!==e?e:""))},[u,b,S.inputValue]),(0,s.useEffect)(function(){S.selectedItem&&Y()},[S.selectedItem,Y]),(0,i._)((0,r._)({},S),{closeMenu:Y,items:w})),O=(0,h.A)(x);return(0,s.useEffect)(function(){N.selectedItem&&O.current(N.selectedItem)},[N.selectedItem,O]),(0,a.FD)(L.S,{children:[(0,a.Y)(L.S,(0,i._)((0,r._)({},N.getComboboxProps({refKey:"innerRef"})),{css:[T.wp.position.relative],children:(0,a.Y)(e4.I,(0,i._)((0,r._)({},N.getInputProps({onFocus:N.openMenu,ref:E,refKey:"inputRef",disabled:I,placeholder:"Search your files"})),{onClear:function(){var e;N.reset(),null===(e=E.current)||void 0===e||e.focus(),D()},loading:I}))})),(0,a.FD)(L.S,(0,i._)((0,r._)({},N.getMenuProps({refKey:"innerRef"})),{css:[T.wp.position.relative],children:[U?(0,a.Y)(L.S,{css:[T.wp.p(8)],children:(0,a.Y)(P.EY,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!U&&N.isOpen?(0,a.Y)(e3,{css:[e7],children:N.items.length>0?N.items.map(function(e,n){return(0,a.Y)(e8,(0,i._)((0,r._)({css:[ne,N.highlightedIndex===n&&e6,e===N.selectedItem&&e9]},N.getItemProps({item:e,index:n,onClick:function(){N.closeMenu()}})),{children:(0,a.Y)(P.EY,{multiline:!1,children:e})}),e)}):(0,a.Y)(e8,{css:[T.wp.p(8)],children:(0,a.FD)(P.EY,{multiline:!1,children:['No files found for "',N.inputValue,'"']})})}):null]}))]})}var nt=function(e){var n=(0,s.useRef)(null);return{inputProps:{onChange:function(n){var t=n.target,r=t.validity,i=t.files;if(r.valid){var o=i?i[0]:null;o&&e(o)}},"aria-hidden":"true",ref:n,accept:ev.DA.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.click()}},inputRef:n}},nr=function(e){var n=nt(e.onFile),t=n.inputProps,o=n.buttonProps;return(0,a.FD)(a.FK,{children:[(0,a.Y)("input",(0,i._)((0,r._)({},t),{css:{display:"none"}})),e.children(o)]})};t(4876);var ni=t(40172),no=t(95235),na=t(76985),nl=t(93532),ns=t(48729),nc=t(91918);t(86955);var nu=t(8351),nd=(0,e5.AH)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function np(e){var n=e.src,t=e.alt;return(0,a.FD)(L.S,{css:[nd,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.Y)(ns.A,{objectFit:"cover",layout:"fill",src:n,alt:t}),(0,a.Y)(L.S,{css:[nd,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var nf=t(74547),nh=[{value:eC.ReplImage,text:"Photo"},{value:eC.ReplFile,text:"File"}],nm=function(e){var n,t,l,c,u,d,p=e.fs,f=(0,eq.c)(),h=f("coverPage"),m=eT(),g=m.selectedRepl,v=m.coverFileField,w=m.coverUrlField,y=m.coverDefaultViewField,b=(0,o._)((n=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:if(!(null==e?void 0:e.length)||!(n=e[0]).type.startsWith("image/"))return[2];return[4,A.uploadImage(n,eX.VL.ReplCoverImage)];case 1:return t.sent(),[2]}})}),t=function(e){return n.apply(this,arguments)},c=(l=(0,o._)((0,s.useState)(!1),2))[0],u=l[1],d=(0,s.useRef)(0),[c,(0,s.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),d.current++,u(!0)},onDragLeave:function(e){e.preventDefault(),d.current--,0===d.current&&u(!1)},onDrop:function(e){e.preventDefault(),d.current=0,u(!1),e.persist();var n,r,i=Array.from(null!==(r=null==e?void 0:null===(n=e.dataTransfer)||void 0===n?void 0:n.files)&&void 0!==r?r:[]);if(0===i.length){t(null);return}t(i)},onDragOver:function(e){e.preventDefault()}}},[t])]),2),S=b[0],Y=b[1],A=eA(w.setValue);return(0,a.FD)(L.S,(0,i._)((0,r._)({gap:16},Y),{children:[(0,a.FD)(L.S,{gap:12,children:[(0,a.Y)(L.S,{row:!0,gap:8,children:(0,a.Y)(nf.z,{tag:"fieldset",css:[T.wp.rowWithGap(24)],name:h,value:y.value,onChange:function(e){ex(e.target.value)&&y.setValue(e.target.value)},children:nh.map(function(e){return(0,a.FD)(L.S,{row:!0,gap:8,children:[(0,a.Y)(nf.s,{id:f(e.value),value:e.value}),(0,a.Y)("label",{htmlFor:f(e.value),children:e.text})]},e.value)})})}),y.value===eC.ReplImage&&(0,a.FD)(L.S,{gap:4,align:"center",children:[(0,a.Y)(nr,{onFile:function(e){return A.uploadImage(e,eX.VL.ReplCoverImage)},children:function(e){var n=e.onClick;return(0,a.Y)(ni.$n,{onClick:n,colorway:S?"primary":void 0,text:"Upload a cover photo",iconLeft:A.isLoading?(0,a.Y)(eS.A,{}):(0,a.Y)(nc.A,{}),stretch:!0})}}),A.error?(0,a.Y)(nl.N,{colorway:"negative",icon:(0,a.Y)(ej.A,{}),text:A.error}):null,(0,a.Y)(P.EY,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),y.value===eC.ReplFile&&(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(nn,{fs:p,initiallySelectedFile:v.value,onFileSelect:v.setValue,onClear:function(){return v.setValue("")}},null==g?void 0:g.id),(0,a.Y)(eZ,{error:v.error})]})]}),y.value===eC.ReplImage&&(0,a.FD)(e0,{active:S,showPlayButton:y.value===eC.ReplImage&&!!w.value&&!A.isLoading,children:[y.value===eC.ReplImage&&w.value?(0,a.Y)(np,{src:w.value,alt:"cover"}):null,A.isLoading?(0,a.Y)(L.S,{css:[{position:"absolute",inset:0},T.wp.align.center,T.wp.justify.center],children:(0,a.Y)(eS.A,{color:I.LU.white,size:24})}):null]})]}))},ng=t(70953),nv=function(){eF("iconUrl");var e=eT(),n=e.replIconInput,t=e.replIconUrl;return(0,a.FD)(L.S,{gap:16,align:"center",children:[(0,a.FD)(L.S,{gap:8,children:[(0,a.FD)(L.S,{row:!0,gap:8,children:[(0,a.Y)(nr,{onFile:function(e){return n.uploadImage(e,eX.VL.ReplIcon)},css:T.wp.backgroundColor.accentNegativeDefault,children:function(e){var n=e.onClick;return(0,a.Y)(ni.$n,{onClick:n,text:"Upload image",iconLeft:(0,a.Y)(nc.A,{}),css:[T.wp.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),n.error?(0,a.Y)(L.S,{children:(0,a.Y)(nl.N,{icon:(0,a.Y)(ej.A,{}),colorway:"negative",text:n.error,closable:!0,closeAction:n.clearError})}):null]}),(0,a.Y)(ew.Mn,{alt:"icon",size:84,iconUrl:t,isLoading:!!n.previewUrl,css:[T.wp.backgroundColor.backgroundHigher]})]})},nw=function(){return(0,a.Y)(L.S,{gap:8,children:(0,a.Y)(L.S,{children:(0,a.FD)(P.EY,{children:["See the"," ",(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,a.Y)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})},ny=t(96489),nb=t.n(ny),nS=t(35436),nY=t.n(nS),nA=t(16530),nC=t(19346),nx=t(43698),n_=(0,eO.x)({container:[T.wp.p(4),T.wp.flex.row,T.wp.maxWidth(100),T.wp.backgroundColor.backgroundDefault,T.wp.borderRadius(4),{aspectRatio:"1 / 1"}],root:[T.wp.flex.grow(1),T.wp.flex.row],stacked:[T.wp.flex.grow(1),T.wp.colWithGap(2),T.wp.justify.spaceEvenly],sideBySide:[T.wp.flex.grow(1),T.wp.rowWithGap(2)],paneGroup:[T.wp.p(2),T.wp.flex.grow(1),T.wp.backgroundColor.backgroundHigher,T.wp.center]});function nk(e){var n=e.layoutState,t=(0,nA._)(e,["layoutState"]);return(0,a.Y)(L.S,(0,i._)((0,r._)({css:n_.container},t),{children:(0,a.Y)(nD,{root:n.layout,paneData:n.data})}))}function nD(e){var n,t=e.root,r=e.paneData;return null==t.tiling?null:(0,a.Y)(L.S,{css:n_.root,children:(null===(n=t.tiling)||void 0===n?void 0:n.type)==="split"?(0,a.Y)(nE,{split:t.tiling,paneData:r,depth:1}):(0,a.Y)(nR,{group:t.tiling,paneData:r,depth:1})})}function nE(e){var n=e.split,t=e.paneData,r=e.depth;return r>2?(0,a.Y)(nI,{}):(0,a.Y)(L.S,{css:n.stacked?n_.stacked:n_.sideBySide,children:n.children.map(function(e){return"split"===e.type?(0,a.Y)(nE,{split:e,paneData:t,depth:r+1}):(0,a.Y)(nR,{group:e,paneData:t,depth:r+1})})})}function nR(e){var n=e.group,t=e.paneData,r=e.depth,i=t[n.panes[n.activeIndex]],o=(0,nC.Vv)(),l=o.Icon({pane:i,size:r>1?12:16}),s=o.getTitle(i);return(0,a.Y)(L.S,{css:n_.paneGroup,title:s,children:l})}function nI(){return(0,a.Y)(L.S,{css:n_.paneGroup,children:(0,a.Y)(nx.A,{})})}var nF=t(27189),nT=(0,eO.x)({layoutButton:[T.wp.borderRadius(4),T.wp.p(8),T.wp.border({width:1,color:I.LU.greyDimmer}),T.wp.backgroundColor.backgroundHigher,T.wp.cursor.pointer,{"&:hover":[T.wp.backgroundColor.backgroundHighest],'&[data-selected="true"]':[T.wp.backgroundColor.accentPrimaryDimmest,T.wp.border({color:I.LU.blueDimmer})],'&[data-selected="true"]:hover':[T.wp.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[T.wp.backgroundColor.backgroundDefault,T.wp.border({color:I.LU.greyDimmest}),T.wp.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[T.wp.rowWithGap(8),T.wp.justify.spaceBetween,T.wp.width("100%")],layoutButtonText:[T.wp.flex.growAndShrink(1),T.wp.flex.column,T.wp.justify.center],layoutButtonHeader:[T.wp.mb(4)],layoutPreview:[T.wp.width(80),T.wp.height(80),{alignSelf:"center"}]});function nP(e){var n,t=e.getCurrentLayoutState(),r=nb()(nY()(t,"sidebarPercent"),nY()(e.savedLayoutState,"sidebarPercent")),i=(n=(0,nC.Vv)(),(0,s.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var t=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?t.push.apply(t,(0,nF._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,nF._)(i.children))}return t.reverse().map(function(t){return n.getTitle(e.data[t])}).join(", ")},[n])),o=(0,s.useMemo)(function(){return i(e.savedLayoutState)},[i,e.savedLayoutState]),l=(0,s.useMemo)(function(){return i(t)},[t,i]);return(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.EY,{variant:"small",children:"Choose an initial workspace layout for new Apps using this template."}),(0,a.Y)(ey.ui,{css:nT.layoutButton,"data-selected":e.templateLayout.value===em.Default,onClick:function(){return e.templateLayout.setValue(em.Default)},children:(0,a.Y)(L.S,{css:nT.layoutButtonRow,children:(0,a.FD)(L.S,{css:nT.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nT.layoutButtonHeader,children:"Default layout"}),(0,a.Y)(P.EY,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,a.Y)(ey.ui,{css:nT.layoutButton,"data-selected":e.templateLayout.value===em.Saved,onClick:function(){return e.templateLayout.setValue(em.Saved)},children:(0,a.FD)(L.S,{css:nT.layoutButtonRow,children:[(0,a.FD)(L.S,{css:nT.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nT.layoutButtonHeader,children:"Saved layout"}),(0,a.Y)(P.EY,{variant:"small",children:o})]}),(0,a.Y)(nk,{css:nT.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,a.Y)(ey.ui,{css:nT.layoutButton,"data-selected":e.templateLayout.value===em.Current,"data-disabled":r,onClick:r?void 0:function(){return e.templateLayout.setValue(em.Current)},children:(0,a.FD)(L.S,{css:nT.layoutButtonRow,children:[(0,a.FD)(L.S,{css:nT.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nT.layoutButtonHeader,children:"Current layout"}),(0,a.Y)(P.EY,{variant:"small",children:r?"Same as saved layout":l})]}),(0,a.Y)(nk,{css:nT.layoutPreview,layoutState:t})]})})]})}function nL(e){var n=e.getCurrentLayoutState,t=eF("layout");return(0,a.Y)(L.S,{gap:8,children:null==n?(0,a.Y)(P.EY,{children:"Initial layouts may only be customized in the desktop environment."}):(0,a.Y)(nP,{templateLayout:t,getCurrentLayoutState:n})})}var nU=t(1987),nN=t(7942),nO=t(86848),nM=t(14480),nB=t(75877),nH=t(86330),nz=t(1953),nW=t(15143),nG=t(65599),nV=t(25688),nj=t(84761),nZ=t(72602),nq=t(27052),nK=(0,eO.x)({rootContainer:[(0,C._)({},(0,nV.wm)("tabletMin"),{display:"flex"}),T.wp.flex.growAndShrink(1),T.wp.p(16),T.wp.colWithGap(12),T.wp.align.center,T.wp.display.none],heading:[T.wp.width("100%"),{fontWeight:I.LU.fontWeightMedium}],contentContainer:[T.wp.width("100%"),T.wp.maxWidth(432),T.wp.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+I.LU.backgroundRoot+", inset 0 -48px 24px -24px "+I.LU.backgroundRoot},feed:[T.wp.height(416),T.wp.colWithGap(24),T.wp.justify.center,T.wp.overflow("hidden"),T.wp.backgroundColor.backgroundRoot],loadingContainer:[T.wp.flex.grow(1),T.wp.align.center,T.wp.justify.center]}),n$=L.D.form,nJ=function(e){var n=e.user,t=eT(),o=t.selectedRepl,l=t.replTitleField,s=t.replDescriptionField,c=t.replIconUrl;return(0,a.FD)(ey.ui,{background:"root",css:nK.rootContainer,children:[(0,a.Y)(P.EY,{multiline:!1,variant:"small",color:"dimmer",css:nK.heading,children:"Preview"}),(0,a.FD)(L.S,{css:nK.contentContainer,children:[(0,a.Y)(L.S,{css:nK.topShadow}),(0,a.FD)(L.S,{css:nK.feed,children:[(0,a.Y)(eV.v,{}),o&&c?(0,a.Y)(eV.A,{post:{user:n,repl:(0,i._)((0,r._)({},o),{title:l.value,iconUrl:c,description:s.value,isTemplate:!0})}}):(0,a.Y)(L.S,{css:nK.loadingContainer,children:(0,a.Y)(eS.A,{})}),(0,a.Y)(eV.v,{})]})]})]})},nQ=["Basics","Icon","Cover page","Layout","Publishing"],nX=(0,eO.x)({rootContainer:[T.wp.borderRadius(8),T.wp.flex.row,T.wp.overflow("hidden"),(0,C._)({},(0,nV.wm)("tabletMax"),{minWidth:850})],formContainer:[T.wp.p(16),T.wp.minWidth(320),T.wp.flex.growAndShrink(1),(0,C._)({},(0,nV.wm)("tabletMin"),{maxWidth:370})],form:[T.wp.colWithGap(16),T.wp.flex.growAndShrink(1)],formSectionsNavigation:[T.wp.flex.growAndShrink(1)],loadingContainer:[T.wp.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(I.LU.accentPrimaryDimmer," !important")}]});function n0(e){var n,t,i,l,c,d,p,f,m,g,v,w,b,S,Y,A,C,x,I,F,U,N,B,H=e.replId,z=e.currentUser,W=e.source,G=e.getDesktopLayoutState,V=(n=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:if(!eO)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,eO.stat(e)];case 2:if(!(n=t.sent()).exists||n.type!==D.pt.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return t.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),Z=(0,R.a)({tablet:!0}),Q=(0,E._P)({type:"boolean",controlName:"flag-template-layout-author"}),X=!Z&&Q&&null!=G,ee=function(e){var n,t,i,a,l,c,d,p,f=(n={variables:{id:e.replId}},t=(0,r._)({},q,n),j.I(K,t)),m=(null===(i=f.data)||void 0===i?void 0:i.repl.__typename)==="Repl"?f.data.repl:null,g=!!(null==m?void 0:m.publishedAs),v=(0,$.W)("",eE),w=(0,$.W)("",eR),b=(0,$.W)(null,function(){return null}),S=(0,$.W)("repl_image",function(){return null}),Y=(0,$.W)(null,function(){return null}),A=(0,$.W)("",e.fileValidator),C=(0,$.W)(em.Default,function(){}),x=[v,w,b,S,Y,A,C],D=function(){var e,n=(0,o._)((e=(0,r._)({},es,void 0),J.n(ec,e)),2),t=n[0],i=n[1];function a(){return(a=(0,_._)(function(e){var n;return(0,k.YH)(this,function(r){switch(r.label){case 0:if(i.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:(n=r.sent()).data,error:eu(n)}];case 3:return r.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:eu(i),setReplViewSettings:function(e){return a.apply(this,arguments)}}}(),E=function(){var e,n=(0,o._)((e=(0,r._)({},ep,void 0),J.n(ef,e)),2),t=n[0],i=n[1];function a(){return(a=(0,_._)(function(e){return(0,k.YH)(this,function(n){switch(n.label){case 0:if(i.loading)return[2,{data:null,error:null}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:n.sent().data,error:null}];case 3:return[2,{data:null,error:eh(n.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:i.error&&eh(i.error),updateRepl:function(e){return a.apply(this,arguments)}}}(),R=ea(),I=(null==m?void 0:null===(a=m.replViewSettings)||void 0===a?void 0:a.defaultView)&&ex(m.replViewSettings.defaultView)?m.replViewSettings.defaultView:"repl_image",F=(0,h.A)(v.setValue),T=(0,h.A)(w.setValue),P=(0,h.A)(b.setValue),L=(0,h.A)(Y.setValue),U=(0,h.A)(S.setValue),N=(0,h.A)(A.setValue);(0,s.useEffect)(function(){var e,n,t,r;m&&(U.current(I),N.current(null!==(n=null===(e=m.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==n?n:""),F.current(m.isRenamed?m.title:"",{preventTouch:!0}),T.current(null!==(t=m.description)&&void 0!==t?t:"",{preventTouch:!0}),P.current(m.iconUrl.endsWith(".svg")?null:m.iconUrl),L.current(null!==(r=m.imageUrl)&&void 0!==r?r:null))},[m,L,P,F,T,I,U,N]);var O=eA(b.setValue),M=O.previewUrl||b.value||(null==m?void 0:m.iconUrl)||(null==m?void 0:m.templateInfo.iconUrl),B=null!==(p=null===(d=x.filter(function(e){return(e!==A||"repl_file"===S.value)&&e.error}))||void 0===d?void 0:null===(c=d[0])||void 0===c?void 0:null===(l=c.error)||void 0===l?void 0:l.message)&&void 0!==p?p:null;function H(){return(H=(0,_._)(function(){var e,n,t,r,i,o,a,l,s;return(0,k.YH)(this,function(c){switch(c.label){case 0:if(!m)throw new e_("Missing repl");if(n=m.title!==v.value,t=m.description!==w.value,r=m.iconUrl!==b.value,i="repl_image"===S.value&&m.imageUrl!==Y.value,o=A.value&&"repl_file"===S.value&&(null===(e=m.replViewSettings)||void 0===e?void 0:e.replFile)!==A.value,a=S.value&&I!==S.value,!(n||t||r))return[3,2];if(v.error||w.error||b.error)throw new e_;return[4,E.updateRepl({id:m.id,title:n?v.value:void 0,description:t?w.value:void 0,iconUrl:r?b.value:void 0})];case 1:if((l=c.sent()).error)throw new ek(l.error);c.label=2;case 2:if(!(a||i||o))return[3,4];if("repl_image"===S.value&&Y.error||"repl_file"===S.value&&A.error)throw new e_;return[4,D.setReplViewSettings({replId:m.id,defaultView:"repl_image"===S.value?u.Qj.ReplImage:u.Qj.ReplFile,replImage:i?Y.value:void 0,replFile:o?A.value:void 0})];case 3:if((s=c.sent()).error)throw new ek(s.error);c.label=4;case 4:return[2]}})})).apply(this,arguments)}function z(){return(z=(0,_._)(function(){var n,t,r;return(0,k.YH)(this,function(i){switch(i.label){case 0:if(!m)throw new e_("Missing repl");if(B)throw new e_(null!=B?B:"Something went wrong");return n=null,e.canAuthorTemplateLayout&&C.value===em.Current&&(n=null===(t=e.getDesktopLayoutState)||void 0===t?void 0:t.call(e)),[4,R.createDeployment({input:{replId:m.id,description:w.value,iconUrl:M||m.iconUrl,initialLayoutState:n}})];case 1:if((r=i.sent()).error)throw new eD(r.error);return(0,y.u4)(y.AZ.POST_MADE,{source:e.source,replType:"template_repl",title:v.value,description:w.value,defaultView:S.value}),[2]}})})).apply(this,arguments)}var W=E.loading||D.loading,G=E.error||D.error,V=R.loading,Z=R.error;return{selectedRepl:m,isReplLoading:f.loading,replLoadingError:f.error,replTitleField:v,replDescriptionField:w,iconUrlField:b,coverDefaultViewField:S,coverUrlField:Y,coverFileField:A,layoutField:C,replIconInput:O,replIconUrl:M,inputError:B,save:function(){return H.apply(this,arguments)},isSaving:W,savingError:G,publishInitialRelease:function(){return z.apply(this,arguments)},isPublishing:V,publishingError:Z,isPublished:g}}({replId:H,fileValidator:V,source:W,canAuthorTemplateLayout:X,getDesktopLayoutState:G}),en=ee.selectedRepl,et=ee.isReplLoading,er=ee.replLoadingError,ei=ee.replTitleField,eo=ee.replDescriptionField,el=ee.iconUrlField,ed=ee.coverDefaultViewField,eg=ee.coverUrlField,ev=ee.coverFileField,ew=ee.layoutField,eb=ee.save,eY=ee.isSaving,eF=ee.savingError,eT=ee.publishInitialRelease,eP=ee.isPublishing,eL=ee.publishingError,eU=ee.isPublished,eN=(i=(t={repl:en,currentUser:z}).repl,l=t.currentUser,d=(c=(0,o._)((0,nz.eY)(),2))[0],p=c[1],f=(0,nz.ZM)(),g=(m=(0,o._)((0,s.useState)(function(){var e,n,t;return e=(0,nN.Ay)({onUnrecoverableError:(0,nH.A)({throwBsod:p,origin:"Publish: services/onUnrecoverableError"})}),n=(0,nB.A)({container:e}),t=(0,nU.A)({container:e,fs:n}),{container:e,fs:n,dotReplit:t}}),1)[0]).container,v=m.fs,w=m.dotReplit,S=(b=(0,o._)((0,s.useState)(function(){return g.getConnectionState()===nN.KN.CONNECTED}),2))[0],Y=b[1],A=(0,nO.$)(i?{repl:i,currentUser:l}:null),C=(0,nM.L)(),(0,s.useEffect)(function(){if(i&&A&&g.getConnectionState()===nN.KN.DISCONNECTED)return g.connect({context:A,getMinimumRetryDelayMs:C}),function(){return g.close()}},[i,g,A]),(0,s.useEffect)(function(){return g.onConnectionStateChanged(function(e){Y(e===nN.KN.CONNECTED)})},[g]),{isConnected:S,container:g,fs:v,dotReplit:w,bsodId:null==d?void 0:d.eventId,devClearBsod:function(){return f()}}),eO=eN.fs,eM=eN.dotReplit,eB=eN.bsodId,eH=X&&!eU?[]:["Layout"],ez=(0,o._)((0,s.useState)(0),2),eW=ez[0],eV=ez[1],eZ=nQ[eW],eq=eW===nQ.length-1,eK=(0,o._)((0,s.useState)({show:!1,isUpdate:!1}),2),e$=eK[0],eJ=eK[1],eX=(0,o._)((0,s.useState)(function(){return Array(nQ.length).fill(!1)}),2),e0=eX[0],e1=eX[1],e2=(0,s.useCallback)(function(e,n){e0[e]=n,e1(e0)},[e0]);(0,s.useEffect)(function(){ee.replTitleField.value&&ee.replDescriptionField.value?e2(0,!0):e2(0,!1),ee.iconUrlField.value?e2(2,!0):e2(2,!1),ee.coverDefaultViewField.value===eC.ReplImage&&ee.coverUrlField.value||ee.coverDefaultViewField.value===eC.ReplFile&&ee.coverFileField.value?e2(3,!0):e2(3,!1)},[e0,ee,e2]);var e5=(I=(x=(0,o._)((0,s.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],F=x[1],(0,s.useEffect)(function(){function e(){return(e=(0,_._)(function(){var e,n,t;return(0,k.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eM.getConfig()];case 1:if((n=r.sent()).error)throw Error(n.errorMessage);return F({isLoading:!1,error:null,entryPoint:null!==(t=null==n?void 0:null===(e=n.config)||void 0===e?void 0:e.entrypoint)&&void 0!==t?t:null}),[3,3];case 2:return r.sent(),F({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eM]),(0,r._)({},I));(0,s.useEffect)(function(){e5.isLoading||!e5.entryPoint||ev.value||ev.setValue(e5.entryPoint)},[e5.isLoading,e5.entryPoint,ev]);var e4=(0,o._)((0,s.useState)(!1),2),e3=e4[0],e8=e4[1];(0,s.useEffect)(function(){e3||H&&(et||eU)||(e8(!0),(0,y.u4)(y.AZ.PUBLISH_SELECTED,{source:W}))},[e3,W,H,et,eU]);var e7=(0,h.A)(!!(null==en?void 0:en.publishedAs)),e6=(0,h.A)(eZ);if((0,s.useEffect)(function(){return function(){e7.current||(0,y.u4)(y.AZ.PUBLISH_FLOW_EXITED,{source:W,lastSectionVisited:e6.current})}},[W,e7,e6]),eB)return(0,a.Y)(nW.A,{});if(e$.show&&en)return(0,a.Y)(eG,{repl:en});var e9={Basics:{hasError:!!(ei.error||eo.error),isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.all([ei.validate(),eo.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Icon:{hasError:!!el.error,isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:return[4,el.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(ed.value===eC.ReplImage?eg.error:ev.error),isValid:(0,_._)(function(){var e;return(0,k.YH)(this,function(n){switch(n.label){case 0:if(ed.value!==eC.ReplImage)return[3,2];return[4,eg.validate()];case 1:return e=!n.sent(),[3,4];case 2:return[4,ev.validate()];case 3:e=!n.sent(),n.label=4;case 4:return[2,e]}})})},Layout:{hasError:!!ew.error,isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:return[4,ew.validate()];case 1:return[2,!e.sent()]}})})},Publishing:{hasError:!1,isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){return[2,!0]})})}},ne=e9[eZ].hasError,nn=e9[eZ].isValid,nt=null!==(B=nQ.find(function(e){return e9[e].hasError}))&&void 0!==B?B:null,nr=null;en?er||eF||eL?nr="Something went wrong - please try again":ne&&(nr="Please fill out the the form"):nr="Please select a Repl";var no=!!(!en||ne||er||et||eY||eP),na=(U=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:if(n=no)return[3,2];return[4,nn()];case 1:n=!t.sent(),t.label=2;case 2:if(n)return[2];if(!eH.includes(nQ[e]))return[3,4];return[4,na(e+1)];case 3:case 6:return t.sent(),[2];case 4:return t.trys.push([4,6,,7]),eV(e),[4,eb()];case 5:return t.sent(),[3,7];case 7:return[2]}})}),function(e){return U.apply(this,arguments)}),ns=eW>0;return(0,a.Y)(eI.Provider,{value:ee,children:(0,a.FD)(ey.ui,{css:nX.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,a.FD)(L.S,{css:nX.formContainer,gap:12,children:[(0,a.Y)(P.EY,{variant:"subheadBig",multiline:!1,children:eU?"Edit publish settings":"Publish template"}),(0,a.FD)(n$,{onSubmit:(N=(0,_._)(function(e){var n,t,r,i,o,a;return(0,k.YH)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),!eq)return[3,13];n=!0,t=!1,r=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=nQ[Symbol.iterator](),l.label=2;case 2:if(n=(o=i.next()).done)return[3,5];return[4,e9[o.value].isValid()];case 3:if(!l.sent())return[2];l.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,r=a,[3,8];case 7:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 8:if(eU)return[3,10];return[4,eT()];case 9:return l.sent(),eJ({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eb()];case 11:l.sent(),eJ({show:!0,isUpdate:!0}),l.label=12;case 12:return[3,14];case 13:na(eW+1),l.label=14;case 14:return[2]}})}),function(e){return N.apply(this,arguments)}),css:nX.form,children:[(0,a.Y)(L.S,{row:!0,gap:4,align:"center",children:nQ.map(function(e,n){return eH.includes(e)?null:(0,a.FD)(s.Fragment,{children:[0!==n&&(0,a.Y)(O,{}),(0,a.Y)(M,{isActive:eW===n,isComplete:e0[n],onClick:function(){return na(n)},disabled:no,children:e})]},e)})}),(0,a.FD)(L.S,{css:nX.formSectionsNavigation,children:["Basics"===eZ&&(0,a.Y)(eQ,{}),"Icon"===eZ&&(0,a.Y)(nv,{}),"Cover page"===eZ&&(0,a.Y)(nm,{fs:eO}),"Layout"===eZ&&(0,a.Y)(nL,{getCurrentLayoutState:G}),"Publishing"===eZ&&(0,a.Y)(nw,{})]}),(0,a.FD)(L.S,{children:[eq&&nt&&nt!==eZ?(0,a.Y)(nl.N,{colorway:"negative",icon:(0,a.Y)(ej.A,{}),text:"Please fix error in ".concat(nt," section")}):null,eF?(0,a.Y)(nl.N,{colorway:"negative",icon:(0,a.Y)(ej.A,{}),text:eF}):null,eL?(0,a.Y)(nl.N,{colorway:"negative",icon:(0,a.Y)(ej.A,{}),text:eL}):null]}),(0,a.FD)(L.S,{css:[ns?T.wp.justify.spaceBetween:T.wp.justify.end],row:!0,gap:8,align:"center",children:[ns?(0,a.Y)(ni.$n,{type:"button",iconLeft:(0,a.Y)(nj.A,{}),disabled:no,onClick:function(){return na(eW-1)},text:"Back"}):null,eY?(0,a.Y)(L.S,{css:nX.loadingContainer,row:!0,gap:4,children:(0,a.Y)(eS.A,{})}):null,(0,a.FD)(nG.m_,{tooltip:nr,placement:"bottom",isDisabled:!nr,children:[!eq&&(0,a.Y)(ni.$n,{type:"submit",colorway:"primary",iconLeft:(0,a.Y)(nZ.A,{}),disabled:no,text:"Next",dataCy:"publish-form-next-button"}),eq&&!eU?(0,a.Y)(ni.$n,{type:"submit",colorway:"primary",css:nX.submitButton,iconLeft:eP?(0,a.Y)(eS.A,{}):(0,a.Y)(nq.A,{}),disabled:!!(no||nt),text:"Submit",dataCy:"publish-form-publish-button"}):null,eq&&eU?(0,a.Y)(ni.$n,{type:"submit",colorway:"primary",iconLeft:eP?(0,a.Y)(eS.A,{}):(0,a.Y)(nq.A,{}),disabled:!!(no||nt),text:"Save"}):null]})]})]})]}),(0,a.Y)(nJ,{user:z})]})})}var n1=(0,eO.x)({loadingContainer:[T.wp.center,T.wp.p(32),T.wp.width(512),(0,C._)({},"@media (max-width: ".concat(eN.LO.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[T.wp.center,T.wp.p(32)]});function n2(e){var n,t,r=e.replId,i=e.source,o=e.getDesktopLayoutState,l=(0,x.Df)(),s=(null===(t=l.data)||void 0===t?void 0:null===(n=t.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"?l.data.currentUser:null;return l.loading?(0,a.Y)(L.S,{css:n1.loadingContainer,children:(0,a.Y)(eS.A,{})}):l.error||!s?(0,a.Y)(L.S,{css:n1.errorContainer,children:(0,a.Y)(P.EY,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.Y)(n0,{source:i,replId:r,currentUser:s,getDesktopLayoutState:o})}var n5=t(89401),n4=t(14178);function n3(){var e=(0,G._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return n3=function(){return e},e}var n8={},n7=(0,V.J1)(n3());function n6(){var e=(0,G._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return n6=function(){return e},e}var n9={},te=(0,V.J1)(n6()),tn=t(47303),tt=t(72700),tr=L.D.form;function ti(e){if(0===e.length)return{message:"You cannot leave this empty."}}function to(e){var n,t,r=e.changeType;return r===u.qZ.NewFile?(n=I.LU.accentPositiveStronger,t="Added"):r===u.qZ.DeletedFile?(n=I.LU.accentNegativeStronger,t="Deleted"):(n=I.LU.foregroundDefault,t="Changed"),(0,a.Y)(P.EY,{variant:"small",css:[{color:n}],multiline:!1,children:t})}var ta=(0,eO.x)({loadingContainer:[T.wp.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:I.LU.space8}]});function tl(e){var n=e.pendingChangesState,t=e.isReplitTemplate;if(n.loading)return(0,a.Y)(L.S,{css:ta.loadingContainer,children:(0,a.Y)(eS.A,{})});if(n.error)return(0,a.Y)(nl.N,{icon:(0,a.Y)(ej.A,{}),text:n.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!n.pendingChanges||0===n.pendingChanges.length)return t?null:(0,a.Y)(P.EY,{children:"No file changes to publish."});var r=n.pendingChanges,i=r.slice(0,15);return(0,a.FD)(L.S,{css:ta.container,children:[i.map(function(e){return(0,a.FD)(s.Fragment,{children:[(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(tt.A,{size:12,path:e.fileName}),(0,a.Y)(P.EY,{multiline:!1,children:e.fileName})]},e.fileName),(0,a.Y)(to,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,a.FD)(P.EY,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}var ts=(0,eO.x)({header:[T.wp.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:I.LU.space8}],activeLabel:[T.wp.p(4),{display:"flex"}]});function tc(e){var n,t=e.repl,i=function(){var e,n,t=(0,o._)((e={refetchQueries:["ReplEnvironmentHeader"]},n=(0,r._)({},n8,e),J.n(n7,n)),2),i=t[0];function a(){return(a=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:return[4,i({variables:{input:e.input}})];case 1:return[2,{data:(n=t.sent()).data,error:function(e){if(!e.data)return null;var n=e.data;if("revertReplRelease"in n){if("NotFoundError"===n.revertReplRelease.__typename||"UnauthorizedError"===n.revertReplRelease.__typename||"UserError"===n.revertReplRelease.__typename)return n.revertReplRelease.message;if("Repl"!==n.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(n)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return a.apply(this,arguments)},state:t[1]}}(),l=(n=(0,_._)(function(e){return(0,k.YH)(this,function(n){switch(n.label){case 0:return[4,i.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)});return(0,a.FD)(L.S,{children:[(0,a.Y)(P.Y9,{level:1,variant:"subheadBig",css:ts.header,children:"Existing Releases"}),(0,a.Y)(L.S,{css:ts.grid,children:t.releases.items.map(function(e){var n,r;return(0,a.FD)(s.Fragment,{children:[(0,a.Y)("span",{children:(0,n5.A)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,a.Y)("span",{children:e.description}),(0,a.Y)("span",{style:{justifySelf:"end"},children:e.id===(null===(r=t.deployment)||void 0===r?void 0:null===(n=r.activeRelease)||void 0===n?void 0:n.id)?(0,a.Y)("span",{css:ts.activeLabel,children:"(active)"}):(0,a.Y)(ni.$n,{text:"revert",colorway:"primary",size:"small",onClick:function(){l(e.id)}})})]},e.id)})})]})}var tu=(0,eO.x)({container:[T.wp.colWithGap(24),T.wp.p(16)],descriptionLabel:[T.wp.color.foregroundDimmer,{fontSize:I.LU.fontSizeSmall,lineHeight:I.LU.lineHeightSmall}],descriptionInput:[T.wp.width("100%"),T.wp.minHeight(64),T.wp.maxHeight(128),{resize:"vertical"}],existingReleasesContainer:[T.wp.p(16),T.wp.colWithGap(16)]});function td(e){var n,t,l,c,u,d,p,f,h,m,g,v,w=e.repl,y=e.getDesktopLayoutState,b=(0,eq.c)(),S=(0,o._)((0,s.useState)(!1),2),Y=S[0],A=S[1],x=(0,o._)((0,s.useState)(!1),2),D=x[0],I=x[1],F=(c=function(e){var n,t,i,o,a=(i={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},o=(0,r._)({},n9,i),j.I(te,o)),l=a.data,s=a.loading,c=a.error;if(s)return{loading:s,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var u=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return u?{loading:!1,pendingChanges:(null===(t=u.deployment)||void 0===t?void 0:null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:w.id}.replId}),u=(0,s.useMemo)(function(){return c.pendingChanges?c.pendingChanges.slice().sort(function(e,n){return e.fileName.localeCompare(n.fileName)}).map(function(e){return{file:e,pathDepth:(0,e2.jP)(e.fileName)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file}):[]},[c.pendingChanges]),(0,i._)((0,r._)({},c),{pendingChanges:u})),T=ea(),U=(0,$.W)("",ti),N=(null===(p=F.pendingChanges)||void 0===p?void 0:p.length)!==0,O=(null===(f=w.user)||void 0===f?void 0:f.username)===n4.GA||(null===(h=w.user)||void 0===h?void 0:h.username)==="templates",M=(0,o._)((0,s.useState)({ran:!1,tested:!1}),2),B=M[0],H=M[1],z=(0,R.a)({tablet:!0}),W=(0,E._P)({type:"boolean",controlName:"flag-template-layout-author"}),G=!z&&W&&null!=y,V=(0,o._)((t=(n=(0,o._)((0,s.useState)(w.releases.items[0]),2))[0],l=n[1],(0,s.useEffect)(function(){w.releases.items.length>0&&l(w.releases.items.slice().sort()[0])},[w.releases.items]),[t,l]),2),Z=V[0],q=V[1],K=(null==Z?void 0:Z.initialLayoutState)!=null,J=(0,$.W)(K?em.Saved:em.Default,function(){}),Q=K?J.value!==em.Saved:J.value!==em.Default,X=N||Q;(0,s.useEffect)(function(){H({ran:!1,tested:!1})},[H]);var ee=!!(U.error||T.loading||!O&&!X||O&&(!B.ran||!B.tested)),en=O&&(null===(g=w.releases)||void 0===g?void 0:null===(m=g.items)||void 0===m?void 0:m.length)>1,et="";return(U.error?et="Please fill out the form":O||X||(et="No file or layout changes to publish in this release"),Y)?(0,a.Y)(eG,{repl:w}):D?(0,a.Y)(L.S,{css:tu.existingReleasesContainer,children:(0,a.Y)(tc,{repl:w})}):(0,a.FD)(tr,{onSubmit:(d=(0,_._)(function(e){var n,t,r,i;return(0,k.YH)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),ee||U.validate())return[2];return t=null,G&&(J.value===em.Current?t=y():J.value===em.Saved&&K&&(t=null==Z?void 0:Z.initialLayoutState)),[4,T.createRelease({input:{replId:w.id,description:U.value,initialLayoutState:t}})];case 1:if((r=o.sent()).error)return[2];return A(!0),(null===(n=r.data)||void 0===n?void 0:n.createReplRelease.__typename)==="Repl"&&(q(i=r.data.createReplRelease.releases.items.slice().sort()[0]),J.setValue((null==i?void 0:i.initialLayoutState)!=null?em.Saved:em.Default)),[2]}})}),function(e){return d.apply(this,arguments)}),css:tu.container,children:[(0,a.Y)(P.Y9,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,a.Y)(tl,{pendingChangesState:F,isReplitTemplate:O})]}),G?(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,a.Y)(nP,{getCurrentLayoutState:y,savedLayoutState:null==Z?void 0:Z.initialLayoutState,templateLayout:J})]}):null,O||X?(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:b("description"),css:tu.descriptionLabel,children:"Description"}),(0,a.Y)(eK.ov,{id:b("description"),"aria-label":"Description",onChange:function(e){return U.setValue(e.target.value)},css:tu.descriptionInput,placeholder:"Explain what has changed about your template"}),U.error?(0,a.Y)(nl.N,{icon:(0,a.Y)(ej.A,{}),text:null===(v=U.error)||void 0===v?void 0:v.message,colorway:"negative"}):null]}):null,O?(0,a.Y)(tf,{repl:w,state:B,onChange:function(e,n){return H(function(t){return(0,i._)((0,r._)({},t),(0,C._)({},e,n))})}}):null,(0,a.Y)(L.S,{children:T.error?(0,a.Y)(nl.N,{icon:(0,a.Y)(ej.A,{}),text:T.error,colorway:"negative"}):null}),(0,a.FD)(L.S,{row:!0,gap:12,justify:"end",children:[en?(0,a.Y)(ni.$n,{text:"Revert to older",colorway:"negative",onClick:function(){return I(!0)}}):null,(0,a.Y)(nG.m_,{tooltip:et,placement:"bottom",isDisabled:!et,children:(0,a.Y)(ni.$n,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,a.Y)(nq.A,{}),disabled:ee})})]})]})}var tp=(0,eO.x)({row:[T.wp.py(2)]});function tf(e){var n,t,r,i=e.repl,o=e.state,l=e.onChange,s=(0,eq.c)(),c=(0,Q.OI)(),u=c.data,d=c.loading,p=null==u?void 0:null===(n=u.currentUser)||void 0===n?void 0:n.username;return(0,a.FD)(L.S,{gap:12,children:[(0,a.Y)(P.Y9,{level:2,children:"Official Replit Template publishing checklist"}),(0,a.FD)(L.S,{children:[(0,a.FD)(th,{children:[(0,a.Y)(tn.S,{id:s("ran"),checked:o.ran,onChange:function(e){return l("ran",e)}}),(0,a.Y)("label",{htmlFor:s("ran"),children:"Ran Repl:"}),(0,a.FD)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,a.Y)("code",{children:".upm"}),"."]})]}),(0,a.FD)(th,{children:[(0,a.Y)(tn.S,{id:s("tested"),checked:o.tested,onChange:function(e){return l("tested",e)}}),(0,a.Y)("label",{htmlFor:s("tested"),children:"Ran tests:"}),(0,a.FD)("span",{children:['I ran "Test working copy" for @',null===(t=i.user)||void 0===t?void 0:t.username,"/",i.slug," in"," ",(0,a.Y)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,a.Y)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null===(r=i.user)||void 0===r?void 0:r.username)!==p?null:(0,a.Y)(nl.N,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function th(e){var n=e.children;return(0,a.Y)(L.S,{css:tp.row,row:!0,gap:8,children:n})}var tm=t(36741),tg=t(36935),tv=t(40500),tw=t(20521),ty=t(18466),tb=t(88323),tS=t(85736),tY=t(80475),tA=t(38943),tC=t(24481),tx=t(83527),t_=t(77660),tk=t(11822),tD=t(64251),tE=(0,eO.x)({dialog:[T.wp.py(2),T.wp.colWithGap(16)],reachOut:[T.wp.pt(16),T.wp.px(16),T.wp.border({direction:"top",color:I.LU.outlineDimmest}),{marginInline:-16}]}),tR=function(e){var n,t,r,i,l,c,d,p,f,v,w,y,b,S=e.repl,Y=e.org,A=e.onRequestClose,C=e.onForkSeparately,x=(0,m.A)().showError,E=Y.id,R=(0,o._)((0,tA.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){A()},onError:function(){x("Error creating remixed app - please try again")}}),2),I=R[0],F=R[1].loading,T=(0,o._)((n=function(){var e,n,t;I({originId:S.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(t=null===(n=S.deployment)||void 0===n?void 0:null===(e=n.activeRelease)||void 0===e?void 0:e.id)&&void 0!==t?t:void 0,orgId:E,trackingData:{forkSource:"projectDialog",isOnboarding:!1,isApp:S.publishedAs===u.Q_.App,isTemplate:S.publishedAs===u.Q_.Template}})},r=(t=(0,tC.A)()).git,i=t.fs,c=(l=(0,o._)((0,s.useState)({loading:!1,error:null,success:!1}),2))[0],d=l[1],p=(0,g.A)(),f=(0,o._)((0,tS.H3)({}),1)[0],v=(0,h.A)(n),w=(0,o._)((0,tS.NP)(),1)[0],[(0,s.useCallback)((y=(0,_._)(function(e){var n,t,o,a,l,s,c,u;return(0,k.YH)(this,function(h){switch(h.label){case 0:d({loading:!0,error:null,success:!1}),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,w({variables:{id:p},fetchPolicy:"no-cache"})];case 2:if(!(t=h.sent().data)||"Repl"!==t.getRepl.__typename)throw Error("Please try again");if(null===(n=t.getRepl.project)||void 0===n?void 0:n.id)throw Error("This App is already part of a project");return[3,4];case 3:return d({loading:!1,error:"message"in(o=h.sent())?o.message:"Please try again",success:!1}),[2];case 4:return[4,r.init({includeAllInitialFiles:!0,initialCommit:!0})];case 5:if(!(a=h.sent()).error)return[3,11];if(a.error!==tY.uA.ALREADY_INITIALIZED)return[3,10];return[4,r.getRepositoryState()];case 6:if((l=h.sent()).error)return d({loading:!1,error:"Could not create Project - please try again",success:!1}),[2];if(!(l.state!==tY.Gi.CLEAN))return[3,9];return[4,r.stageFiles({all:!0})];case 7:return h.sent(),[4,r.commit({message:"Initial project commit",allowEmpty:!1})];case 8:h.sent().error&&d({loading:!1,error:"Could not generate initial commit to create Project",success:!1}),h.label=9;case 9:return[3,11];case 10:return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];case 11:return[4,(0,t_.x)(r)];case 12:return h.sent().error&&d({loading:!1,error:"Could not create Project, please try again",success:!1}),[4,i.flush()];case 13:return h.sent(),[4,i.persist({skipDebounce:!0})];case 14:if((s=h.sent()).error||!s.success)return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];return[4,new Promise(function(e){if(i.getStatus()===D.sn.Clean){e();return}i.onStatusChange(function(n){if(n===D.sn.Clean){e();return}})})];case 15:h.sent(),h.label=16;case 16:return h.trys.push([16,18,,19]),[4,f({variables:{input:{mainReplId:p,orgId:e}}})];case 17:if((u=h.sent()).errors||!(null===(c=u.data)||void 0===c?void 0:c.createProject))throw Error("Could not create project");if("Project"!==u.data.createProject.__typename)throw Error(u.data.createProject.message);return[3,19];case 18:return d({loading:!1,error:h.sent().message,success:!1}),[2];case 19:return d({loading:!1,error:null,success:!0}),v.current(),[2]}})}),function(e){return y.apply(this,arguments)}),[r,i,p,f,v,w]),c]),2),U=T[0],N=T[1],O=(b=(0,_._)(function(){return(0,k.YH)(this,function(e){return N.loading||U(E),[2]})}),function(){return b.apply(this,arguments)});return(0,a.FD)(tk.lV,{css:tE.dialog,onSubmit:function(e){e.preventDefault(),O()},children:[(0,a.Y)(P.Y9,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this App?"}),(0,a.Y)(tx.I,{}),(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.EY,{children:"Consider starting a Project  a set of connected Apps for better collaborative development and versioning. Within a Project, you can:"}),(0,a.Y)(tD.s,{children:(0,a.FD)("ul",{children:[(0,a.Y)("li",{children:"Remix an App to work on a feature in isolation, and merge back when ready"}),(0,a.Y)("li",{children:"View all ongoing development in one place"}),(0,a.FD)("li",{children:["Share secrets and configuration between remixed apps"," ",(0,a.Y)(P.EY,{color:"dimmest",children:"(coming soon)"})]})]})})]}),N.error?(0,a.Y)(nl.N,{colorway:"negative",icon:(0,a.Y)(ej.A,{}),text:N.error}):null,(0,a.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,a.Y)(ni.$n,{loading:N.loading||F,text:"Remix separately",onClick:function(){A(),C()}}),(0,a.Y)(ni.$n,{loading:N.loading||F,text:"Remix & start a Project",colorway:"primary",type:"submit"})]}),(0,a.Y)(L.S,{css:tE.reachOut,children:(0,a.FD)(P.EY,{color:"dimmest",children:["If you have questions or feedback, reach out to"," ",(0,a.Y)("a",{href:"mailto:teams@replit.com",children:"teams@replit.com"})]})})]})},tI=t(2807),tF=function(e){return e.DeleteRepl="DeleteRepl",e.TransferRepl="TransferRepl",e.PowerUp="PowerUp",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishedTemplateSettings="EditPublishedTemplateSettings",e.PublishTemplate="PublishTemplate",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.Share="Share",e.FeatureRepl="FeatureRepl",e}({}),tT=t(81243),tP=t(37535),tL=t(78563),tU=t(41760),tN=t(62484),tO=(0,e5.i7)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),tM=(0,e5.AH)([T.wp.position.relative,T.wp.cursor.pointer,T.wp.backgroundColor.backgroundHigher,T.wp.borderRadius(4),T.wp.p(2),{input:[T.wp.position.absolute,T.wp.top(0),T.wp.left(0),T.wp.width("100%"),T.wp.height("100%"),T.wp.zIndex(-1),{opacity:0}]}]),tB=(0,e5.AH)([T.wp.color.accentPrimaryDefault,T.wp.position.absolute,T.wp.top(0),T.wp.left(0),T.wp.width("100%"),T.wp.height("100%"),T.wp.borderRadius(4),T.wp.backgroundColor.backgroundRoot,T.wp.overflow("hidden"),T.wp.display.flex,T.wp.align.center,T.wp.justify.center]),tH=(0,eO.x)({addIcon:[tM,T.wp.display.flex,T.wp.align.center,T.wp.justify.center,T.wp.border({width:1,color:I.LU.foregroundDimmest}),T.wp.backgroundColor.backgroundRoot,{"&:hover":[T.wp.color.accentPrimaryDefault,{borderColor:I.LU.accentPrimaryDefault}]}],updateIcon:[tM,{"&:hover .hover-state":{opacity:.8}}],hoverState:[tB,{opacity:0}],loadingState:[tB,{opacity:.8}],loadingIcon:[T.wp.display.flex,T.wp.align.center,T.wp.justify.center,{animation:"".concat(tO," 1s linear infinite")}],error:[{fontSize:I.LU.fontSizeDefault,color:I.LU.accentNegativeDefault}]});function tz(e){var n=(0,s.useRef)(null),t=(0,o._)((0,s.useState)(e.value),2),r=t[0],i=t[1],l=(0,o._)((0,s.useState)(null),2),c=l[0],u=l[1],d=(0,eg.A)({onUpload:function(n){var t=n.url;e.onChange(t)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){u(e.message)}});(0,s.useEffect)(function(){i(e.value)},[e.value]);var p=null==r?void 0:r.startsWith("data:");return(0,a.FD)(tU.T,{spacing:4,children:[(0,a.FD)("div",{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},css:r?tH.updateIcon:tH.addIcon,"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[r?(0,a.FD)(a.FK,{children:[(0,a.Y)(tN.A,{iconUrl:r,size:32,alt:"icon"}),p?(0,a.Y)("div",{css:tH.loadingState,children:(0,a.Y)("div",{css:tH.loadingIcon,children:(0,a.Y)(eS.A,{})})}):(0,a.Y)("div",{css:tH.hoverState,className:"hover-state",children:(0,a.Y)(eb.A,{})})]}):(0,a.Y)(eY.A,{size:32}),(0,a.Y)("input",{ref:n,accept:ev.DA.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&(null==r?void 0:r.length)&&(u(null),d.uploadImage(r[0],eX.VL.TemplateIcon))}})]}),c?(0,a.Y)("div",{css:tH.error,children:c}):null]})}var tW=t(40904),tG=t(98335),tV=t(8235),tj=t(85213),tZ=t(73128),tq=t(36541),tK=t(78832),t$=t(84659);function tJ(e){var n=e.repl,t=(0,f.A)(),o=(0,s.useMemo)(function(){if(n.org){var e;return{text:n.org.name,css:[{"&, & span":T.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(tT.e,{src:null!==(e=n.org.image)&&void 0!==e?e:null,username:n.org.name,fullName:n.org.name,size:24})}}return n.user?{text:n.user.username,css:[{"&, & span":T.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(tT.e,{src:n.user.image,username:n.user.username,size:24})}:{text:""}},[n]);if(!n.user||!n.org&&!n.user)return null;var l=n.org?(0,b.EG)(n.org).repls:(0,tb.Mh)(n.user),c=n.org?(0,b.EG)(n.org).repls.href.toString():(0,tb.Mh)(n.user).as;return t?(0,a.Y)(ni.$n,(0,i._)((0,r._)({},o),{onClick:function(){tw.M.openExternalUrl(c)}})):(0,a.Y)(eM.v,(0,i._)((0,r._)({},o),{as:l.as,href:l.href,prefetch:!1}))}function tQ(e){var n,t,l=e.setActiveDialog,c=e.repl,d=e.isTemplate,p=e.updateIconUrl,h=e.showCloseButton,g=e.setIsEditing,v=e.updateReplInfo,w=e.isFeaturedRepl,y=!!c.publishedAs,b=(0,o._)((0,s.useState)(!1),2),S=b[0],Y=b[1],A=(0,f.A)(),x=!!c.org&&c.org.type===u.NT.Team,_=(0,tL.Z)().fork,k=(0,tI.Q)(),D=(0,m.A)(),R=D.showConfirm,F=D.showError,U=(0,o._)((0,ty.B)({onFork:function(){R("Repl forked, redirecting...")},onError:function(){F("Error creating fork - please try again")}}),2),N=U[0],O=U[1].loading,M=(0,E._P)({controlName:"flag-olympic-torch",logFlagToAnalytics:!1}),B=(0,s.useCallback)(function(){var e;if(!(null===(e=c.org)||void 0===e?void 0:e.id)||k.loading){_();return}if(k.isEligibleForProject&&!k.hasProject){Y(!0);return}if(k.hasProject){N({orgId:c.org.id,repl:c,forkSource:"replInfoHeader"});return}_()},[c,_,k,N]),H=[];c.authorizations.fork.isAuthorized&&H.push({value:"Remix",label:"Remix",icon:O?(0,a.Y)(eS.A,{}):(0,a.Y)(tV.A,{}),isDisabled:O});var z=c.authorizations.publish.isAuthorized;if(!A&&!x){var W=c.isPrivate||!c.isRenamed||!z,G="";c.isPrivate?G="Make App public to publish":c.isRenamed||(G="Rename App to publish"),null==c.publishedAs&&H.push({value:tF.PublishTemplate,label:"Publish as Template",icon:(0,a.Y)(t$.A,{}),isDisabled:W,description:G,dataCy:"repl-info-header-settings-publish"}),d&&!W&&H.push({value:tF.UnpublishTemplate,label:"Unpublish Template",icon:(0,a.Y)(tG.A,{})}),y&&!W&&H.push({value:tF.EditPublishedTemplateSettings,label:"Edit Template publish settings",icon:(0,a.Y)(eb.A,{})})}if(x){var V=c.isPrivate;H.push({value:tF.FeatureRepl,label:w?"Remove from Featured Apps":"Feature on Profile",icon:(0,a.Y)(tq.A,{}),description:V?"Make App public to feature":"",isDisabled:V})}return c.authorizations.deleteRepl.isAuthorized&&(M&&H.push({isDestructive:!1,value:tF.TransferRepl,label:"Transfer",icon:(0,a.Y)(tK.A,{})}),H.push({isDestructive:!0,value:tF.DeleteRepl,label:"Delete",icon:(0,a.Y)(nu.A,{})})),(0,a.FD)(L.S,{gap:8,css:[T.wp.p(8)],children:[(0,a.FD)(L.S,{css:[(0,C._)({},T.$_.max("mobileMax"),[T.wp.flex.columnReverse,T.wp.align.start,{gap:I.LU.space8}])],row:!0,gap:8,align:"center",justify:"space-between",children:[(0,a.FD)(L.S,{row:!0,gap:8,css:[T.wp.center,T.wp.flex.shrink(1)],children:[(0,a.Y)(tJ,{repl:c}),c.authorizations.editMetadata.isAuthorized&&d?(0,a.Y)(tz,{value:c.iconUrl,onChange:p}):null]}),(0,a.FD)(L.S,{css:[(0,C._)({},T.$_.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],align:"center",row:!0,gap:8,children:[A?null:(0,a.Y)(eM.v,(0,i._)((0,r._)({prefetch:!1},(0,eH.z9)(c)),{iconRight:(0,a.Y)(tW.A,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),d||A||x?null:(0,a.Y)(nG.m_,{tooltip:"Make Repl public to share",isDisabled:!c.isPrivate,children:(0,a.Y)(ni.$n,{type:"button",iconLeft:(0,a.Y)(eY.A,{}),onClick:function(){l(tF.Share)},text:"Share",disabled:c.isPrivate})}),d&&!A?(0,a.Y)(ni.$n,{type:"button",iconLeft:(0,a.Y)(eY.A,{}),onClick:function(){return l(tF.UpdatePublishedTemplate)},text:"Publish changes"}):null,A?(0,a.Y)(eB.i,{textToCopy:window.location.href,tooltipText:"Copy App URL",tooltipSuccessText:"Copied!",iconLeft:(0,a.Y)(tj.A,{}),text:""}):null,H.length>0&&(0,a.Y)(tP.in,{dataCy:"repl-info-header-settings",trigger:(0,a.Y)(no.K0,{alt:"More options",size:32,children:(0,a.Y)(tZ.A,{size:16})}),"aria-label":"More options",onAction:function(e){switch(e){case"Remix":B();return;case tF.UnpublishTemplate:l(tF.UnpublishTemplate);return;case tF.DeleteRepl:l(tF.DeleteRepl);return;case tF.TransferRepl:l(tF.TransferRepl);return;case tF.EditPublishedTemplateSettings:l(tF.EditPublishedTemplateSettings);return;case tF.PublishTemplate:l(tF.PublishTemplate);return;case tF.FeatureRepl:l(tF.FeatureRepl);return}},children:H.map(function(e){return(0,a.Y)(tP.Dr,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),h?(0,a.Y)(no.K0,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){v(),g(!1)},children:(0,a.Y)(ng.A,{})}):null]})]}),(null===(n=c.org)||void 0===n?void 0:n.type)===u.NT.Team&&(null===(t=c.user)||void 0===t?void 0:t.__typename)==="User"?(0,a.FD)(P.EY,{variant:"small",color:"dimmest",children:["Created by @",c.user.username]}):null,S&&c.org?(0,a.Y)(na.a,{isOpen:!0,onRequestClose:function(){return Y(!1)},children:(0,a.Y)(tR,{repl:c,org:c.org,onRequestClose:function(){return Y(!1)},onForkSeparately:_})}):null]})}var tX=t(24239),t0=t(99167),t1=t(43639),t2=t(67153),t5=t(68097),t4=t(53536),t3=L.D.form,t8=(0,eO.x)({form:[T.wp.colWithGap(24)]}),t7=function(e){var n,t,r,i=e.currentUser,l=e.repl,c=e.onDone,u=e.onCancel,d=l.owner?l.owner:l.org,p=null!==(r=null===(n=l.owner)||void 0===n?void 0:n.username)&&void 0!==r?r:null===(t=l.org)||void 0===t?void 0:t.slug,f=p?"".concat(p,"/").concat(l.slug):l.slug,h=(0,o._)((0,t5.p)(i,null==d?void 0:d.id),3),m=h[0],g=h[1],v=h[2],w=(0,o._)((0,s.useState)(""),2),y=w[0],b=w[1],S=y===f,Y=(0,eq.c)(),A="You do not have permission to transfer this Repl because XYZ.";return(0,a.Y)(t3,{css:t8.form,onSubmit:function(e){e.preventDefault(),S&&(alert("Beep boop would transfer Repl, redirecting"),c())},children:(0,a.FD)(L.S,{gap:16,children:[(0,a.Y)(P.EY,{children:"Transfer this Repl to another account or organization."}),(0,a.Y)(t4.d,{colorway:"grey",text:"Transferring ownership might result in losing some features, depending on the subscription status of the selected organization. Click here for more details.",iconLeft:(0,a.Y)(ej.A,{}),href:"https://docs.replit.com/teams/collaboration-on-replit#transferring-repls-to-organizations"}),(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("owner"),children:(0,a.Y)(P.EY,{color:"dimmer",variant:"small",children:"New Owner"})}),(0,a.Y)(t2.A,{id:Y("owner"),owners:v,selectedOwner:m,setSelectedOwner:g})]}),A?(0,a.Y)(nl.N,{colorway:"negative",text:A}):null,(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("confirmName"),children:(0,a.FD)(P.EY,{color:"dimmer",variant:"small",children:["Type the name ",f," to delete"]})}),(0,a.Y)(eK.pd,{id:Y("confirmName"),disabled:!1,autoFocus:!0,value:y,onChange:function(e){return b(e.currentTarget.value)}})]}),(0,a.FD)(L.S,{row:!0,gap:12,justify:"end",children:[(0,a.Y)(ni.$n,{type:"button",onClick:u,text:"Cancel"}),(0,a.Y)(ni.$n,{type:"submit",disabled:!S,iconLeft:(0,a.Y)(tK.A,{}),colorway:"negative",text:"Yes, transfer this Repl"})]})]})})},t6=function(e){var n=e.repl,t=e.onDone,r=e.onCancel,i=(0,t1.wo)().data,o=null==i?void 0:i.currentUser;return(0,a.FD)(L.S,{gap:24,children:[(0,a.FD)(P.Y9,{variant:"subheadBig",level:2,children:["Transfer ",n.title]}),o?(0,a.Y)(t7,{currentUser:o,repl:n,onDone:t,onCancel:r}):(0,a.Y)(L.S,{align:"center",children:(0,a.Y)(eS.A,{})})]})},t9=t(74894),re=t(36954),rn=(0,eO.x)({loadingRoot:[T.wp.center,T.wp.p(16)],root:{overflow:"auto",maxHeight:"80vh"},form:[T.wp.p(8)]});function rt(e){var n=e.getDesktopLayoutState,t=e.setIsEditing,r=e.showCloseButton,i=(0,g.A)(),o=(0,d.P6)({variables:{replId:i}}).data,l=(null==o?void 0:o.repl.__typename)==="Repl"?o.repl:null;return l?(0,a.Y)(rr,{getDesktopLayoutState:n,setIsEditing:t,showCloseButton:r,repl:l}):(0,a.Y)(L.S,{css:rn.loadingRoot,children:(0,a.Y)(eS.A,{})})}function rr(e){var n,t,g,C,x,_,k,D,E=e.repl,R=e.getDesktopLayoutState,I=e.showCloseButton,F=e.setIsEditing,U=(0,l.useRouter)(),N=(0,f.A)(),O=(0,o._)((0,s.useState)(null),2),M=O[0],B=O[1],H=(0,o._)((0,s.useState)(E.isRenamed?E.title:""),2),z=H[0],W=H[1],G=(0,o._)((0,s.useState)(E.description||""),2),V=G[0],j=G[1],Z=(0,o._)((0,s.useState)(E.rawTemplateLabel),2),q=Z[0],K=Z[1],$=(0,m.A)().showError,J=E.publishedAs===u.Q_.Template,Q=(null===(n=E.org)||void 0===n?void 0:n.type)!=="team"&&(E.authorizations.editVisibility.isAuthorized||E.authorizations.editVisibility.code===u.S4.RequiresActiveSubscription);(0,s.useEffect)(function(){j(E.description||"")},[E.description]);var X=(0,s.useRef)(E),ee=(0,o._)((0,d.aI)({variables:{id:E.id},onCompleted:function(){var e;if(N){U.push("/desktopApp/home");return}if((null===(e=E.org)||void 0===e?void 0:e.type)==="team"){var n=(0,b.EG)(E.org);U.push(n.home.href);return}U.push("/home","/~")},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())},onError:function(e){return $((0,v.A)(e.message))}}),2),en=ee[0],et=ee[1].loading,er=(0,o._)((0,d.KZ)({onError:function(e){return $((0,v.A)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl,t=X.current,r={};t.description!==n.description&&(r.description=n.description),t.title!==n.title&&(r.title=n.title),t.url!==n.url&&(r.url=n.url,window.history.replaceState(null,"",n.url+window.location.search+window.location.hash)),t.isRenamed!==n.isRenamed&&(r.isRenamed=!!n.isRenamed),X.current=E,Object.keys(r).length>0&&F(!1)}}),2),ei=er[0],eo=er[1].loading,ea=(0,o._)((0,d.SY)({variables:{input:{replId:E.id}},onError:function(e){c.Cp(e),$((0,v.A)(e.message))}}),2),el=ea[0],es=ea[1],ec=(0,s.useMemo)(function(){return!!z&&z!==E.title||q!==E.rawTemplateLabel||(""!==V||!!E.description)&&V!==E.description},[E,z,V,q]),eu=(0,h.A)(ec),ed=(0,s.useCallback)(function(){ec&&ei({variables:{input:{id:E.id,title:z.trim()||E.title,description:V,templateLabel:E.authorizations.editTemplateMetadata.isAuthorized?q:void 0}}})},[ec,ei,E,z,V,q]),ep=(0,h.A)(ed);(0,s.useLayoutEffect)(function(){return function(){eu.current&&ep.current()}},[ep,eu]);var ef=function(){ei({variables:{input:{id:E.id,isPrivate:!E.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},E),{isPrivate:!E.isPrivate})}}}),(0,y.u4)(y.AZ.PRIVATE_TOGGLED,{enabled:!E.isPrivate,source:"workspace_info_modal"})},eh=E.isRenamed?"Name your App":"Default name: ".concat(E.title),em=[u.rT.Submit,u.rT.PublishTemplate,u.rT.EditTemplate].includes(E.workspaceCta),eg=(0,eq.c)(),ev=(null===(t=E.owner)||void 0===t?void 0:t.__typename)==="Team";return(0,a.FD)("div",{css:rn.root,"data-can-change-description":E.authorizations.editMetadata.isAuthorized,children:[(0,a.Y)(tL.B,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:E,teamContext:(null===(g=E.owner)||void 0===g?void 0:g.__typename)==="Team"?E.owner.id:void 0,children:(0,a.Y)(tQ,{repl:E,isTemplate:J,showCloseButton:I,setActiveDialog:B,setIsEditing:F,updateIconUrl:function(e){return ei({variables:{input:{id:E.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},E),{iconUrl:e})}}})},updateReplInfo:ed,isFeaturedRepl:E.isFeaturedRepl})}),(0,a.Y)("form",{css:rn.form,onSubmit:function(e){e.preventDefault(),ed()},children:(0,a.FD)(L.S,{align:"stretch",gap:16,children:[(0,a.FD)(ey.ui,{background:"default",gap:16,children:[(0,a.Y)(L.S,{children:(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:eg("name"),children:(0,a.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,a.Y)(t0.A,{maxLength:60,value:z,hideLabel:!0})]}),(0,a.Y)(eK.pd,{style:{cursor:E.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!E.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:eh,value:z,onChange:function(e){return W(e.target.value)},spellCheck:!1,id:eg("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,a.Y)(L.S,{children:(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:eg("description"),children:(0,a.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,a.Y)(t0.A,{maxLength:tg.z,value:V,hideLabel:!0})]}),(0,a.Y)(eK.ov,{disabled:!E.authorizations.editMetadata.isAuthorized,maxLength:tg.z,value:V,onChange:function(e){return j(e.target.value)},placeholder:"What does this App do?",css:[T.wp.minHeight(96),T.wp.maxHeight(256),{resize:"vertical"}],id:eg("description")})]})})]}),J&&E.authorizations.editTemplateMetadata.isAuthorized?(0,a.Y)(ey.ui,{background:"default",gap:4,children:(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:eg("template"),children:(0,a.Y)(P.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,a.Y)(eK.pd,{value:q,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return K(e.target.value)},id:eg("template")})]})}):null]})}),em?null:(0,a.FD)(L.S,{gap:24,css:[T.wp.p(8)],children:[(0,a.FD)(L.S,{gap:24,children:[(0,a.Y)(Y.A,{replId:E.id,authz:E.authorizations.editMetadata,initialIconUrl:E.iconUrl,originIconUrl:null===(C=E.templateInfo)||void 0===C?void 0:C.iconUrl}),(0,a.Y)(S.A,{replId:E.id,authz:E.authorizations.editMetadata,initialImageUrl:null!==(D=E.imageUrl)&&void 0!==D?D:null===(x=E.templateInfo)||void 0===x?void 0:x.imageUrl,originImageUrl:null===(_=E.templateInfo)||void 0===_?void 0:_.imageUrl})]}),Q?(0,a.FD)(L.S,{gap:8,children:[(0,a.FD)(tX.e2,{tag:"fieldset",name:eg("privacy"),value:E.isPrivate.toString(),onChange:function(){if(!eo){(0,y.u4)(y.AZ.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!E.isPrivate,source:"workspace_info_modal"});var e,n=!E.isPrivate;if(E.authorizations.editVisibility.isAuthorized||!1===n){ef();return}E.authorizations.editVisibility.code===u.S4.RequiresActiveSubscription&&(null===(e=E.org)||void 0===e?void 0:e.__typename)!=="Org"?B(tF.PowerUp):$(E.authorizations.editVisibility.message)}},row:!0,primary:!0,stretch:!0,children:[(0,a.Y)(tX.$O,{id:eg("false"),value:"false",text:"Public",icon:(0,a.Y)(t9.A,{})}),(0,a.Y)(tX.$O,{id:eg("true"),value:"true",text:"Private",icon:(0,a.Y)(re.A,{})})]}),(0,a.Y)(P.EY,{variant:"small",color:"dimmest",children:(0,w.A)(E.isPrivate,ev)})]}):null]}),(0,a.Y)(tm.A,{isOpen:M===tF.DeleteRepl,onClose:function(){return B(null)},selectedRepls:[E],onDelete:function(){en()},deleting:et}),(0,a.Y)(tv.A,{isOpen:M===tF.PowerUp,onClose:function(){return B(null)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,a.Y)(na.a,{isOpen:M===tF.UnpublishTemplate,onRequestClose:function(){return B(null)},children:(0,a.Y)(p.A,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return B(null)},onConfirm:function(){es.loading||(el(),B(null))},children:"Your App will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,a.Y)(na.a,{isOpen:M===tF.EditPublishedTemplateSettings,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(n2,{source:"replEnvironment",replId:E.id,getDesktopLayoutState:R})}),(0,a.Y)(na.a,{isOpen:M===tF.PublishTemplate,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(n2,{source:"replEnvironment",replId:E.id,getDesktopLayoutState:R})}),(0,a.Y)(na.a,{isOpen:M===tF.UpdatePublishedTemplate,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,a.Y)(td,{repl:E,getDesktopLayoutState:R})}),(0,a.Y)(na.a,{isOpen:M===tF.Share,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,a.Y)(eG,{repl:E})}),(0,a.Y)(na.a,{isOpen:M===tF.TransferRepl,onRequestClose:function(){return B(null)},children:(0,a.Y)(t6,{repl:E,onDone:function(){return B(null)},onCancel:function(){return B(null)}})}),(0,a.Y)(na.a,{isOpen:M===tF.FeatureRepl,onRequestClose:function(){return B(null)},centered:!0,maxWidth:650,children:(0,a.Y)(A.A,{isFeatured:E.isFeaturedRepl,repl:E,orgId:null===(k=E.org)||void 0===k?void 0:k.id,onCompleted:function(){return B(null)}})})]})}},22535:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(45009),i=t(30632),o=t(9782);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    isFeaturedRepl\n    user {\n      id\n      ...UserLinkUser\n    }\n    org {\n      id\n      name\n      image\n      slug\n      type\n    }\n    project {\n      id\n      title\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.J1)(a(),o.N)},66456:(e,n,t)=>{"use strict";t.d(n,{h:()=>y});var r=t(72275),i=t(94086),o=t(21971),a=t(10734),l=t(89968),s=t(10168),c=t(3460),u=t(32842),d=t(40889),p=t(65599),f=t(8367),h=t(20837),m=t(43952),g=t(42022);function v(e){return(0,i.Y)(g.Ay,(0,m._)((0,h._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0L6.64 5.578a.742.742 0 0 1 .023.024l3.96 3.96c.056.042.105.09.147.146L23.53 22.47a.75.75 0 1 1-1.06 1.06l-6.72-6.72a.75.75 0 0 1-.704-.089 5.25 5.25 0 0 0-6.082 0 .75.75 0 0 1-.868-1.222 6.75 6.75 0 0 1 5.224-1.118l-3.408-3.408a10.19 10.19 0 0 0-4.43 2.152.75.75 0 1 1-.963-1.15 11.69 11.69 0 0 1 4.16-2.235L5.944 7.004a15.16 15.16 0 0 0-4.027 2.558.75.75 0 1 1-.994-1.124 16.66 16.66 0 0 1 3.888-2.567L.47 1.531A.75.75 0 0 1 .47.47Zm16.34 6.058a15.25 15.25 0 0 0-6.04-.73.75.75 0 0 1-.12-1.496 16.75 16.75 0 0 1 12.426 4.136.75.75 0 0 1-.992 1.124 15.25 15.25 0 0 0-5.274-3.034Zm-.764 4.203a.75.75 0 0 1 1.003-.345 11.69 11.69 0 0 1 2.436 1.592.75.75 0 0 1-.97 1.144 10.191 10.191 0 0 0-2.124-1.388.75.75 0 0 1-.345-1.003ZM11.25 20a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var w=(0,s.x)({metadata:[u.wp.flex.growAndShrink(1)],iconWrapper:[u.wp.position.relative,u.wp.display.none,(0,r._)({},u.$_.min("tabletMax"),[u.wp.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[u.wp.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[u.wp.flex.shrink(1),u.wp.truncate],placeholderTitle:[u.wp.width(100),u.wp.borderRadius("default"),{alignSelf:"stretch"},c.S.foregroundPulse(o.LU.backgroundDefault,o.LU.backgroundHigher)]});function y(e){var n,t=e.repl,r=(0,l.A)().didDisconnect;return(0,i.FD)(f.S,{css:w.metadata,row:!0,gap:6,align:"center",children:[(0,i.FD)(f.S,{css:w.iconWrapper,children:[(null===(n=t.project)||void 0===n?void 0:n.id)?null:(0,i.Y)(f.S,{css:r&&w.dimIcon,children:(0,i.Y)(a.A,{replId:t.id,replIconUrl:t.iconUrl})}),r?(0,i.Y)(p.m_,{tooltip:"Reconnecting",children:(0,i.Y)(v,{size:16,css:w.diconnectedIcon})}):null]}),(0,i.Y)(d.EY,{multiline:!1,css:w.title,"data-cy":"header-repl-title",color:r?"dimmer":"default",children:t.title})]})}},10734:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(94086),i=t(95344),o=t(66622),a=t(30758),l=t(20837),s=t(45009),c=t(30632),u=t(72813);function d(){var e=(0,s._)(["\n  query GetReplIcon($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        iconUrl\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(40581),m=t(69343),g=t(24481),v=t(24955),w=t(10168),y=t(3460),b=t(32842),S=t(8367),Y=(0,w.x)({container:[b.wp.position.relative],loadingGeneratedIcon:[y.S.foregroundPulse(v.LU.blurpleDimmest,v.LU.blurpleDefault),b.wp.borderRadius()]});function A(e){var n,t,s,c,d,v,w,y,b,A,C,x,_=e.replId,k=e.replIconUrl,D=(t=(n={replId:_,replIconUrl:k}).replId,s=n.replIconUrl,d=(c=(0,o._)((0,a.useState)(null),2))[0],v=c[1],w=(0,g.A)().container,y=(0,m.U)(),x=(A={variables:{replId:t},pollInterval:(b=s===h.QY&&null===d&&!y)?2e3:0,onCompleted:function(e){var n,t=(null==e?void 0:null===(n=e.getRepl)||void 0===n?void 0:n.__typename)==="Repl"?e.getRepl.iconUrl:null;t&&t!==h.QY&&(w.exec("sh","-c","curl -o generated-icon.png ".concat(t)),v(t))}},C=(0,l._)({},p,A),u.I(f,C)).error,{loading:b,error:x,generatedIconUrl:d}),E=D.loading,R=D.generatedIconUrl;return(0,r.Y)(S.S,{css:Y.container,children:(0,r.Y)(S.S,{css:E&&Y.loadingGeneratedIcon,children:(0,r.Y)(i.Ay,{iconUrl:R||k,size:20,alt:""})})})}},84303:(e,n,t)=>{"use strict";t.d(n,{kk:()=>u});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},49193:(e,n,t)=>{"use strict";t.d(n,{A:()=>Q,E:()=>q});var r,i,o,a=t(13454),l=t(72275),s=t(20837),c=t(43952),u=t(5482),d=t(94086),p=t(30758),f=t(84303),h=t(66622),m=t(55195),g=t(72653),v=t(11571),w=t(45009),y=t(30632),b=t(72813);function S(){var e=(0,w._)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return S=function(){return e},e}var Y={},A=(0,y.J1)(S()),C=t(62580),x=t(60095),_=new Date("2022-07-08"),k=(0,v.tG)("useCelebrateFirstReplPlay",!1),D=t(39651),E=t(83733),R=t(21980),I=t(43035),F=t(99655),T=t(82436),P=t(84504),L=t(74495),U=t(20387),N=t(52757),O=t(24955),M=t(73943),B=t(32842),H=t(40889),z=t(65599),W=t(25688),G=t(14753),V=t(86955),j=t(49321);function Z(e){var n=e.runState,t=e.size,r=void 0===t?16:t;switch(n){case P.ll.IDLE:return(0,d.Y)(V.A,{size:r});case P.ll.RUNNING:return(0,d.Y)(j.A,{size:r});default:return(0,d.Y)(G.A,{size:r})}}var q=(r={},(0,l._)(r,P.ll.IDLE,"Run"),(0,l._)(r,P.ll.RUNNING,"Stop"),(0,l._)(r,P.ll.STOPPING,"Stopping"),(0,l._)(r,P.ll.OFFLINE,"Working"),(0,l._)(r,P.ll.BEFORE_RUN,"Working"),r),K=(i={small:48,large:85},(0,l._)(i,P.ll.IDLE,68),(0,l._)(i,P.ll.RUNNING,72),(0,l._)(i,P.ll.STOPPING,92),(0,l._)(i,P.ll.OFFLINE,86),(0,l._)(i,P.ll.BEFORE_RUN,86),i),$=(0,N.AH)([B.wp.py(12),B.wp.width(K.small),B.wp.flex.row,B.wp.center,B.wp.borderRadius(),B.wp.backgroundColor.accentPositiveDimmest,B.wp.color.accentPositiveStrongest,B.wp.cursor.pointer,B.wp.focusRing,(o={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},B.wp.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:O.LU.accentPositiveStrongest}]},(0,l._)(o,(0,W.wm)("tabletMax"),[B.wp.width(K.large)]),(0,l._)(o,":focus-visible",{outlineColor:"".concat(O.LU.accentPositiveStrongest)}),o)]),J=(0,N.AH)([B.wp.color.foregroundDimmer,B.wp.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},B.wp.backgroundColor.backgroundHighest],"&:active":[{borderColor:O.LU.accentPrimaryDefault}]}]);let Q=(0,p.forwardRef)(function(e,n){var t,r,i,o,v,w,y,S,N,G,V,j,Q,X,ee,en,et=e.runner,er=e.onRunInitiated,ei=e.style,eo=e.disableTooltip,ea=e.shortcut,el=e.allowPid1Runner,es=void 0===el||el,ec=e.hideLabel,eu=e.iconSize,ed=void 0===eu?12:eu,ep=(0,U.g3)(),ef=(0,E.A)(),eh=(0,U.Ah)(et),em=(0,F.m6)(),eg=(0,p.useMemo)(function(){return ep||es?ep&&eh!==P.ll.OFFLINE?{runState:ep.step}:{runState:eh}:{runState:P.ll.IDLE,forceDisable:!0}},[es,eh,ep]),ev=eg.runState,ew=eg.forceDisable,ey=(0,f.kk)({variables:{id:ef}}).data,eb=(null==ey?void 0:ey.repl.__typename)==="Repl"?ey.repl:null,eS=(t=(0,s._)({},Y,void 0),o=b.I(A,t),v=(0,C.gc)("extraDelight").preferences.extraDelight,w=(0,x.mO)().fireCircularBurstFrom,S=(y=(0,h._)((0,g.fp)(k),2))[0],N=y[1],G=null!==(i=null===(r=o.data)||void 0===r?void 0:r.currentUser)&&void 0!==i?i:null,V=!S&&G&&new Date(G.timeCreated)>=_,{hasCelebrated:S,celebrate:function(e){if(!e){m.Cp(Error("Cannot find element for celebrate Repl run confetti"));return}(v||V)&&w({element:e}),V&&N(!0)}}).celebrate,eY=ew||ev!==P.ll.IDLE&&ev!==P.ll.RUNNING,eA=(0,D.A)().showError,eC=(0,p.useRef)(null),ex=(j=(0,a._)(function(){var e,n,t,r,i,o,a,l;return(0,u.YH)(this,function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),ev!==P.ll.IDLE)return[3,4];if(er&&er(),eC.current&&eS(eC.current),!(null==ep?void 0:ep.run))return[3,1];return ep.run(P.QG.RUN_BUTTON_CLICKED),[3,3];case 1:return[4,et.run(P.QG.RUN_BUTTON_CLICKED)];case 2:s.sent(),s.label=3;case 3:return eb&&(0,T.u4)(T.AZ.PROJECT_RAN,{placement:"primary_btn",replId:eb.id,replTitle:eb.title,rootOriginReplUrl:eb.rootOriginReplUrl,templateTitle:null===(t=eb.source)||void 0===t?void 0:null===(n=t.release)||void 0===n?void 0:null===(e=n.repl)||void 0===e?void 0:e.title,templateOwner:null===(a=eb.source)||void 0===a?void 0:null===(o=a.release)||void 0===o?void 0:null===(i=o.repl)||void 0===i?void 0:null===(r=i.owner)||void 0===r?void 0:r.username,isBonsai:em}),[2];case 4:if(ev===P.ll.RUNNING){if(null==ep?void 0:ep.stop)return[2,ep.stop({graceful:!0})];return[2,et.stopRun()]}return[3,6];case 5:if(eA((l=s.sent()).toString()),R.vF.error("run button error",{errorMessage:l.message}),ev===P.ll.RUNNING){if(null==ep?void 0:ep.stop)return[2,ep.stop()];return[2,et.stopRun()]}return[3,6];case 6:return[2]}})}),function(){return j.apply(this,arguments)}),e_=ev===P.ll.IDLE&&!ew;return"inline-small"===(void 0===ei?"default":ei)?(0,d.FD)("button",{"data-cy":"ws-run-btn",onClick:ex,ref:eC,disabled:eY,css:[B.wp.p(12),B.wp.flex.row,B.wp.center,B.wp.borderRadius(8),e_?B.wp.backgroundColor.accentPositiveDimmest:B.wp.backgroundColor.backgroundHigher,e_?B.wp.color.accentPositiveStronger:B.wp.color.foregroundDimmer,{border:"1px solid",borderColor:e_?O.LU.accentPositiveDimmest:O.LU.backgroundHigher},B.wp.width("100%"),B.wp.height("100%")],children:[(0,d.Y)(Z,{runState:ev}),(0,d.Y)(H.EY,{variant:"subheadDefault",css:[B.wp.pl(8)],multiline:!1,children:q[ev]})]}):(0,d.Y)(z.m_,{placement:"bottom",isDisabled:eo||!ea,tooltip:(X=(Q={shortcut:ea,runState:ev,forceDisable:ew}).runState,ee=Q.shortcut,en=Q.forceDisable,X===P.ll.IDLE&&en?"Run button is not configured":ee?(0,d.Y)(L._y,{keyCombo:ee,fontSize:12}):null),children:function(e,t){return(0,d.FD)("button",(0,c._)((0,s._)({},e),{onClick:ex,disabled:eY,ref:(0,I.P)(eC,t,n,{breadcrumb:"client/workspace/components/RunButton/index.tsx:307"}),css:[$,!e_&&J,B.wp.height(32),(0,l._)({transition:"width 80ms ease-out"},(0,W.wm)("tabletMax"),B.wp.width(K[ev]))],children:[(0,d.Y)(Z,{runState:ev,size:ed}),ec?null:(0,d.Y)(H.EY,{multiline:!1,css:[B.wp.pl(6),B.wp.display.none,B.wp.fontWeight.medium,(0,l._)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(M.LO.tabletMax,"px)"),[B.wp.display.block])],children:q[ev]})]}))}})})},81870:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(20837),i=t(43952),o=t(16530),a=t(94086),l=t(10168),s=t(32842),c=t(95235),u=(0,l.x)({checked:[s.wp.backgroundColor.backgroundHigher],unchecked:[s.wp.color.foregroundDimmest]});function d(e){var n=e.alt,t=e.icon,l=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.Y)(c.K0,(0,i._)((0,r._)({},d),{css:l?u.checked:u.unchecked,alt:"".concat(l?"Disable":"Enable"," ").concat(n),onClick:s,children:t}))}},59469:(e,n,t)=>{"use strict";t.d(n,{D:()=>d});var r,i=t(72275),o=t(94086),a=t(52757),l=t(32842),s=t(65599),c=t(8351),u=(0,a.AH)([l.wp.focusRing,l.wp.display.flex,l.wp.center,l.wp.borderRadius(4),l.wp.backgroundColor.backgroundRoot,l.wp.color.foregroundDefault,l.wp.cursor.pointer,l.wp.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,l.Tp.hover,[l.wp.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var n=e.onClick;return(0,o.Y)(s.m_,{tooltip:"Clear",placement:"bottom-start",children:(0,o.Y)("button",{"aria-label":"Clear",onClick:n,css:u,children:(0,o.Y)(c.A,{size:16})})})}},94143:(e,n,t)=>{"use strict";t.d(n,{P:()=>x});var r=t(13454),i=t(5482),o=t(94086),a=t(30758),l=t(50670),s=t(51439),c=t(21177),u=t(63679),d=t(98734),p=t(80062),f=t(18226),h=t(74495),m=t(68062),g=t(24955),v=t(29895),w=t(2459),y=t(30846),b=t(8473),S=t(40940),Y=t(99413),A=t(33747),C=t(52885);function x(e){var n,t,x,_,k,D,E,R,I,F,T,P,L=e.xterm,U=e.openAIWithMessage,N=e.openShellSearch,O=e.openSearchAndReplace,M=e.openGeneratePrompt,B=e.isOutputsTerminal,H=(t=(n={xterm:L,openAIWithMessage:U,openGeneratePrompt:M}).xterm,x=n.openAIWithMessage,_=n.openGeneratePrompt,k=(0,u._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),D=(0,h.Jn)(f.Ws.id),(0,a.useMemo)(function(){if(!k){var e=[];if(_&&e.push({match:p.G2,data:{type:"action",label:"Generate command",icon:(0,o.Y)(S.A,{color:g.LU.tealStronger}),keyboardShortcut:D,run:function(){_()}}}),x&&e.push({match:p.G2,data:{type:"action",label:"Ask ".concat(s.BP),icon:(0,o.Y)(v.A,{color:g.LU.tealStronger}),run:function(){var e,n=null!==(e=null==t?void 0:t._term.getSelection())&&void 0!==e?e:"";x((0,c.yt)(n))}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,o.Y)(b.A,{})},commands:function(){return e}}}},[k,x,D,_,null==t?void 0:t._term])),z=(R=(E={xterm:L,openShellSearch:N,openSearchAndReplace:O,isOutputsTerminal:void 0!==B&&B}).xterm,I=E.openShellSearch,F=E.openSearchAndReplace,T=E.isOutputsTerminal,(0,a.useMemo)(function(){var e=[];if(I){var n=T?(0,o.Y)(C.A,{}):(0,o.Y)(A.A,{});e.push({match:p.G2,data:{type:"action",label:T?"Find in Console":"Find in Shell",icon:n,run:function(){var e;I(null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:"")}}})}if(F&&e.push({match:p.G2,data:{type:"action",label:"Find in Repl",icon:(0,o.Y)(Y.A,{}),run:function(){var e;F(null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[R,I,F,T])),W=(P=function(){return window.navigator.userAgent.includes("Linux")},(0,a.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,o.Y)(w.A,{})},commands:function(){return[{match:p.G2,data:{type:"action",label:"Copy",icon:(0,o.Y)(y.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"c"}),run:function(){var e,n=null!==(e=null==L?void 0:L._term.getSelection())&&void 0!==e?e:"";(0,d.A)(n)}}},{match:p.G2,data:{type:"action",label:"Paste",icon:(0,o.Y)(w.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,i.YH)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),l.vF.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==L||L._term.paste(e),[2]}})})()}}}]}}},[L]));return(0,a.useMemo)(function(){var e=[];return H&&e.push(H),z&&e.push(z),W&&e.push(W),{data:{type:"context",label:"Search actions",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[H,z,W])}},86691:(e,n,t)=>{"use strict";t.d(n,{p:()=>u});var r=t(94086),i=t(30758),o=t(52757),a=t(24955),l=t(32842),s=t(40172),c=(0,o.AH)(l.wp.display.flex,l.wp.align.center,l.wp.height(30),{"input, button":[l.wp.my(0),l.wp.mx(4)],input:[l.wp.py(4),l.wp.px(8),l.wp.backgroundColor.backgroundDefault,l.wp.color.foregroundDefault,l.wp.height(24),l.wp.width(85),l.wp.borderRadius(4),l.wp.focusRing,{border:"none",boxShadow:"none","&::placeholder":[l.wp.color.foregroundDefault],"&:focus":[{outline:"none",borderColor:a.LU.accentPrimaryDefault}]}]});function u(e){var n=e.searchValue,t=e.setSearchValue,o=e.findNext,a=e.findPrevious,l=e.exit,u=(0,i.useRef)(null);(0,i.useEffect)(function(){u.current&&u.current.focus()},[]);var d=function(e){if("Escape"===e.key){l();return}"Enter"===e.key&&(e.shiftKey?a(n):o(n))};return(0,r.FD)("div",{css:c,children:[(0,r.Y)("input",{ref:u,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return d(e)}}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return o(n)},text:"Next"}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return a(n)},text:"Previous"}),(0,r.Y)(s.$n,{size:"small",onClick:l,text:"Exit"})]})}},18226:(e,n,t)=>{"use strict";t.d(n,{Od:()=>p,QU:()=>v,Ws:()=>h,n8:()=>g});var r=t(94086),i=t(30758),o=t(99576),a=t(62580),l=t(99655),s=t(44529),c=t(74495),u=t(68062),d=t(10168),p=function(e){return e.Prompt="Prompt",e.CommandStart="CommandStart",e.CommandExecuted="CommandExecuted",e.CommandFinished="CommandFinished",e}({}),f={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},h={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,u.FM)({cmdOrCtrl:!0,key:"i"})},m=(0,d.x)({root:{marginLeft:"auto"}}),g=133;function v(e){var n=e.onFTCSState,t=e.onOpenGeneratePrompt,u=e.onUpdateCurrentPromptLineNumber,d=(0,a.gc)("fontSize").preferences.fontSize,p=(0,i.useRef)(null),g=(0,i.useRef)(null),v=(0,l.m5)(),w=(0,c.Jn)(h.id),y=(0,i.useRef)(null);return(0,i.useCallback)(function(e,i){var a=f[i.split(";")[0]];if(a&&n&&n({state:a,data:i.split(";")[1]}),"B"===i){var l,c,h=e.buffer.active,b=h.cursorX,S=h.cursorY;u(S),p.current&&p.current.dispose(),g.current&&g.current.dispose(),y.current&&(y.current.unmount(),y.current=null);var Y=Math.round(12.6);p.current=e.registerMarker(0),g.current=null!==(c=e.registerDecoration({marker:p.current,x:Math.max(0,e.cols-Y),width:Y,layer:"top"}))&&void 0!==c?c:null,null===(l=g.current)||void 0===l||l.onRender(function(n){for(var i=!1,a=e.buffer.active._buffer.lines._array[S],l=b;l<e.cols;l++)if((null==a?void 0:a.hasContent(l))!==0){i=!0;break}var c=!i;y.current||(y.current=(0,o.createRoot)(n)),y.current.render(c?(0,r.Y)(s.u,{css:m.root,onClick:function(e){e.stopPropagation(),t()},keyCombo:v?void 0:w,text:"Generate",fontSize:Math.round(.9*d)}):null)})}},[t,u,v,w,d,n])}},90172:(e,n,t)=>{"use strict";t.d(n,{Z:()=>w});var r=t(94086),i=t(30758),o=t(99576),a=t(98734),l=t(14636),s=t(24955),c=t(10168),u=t(32842),d=t(40172),p=t(95235),f=t(31955),h=t(8367),m=t(30846),g=(0,c.x)({root:[u.wp.display.inlineBlock,u.wp.borderRadius(4),u.wp.border({color:s.LU.outlineDefault})],askButton:[u.wp.border({direction:"right",color:s.LU.outlineDefault})],askButtonInner:[u.wp.height(26),u.wp.borderRadius(4,0,0,4)],copyButton:[{"> button":[u.wp.width(26),u.wp.height(26),u.wp.borderRadius(0,4,4,0)]}]});function v(e){var n=e.adjustXPosition,t=e.adjustYPosition,i=e.onClickAskAssistant,o=e.onClickCopy;return(0,r.Y)(f.ui,{elevated:!0,css:g.root,style:{marginLeft:void 0===n?0:n,marginTop:void 0===t?4:t},children:(0,r.FD)(h.S,{row:!0,align:"center",children:[(0,r.Y)(h.S,{css:g.askButton,children:(0,r.Y)(d.$n,{text:"Ask Assistant",variant:"nofill",onClick:i,size:"small",iconLeft:(0,r.Y)(l.A,{}),css:g.askButtonInner})}),(0,r.Y)(h.S,{css:g.copyButton,children:(0,r.Y)(p.K0,{alt:"Copy",size:12,onClick:o,children:(0,r.Y)(m.A,{})})})]})})}function w(e){var n=e.xterm,t=e.onAskAssistant,l=(0,i.useMemo)(function(){return null==n?void 0:n._term},[n]),s=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null);(0,i.useEffect)(function(){if(l)return l.onSelectionChange(function(){s.current&&s.current.dispose(),c.current&&c.current.dispose(),u.current&&(u.current.unmount(),u.current=null);var e=l.getSelectionPosition(),n=l.getSelection().trim();if(l.hasSelection()&&e&&n.length>0){var i,d,p,f=l.buffer.active.cursorY,h=e.end.y-f+1,m=null!==(d=null==l?void 0:l._core._renderService.dimensions.css.cell.width)&&void 0!==d?d:8,g=Math.round(((null==e?void 0:e.end.x)-(null==e?void 0:e.start.x))/2),w=-70,y=4,b=g*m,S=Math.ceil(140/m);b<70?(g=e.start.x,w=0):g>l.cols-S/2&&(g=e.end.x,w=-140),e.end.y>=l.rows-2&&(y=-8,h-=1),s.current=l.registerMarker(h),c.current=null!==(p=l.registerDecoration({marker:s.current,x:g,width:S,layer:"top"}))&&void 0!==p?p:null,null===(i=c.current)||void 0===i||i.onRender(function(e){u.current||(u.current=(0,o.createRoot)(e)),u.current.render((0,r.Y)(v,{adjustXPosition:w,adjustYPosition:y,onClickAskAssistant:function(){l.clearSelection(),t(n)},onClickCopy:function(){l.clearSelection(),(0,a.A)(n)}}))})}}).dispose},[t,l])}},70889:(e,n,t)=>{"use strict";t.d(n,{A:()=>G});var r=t(66622),i=t(94086),o=t(25204),a=t.n(o),l=t(30758),s=t(20837),c=t(45009),u=t(30632),d=t(75838),p=t(43239);function f(){var e=(0,c._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.A9),g=t(77781),v=t(63679),w=t(39651),y=t(51262),b=t(73688),S=t(93400),Y=t(12067),A=t(23618),C=t(51253),x=t(62580),_=t(86295),k=t(22072),D=t(52757),E=t(24955),R=t(20778),I=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];let F=(0,l.memo)(function(e){var n=e.content,t=(0,x.gc)("fontSize").preferences.fontSize,r=(0,l.useCallback)(function(e){return(0,i.Y)(_.A,(0,s._)({},e))},[]);return(0,i.Y)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.Y)(b.$,{css:(0,D.AH)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:E.LU.foregroundDefault,fontFamily:"".concat(E.LU.fontFamilyDefault," !important"),fontSize:t,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:E.LU.foregroundDefault,fontWeight:E.LU.fontWeightMedium,marginBottom:E.LU.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:E.LU.space8,borderBottom:"1px solid ".concat(E.LU.backgroundHigher),marginTop:E.LU.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:E.LU.space24},h4:{fontSize:"1em",marginTop:E.LU.space16},h5:{fontSize:"0.875em"},h6:{color:E.LU.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(E.LU.space16,")"),paddingRight:E.LU.space4},".anchor:focus":{outline:"none"},p:{marginBottom:E.LU.space16,fontSize:t,fontFamily:"".concat(E.LU.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:E.LU.space16,wordBreak:"normal",th:{fontWeight:E.LU.fontWeightMedium},"td, th":{padding:"".concat(E.LU.space8," ").concat(E.LU.space12),border:"1px solid ".concat(E.LU.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:E.LU.backgroundDefault,borderTop:"1px solid ".concat(E.LU.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:E.LU.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:E.LU.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:E.LU.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:E.LU.space16},ol:{listStyle:"decimal",marginBottom:E.LU.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:E.LU.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(E.LU.fontFamilyCode," !important"),margin:"".concat(E.LU.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:E.LU.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:E.LU.space16,borderLeft:"".concat(E.LU.space2," solid ").concat(E.LU.backgroundHighest),paddingLeft:E.LU.space16},"blockquote > *":{color:"".concat(E.LU.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(E.LU.fontFamilyCode),color:E.LU.foregroundDimmer,verticalAlign:"middle",backgroundColor:E.LU.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(E.LU.backgroundHighest)},a:{color:E.LU.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:E.LU.space8,padding:0},details:{marginBottom:E.LU.space16,display:"block",background:E.LU.backgroundHigher,borderRadius:E.LU.borderRadius4,padding:E.LU.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:E.LU.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(E.LU.backgroundHighest),marginBottom:E.LU.space16,paddingBottom:E.LU.space16},hr:{height:1,backgroundColor:E.LU.backgroundHigher,margin:"".concat(E.LU.space24," 0"),border:0}}),allowedElements:I,remarkPlugins:[R.yN,A.A,C.A,Y.A],linkTarget:"_blank",rehypePlugins:[S.A],components:{code:r,img:k.A},children:n})})});var T=t(32842),P=t(98541),L=t(93532),U=t(40889),N=t(65599),O=t(68845),M=t(8367),B=t(12770),H=t(92578),z=t(16021),W=t(8351);let G=(0,l.memo)(function(e){var n,t,o=e.thread,c=e.message,u=(0,g.T)(),p=(0,w.A)().showError,f=(0,r._)((n={onError:function(e){p(e.message)},onCompleted:function(e){var n;(null===(n=e.deleteThreadMessage)||void 0===n?void 0:n.__typename)==="UserError"&&p(e.deleteThreadMessage.message)}},t=(0,s._)({},h,n),d.n(m,t)),2),b=f[0],S=f[1].loading,Y=(0,v._P)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),A=!!(o&&o.indexStart===o.indexEnd),C={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},x=(0,l.useMemo)(function(){return{diff:(0,y.G)(c.timeCreated),full:(0,y.n)(c.timeCreated)}},[c]);if(!c.user)return null;var _=u===c.user.id?[{label:"Delete",icon:(0,i.Y)(W.A,{}),isDestructive:!0}]:[];return(0,i.FD)(M.S,{children:[(0,i.FD)(M.S,{css:[T.wp.pb(4)],row:!0,justify:"space-between",children:[(0,i.FD)(M.S,{row:!0,align:"center",gap:8,children:[(0,i.Y)(a(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(c.user.username),children:(0,i.Y)("a",{children:(0,i.Y)(O.K,{small:!0,src:c.user.image,username:c.user.username})})}),(0,i.Y)("p",{children:(0,i.Y)(N.m_,{tooltip:x.full,placement:"top",children:(0,i.Y)(U.EY,{variant:"small",color:"dimmer",multiline:!1,children:x.diff})})}),_.length>0&&Y?(0,i.Y)(B.A,{items:_,onItemClick:function(e){"Delete"!==e.label||S||b({variables:{id:c.id}})},label:"More"}):null]}),A?(0,i.Y)(N.m_,{tooltip:C.outdatedTooltip,children:(0,i.Y)(P.a,{colorway:"negative",text:C.outdated})}):null]}),"StatusMessageContentType"===c.content.__typename&&"resolved"===c.content.status?(0,i.Y)(L.N,{colorway:"positive",icon:(0,i.Y)(z.A,{}),text:C.statusBanner.resolved}):null,"StatusMessageContentType"===c.content.__typename&&"unresolved"===c.content.status?(0,i.Y)(L.N,{colorway:"primary",icon:(0,i.Y)(H.A,{}),text:C.statusBanner.unresolved}):null,"TextMessageContentType"===c.content.__typename&&(0,i.Y)(F,{content:c.content.text})]})})},51262:(e,n,t)=>{"use strict";t.d(n,{G:()=>o,n:()=>a});var r=t(39729),i=t(44147),o=function(e){var n=new Date(e),t=new Date;return 60>(0,r.A)(t,n)?"just now":(0,i.K)(n,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},60818:(e,n,t)=>{"use strict";t.d(n,{ET:()=>S,Mk:()=>m,c_:()=>h,eP:()=>y,v4:()=>v});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(75838),s=t(43239);function c(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,o.J1)(c(),s.A9);function m(e){var n=(0,r._)({},f,e);return a.I(h,n)}var g=(0,o.J1)(u(),s.A9);function v(e){var n=(0,r._)({},f,e);return l.n(g,n)}var w=(0,o.J1)(d(),s.A9);function y(e){var n=(0,r._)({},f,e);return l.n(w,n)}var b=(0,o.J1)(p(),s.A9);function S(e){var n=(0,r._)({},f,e);return l.n(b,n)}},38989:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(20837),i=t(43952),o=t(66622),a=t(27189),l=t(30758),s=t(19551),c=t.n(s),u=t(43239),d=t(60818),p=t(22616),f=t(21195),h=t(39651),m=t(83733),g=t(32904),v=t(24481),w=t(5934),y=t(6534);function b(e,n){if(!e)return null;var t,r=e.state.field(w.K1),i=e.state.field(w.TW);return(null!==(t=r[n])&&void 0!==t?t:(null==i?void 0:i.id)===n?i:null)||null}function S(e,n){if(!e)return null;var t=b(e,n);if(!t)return null;var r=Math.min(t.indexStart,t.indexEnd),i=Math.max(t.indexStart,t.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),s=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:s}}function Y(e,n,t){var s=(0,h.A)().showError,Y=(0,m.A)(),A=(0,f.A)().map(function(e){return e.username}),C=(0,v.A)().fs,x=(0,d.Mk)({variables:{id:e}}),_=x.data,k=x.error,D=x.loading,E=x.client,R=function(){if(D||!_){var t;return!!n&&(null===(t=n.state.field(w.TW))||void 0===t?void 0:t.id)===e}return"AnnotationAnchor"!==_.thread.__typename}(),I=(0,l.useMemo)(function(){return D||!_?null:"UserError"===_.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===_.thread.__typename?_.thread:null},[_,e,D]),F=(0,o._)((0,d.v4)({onError:function(e){return s(e.message)},update:function(e,n){var t,r;if(n.errors){n.errors.forEach(function(e){return s(e.message)});return}if((null===(r=n.data)||void 0===r?void 0:null===(t=r.createThread)||void 0===t?void 0:t.__typename)==="UserError"){s(n.data.createThread.message);return}}}),1)[0],T=(0,o._)((0,d.ET)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return s(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createThreadMessage;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],P=(0,o._)((0,d.eP)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return s(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.updateThread;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],L=(0,o._)((0,u.CY)(),1)[0],U=(0,g.A)(function(){return c()(L,1e3,{trailing:!1})},[L]),N=function(){var e=null==_?void 0:_.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:R,error:k,loading:D,getHighlight:S,getLatestAnchor:function(){return b(n,e)},updateThread:function(e){var n,t=e.changes,o=(null==_?void 0:null===(n=_.thread)||void 0===n?void 0:n.__typename)==="AnnotationAnchor"?_.thread:null;if(!o)throw Error("expected thread");P({variables:{id:o.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,s=o.messageId,c=(0,y.vY)(l,{users:(0,a._)(A).concat(["everyone"])}),u={id:s,text:l,mentions:c.mentions};if(R&&n&&t){var f=n.state.field(w.TW),h={id:e,replId:Y,indexStart:null==f?void 0:f.indexStart,indexEnd:null==f?void 0:f.indexEnd,otVersion:C.getOTVersion(t),path:t};F({variables:{thread:h,message:u,highlight:S(n,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},h,N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),E.writeQuery({query:d.c_,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},h),{isResolved:!1,isGeneral:!1}),N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==_?void 0:_.currentUser}});var m=E.readQuery({query:p.FZ,variables:{replId:Y,path:t}});if(m){var g,v,b=(null===(v=m.threadsByFile)||void 0===v?void 0:v.__typename)==="ThreadsByFileResult"?m.threadsByFile.threads:[],x=N().user;E.writeQuery({query:p.FZ,variables:{replId:Y,path:t},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(b).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:x,isResolved:!1,participants:[x]},h)])}}})}return}var k=(null==_?void 0:null===(g=_.thread)||void 0===g?void 0:g.__typename)==="AnnotationAnchor"?_.thread:null;if(!k)throw Error("expected thread");T({variables:{replId:Y,threadId:k.id,threadMessage:u,highlight:S(n,k.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},k),{messages:(0,a._)(k.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},N(),u),{content:{text:u.text,__typename:"TextMessageContentType"},anchor:{id:k.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(n){U({variables:{threadId:e,messageId:n.messageId,message:null}})}}}},22616:(e,n,t)=>{"use strict";t.d(n,{FZ:()=>c,Rf:()=>u});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},89223:(e,n,t)=>{"use strict";t.d(n,{h:()=>Y});var r=t(94086),i=t(20837),o=t(45009),a=t(30632),l=t(72813),s=t(76222);function c(){var e=(0,o._)(["\n  query WorkspaceUsageBudget($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          ... on Org {\n            id\n            authorizations {\n              editUsageLimit {\n                isAuthorized\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,o._)(["\n  query WorkspaceUsageBasedBillingAlerts($orgId: String) {\n    currentUser {\n      id\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,a.J1)(c()),f=(0,a.J1)(u(),s.B9),h=t(81536),m=t(87910),g=t(10168),v=t(32842),w=t(93532),y=t(8367),b=t(21691),S=(0,g.x)({budgetContainer:[v.wp.colWithGap(8),v.wp.border(),v.wp.borderRadius(8),v.wp.p(8)],budgetContainerBorderless:[v.wp.colWithGap(8),v.wp.p(8)],bannerText:[v.wp.textAlign.left]});function Y(e){var n,t,o,a,s,c,u,g,v,Y,A=e.replId,C=e.onUpdateSuccess,x=e.style,_=(n={variables:{replId:A}},t=(0,i._)({},d,n),l.I(p,t)),k=_.data,D=_.loading,E=_.error,R=(0,h.R)(A).orgId,I=(o={variables:{orgId:R}},a=(0,i._)({},d,o),l.I(f,a)),F=I.data,T=I.loading,P=I.error;if(!k||!F||D||T)return null;if(R?(c=(null===(u=F.currentUser)||void 0===u?void 0:u.org.__typename)==="Org"?null===(g=F.currentUser)||void 0===g?void 0:g.org:void 0,s=(null===(v=F.currentUser)||void 0===v?void 0:v.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===F.currentUser.org.usageBasedBillingAlerts.__typename?F.currentUser.org.usageBasedBillingAlerts:void 0):s=(null===(Y=F.currentUser)||void 0===Y?void 0:Y.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?F.currentUser.usageBasedBillingAlerts:void 0,E)return(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:E.message,icon:(0,r.Y)(b.A,{})});if(P)return(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:P.message,icon:(0,r.Y)(b.A,{})});var L="Repl"===k.getRepl.__typename&&k.getRepl.org?k.getRepl.org:void 0,U=(null==L?void 0:L.authorizations.editUsageLimit.isAuthorized)===!1?L.authorizations.editUsageLimit.message:void 0;return U?(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:"".concat(U," Reach out to an org admin to update your usage budget."),icon:(0,r.Y)(b.A,{})}):(0,r.Y)(y.S,{css:"outlined"===(void 0===x?"outlined":x)?S.budgetContainer:S.budgetContainerBorderless,children:(0,r.Y)(m.j,{org:c,initialSettings:s,onDone:function(){return C}})})}},13117:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(94086),i=t(24955),o=t(10168),a=t(32842),l=t(8367),s=(0,o.x)({root:[a.wp.p(4),a.wp.borderRadius(8),a.wp.backgroundColor.backgroundRoot,a.wp.border({color:i.LU.outlineDimmest})],video:[a.wp.borderRadius(8),a.wp.width("100%")]});function c(e){var n=e.src,t=e.autoPlay,i=e.loop,o=e.width;return(0,r.Y)(l.S,{css:s.root,style:{width:void 0===o?280:o},children:(0,r.Y)("video",{css:s.video,src:n,autoPlay:void 0===t||t,loop:void 0===i||i,playsInline:!0,muted:!0})})}},23311:(e,n,t)=>{"use strict";t.d(n,{A:()=>_});var r=t(94086),i=t(30758),o=t(84321),a=t(51439),l=t(95123),s=t(24481),c=t(87590),u=t(20387),d=t(5846),p=t(82436),f=t(10168),h=t(32842),m=t(40889),g=t(8367),v=t(86955),w=(0,f.x)({wrapper:[h.wp.display.inlineFlex,h.wp.backgroundColor.accentPositiveDimmest,h.wp.color.accentPositiveStrongest,h.wp.align.center,h.wp.borderRadius(8),h.wp.py(2),h.wp.px(6),h.wp.mx(4),h.wp.cursor.pointer,{"&:hover":[h.wp.color.white,h.wp.backgroundColor.accentPositiveDefault]}]});function y(e){var n=e.trackSource,t=void 0===n?"unknown":n,i=(0,u.cz)(),o=i.runButtonRunsWorkflows,a=i.isOffline,l=i.isDisabled,s=(0,u.sT)();return(0,r.FD)(g.S,{tag:"button",onClick:function(){(0,p.u4)(d.AZ.WORKFLOW_RAN,{source:t,runner:o?"workflows":"pid1"}),s()},css:w.wrapper,row:!0,gap:6,disabled:a||l,children:[(0,r.Y)(v.A,{size:12}),(0,r.Y)(m.EY,{children:"Run"})]})}var b=t(40172),S=t(71032),Y=t(8631),A=(0,f.x)({inlineButton:[h.wp.display.inlineBlock]});function C(e){var n=e.openAgentPane;return(0,r.Y)(b.$n,{css:A.inlineButton,text:"The Agent",iconLeft:(0,r.Y)(S.A,{}),size:"small",onClick:n})}function x(e){var n=e.openNetworkingTool,t=e.openAgentPane,c=(0,u.cz)().isRunning,d=(0,s.A)().ports,p=(0,l.A)(d.portsState),f=(0,i.useMemo)(function(){return null==p?void 0:p.some(function(e){return e.isOpen})},[p]),h=(0,a.Ff)().runState;return(0,i.useMemo)(function(){return void 0!==h&&h!==o.g32.AGENT_STATE_UNKNOWN},[h])?h===o.g32.AGENT_STATE_PAUSING||h===o.g32.AGENT_STATE_PAUSED?(0,r.FD)(g.S,{gap:4,align:"center",children:[(0,r.Y)(m.EY,{children:"The app is currently not running."}),(0,r.FD)(g.S,{gap:4,align:"center",row:!0,children:[(0,r.Y)(C,{openAgentPane:t})," is waiting for your response."]})]}):(0,r.FD)(g.S,{gap:4,align:"center",children:[(0,r.Y)(m.EY,{children:"The app is currently not running."}),(0,r.FD)(g.S,{gap:4,align:"center",row:!0,children:[(0,r.Y)(C,{openAgentPane:t})," is working on it."]})]}):c?f?(0,r.FD)(g.S,{gap:4,align:"center",children:[(0,r.Y)(m.EY,{children:"The app is running, but has no external ports configured."}),(0,r.FD)(g.S,{row:!0,align:"center",gap:4,children:["Use",(0,r.Y)(b.$n,{css:A.inlineButton,text:"Networking",iconLeft:(0,r.Y)(Y.A,{}),size:"small",onClick:n}),"tool to configure them."]})]}):(0,r.Y)(g.S,{gap:4,align:"center",children:(0,r.Y)(m.EY,{children:"The app is running, but there's no webpage to preview right now."})}):(0,r.FD)(g.S,{gap:4,align:"center",children:[(0,r.Y)(m.EY,{children:"The app is currently not running."}),(0,r.FD)(g.S,{row:!0,align:"center",children:[(0,r.Y)(y,{})," to see the results of your app."]})]})}function _(e){var n=e.openNetworkingTool,t=e.openAgentPane;return(0,r.Y)(c.A,{pane:{type:"webview"},bodyText:(0,r.Y)(x,{openNetworkingTool:n,openAgentPane:t})})}},44115:(e,n,t)=>{"use strict";t.d(n,{YY:()=>nH,QJ:()=>nG,Eo:()=>nz});var r=t(13454),i=t(72275),o=t(20837),a=t(43952),l=t(66622),s=t(5482),c=t(94086),u=t(30758),d=t(75362),p=t(34896),f=t(54341),h=t(63679),m=t(26190),g=t(83733),v=t(20334),w=t(14349),y=t(20740),b=t(82436),S=t(29665),Y=t(85311),A=t(29835),C=t(39959),x=t(24955),_=t(10168),k=t(32842),D=t(40889),E=t(8367),R=t(79653),I=(0,_.x)({root:[k.wp.p(6),k.wp.flex.row,k.wp.align.center,k.wp.justify.center,k.wp.zIndex(1),{color:x.LU.accentPrimaryStrongest,backgroundColor:x.LU.accentPrimaryDimmest,containerType:"inline-size"}],content:[k.wp.width("100%"),k.wp.flex.row,k.wp.align.center],infoIcon:[k.wp.mr(8)]});function F(){return(0,c.Y)(E.S,{css:I.root,children:(0,c.FD)(E.S,{css:I.content,children:[(0,c.Y)(E.S,{css:I.infoIcon,children:(0,c.Y)(R.A,{size:16})}),(0,c.Y)(D.EY,{variant:"small",children:"This is a visual preview of your app. The agent is currently creating a fully interactive version."})]})})}var T=t(54191),P=t(16530);function L(e){var n=e.actionType,t=(0,P._)(e,["actionType"]);(0,b.u4)(b.AZ.WS_WEBVIEW_USED,(0,o._)({type:n},t))}function U(){L({actionType:"open_new_window"})}var N=t(74495),O=t(52757),M=t(14968),B=t(95235),H=t(28354),z=t(31955),W=t(65599),G=t(84761),V=t(72602),j=t(40904),Z=t(14753),q=t(89386),K=(0,O.AH)([k.wp.borderRadius(6),k.wp.color.foregroundDimmer,k.wp.height(24),{borderColor:x.LU.outlineDimmer}]),$=(0,_.x)({root:[k.wp.border({color:x.LU.outlineDimmest,direction:"bottom"}),k.wp.p(2),k.wp.container("root"),k.wp.zIndex(1),k.wp.p(4),k.wp.gap(4),k.wp.height(40)],devControls:[k.wp.gap(4)],navControls:[k.wp.flex.growAndShrink(1)],navButton:[k.wp.p(6),k.wp.borderRadius(4),k.wp.flex.shrink(0),{border:"none"}],urlWrapper:[k.wp.position.relative,k.wp.flex.row,k.wp.flex.growAndShrink(1)],urlPath2:[k.wp.py(0),k.wp.fontSize(12),k.wp.flex.grow(1),k.wp.borderRadius(8)],goButton:[k.wp.position.absolute,k.wp.right(4),k.wp.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,i._)({},k.kL.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],fakeUrl:[k.wp.fontSize(12),k.wp.border(),{boxSizing:"content-box"},k.wp.borderRadius(6),k.wp.px(8),k.wp.py(2),k.wp.flex.grow(1),k.wp.rowWithGap(4),k.wp.align.center]});function J(e){var n=e.webviewPageState,t=e.navigationState,r=e.bonsaiWebviewBridge;return(0,u.useEffect)(function(){r&&r.setInsets({top:40})},[r]),(0,c.FD)(z.ui,{css:$.root,row:!0,align:"center",justify:"space-between",children:["active"===n.state?(0,c.Y)(Q,{navigationState:t}):(0,c.Y)(X,{}),(0,c.Y)(E.S,{row:!0,children:(0,c.Y)(E.S,{css:$.buttons,row:!0,align:"center",children:(0,c.Y)(E.S,{css:$.devControls,row:!0,children:(0,c.Y)(M.v,{size:"small",variant:"outlined",css:K,href:t.getExternalUrl(),target:"_blank",iconLeft:(0,c.Y)(j.A,{}),text:"New tab",onClick:function(){U()},noNextLink:!0})})})})]})}function Q(e){var n=e.navigationState,t=n.canNavigateBack,r=n.navigateBack,i=n.canNavigateForward,o=n.navigateForward,a=n.canNavigateToInputRelativeUrl,l=n.navigateToInputRelativeUrl,s=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.refresh,p=(0,T.vm)(),f=(0,N.Jn)("webviewpane.reload");return(0,c.FD)(E.S,{css:$.navControls,row:!0,gap:4,children:[(0,c.Y)(B.K0,{alt:"Back",tooltipDelay:"long",onClick:r,disabled:!t,css:$.navButton,children:(0,c.Y)(G.A,{})}),(0,c.Y)(B.K0,{alt:"Forward",tooltipDelay:"long",onClick:o,disabled:!i,css:$.navButton,children:(0,c.Y)(V.A,{})}),(0,c.Y)(B.K0,{alt:"Refresh".concat(f?" (".concat((0,N.LH)(f,p),")"):""),tooltipDelay:"long",onClick:d,css:$.navButton,children:n.isRefreshing?(0,c.Y)(Z.A,{}):(0,c.Y)(q.A,{})}),(0,c.FD)(E.S,{css:$.urlWrapper,row:!0,children:[(0,c.Y)(H.pd,{css:$.urlPath2,value:s,onKeyDown:function(e){"Enter"===e.key&&a&&l()},onChange:function(e){if(""===e.currentTarget.value){u("/");return}u(e.target.value)}}),(0,c.Y)(z.ui,{elevated:!0,css:$.goButton,children:(0,c.Y)(B.K0,{alt:"Go to URL",disabled:!a,onClick:l,size:18,tooltipContents:(0,c.Y)(N._y,{keyCombo:"Enter"}),children:(0,c.Y)(V.A,{})})})]})]})}function X(){return(0,c.Y)(E.S,{css:$.navControls,align:"center",row:!0,gap:4,children:(0,c.FD)(z.ui,{elevated:!0,css:$.fakeUrl,children:[(0,c.Y)(W.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,c.Y)(Z.A,{})}),(0,c.Y)(D.EY,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var ee=t(45009),en=t(30632),et=t(72813);function er(){var e=(0,ee._)(["\n  query WebviewDeployBanner($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n        authorizations {\n          viewDeploymentConfig {\n            isAuthorized\n          }\n        }\n      }\n    }\n  }\n"]);return er=function(){return e},e}var ei={},eo=(0,en.J1)(er()),ea=t(51439),el=t(40172),es=t(16021),ec=t(70953),eu=t(63516),ed=(0,_.x)({root:[k.wp.p(4),k.wp.pl(8),k.wp.flex.growAndShrink(1),k.wp.border({width:1,color:x.LU.accentPrimaryDimmer}),{color:x.LU.accentPrimaryStrongest,backgroundColor:x.LU.accentPrimaryDimmest,containerType:"inline-size"}],content:[k.wp.width("100%")],tooltipText:[k.wp.flex.growAndShrink(1)],closeButton:[{marginLeft:"auto"}]}),ep=function(e){var n=e.onClick,t=e.onDismiss,r="function"==typeof t;return(0,c.Y)(E.S,{css:ed.root,gap:4,align:"start",children:(0,c.FD)(E.S,{css:ed.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,c.FD)(E.S,{row:!0,gap:4,align:"center",children:[(0,c.Y)(W.m_,{tooltip:(0,c.Y)(E.S,{gap:4,justify:"start",align:"start",children:["Deploy to any URL","Configurable machine","Always on"].map(function(e,n){return(0,c.FD)(E.S,{row:!0,gap:8,align:"center",justify:"center",children:[(0,c.Y)(es.A,{size:12}),(0,c.Y)(D.EY,{variant:"small",multiline:!1,children:e})]},n)})}),delay:"none",children:(0,c.Y)(R.A,{})}),(0,c.Y)(D.EY,{css:ed.tooltipText,variant:"small",children:"Ready to share with the world?"})]}),(0,c.Y)(el.$n,{colorway:"primary",iconLeft:(0,c.Y)(eu.A,{}),text:"Deploy",onClick:n}),r?(0,c.Y)(E.S,{css:ed.closeButton,children:(0,c.Y)(B.K0,{alt:"Dismiss",onClick:t,children:(0,c.Y)(ec.A,{})})}):null]})})},ef=t(73225),eh=t(79261),em=t(75165),eg=t(88859);function ev(e){var n,t,r,i=e.replId,a=e.shouldShowAgentDeployBanner,s=e.onClick,d=(0,l._)((0,u.useState)(!a),2),p=d[0],f=d[1],h=(n={variables:{id:i}},t=(0,o._)({},ei,n),et.I(eo,t)).data,m=(0,eg.AU)("workspaceTourGuide"),g=(0,em.eg)(),v=(0,ea.QL)(),w=(0,ef.A)("workspace","workspace-deployments-webview-banner"),y=w.shouldDisplay,S=w.register,Y=w.dismiss;(0,u.useEffect)(function(){S()},[S]);var A=function(){f(!0),Y()};if(m||g)return null;var C=(null==h?void 0:h.getRepl.__typename)==="Repl"?h.getRepl:null;if(!C)return null;var x=C.authorizations.viewDeploymentConfig.isAuthorized,_=(null===(r=C.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"&&C.hostingDeployment.currentBuild;return x&&!_&&y||a&&!p?(0,c.Y)(E.S,{children:(0,c.Y)(ep,{onClick:function(){(0,b.u4)(b.AZ.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner",has_agent_session:!0,is_agent_suggesting_deployment:!0}),a&&(0,eh.pI)({action:"open_deployments_from_banner",sessionId:v}),A(),s()},onDismiss:A})}):null}var ew=t(81663),ey=t(19327),eb=t(5761),eS=t(7819),eY=t(68670),eA=t(85848),eC=t(56268),ex=t(39651),e_=t(98734),ek=t(32244),eD=(0,_.x)({iconButton:[k.wp.borderRadius(6),k.wp.color.foregroundDimmer,k.wp.height(24),{borderColor:x.LU.outlineDimmer}]});function eE(e){var n,t=e.tooltip,i=void 0===t?"Generate 24hr quick share link":t,o=e.timestamp,a=(0,l._)((0,u.useState)(),2),d=a[0],p=a[1],f=(0,l._)((0,u.useState)(i),2),h=f[0],m=f[1],v=(0,l._)((0,u.useState)(!1),2),w=v[0],y=v[1],b=(0,g.A)(),S=(0,eY.g$)(),Y=(0,eb.m)(),A=(0,ex.A)().showError,C=(0,u.useRef)(null);(0,u.useEffect)(function(){var e=C.current;return function(){e&&clearTimeout(e)}},[]);var x=function(e,n){(0,eC.Q)({context:"QuickShareButton",error:null!=n?n:Error(e),extras:{replId:b}}),A(e),p(void 0),m(i),y(!1)},_=(0,l._)((0,eS.z)({onError:function(e){return x("Something went wrong.",e)},onCompleted:function(e){if("CreateReplShareResult"!==e.createReplShare.__typename){x(e.createReplShare.message);return}C.current&&clearTimeout(C.current),C.current=setTimeout(function(){p(void 0),m(i)},1e3);var n=e.createReplShare.share;(0,e_.A)(n.url),m("Copied!"),p(!0),y(!1)}}),2),k=_[0],D=_[1].loading,E=(n=(0,r._)(function(){var e;return(0,s.YH)(this,function(n){switch(n.label){case 0:if(w)return[2];return p(!1),y(!0),[4,(0,eA.n9)({secrets:S,replId:b,apolloClient:Y})];case 1:return e=n.sent(),[4,k({variables:{input:{replId:b,timestamp:null!=o?o:new Date().toISOString(),envVars:e}}})];case 2:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)});return(0,c.Y)(B.K0,{alt:h,css:eD.iconButton,onClick:E,disabled:D||w,isTooltipOpen:d,children:D||w?(0,c.Y)(Z.A,{size:12}):(0,c.Y)(ek.A,{size:12})})}var eR=t(1175),eI=t(34805),eF=t(24481),eT=t(26325),eP=t(45350),eL=t(84911),eU=t(39667),eN=t(37535),eO=t(2301),eM=t(74547),eB=t(95427),eH=t(976),ez=t(46086),eW=t(96955),eG=t(68753),eV=(0,O.AH)([k.wp.borderRadius(6),k.wp.color.foregroundDimmer,k.wp.height(24),{borderColor:x.LU.outlineDimmer}]),ej=[k.wp.reset.button,H.cO,k.wp.rowWithGap(0),k.wp.flex.grow(0),k.wp.color.accentPositiveStronger,k.wp.fontSize("small"),k.wp.focusRing,{"&:hover":[k.wp.cursor.pointer,k.wp.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},k.wp.align.center,k.wp.py(0),k.wp.px(4)],eZ=(0,_.x)({root:[k.wp.border({color:x.LU.outlineDimmest,direction:"bottom"}),k.wp.p(2),k.wp.container("root"),k.wp.zIndex(1),k.wp.p(4),k.wp.gap(4)],devControls:[k.wp.gap(4)],navControls:[k.wp.align.center,k.wp.rowWithGap(4),k.wp.flex.growAndShrink(1)],urlWrapper:[k.wp.position.relative,k.wp.flex.row,k.wp.flex.growAndShrink(1)],urlOptionsRoot:[k.wp.flex.growAndShrink(1),k.wp.overflow("hidden")],urlOptions:[k.wp.p(8),k.wp.colWithGap(6),k.wp.borderRadius(4)],urlOptionsSection:[k.wp.pb(8),k.wp.border({direction:"bottom"}),{":last-child":{paddingBottom:0,borderBottom:0}}],urlOptionsTitle:[k.wp.flex.grow(1)],portRadioGroup:[k.wp.colWithGap(8)],portOption:[k.wp.rowWithGap(8),k.wp.color.foregroundDimmer],portOptionSelected:[k.wp.rowWithGap(8),k.wp.color.foregroundDefault],portOptionLabel:[{"&:hover":[k.wp.cursor.pointer,k.wp.color.foregroundDefault]}],url:ej,urlSelected:[ej,k.wp.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath2:[k.wp.py(0),k.wp.fontSize(12),k.wp.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[k.wp.backgroundColor.greenDimmer,k.wp.borderRadius(4),k.wp.p(2),{lineHeight:1,"&:hover":[k.wp.cursor.pointer,k.wp.backgroundColor.greenDefault]}],goButton:[k.wp.position.absolute,k.wp.right(4),k.wp.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,i._)({},k.kL.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],navButton:[k.wp.p(6),k.wp.borderRadius(4),k.wp.flex.shrink(0),{border:"none"}],fakeUrl:[k.wp.fontSize(12),k.wp.border(),{boxSizing:"content-box"},k.wp.borderRadius(6),k.wp.px(8),k.wp.py(2),k.wp.flex.grow(1),k.wp.rowWithGap(4),k.wp.align.center],devtoolsErrorsBadge:[k.wp.position.absolute,k.wp.center,k.wp.textAlign.center,k.wp.backgroundColor.accentNegativeStronger,k.wp.color.accentNegativeDimmest,k.wp.right(0),k.wp.top(-2),k.wp.p(2),k.wp.minWidth(14),k.wp.height(14),k.wp.borderRadius(16),k.wp.fontSize(10)],screenSizeMenuWrapper:[k.wp.p(4)]});function eq(e){var n=e.children;return(0,c.Y)(W.m_,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:n})}function eK(e){var n,t,r,i,o,a=e.url,s=e.webviewPageState,d=e.navigationState,p=e.forwardedPorts,m=e.devtoolsErrorCount,g=e.onToggleDevtools,v=e.onOpenPortSettings,w=e.onToggleAgentTheming,y=e.screenSize,b=e.setScreenSize,S=(0,f.A)(),Y=(0,h._P)({controlName:"flag-bufo-artist"}),A=(0,h._P)({controlName:ew.eC}),C=(n=Y?"theme.json":null,t=(0,eF.A)().fs,i=(r=(0,l._)((0,u.useState)(!1),2))[0],o=r[1],(0,u.useEffect)(function(){if(!n){o(!1);return}var e=t.watchPathStat(n,{onNewStat:function(e){if(!e.exists||e.type===ey.pt.Directory){o(!1);return}o(!0)},onError:function(){o(!1)}});return function(){e(),o(!1)}},[t,n]),i),x=Y&&C,_=(0,l._)((0,u.useState)(!1),2),R=_[0],I=_[1],F=(0,c.Y)(eX,{});"external-page"===s.state?F=(0,c.Y)(eQ,{backToLocal:function(){return d.refresh()}}):"active"===s.state&&(F=(0,c.Y)(eJ,{url:a,navigationState:d,forwardedPorts:p,onOpenPortSettings:v}));var T=(0,eR.a)();return(0,c.FD)(z.ui,{css:eZ.root,row:!0,align:"center",justify:"space-between",children:[F,(0,c.Y)(E.S,{row:!0,children:(0,c.Y)(E.S,{css:eZ.buttons,row:!0,align:"center",children:(0,c.FD)(E.S,{css:eZ.devControls,row:!0,children:["active"===s.state?(0,c.FD)(c.FK,{children:[A?(0,c.Y)(eE,{}):null,T?null:(0,c.FD)(eO.Wv,{isOpen:R,onOpenChange:function(e){I(e)},label:"Screen size",background:"higher",children:[(0,c.Y)(B.K0,{alt:"Screen size",css:eV,children:(0,c.Y)(eB.A,{size:12})}),(0,c.Y)(e0,{screenSize:y,setScreenSize:b})]}),x?(0,c.Y)(el.$n,{size:"small",variant:"outlined",onClick:w,css:eV,text:"Theme",iconLeft:(0,c.Y)(eH.A,{})}):null,(0,c.FD)(E.S,{css:k.wp.position.relative,children:[x?(0,c.Y)(B.K0,{alt:"Devtools",css:eV,onClick:g,children:(0,c.Y)(eW.A,{size:12})}):(0,c.Y)(el.$n,{size:"small",variant:"outlined",onClick:g,css:eV,text:"Devtools",iconLeft:(0,c.Y)(eW.A,{})}),m>0?(0,c.Y)(E.S,{css:eZ.devtoolsErrorsBadge,children:(0,c.Y)(D.EY,{variant:"small",multiline:!1,children:m>99?"99+":m.toString()})}):null]})]}):null,(0,c.Y)(eq,{children:x?(0,c.Y)(eU.A,{css:eV,href:d.getExternalUrl(),target:"_blank",alt:"Open in the browser",onClick:function(){U()},children:(0,c.Y)(j.A,{size:12})}):(0,c.Y)(M.v,{size:"small",variant:"outlined",css:eV,href:d.getExternalUrl(),target:"_blank",iconLeft:(0,c.Y)(j.A,{}),text:S?"Open in the browser":"New tab",onClick:function(){U()},noNextLink:!0})})]})})})]})}function e$(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=t.canNavigateToInputRelativeUrl,a=t.navigateToInputRelativeUrl,s=t.inputRelativeUrl,d=t.setInputRelativeUrl,p=t.selectedPort,f=t.setPort,h=(0,l._)((0,u.useState)(!1),2),m=h[0],g=h[1],v=(0,eL.c)(),w=v("radioGroup");return(0,c.FD)(E.S,{css:eZ.urlOptionsRoot,row:!0,gap:0,children:[(0,c.FD)(eO.Wv,{isOpen:m,onOpenChange:g,label:"Show URL Options",background:"higher",children:[(0,c.FD)("button",{css:m?eZ.urlSelected:eZ.url,children:[(0,c.Y)(eq,{children:(0,c.Y)(E.S,{css:eZ.urlDots,children:"{...}"})}),".".concat(n.includes("replit.dev")?"replit.dev":"repl.co").concat((0,Y.r$)(p)?"":":"+p)]}),(0,c.FD)(z.ui,{css:eZ.urlOptions,children:[(0,c.FD)(E.S,{css:eZ.urlOptionsSection,gap:4,children:[(0,c.FD)(E.S,{css:eZ.urlOptionsTitle,row:!0,gap:0,justify:"space-between",children:[(0,c.FD)(D.EY,{children:["Listening on ",(0,eI.A)("port",r.length),":"]}),(0,c.Y)(B.K0,{alt:"Networking tool",onClick:i,children:(0,c.Y)(ez.A,{})})]}),(0,c.Y)(eM.z,{tag:"fieldset",css:eZ.portRadioGroup,name:w,value:p.toString(),onChange:function(e){f(parseInt(e.target.value,10)),g(!1)},children:r.map(function(e,n){return(0,c.FD)(E.S,{css:p===e.configuration.externalPort?eZ.portOptionSelected:eZ.portOption,children:[(0,c.Y)(eM.s,{id:v(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,c.Y)("label",{htmlFor:v(e.configuration.externalPort),css:eZ.portOptionLabel,children:":".concat(e.configuration.localPort,"  :").concat(e.configuration.externalPort)})]},"".concat(n,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,c.Y)(eT.A,{url:n})]})]}),(0,c.Y)(H.pd,{css:eZ.urlPath2,style:m?{borderBottomRightRadius:0}:{},value:s,onKeyDown:function(e){"Enter"===e.key&&o&&a()},onChange:function(e){if(""===e.currentTarget.value){d("/");return}d(e.target.value)}})]})}function eJ(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=t.canNavigateBack,a=t.navigateBack,l=t.canNavigateForward,s=t.navigateForward,u=t.canNavigateToInputRelativeUrl,d=t.navigateToInputRelativeUrl,p=t.refresh,f=(0,T.vm)(),h=(0,N.Jn)("webviewpane.reload");return(0,c.FD)(E.S,{css:eZ.navControls,children:[(0,c.Y)(B.K0,{alt:"Back",tooltipDelay:"long",onClick:a,disabled:!o,css:eZ.navButton,children:(0,c.Y)(G.A,{})}),(0,c.Y)(B.K0,{alt:"Forward",tooltipDelay:"long",onClick:s,disabled:!l,css:eZ.navButton,children:(0,c.Y)(V.A,{})}),(0,c.Y)(B.K0,{alt:"Refresh".concat(h?" (".concat((0,N.LH)(h,f),")"):""),tooltipDelay:"long",onClick:p,css:eZ.navButton,children:t.isRefreshing?(0,c.Y)(Z.A,{}):(0,c.Y)(q.A,{})}),(0,c.FD)(E.S,{css:eZ.urlWrapper,children:[(0,c.Y)(e$,{url:n,navigationState:t,forwardedPorts:r,onOpenPortSettings:i}),(0,c.Y)(z.ui,{elevated:!0,css:eZ.goButton,children:(0,c.Y)(B.K0,{alt:"Go to URL",disabled:!u,onClick:d,size:18,tooltipContents:(0,c.Y)(N._y,{keyCombo:"Enter"}),children:(0,c.Y)(V.A,{})})})]})]})}function eQ(e){var n=e.backToLocal,t=(0,l._)((0,u.useState)(!1),2),r=t[0],i=t[1];return(0,c.FD)(E.S,{css:eZ.navControls,children:[(0,c.Y)(el.$n,{size:"small",variant:"outlined",onClick:function(){n(),i(!0)},loading:r,css:eV,text:"Back to my page",iconLeft:r?(0,c.Y)(Z.A,{}):(0,c.Y)(G.A,{})}),(0,c.FD)(z.ui,{elevated:!0,css:eZ.fakeUrl,children:[(0,c.Y)(W.m_,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,c.Y)(eG.A,{})}),(0,c.Y)(D.EY,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eX(){return(0,c.Y)(E.S,{css:eZ.navControls,children:(0,c.FD)(z.ui,{elevated:!0,css:eZ.fakeUrl,children:[(0,c.Y)(W.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,c.Y)(Z.A,{})}),(0,c.Y)(D.EY,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}function e0(e){var n=e.screenSize,t=e.setScreenSize;return(0,c.FD)(eN.W1,{"aria-label":"Screen size menu",onAction:function(e){if("Full size"===e)t(void 0);else{var n=eP.U.find(function(n){return n.title===e});if(!n)return;t(n)}},css:eZ.screenSizeMenuWrapper,children:[(0,c.Y)(e1,{isSelected:void 0===n,title:"Full size"}),(0,c.Y)(eN.wv,{}),eP.U.map(function(e){return(0,c.Y)(e1,{isSelected:(null==n?void 0:n.title)===e.title,title:e.title},e.title)})]})}function e1(e){var n=e.isSelected,t=e.title;return(0,c.FD)(eN.iy,{id:t,textValue:t,children:[(0,c.Y)(D.EY,{children:t}),n?(0,c.Y)(es.A,{}):null]})}var e2=t(60762),e5=t(55195),e4=t(78542),e3=t(32904),e8=function e(n){var t=this,r=n.initialRelativeUrl,i=n.initialPort,o=n.onChange,a=n.navigateTo;(0,e4._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,n){t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1,t.notifyChanges()},this.notifyChanges=function(){t.onChange(t.canGoBack(),t.canGoForward(),t.getCurrentRelativeUrl(),t.getCurrentPort(),t.isRefreshing)},this.canGoBack=function(){return t.historyIndex>0},this.canGoForward=function(){return t.historyIndex<t.history.length-1},this.getCurrentRelativeUrl=function(){return t.history[t.historyIndex].relativeUrl},this.getCurrentPort=function(){return t.history[t.historyIndex].port},this.push=function(e,n){(e!==t.getCurrentRelativeUrl()||n!==t.getCurrentPort())&&(t.history=t.history.slice(0,t.historyIndex+1),t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1),t.notifyChanges()},this.relativeUrlUpdate=function(e){t.push(e,t.getCurrentPort())},this.back=function(){L({actionType:"history_back"}),t.canGoBack()&&(t.historyIndex-=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.forward=function(){L({actionType:"history_forward"}),t.canGoForward()&&(t.historyIndex+=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.navigate=function(e,n){var r=null!=n?n:t.getCurrentPort();t.navigateTo.current(e,r),t.push(e,r)},this.refresh=function(){var e,n;L({actionType:"refresh"}),t.isRefreshing=!0,t.notifyChanges(),t.navigateTo.current(null!==(e=t.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(n=t.getCurrentPort())&&void 0!==n?n:80).finally(function(){t.isRefreshing=!1,t.notifyChanges()})},this.setPort=function(e){var n=t.getCurrentRelativeUrl();t.navigate(n,e)},this.onChange=o,this.isRefreshing=!1,this.navigateTo=a,this.init(r,i)};function e7(e){var n=e.url,t=e.port,r=e.path,i=e.id,o=new URL(n);return(0,Y.r$)(t)?o.hostname.endsWith(".localhost")?o.port="8081":o.port="":o.port=t.toString(),o.searchParams.set("initialPath",r),o.searchParams.set("id",i),o}var e6=t(27189),e9=t(10842),ne=t(12029),nn=t(69641),nt=t(65640),nr=e9.ZU.Object({primary:e9.ZU.String(),variant:e9.ZU.Union([e9.ZU.Literal("professional"),e9.ZU.Literal("tint"),e9.ZU.Literal("vibrant")]),appearance:e9.ZU.Union([e9.ZU.Literal("light"),e9.ZU.Literal("dark"),e9.ZU.Literal("system")]),radius:e9.ZU.Number()}),ni=function(e){try{var n=JSON.parse(e),t=ne.oj(nr,n);return new nn.A(t.primary),t}catch(e){return nt.error(e),null}},no=t(36736),na=t(27049),nl=t(66118),ns=t(42022);function nc(e){return(0,c.Y)(ns.Ay,(0,a._)((0,o._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M15 3.75H5v-1.5h10A4.75 4.75 0 0 1 19.75 7v10A4.75 4.75 0 0 1 15 21.75H5v-1.5h10A3.25 3.25 0 0 0 18.25 17V7A3.25 3.25 0 0 0 15 3.75Z",clipRule:"evenodd"})}))}var nu=t(76971),nd=[{label:"Light",value:"light",icon:(0,c.Y)(nu.A,{})},{label:"Dark",value:"dark",icon:(0,c.Y)(nl.A,{})},{label:"System",value:"system",icon:(0,c.Y)(ez.A,{})}],np=[{label:"None",value:0,icon:(0,c.Y)(function(e){return(0,c.Y)(ns.Ay,(0,a._)((0,o._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M18.25 3.75H5v-1.5h14.75v19.5H5v-1.5h13.25V3.75Z",clipRule:"evenodd"})}))},{})},{label:"Small",value:.5,icon:(0,c.Y)(nc,{})},{label:"Big",value:1,icon:(0,c.Y)(function(e){return(0,c.Y)(ns.Ay,(0,a._)((0,o._)({},e),{children:(0,c.Y)("path",{fillRule:"evenodd",d:"M10 3.75H5v-1.5h5c5.385 0 9.75 4.365 9.75 9.75s-4.365 9.75-9.75 9.75H5v-1.5h5a8.25 8.25 0 0 0 0-16.5Z",clipRule:"evenodd"})}))},{})}],nf={variant:"professional",primary:"hsl(222.2 47.4% 11.2%)",appearance:"light",radius:.5},nh={variant:[{label:"Professional",value:"professional"},{label:"Tint",value:"tint"},{label:"Vibrant",value:"vibrant"}],primary:[{value:"oklch(70% 0.1 20)",label:"Red",hex:"#d68585"},{value:"oklch(70% 0.1 50)",label:"Orange",hex:"#d18c65"},{value:"oklch(70% 0.1 ".concat(87,")"),label:"Yellow",hex:"#b99a51"},{value:"oklch(70% 0.1 ".concat(120,")"),label:"Lime",hex:"#96a85e"},{value:"oklch(70% 0.1 140)",label:"Green",hex:"#7dae72"},{value:"oklch(70% 0.1 170)",label:"Teal",hex:"#55b395"},{value:"oklch(70% 0.1 200)",label:"Cyan",hex:"#40b1b7"},{value:"oklch(70% 0.1 230)",label:"Blue",hex:"#54aad1"},{value:"oklch(70% 0.1 260)",label:"Indigo",hex:"#7a9fdd"},{value:"oklch(70% 0.1 290)",label:"Violet",hex:"#9d94d9"},{value:"oklch(70% 0.1 320)",label:"Magenta",hex:"#ba8ac5"},{value:"oklch(70% 0.1 350)",label:"Pink",hex:"#ce84a7"}],appearance:nd,radius:np},nm=t(1232),ng=t(17544),nv=t(1478),nw=(0,nv.v)(["size"]),ny=nw.cssVars,nb=nw.styleTokens,nS=(0,u.forwardRef)(function(e,n){var t=e.size,r=(0,P._)(e,["size"]);return(0,c.Y)(ng.q,(0,a._)((0,o._)({style:(0,i._)({},ny.size,"".concat(null!=t?t:16,"px")),css:nY},r),{ref:n}))}),nY=(0,O.AH)([{width:nb.size,height:nb.size},k.wp.borderRadius("default"),{boxShadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)"}]),nA=t(22611),nC=t(27233),nx=t(38520),n_=t(29567);function nk(e){return(0,c.FD)(ns.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_367)",children:[(0,c.Y)("path",{fill:x.LU.backgroundDefault,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:x.LU.white,d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".3"}),(0,c.Y)("path",{fill:x.LU.white,d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z",opacity:".7"}),(0,c.Y)("path",{fill:x.LU.accentPrimaryDefault,d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:"#fff",opacity:".3",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_367",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}function nD(e){return(0,c.FD)(ns.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_368)",children:[(0,c.Y)("path",{fill:x.LU.foregroundDefault,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:"#74767A",d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".3"}),(0,c.Y)("path",{fill:x.LU.outlineStrongest,d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z"}),(0,c.Y)("path",{fill:x.LU.accentPrimaryDefault,d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:"#74767A",opacity:".3",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_368",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}function nE(e){return(0,c.FD)(ns.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_369)",children:[(0,c.Y)("path",{fill:x.LU.accentPrimaryStrongest,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:x.LU.accentPrimaryDefault,d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".5"}),(0,c.Y)("path",{fill:x.LU.white,d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z",opacity:".7"}),(0,c.Y)("path",{fill:x.LU.accentPrimaryDefault,d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:x.LU.accentPrimaryDefault,opacity:".5",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_369",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}function nR(e){return(0,c.FD)(ns.Ay,(0,a._)((0,o._)({},e),{children:[(0,c.FD)("g",{clipPath:"url(#clip0_7288_370)",children:[(0,c.Y)("path",{fill:x.LU.accentPrimaryDefault,d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,c.Y)("path",{fill:"#fff",d:"M7.5 5.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0ZM9 5.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H9.75A.75.75 0 0 1 9 5.25Z",opacity:".5"}),(0,c.Y)("path",{fill:"#fff",d:"M3 19.5A1.5 1.5 0 0 1 4.5 18h3a1.5 1.5 0 0 1 0 3h-3A1.5 1.5 0 0 1 3 19.5Z",opacity:".6"}),(0,c.Y)("path",{fill:"#fff",d:"M10.5 19.5A1.5 1.5 0 0 1 12 18h7.5a1.5 1.5 0 0 1 0 3H12a1.5 1.5 0 0 1-1.5-1.5Z"}),(0,c.Y)("rect",{width:"18",height:"6",x:"3",y:"9",fill:"#fff",opacity:".5",rx:".75"})]}),(0,c.Y)("defs",{children:(0,c.Y)("clipPath",{id:"clip0_7288_370",children:(0,c.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}var nI=function(e){var n=e.appearance,t=e.onChange;return(0,c.Y)(nx.l,{items:nh.appearance,selectedKey:null!=n?n:null,onSelectionChange:function(e){return t(e)},"aria-label":"Appearance",children:function(e){return(0,c.Y)(nC.nh,{label:e.label,icon:e.icon,id:e.value},e.value)}})},nF=function(e){var n=e.primary,t=e.onChange,r=!nh.primary.find(function(e){return e.value===n});return(0,c.FD)(nx.l,{onSelectionChange:function(e){return t(e)},selectedKey:r?"custom":null!=n?n:null,"aria-label":"Primary Color",children:[nh.primary.map(function(e){return(0,c.Y)(nC.nh,{icon:(0,c.Y)(nS,{color:e.hex}),label:e.label,id:e.value},e.value)}),r?(0,c.Y)(nC.nh,{label:"Custom Color",id:"custom",isDisabled:!0},"custom"):null]})},nT=function(e){var n=e.radius,t=e.onChange,r=!nh.radius.find(function(e){return e.value===n});return(0,c.FD)(nx.l,{selectedKey:r?"custom":null!=n?n:null,onSelectionChange:function(e){return t(e)},"aria-label":"Radius",children:[nh.radius.map(function(e){return(0,c.Y)(nC.nh,{label:e.label,id:e.value,icon:e.icon},e.value)}),r?(0,c.Y)(nC.nh,{icon:(0,c.Y)(nc,{}),label:"Custom Radius",id:"custom",isDisabled:!0},"custom"):null]})};function nP(e){var n,t,r,i,l=e.onChange,s=e.current,u=e.canReset,d=e.onReset,p=e.handleClose;return(0,c.Y)(na.M,(0,a._)((0,o._)({},(0,nm.l)({align:"center",justify:"center"})),{children:(0,c.FD)(nA.Y,{role:"presentation",children:[(0,c.Y)(nI,{appearance:null!==(n=null==s?void 0:s.appearance)&&void 0!==n?n:null,onChange:function(e){return l((0,a._)((0,o._)({},nf,s),{appearance:e}))}}),(0,c.Y)(nF,{primary:null!==(t=null==s?void 0:s.primary)&&void 0!==t?t:null,onChange:function(e){return l((0,a._)((0,o._)({},nf,s),{primary:e}))}}),(0,c.Y)(nx.l,{items:nh.variant,onSelectionChange:function(e){return s?l((0,a._)((0,o._)({},s),{variant:e})):l((0,a._)((0,o._)({},nf),{variant:e}))},selectedKey:null!==(r=null==s?void 0:s.variant)&&void 0!==r?r:null,"aria-label":"Theme Variant",children:function(e){var n;return(0,c.Y)(nC.nh,{icon:nL(e.value,null!==(n=null==s?void 0:s.appearance)&&void 0!==n?n:null),label:e.label,id:e.value},e.value)}}),(0,c.Y)(nT,{radius:null!==(i=null==s?void 0:s.radius)&&void 0!==i?i:null,onChange:function(e){return l((0,a._)((0,o._)({},nf,s),{radius:e}))}}),(0,c.Y)(el.$n,{disabled:!u,text:"Undo",onClick:d,iconLeft:(0,c.Y)(n_.A,{})}),(0,c.Y)(el.$n,{text:"","aria-label":"Close",iconLeft:(0,c.Y)(ec.A,{}),onClick:p})]})}))}var nL=function(e,n){switch(e){case"tint":return(0,c.Y)(nE,{});case"vibrant":return(0,c.Y)(nR,{});case"professional":if("dark"===n)return(0,c.Y)(nk,{});return(0,c.Y)(nD,{})}},nU=function(){var e,n,t,i,o,a,c,d,p,f,g,v,w,y,b=(0,h._P)({controlName:"flag-bufo-artist"}),S=(0,l._)((0,u.useState)(null),2),Y=S[0],A=S[1],C=(e=b?"./theme.json":null,n=(0,eF.A)().fs,(0,u.useCallback)((t=(0,r._)(function(t){var r;return(0,s.YH)(this,function(i){switch(i.label){case 0:if(!e)return[2];return[4,n.readFile(e)];case 1:if((r=i.sent()).error)return[2];return[2,n.writeFile(e,t(r.content.toString()))]}})}),function(e){return t.apply(this,arguments)}),[n,e]));i=b?"./theme.json":null,o=function(e){if(e){var n=ni(e);A(null!=n?n:null)}},a=(0,eF.A)().fs,c=(0,m.A)(o),(0,u.useEffect)(function(){if(i)return a.watchFile(i,{onChange:function(e){c.current(e.toString())},onError:function(){c.current(null)},onMoveOrDelete:function(){c.current(null)}})},[a,c,i]);var x=(0,u.useCallback)(function(e){C(function(){return JSON.stringify(e,null,2)})},[C]),_=(0,l._)((p=(d=(0,l._)((0,u.useState)(0),2))[0],f=d[1],g=(0,eF.A)().git,v=(0,u.useCallback)((0,r._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return[4,g.restoreFiles(["./theme.json"],"HEAD")];case 1:return e.sent(),f(function(e){return e+1}),[2]}})}),[g]),(y=(0,no.A)((w=(0,r._)(function(e){var n;return(0,s.YH)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:if((n=t.sent()).error)return[2,n];return[2,{error:null,data:n.changes.some(function(e){return"theme.json"===e.path})}]}})}),function(e){return w.apply(this,arguments)}),[p]))&&!y.error?[y.data,v]:[!1,v]),2);return[Y,x,_[0],_[1]]},nN=function(e){var n=e.handleClose,t=(0,l._)(nU(),4),r=t[0],i=t[1],o=t[2],a=t[3],s=(0,u.useCallback)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,b.u4)(b.AZ.AGENT_THEME_RESET),a.apply(void 0,(0,e6._)(n))},[a]),d=(0,u.useCallback)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,b.u4)(b.AZ.AGENT_THEME_CHANGED),i.apply(void 0,(0,e6._)(n))},[i]);return(0,c.Y)(nP,{current:r,onChange:d,canReset:o,onReset:s,handleClose:n})},nO=(0,nv.v)(["width","height","transform","borderRadius","border"]),nM=nO.cssVars,nB=nO.styleTokens,nH=80;function nz(e,n){var t=function(e,n){var t,r,i,o=void 0;if((null==e?void 0:null===(t=e.ports)||void 0===t?void 0:t.type)==="external")o=null==e?void 0:null===(i=e.ports)||void 0===i?void 0:i.port;else if((null==e?void 0:null===(r=e.ports)||void 0===r?void 0:r.type)==="local"){var a=n.find(function(n){var t;return n.configuration.localPort===(null===(t=e.ports)||void 0===t?void 0:t.port)});o=null==a?void 0:a.configuration.externalPort}return o}(e,n);return t||(n.length>0?n.find(function(e){return 80===e.configuration.externalPort})?80:n[0].configuration.externalPort:void 0)}var nW=(0,_.x)({iframeWrapper:[k.wp.flex.growAndShrink(1),k.wp.overflow("hidden"),{'&[data-is-readonly-preview="true"]':[{cursor:"not-allowed"}]}],iframeMiddle:[k.wp.position.relative,{borderRadius:nB.borderRadius,border:nB.border,width:nB.width,height:nB.height}],iframeInner:[k.wp.position.absolute,{top:0,left:0,overflow:"hidden",width:nB.width,height:nB.height,transform:nB.transform,transformOrigin:"top left"}],scalingFactor:[k.wp.color.foregroundDimmest,k.wp.fontSize(x.LU.fontSizeSmall),{position:"absolute",top:46,left:0,right:0,textAlign:"center"}],desktopAppWebview:[k.wp.flex.growAndShrink(1),{border:"none",backgroundColor:x.LU.white}],iframe:[k.wp.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:x.LU.white,colorScheme:"normal"}],self:[k.wp.backgroundColor.backgroundHigher,k.wp.height("100%"),k.wp.borderRadius(4),{overflow:"hidden"}]}),nG=(0,u.forwardRef)(function(e,n){var t,_,k,D,R,I,T,P,U,N,O,M,B,H,z,W,G,V,j,Z,q,K,$,Q,X,ee,en,et,er,ei,eo,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg,ew,ey,eb,eS,eY,eA,eC,ex,e_,ek,eD,eE,eR,eI,eF,eT,eP,eL,eU,eN=e.initialPort,eO=e.initialPath,eM=void 0===eO?"/":eO,eB=e.shouldShowAgentDeployBanner,eH=e.openPane,ez=e.containerRef,eW=e.openNetworkingTool,eG=e.ports,eV=e.container,ej=e.className,eZ=e.previewScreenSize,eq=e.setPreviewScreenSize,e$=e.onCurrentRelativeUrlChanged,eJ=e.isReadonlyPreview,eQ=(0,l._)((0,u.useState)(!1),2),eX=eQ[0],e0=eQ[1],e1=(0,u.useId)(),e4=(0,g.A)(),e6=(0,f.A)(),e9=(0,C.qX)(),ne=(0,u.useRef)(null),nn=(0,u.useRef)(!1),nt=(0,l._)((0,u.useState)(0),2),nr=nt[0],ni=nt[1],no=(_=(t=(0,l._)((0,u.useState)(void 0),2))[0],k=t[1],{resizeRef:(0,w.A)(function(e){k(e)}),screenSize:(0,u.useMemo)(function(){if(eZ&&_){var e=_.width-80,n=_.height-80,t=eZ.screen,r=t.width,i=t.height,o=r/i,a=n*o,l=e,s=e/o;a<=e&&(l=a,s=n);var c=Math.min(l/r,s/i);return{width:r,height:i,scaledWidth:l,scaledHeight:s,scale:c}}},[eZ,_])}),na=no.resizeRef,nl=no.screenSize,ns=(0,u.useMemo)(function(){return!e6&&!e9},[e6,e9]),nc=(0,Y.Ik)({ports:eG,container:eV,noDevToolsSuffix:!ns}),nu=null!=nc,nd=(0,A.w)(eG),np=(0,v.g)(),nf=(D=(0,l._)((0,u.useState)({visible:new d.N(!1)}),1)[0],R=(0,u.useRef)(null),I=(0,u.useCallback)(function(e){if("screenshot"===e.type){var n;null===(n=R.current)||void 0===n||n.call(R,e.result.ok?e.result.data:null)}},[]),T=(0,u.useCallback)((0,r._)(function(){return(0,s.YH)(this,function(e){return[2,Promise.race([new Promise(function(e){var n,t;R.current=e,null===(t=ne.current)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage({type:"takeScreenshot",source:"manual"},"*")}),new Promise(function(e){setTimeout(function(){return e(null)},3e3)})]).finally(function(){R.current=null})]})}),[ne]),(0,u.useEffect)(function(){return D.visible.subscribe(function(e){var n,t;null===(t=ne.current)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage({type:"drawToolsVisibility",source:"manual",visibility:e},"*")})},[ne,D]),(0,u.useMemo)(function(){return{state:D,onReceiveDrawEvent:I,onTakeScreenshot:T}},[I,D,T])),nh=(P=(0,u.useRef)([]),U=(0,S.I)(function(e){return(0,r._)(function(){var n;return(0,s.YH)(this,function(t){return(n=P.current,P.current=[],n&&n.length)?[2,e.agentToolWebviewLogs.store.rpc(n)]:[2]})})},[]),N=(0,u.useMemo)(function(){return(0,p.A)((0,r._)(function(){return(0,s.YH)(this,function(e){return[2,null==U?void 0:U()]})}),{wait:500})},[U]),(0,u.useCallback)(function(e,n){P.current.push({method:e,message:n}),N()},[N]));(0,u.useEffect)(function(){e6&&nu&&ne.current.addEventListener("dom-ready",function(){nn.current=!0})},[e6,nu]),(0,u.useEffect)(function(){eX&&(0,b.u4)(b.AZ.AGENT_THEME_BAR_SHOWN)},[eX]);var nm=(0,u.useCallback)((O=(0,r._)(function(e,n){var t,r,i,o;return(0,s.YH)(this,function(a){return ne.current&&(null===(t=ne.current)||void 0===t?void 0:t.contentWindow)&&(null==nc?void 0:nc.iframeSrc)?(ns?((i=(0,Y.jq)(null==nc?void 0:nc.iframeSrc,n)).searchParams.set("initialPath",e),i.searchParams.set("id",e1),r=i.href):(o=new URL(e,nc.iframeSrc),n&&(o=(0,Y.jq)(o.toString(),n)),r=o.toString()),ne.current.src=r,[2,new Promise(function(e){var n,t,r=function(){var e,n;clearTimeout(a),null===(e=ne.current)||void 0===e||e.removeEventListener("load",i),null===(n=ne.current)||void 0===n||n.removeEventListener("error",o)},i=function(){r(),e()},o=function(){r(),e()},a=setTimeout(function(){r(),e()},1e4);null===(n=ne.current)||void 0===n||n.addEventListener("load",i),null===(t=ne.current)||void 0===t||t.addEventListener("error",o)})]):[2]})}),function(e,n){return O.apply(this,arguments)}),[e1,ns,nc]),ng=(0,m.A)(nm),nv=(0,C.GK)({isSupported:e9,navigateIframeRef:ng,onReceiveWebviewLog:nh,initialPort:eN,initialPath:eM,baseUrl:null==nc?void 0:nc.baseUrl}),nw=(B=(M={replId:e4,webviewId:e1,isHTML:np,iframeOrWebviewRef:ne,iframeSrc:null==nc?void 0:nc.iframeSrc,onDevtoolsErrorCountChange:ni,onReceiveWebviewLog:nh,onReceiveDrawEvent:nf.onReceiveDrawEvent,bonsaiWebviewBridge:nv}).replId,H=M.webviewId,z=M.isHTML,W=M.iframeOrWebviewRef,G=M.iframeSrc,V=M.onDevtoolsErrorCountChange,j=M.onReceiveDrawEvent,Z=M.onReceiveWebviewLog,q=M.bonsaiWebviewBridge,$=(K=(0,l._)((0,u.useState)({state:"loading",relativeUrl:null}),2))[0],Q=K[1],X=(0,f.A)(),(0,u.useEffect)(function(){if(X&&G){if(!W.current)throw Error("Expected iframe to be defined when iframerc exists");var e=W.current,n=new URL(G);return e.addEventListener("did-navigate",t),e.addEventListener("did-navigate-in-page",t),function(){e.removeEventListener("did-navigate",t),e.removeEventListener("did-navigate-in-page",t)}}function t(e){var t=new URL(e.url),r=t.pathname+t.search+t.hash;if(t.hostname!==n.hostname){Q(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}Q(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[X,G,W]),(0,u.useEffect)(function(){if(q)return q.path.subscribe(function(e){Q(function(n){return"active"===n.state&&"path"===n.relativeUrl?n:{state:"active",relativeUrl:e}})})},[q]),(0,u.useEffect)(function(){if(!X&&!q&&G){var e=new URL(G);return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}function n(n){if(n.origin&&"null"!==n.origin&&new URL(n.origin).hostname===e.hostname&&"object"===(0,e2._)(n.data)&&(null===(t=n.data)||void 0===t?void 0:t.type)){var t,r=n.data;if(null==r||!r.id||r.id===H)switch(r.type){case"event":var i=n.data,l=i.event,s=i.payload;"error"===l?e5.Cp(s):(0,b.u4)(l,(0,a._)((0,o._)({},s),{replId:B,isHTML:z}));break;case"show-badge":V(n.data.count);break;case"forward-log":Z(r.method,r.message);break;case"screenshot":j(r);break;case"page-navigation":if(r.payload.isExternal){Q(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}var c=r.payload.relativeUrl;Q(function(e){return"active"===e.state&&e.relativeUrl===c?e:{state:"active",relativeUrl:c}})}}}},[B,H,X,z,G,W,V,Z,j,q]),{webviewPageState:$}).webviewPageState;(0,u.useEffect)(function(){e$&&nw.relativeUrl&&e$(nw.relativeUrl)},[e$,nw]);var ny=(0,u.useCallback)((ee=(0,r._)(function(e,n){var t,r;return(0,s.YH)(this,function(i){return(ni(0),nf.state.visible.set(!1),nc)?e6?nn.current?(t=ne.current,r=new URL(e,nc.iframeSrc),n&&(r=(0,Y.jq)(r.toString(),n)),[2,t.loadURL(r.toString())]):[2]:(nv&&nv.handleNavigateTo({port:null!=n?n:80,path:e,base:nc.baseUrl}),[2,nm(e,n)]):[2]})}),function(e,n){return ee.apply(this,arguments)}),[nf.state.visible,nc,e6,nv,nm]),nb=(et=(en={initialPort:eN,initialPath:eM,presentationalUrl:null==nc?void 0:nc.presentationUrl,webviewPageState:nw,navigateTo:function(e,n){return ny(e,n)}}).initialPort,er=en.initialPath,ei=en.presentationalUrl,eo=en.webviewPageState,ea=en.navigateTo,es=(el=(0,l._)((0,u.useState)(!1),2))[0],ec=el[1],ed=(eu=(0,l._)((0,u.useState)(!1),2))[0],ep=eu[1],eh=(ef=(0,l._)((0,u.useState)("Loading..."),2))[0],em=ef[1],ew=(eg=(0,l._)((0,u.useState)(80),2))[0],ey=eg[1],eS=(eb=(0,l._)((0,u.useState)(!1),2))[0],eY=eb[1],eA=(0,u.useCallback)(function(e,n,t,r,i){ec(e),ep(n),em(t),ey(r),eY(i)},[]),eC=(0,m.A)(ea),ex=(0,m.A)(et),e_=(0,m.A)(er),ek=(0,e3.A)(function(){return new e8({initialRelativeUrl:e_.current,initialPort:ex.current,onChange:eA,navigateTo:eC})},[e_,ex,eA,eC]),(0,u.useEffect)(function(){"loading"===eo.state&&ex.current!==ew&&ek.setPort(ex.current)},[et,ex,ek,ew,eo]),(0,u.useEffect)(function(){"active"===eo.state&&ek.relativeUrlUpdate(eo.relativeUrl)},[eo.state,eo.relativeUrl,ek]),(0,u.useEffect)(function(){ek.navigate(e_.current,et)},[et,e_,ek]),eD=(0,u.useCallback)(function(){L({actionType:"navigated_to",path:eh}),ek.navigate(eh)},[eh,ek]),eE=(0,u.useCallback)(function(){return(0,Y.jq)(ei||"",ew)+eh},[eh,ei,ew]),eR=(0,u.useCallback)(function(){return ek.back()},[ek]),eI=(0,u.useCallback)(function(){return ek.forward()},[ek]),eF=(0,u.useCallback)(function(){return ek.refresh()},[ek]),eT=(0,u.useCallback)(function(e){return ek.setPort(e)},[ek]),{canNavigateBack:es,canNavigateForward:ed,navigateBack:eR,navigateForward:eI,canNavigateToInputRelativeUrl:(0,u.useMemo)(function(){return eh!==eo.relativeUrl},[eh,eo.relativeUrl]),navigateToInputRelativeUrl:eD,inputRelativeUrl:eh,setInputRelativeUrl:em,refresh:eF,setPort:eT,selectedPort:ew,getExternalUrl:eE,isRefreshing:eS}),nS=(0,A.ff)(nb.selectedPort);(0,u.useEffect)(function(){nS&&nS.configuration.isLocalhost&&"loading"===nw.state&&nb.refresh()},[nb,nS,nw.state]),(0,u.useImperativeHandle)(n,function(){return{refresh:nb.refresh,navigateTo:ny}},[ny,nb]);var nY=(0,h._P)({controlName:"flag-skip-deployment-target"});if(!nc)return null;var nA=(0,c.Y)(E.S,{css:nW.iframeWrapper,"data-is-readonly-preview":eJ,innerRef:na,align:"center",justify:"center",children:(0,c.Y)(E.S,{style:(eL={overflow:"hidden"},(0,i._)(eL,nM.width,nl?"".concat(nl.scaledWidth,"px"):"100%"),(0,i._)(eL,nM.height,nl?"".concat(nl.scaledHeight,"px"):"100%"),(0,i._)(eL,nM.borderRadius,nl?x.LU.space4:"0"),(0,i._)(eL,nM.border,nl?"1px solid ".concat(x.LU.outlineDefault):"none"),eL),css:nW.iframeMiddle,children:(0,c.Y)(E.S,{style:(eU={},(0,i._)(eU,nM.width,nl?"".concat(nl.width,"px"):"100%"),(0,i._)(eU,nM.height,nl?"".concat(nl.height,"px"):"100%"),(0,i._)(eU,nM.transform,"scale(".concat(null!==(eP=null==nl?void 0:nl.scale)&&void 0!==eP?eP:1,")")),eU),css:nW.iframeInner,children:e6?(0,c.Y)("webview",(0,o._)({"data-cy":"ws-webview",ref:ne,src:e7({url:nc.iframeSrc,port:eN,path:eM,id:e1}).toString(),css:nW.desktopAppWebview},y.A)):(0,c.Y)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:ne,src:e7({url:nc.iframeSrc,port:eN,path:eM,id:e1}).toString(),css:nW.iframe},y.A))})})});return eJ?(0,c.FD)(E.S,{className:ej,css:nW.self,innerRef:ez,children:[(0,c.Y)(F,{}),nA]}):(0,c.FD)(E.S,{className:ej,css:nW.self,innerRef:ez,children:[e9?(0,c.Y)(J,{webviewPageState:nw,navigationState:nb,bonsaiWebviewBridge:nv}):(0,c.Y)(eK,{replId:e4,url:nc.presentationUrl,webviewPageState:nw,navigationState:nb,forwardedPorts:nd,devtoolsErrorCount:nr,onToggleAgentTheming:function(){e0(function(e){return!e})},onToggleDevtools:function(){if(L({actionType:"devtools_opened"}),ni(0),!e6){var e,n;null===(n=ne.current)||void 0===n||null===(e=n.contentWindow)||void 0===e||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var t=ne.current;t&&nn&&(t.isDevToolsOpened()?t.closeDevTools():t.openDevTools())},onOpenPortSettings:eW,screenSize:eZ,setScreenSize:eq}),eX?(0,c.Y)(nN,{handleClose:function(){return e0(!1)}}):null,(0,c.Y)(ev,{replId:e4,shouldShowAgentDeployBanner:eB,onClick:function(){return eH({type:"deployments",flow:(0,a._)((0,o._)({},nY&&{skipIntro:eB}),{isAgentDeployment:eB})})}}),nl?(0,c.FD)(E.S,{css:nW.scalingFactor,children:[Math.round(100*nl.scale),"%"]}):null,nA]})})},45350:(e,n,t)=>{"use strict";t.d(n,{R:()=>i,U:()=>o});var r=t(40174),i=r.ZU.Object({title:r.ZU.String(),screen:r.ZU.Object({height:r.ZU.Number(),width:r.ZU.Number()})}),o=[{title:"iPhone SE",screen:{height:667,width:375}},{title:"iPhone XR",screen:{height:896,width:414}},{title:"iPhone 12 Pro",screen:{height:844,width:390}},{title:"iPhone 14 Pro Max",screen:{height:932,width:430}},{title:"Pixel 7",screen:{height:915,width:412}},{title:"Samsung Galaxy S8+",screen:{height:740,width:360}},{title:"Samsung Galaxy S20 Ultra",screen:{height:915,width:412}},{title:"Surface Duo",screen:{height:720,width:540}},{title:"Galaxy Z Fold 5",screen:{height:882,width:344}},{title:"Samsung Galaxy A51/71",screen:{height:914,width:412}}]},63764:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(30758),i=t(84504);function o(e){var n=e.container,t=e.runner,o=e.refreshWebView;(0,r.useEffect)(function(){var e,r=[];return"outputs"===t.mode&&r.push(t.onBlockChanged(function(n){n.type===i._B.EXECUTION&&1===n.data.exitCode&&(e=Date.now())})),r.push(n.onPortOpened(function(n){var t=n.isVnc;if(n.isForwarded&&!t){var r=Date.now();void 0!==e&&r-e<1e3||null==o||o()}})),function(){return r.forEach(function(e){return e()})}},[n,o,t])}},42393:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(30758),i=t(84504);function o(e){var n=e.runner,t=e.refreshWebView;(0,r.useEffect)(function(){if("html"===n.mode)return n.onStateChanged(function(e){e===i.ll.RUNNING&&(null==t||t())})},[n,t])}},83085:(e,n,t)=>{"use strict";t.d(n,{O:()=>eR,A:()=>eP});var r=t(66622),i=t(94086),o=t(25204),a=t.n(o),l=t(30758),s=t(84321),c=t(51439),u=t(14178),d=t(95123),p=t(82436),f=t(29665),h=t(27189),m=t(51297),g=t(98251),v=t(35642),w=t(24955),y=t(10168),b=t(32842),S=(0,y.x)({connectorSegmentBorder:[b.wp.position.absolute,b.wp.left(0),b.wp.width(18),b.wp.height(8),b.wp.top("100%"),{borderRight:"2px solid ".concat(w.LU.outlineDimmer)}],parallelSegmentBorder:[b.wp.position.absolute,b.wp.top(0),b.wp.left(-12),b.wp.bottom(0),b.wp.height(25),b.wp.width(18),{borderLeft:"2px solid ".concat(w.LU.outlineDimmer),borderBottom:"2px solid ".concat(w.LU.outlineDimmer),borderRadius:"0 0 0 50px"}],parallelSegmentConnectorBorder:[b.wp.position.absolute,b.wp.top(0),b.wp.bottom(0),b.wp.left(-12),b.wp.height("115%"),{borderLeft:"2px solid ".concat(w.LU.outlineDimmer)}],marker:[b.wp.position.absolute,b.wp.top(-2),b.wp.left(-3),b.wp.height(4),b.wp.width(4),b.wp.backgroundColor.foregroundDimmest,b.wp.borderRadius("full")],sequentialMarkerBorder:[b.wp.position.relative,b.wp.top(4),b.wp.height(12),b.wp.width(30),{borderTop:"2px solid ".concat(w.LU.outlineDimmer),borderRight:"2px solid ".concat(w.LU.outlineDimmer),borderRadius:"0 10px 0 0"}],parallelMarkerBorder:[b.wp.position.relative,b.wp.top(4),b.wp.height(12),b.wp.width(30),{borderLeft:"2px solid ".concat(w.LU.outlineDimmer)}]});function Y(e){var n=e.top,t=e.bottom,r=e.height,o=e.mode,a=e.dragAble,l=e.hideBottom,s=void 0!==l&&l;return"sequential"===(void 0===o?"sequential":o)?(0,i.Y)(i.FK,{children:s?null:(0,i.Y)("div",{css:S.connectorSegmentBorder,style:{top:n,bottom:t,height:r}})}):(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{css:S.parallelSegmentBorder,style:{top:n,bottom:t,height:r,width:void 0===a||a?12:18}}),s?null:(0,i.Y)("div",{css:S.parallelSegmentConnectorBorder})]})}function A(e){var n=e.top,t=e.bottom,r=e.height,o=e.width;return"sequential"===e.mode?(0,i.Y)("div",{css:S.sequentialMarkerBorder,style:{top:n,bottom:t,height:r,width:o},children:(0,i.Y)("div",{css:S.marker})}):(0,i.Y)("div",{css:S.parallelMarkerBorder,style:{top:n,bottom:t,height:r,width:o},children:(0,i.Y)("div",{css:S.marker})})}var C=t(20837),x=t(76306),_=t(25930),k=t(40174),D=t(49711),E=t(16483),R=t(27382),I=t(57218),F=t(20387),T=t(28354),P=t(27233),L=t(38520);function U(e){switch(e.description){case"shell.exec":return(0,i.Y)(O,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value});case"workflow.run":return(0,i.Y)(N,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value});case"packager.installForLanguage":return(0,i.Y)(M,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value});case"packager.installForAll":return(0,i.Y)(M,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:"all"});case"workspace.openWebview":return(0,i.Y)(B,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value});default:return(0,i.Y)(i.FK,{})}}function N(e){var n=(0,F.mP)().filter(function(e){var n;return!(null===(n=e.metadata)||void 0===n?void 0:n.generated)}).map(function(e){return{name:e.name,id:e.name}});return(0,i.Y)(L.l,{isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Workflow",selectedKey:e.value,onSelectionChange:function(n){e.handleChange({type:"args",args:n})},items:n,children:function(e){return(0,i.Y)(P.nh,{label:e.name},e.id)}})}function O(e){return(0,i.Y)(T.pd,{disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"shell command to execute",onChange:function(n){var t=n.currentTarget.value;e.handleChange({type:"args",args:t})},required:e.required,value:e.value,type:e.type})}function M(e){var n=(0,I.J)().configs.map(function(e){return{id:e.language}});return n.push({id:"all"}),(0,i.Y)(L.l,{isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Language to install",selectedKey:e.value,onSelectionChange:function(n){"all"===n?e.handleChange({type:"task",task:"packager.installForAll"}):e.handleChange({type:"task",task:"packager.installForLanguage",args:n})},items:n,children:function(e){return(0,i.Y)(P.nh,{label:e.id},e.id)}})}function B(e){return(0,i.Y)(T.pd,{disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"port number (ex: 3000)",onChange:function(n){var t=n.currentTarget.value;e.handleChange({type:"args",args:Number(t)})},required:e.required,value:e.value,type:e.type})}var H=t(25877),z=t(95235),W=t(31955),G=t(40889),V=t(8367),j=t(58506),Z=t(27093),q=t(4595),K=t(33747),$=t(8351),J=new Map(E.Jc.anyOf.map(function(e){return[e.properties.task.const,e]})),Q=["packager.installForAll","packager.installForLanguage","shell.exec","workflow.run"],X={"shell.exec":{description:"Execute Shell Command",icon:(0,i.Y)(K.A,{})},"packager.installForLanguage":{description:"Install Packages",icon:(0,i.Y)(Z.A,{})},"workflow.run":{description:"Run Workflow",icon:(0,i.Y)(q.A,{})}},ee=new Set(J.keys()),en={TASK:"task"};function et(e){var n=(0,F.b7)(e),t=(0,F.AK)(),r=(0,F.vJ)(),o=(0,F.wS)();return n?(0,i.Y)(ei,{disabled:e.disabled,format:e.format,lastTask:e.lastTask,taskIndex:e.taskIndex,initialConfig:n,onArgsBlur:o,onChange:function(n,t){null!==n&&r(e,n,{persist:"task"===t})},onReorder:e.onReorder,onRemove:function(){return t(e)}}):(0,i.Y)(G.EY,{children:"Task not found"})}k.ZU.Object({type:k.ZU.Literal("task"),taskIndex:k.ZU.Number()});var er=(0,y.x)({root:[b.wp.borderRadius(4),b.wp.p(6),b.wp.rowWithGap(6)],dragIcon:[b.wp.pt(6),{cursor:"grab"}],wrapper:[b.wp.flex.growAndShrink(1),b.wp.colWithGap(4)],taskSelect:[b.wp.flex.growAndShrink(1)],taskInputs:[b.wp.flex.growAndShrink(1),b.wp.colWithGap(4)],dropIndicator:[b.wp.height(4),b.wp.backgroundColor.blueDefault,b.wp.m(8),b.wp.borderRadius()]});function ei(e){var n,t,o,a,s,c,u=(0,l.useRef)(null),d=(0,r._)((0,l.useState)((null===(n=e.initialConfig)||void 0===n?void 0:n.task)||null),2),p=d[0],f=d[1],h=(0,r._)((0,l.useState)(e.initialConfig&&"args"in e.initialConfig?e.initialConfig.args:null),2),m=h[0],g=h[1],v=e.disabled?Object.entries(X).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return(0,C._)({id:t},i)}):Object.entries(X).filter(function(e){var n=(0,r._)(e,2),t=n[0];return n[1],Q.includes(t)}).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return(0,C._)({id:t},i)}),w=p?function(e){var n,t=J.get(e);if(!t||!("args"in t.properties))return null;var r=null===(n=t.required)||void 0===n?void 0:n.includes("args");return{type:t.properties.args.type,required:r}}(p):null,y=(0,r._)((0,x.i)(function(){return{type:en.TASK,item:function(){return{type:"task",taskIndex:e.taskIndex}},collect:function(e){return{isDragging:!!e.isDragging()}}}},[e]),2),b=y[0].isDragging,S=y[1],Y=(0,r._)((0,_.H)(function(){return{accept:"task",drop:function(n){var t=n.taskIndex;e.onReorder(t,e.taskIndex)},collect:function(n){var t=n.getItem(),r=null==t?void 0:t.taskIndex,i=!!n.isOver()&&r!==e.taskIndex;return{isAbove:i&&r>e.taskIndex,isBelow:i&&r<e.taskIndex}}}},[e]),2),A=Y[0],k=A.isAbove,E=A.isBelow,I=Y[1];function F(n){var t,r="task"===n.type?{task:"task"===n.type?n.task:p,args:null!==(t=n.args)&&void 0!==t?t:void 0}:{task:p,args:n.args};f(r.task),g(r.args);var i=r.task?J.get(r.task):null;if(!i)return null;try{e.onChange(D.WT.Decode(i,r),n.type)}catch(t){e.onChange(null,n.type)}}return e.disabled||S(I(u)),(0,i.FD)(i.FK,{children:[k?(0,i.Y)(H.a,{css:er.dropIndicator}):null,(0,i.Y)(W.ui,{elevated:!0,disabled:e.disabled,innerRef:u,style:{opacity:b?.5:1},css:er.root,children:(0,i.Y)(V.S,{css:er.wrapper,children:(0,i.FD)(V.S,{row:!0,gap:4,align:"start",justify:"space-between",children:[e.disabled?null:(0,i.Y)(V.S,{css:er.dragIcon,children:(0,i.Y)(j.A,{})}),(0,i.FD)(V.S,{css:er.taskInputs,children:[(0,i.Y)(L.l,{isDisabled:e.disabled,"aria-label":"Select a task",selectedKey:"packager.installForAll"===p?"packager.installForLanguage":p,onSelectionChange:function(e){(function(e){if(!ee.has(e))throw Error("Invalid task name: ".concat(e," (expected one of ").concat(Array.from(ee),")"))})(e),F({type:"task",task:e})},items:v,css:er.taskSelect,children:function(e){return(0,i.Y)(P.nh,{label:e.description,icon:e.icon},e.id)}}),(0,i.Y)(U,{description:p,disabled:e.disabled,type:null==w?void 0:w.type,value:e.format?(0,R.ZM)(null!==(t=null==m?void 0:m.toString())&&void 0!==t?t:""):null!==(o=null==m?void 0:m.toString())&&void 0!==o?o:"",required:null!==(a=null==w?void 0:w.required)&&void 0!==a&&a,handleChange:F,onArgsBlur:e.onArgsBlur})]}),e.disabled?null:(0,i.Y)(V.S,{row:!0,gap:8,children:(0,i.Y)(z.K0,{disabled:null!==(s=e.lastTask)&&void 0!==s&&s,alt:null!==(c=e.lastTask)&&void 0!==c&&c?"Workflow must have at least one task":"Remove task",onClick:e.onRemove,children:(0,i.Y)($.A,{})})})]})})}),E?(0,i.Y)(H.a,{css:er.dropIndicator}):null]})}var eo=t(40172),ea=t(24239),el=t(43249);function es(e){var n=e.mode,t=void 0===n?"sequential":n,r=e.onChange,o=e.disabled;return(0,i.FD)(ea.e2,{disabled:void 0!==o&&o,name:"mode",onChange:r,row:!0,value:null!=t?t:"sequential",children:[(0,i.Y)(ea.$O,{id:"sequential",text:"Sequential",value:"sequential"}),(0,i.Y)(ea.$O,{id:"parallel",text:"Parallel",value:"parallel"})]})}var ec=(0,y.x)({root:[b.wp.p(8),b.wp.colWithGap(8),b.wp.maxHeight(520),b.wp.overflow("auto"),b.wp.backgroundColor.backgroundDefault,b.wp.borderRadius(4),b.wp.border({color:w.LU.backgroundHigher})],header:[b.wp.pb(4)],connectors:[b.wp.position.relative,b.wp.zIndex(0)],inputRow:[b.wp.position.relative],switchInputs:[b.wp.position.relative,b.wp.align.center,b.wp.justify.spaceBetween],nameWarning:[{color:w.LU.redDefault}],task:[b.wp.position.relative,b.wp.zIndex(1)],tasks:[b.wp.pl(12),b.wp.position.relative],taskItem:[b.wp.position.relative]});function eu(e){var n,t,o=e.index,a=e.readOnly,s=(0,F.wS)(),c=(0,F.j3)(o),u=(0,F.XO)(),d=(0,F.Ss)(),p=(0,F.af)(),f=(0,F.IW)(),m=void 0!==a&&a||(null==c?void 0:null===(n=c.metadata)||void 0===n?void 0:n.generated)||(null==c?void 0:c.name)==="Project"&&"agent"===c.author,v=(0,l.useMemo)(function(){return u.filter(function(e){return e===(null==c?void 0:c.name)}).length>1},[c,u]),w=(0,l.useMemo)(function(){var e;return Array.from({length:null!==(e=null==c?void 0:c.tasks.length)&&void 0!==e?e:0},function(e){return(0,g.Ak)()})},[null==c?void 0:c.tasks.length]);if(!c)return(0,i.Y)(G.EY,{children:"Workflow not found"});function y(e,n){var t=null==c?void 0:c.tasks;if(t&&e!==n){var i=(0,h._)(t),a=(0,r._)(i.splice(e,1),1)[0];i.splice(n,0,a);var l=(0,r._)(w.splice(e,1),1)[0];w.splice(n,0,l),p({workflowIndex:o},i,{persist:!0}),s()}}return(0,i.FD)(V.S,{css:ec.root,children:[(0,i.Y)(G.EY,{variant:"small",color:"dimmest",children:"Workflow"}),v?(0,i.FD)(G.EY,{variant:"small",css:ec.nameWarning,children:[c.name," already exists"]}):null,(0,i.Y)(V.S,{css:ec.header,row:!0,gap:8,align:"center",children:(0,i.Y)(T.pd,{onBlur:s,value:c.name,placeholder:"Name of your workflow",onChange:function(e){d(o,function(n){n.name=e.currentTarget.value})},disabled:m})}),(0,i.Y)(V.S,{css:ec.switchInputs,row:!0,gap:4,children:(0,i.FD)(V.S,{children:[(0,i.Y)(G.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.Y)(es,{mode:c.mode,onChange:function(e){d(o,function(n){n.mode=e}),s()},disabled:m})]})}),(0,i.FD)(V.S,{css:ec.inputRow,gap:4,children:[(0,i.Y)(G.EY,{variant:"small",color:"dimmest",children:"Tasks"}),c.tasks.length>0?(0,i.Y)(A,{mode:null!==(t=c.mode)&&void 0!==t?t:"sequential"}):null,(0,i.FD)(V.S,{css:ec.tasks,gap:8,children:[c.tasks.map(function(e,n,t){var r,a;return(0,i.FD)(V.S,{css:ec.taskItem,children:[(0,i.Y)(Y,{dragAble:!m,css:ec.connectors,mode:c.mode,hideBottom:n>=t.length-1}),(0,i.Y)(et,{css:ec.task,disabled:m,format:null!==(a=null===(r=c.metadata)||void 0===r?void 0:r.generated)&&void 0!==a&&a,lastTask:1===t.length,onReorder:y,workflowIndex:o,taskIndex:n})]},w[n])}),m?null:(0,i.Y)(eo.$n,{iconLeft:(0,i.Y)(el.A,{}),text:"Add task",onClick:function(){f(o)}})]})]})]})}var ed=t(11822),ep=t(65599),ef=t(61465),eh=t(42838),em=(0,y.x)({wrapper:[b.wp.borderRadius(4),b.wp.border({color:w.LU.backgroundHigher})],root:[b.wp.colWithGap(8),b.wp.maxHeight(520),b.wp.overflow("hidden")],inputs:[b.wp.mb(4),b.wp.p(8)],tasks:[b.wp.pl(12)],nameWarning:[{color:w.LU.redDefault}],taskItem:[b.wp.position.relative],buttons:[b.wp.flex.growAndShrink(1),b.wp.justify.end,b.wp.p(8),b.wp.border({direction:"top",color:w.LU.backgroundHigher})],nameInput:[b.wp.my(4)]});function eg(e){var n=(0,r._)((0,l.useState)(""),2),t=n[0],o=n[1],a=(0,r._)((0,l.useState)([{id:(0,g.Ak)(),config:null}]),2),s=a[0],c=a[1],u=(0,r._)((0,l.useState)("sequential"),2),d=u[0],f=u[1],w=(0,F.XO)(),y=(0,l.useMemo)(function(){return!w.includes(t)},[t,w]),b=(0,l.useMemo)(function(){if(!t)return(0,v._)("Missing name");if(!y)return(0,v._)("".concat(t," already exists"));if(0===s.length)return(0,v._)("Missing tasks");var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=s[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null===c.config)return(0,v._)("Invalid task");n.push(c.config)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,v.Ok)({name:t,mode:d,author:e.userId,tasks:n})},[t,d,s,y,e.userId]);function S(e,n){if(s&&e!==n){var t=(0,h._)(s),i=(0,r._)(t.splice(e,1),1)[0];t.splice(n,0,i),c(t)}}return(0,i.Y)(W.ui,{css:em.wrapper,children:(0,i.FD)(ed.lV,{css:em.root,onSubmit:function(n){(0,p.u4)(p.AZ.WORKFLOW_CREATED,{pane:"workflows",shellExecCount:s.reduce(function(e,n){var t;return(null===(t=n.config)||void 0===t?void 0:t.task)==="shell.exec"?e+1:e},0),packagerCount:s.reduce(function(e,n){var t,r;return(null===(t=n.config)||void 0===t?void 0:t.task)==="packager.installForAll"||(null===(r=n.config)||void 0===r?void 0:r.task)==="packager.installForLanguage"?e+1:e},0),mode:d,userId:e.userId}),n.preventDefault(),b.ok&&e.onCreate(b.value)},children:[(0,i.FD)(V.S,{css:em.inputs,gap:8,children:[(0,i.FD)(V.S,{gap:2,children:[(0,i.Y)(G.EY,{variant:"small",color:"dimmest",children:"Workflow"}),y?null:(0,i.Y)(G.EY,{variant:"small",css:em.nameWarning,children:"Duplicate workflow name"}),(0,i.Y)(T.pd,{css:em.nameInput,required:!0,placeholder:"Name",value:t,onChange:function(e){return o(e.currentTarget.value)}})]}),(0,i.FD)(V.S,{gap:2,children:[(0,i.Y)(G.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.Y)(es,{mode:d,disabled:!1,onChange:f})]}),(0,i.FD)(V.S,{gap:2,children:[(0,i.Y)(G.EY,{variant:"small",color:"dimmest",children:"Tasks"}),s.length?(0,i.Y)(A,{mode:d}):null,(0,i.FD)(V.S,{css:em.tasks,gap:8,children:[(0,i.Y)(ef.A,{children:s.map(function(e,n){var t;return(0,i.FD)(V.S,{css:em.taskItem,children:[(0,i.Y)(ei,{taskIndex:n,disabled:!1,format:!1,onReorder:S,onChange:function(e){c(function(t){return(0,m.jM)(t,function(t){t[n].config=e})})},onRemove:function(){c(function(e){return(0,m.jM)(e,function(e){e.splice(n,1)})})},initialConfig:null!==(t=s[n].config)&&void 0!==t?t:void 0}),(0,i.Y)(Y,{mode:d,hideBottom:n>=s.length-1})]},e.id)})}),(0,i.Y)(eo.$n,{text:"Add task",type:"button",onClick:function(){c(function(e){return(0,m.jM)(e,function(e){e.push({id:(0,g.Ak)(),config:null})})})},iconLeft:(0,i.Y)(el.A,{})})]})]})]}),(0,i.FD)(V.S,{css:em.buttons,row:!0,gap:12,children:[(0,i.Y)(eo.$n,{text:"Cancel",onClick:e.onCancel}),(0,i.Y)(ep.m_,{tooltip:b.ok?"Save Workflow":b.error,children:(0,i.Y)(eo.$n,{iconLeft:(0,i.Y)(eh.A,{}),colorway:"primary",disabled:!b.ok,text:"Save",type:"submit"})})]})]})})}var ev=t(41595),ew=t(56573),ey=t(76985),eb=t(74893),eS=t(69929),eY=t(93532),eA=t(1694),eC=t(14753),ex=t(86955),e_=t(49321),ek=t(68753);function eD(e){var n=(0,F.cQ)(),t=(0,f.I)(function(t){return function(){(0,p.u4)(p.AZ.WORKFLOW_RAN,{source:"workflowsPane"});var r,i=null===(r=n())||void 0===r?void 0:r[e];return!!i&&t.workflows.runWorkflow.rpc({workflowId:i.name})}},[n,e]),r=(0,F.Jl)(e),i=(0,f.I)(function(e){return function(){(0,p.u4)(p.AZ.WORKFLOW_STOPPED,{source:"workflowsPane"});var n,t=null===(n=r())||void 0===n?void 0:n.runId;return!!t&&e.workflows.stopRun.rpc({runId:t})}},[r]),o=(0,F.ch)(e);return(0,l.useMemo)(function(){return t&&i?{run:t,stop:i,isRunningObservable:o}:null},[t,i,o])}function eE(e){var n=e.index,t=(0,F.j3)(n),r=eD(n),o=(0,d.A)(null==r?void 0:r.isRunningObservable);return t&&r?(0,i.Y)(V.S,{row:!0,gap:8,children:(0,i.Y)(eo.$n,{size:"small",iconLeft:o?(0,i.Y)(e_.A,{}):(0,i.Y)(ex.A,{}),text:t.name,onClick:function(){o?r.stop():r.run()}})}):null}function eR(){var e=(0,F.hk)();return(0,i.Y)(V.S,{gap:8,children:e.map(function(e){return(0,i.Y)(eE,{index:e},e)})})}var eI=(0,y.x)({header:[b.wp.flex.growAndShrink(1)],wrapper:[b.wp.borderRadius(4),b.wp.backgroundColor.backgroundHigher],workflowName:[b.wp.flex.growAndShrink(1),b.wp.rowWithGap(8)],expandedContent:[b.wp.border({direction:"top"})]});function eF(e){var n,t=e.index,o=e.readOnly,a=(0,F.j3)(t),s=(0,F.nd)(t),c=eD(t),u=(0,d.A)(null==c?void 0:c.isRunningObservable),p=(0,r._)((0,l.useState)(!1),2),f=p[0],h=p[1],m=(0,F.oE)(),g=(0,F.jP)(),v=(0,l.useMemo)(function(){return(null==a?void 0:a.name)===g},[a,g]);return a?(0,i.FD)(W.ui,{children:[(0,i.Y)(ew.A,{css:eI.wrapper,headerContent:(0,i.FD)(V.S,{css:eI.header,row:!0,gap:4,children:[c?(0,i.Y)(z.K0,{alt:u?"Stop workflow":"Run workflow",onClick:function(){u?c.stop():c.run()},children:u?(0,i.Y)(e_.A,{}):(0,i.Y)(ex.A,{})}):null,(0,i.Y)(V.S,{css:eI.workflowName,align:"center",justify:"start",row:!0,children:(0,i.Y)(G.EY,{multiline:!1,children:a.name})}),(0,i.FD)(V.S,{row:!0,gap:4,align:"center",children:[s?(0,i.Y)(ep.m_,{tooltip:s,children:(0,i.Y)(ek.A,{color:w.LU.accentNegativeDefault})}):null,v?(0,i.Y)(ep.m_,{tooltip:"Assigned to run button",maxWidth:150,children:(0,i.Y)(eb.K,{text:"Run Button",colorway:"positive"})}):null,"agent"===a.author||(null===(n=a.metadata)||void 0===n?void 0:n.generated)?(0,i.Y)(ep.m_,{tooltip:"Generated by ".concat(a.author),maxWidth:150,children:(0,i.Y)(eb.K,{text:"Generated",colorway:"purple"})}):(0,i.Y)(z.K0,{alt:"Delete",onClick:function(){h(!0)},children:(0,i.Y)($.A,{})})]})]}),children:(0,i.Y)(V.S,{css:eI.expandedContent,children:(0,i.Y)(eu,{index:t,readOnly:o})})}),(0,i.Y)(ey.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,i.Y)(eA.A,{name:"Workflow",description:a.name,confirmDescription:"workflow",hideModal:function(){return h(!1)},delete:function(){return m(t)}})})]}):null}var eT=(0,y.x)({wrapper:[b.wp.p(8),b.wp.colWithGap(8)],generatedList:[b.wp.py(8),{opacity:.7}],loading:[b.wp.center,b.wp.p(16)],error:[b.wp.center,b.wp.p(16)],searchBarWrapper:[b.wp.flex.growAndShrink(1)],divider:[b.wp.height(2),b.wp.backgroundColor.accentPrimaryDimmest]});function eP(e){(0,F.gR)(e.isActive);var n=(0,r._)((0,l.useState)(""),2),t=n[0],o=n[1],d=(0,r._)((0,l.useState)(!1),2),f=d[0],h=d[1],m=(0,c.jt)(),g=(0,c.hT)(),v=(0,r._)((0,l.useState)(!1),2),w=v[0],y=v[1],b=(0,F.hk)(),S=(0,F.mP)(),Y=(0,F.XO)(),A=(0,F.Eo)(),C=(0,F.oh)(),x=(0,F.wb)(),_=(0,ev.i)(),k=!!x||m&&(g===s.g32.AGENT_STATE_RUNNING||g===s.g32.AGENT_STATE_PAUSING),D=(0,l.useMemo)(function(){return b.reduce(function(e,n){return Y[n].toLowerCase().includes(t.toLowerCase())&&e.push(n),e},[]).sort(function(e,n){var t,r,i,o,a=null!==(i=(null===(t=S[e].metadata)||void 0===t?void 0:t.generated)||"agent"===S[e].author)&&void 0!==i&&i,l=null!==(o=(null===(r=S[n].metadata)||void 0===r?void 0:r.generated)||"agent"===S[n].author)&&void 0!==o&&o;return a&&!l?1:!a&&l?-1:0})},[t,b,Y,S]),E=(0,l.useMemo)(function(){return D.filter(function(e){var n=S[e];return!(n.metadata&&n.metadata.generated)&&"agent"!==n.author})},[D,S]),R=(0,l.useMemo)(function(){return D.filter(function(e){return"agent"===S[e].author})},[D,S]),I=(0,l.useRef)(),T=function(){clearTimeout(I.current),I.current=setTimeout(function(){(0,p.u4)(p.AZ.WORKFLOWS_SEARCHED)},1e3)};return C?(0,i.Y)(V.S,{css:eT.loading,children:(0,i.Y)(eC.A,{})}):(0,i.FD)(V.S,{css:eT.wrapper,children:[(0,i.FD)(V.S,{row:!0,gap:8,children:[(0,i.Y)(V.S,{css:eT.searchBarWrapper,children:(0,i.Y)(eS.I,{placeholder:"Search for a workflow...",value:t,onChange:function(e){T(),o(e.target.value)},onClear:function(){return o("")}})}),(0,i.Y)(eo.$n,{isDisabled:k,colorway:"primary",iconLeft:(0,i.Y)(el.A,{}),text:"New Workflow",disabled:f,onClick:function(){h(!0)}})]}),(0,i.Y)(H.a,{}),f?(0,i.FD)(i.FK,{children:[(0,i.Y)(eg,{onCreate:function(e){A(e),h(!1)},onCancel:function(){h(!1)},userId:null==_?void 0:_.id}),(0,i.Y)(H.a,{css:eT.divider})]}):null,x?(0,i.Y)(V.S,{css:eT.error,children:(0,i.Y)(ep.m_,{tooltip:x.extras,children:(0,i.Y)(eY.N,{icon:(0,i.Y)(ek.A,{}),colorway:"red",text:x.message})})}):null,(0,i.FD)(V.S,{gap:8,children:[E.length||x?null:(0,i.Y)(V.S,{align:"center",children:(0,i.Y)(G.EY,{children:(0,i.Y)(a(),{target:"_blank",href:u.ik.WORKFLOWS,children:"Learn more about configuring Workflows"})})}),E.length?E.map(function(e){return(0,i.Y)(eF,{readOnly:k,index:e},e)}):null,R.length?(0,i.Y)(V.S,{children:(0,i.Y)(ew.A,{headerContent:"Agent Workflows",expanded:w,onClick:function(){return y(!w)},children:(0,i.Y)(V.S,{css:eT.generatedList,gap:8,children:R.map(function(e){return(0,i.Y)(eF,{index:e,readOnly:k},e)})})})}):null]})]})}},83522:(e,n,t)=>{"use strict";t.d(n,{W:()=>a,z:()=>o});var r=t(30758),i=new(t(75362)).N(new Map);function o(e){var n=e.type,t=e.position,o=void 0===t?"bottom":t,a=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=a.current;if(e instanceof HTMLElement)return i.update(function(t){var r=new Map(t);return r.set(n,{element:e,position:o}),r}),function(){i.update(function(t){var r,i=new Map(t);return(null===(r=i.get(n))||void 0===r?void 0:r.element)===e&&i.delete(n),i})}},[n,o]),a}function a(e){var n=i.current.get(e);return null!=n?n:null}},44603:(e,n,t)=>{"use strict";t.d(n,{c:()=>h,l:()=>function e(n,t){if(!["context","action"].includes(n.data.type))throw Error("Command type not supported: "+n.data.type);if("action"===n.data.type)return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if(!(e=n.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,t.sent()]}})})}};var l,s=n.commands;if(!s)throw Error("Context command must have commands");return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{}),type:n.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,s({active:r.active,searchQuery:r.searchQuery,path:a=(0,i._)(t.path).concat([{data:n.data}])})];case 1:return[2,o.sent().map(function(n){return e(n,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}});var r=t(13454),i=t(27189),o=t(5482),a=t(94086),l=t(40174),s=t(49711),c=t(53234),u=t(80062),d=t(12867),p=t(48729),f=l.ZU.Object({id:l.ZU.Optional(l.ZU.String()),icon:l.ZU.Optional(l.ZU.String()),type:l.ZU.Union([l.ZU.Literal("action"),l.ZU.Literal("context")]),label:l.ZU.String(),description:l.ZU.String(),contributions:l.ZU.Optional(l.ZU.Array(l.ZU.Enum(d.P)))});function h(e,n){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,n){var t,i,a;return(0,o.YH)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(t=l.sent(),!s.WT.Check(f,t))throw Error("Invalid command");if(i=null,"string"==typeof t.icon){if(""===t.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=t.icon}if(a={data:{label:t.label,description:t.description,type:t.type,iconPath:i,id:t.id?t.id:void 0},extension:n.extension},t.contributions&&(a.data.contributions=t.contributions,n.logger.warn("Command ".concat(t.label," uses deprecated contributions field"))),"context"===t.type){var c;a.commands=(c=(0,r._)(function(t){var r,i,a,l,s,c,u,d,p;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=t.active,i=t.searchQuery,a=t.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,searchQuery:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return s=o.sent(),n.logger.error(s.message,{commandError:s,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:c=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<c))return[3,9];return p=u.push,[4,h(l[d],n)];case 7:p.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),function(e){return c.apply(this,arguments)})}else a.run=(0,r._)(function(){var t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return t=r.sent(),n.logger.error(t.message,{runError:t,api:"command"}),[2,{type:"error",message:t.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},56677:(e,n,t)=>{"use strict";t.d(n,{oR:()=>y,HG:()=>b,s_:()=>S,Ju:()=>Y});var r=t(66622),i=t(30758),o=t(20837),a=t(45009),l=t(30632),s=t(72813),c=t(75838);function u(){var e=(0,a._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(u()),h=(0,l.J1)(d()),m=t(57827),g=t(83733),v=t(24481),w=t(271);function y(){var e,n=(0,i.useContext)(w.A),t=(0,r._)((0,i.useState)(null!==(e=null==n?void 0:n.replConfigIsExtension)&&void 0!==e&&e),2),o=t[0],a=t[1],l=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return l.watch(function(e){var n,t,r;a(null!==(r=null===(t=e.config)||void 0===t?void 0:null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r)})},[l]),o}function b(){var e=(0,r._)((0,i.useState)(null),2),n=e[0],t=e[1],o=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return o.watch(function(e){var n,r,i=null===(r=e.config)||void 0===r?void 0:null===(n=r.extension)||void 0===n?void 0:n.extensionID;i?t((0,m.PM)(i)):t(null)})},[o]),n}var S=function(){var e=(0,v.A)().dotReplit,n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var n,t,r=null===(t=e.config)||void 0===t?void 0:null===(n=t.extension)||void 0===n?void 0:n.staticDirectory;r?o({path:r,relativePath:r.replace(/^\.\//,"")}):o(null)})},[e]),t};function Y(){var e,n,t,a,l,u=(0,g.A)(),d=(e={variables:{replId:u}},n=(0,o._)({},p,e),s.I(f,n)),m=d.data,w=d.loading,y=d.error,b=(0,r._)((t=(0,o._)({},p,void 0),c.n(h,t)),1)[0],S=!w&&!y&&!!(null==m?void 0:m.repl)&&"Repl"===m.repl.__typename&&null!==(l=null===(a=m.repl.config)||void 0===a?void 0:a.isExtension)&&void 0!==l&&l,Y=(0,r._)((0,i.useState)(!1),2),A=Y[0],C=Y[1],x=(0,v.A)().dotReplit;(0,i.useEffect)(function(){return x.watch(function(e){var n,t,r;C(null!==(r=null===(t=e.config)||void 0===t?void 0:null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r)})},[x]),(0,i.useEffect)(function(){w||y||A===S||b({variables:{replId:u,isExtension:A},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:u,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:A}}}}})},[w,y,u,S,A,b])}},12867:(e,n,t)=>{"use strict";t.d(n,{P:()=>r});var r=function(e){return e.CommandBar="commandbar",e.FiletreeContextMenu="filetree-context-menu",e.SidebarSearch="sidebar-search",e.EditorContextMenu="editor-context-menu",e}({})},8221:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(75895),i=t(13454),o=t(5482),a=t(76862),l=t(84504);function s(e){var n;(0,a.b)((n=(0,i._)(function(n,t){var i,a,s,c,u,d,p,f,h,m,g;return(0,o.YH)(this,function(o){switch(o.label){case 0:i=t.signal,s=(a=n.agentToolRun.workspace.stream({},{signal:i})).reqWritable,c=a.resReadable,u=!1,d=!1,o.label=1;case 1:o.trys.push([1,7,8,13]),f=(0,r._)(c),o.label=2;case 2:return[4,f.next()];case 3:if(!(u=!(h=o.sent()).done))return[3,6];if(!(m=h.value).ok||"run"!==m.payload.$kind)return[3,5];return e.getRunState()===l.ll.RUNNING&&e.stopRun(),[4,e.run(l.QG.AGENT_RUN)];case 4:o.sent(),s.write({$kind:"ok"}),o.label=5;case 5:return u=!1,[3,2];case 6:return[3,13];case 7:return g=o.sent(),d=!0,p=g,[3,13];case 8:if(o.trys.push([8,,11,12]),!(u&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(d)throw p;return[7];case 12:return[7];case 13:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[e])}},9809:(e,n,t)=>{"use strict";t.d(n,{L:()=>h});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  fragment AssistantAuthorizations on OrgAuthorizations {\n    basicAssistant: useAiAssistant(mode: basic) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    advancedAssistant: useAiAssistant(mode: advanced) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query GetAssistantReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AssistantAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AssistantAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(81536),f=t(83733);function h(){var e,n,t,i,o=(0,f.A)(),l=(0,p.R)(o),s=l.orgId,u=l.loading,h=l.hasError,m=(e={variables:{orgId:s}},n=(0,r._)({},c,e),a.I(d,n)),g=m.data,v=m.loading,w=m.error,y=m.refetch;return u||h||v||w?{refetch:y,loading:u||v}:void 0===s?{authorizations:(null==g?void 0:null===(i=g.currentUser)||void 0===i?void 0:i.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?g.currentUser.personalOrgAuthorizations:void 0,refetch:y,loading:!1}:{authorizations:(null==g?void 0:null===(t=g.currentUser)||void 0===t?void 0:t.org.__typename)==="Org"?g.currentUser.org.authorizations:void 0,refetch:y,loading:!1}}},97802:(e,n,t)=>{"use strict";t.d(n,{T:()=>i});var r=t(30758);function i(e){var n,t,i=e.mode,o=e.authz,a=!0,l=void 0;return"advanced"===i?(a=null!==(n=null==o?void 0:o.advancedAssistant.isAuthorized)&&void 0!==n&&n,l=null==o?void 0:o.advancedAssistant.message):"basic"===i&&(a=null!==(t=null==o?void 0:o.basicAssistant.isAuthorized)&&void 0!==t&&t,l=null==o?void 0:o.basicAssistant.message),(0,r.useMemo)(function(){return{isAuthorized:a,message:l}},[a,l])}},1:(e,n,t)=>{"use strict";t.d(n,{h:()=>o});var r=t(30758),i=t(85471);function o(){var e=(0,i.pE)("agentReplay","boolean"),n=(0,i.pE)("agentOnboarding","boolean");(0,r.useEffect)(function(){(e||n)&&window.history.replaceState(null,"",window.location.origin+window.location.pathname)},[e,n])}},19310:(e,n,t)=>{"use strict";t.d(n,{Hn:()=>d,dz:()=>a,fZ:()=>u});var r=t(30758),i=t(99813),o=t(72653),a=(0,r.createContext)(null),l=(0,i.eU)(null),s=(0,i.eU)(null,function(e,n,t){n(l,t)});function c(){var e=(0,r.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,o.md)(l,{store:c()})}function d(e){var n=(0,o.md)(l,{store:c()}),t=(0,o.Xr)(s,{store:c()});(0,r.useEffect)(function(){n!==e&&t(e)},[e,n,t])}},43740:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(30758),i=t(53654),o=t(63679),a=t(24481),l=t(28220);function s(e){var n=(0,a.A)().fs,t=(0,o._P)({controlName:"flag-draft-buffers"}),s=(0,l.UI)(),c=(0,r.useCallback)(function(r,o){var a=r.code,l=r.insertAt,c=r.newLine,u=void 0===c||c;if(!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var d=n.watchTextFile(e,{onReady:function(r){var i=r.initialContent,c=r.writeChange,p=i.toString(),f="end"===l?p.length:l,h=a;u&&(0!==f&&f!==p.length&&-1===(f=p.indexOf("\n",f))&&(f=p.length),0!==f&&"\n"!==p[f-1]&&(h="\n"+h),"\n"!==p[f]&&(h+="\n")),c({from:f,insert:h},o),!t||s?n.flush(new Set([e])).finally(function(){d()}):d()}})},[e,n,t,s]);return!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e)?null:c}},71971:(e,n,t)=>{"use strict";t.d(n,{A:()=>y});var r=t(13454),i=t(66622),o=t(27189),a=t(5482),l=t(30758),s=t(94463),c=t(53654),u=t(19327),d=t(63679),p=t(82436),f=t(41827),h=t(24481),m=t(1953),g=t(14652),v=t(28220),w=t(88859);function y(e){var n,t,y,b=e.moveOrDeleteFile,S=(0,h.A)().fs,Y=(0,f.j)(),A=(0,l.useRef)(new Map),C=(0,w.mU)(),x=(0,i._)((0,l.useState)(!1),2),_=x[0],k=x[1],D=(0,i._)((0,l.useState)(!1),2),E=D[0],R=D[1],I=(0,i._)((0,l.useState)([]),2),F=I[0],T=I[1],P=(0,g.i)(),L=(0,m.iO)(),U=(0,d._P)({controlName:"flag-draft-buffers"}),N=(0,v.UI)(),O=F.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),M=(0,i._)((0,l.useState)(),2),B=M[0],H=M[1],z=(0,w.tn)();(0,l.useEffect)(function(){if(!(!C||A.current.has(C))){var e=function(e){var n=e.node.path;z(e.eventType===u.dV.Move?{path:n,type:"move",to:e.to}:{path:n,type:"delete"}),b&&b(e),A.current.delete(C),T(function(e){return e.filter(function(e){return e.path!==C})})};(0,c.m6)(C)?S.watchTextFile(C,{onMoveOrDelete:e,onError:function(e,n){e.code||((!U||N)&&S.flush(),S.persist({skipDebounce:!0}),L({error:e,extras:n,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,n){T(function(t){return(0,o._)(t.filter(function(e){return e.path!==C})||[]).concat([{path:C,prompt:n,cb:e}])}),Y("user:ot:diverged",{path:C,divergence:n}),k(!0),B||H(C)}}):S.watchFile(C,{onChange:function(){},onMoveOrDelete:e}),A.current.set(C,!0)}},[C,S,L,b,B,Y,z,N,U]);var W=(n=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return(0,p.u4)(p.AZ.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,p.u4)(p.AZ.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),R(!0),[4,Promise.all(F.map(function(n){return T(function(e){var t=e.filter(function(e){return e.path!==n.path});return 0===t.length?k(!1):H(t[0].path),t}),n.cb(e)}))];case 1:return n.sent(),R(!1),[2]}})}),function(e){return n.apply(this,arguments)}),G=B?F.find(function(e){return e.path===B}):null,V=null==G?void 0:G.prompt,j=(0,s.M)({left:{code:null!==(t=null==V?void 0:V.localContent)&&void 0!==t?t:"",filePath:B},right:{code:null!==(y=null==V?void 0:V.remoteContent)&&void 0!==y?y:"",filePath:B}});return{isConverging:E,didContentsDiverge:_,showMoreDetail:P,failedFiles:F,failedFilesOptions:O,selectedFile:B,setSelectedFile:H,reviewingPrompt:V,onChoice:W,local:j.left,remote:j.right}}},41595:(e,n,t)=>{"use strict";t.d(n,{i:()=>u});var r=t(20837),i=t(45009),o=t(30632),a=t(72813);function l(){var e=(0,i._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(){var e,n=(e=(0,r._)({},s,void 0),a.I(c,e)).data;return(null==n?void 0:n.currentUser)||void 0}},89968:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(66622),i=t(30758),o=t(7942),a=t(73540),l=t(24481);function s(){var e=(0,l.A)().container,n=(0,a.A)(e),t=(0,r._)((0,i.useState)(!1),2),s=t[0],c=t[1];return((0,i.useEffect)(function(){n===o.KN.CONNECTED&&c(!0)},[n]),s)?{didConnectOnce:s,didDisconnect:n!==o.KN.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},76540:(e,n,t)=>{"use strict";t.d(n,{D:()=>ea});var r=t(13454),i=t(66622),o=t(27189),a=t(5482),l=t(60049),s=t(30758),c=t(55195),u=t(20837),d=t(45009),p=t(30632),f=t(72813),h=t(75838);function m(){var e=(0,d._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n        slug\n        authorizations {\n          editFileContents {\n            isAuthorized\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,d._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=(0,d._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return v=function(){return e},e}function w(){var e=(0,d._)(["\n  query GitHubImportGetTopLanguages($input: GitHubRepoInfoInput!) {\n    githubRepoInfo(input: $input) {\n      ... on GitHubRepoInfoOutput {\n        topLanguages\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var y={},b=(0,p.J1)(m()),S=(0,p.J1)(g()),Y=(v(),(0,p.J1)(w())),A=t(53654),C=t(1987),x=t(96367),_=t(19327),k=t(27230),D=t(3005),E=t(39651),R=t(83733),I=t(21980),F=t(85471),T=t(82436),P=t(26190),L=t(76002),U=t(84504),N=t(43650),O=t(24481),M=t(43812),B=t.n(M),H=t(78125),z=t(88538),W=t.n(z),G={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},V={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:G,javascript:G,vue:{18:"vue-node-18",20:"vue-node-20"}};function j(e,n){if(void 0===e)return!1;if(void 0===n)return!0;var t=B()(e);if(null===t)return!1;var r=B()(n);return null===r||W()(t,r)}var Z=t(2329),q=t(60762),K=t(43751);function $(){var e=(0,d._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return $=function(){return e},e}var J={},Q=(0,p.J1)($()),X=function(e,n){return{op:"add",path:e,value:JSON.stringify(n)}},ee=new Map([["hintsList","hints"]]);function en(){return(en=(0,r._)(function(e){var n,t,o,l,s,c,d,p,f,h,m,g,v,w,y;function b(){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(){var e,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(!(e="object"===(0,q._)(o.env)?o.env:null)||0===Object.keys(e).length)return[2];return r=(t="object"===(0,q._)(l.env)?l.env:null)?(0,u._)({},e,t):e,[4,n.updateDotReplit([X("env",r)])];case 1:return i.sent(),[2]}})})).apply(this,arguments)}function Y(){return A.apply(this,arguments)}function A(){return(A=(0,r._)(function(){var e,r,i,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(null===(e=l.nix)||void 0===e?void 0:e.channel)return[2];if(null==o?void 0:null===(r=o.nix)||void 0===r?void 0:r.channel)return[3,2];return[4,t.getLatestStableChannel()];case 1:if(!(s=a.sent()).channel)return[2];return i=s.channel,[3,3];case 2:i=o.nix.channel,a.label=3;case 3:return[4,n.updateDotReplit([X("nix/channel",i)])];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function C(){return(C=(0,r._)(function(e){var t,r,i,s,c;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r=!!(t=l[e]),Array.isArray(t)?r=t.length>0:t&&(void 0===t?"undefined":(0,q._)(t))==="object"&&(r=Object.keys(t).length>0),s=null!==(i=ee.get(e))&&void 0!==i?i:e,r||!o[s])return[2];return c=X(s,o[s]),[4,n.updateDotReplit([c])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}return(0,a.YH)(this,function(r){switch(r.label){case 0:n=e.dotReplit,t=e.nixService,o=e.templateConfig,l=e.config,s=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:Y,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},d=[],p=!0,f=!1,h=void 0;try{for(m=Object.entries(c)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)w=(v=(0,i._)(g.value,2))[0],y=v[1],null!==y&&("function"==typeof y?d.push(y()):d.push(function(e){return C.apply(this,arguments)}(w)))}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return[4,Promise.all(d)];case 1:return r.sent(),[2,s]}})})).apply(this,arguments)}var et=t(9524);function er(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return["bash","-c",n.join("&&")]}function ei(e){return e.replace(/'/g,"'\"'\"'")}var eo=function(e){var n,t,c,u,d,p,f,h,m,g,v,w,y,b=e.checkoutBranch,S=(0,l.useRouter)(),Y=(0,O.A)(),A=Y.container,C=Y.dotReplit,k=Y.runner,D=Y.git,E=Y.fs,R=(n=(0,L.A)({container:A,service:"exec"}).channel,t=(0,s.useRef)(!1),c=(0,s.useRef)([]),u=(0,P.A)((0,r._)(function(){var e,r,o,l,s,d,p,f,h,m;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t.current||!c.current.length||(null==n?void 0:n.status)!=="open")return[2];if(!(e=c.current.pop()))throw Error("Expected request");return l=(o=(r=(0,i._)(e,2))[0]).args,s=o.env,d=r[1],p="",f=n.onCommand(function(e){e.output&&(p+=e.output)}),t.current=!0,[4,n.request({exec:{args:l,env:s,noUserEnv:!0}})];case 1:return h=a.sent(),t.current=!1,f(),m=h.channelClosed?"Channel closed":h.error,d(m?{error:m,output:p||null}:{output:p,error:null}),u.current(),[2]}})})),d=null==n?void 0:n.status,(0,s.useEffect)(function(){"open"===d&&u.current()},[d,u]),(0,s.useCallback)(function(e){var n=e.args,t=e.env;return new Promise(function(e){c.current.push([{args:n,env:t},e]),u.current()})},[u])),F=(p=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,D.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return p.apply(this,arguments)}),T=(f=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,D.addRemote({name:"origin",url:e})];case 1:return n.sent(),[2]}})}),function(e){return f.apply(this,arguments)}),N=(h=(0,r._)(function(){var e,n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,R({args:er("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=t.sent()).output)return[2,"main"];return(n=(0,i._)(e.output.split(": "),2))[0],[2,n[1].trim()]}})}),function(){return h.apply(this,arguments)}),M=(m=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,R({args:er("git checkout -f -b '".concat(ei(e),"' 'origin/").concat(ei(e),"'"))})];case 1:if((n=t.sent()).error)throw Error("Failed to checkout branch: ".concat(n.error));return[2]}})}),function(e){return m.apply(this,arguments)}),B=(g=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(t=void 0!==(n=e.deepen)&&n,r=e.remote,i=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,R({args:er("git fetch '".concat(ei(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return o.sent(),[2];case 2:if(!(i&&t))return[3,4];return[4,R({args:er("git fetch origin '".concat(ei(i),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,o.sent()];case 4:if(!i)return[3,6];return[4,R({args:er("git fetch origin '".concat(ei(i),"' --progress --depth=10"))})];case 6:return[4,R({args:er("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return g.apply(this,arguments)}),H=(v=(0,r._)(function(){var e,n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,E.readDir(x.Dl)];case 1:if((r=a.sent()).error)return[2];return[4,C.getConfig()];case 2:if(!(null===(n=(i=a.sent()).config)||void 0===n?void 0:null===(e=n.gitHubImport)||void 0===e?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.concat(".cache").map(function(e){return new RegExp(e)}),l=function(e){return o.some(function(n){return null!=e.match(n)})},[4,Promise.all(r.children.filter(function(e){return!l(e.filename)}).map(function(e){return e.type===_.pt.Directory?E.deleteDir(e.filename):E.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null===(t=i.config)||void 0===t?void 0:t.entrypoint))return[3,6];return[4,E.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return v.apply(this,arguments)}),z={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},W=(w=(0,r._)(function(){var e,n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:for(n in e=[],z)e.push(n);t=0,i.label=1;case 1:if(!(t<e.length))return[3,5];return r=e[t],[4,E.stat(r)];case 2:if(!i.sent().exists)return[3,4];return[4,R({args:["git","clean","-fdx"].concat((0,o._)(z[r]))})];case 3:i.sent(),i.label=4;case 4:return t++,[3,1];case 5:return[2]}})}),function(){return w.apply(this,arguments)});return y=(0,r._)(function(e){var n,t,i,o,l;return(0,a.YH)(this,function(s){switch(s.label){case 0:return n=e.remote,t=e.accessToken,[4,H()];case 1:return s.sent(),I.vF.info("GitHub Import: Removed template boilerplate"),[4,F()];case 2:return s.sent(),[4,T(n)];case 3:return s.sent(),[4,N()];case 4:return i=s.sent(),[4,Promise.all([B({deepen:!1,remote:n,remoteToken:t,branch:i}),b?B({deepen:!1,remote:n,remoteToken:t,branch:b}):null])];case 5:var c;if(s.sent(),c=(0,r._)(function(){var e;return(0,a.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,M(i)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),I.vF.error("GitHub Import: checkout default branch failed",{originalError:String(e),query:JSON.stringify(S.query),checkoutBranch:b,githubRepo:n}),[3,3];case 3:return[2]}})}),o=function(){return c.apply(this,arguments)},!b)return[3,11];s.label=6;case 6:return s.trys.push([6,8,,10]),[4,M(b)];case 7:case 9:return s.sent(),[3,10];case 8:return l=s.sent(),I.vF.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(l),query:JSON.stringify(S.query),checkoutBranch:b,githubRepo:n}),[4,o()];case 10:return[3,13];case 11:return[4,o()];case 12:s.sent(),s.label=13;case 13:if("html"!==k.mode)return[3,16];return[4,(0,et.S)(A,x.Dl)];case 14:return s.sent(),[4,k.run(U.QG.GITHUB_IMPORT)];case 15:s.sent(),s.label=16;case 16:return[4,W()];case 17:return s.sent(),I.vF.info("GitHub Import: Tidied up required files"),[2]}})}),function(e){return y.apply(this,arguments)}};function ea(e){var n,t,o,d,p,m,g,v,w,x,_,P,L,U,M,z,W,G,q,$,X,ee,et,er,ei,ea,el=e.insertConfigPlugin,es=e.setConfigScreenLockIsOpen,ec=e.openFile,eu=(0,l.useRouter)(),ed=(0,R.A)(),ep=(0,i._)((n=(0,u._)({},y,void 0),h.n(S,n)),2),ef=ep[0],eh=ep[1],em=(0,i._)((0,s.useState)(null),2),eg=em[0],ev=em[1],ew=(0,O.A)(),ey=ew.fs,eb=ew.runner,eS=ew.dotReplit,eY=(0,E.A)(),eA=eY.showError,eC=eY.showConfirm,ex=(o=(t=(0,O.A)()).dotReplit,d=t.nixService,p=(0,R.A)(),g=(0,i._)((m=(0,u._)({},J,void 0),K._(Q,m)),1)[0],w=(v=(0,E.A)()).showWarning,x=v.showError,(0,s.useCallback)((_=(0,r._)(function(e){var n,t,r,i,l,s,c,u,f,h,m,v;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,o.getConfig()];case 1:if(!(t=a.sent().config)||(null===(n=t.modules)||void 0===n?void 0:n.length))return[2];return[4,g({variables:{replId:p}})];case 2:if(!(null==(i=(null==(r=a.sent().data)?void 0:r.repl.__typename)==="Repl"?r.repl:null)?void 0:i.rootOriginReplUrl))return[2];try{l=(0,H.qg)(e.toString())}catch(e){return x("Failed to parse template .replit file"),I.vF.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!l)return[2];return[4,function(e){return en.apply(this,arguments)}({nixService:d,dotReplit:o,config:t,templateConfig:l})];case 3:s=a.sent(),c=!0,u=!1,f=void 0;try{for(h=s[Symbol.iterator]();!(c=(m=h.next()).done);c=!0)v=m.value,w(v,1e3)}catch(e){u=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw f}}return[2]}})}),function(e){return _.apply(this,arguments)}),[p,w,x,o,d,g])),e_=(P=(0,F.pE)("importBranch","string"))?decodeURIComponent(P):null,ek=(0,N.A)(),eD=(0,D.ET)().orgId;(0,s.useEffect)(function(){eh.error&&eA("Failed to finish cloning Repl - "+eh.error)},[eh.error,eA]),(0,s.useEffect)(function(){eg&&eA("Failed to finish cloning Repl - "+eg)},[eg,eA]),(0,s.useEffect)(function(){eh.data&&eC("Finished cloning Repl")},[eh.data,eC]);var eE=(L={variables:{replId:ed},fetchPolicy:"no-cache"},U=(0,u._)({},y,L),f.I(b,U)).data,eR=(M=(0,N.A)(),W=(z=(0,O.A)()).fs,G=z.dotReplit,et=(null==(ee=($={skip:!((q=(null==eE?void 0:eE.repl.__typename)==="Repl"?eE.repl.config.gitRemoteUrl:void 0)&&M),variables:q?{input:{githubRepoUrl:q}}:void 0},X=(0,u._)({},y,$),f.I(Y,X)).data)?void 0:ee.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?ee.githubRepoInfo.topLanguages:void 0,{addRecommendedModules:(0,s.useCallback)((0,r._)(function(){var e,n,t,r,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!(et&&M))return[3,4];return e=et.map(function(e){return{language:e}}),[4,W.readFile("package.json")];case 1:return"content"in(n=a.sent())&&(t=function(e){var n,t,r=null;try{t=JSON.parse(e)}catch(e){return null}if(null===(n=t.engines)||void 0===n?void 0:n.node){var i=B()(t.engines.node);i&&(r="".concat(i.major))}return r}(n.content.toString()))&&(e.push({language:"javascript",version:t}),et.includes("Vue")&&e.push({language:"vue",version:t})),[4,W.readFile("pyproject.toml")];case 2:return"content"in(n=a.sent())&&(r=function(e){var n,t,r,i,o,a=null;try{o=(0,H.qg)(e)}catch(e){return null}var l=(null===(r=o.tool)||void 0===r?void 0:null===(t=r.poetry)||void 0===t?void 0:null===(n=t.dependencies)||void 0===n?void 0:n.python)||(null===(i=o.project)||void 0===i?void 0:i["requires-python"]);if(l){var s=B()(l);s&&(a="".concat(s.major,".").concat(s.minor))}return a}(n.content.toString()))&&e.push({language:"python",version:r}),o=function(e,n){var t=new Map,r=!0,o=!1,a=void 0;try{for(var l,s,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var u=s.value,d=V[u.language.toLowerCase()];if(d){var p=t.get(d);(!p||j(u.version,p.version))&&t.set(d,u)}}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}var f=new Map;null===(l=n.fullModules)||void 0===l||l.forEach(function(e){(null==e?void 0:e.id)&&f.set(e.id,e)});var h=new Set,m=!0,g=!1,v=void 0;try{for(var w,y=t.entries()[Symbol.iterator]();!(m=(w=y.next()).done);m=!0){var b=(0,i._)(w.value,2),S=b[0],Y=b[1];if("string"==typeof S){var A=f.get(S);A&&h.add(A)}else{var C=Y.version;if(!C||!S[C]){var x=Object.keys(S);x.sort(function(e,n){return j(e,n)?-1:1}),C=x[0]}var _=S[C],k=f.get(_);k&&h.add(k)}}}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}return Array.from(h)}(e,M),l=[{op:"add",path:"nix/channel",value:'"stable-24_05"'}],o.length>0?(I.vF.info("GitHub Import: recommended modules:",Object.fromEntries(o.map(function(e){return[e.id,e.name]}))),l.push({op:"add",path:"modules",value:JSON.stringify(o.map(function(e){return e.id}))})):I.vF.warn("GitHub Import: no recommended modules found"),[4,G.updateDotReplit(l)];case 3:a.sent(),a.label=4;case 4:return[2]}})}),[G,W,M,et]),topLanguages:et}),eI=eR.addRecommendedModules,eF=eR.topLanguages,eT=(er=(0,r._)(function(){var e,n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!eE||"Repl"!==eE.repl.__typename||(n=eE.repl,t=eE.currentUser,"Repl"!==n.__typename||!t||"CurrentUser"!==t.__typename)||(i=null!==(r=null===(e=t.gitHubInfo)||void 0===e?void 0:e.accessToken)&&void 0!==r?r:null,!(o=n.config.gitRemoteUrl)||!n.config.doClone||!eF))return[2];if(!eE.repl.authorizations.editFileContents.isAuthorized)return ev("You do not have permission to edit this Repl"),I.vF.warn("GitHub Import: Attempt to doClone for user without authorization"),[2];a.label=1;case 1:return a.trys.push([1,3,4,5]),es(!0),[4,eB({remote:o,accessToken:i})];case 2:return a.sent(),(0,T.u4)(T.AZ.NIX_GH_IMPORT_USED,{action:k.s.ImportEnded,replId:n.id,orgContext:(0,D.po)(eD?{id:eD}:void 0)}),[3,5];case 3:return l=a.sent(),I.vF.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(l),query:JSON.stringify(eu.query),githubRepo:o,hasAccessToken:!!i}),c.Cp(l,{extra:{query:JSON.stringify(eu.query),githubRepo:o,hasAccessToken:!!i}}),ev(String(l)),[3,5];case 4:return es(!1),[7];case 5:return[2]}})}),function(){return er.apply(this,arguments)}),eP=(0,i._)((0,s.useState)(!1),2),eL=eP[0],eU=eP[1];(0,s.useEffect)(function(){ek&&eE&&"Repl"===eE.repl.__typename&&eF&&eU(!0)},[eE,ek,eL,eF]),(0,s.useEffect)(function(){eL&&eT()},[eL]);var eN=(ei=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,(0,Z.o)({dotReplit:eS,fs:ey})];case 1:return(e=n.sent().entrypoint)&&ec({path:e,opener:(0,A.e$)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return ei.apply(this,arguments)});function eO(){return ey.readFile(C.v)}var eM=eo({checkoutBranch:e_}),eB=(ea=(0,r._)(function(e){var n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=e.remote,t=e.accessToken,!ek||!(eE&&"Repl"===eE.repl.__typename))return[2];return I.vF.info("GitHub Import: Starting client-side GitHub import flow"),[4,eO()];case 1:return r=a.sent(),[4,eM({remote:n,accessToken:t})];case 2:if(a.sent(),I.vF.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==r.error)return[3,5];return[4,eS.updateDotReplit([])];case 3:return a.sent(),[4,eO()];case 4:r=a.sent(),a.label=5;case 5:if("content"in r)return[3,6];return I.vF.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(r.error)}),[3,11];case 6:return[4,eO()];case 7:return i=a.sent(),o=""!==r.content.toString()&&"content"in i&&i.content.toString()!==r.content.toString(),[4,ex(r.content)];case 8:if(a.sent(),I.vF.info("GitHub Import: Patched dotreplit"),!o)return[3,9];return I.vF.info("GitHub Import: Repo has .replit",{githubURL:n}),[3,11];case 9:return[4,eI()];case 10:a.sent(),I.vF.info("GitHub Import: Added recommended modules"),a.label=11;case 11:return[4,ef({variables:{input:{id:ed,doClone:!1}}})];case 12:if(a.sent(),!e_)return[3,14];return[4,ey.persist()];case 13:a.sent(),(0,F.HQ)({router:eu,params:[{mode:"delete",key:"importBranch"}]}),a.label=14;case 14:return I.vF.info("GitHub Import: Disabled doClone on Repl. Done."),[4,eN()];case 15:if(a.sent(),"html"===eb.mode)return[2];return el(),[2]}})}),function(e){return ea.apply(this,arguments)})}},55922:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(66622),i=t(30758),o=t(19327),a=t(24481),l=t(89968);function s(){var e=(0,a.A)().fs,n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=(0,l.A)(),u=c.didConnectOnce,d=c.didDisconnect;return((0,i.useEffect)(function(){return s(e.getStatus()===o.sn.Syncing),e.onStatusChange(function(e){s(e===o.sn.Syncing)})},[e]),u)?{isSaving:t,isOffline:d}:{isSaving:!1,isOffline:!1}}},40219:(e,n,t)=>{"use strict";t.d(n,{_:()=>s});var r=t(13454),i=t(5482),o=t(80475),a=t(62580),l=t(36736);function s(){var e,n,t,s=(0,a.gc)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,c=(0,l.A)((t=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:if(!s)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((n=r.sent()).error)return[2,n];if(n.type!==o.UN.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((t=r.sent()).error)return[2,t];return[2,{status:t,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s]);return c&&!c.error&&(null===(e=c.status)||void 0===e?void 0:e.changes)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(null===(n=c.status)||void 0===n?void 0:n.changes):null}},27435:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(30758),i=t(96367),o=t(63679),a=t(83733),l=t(20334),s=t(97285),c=t(24481),u="persistmirrored";function d(){var e=(0,l.g)(),n=(0,a.A)(),t=(0,o._P)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,c.A)().container;(0,r.useEffect)(function(){if(!(!e||!t||(null!==(r=s.A.get(u,"array"))&&void 0!==r?r:[]).includes(n))){var r,o=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(e){return e.channel.request({persistMirror:{path:i.Dl}}).then(function(e){if(e.ok){var t,r;r=null!==(t=s.A.get(u,"array"))&&void 0!==t?t:[],s.A.set(u,r.concat(n)),o()}}),function(){}});return o}},[d,e,t,n])}},98594:(e,n,t)=>{"use strict";t.d(n,{b:()=>i});var r=t(63679);function i(){return(0,r._P)({controlName:"flag-simplistic-ragged-application"})}},94824:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(30758),i=t(7942),o=t(24481);function a(){var e=(0,o.A)().container;(0,r.useEffect)(function(){var n=function(){e.getConnectionState()===i.KN.CONNECTED&&e.focus()};return window.addEventListener("focus",n),function(){window.removeEventListener("focus",n)}},[e])}},61406:(e,n,t)=>{"use strict";t.d(n,{Ko:()=>p,eJ:()=>d});var r=t(20837),i=t(45009),o=t(30632),a=t(72813),l=t(43751);function s(){var e=(0,i._)(["\n  query GetAgentFreeUsage {\n    currentUser {\n      id\n      aiFreeUsageLimits {\n        ... on UserAiFreeUsageLimitResult {\n          agentCheckpoints {\n            limit\n            usage\n            isUnderQuota\n            quotaExpiresAt\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(s());function d(e){var n=(0,r._)({},c,e);return a.I(u,n)}function p(e){var n=(0,r._)({},c,e);return l._(u,n)}},4363:(e,n,t)=>{"use strict";t.d(n,{i:()=>i});var r=t(61406);function i(){var e,n=(0,r.eJ)(),t=n.data,i=n.loading,o=n.error,a=(null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.aiFreeUsageLimits.__typename)==="UserAiFreeUsageLimitResult"?t.currentUser.aiFreeUsageLimits.agentCheckpoints:null;return a?{loading:i,error:o,agentCheckpoints:a}:{loading:i,error:o,agentCheckpoints:null}}},94740:(e,n,t)=>{"use strict";t.d(n,{A:()=>u,o:()=>c});var r=t(66622),i=t(30758),o=t(8482),a=t(53654),l=t(63679),s=t(28220),c=function(){var e=(0,l._P)({controlName:"flag-draft-buffers"}),n=(0,s.UI)(),t=(0,i.useRef)(!1);return(0,i.useEffect)(function(){t.current=n||!1===e},[n,e]),t};let u=function(e,n){var t=(0,s.UI)(),c=(0,r._)((0,i.useState)(!1),2),u=c[0],d=c[1],p=(0,l._P)({controlName:"flag-draft-buffers"});return(0,i.useEffect)(function(){if(!n||!(0,a.m6)(n)||!p||(0,o.jX)((0,o.mc)(n))){d(!1);return}d(!1===e.isFileOrDirSaved(n));var t=e.watchTextFile(n,{onFileSavedChanged:function(e){d(!e)}});return function(){t()}},[e,n,p]),p&&null!==n&&!1===t&&u}},59497:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(63679),i=t(61302);function o(){var e=(0,r._P)({controlName:"flag-agent-v2-web-ui"}),n=(0,i.F)();return e&&!n}},39424:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,T:()=>s});var r=t(66622),i=t(30758),o=t(96367),a=t(19327),l=t(24481),s=".tutorial";function c(){var e=(0,l.A)().fs,n=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),t=n[0],c=n[1];return(0,i.useEffect)(function(){e.watchDir(o.Dl,{onChange:function(e){c({isLoading:!1,isTutorial:e.some(function(e){return e.type===a.pt.Directory&&e.filename===s})})},onMoveOrDelete:function(){c({isLoading:!1,isTutorial:!1})},onError:function(){c({isLoading:!1,isTutorial:!1})}})},[e]),t}},58831:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(20837),i=t(43952),o=t(94086),a=t(30758),l=t(64719),s=t(30178),c="rag://rag_source_";function u(e){var n=e.openWebview,t=e.ragSources;return(0,a.useMemo)(function(){return function(e){var u,d=null===(u=e.node.properties)||void 0===u?void 0:u.href,p=(0,a.useMemo)(function(){if(n&&"string"==typeof d)try{var e=new URL(d);if("0.0.0.0"===e.hostname||"localhost"===e.hostname)return function(t){t.preventDefault(),n(e.pathname,parseInt(e.port,10))}}catch(e){return}},[d]);if("string"==typeof d&&d.startsWith(c)){var f=d.slice(c.length),h=null==t?void 0:t.find(function(e){return e.id===f});if(!h)return(0,o.FD)(a.Fragment,{children:["[",e.children,"]"]});var m=(0,l.A)(h.url);return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{href:"#"+m,filePath:"",target:""}))}return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{type:void 0!==p?"button":e.type,href:void 0!==p?"#":e.href,onClick:p}))}},[n,t])}},10860:(e,n,t)=>{"use strict";t.d(n,{R:()=>f});var r=t(94086),i=t(30758),o=t(39651),a=t(37163),l=t(75165),s=t(52757),c=t(32842),u=t(40172),d=t(60676),p=(0,s.AH)([c.wp.mt(8)]);function f(e){var n=e.onOpenEnvEditor,t=(0,l.eg)(),s=(0,a.A)(),c=(0,o.A)(),f=(0,i.useRef)(!1);(0,i.useEffect)(function(){if(s&&!f.current&&!t){var e=c.showNotice((0,r.FD)(r.FK,{children:[(0,r.Y)("div",{children:"This App contains secrets that are missing values."}),(0,r.Y)("div",{children:"Add values to ensure the App runs as expected."}),(0,r.Y)("div",{children:(0,r.Y)(u.$n,{size:"small",iconLeft:(0,r.Y)(d.A,{}),css:p,colorway:"primary",onClick:function(){n(),c.hideMessage(e)},text:"Manage secrets"})})]}),1e4);f.current=!0}},[s])}},46982:(e,n,t)=>{"use strict";t.d(n,{N:()=>o,h:()=>i});var r=t(30758),i=50;function o(e){var n=e.usage,t=e.limit,i=e.percentThreshold,o=e.onHitThreshold,a=(0,r.useRef)(void 0);(0,r.useEffect)(function(){if(void 0!==n&&void 0!==t){var e=n/t*100;void 0!==a.current&&a.current/t*100<i&&e>=i&&o(),a.current=n}},[n,t,i,o])}},61825:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(30758),i=t(53460);function o(){var e=(0,i.yB)();(0,r.useEffect)(function(){},[e])}},70573:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(75895),i=t(13454),o=t(5482),a=t(30758),l=t(26190),s=t(76862),c=t(12139);function u(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function d(e){var n,t,d=e.fs,p=e.openMultipleFiles,f=e.openMultipleURLs,h=e.waitForFileClose,m=e.isMobileWorkspace,g=void 0!==m&&m,v=(0,l.A)(h),w=(0,a.useCallback)((n=(0,i._)(function(e){var n,t,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(n=e.filename,t=e.waitForClose,!g)return[3,2];if(!n.endsWith(".git/COMMIT_EDITMSG"))return p({paths:[n]}),[2];return r=window.prompt("Enter a commit message"),[4,d.writeFile(n,null!=r?r:"")];case 1:case 4:return i.sent(),[2];case 2:if(u(),p({paths:[n]}),!t||!v.current)return[2];return[4,v.current(n)];case 3:return i.sent(),[4,d.flush()]}})}),function(e){return n.apply(this,arguments)}),[d,g,p,v]);(0,s.b)((t=(0,i._)(function(e,n){var t,i,a,l,s,d,h,m,g,v,y,b,S,Y,A,C;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=n.session,i=n.signal,l=(a=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=a.resReadable,d=!1,h=!1,o.label=1;case 1:o.trys.push([1,12,13,18]),g=(0,r._)(s),o.label=2;case 2:return[4,g.next()];case 3:if(!(d=!(v=o.sent()).done))return[3,11];if(!(y=v.value).ok)return[3,10];switch(y.payload.$kind){case"openFile":return[3,4];case"openMultipleFiles":return[3,6];case"openMultipleURLs":return[3,7];case"getSSHToken":return[3,8]}return[3,10];case 4:return[4,w(y.payload)];case 5:return o.sent(),y.payload.waitForClose&&l.write({$kind:"closeFile",filename:y.payload.filename,nonce:y.payload.nonce}),[3,10];case 6:return y.payload.files.length>0&&(u(),p({paths:y.payload.files})),[3,10];case 7:return y.payload.urls.length>0&&(u(),f({urls:y.payload.urls})),[3,10];case 8:return S=(b=y.payload).nonce,Y=b.replId,[4,(0,c.ps)({replId:Y})];case 9:return"success"!==(A=o.sent()).type?l.write({$kind:"sshToken",nonce:S,error:A.message}):l.write({$kind:"sshToken",nonce:S,token:A.data.token,SSHHostname:A.data.ssh_hostname}),[3,10];case 10:return d=!1,[3,2];case 11:return[3,18];case 12:return C=o.sent(),h=!0,m=C,[3,18];case 13:if(o.trys.push([13,,16,17]),!(d&&null!=g.return))return[3,15];return[4,g.return()];case 14:o.sent(),o.label=15;case 15:return[3,17];case 16:if(h)throw m;return[7];case 17:return[7];case 18:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[f,p,w])}},14652:(e,n,t)=>{"use strict";t.d(n,{i:()=>d});var r=t(60049),i=t(20837),o=t(45009),a=t(30632),l=t(72813);function s(){var e=(0,o._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s());function d(){var e,n,t=(e=(0,i._)({},c,void 0),l.I(u,e)).data,o=(0,r.useRouter)();return(null==t?void 0:null===(n=t.currentUser)||void 0===n?void 0:n.isAdmin)||!!o.query.debug}},56526:(e,n,t)=>{"use strict";t.d(n,{H:()=>a});var r=t(66622),i=t(61406),o=t(51439);function a(e){var n=e.sessionId,t=(0,r._)((0,i.Ko)({fetchPolicy:"network-only",ssr:!1}),1)[0];(0,o.sS)(n,function(e){var n,r;e&&"createEventMessage"===e.$kind&&(null===(n=e.createEventMessage.contents.contents)||void 0===n?void 0:n.$kind)==="agentTimelineEventContents"&&(null===(r=e.createEventMessage.contents.contents.agentTimelineEventContents.toolData)||void 0===r?void 0:r.$kind)==="commitData"&&t()})}},58152:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(30758),i=t(21980);function o(){(0,r.useEffect)(function(){var e=null;return function n(){if(window.performance.memory){var t=window.performance.memory,r=t.jsHeapSizeLimit,o=t.totalJSHeapSize,a=t.usedJSHeapSize,l=window.performance.now();i.vF.info("perf:browser_memory",{jsHeapSizeLimit:r,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(n,-(3e5*Math.log(Math.random())))}}(),function(){e&&clearTimeout(e)}},[])}},78350:(e,n,t)=>{"use strict";t.d(n,{v:()=>s});var r=t(20837),i=t(30758),o=t(83733),a=t(26710),l=t(14740);function s(){var e=(0,o.A)(),n=(0,a.A)("fileTree").trackTimeToLoadFileStart;return(0,i.useCallback)(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(t);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,l.A)((0,r._)({replId:e},o))},[e,n])}},90326:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(30758),i=t(62580),o=t(83733),a=t(82436),l=t(24481),s=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function c(){var e=(0,l.A)().container,n=(0,i.gc)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,t=(0,o.A)();(0,r.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,o=e.isForwarded,l=e.isVnc,c=e.externalPort;if(o){(0,a.u4)(a.AZ.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:t,port:r,externalPort:c,address:i,webviewAutoOpenOnPortOpened:n});return}(0,a.u4)(a.AZ.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:s.has(r),address:i,type:l?"vnc":"webview",replId:t,externalPort:c})})},[e,t,n])}},76469:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(30758),i=t(67925),o=t(28777),a=t(76605),l=t(83733),s=t(21980),c=t(44019),u=t(24481),d=new Set;function p(e){var n=e.workspaceType,t=(0,l.A)(),p=(0,u.A)(),f=p.dotReplit,h=p.container;(0,r.useEffect)(function(){if(!d.has(t)){d.add(t);var e=f.watch(function(t){if(!t.error||t.error!==a.DO.Disconnected){try{var r=h.getConnectionMetadata();if(!r||!r.token)throw Error("Expected token in measure call.");!function(e){var n=e.workspaceType,t=e.parsedToken,r=!!window.performance.getEntriesByName(o.pY.pageNavStart,"mark").length,a={ssr:!r,workspaceType:n,tokenCluster:t.cluster},l="time to code";window.performance.measure(l,r?o.pY.pageNavStart:void 0);var c=window.performance.getEntriesByName(l,"measure")[0];if(!c){s.vF.info("Could not obtain measure for time to code",a);return}var u="page invisible fetch connection metadata",d=c.duration;window.performance.getEntriesByName(o.pY.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(u,o.pY.fetchConnectionMetadataPageInvisibleStart,o.pY.fetchConnectionMetadataPageInvisibleEnd),d-=window.performance.getEntriesByName(u,"measure")[0].duration,window.performance.clearMeasures(u),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleEnd)),s.vF.time("time to code minus page invisible",d,a),s.vF.time("time to code with page invisible",c.duration,a),window.performance.clearMeasures(l),i.L.addTiming("time_to_code_minus_page_invisible",d),i.L.addTiming("time_to_code_with_page_invisible",c.duration)}({workspaceType:n,parsedToken:(0,c.pI)(r.token)})}catch(e){s.vF.info("Could not measure time to code",{workspaceType:n,e:e,dotReplitResult:t.error?t.error:"success"})}e()}});return e}},[t,n,f,h])}},26710:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(53654),i=t(21980),o=t(16750),a=new Map,l=function(e,n){if((0,r.m6)(e)){var t=window.performance.now();a.set(e,{start:t,source:n})}},s=function(e){var n=a.get(e);if(void 0!==n){var t=n.start,r=n.source,l=window.performance.now(),s=(0,o.v)(e);i.vF.time("time to load file",l-t,{from:r,fileViewerType:s}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(n){return l(n,e)},trackTimeToLoadFileEnd:s}}},32126:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(30758),i=t(20837),o=t(45009),a=t(30632),l=t(39528);function s(){var e=(0,o._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s()),d=t(19327),p=t(48117),f=t(83733),h=t(24481);function m(){var e,n,t=(0,h.A)().fs,o=(e={variables:{replId:(0,f.A)()}},n=(0,i._)({},c,e),l.R(u,n)).data,a=(null==o?void 0:o.currentUserCanWrite)===!1;(0,r.useEffect)(function(){a&&window.location.reload()},[a]);var s=(0,r.useCallback)(function(){return a||t.getStatus()===d.sn.Clean?p.Nn.NavigateAnyway:p.Nn.PromptUser},[t,a]);(0,p.Ay)({shouldPreventNavCb:s})}},53202:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(30758),i=t(32889),o=t.n(i),a=t(75165);function l(e){!function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;(0,r.useEffect)(function(){if(null!=n)return n.portsState.subscribe(o()(function(n){if(null!=n){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.isOpen&&!l.configuration.isVnc){e.set(!0);return}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}e.set(!1)}},t))},[n,e,t])}((0,a.Av)(),e)}},58411:(e,n,t)=>{"use strict";function r(){return!0}t.d(n,{I:()=>r})},97902:(e,n,t)=>{"use strict";t.d(n,{Y:()=>y,O:()=>w});var r=t(13454),i=t(66622),o=t(60762),a=t(5482),l=t(20837),s=t(45009),c=t(30632),u=t(75838);function d(){var e=(0,s._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(32904),m=t(20184),g=t(68062),v=t(66082);function w(){var e,n=(0,m.v)(),t=(0,i._)((e=(0,l._)({},p,void 0),u.n(f,e)),1)[0],o=(0,v.V)();return(0,h.A)(function(){var e;return e=(0,r._)(function(e){var r,l,s,c,u,d,p,f,h;return(0,a.YH)(this,function(a){switch(a.label){case 0:r=[],l=!0,s=!1,c=void 0;try{for(u=e[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=(p=(0,i._)(d.value,2))[0],h=p[1],r.push({commandId:f,keyCombo:h})}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return[4,t({variables:{input:{environment:n,platform:o,keybindings:r}}})];case 1:return a.sent(),[2]}})}),function(n){return e.apply(this,arguments)}},[n,t,o])}function y(e){var n=new Map;if(!Array.isArray(e))return n;var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=function(e){if(e&&(void 0===e?"undefined":(0,o._)(e))==="object"&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var n=(0,g.by)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}if("string"==typeof e.keyCombo){var t=(0,g.A2)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}return{commandId:e.commandId,keyCombo:null}}}(s);c&&n.set(c.commandId,c.keyCombo)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n}},66082:(e,n,t)=>{"use strict";t.d(n,{V:()=>o});var r=t(55937),i=t(54191);function o(){var e=(0,i.vm)(),n=(0,i.jl)(),t=(0,i.d0)();return e||n?r.on.Mac:t?r.on.Windows:r.on.Linux}},89094:(e,n,t)=>{"use strict";t.d(n,{_:()=>c});var r=t(13454),i=t(5482),o=t(45009);function a(){var e=(0,o._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,t(30632).J1)(a()),s=t(71676);function c(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var n,t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,null===s.V||void 0===s.V?void 0:s.V.query({query:l,variables:{replId:e}})];case 1:return r=(null==(t=i.sent())?void 0:null===(n=t.data)||void 0===n?void 0:n.repl.__typename)==="Repl"?t.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},30919:(e,n,t)=>{"use strict";t.d(n,{J9:()=>u});var r=t(66622),i=t(27189),o=t(53654),a=t(19327),l=["json","md","draw","txt"],s=[".gitignore",".replit"];function c(e,n){var t=new Map,a=!0,l=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d,p=c.value,f=(0,o.an)(p);if(f&&(!n||f.startsWith(n))){var h=null!==(d=t.get(f))&&void 0!==d?d:0;t.set(f,h+1)}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return(0,i._)(t.entries()).sort(function(e,n){var t=(0,r._)(e,2)[1];return(0,r._)(n,2)[1]-t}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,n){if(e.fileType===a.pt.Directory||!e.input)return[];if("."===e.input)return s.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return s.filter(function(n){return n.startsWith(e.input)}).map(function(n){return{value:n,highlight:[{from:n.length-e.input.length,to:n.length}]}});var t=(0,o.an)(e.input),r=c(e.siblings.map(function(e){return e.filename}),t);if(r.length<3&&r.push.apply(r,(0,i._)(c(n(),t))),r.length<3){var u=t?l.filter(function(e){return e.startsWith(t)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(n){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):t&&(r=r.slice(0,-(t.length+1)));var i=r+"."+n;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},47475:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(19327),i=function(e){if(1===e.length)return e[0].type===r.pt.File?"file":"folder";if(e.length>1){var n=e.filter(function(e){return e.type===r.pt.File}).length,t=e.filter(function(e){return e.type===r.pt.Directory}).length,i=n>1?"files":"file",o=t>1?"folders":"folder",a="file";return n>0&&t>0?a="".concat(i," and ").concat(o):n>0?a="".concat(i):t>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var n=i(e),t=1===e.length?n:"".concat(e.length," ").concat(n),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:t,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:t}}},9408:(e,n,t)=>{"use strict";t.d(n,{s:()=>i});var r=t(24955),i="color-mix(in srgb, ".concat(r.LU.interactiveBackground," 60%, ").concat(r.LU.surfaceBackground,")")},9524:(e,n,t)=>{"use strict";function r(e,n){return new Promise(function(t){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:n}}).then(function(e){e.ok,r(),t()}),function(e){e.willReconnect&&r()}})})}t.d(n,{S:()=>r})},20268:(e,n,t)=>{"use strict";t.d(n,{v:()=>A,A:()=>Y});var r=t(20837),i=t(66622),o=t(32889),a=t.n(o),l=t(3274),s=t(68543),c=t(21980),u=t(16530),d=t(55195),p=t(91806),f=t(77581),h="exit status 1",m=t(13454),g=t(27189),v=t(5482),w=t(10768);function y(){return(y=(0,m._)(function(e){var n,t,r,i,o,a,l;return(0,v.YH)(this,function(s){switch(s.label){case 0:if(t=e.container,0===(r=(0,u._)(e,["container"])).query.trim().length)return[2,b(f.F.EMPTY_QUERY)];if(t.getConnectionState()===w.KN.DISCONNECTED)return[2,b(f.F.CONTAINER_DISCONNECTED)];if(t.getConnectionState()===w.KN.CONNECTING)return[2,b(f.F.CONTAINER_CONNECTING)];return[4,(n=t).exec.apply(n,(0,g._)((0,p.Qq)(r)))];case 1:if(o=(i=s.sent()).output,a=i.error)switch(a){case h:return[2,b(f.F.EMPTY_RESULTS)];case"signal: broken pipe":return[2,b(f.F.PARTIAL_RESULTS)];case"Channel closed":return[2,b(f.F.CHANNEL_CLOSED)];default:return d.Cp(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,p.xo)()(o))||0===l.filesMap.size)return[2,b(f.F.EMPTY_RESULTS)];return[2,b(l.error,l.filesMap)]}})})).apply(this,arguments)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:n}}var S="File Search Used";function Y(e){var n=e.container,t=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,m=e.isStreaming,g=e.trackLatency,v=void 0!==g&&g,w=(0,s.A)({container:n}),y=[],b=(0,l.A)(),Y=Date.now(),A=function(e){i(y=e)};return a()(function(e){var n=(0,l.A)();b=n,Y=Date.now(),t(null),o(!0);var i=!0;if(""===e.query){A([]),o(!1);return}!function(e){var n=e.execer,t=e.onComplete,r=e.onError,i=e.onParse,o=(0,u._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length){t("abort");return}var a=new TextEncoder,l=(0,p.xo)(),s=0,c=0,m=function(){},g=function(e){r(e),t("error")},v=function(e){if(0===s&&"finished"===e){g(f.F.EMPTY_RESULTS);return}"finished"===e?t(e,{bytes:c}):t(e),m()},w=n.onOutput(function(e){var n=a.encode(e).length;c+=n;var t=l(e);if(t){var r=t.error,o=t.filesMap,u=t.filesMapChanges;r&&g(r),s=o.size,u.forEach(function(e){var n=o.get(e);n&&o.set(e,(0,p.l8)(n))}),i(o,u)}}),y=n.onStderr(function(e){if(e.trim()===h)return g(f.F.EMPTY_RESULTS);g(f.F.INVALID_COMMAND)});m=function(){w(),y()};var b=(0,p.Qq)(o);n.request({args:b,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===h?g(f.F.EMPTY_RESULTS):g(f.F.INVALID_COMMAND);v("finished")}).catch(function(e){return d.Cp(Error("Ripgrep search command failed with error: ".concat(e))),g(f.F.INVALID_COMMAND)})}((0,r._)({execer:w,onComplete:function(r,i){if(b===n){o(!1);var a,l,s,u,d="finished"===r&&i&&i.bytes===p.mj;d&&t(f.F.PARTIAL_RESULTS),v&&c.vF.time("".concat(S," - complete"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==u?u:0)>0,latency:Date.now()-Y,isPartialResults:d})}},onError:function(e){b===n&&t(e)},onParse:function(t,r){if(b===n){if(i){if(v){var a,l,s,u;c.vF.time("".concat(S," - first_chunk"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==u?u:0)>0})}A((0,p.Nn)([],t,r)),i=!1}else A((0,p.Nn)(y,t,r));m&&o(!1)}},mode:"json",context:0},e))},200)}function A(e){var n=e.container,t=a()(function(e,t,o){(function(e){return y.apply(this,arguments)})((0,r._)({container:n,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var n=e.data?function(e){var n={},t=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),c=s[0],u=s[1];n[c]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return n}(e.data):{},r=e.error===f.F.PARTIAL_RESULTS;if(r);else if(e.error)return t({error:e.error,results:null,isPartialResult:r});return t({error:null,results:n,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(n,r){return t(e,n,r)})}}},35784:(e,n,t)=>{"use strict";t.d(n,{F4:()=>i,l0:()=>s});var r=t(27189);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],i=function(e){return e.forEach(function(e){return e&&t.push("-g",e)})},l=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=a(m);g.startsWith("**")?l.push(g):c.push(g)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return c.length>0&&(i(["!*"]),new Set(c).forEach(function(e){i((function(e){var n=function(e){Array.isArray(i[e])||(i[e]=[]);var n,o=t[e],a=o.startsWith("{")&&o.endsWith("}")?s(o.substring(1,o.length-1),","):[o];(n=i[e]).push.apply(n,(0,r._)(a.map(function(n){var t=i[e-1];return t&&t.length>0?t.map(function(e){return"".concat(e,"/").concat(n)}):n}).flat(2)))},t=s(e,"/").filter(function(e){return e.length>0});"**"!==t[t.length-1]&&t.push("**");for(var i={},o=0;o<t.length;o++)n(o);return Object.values(i).flat(2)})(e).map(o))})),i(l),i(n.map(function(e){return"!".concat(o(a(e)))})),t}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){return e.replaceAll(/\*/g,function(e,n,t){return n>0&&("*"===t[n-1]||"\\"===t[n-1])||n<t.length-1&&"*"===t[n+1]?e:"**"})}var l=function(){var e={},n={},t=function(t,r){e[t]=r,n[r]=t};return t("{","}"),t("(",")"),t("[","]"),{hasKey:function(n){return n in e},getKey:function(n){return e[n]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}}}();function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var t=[],r=[],i="",o=!0,a=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(d===n){if(0===r.length){t.push(i),i="";continue}}else if(l.hasKey(d))r.push(d);else if(l.hasValue(d)&&r.pop()!==l.getValue(d))return[e];i+=d}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return 0!==r.length?[e]:(i.length>0&&t.push(i),t)}},91806:(e,n,t)=>{"use strict";t.d(n,{mj:()=>p,xo:()=>f,Qq:()=>v,l8:()=>m,Nn:()=>g});var r=t(20837),i=t(43952),o=t(27189),a=t(7020),l=t(21980);function s(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=t(35784),u=t(77581),d=t(42796).hp,p=524288;function f(){var e="",n=new Map;return function(t){var o=new Set,a=!1;if(t.trim().startsWith("error"))return{error:u.F.INVALID_COMMAND,filesMap:n,filesMapChanges:o};var s=t.indexOf("\n"),c=0,d=e+t;if(s>=0)s+=e.length;else{e=d;return}for(;s>=0;){var p=d.substring(c,s).trim();if(0!==p.length){var f=function(e){try{return JSON.parse(e)}catch(e){return null}}(p);f&&!function(e,n,t){switch(e.type){case"begin":var o=h(e.data.path);if(!o)return!1;n.set(o,{path:o,lines:[],dedentBy:0}),t.add(o);break;case"end":break;case"match":case"context":var a=h(e.data.path);if(!a)return!1;t.add(a);var s=n.get(a);if(!s)return!1;var c=function(e,n){var t,o,a=h(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),s=[];(null===(t=l[0])||void 0===t?void 0:t.trim())===""&&l.shift(),(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())===""&&l.pop();var c=0,u=0,d=e.data.submatches;return l.forEach(function(n,t){var r=e.data.line_number+t,i=u;u+=n.length+1;for(var o=[];c<d.length;){var a=d[c];if(a.start>=u)break;var l=a.start-i,p=void 0;if(p=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:n.length-l,l<n.length&&o.push({start:l,length:p}),a.end>u){a.start=u;break}c++}s.push({lineNumber:r,content:n,matches:o})}),(0,i._)((0,r._)({},n),{lines:n.lines.concat(s)})}(e,s);c&&n.set(a,c);break;case"error":return l.vF.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(f,n,o)&&(a=!0)}c=s+1,s=d.indexOf("\n",c)}return e=d.substring(c),{error:a?u.F.INVALID_LINE:null,filesMap:n,filesMapChanges:o}}}function h(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var n,t=e.lines.length>0?(n=Math).min.apply(n,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:t})}function g(e,n,t){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,s=n.get(l);t.has(l)&&s&&(r[a]=s,i.add(l))}var c=!0,u=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,m=n.get(h);!i.has(h)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return r}function v(e){var n=e.mode,t=e.query,r=e.context,i=e.isRegex,l=e.isCaseSensitive,u=e.isMatchingWholeWords,d=e.includeGlobs,f=e.excludeGlobs,h=void 0===f?(0,o._)(a.TJ):f,m=["rg"];switch(n){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),t.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(l?"--case-sensitive":"--ignore-case"),m.push("--hidden"),u&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.F4)(d,h))),m.push("--",t),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return["sh","-c","".concat(s.apply(void 0,(0,o._)(e))," | head -c ").concat(n)]}(m)}},77581:(e,n,t)=>{"use strict";t.d(n,{F:()=>r});var r=function(e){return e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your App's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed.",e}({})},14740:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(82436);function i(e){(0,r.u4)(r.AZ.FILETREE_USED,e)}},6534:(e,n,t)=>{"use strict";t.d(n,{JX:()=>L,vY:()=>P});var r=t(20837),i=t(43952),o=t(94086),a=t(24955),l=t(10168),s=t(32842),c=t(16195),u=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(c.A,{size:"small",onClick:t,children:n.content})},d=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(c.A,{size:"small",fontWeight:"medium",onClick:t,children:n.content})},p=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,rel:"noreferrer noopener nofollow",target:"_blank",children:n.content})},f=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,target:"_blank",children:n.content})},h=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,children:n.content})},m=function(e){var n=e.fragment,t=e.onClick,r=e.style;return(0,o.Y)("code",{onClick:t,style:r,children:n.content})},g=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("b",{onClick:t,children:n.content})},v=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("i",{onClick:t,children:n.content})},w=(0,l.x)({strikethrough:[{textDecoration:"line-through"}],blockquote:[s.wp.color.foregroundDimmest,s.wp.border({width:2,color:a.LU.foregroundDimmest,direction:"left"}),{paddingLeft:6}]}),y=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("span",{onClick:t,css:w.strikethrough,children:n.content})},b=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("blockquote",{onClick:t,css:w.blockquote,children:n.content})},S=/(@[0-9a-zA-Z_]+)/,Y=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,A=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,C=/(`.+?`)/,x=/(\*\*.+?\*\*)/,_=/(_.+?_)/,k=/(\*.+?\*)/,D=/(~~.+?~~)/,E=/(^>.+?$\n?)/m,R=/\/@([0-9a-zA-Z_]+)\/(.+)/;function I(e){var n=e.url;return{type:"LINK",url:n,content:n}}function F(e){var n=e.hash;return{type:"DEEP_LINK",url:n,content:n}}var T=RegExp([C.source,x.source,_.source,k.source,D.source,A.source,S.source,Y.source,E.source].join("|"),"m");function P(e,n){var t=e.split(T),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(u){var d=function(e,n){if(A.test(e)){var t={};try{t=new window.URL(e)}catch(n){return{content:e,type:"TEXT"}}return["repl.it","replit.com",document.location.host].includes(t.host)?t.pathname===n.replUrl?F({hash:t.hash}):R.test(t.pathname)?function(e){var n=e.url,t=R.exec(n.pathname);if(!t)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:n.href,content:"@".concat(t[1],"/").concat(t[2]).concat(n.hash)}}({url:t}):I({url:e}):I({url:e})}if(Y.test(e))return F({hash:e});if(E.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(C.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(x.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(_.test(e)||k.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(D.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(S.test(e)){var r=e.slice(1);if(!n.users||n.users.includes(r))return{type:"MENTION",username:r,content:"@".concat(r)}}return{content:e,type:"TEXT"}}(u,n);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function L(e){var n=e.message,t=e.onMentionClick,a=void 0===t?function(){}:t,l=e.codeStyles,s=void 0===l?{}:l;return(0,o.Y)(o.FK,{children:n.tokens.map(function(e,n){var t={fragment:e,key:n};return"MENTION"===e.type?(0,o.Y)(d,(0,i._)((0,r._)({},t),{onClick:function(){return a(e)}})):"LINK"===e.type?(0,o.Y)(p,(0,r._)({},t)):"REPL_LINK"===e.type?(0,o.Y)(f,(0,r._)({},t)):"DEEP_LINK"===e.type?(0,o.Y)(h,(0,r._)({},t)):"CODE"===e.type?(0,o.Y)(m,(0,i._)((0,r._)({},t),{style:s})):"BOLD"===e.type?(0,o.Y)(g,(0,r._)({},t)):"ITALICS"===e.type?(0,o.Y)(v,(0,r._)({},t)):"STRIKETHROUGH"===e.type?(0,o.Y)(y,(0,r._)({},t)):"QUOTE"===e.type?(0,o.Y)(b,(0,r._)({},t)):(0,o.Y)(u,(0,r._)({},t))})})}},99662:(e,n,t)=>{"use strict";t.d(n,{V:()=>i});var r=t(40174),i=r.ZU.Object({type:r.ZU.Literal("agentChat"),data:r.ZU.Optional(r.ZU.Object({sessionId:r.ZU.Optional(r.ZU.String())}))})},62757:(e,n,t)=>{"use strict";t.d(n,{N:()=>uo});var r,i,o,a,l,s,c,u,d,p,f=t(20837),h=t(43952),m=t(66622),g=t(27189),v=t(94086),w=t(30758),y=t(40174),b=t(49711),S=t(99813),Y=t(81272),A=t(6570),C=t(40073),x=t(41588),_=t(71252),k=t(85701),D=t(9076),E=t(53654),R=t(62580),I=t(32904),F=t(99655),T=t(84321),P=t(51439),L=t(32889),U=t.n(L),N=t(29917),O=t(1175),M=t(1295),B=t(54191),H=t(19310),z=t(10168),W=t(32842),G=t(8367),V=t(29346),j=t(42022);function Z(e){return(0,v.Y)(j.Ay,(0,h._)((0,f._)({},e),{children:(0,v.Y)("path",{fillRule:"evenodd",d:"M14.47 3.47a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 1 1-1.06-1.06l3.72-3.72H8A3.25 3.25 0 0 0 4.75 13v7a.75.75 0 0 1-1.5 0v-7A4.75 4.75 0 0 1 8 8.25h10.19l-3.72-3.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}var q=(0,z.x)({root:[W.wp.height(48),W.wp.backgroundColor.backgroundRoot,W.wp.display.flex,W.wp.justify.spaceBetween,W.wp.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[W.wp.color.foregroundDefault,W.wp.fontSize(16),W.wp.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[W.wp.position.fixed,W.wp.width("100%"),W.wp.zIndex(100),W.wp.left(0)]}),K=function(e){var n=e.buttons,t=e.onClick,r=e.onUndo,i=e.onRedo;return(0,v.FD)("nav",{css:q.root,children:[n.map(function(e){return(0,v.Y)("button",{onClick:function(n){n.stopPropagation(),n.preventDefault(),t(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,v.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,v.Y)(V.A,{})}),(0,v.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,v.Y)(Z,{})})]})},$=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],J=function(e){var n=e.path,t=(0,g._)($).concat([{value:"= ",cursorOffset:2}]);return n.endsWith(".html")&&(t.unshift({value:"<>",cursorOffset:1}),t.unshift({label:"div",value:"<div></div>",cursorOffset:5})),t},Q="visualViewport"in window;function X(e){var n=e.filePath,t=e.isLoading,r=(0,H.fZ)(),i=(0,O.a)({tablet:!1}),o=(0,B.jl)(),a=(0,M.A)();(0,w.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,t=e.scroller;if(n){var i=(n.top+n.bottom)/2,a=(t.top+t.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+(o?50:0))}}})},[a,r,o]);var l=(0,m._)((0,w.useState)(0),2),s=l[0],c=l[1];if((0,w.useEffect)(function(){if(o){var e=window.visualViewport;if(Q&&e){var n=U()(function(){c(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",n),e.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),e.removeEventListener("resize",n)}}}},[o]),!a||t||!i)return null;var u=(0,v.Y)(K,{onUndo:function(){r&&((0,N.tN)(r),r.focus())},onRedo:function(){r&&((0,N.ZS)(r),r.focus())},onClick:function(e){if(r){var n,t=null!==(n=r.state.selection.ranges[0].from)&&void 0!==n?n:0;r.dispatch({changes:{from:t,insert:e.value},selection:{anchor:t+e.cursorOffset}}),r.focus()}},buttons:J({path:n})});return!o||Q?(0,v.Y)(G.S,{css:q.fixedContainer,style:{bottom:s},children:u}):u}var ee=t(43035),en=t(21374),et=t(33170),er=t(4723),ei=t(40500),eo=t(16530),ea=t(66144),el=t(13454),es=t(78542),ec=t(5482),eu=t(96489),ed=t.n(eu),ep=t(16608),ef=t(2814),eh=t(62506),em=t(56328),eg=t(5805),ev=t(60023),ew=t(34896),ey=t(69834);function eb(e){var n,t;return null!==(t=null===(n=e.facet(em.q))||void 0===n?void 0:n.isDocumentSymbolSupported)&&void 0!==t&&t}var eS=ea.Pe.define(),eY=ea.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,eg.C)(n,eS,function(e){t=e.value}),t}});function eA(){return(eA=(0,el._)(function(e,n,t){var r,i,o,a,l,s,c,u,d;return(0,ec.YH)(this,function(p){switch(p.label){case 0:return[4,e.request.documentSymbol(n,{signal:t})];case 1:if(!(r=p.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];o=[],a=!0,l=!1,s=void 0;try{for(c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)(d=u.value)&&"range"in d&&o.push(d)}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}return[2,o.length?o:null]}})})).apply(this,arguments)}function eC(e){if("Debounced function cancelled"!==e.message)throw e}var ex=ea.sU.define({create:function(){return[]},update:function(e,n){if(!(0,ef.$H)(n,eY,"selection"))return e;var t=n.state.field(eY);return t?function e(n,t,r){var i=r.find(function(e){var r=e.range;return(0,ev.TU)(n,r.end)>=t&&(0,ev.TU)(n,r.start)<=t});return null==i?[]:i.children?[i].concat(e(n,t,i.children)):[i]}(n.state.doc,n.state.selection.main.head,t):[]},compare:ed()}),e_=t(55988),ek=t(56178),eD=t(75435),eE=t(84856),eR=t(38940),eI=t(24955),eF=t(75886),eT=t(85557),eP=t(67101),eL=t(16882),eU=t(53323),eN=t(61553),eO=t(60676),eM=t(49289),eB=t(47118),eH=t(75897),ez=t(27093),eW=t(96955),eG=t(53625),eV=function(e){var n=new Set(eR.A),t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,m._)(a.value,3),c=s[0],u=s[1],d=s[2];if(!n.has(c))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");t.set(c,[u,null!=d?d:eI.LU.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}([[eE.SymbolKind.Array,eH.A],[eE.SymbolKind.Boolean,eM.A],[eE.SymbolKind.Class,eT.A,eI.LU.yellowDefault],[eE.SymbolKind.Constant,eP.A,eI.LU.blueStronger],[eE.SymbolKind.Constructor,eN.A,eI.LU.blurpleDefault],[eE.SymbolKind.Enum,function(e){return(0,v.Y)(j.Ay,(0,h._)((0,f._)({},e),{children:(0,v.Y)("path",{fillRule:"evenodd",d:"M7.25 5A2.75 2.75 0 0 1 10 2.25h9A2.75 2.75 0 0 1 21.75 5v5A2.75 2.75 0 0 1 19 12.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25h-9c-.69 0-1.25.56-1.25 1.25v4a.75.75 0 0 1-1.5 0V5Zm3 1a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm-8 5A2.75 2.75 0 0 1 5 11.25h9A2.75 2.75 0 0 1 16.75 14v5A2.75 2.75 0 0 1 14 21.75H5A2.75 2.75 0 0 1 2.25 19v-5ZM5 12.75c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h9c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25H5ZM5.25 15a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))},eI.LU.orangeDefault],[eE.SymbolKind.EnumMember,eG.A,eI.LU.blueStronger],[eE.SymbolKind.Event,eF.A],[eE.SymbolKind.Field,eW.A],[eE.SymbolKind.File,eU.A],[eE.SymbolKind.Function,eN.A,eI.LU.blurpleStronger],[eE.SymbolKind.Interface,function(e){return(0,v.Y)(j.Ay,(0,h._)((0,f._)({},e),{children:(0,v.Y)("path",{fillRule:"evenodd",d:"M17 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5Zm-5.701 3.5a5.751 5.751 0 1 1 0 1.5H6.646a2.751 2.751 0 1 1 0-1.5H11.3ZM4 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},eI.LU.blueStronger],[eE.SymbolKind.Key,eO.A],[eE.SymbolKind.Method,eN.A,eI.LU.blurpleDefault],[eE.SymbolKind.Module,ez.A,eI.LU.purpleDefault],[eE.SymbolKind.Namespace,eL.A],[eE.SymbolKind.Object,eM.A,eI.LU.blueDimmer],[eE.SymbolKind.Operator,eM.A],[eE.SymbolKind.Package,ez.A,eI.LU.purpleDefault],[eE.SymbolKind.Property,eW.A],[eE.SymbolKind.String,eB.A],[eE.SymbolKind.Struct,eL.A],[eE.SymbolKind.TypeParameter,eG.A],[eE.SymbolKind.Variable,eG.A,eI.LU.blueStronger]]);function ej(e){var n,t=e.kind,r=e.size,i=(0,m._)(null!==(n=eV.get(t))&&void 0!==n?n:[eM.A,eI.LU.foregroundDefault],2),o=i[0],a=i[1];return(0,v.Y)(o,{color:a,size:void 0===r?16:r})}var eZ=t(82436),eq=t(924),eK=t(44052),e$=t(60620),eJ=t(52757),eQ=t(2298),eX=(0,eJ.AH)([eQ.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),e0={button:(0,eJ.AH)([W.wp.reset.button,W.wp.p(2),W.wp.rowWithGap(4),W.wp.align.center,eX]),text:(0,eJ.AH)({fontSize:eI.LU.fontSizeSmall})},e1={opacity:1};function e2(e){var n=e.icon,t=e.text,r=e.innerRef,i=e.ariaProps,o=e.active,a=(0,eq.s)(i,r).buttonProps,l=(0,eK.M)({}),s=l.hoverProps,c=l.isHovered;return(0,v.FD)(G.S,(0,h._)((0,f._)({tag:"button",css:e0.button,style:c||o?e1:void 0,innerRef:r},(0,e$.v)(a,s)),{children:[n?(0,w.cloneElement)(n,{size:12}):null,(0,v.Y)(G.S,{css:e0.text,children:t})]}))}var e5={root:(0,eJ.AH)([W.wp.p(4),W.wp.rowWithGap(4),W.wp.align.center]),text:(0,eJ.AH)([W.wp.truncate,W.wp.flex.growAndShrink(1),{fontSize:eI.LU.fontSizeDefault}])};function e4(e){return(0,v.FD)(G.S,{css:[e5.root],children:[e.icon?(0,w.cloneElement)(e.icon,{size:16}):null,(0,v.Y)(G.S,{css:e5.text,children:e.text})]})}var e3=t(62897),e8=t(95063),e7=t(69114),e6=(0,eJ.AH)([W.wp.p(4)]);function e9(e){var n=e.items,t=e.children,r=e.menuProps,i=e.selectedKeys,o=e.onAction,a=(0,e3.p)({items:n,children:t,selectedKeys:i,selectionMode:"single"}),l=(0,w.useRef)(null),s=(0,e8.b)((0,f._)({items:n,onAction:o},r),a,l);return(0,v.Y)(G.S,(0,h._)((0,f._)({},s.menuProps),{innerRef:l,css:e6,children:(0,g._)(a.collection).map(function(e){return(0,v.Y)(nt,{item:e,state:a},e.key)})}))}var ne={root:(0,eJ.AH)([W.wp.flex.row,W.wp.align.center,W.wp.position.relative,eX]),selected:(0,eJ.AH)([{opacity:1,backgroundColor:eI.LU.interactiveBackground}])},nn={opacity:1};function nt(e){var n=e.item,t=e.state,r=(0,w.useRef)(null),i=(0,e7.O)({key:n.key},t,r),o=i.menuItemProps,a=i.isSelected,l=(0,eK.M)({}),s=l.hoverProps,c=l.isHovered;return(0,v.Y)(G.S,(0,h._)((0,f._)({innerRef:r,css:[ne.root,a&&ne.selected],style:c||a?nn:void 0},(0,e$.v)(o,s)),{children:n.rendered}))}var nr=t(3930),ni=t(1918),no=t(76768),na=t(47579),nl=t(31955),ns={underlay:(0,eJ.AH)([W.wp.coverContainer,W.wp.position.fixed]),surface:(0,eJ.AH)([W.wp.borderRadius(8),{boxShadow:eI.LU.shadow2,border:"1px solid",borderColor:eI.LU.backgroundHighest}])};function nc(e){var n=e.state,t=e.triggerRef,r=e.placement,i=e.children,o=(0,m._)((0,na.A)("Popover"),2),a=o[0],l=o[1],s=(0,nr.f)({placement:r,triggerRef:t,popoverRef:a,offset:8},n),c=s.popoverProps,u=s.underlayProps;return(0,v.FD)(ni.hJ,{children:[(0,v.Y)(G.S,(0,h._)((0,f._)({},u),{css:ns.underlay})),(0,v.FD)(nl.ui,(0,h._)((0,f._)({elevated:!0,css:ns.surface,innerRef:l},c),{children:[(0,v.Y)(no.R,{onDismiss:n.close}),i,(0,v.Y)(no.R,{onDismiss:n.close})]}))]})}var nu=t(50656);function nd(e){return CSS.escape(e.name)}function np(e){var n=e.selectedSymbol,t=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,a=(0,ek.I)({onOpenChange:function(e){e&&(0,eZ.u4)(eZ.AZ.CODE_NAVIGATION_USED,{action:"opened"})}}),l=(0,w.useRef)(null),s=(0,eD.V)({},a,l),c=s.menuTriggerProps,u=s.menuProps,d=n?new Set([n.name]):void 0;return(0,v.FD)(v.FK,{children:[(0,v.Y)(e2,{text:o,icon:i,innerRef:l,ariaProps:c,active:a.isOpen}),a.isOpen?(0,v.Y)(nc,{triggerRef:l,state:a,placement:"bottom left",children:(0,v.Y)(e9,{menuProps:u,items:t,selectedKeys:d,onAction:function(e){var n=t.find(function(n){return nd(n)===e});n&&(r(n.selectionRange.start),(0,eZ.u4)(eZ.AZ.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,v.Y)(e_.q,{children:(0,v.Y)(e4,{icon:(0,v.Y)(ej,{kind:e.kind}),text:e.name})},nd(e))}})}):null]})}var nf=(0,w.memo)(function(e){var n=e.symbols,t=e.symbolsPath,r=e.moveCursor,i=t.length?t[t.length-1]:null,o=i?i.children:n;return(0,v.FD)(v.FK,{children:[t.map(function(e,i){var o=0===i?n:t[i-1].children;return o?(0,v.FD)(w.Fragment,{children:[(0,v.Y)(nu.A,{size:12}),(0,v.Y)(np,{symbols:o,icon:(0,v.Y)(ej,{size:12,kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},nd(e)):null}),(null==o?void 0:o.length)?(0,v.FD)(v.FK,{children:[(0,v.Y)(nu.A,{size:12}),(0,v.Y)(np,{symbols:o,text:"...",moveCursor:r})]}):null]})}),nh=(0,w.memo)(function(e){var n,t=e.view,r=(0,w.useCallback)(function(e){null==t||t.dispatch({scrollIntoView:!0,selection:ea.OF.cursor((0,ev.TU)(t.state.doc,e))}),null==t||t.focus()},[t]),i=(0,w.useDeferredValue)({symbols:(0,D.Vn)(t,eY),symbolsPath:(0,D.Vn)(t,ex)});return(null===(n=i.symbols)||void 0===n?void 0:n.length)?(0,v.Y)(nf,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),nm=t(36361),ng=t(50809),nv=t(37673),nw=t(75165),ny=t(83290),nb=t(47270),nS=t(14753),nY=(0,w.memo)(function(e){var n=e.path,t=e.performPaneOperation,r=e.isReadOnly,i=(0,H.fZ)(),o=(0,w.useCallback)(function(e){t({operation:"open",pane:(0,ng.af)(e)})},[t]);return(0,v.FD)(ng.Y9,{children:[(0,v.Y)(ng.Bm,{children:(0,v.Y)(nm.D,{path:n,onFileClick:o,children:(0,v.Y)(nh,{view:i})})}),(0,v.Y)(ng.Yw,{children:(0,v.Y)(nA,{path:n,performPaneOperation:t,isReadOnly:r})})]})});function nA(e){return(0,v.FD)(v.FK,{children:[(0,v.Y)(nC,(0,f._)({},e)),(0,v.Y)(nx,(0,f._)({},e)),(0,v.Y)(n_,(0,f._)({},e)),(0,v.Y)(nk,(0,f._)({},e))]})}function nC(e){var n=e.path,t=(0,eo._)(e,["path"]),r=(0,H.fZ)(),i=(0,D.Vn)(r,x.cS),o=(0,D.Vn)(r,x.hb),a=i||t.isReadOnly;return o&&r?(0,v.Y)(nv.k,{dataCy:"ws-format-btn",altText:"Format "+(0,E.WP)(n),buttonText:"Format",disabled:a,"aria-disabled":!!a||void 0,icon:i?(0,v.Y)(nS.A,{}):(0,v.Y)(nb.A,{}),onClick:function(){i||(0,x.BD)(r)}}):null}function nx(e){var n=e.path,t=e.performPaneOperation;return(0,E.e$)(n)?(0,v.Y)(nv.k,{altText:"Preview "+(0,E.WP)(n),buttonText:"Preview",icon:(0,v.Y)(ny.A,{}),onClick:function(){t({operation:"replace",pane:{type:"markdown",data:{path:n}}})}}):null}function n_(e){var n=e.path,t=e.performPaneOperation;return(0,E.Z7)(n)?(0,v.Y)(nv.k,{altText:"Preview "+(0,E.WP)(n),buttonText:"Preview",icon:(0,v.Y)(ny.A,{}),onClick:function(){t({operation:"replace",pane:{type:"media",data:{path:n}}})}}):null}function nk(e){var n=e.path,t=e.performPaneOperation,r=(0,nw.vO)();return(0,E.Zy)(n)?(0,v.Y)(nv.k,{altText:"Toggle Preview",buttonText:"Preview",icon:(0,v.Y)(ny.A,{}),onClick:function(){var e=r();t({operation:"replace",pane:{type:"csvPreview",data:{path:n,line:null==e?void 0:e.position.line}}})}}):null}var nD=t(60049),nE=t.n(nD),nR=t(26196),nI=t.n(nR),nF=t(75163),nT=t(36601),nP=t(95123),nL=t(24481),nU=t(22824),nN=new nT.k(function(e,n,t){return(0,nF.aQ)(e,n?(0,nU.vB)(n):null,t)}),nO=t(32391),nM=new nT.k(function(e){return e?ep.Lz.domEventObservers({keydown:function(e,n){(0,nO.A)(n,{message:"Editing is disabled while the agent is working",offset:n.state.selection.main.from,ignoreKeydown:!0})}}):null}),nB=t(33312),nH=t(83748),nz=t.n(nH),nW="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),nG="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),nV=ep.Lz.theme({".cm-vws-space":{backgroundColor:eI.LU.foregroundDimmest,maskImage:nW,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nW,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:eI.LU.foregroundDimmest,maskImage:nG,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nG,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),nj=nz()(function(e,n,t){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(n).concat(t?" cm-vws-selected":"");return ep.NZ.mark({class:r})},function(e,n,t){return"".concat(e,"-").concat(n,"-").concat(t)});function nZ(e,n,t){var r=e.facet(n$);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(n),a=e.doc.lineAt(t),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0!==l){var s=0===a.text.trim().length,c=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||c){if(s){if(r.leading||r.trailing||c)for(var u=0;u<l;u++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r.leading||r.trailing||u)&&i.push(nj(l,"trailing",u).range(s,s+1))}}(u);return}for(var d=l-a.text.trimStart().length,p=a.text.trim().length,f=0;f<l;f++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+p?"trailing":o>d?"enclosed":"leading";var f=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r[u]||f)&&i.push(nj(l,u,f).range(s,s+1))}}(f)}}}(l);return i}var nq=function(){function e(n){(0,es._)(this,e),this.decorations=ep.NZ.set(nZ(n.state,0,n.state.doc.length))}return e.prototype.update=function(e){if((0,ef.$H)(e,n$)){this.decorations=ep.NZ.set(nZ(e.state,0,e.state.doc.length));return}var n=e.state.facet(n$);if(e.docChanged||e.selectionSet&&n.selected){var t=this.decorations,r=null,i=null;if(e.selectionSet&&n.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,g._)(e.state.selection.ranges).concat((0,g._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=ea.OF.create(o)),a.length&&(i=ea.OF.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(n,t,o,a){var l=ea.OF.range(e.startState.doc.lineAt(n).from,e.startState.doc.lineAt(t).to);r=r?r.addRange(l):ea.OF.create([l]);var s=ea.OF.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(s):ea.OF.create([s])}),r){var l=r.ranges;t=t.update({filter:function(e,n){return!l.some(function(t){return t.from<=e&&t.to>=n})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(t=t.map(e.changes)),i&&(t=t.update({add:i.ranges.map(function(n){return nZ(e.state,n.from,n.to)}).flat()})),this.decorations=t}},e}(),nK=ep.Z9.fromClass(nq,{decorations:function(e){return e.decorations}}),n$=ea.sj.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:{}},enables:[nV,ea.Nb.highest(nK)]}),nJ=new nT.k(function(e,n,t,r){return e||n||t||r?n$.of({leading:e,enclosed:n,trailing:t,selected:r}):null}),nQ=t(65380),nX=t(82845),n0=t(88467),n1=t(68543),n2=t(63423),n5=t(41983),n4=t(55814),n3=t(64595),n8=new nT.k(function(e,n,t,r,i,o){return e?e.formatters.map(function(e){var a;if(2===(a=e.id.split("/")).length&&a[1].includes("languageServer")){var l,s,c=t.find(function(n){return n.clientId===e.id});return c&&c&&c.isSupportedFile(o)&&r&&r.isFormatSupported&&(0,ey.A)(c).isFormatSupported&&i?nQ.fC.of({format:(l=(0,el._)(function(e,n,t){return(0,ec.YH)(this,function(r){return[2,(n?c.request.formatRange(o,(0,ev.fj)(e,n),t):c.request.format(o,t)).then(function(n){return"error"in n||n.cancelled?{error:!0}:n.result?{result:(0,n5.A)(n.result,e.toString())}:{result:ea.VR.empty(e.length)}})]})}),function(e,n,t){return l.apply(this,arguments)}),supportsRangeFormatting:(0,ey.A)(c).isFormatRangeSupported,identifier:c.clientId,name:c.clientName}):[]}return(0,nX.fu)(o,e)?nQ.fC.of({format:(s=(0,el._)(function(t,r,i){var a,l,s,c,u;return(0,ec.YH)(this,function(d){switch(d.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,n1.A)({container:n}),(l=(0,g._)(e.startCommand.args)).push("-f",o),r&&(l.push("--range-start",String(r.main.from)),l.push("--range-end",String(r.main.to))),l.push("--tab-size",String(i.tabSize)),i.insertSpaces&&l.push("--insert-spaces"),i.trimFinalNewlines&&l.push("--trim-final-newlines"),i.trimTrailingWhitespace&&l.push("--trim-trailing-whitespace"),i.insertFinalNewline&&l.push("--insert-final-newline"),e.startCommand.lifecycle===n0.api.Exec.Lifecycle.STDIN&&l.push("--stdin"),s="",c="",u=[a.onOutput(function(e){return s+=e}),a.onStderr(function(e){return c+=e}),a.dispose],[4,a.request((0,h._)((0,f._)({},e.startCommand),{args:l,lifecycle:n0.api.Exec.Lifecycle.STDIN,stdin:t.toString()})).then(function(e){var n=e.error;return u.forEach(function(e){return e()}),n?{error:!0,message:c}:{result:s}})];case 1:return[2,d.sent()]}})}),function(e,n,t){return s.apply(this,arguments)}),supportsRangeFormatting:e.supportsRangeFormatting,identifier:e.id,name:e.name}):null}).filter(Boolean):null}),n7=t(61913),n6=t(36086),n9=t(8143),te=t(41348),tn=t(80919),tt=t(76008),tr=t(53536),ti=t(40889),to=t(48729),ta=t(59062),tl=(0,z.x)({codeRepairUpsell:[W.wp.minHeight("auto"),W.wp.minWidth("325px"),W.wp.borderRadius(4),W.wp.backgroundColor.backgroundHigher],codeRepairUpsellBody:[W.wp.px(6),W.wp.py(4),W.wp.gap(4),W.wp.colorMixBg(eI.LU.blurpleDimmest,"transparent",.25)],codeRepairText:[{filter:"blur(3px)",opacity:.6,userSelect:"none"}],popoutWrapper:[W.wp.backgroundColor.backgroundHigher,W.wp.borderRadius(4),W.wp.position.fixed,{top:"var(--popout-top, 0px)",left:"var(--popout-left, 0px)"}],codeRepairGif:[W.wp.borderRadius(4)]}),ts=function(e){var n=e.diagnostic,t=e.handleOpenPurchaseModal,r=(0,m._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,m._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,w.useRef)(null),u=(0,w.useRef)(null);return(0,w.useEffect)(function(){if(i&&c.current){var e,n,t=c.current.getBoundingClientRect(),r=t.top-50,o=t.right+10;null===(e=u.current)||void 0===e||e.style.setProperty("--popout-top","".concat(r,"px")),null===(n=u.current)||void 0===n||n.style.setProperty("--popout-left","".concat(o,"px"))}},[i]),(0,v.FD)(G.S,{css:tl.codeRepairUpsell,children:[(0,v.FD)(G.S,{css:tl.codeRepairUpsellBody,children:[(0,v.FD)(G.S,{row:!0,gap:8,align:"center",children:[(0,v.Y)(tr.d,{iconLeft:(0,v.Y)(ta.A,{}),colorway:"yellow",text:"Upgrade to enable automatic AI code fixes.",onClick:function(){var e;t(),(0,eZ.u4)(eZ.AZ.AI_CODE_REPAIR_EVENT,{action:"code_suggestion_upgrade",diagnostic_code:null===(e=n.code)||void 0===e?void 0:e.toString()})}}),(0,v.Y)(G.S,{innerRef:c,css:W.wp.cursor.pointer,onMouseEnter:function(){if(o(!0),!l){var e;s(!0),(0,eZ.u4)(eZ.AZ.AI_CODE_REPAIR_EVENT,{action:"demo_gif_viewed",diagnostic_code:null===(e=n.code)||void 0===e?void 0:e.toString()})}},onMouseLeave:function(){return o(!1)},children:(0,v.Y)(ny.A,{})})]}),(0,v.Y)(ti.EY,{children:(0,v.Y)("code",{css:tl.codeRepairText,children:"print('repair code with AI')"})})]}),i?(0,n9.createPortal)((0,v.Y)(G.S,{innerRef:u,css:tl.popoutWrapper,children:(0,v.Y)(to.A,{alt:"code-repair-gif",src:"/public/images/ai/code-repair.gif",height:270,width:480,css:tl.codeRepairGif})}),document.body):null]})},tc=function(e){var n=(0,ep.Ux)(function(n,t){var r,i=(0,k.VS)(n.state),o=null,a=!0,l=!1,s=void 0;try{for(var c,u,d=i[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value,f=(0,m._)((0,tn.i)(n.state,p),2),h=f[0],g=f[1];if(t>=h&&t<=g){o=p;break}}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}if(!o||!te.N.includes(null!==(r=null===(c=o.code)||void 0===c?void 0:c.toString())&&void 0!==r?r:""))return null;var w=(0,m._)((0,tn.i)(n.state,o),2);return{pos:w[0],end:w[1],create:function(){var n=(0,tt.J)((0,v.Y)(ts,{diagnostic:o,handleOpenPurchaseModal:e}));return n.classList.add("hover-tooltip"),n.style.padding="0",{dom:n}},above:!0}});return[ea.Nb.lowest(n)]},tu=new nT.k(function(e){return(0,g._)(tc(e))}),td=t(42780),tp=t(78910),tf=t(88708),th=function(e){function n(e){var t;return(0,es._)(this,n),(t=(0,tp._)(this,n)).type=e,t}return(0,tf._)(n,e),n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,n,t){return this.from(e).range(n,t)},n}(ea.FB);function tm(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=t;o<=r;){var a=e.lineAt(o),l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<n)return null;var t=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(t);if(!r)return null;var i=t.repeat(n);return e.text.slice(0,n)!==i||e.text.length>n&&" "!==e.text[n]?null:r}(a,n);l&&i.push(th.range(l,a.from,a.to)),o=a.to+1}return i}th.yours=new th("yours"),th.base=new th("base"),th.middle=new th("middle"),th.theirs=new th("theirs");var tg=["yours","base","middle","theirs"];function tv(e){Array.isArray(e)&&(e=ea.om.of(e));var n=[],t=[];if(0===e.size)return{hunks:n,hanging:t};for(var r=e.iter();null!==r.value;){var i,o,a,l={},s={},c=[],u=!0,d=!1,p=void 0;try{for(var f,h=tg[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,v=r.value,w=r.from,y=r.to;if("base"!==m||v.type===m){if(v.type===m)l[m]={from:w,to:y},c.push({from:w,to:y,type:v.type});else if("yours"!==v.type)c.push({from:w,to:y,type:v.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}if(!l.yours||!l.middle||!l.theirs){t.push.apply(t,(0,g._)(c));continue}null!==(i=l.base)&&void 0!==i||(l.base=null),null!==(o=s.base)&&void 0!==o||(s.base=null);var b=null!==(a=l.base)&&void 0!==a?a:l.middle,S=l.yours.to+1,Y=b.from-1;if(s.yours=S<Y?{from:S,to:Y}:null,l.base){var A=l.base.to+1,C=l.middle.from-1;s.base=A<C?{from:A,to:C}:null}var x=l.middle.to+1,_=l.theirs.from-1;s.theirs=x<_?{from:x,to:_}:null;var k={from:l.yours.from,to:l.theirs.to,markers:l,content:s};n.push(k)}return{hunks:n,hanging:t}}var tw=ea.sj.define({combine:function(e){return e.length?e[0]:7}}),ty=ea.sU.define({create:function(e){var n=e.doc,t=e.facet(tw),r=ea.om.of(tm(n,t)),i=tv(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,n){var t=n.newDoc,r=n.startState.facet(tw),i=n.state.facet(tw);if(r!==i){var o=ea.om.of(tm(t,i)),a=tv(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!n.docChanged)return e;var l=null,s=null,c=null,u=null;n.changes.iterChangedRanges(function(e,n,t,r){l=null===l?e:Math.min(l,e),s=null===s?n:Math.max(s,n),c=null===c?t:Math.min(c,t),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==s){var p=n.startState.doc.lineAt(l).from,f=n.startState.doc.lineAt(s).to;d=d.update({filter:function(){return!1},filterFrom:p,filterTo:f})}d=d.map(n.changes),null!==c&&null!==u&&(d=d.update({add:tm(t,i,c,u)}));var h=tv(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),tb=ep.Lz.atomicRanges.from(ty,function(e){return function(){return e.markers}}),tS=ea.$t.changeFilter.of(function(e){var n=e.startState.field(ty);if(!e.docChanged||0===n.markers.size)return!0;var t=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var s=l.length,c=Math.max(t.lineAt(e).from-1,0),u=Math.min(t.lineAt(i).to+1,t.length);n.markers.between(c,u,function(n,c){e<=n&&i>=c||0!==s&&(e===c&&"\n"===l.sliceString(0,1)||i===n&&"\n"===l.sliceString(s-1,s))||o===a&&(i===c+1&&0===t.lineAt(i).length||e===n-1&&0===t.lineAt(e).length)||r.push(n-1,c+1)})}),!(r.length>0)||r}),tY=ea.$t.transactionFilter.of(function(e){var n=e.docChanged?e.state.field(ty):e.startState.field(ty);if(0===n.markers.size)return e;var t=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<t.ranges.length&&"break"!==function(e){var o=t.ranges[e],a=o.from,l=o.to,s=a,c=l;if(n.markers.between(a,l,function(e,n){var t=(e+n)/2;a>e&&a<n&&(s=a<t?e:n),l>e&&l<n&&(c=l<t?e:n)}),s!==a||c!==l){var u,d=o.anchor<o.head?s:c,p=o.anchor<o.head?c:s,f=o.goalColumn,h=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=ea.OF.range(d,p,f,h);return t=t.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:t,sequential:!0}]:e}),tA=t(72275),tC="cm-git-conflict-marker-yours",tx="cm-git-conflict-marker-base",t_="cm-git-conflict-marker-middle",tk="cm-git-conflict-marker-theirs",tD="cm-git-conflict-marker-hanging",tE="cm-git-conflict-content-yours",tR="cm-git-conflict-content-base",tI="cm-git-conflict-content-theirs";function tF(e){var n=e.background,t=e.color,r=e.noBorder,i={color:t,backgroundColor:n,backgroundClip:"padding-box",paddingTop:eI.LU.space4,paddingBottom:eI.LU.space4,fontWeight:eI.LU.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function tT(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var tP=ep.Lz.theme((o={},(0,tA._)(o,".".concat(tC),tF({background:"rgba(0, 150, 255, 0.1)",color:eI.LU.blueStrongest,noBorder:!0})),(0,tA._)(o,".".concat(t_),tF({background:"rgba(255, 0, 0, 0.1)",color:eI.LU.redStrongest})),(0,tA._)(o,".".concat(tx),tF({background:"rgba(255, 165, 0, 0.1)",color:eI.LU.orangeStrongest})),(0,tA._)(o,".".concat(tk),tF({background:"rgba(0, 150, 255, 0.1)",color:eI.LU.blueStrongest,noBorder:!0})),(0,tA._)(o,".".concat(tD),tF({background:"rgba(100, 150, 255, 0.1)",color:eI.LU.blueStrongest,noBorder:!0})),(0,tA._)(o,".".concat(tE),tT({background:"rgba(0, 255, 0, 0.1)"})),(0,tA._)(o,".".concat(tI),tT({background:"rgba(255, 0, 0, 0.1)"})),(0,tA._)(o,".".concat(tR),tT({background:"rgba(255, 165, 0, 0.1)"})),o)),tL={yours:{marker:ep.NZ.line({class:tC}),content:ep.NZ.line({class:tE})},base:{marker:ep.NZ.line({class:tx}),content:ep.NZ.line({class:tR})},middle:{marker:ep.NZ.line({class:t_})},theirs:{marker:ep.NZ.line({class:tk}),content:ep.NZ.line({class:tI})},hanging:{marker:ep.NZ.line({class:tD})}},tU=function(){function e(n){(0,es._)(this,e),this.builder=new ea.vB,this.doc=n}var n=e.prototype;return n.add=function(e,n){var t=this.doc.lineAt(e.from);if(t.to>=e.to){this.builder.add(t.from,t.from,n);return}for(var r=t.from;r<=e.to;)this.builder.add(r,r,n),r=this.doc.lineAt(r).to+1},n.finish=function(){return this.builder.finish()},e}(),tN=ep.Lz.decorations.from(ty,function(e){return function(n){var t=new tU(n.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n.viewport.from>s.to||n.viewport.to<s.from||(t.add(s.markers.yours,tL.yours.marker),s.content.yours&&t.add(s.content.yours,tL.yours.content),s.markers.base&&t.add(s.markers.base,tL.base.marker),s.content.base&&t.add(s.content.base,tL.base.content),t.add(s.markers.middle,tL.middle.marker),s.content.theirs&&t.add(s.content.theirs,tL.theirs.content),t.add(s.markers.theirs,tL.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}}),tO=ep.Lz.decorations.from(ty,function(e){return function(){var n=new ea.vB,t=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.add(l.from,l.from,tL.hanging.marker)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.finish()}}),tM=[ty,[tb,tS,tY],[ea.Nb.lowest(tP),tN,tO]],tB=t(61755),tH=function(){function e(n,t,r,i,o,a){(0,es._)(this,e),this.original=n,this.current=t,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var n=e.prototype;return n.hasChanges=function(){return this.ranges.length>0},n.update=function(n,t){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,s=this.desc,c=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-n.length)>=250||i){var d=(0,tB._c)(s,c,t).pending;l=(0,tB.Pt)(a,n,{chunks:l,changesB:d},o),s=(0,tB.fc)(l,a.length),c=null,u=(0,tB.Zl)(s)}else c=(r=(0,tB._c)(s,c,t)).pending,s=r.desc,u=(0,tB.Zl)(s);return c&&n.eq(a)&&(l=[],s=ea.VR.empty(a.length),c=null,u=[]),new e(a,n,l,s,c,u)},n.isAccurate=function(){return null===this.pending},n.getLineChangeType=function(e){var n=this.current.line(e);return 0===this.original.length&&this.current.length>0?tB.DE.COVERED:(0,tB.$F)(this.original,this.current,n,tB.mn.B,this.ranges)},n.iterRanges=function(){return(0,ec.YH)(this,function(e){switch(e.label){case 0:return[5,(0,ec.Ju)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tB.r6,i=(0,tB.Pt)(n,t,void 0,r),o=(0,tB.fc)(i,n.length),a=(0,tB.Zl)(o);return new e(n,t,i,o,null,a)},e}(),tz=t(21980),tW=ea.sj.define({combine:function(e){var n;return null!==(n=e.filter(Boolean)[0])&&void 0!==n?n:null}}),tG=ea.sU.define({create:function(){return null},update:function(e,n){var t=n.state.facet(tW);if(!t||Math.max(t.lines,n.newDoc.lines)>5e3||Math.max(t.length,n.newDoc.length)>4e5)return null;var r=performance.now(),i=tB.r6,o="unknown";e&&e.original.eq(t)?n.docChanged&&(e=e.update(n.newDoc,n.changes,!(n.isUserEvent("input.type")||n.isUserEvent("delete.forward")||n.isUserEvent("delete.backward")),i),o="update"):(e=tH.create(t,n.newDoc,i),o="create");var a=performance.now()-r;return a>1e3&&tz.vF.time("slow SloppyDiff.create recorded",a,{start:t.toString(),end:n.newDoc.toString(),scanLimit:i.scanLimit,type:o}),e}}),tV=t(87660),tj=(0,ep.cU)({class:tV.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(tG,!1);if(!t||!t.hasChanges())return tV.jn;if(0===t.original.length)return tV.Ww;var r=e.state.doc.lineAt(n.from);switch(t.getLineChangeType(r.number)){case tB.DE.COVERED:return tV.CI;case tB.DE.MODIFIED:return tV.tH;default:return tV.jn}},initialSpacer:function(e){return e.state.field(tG,!1)?tV.Ww:tV.jn},updateSpacer:function(e,n){var t=n.state.field(tG,!1)?tV.Ww:tV.jn;return e===t?e:t}}),tZ=ea.sj.define({enables:function(e){return[tW.computeN([e],function(n){return n.facet(e)}),tV.s,tG,ea.Nb.highest(tj)]}}),tq=t(73712),tK=function(e){return e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF",e}({}),t$=ea.Pe.define(),tJ=ea.Pe.define(),tQ=ea.sU.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,n){var t=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,s=n.effects[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.is(t$)?t=c.value:c.is(tJ)&&(r=c.value)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t!==e.head||r!==e.mode?{head:t,mode:r}:e},provide:function(e){return[tZ.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),tq.X.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),tX=function(){function e(n,t,r){var i=this;(0,es._)(this,e),this.view=n,this.git=t,this.path=r,this.disposed=!1,this.dispose=t.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var n=e.prototype;return n.fetchThenUpdateState=function(){var e=this;return(0,el._)(function(){var n,t,r,i,o;return(0,ec.YH)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD",convertToBase64:(0,E.FN)(e.path)})];case 1:if(n=a.sent(),e.disposed||!(t=e.view.state.field(tQ,!1)))return[2];return(!(o=null===(i=n.error?null:null!==(r=n.content)&&void 0!==r?r:"")?null:e.view.state.toText(i))!=!t.head||o&&t.head&&!o.eq(t.head))&&e.view.dispatch({effects:t$.of(o)}),[2]}})})()},n.destroy=function(){this.dispose(),this.disposed=!0},e}(),t0=t(63679),t1=new nT.k(function(e,n,t){var r=[n?[tQ,ep.Z9.define(function(t){return new tX(t,e,n)})]:[]];return t||r.push(tM),r}),t2=t(69070),t5=t(17230),t4=t(58976),t3=t(30653),t8=t(37729),t7=t(35737),t6=t(89929),t9=ea.sj.define({combine:function(e){return e.some(Boolean)}}),re=t(39487),rn=t(71929),rt=t(49335),rr=function(){function e(){(0,es._)(this,e),this.value="",this.pos=0}var n=e.prototype;return n.text=function(e){this.value=e,this.pos=0},n.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n,t=this.pos,r=0,i=this.value.charCodeAt(t);if("number"==typeof(n=e._table[i]))return this.pos+=1,{type:n,pos:t,len:1};if(e.isDigitCharacter(i)){n=8;do r+=1,i=this.value.charCodeAt(t+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}if(e.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(t+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}n=10;do r+=1,i=this.value.charCodeAt(t+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();rr._table=(a={},(0,tA._)(a,36,0),(0,tA._)(a,58,1),(0,tA._)(a,44,2),(0,tA._)(a,123,3),(0,tA._)(a,125,4),(0,tA._)(a,92,5),(0,tA._)(a,47,6),(0,tA._)(a,124,7),(0,tA._)(a,43,11),(0,tA._)(a,45,12),(0,tA._)(a,63,13),a);var ri=function(){function e(){(0,es._)(this,e),this._children=[],function(e,n){n.forEach(function(n){Object.defineProperty(e,n,{enumerable:!1,writable:!0})})}(this,["parent"])}var n=e.prototype;return n.appendChild=function(e){return e instanceof ro&&this._children[this._children.length-1]instanceof ro?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.replace=function(e,n){var t=e.parent,r=t.children.indexOf(e),i=t.children.slice(0);i.splice.apply(i,[r,1].concat((0,g._)(n))),t._children=i,function e(n,t){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.parent=t,e(s.children,s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(n,t)},n.toString=function(){return this.children.reduce(function(e,n){return e+n.toString()},"")},n.len=function(){return 0},n.match=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(rm)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,m._)(i.value,2),l=a[0],s=a[1];if(this instanceof s&&l in e)return e[l](this)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},(0,re._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof rf)return e;e=e.parent}}}]),e}(),ro=function(e){function n(e){var t;return(0,es._)(this,n),(t=(0,tp._)(this,n)).value=e,t}(0,tf._)(n,e);var t=n.prototype;return t.toString=function(){return this.value},t.toTextmateString=function(){return n.escape(this.value)},t.len=function(){return this.value.length},t.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(ri),ra=function(e){function n(){return(0,es._)(this,n),(0,tp._)(this,n,arguments)}return(0,tf._)(n,e),n}(ri),rl=function(e){function n(e){var t;return(0,es._)(this,n),(t=(0,tp._)(this,n)).index=e,t}(0,tf._)(n,e);var t=n.prototype;return t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},t.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,n){return e.index===n.index?0:e.isFinalTabstop?1:n.isFinalTabstop||e.index<n.index?-1:e.index>n.index?1:0},(0,re._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof rs?this._children[0]:void 0}}]),n}(ra),rs=function(e){function n(){var e;return(0,es._)(this,n),e=(0,tp._)(this,n,arguments),e.options=[],e}(0,tf._)(n,e);var t=n.prototype;return t.appendChild=function(e){return e instanceof ro&&(e.parent=this,this.options.push(e)),this},t.toString=function(){return this.options[0].value},t.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},t.len=function(){return this.options[0].len()},t.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(ri),rc=function(e){function n(){var e;return(0,es._)(this,n),e=(0,tp._)(this,n,arguments),e.regexp=RegExp(""),e}(0,tf._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=this,t=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=!0,n._replace(r.slice(0,-2))});return!t&&this._children.some(function(e){return e instanceof ru&&!!e.elseValue})&&(r=this._replace([])),r},t._replace=function(e){var n="",t=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l instanceof ru){var s=e[l.index]||"";s=l.resolve(s),n+=s}else n+=l.toString()}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},t.toString=function(){return""},t.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},t.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(ri),ru=function(e){function n(e,t,r,i){var o;return(0,es._)(this,n),(o=(0,tp._)(this,n)).index=e,o.shorthandName=t,o.ifValue=r,o.elseValue=i,o}(0,tf._)(n,e);var t=n.prototype;return t.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";if(e&&"string"==typeof this.ifValue)return this.ifValue;if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},t._toPascalCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t._toCamelCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e,n){return 0===n?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},t.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(ri),rd=function(e){function n(e){var t;return(0,es._)(this,n),(t=(0,tp._)(this,n)).name=e,t}(0,tf._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=e.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),void 0!==n&&(this._children=[new ro(n)],!0)},t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},t.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(ra);function rp(e,n){for(var t=(0,g._)(e);t.length>0;){var r=t.shift();if(!n(r))break;t.unshift.apply(t,(0,g._)(r.children))}}var rf=function(e){function n(){return(0,es._)(this,n),(0,tp._)(this,n,arguments)}(0,tf._)(n,e);var t=n.prototype;return t.offset=function(e){var n=0,t=!1;return(this.walk(function(r){return r===e?(t=!0,!1):(n+=r.len(),!0)}),t)?n:-1},t.fullLen=function(e){var n=0;return rp([e],function(e){return n+=e.len(),!0}),n},t.enclosingPlaceholders=function(e){for(var n=[],t=e.parent;t;)t instanceof rl&&n.push(t),t=t.parent;return n},t.resolveVariables=function(e){var n=this;return this.walk(function(t){return t instanceof rd&&t.resolve(e)&&delete n._placeholders,!0}),this},t.appendChild=function(e){return delete this._placeholders,(0,rn._)((0,rt._)(n.prototype),"appendChild",this).call(this,e)},t.replace=function(e,t){return delete this._placeholders,(0,rn._)((0,rt._)(n.prototype),"replace",this).call(this,e,t)},t.toTextmateString=function(){return this.children.reduce(function(e,n){return e+n.toTextmateString()},"")},t.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},t.walk=function(e){rp(this.children,e)},(0,re._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,n=[];this.walk(function(t){return t instanceof rl&&(n.push(t),e=!e||e.index<t.index?t:e),!0}),this._placeholders={all:n,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(ri),rh=function(){function e(){(0,es._)(this,e),this._scanner=new rr,this._token={type:14,pos:0,len:0}}var n=e.prototype;return n.text=function(e){return this.parse(e).toString()},n.parse=function(e,n,t){var r=new rf;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=t&&t,null!=n&&n),r},n.parseFragment=function(e,n){var t=n.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(n););var r=new Map,i=[];n.walk(function(e){return e instanceof rl&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,t){var i=r.get(e.index);if(i){var a=new rl(e.index);a.transform=e.transform;var l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value.clone();a.appendChild(p),p instanceof rl&&r.has(p.index)&&!t.has(p.index)&&(t.add(p.index),o(p,t),t.delete(p.index))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}n.replace(e,[a])}},a=new Set,l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;o(p,a)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return n.children.slice(t)},n.ensureFinalTabstop=function(e,n,t){(n||t&&e.placeholders.length>0)&&!e.placeholders.find(function(e){return 0===e.index})&&e.appendChild(new rl(0))},n._accept=function(e,n){if(void 0===e||this._token.type===e){var t=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1},n._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n._until=function(e){for(var n=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var t=this._scanner.next();if(0!==t.type&&4!==t.type&&5!==t.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},n._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n._parseEscaped=function(e){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,e.appendChild(new ro(n)),!0)},n._parseTabstopOrVariableName=function(e){var n,t=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(n)?new rl(Number(n)):new rd(n)),!0):this._backTo(t)},n._parseComplexPlaceholder=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(t);var r=new rl(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new ro("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new rs;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(t),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseChoiceElement=function(e){for(var n=this._token,t=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(n),!1;t.push(r)}return 0===t.length?(this._backTo(n),!1):(e.appendChild(new ro(t.join(""))),!0)},n._parseComplexVariable=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(t);var r=new rd(n);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new ro("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseTransform=function(e){for(var n=new rc,t="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){t+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){t+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,n.appendChild(new ro(o));continue}if(!(this._parseFormatString(n)||this._parseAnything(n)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{n.regexp=new RegExp(t,r)}catch(e){return!1}return e.transform=n,!0},n._parseFormatString=function(e){var n=this._token;if(!this._accept(0))return!1;var t=!1;this._accept(3)&&(t=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!t||this._accept(4))return e.appendChild(new ru(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new ru(Number(r),i)),!0):(this._backTo(n),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new ru(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new ru(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var s=this._until(4);if(s)return e.appendChild(new ru(Number(r),void 0,l,s)),!0}}else{var c=this._until(4);if(c)return e.appendChild(new ru(Number(r),void 0,void 0,c)),!0}return this._backTo(n),!1},n._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new ro(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(n){return new e().parse(n).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),rm={Text:ro,Placeholder:rl,Variable:rd,FormatString:ru,Choice:rs},rg=function(){function e(n){(0,es._)(this,e),this.lines=n.split(/\r\n?|\n/).map(function(e){return new rh().parse(e).children})}return e.prototype.apply=function(n){var t=n.view,r=n.from,i=n.to,o=e.instantiate(this.lines,n),a=o.text,l=o.ranges,s={from:r,to:i,insert:ea.EY.of(a)},c={changes:s,scrollIntoView:!0,annotations:t8.rK.of(n.completion)};if(l.length&&(c.selection=rA(l,0)),l.length>1){var u=new ry(l,0),d=c.effects=[rb.of(u)];void 0===t.state.field(rY,!1)&&d.push(ea.Pe.appendConfig.of([rY,rx,r_]))}if(r===i&&!l.length){var p=ea.VR.of(s,t.state.doc.length),f=t.state.selection.ranges.map(function(e){return e.map(p,0)});c.selection=ea.OF.create(f,t.state.selection.mainIndex)}return c},e.resolveVariable=function(e,n){var t=n.view,r=n.from,i=n.path;switch(e){case"TM_FILENAME":return(0,nR.basename)(i);case"TM_FILENAME_BASE":return(0,nR.basename)(i,(0,nR.extname)(i));case"TM_DIRECTORY":return(0,nR.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(t.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return t.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(n,t){var r=t.view,i=t.from,o=r.state,a=[],l=[],s=o.doc.lineAt(i),c=/^\s*/.exec(s.text)[0],u=o.facet(Y.Xt),d=!0,p=!1,m=void 0;try{for(var v,w,y=n[Symbol.iterator]();!(d=(w=y.next()).done);d=!0)!function(){var n=w.value,r=0,o="",s=function(e){var n=0,t=r;if(0===r&&(n=/^\t*/.exec(e)[0].length)){var i=c+u.repeat(n);e=i+e.slice(n),t+=i.length}return o+=e,r+=e.length,{line:a.length,from:t,to:r}},d=function(n){var o=!0,c=!1,u=void 0;try{for(var p,f=n[Symbol.iterator]();!(o=(p=f.next()).done);o=!0)p.value.match({Text:function(e){s(e.value)},Variable:function(n){var r=n.name,i=n.transform,o=e.resolveVariable(r,t);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(n[e.index])}})}).filter(Boolean).join("")})),s(o)},Choice:function(e){s(e.options[0].value)},Placeholder:function(e){var n,t=a.length?i+a.map(function(e){return e.length}).reduce(function(e,n){return e+n}):i;if(null===(n=e.children)||void 0===n?void 0:n.length){var o={field:e.index,from:t+r,to:null};l.push(o),d(e.children),o.to=t+r}else{s("");var c=t+r;l.push({field:e.index,from:c,to:c})}}})}catch(e){c=!0,u=e}finally{try{o||null==f.return||f.return()}finally{if(c)throw u}}};d(n),a.push(o)}()}catch(e){p=!0,m=e}finally{try{d||null==y.return||y.return()}finally{if(p)throw m}}var b=(v=Math).max.apply(v,(0,g._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var n=e.field,t=(0,eo._)(e,["field"]);return(0,h._)((0,f._)({},t),{field:0===n?b:n-1})})}},e}(),rv=ep.NZ.widget({widget:new(function(e){function n(){return(0,es._)(this,n),(0,tp._)(this,n,arguments)}(0,tf._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},t.ignoreEvent=function(){return!1},n}(ep.xO))}),rw=ep.NZ.mark({class:"cm-snippetField"}),ry=function(){function e(n,t){(0,es._)(this,e),this.ranges=n,this.active=t,this.deco=ep.NZ.set(n.map(function(e){return(e.from===e.to?rv:rw).range(e.from,e.to)}))}var n=e.prototype;return n.map=function(n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value,c=function(e,n){var t=n.mapPos(e.from,-1,ea.iR.TrackDel),r=n.mapPos(e.to,1,ea.iR.TrackDel);return null==t||null==r?null:{field:e.field,from:t,to:r}}(s,n);if(!c)return null;t.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(t,this.active)},n.isSelectionInsideField=function(e){var n=this;return e.ranges.every(function(e){return n.ranges.some(function(t){return t.field===n.active&&t.from<=e.from&&t.to>=e.to})})},e}(),rb=ea.Pe.define({map:function(e,n){return null==e?void 0:e.map(n)}}),rS=ea.Pe.define(),rY=ea.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(rb))return l.value;if(l.is(rS)&&e)return new ry(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.isSelectionInsideField(n.selection)&&(e=null),e},provide:function(e){return ep.Lz.decorations.from(e,function(e){return e?e.deco:ep.NZ.none})}});function rA(e,n){var t=e.filter(function(e){return e.field===n}).map(function(e){return ea.OF.range(e.from,e.to)});if(0!==t.length)return ea.OF.create(t)}function rC(e){return function(n){var t,r=n.state,i=n.dispatch,o=r.field(rY,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(t=Math).max.apply(t,(0,g._)(o.ranges.map(function(e){return e.field}))),s=e>0&&o.active>=l;return i(r.update({selection:rA(o.ranges,a),effects:rb.of(s?null:new ry(o.ranges,a))})),!0}}var rx=ea.Nb.highest(ep.w4.of([{key:"Tab",run:rC(1),shift:rC(-1)},{key:"Escape",run:function(e){var n=e.state,t=e.dispatch;return!!n.field(rY,!1)&&(t(n.update({effects:rb.of(null)})),!0)}}])),r_=ep.Lz.domEventHandlers({mousedown:function(e,n){var t,r=n.state.field(rY,!1);if(!r||null==(t=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=t&&e.to>=t});return!!i&&i.field!==r.active&&(n.dispatch({selection:rA(r.ranges,i.field),effects:rb.of(r.ranges.some(function(e){return e.field>i.field})?new ry(r.ranges,i.field):null)}),!0)}}),rk=t(86295),rD=t(20778),rE=(0,z.x)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),rR={p:{padding:"".concat(eI.LU.space2," ").concat(eI.LU.space8),lineHeight:1.4,marginBottom:"".concat(eI.LU.space8," !important")},"p:first-of-type":{marginTop:"".concat(eI.LU.space4," !important")},"p:last-of-type":{marginBottom:"".concat(eI.LU.space4," !important")},pre:{margin:"".concat(eI.LU.space2," ").concat(eI.LU.space8)},"pre + p":{borderTop:"1px solid ".concat(eI.LU.outlineDimmest),paddingTop:eI.LU.space4},"h1, h2, h3":{margin:"".concat(eI.LU.space8," !important"),marginTop:"".concat(eI.LU.space12," !important"),padding:"0 !important",paddingBottom:"".concat(eI.LU.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(eI.LU.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(eI.LU.space4," !important")},hr:{margin:"".concat(eI.LU.space8," !important"),borderTop:"2px solid ".concat(eI.LU.backgroundHighest," !important")},li:{margin:"".concat(eI.LU.space2," ").concat(eI.LU.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(eI.LU.backgroundHighest),marginBottom:eI.LU.space4},".cm-line":{paddingLeft:eI.LU.space4,paddingRight:eI.LU.space4},".cm-content":{paddingLeft:eI.LU.space4,paddingRight:eI.LU.space4}},rI=(0,w.memo)(function(e){var n=e.content,t=e.className;return(0,v.Y)(G.S,{css:rR,children:(0,v.Y)(rD.Ay,{className:t,components:{code:function(e){return(0,v.Y)(rk.A,(0,f._)({minimal:!0,disableCopy:!0},e))}},children:n})})});function rF(e){var n=e.content,t=e.className;return"string"==typeof n?(0,v.Y)(rI,{css:rE.styles0,className:t,content:n}):n.kind===eE.MarkupKind.PlainText?(0,v.Y)(G.S,{children:(0,v.Y)(ti.EY,{className:t,children:n.value})}):(0,v.Y)(rI,{className:t,content:n.value})}var rT=new WeakMap,rP=t(89387),rL=t(72915),rU=t(8473),rN="cm-ghostwriter-hint-tooltip",rO=ep.Lz.theme((0,tA._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:eI.LU.backgroundHigher,borderTop:"solid 1px ".concat(eI.LU.outlineDefault)}},".cm-tooltip-autocomplete.".concat(rN," .cm-ghostwriter-hint"),{display:"block"})),rM=(0,z.x)({hint:[W.wp.p(4),W.wp.rowWithGap(8),W.wp.align.center,W.wp.font.default,{opacity:.6}]});function rB(){return(0,v.FD)(G.S,{css:rM.hint,children:[(0,v.Y)(rU.A,{width:8,height:8}),(0,v.FD)(G.S,{row:!0,gap:4,align:"center",children:[(0,v.Y)(rL.Ay,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,v.Y)(ti.EY,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var rH=ep.Z9.define(function(e){var n=function(){var n,t,r;return(0,g._)(e.dom.children).concat((0,g._)(null!==(r=null===(t=rP.vR.get(e))||void 0===t?void 0:null===(n=t.children[0])||void 0===n?void 0:n.children)&&void 0!==r?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},t=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,t8.DH)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=t(s);if(0===c.length){var u=(0,tt.J)((0,v.Y)(rB,{}));u.className="cm-ghostwriter-hint",s.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=t(s)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;s.removeChild(h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}});function rz(e){var n=Object.keys(e).join(""),t=/\w/.test(n);return t&&(n=n.replace(/\w/g,"")),"[".concat(t?"\\w":"").concat(n.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var rW="lsp-completion-keyboard-shortcuts",rG=ep.Lz.theme((l={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:eI.LU.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,tA._)(l,"& .".concat(rW),{display:"none"}),(0,tA._)(l,'& [aria-selected="true"] .'.concat(rW),{float:"right",display:"inline-block"}),l)),rV=t(88741),rj=t(27881),rZ=t(92736),rq=t(34805),rK=new(function(e){function n(){var e;return(0,es._)(this,n),(e=(0,tp._)(this,n)).elementClass="cm-gutterElement-hidden",e}return(0,tf._)(n,e),n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var n=document.createElement("span");return n.classList.add("cm-dot"),e.appendChild(n),e},n}(ep.wJ)),r$=function(e){function n(e){var t;return(0,es._)(this,n),(t=(0,tp._)(this,n)).numLines=e,t}(0,tf._)(n,e);var t=n.prototype;return t.eq=function(e){return e.numLines===this.numLines},t.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,rq.A)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(ep.xO),rJ=ep.NZ.mark({class:"cm-searchResultMatch"}),rQ=ep.Lz.baseTheme({".cm-hidden-lines":{color:eI.LU.foregroundDimmer,backgroundColor:eI.LU.backgroundHighest,display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:eI.LU.backgroundHighest},".cm-hidden-lines-gutter":{backgroundColor:eI.LU.backgroundHighest,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:eI.LU.foregroundDimmest,borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid ".concat(eI.LU.backgroundHighest),borderRadius:eI.LU.borderRadius4},".cm-tooltip .cm-scroller:hover":{border:"2px solid ".concat(eI.LU.accentPrimaryDimmest),boxShadow:eI.LU.shadow1,cursor:"pointer"},".cm-searchResultMatch":{color:eI.LU.foregroundDefault,backgroundColor:eI.LU.accentPrimaryDimmest,outline:eI.LU.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:eI.LU.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),rX=t(69418),r0=t(18682),r1=t(95235),r2=t(72700),r5=t(29048),r4=t(70953),r3=(0,z.x)({snippetGroupText:[W.wp.pl(8),W.wp.py(8)],snippetGroupContainer:[W.wp.p(4)],loadingContainer:[W.wp.width(128),W.wp.height(128),W.wp.display.flex,W.wp.align.center,W.wp.justify.center],container:[W.wp.minWidth("375px"),W.wp.maxWidth("500px"),W.wp.pt(4),W.wp.overflowY("scroll")],firstReferenceDivider:[W.wp.border({direction:"bottom",color:eI.LU.backgroundHighest})],headerGroup:[W.wp.p(4)],headerContainer:[W.wp.pr(4)],header:[W.wp.p(4),W.wp.pl(8)],referencesGroups:[W.wp.p(4)],referencesHeader:[W.wp.p(4),W.wp.pl(8)]}),r8=function(e){return e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES",e}(r8||{});function r7(e){var n=e.matchesMap,t=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(n);return 0===a.length?(0,v.Y)(ti.EY,{color:"dimmer",css:r3.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,v.Y)(G.S,{children:a.map(function(e){var r,l,s=n[e],c=t[e],u=(l=(r=s.sort(function(e,n){return e.from-n.from})).map(function(e){var n=e.from,t=e.to;return rJ.range(n,t)}),[ep.Z9.define(function(){return{}},{decorations:function(){return ep.NZ.set(l)}}),function(e,n){var t=[],r=1;e.forEach(function(i,o){var a=n.lineAt(i.from),l=n.lineAt(i.to);r<a.number-2&&t.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<n.lines&&t.push({startLine:r,endLine:n.lines})});var i=t.map(function(e){var t=n.line(e.startLine),r=n.line(e.endLine);return ep.NZ.replace({widget:new r$(e.endLine-e.startLine+1)}).range(t.from,r.to)}),o=t.map(function(e){var t=n.line(e.startLine);return ep.NZ.line({class:"cm-line-hidden"}).range(t.from)}),a=ea.sU.define({create:function(){return ep.NZ.set(i)},update:function(e){return e},provide:function(e){return ep.Lz.decorations.from(e)}}),l=ea.sU.define({create:function(){return ep.NZ.set(o)},update:function(e){return e},provide:function(e){return ep.Lz.decorations.from(e)}}),s=t.map(function(e){var t=n.line(e.startLine);return rK.range(t.from)});return[a,l,rQ,ep.pK.of(ea.om.of(s))]}(r,c)]);return(0,v.Y)(G.S,{css:r3.snippetGroupContainer,children:(0,v.Y)(ie,{path:e,extensions:[u],doc:c,numMatches:s.length,initiallyExpanded:1===a.length,onNavigateToCode:function(n){if(null!==n)o({path:e,line:n.line+1,col:n.character});else{var t=(0,m._)(s,1)[0],r=c.lineAt(t.from),a=t.from-r.from;o({path:e,line:r.number,col:a})}i()}})},e)})})}function r6(e){var n=e.onClose,t=e.references,r=e.definitions,i=e.jumpToPosition,o=(0,nL.A)().fs,a=(0,r0.A)(n,[]),l=(0,m._)((0,w.useState)({}),2),s=l[0],c=l[1],u=(0,m._)((0,w.useState)(!0),2),d=u[0],p=u[1];if((0,w.useEffect)(function(){var e=new Set((0,g._)(t).concat((0,g._)(r)).map(function(e){return e.path}));if(!e.size){p(!1);return}var n=!1;function i(){return(i=(0,el._)(function(){var t;return(0,ec.YH)(this,function(r){switch(r.label){case 0:var i;return p(!0),t={},[4,Promise.all(Array.from(e).map((i=(0,el._)(function(e){var n;return(0,ec.YH)(this,function(r){switch(r.label){case 0:return[4,o.readFile(e)];case 1:if((n=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(n.error));return t[e]=ea.EY.of(n.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),p(!1),n)return[2];return c(function(e){return(0,f._)({},e,t)}),[2]}})})).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){n=!0}},[o,t,r]),d)return(0,v.Y)(G.S,{css:r3.loadingContainer,children:(0,v.Y)(nS.A,{size:32})});var h={},y={};function b(e,n){var t=e.range,r=t.start,i=t.end;e.path in n||(n[e.path]=[]);var o=s[e.path],a=o.line(r.line+1),l=o.line(i.line+1);n[e.path].push({from:a.from+r.character,to:l.from+i.character})}return t.forEach(function(e){b(e,h)}),r.forEach(function(e){b(e,y)}),(0,v.FD)(G.S,{innerRef:a,css:r3.container,children:[(0,v.Y)(G.S,{css:r3.firstReferenceDivider,children:(0,v.FD)(G.S,{css:r3.headerGroup,children:[(0,v.FD)(G.S,{css:r3.headerContainer,row:!0,justify:"space-between",align:"center",children:[(0,v.Y)(ti.Y9,{level:2,variant:"subheadDefault",css:r3.header,children:"Definitions"}),(0,v.Y)(r1.K0,{alt:"Close",onClick:n,children:(0,v.Y)(r4.A,{})})]}),(0,v.Y)(r7,{matchesMap:y,fileToContents:s,type:"DEFINITION",onClose:n,jumpToPosition:i})]})}),(0,v.Y)(G.S,{children:(0,v.FD)(G.S,{css:r3.referencesGroups,children:[(0,v.Y)(ti.Y9,{level:2,variant:"subheadDefault",css:r3.referencesHeader,children:"References"}),(0,v.Y)(r7,{matchesMap:h,fileToContents:s,type:"REFERENCES",onClose:n,jumpToPosition:i})]})})]})}var r9=(0,z.x)({container:[W.wp.width("100%"),W.wp.p(4),W.wp.rowWithGap(4),W.wp.justify.spaceBetween,W.wp.align.center],left:[W.wp.flex.grow(1),W.wp.rowWithGap(8),W.wp.align.center],editor:[W.wp.p(4)],text:[W.wp.flex.shrink(1),{textOverflow:"ellipsis"}]});function ie(e){var n=e.path,t=e.doc,r=e.extensions,i=e.numMatches,o=e.onNavigateToCode,a=e.initiallyExpanded,l=(0,m._)((0,w.useState)(a),2),s=l[0],c=l[1];return(0,v.FD)(G.S,{children:[(0,v.FD)(G.S,{css:r9.container,children:[(0,v.FD)(G.S,{css:r9.left,children:[(0,v.Y)(r2.A,{path:n}),(0,v.Y)(ti.EY,{multiline:!1,title:n,css:r9.text,children:n}),(0,v.Y)(ti.EY,{color:"dimmest",multiline:!1,children:(0,rq.A)("match",i,!0)})]}),(0,v.Y)(r1.K0,{alt:s?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return c(function(e){return!e})},children:(0,v.Y)(r5.A,{rotate:s?180:0,style:{transition:"200ms ease"}})})]}),(0,v.Y)(G.S,{css:r9.editor,style:{display:s?"block":"none"},children:(0,v.Y)(rX.f,{path:n,initialDoc:t,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:o})})]})}var it=t(21569),ir=t(29219),ii=t(54061);function io(e){var n=e.content,t=e.className,r=e.showHoveredVariable,i=(0,R.gc)("fontSize").preferences;if("string"!=typeof n&&"kind"in n)return(0,v.Y)(rF,{content:n});var o=(Array.isArray(n)?n:[n]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,v.Y)(rD.Ay,{css:[{p:{fontSize:i.fontSize},hr:{display:"none"}},r?[W.wp.maxHeight(ia),W.wp.overflowY("auto")]:void 0],className:t,components:{code:function(e){return(0,v.Y)(rk.A,(0,f._)({minimal:!0,disableCopy:!0},e))}},children:o})}var ia=100;function il(e){var n=e.className,t=e.content,r=e.textHovered,i=(0,nL.A)().debuggest,o=(0,nP.A)(i.mainClient),a=o&&("running"===o.state.current||"paused"===o.state.current),l=(0,m._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,m._)((0,w.useState)(void 0),2),d=u[0],p=u[1],h=a&&d;return(0,w.useEffect)(function(){function e(){return(e=(0,el._)(function(){var e,n;return(0,ec.YH)(this,function(t){switch(t.label){case 0:if(!a)return[3,4];c(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,o.evaluate({expression:r,context:"hover"})];case 2:return(null===(e=(n=t.sent()).body)||void 0===e?void 0:e.result)&&p((0,f._)({name:r,value:n.body.result},n.body)),[3,4];case 3:return c(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[o,a,r]),(0,v.FD)(G.S,{css:[rR,h?W.wp.maxHeight(ia+190):W.wp.maxHeight(190),W.wp.minHeight(30),W.wp.overflowY("auto"),W.wp.borderRadius(4),W.wp.backgroundColor.backgroundHigher],children:[s?void 0:(0,v.Y)(io,{content:t,className:n,showHoveredVariable:!!h}),h?(0,v.Y)(G.S,{css:[W.wp.maxHeight(190),W.wp.overflowY("auto")],children:(0,v.Y)(ii.r,{depth:0,client:o,variable:d})}):void 0]})}var is=t(83478),ic=t(46572),iu=t(98271),id=(0,t(66160).D)(),ip=ea.Pe.define(),ih=ea.sU.define({create:function(){return null},update:function(e,n){if(n.isUserEvent("select")||n.isUserEvent("undo")||n.isUserEvent("redo"))return null;if(!n.isUserEvent("input.type")||n.changes.empty)return e;var t="";return n.changes.iterChanges(function(e,n,r,i,o){t=o.sliceString(0,1)}),t||null}}),im=new tt.E(function(e){var n,t,r=e.help,i=e.index,o="1px solid ".concat(eI.LU.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],s=r.signatures.length>1;if(!l)return null;var c=l.documentation,u=null!=r.activeParameter&&(null===(t=l.parameters)||void 0===t?void 0:null===(n=t[r.activeParameter])||void 0===n?void 0:n.documentation);return(0,v.FD)(G.S,{css:[W.wp.backgroundColor.backgroundHigher,{width:"max-content"}],row:!0,children:[s?(0,v.Y)(G.S,{css:[W.wp.pl(4),{borderRight:o,paddingBottom:5}],row:!0,children:(0,v.FD)("span",{css:[{alignSelf:"flex-end"},W.wp.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,v.FD)(G.S,{children:[(0,v.Y)(G.S,{css:[W.wp.py(4),W.wp.pl(s?4:8),W.wp.pr(8),W.wp.maxHeight(100),W.wp.overflowY("scroll"),W.wp.font.code,{lineHeight:eI.LU.lineHeightSmall,maxWidth:a}],children:(0,v.Y)(ig,{signature:l,activeParameter:r.activeParameter})}),!!(c||u)&&(0,v.FD)(G.S,{css:[W.wp.px(s?4:8),W.wp.py(2),W.wp.maxHeight(200),W.wp.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,v.Y)(rF,{content:u}):null,c?(0,v.Y)(rF,{content:c}):null]})]})]})});function ig(e){var n,t=e.signature,r=t.label,i=t.parameters,o=e.activeParameter;if(null==o||!i)return(0,v.Y)("span",{children:r});var a=null===(n=i[o])||void 0===n?void 0:n.label;if(!a)return(0,v.Y)("span",{children:r});var l=(0,m._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),s=l[0],c=l[1];return(0,v.FD)("div",{children:[(0,v.Y)("span",{children:r.slice(0,s)}),(0,v.Y)("strong",{children:a}),(0,v.Y)("span",{children:r.slice(c)})]})}function iv(){return(iv=(0,el._)(function(e,n,t,r,i){return(0,ec.YH)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(t.map((a=(0,el._)(function(t){var o,a;return(0,ec.YH)(this,function(l){return(o=i.current.get(t.clientId))&&t.notify.cancelRequest(o),a=t.generateId(),i.current.set(t.clientId,a),[2,t.request.signatureHelp(r,(0,ev.Z3)(e.doc,n),{id:a}).then(function(e){return(i.current.get(t.clientId)===a&&i.current.set(t.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var iw=t(3274),iy=t(54735),ib=new Map,iS=t(65097),iY=t(40895),iA=t(18552),iC={namespace:iY._A.namespace,type:iY._A.typeName,class:iY._A.className,enum:iY._A.typeName,interface:iY._A.typeName,struct:iY._A.typeName,typeParameter:iY._A.typeName,parameter:iY._A.variableName,variable:iY._A.variableName,property:iY._A.propertyName,enumMember:iY._A.propertyName,event:iY._A.typeName,function:iY._A.function(iY._A.variableName),method:iY._A.function(iY._A.propertyName),macro:iY._A.macroName,keyword:iY._A.keyword,modifier:iY._A.modifier,comment:iY._A.comment,string:iY._A.string,number:iY._A.number,regexp:iY._A.regexp,operator:iY._A.operator,decorator:iY._A.function(iY._A.annotation),angle:null,arithmetic:iY._A.arithmeticOperator,attribute:iY._A.attributeName,attributeBracket:iY._A.bracket,bitwise:iY._A.bitwiseOperator,boolean:iY._A.bool,brace:iY._A.brace,bracket:iY._A.bracket,builtinAttribute:iY._A.standard(iY._A.attributeName),builtinType:iY._A.standard(iY._A.typeName),character:iY._A.character,colon:iY._A.punctuation,comma:iY._A.separator,comparison:iY._A.compareOperator,constParameter:iY._A.constant(iY._A.variableName),derive:iY._A.function(iY._A.annotation),deriveHelper:iY._A.function(iY._A.annotation),dot:iY._A.derefOperator,escapeSequence:iY._A.escape,invalidEscapeSequence:iY._A.invalid,formatSpecifier:iY._A.processingInstruction,generic:iY._A.typeName,label:iY._A.labelName,lifetime:iY._A.special(iY._A.variableName),logical:iY._A.logicOperator,macroBang:iY._A.macroName,parenthesis:iY._A.paren,punctuation:iY._A.punctuation,selfKeyword:iY._A.self,selfTypeKeyword:iY._A.self,semicolon:iY._A.separator,typeAlias:iY._A.typeName,toolModule:iY._A.namespace,union:null,unresolvedReference:null,tomlArrayKey:iY._A.propertyName,tomlTableKey:iY._A.className},ix={declaration:iY._A.definition,definition:iY._A.definition,readonly:iY._A.constant,static:iY._A.constant,deprecated:null,abstract:null,async:iY._A.special,modification:function(e){return e===iY._A.keyword?iY._A.modifier:null},documentation:function(e){return e===iY._A.comment?iY._A.docComment:e===iY._A.string?iY._A.docString:null},defaultLibrary:iY._A.standard,attribute:null,callable:iY._A.function,constant:iY._A.constant,consuming:null,controlFlow:function(e){return e===iY._A.keyword?iY._A.controlKeyword:e===iY._A.operator?iY._A.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return iY._A.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},i_=new Set([iY._A.comment,iY._A.string,iY._A.number,iY._A.keyword,iY._A.operator]),ik=new Map;function iD(){return(iD=(0,el._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,ec.YH)(this,function(p){switch(p.label){case 0:if(n=e.client,t=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,ey.A)(n),r&&a.isSemanticTokensDeltaSupported)l=n.semanticTokensDelta(t,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=n.semanticTokensFull(t,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];s=(0,ev.Z3)(i,0),c=(0,ev.Z3)(i,i.length),l=n.semanticTokensRange(t,{start:s,end:c},{signal:o})}return[4,l];case 1:if((u=p.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var iE=function(){function e(n,t){(0,es._)(this,e),this.data=n,this.id=t}var n=e.prototype;return n.reset=function(){this.data=[],this.id=null},n.update=function(e){if(!e){this.reset();return}if("edits"in e&&this.id){var n,t,r=e.edits.slice().sort(function(e,n){return n.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,u,d=l.value;(null===(c=d.data)||void 0===c?void 0:c.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,g._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}this.id=null!==(t=e.resultId)&&void 0!==t?t:null}else if("data"in e)this.data=e.data,this.id=null!==(n=e.resultId)&&void 0!==n?n:null;else throw Error("Invalid semantic tokens response")},n.decorations=function(e,n){for(var t=n.doc,r=new ea.vB,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],s=this.data[a+1],c=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?s:o+s;var p=function(e,n,t){var r=(0,iA.mW)(e,n);if(null===r)return null;var i=iC[r];if(!i)return null;var o=(0,iA.sc)(e,t),a="".concat(r,":").concat(o.join(",")),l=ik.get(a);if(void 0!==l)return l;var s=o.map(function(e){if(void 0===ix[e])return null;var n=ix[e];return null===n?null:n}).filter(Boolean),c=!0,u=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,p.value)(i);h&&(i=h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return i&&i_.has(i)&&(i=null),ik.set(a,i),i}(e,u,d);if(p){var f=(0,Y.GY)(n,[p]);if(f){var h=(0,ev.TU)(t,{line:i,character:o}),m=(0,ev.TU)(t,{line:i,character:o+c}),g=ep.NZ.mark({class:f});r.add(h,m,g)}}}return r.finish()},e}(),iR=["typescript"],iI=function(){function e(n,t){var r=this;(0,es._)(this,e),this.view=n,this.client=t,this.data=new iE([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=ep.NZ.none,this.proneToDesync=iR.some(function(e){return t.clientId.includes(e)}),this.disposables.push(t.onSemanticTokensRefresh(function(){return r.refresh()}),t.onServerCapabilitiesChange(function(){return r.refresh()}));var i=n.state.facet(eh.Md);if(i){if(t.isOpen(i))this.run();else{var o=setTimeout(function(){t.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}}var n=e.prototype;return n.abort=function(){var e;this.pending=!1,null===(e=this.controller)||void 0===e||e.abort()},n.refresh=function(){this.abort(),this.data.reset(),this.run()},n.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,el._)(function(){var n;return(0,ec.YH)(this,function(t){switch(t.label){case 0:n=function(){var n,t,r,i,o,a,l,s,c,u,d;return(0,ec.YH)(this,function(p){switch(p.label){case 0:n=Date.now(),p.label=1;case 1:if(p.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(eh.Md),a=null===(r=e.client.getServerCapabilities())||void 0===r?void 0:null===(t=r.semanticTokensProvider)||void 0===t?void 0:t.legend,s=(l=(0,ey.A)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!s||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=ep.NZ.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return iD.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(c=p.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(c),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=p.sent(),(0,ep.c_)(e.view.state,u),e.data.reset(),e.decorations=ep.NZ.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-n,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:p.sent(),p.label=6;case 6:return[2]}})},t.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,ec.Ju)(n())];case 2:return t.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},n.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},n.postUpdate=function(e){(0,ef.$H)(e,eh.Md)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},n.destroy=function(){this.abort(),this.data.reset();var e=!0,n=!1,t=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.disposables=[]},e}(),iF=new nT.k(function(e){if(!e||!e.length)return null;var n=e.map(function(e){return ep.Z9.define(function(n){return new iI(n,e)},{decorations:function(e){return e.decorations},provide:function(e){return ep.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})}})});return ea.Nb.highest(n)}),iT=t(89022),iP=new nT.k(function(e){return t9.of(e)}),iL=new nT.k(function(e){return rV.aM.of(e)}),iU=new nT.k(function(e){return iS.G.of(e)}),iN=t(10984),iO=ep.Lz.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:eI.LU.backgroundDefault,borderLeft:"1px solid ".concat(eI.LU.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),iM=ea.sU.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,n){return n.docChanged?0===n.state.doc.length||n.state.doc.lines>1e3:e}}),iB=new nT.k(function(e,n,t){var r=function(){return{dom:document.createElement("div")}};return e?null:[iO,iM,iN.F.compute([tG,iM],function(e){if(e.field(iM,!1)||"blocks"!==n&&"characters"!==n)return null;var i=e.field(tG,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case tB.DE.COVERED:o[a]=t.values.global.greenDefault;break;case tB.DE.MODIFIED:o[a]=t.values.global.blueDefault}return{create:r,displayText:n,gutters:[o]}})]}),iH=t(27330),iz=ea.sj.define({combine:function(e){var n;return null!==(n=e.find(function(e){return null!==e}))&&void 0!==n?n:null}}),iW=ea.sj.define({combine:function(e){return iV(e)}}),iG=ea.sj.define({combine:function(e){return iV(e)}});function iV(e){var n=[];return e.forEach(function(e){return e?n.push(e):void 0}),n}var ij=function(e){function n(e){var t;return(0,es._)(this,n),(t=(0,tp._)(this,n)).diagnostic=e,t}return(0,tf._)(n,e),n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,re._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(ea.FB);function iZ(e){var n=new ea.vB;return(0,A.i5)(e,function(e,t,r){n.add(t,r,new ij(e))}),n.finish()}var iq=ea.sU.define({create:function(e){return iZ(e)},update:function(e,n){return(0,ef.$H)(n,A._k)?iZ(n.state):e.map(n.changes)},provide:function(e){return iW.compute([e],function(n){for(var t=new Map,r=n.field(e).iter();r.value;){for(var i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,s=null===(l=t.get(a))||void 0===l?void 0:l.severityValue;(!s||s<r.value.severityValue)&&t.set(a,r.value),a++}r.next()}return Array.from(t.entries()).map(function(e){var n=(0,m._)(e,2),t=n[0],r=n[1];return{color:r.severityColor,number:t,zIndex:r.severityValue}})})}}),iK="cm-with-scrollbar",i$="cm-scrollbar-gutter",iJ="cm-scrollbar-inner",iQ="cm-scrollbar-overlay-container",iX="cm-scrollbar-overlay",i0="cm-scrollbar-overlay-invisible",i1="cm-scrollbar-overlay-active",i2="--cm-scrollbar-overlay-height",i5=ep.Lz.theme((u={"&":{height:"100%",overflowY:"auto"}},(0,tA._)(u,"& .".concat(i$),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,tA._)(u,"& .".concat(iJ),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,tA._)(u,"& .".concat(iJ," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,tA._)(u,".".concat(iQ),(c={position:"absolute",top:0,height:"100%",width:"100%"},(0,tA._)(c,"& .".concat(iX),(s={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(i2,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,tA._)(s,"&:hover",{opacity:"0.3"}),(0,tA._)(s,"&.".concat(i0),{pointerEvents:"none",opacity:0}),s)),(0,tA._)(c,"& .".concat(i1),(0,tA._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(iX),{opacity:"0.4"})),c)),(0,tA._)(u,"&.".concat(iK," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,tA._)(u,"&.".concat(iK," .cm-scroller"),{scrollbarWidth:"none"}),u)),i4=function(){function e(n){(0,es._)(this,e),this.dragInfo=null,this.view=n,this.container=document.createElement("div"),this.container.classList.add(iQ),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(iX),this.container.appendChild(this.handle);var t=n.dom.querySelector(".".concat(iJ));t&&t.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(n.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var n=e.prototype;return n.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(n){var t=n.ratio;e.handle.style.setProperty(i2,"".concat(100*t,"%")),1===t?e.handle.classList.add(i0):e.handle.classList.remove(i0)}})},n.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var n=e.view.contentHeight,t=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((t-r)/(n-t)))}},write:function(n){var t=n.scrollTop;e.handle.style.top="".concat(t,"px")}})},n.onMouseDown=function(e){var n=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(i1);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var t=n.view.scrollDOM.clientHeight,r=n.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-t/r*t/2)/t*r}},write:function(e){var t=e.scrollTop;n.view.scrollDOM.scrollTop=t}})}},n.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(i1))},n.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var n=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+n/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},n.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},n.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),i3=function(){function e(n){(0,es._)(this,e),this.view=n;var t=n.state.facet(iz);if(!t)throw Error("expected config");this.dom=t.create(n).dom,this.dom.classList.add(i$);var r=document.createElement("div");r.classList.add(iJ);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling),this.update()}var n=e.prototype;return n.shouldRedraw=function(e,n){return!!(!e||!n||(0,ef.$H)(e,"doc","selection","focus",iG,iW,Y.R3,Y.c1))||this.view.contentHeight!==this.previousContentHeight||2*n.scrollClientHeight!==this.previousCanvasHeight},n.update=function(e){var n=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:n.view.scrollDOM.clientHeight}},write:function(t){var r=t.scrollClientHeight;if(n.context&&n.shouldRedraw(e,{scrollClientHeight:r})){n.previousContentHeight=n.view.contentHeight,n.context.canvas.width=28,n.context.canvas.height=2*r,n.previousCanvasHeight=n.context.canvas.height,n.context&&n.context.clearRect(0,0,n.context.canvas.width,n.context.canvas.height);var i=n.view.state.facet(iG),o=n.view.state.facet(iW),a=new Map,l=!0,s=!1,c=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p,f=(0,m._)(u.value,2),h=f[0],g=f[1],v=h%3,w=void 0,y=void 0,b=!0,S=!1,A=void 0;try{for(var C,x=g[Symbol.iterator]();!(b=(C=x.next()).done);b=!0){var _,k=C.value;if(void 0===w||void 0===y){w=k,y=k;continue}if(y.number+1===k.number&&y.color===k.color&&y.zIndex===k.zIndex){y=k;continue}a.set(v,(null!==(_=a.get(v))&&void 0!==_?_:[]).concat([[w,y]])),w=k,y=k}}catch(e){S=!0,A=e}finally{try{b||null==x.return||x.return()}finally{if(S)throw A}}w&&y&&a.set(v,(null!==(p=a.get(v))&&void 0!==p?p:[]).concat([[w,y]]))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}var D=!0,E=!1,R=void 0;try{for(var I,F=a.entries()[Symbol.iterator]();!(D=(I=F.next()).done);D=!0){var T=(0,m._)(I.value,2),P=T[0],L=T[1].sort(function(e,n){var t,r,i=(0,m._)(e,1)[0],o=(0,m._)(n,1)[0];return(null!==(t=i.zIndex)&&void 0!==t?t:0)-(null!==(r=o.zIndex)&&void 0!==r?r:0)}),U=!0,N=!1,O=void 0;try{for(var M,B=L[Symbol.iterator]();!(U=(M=B.next()).done);U=!0)!function(){var e=(0,m._)(M.value,2),t=e[0],i=t.color,o=t.number,a=e[1].number,l=n.view.state.doc.line(o),s=n.view.state.doc.line(a),c=1/0,u=-1/0;if((0,Y.hw)(n.view.state).between(l.from,s.to,function(e,n){c>e&&(c=e),u<n&&(u=n)}),c<u){var d=n.view.state.doc.lineAt(c);d.number<=l.number&&(l=d),n.view.state.doc.lineAt(u).number>=s.number&&(s=d)}var p=l.number,f=s.number,h=!0,g=!1,v=void 0;try{for(var w,y=n.view.state.field(i6)[Symbol.iterator]();!(h=(w=y.next()).done);h=!0){var b=(0,m._)(w.value,2),S=b[0],A=b[1];S[0].number<l.number&&(p-=A),S[1].number<s.number&&(f-=A)}}catch(e){g=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(g)throw v}}n.drawRange({scrollClientHeight:r,color:i,from:p,to:f,lane:P})}()}catch(e){N=!0,O=e}finally{try{U||null==B.return||B.return()}finally{if(N)throw O}}}}catch(e){E=!0,R=e}finally{try{D||null==F.return||F.return()}finally{if(E)throw R}}var H=!0,z=!1,W=void 0;try{for(var G,V=i[Symbol.iterator]();!(H=(G=V.next()).done);H=!0){var j=G.value,Z=!0,q=!1,K=void 0;try{for(var $,J=j[Symbol.iterator]();!(Z=($=J.next()).done);Z=!0){var Q=$.value,X=Q.color,ee=Q.number,en=ee,et=!0,er=!1,ei=void 0;try{for(var eo,ea=n.view.state.field(i6)[Symbol.iterator]();!(et=(eo=ea.next()).done);et=!0){var el=(0,m._)(eo.value,2),es=(0,m._)(el[0],1)[0],ec=el[1];es.number<ee&&(en-=ec)}}catch(e){er=!0,ei=e}finally{try{et||null==ea.return||ea.return()}finally{if(er)throw ei}}n.drawRange({scrollClientHeight:r,color:X,from:en})}}catch(e){q=!0,K=e}finally{try{Z||null==J.return||J.return()}finally{if(q)throw K}}}}catch(e){z=!0,W=e}finally{try{H||null==V.return||V.return()}finally{if(z)throw W}}}}})},n.destroy=function(){this.dom.remove()},n.drawRange=function(e){if(this.context){var n,t=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-t)<4&&(t-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!==(n=e.lane)&&void 0!==n?n:0),2*t,28/(void 0===e.lane?1:3),2*r)}},e}();function i8(e){for(var n=[],t=(0,Y.hw)(e).iter();t.value;){var r=n[n.length-1];if(!r||r[0][1].to<t.to){var i=e.doc.lineAt(t.from),o=e.doc.lineAt(t.to);n.push([[i,o],o.number-i.number])}t.next()}return n}function i7(e){return null!==e.facet(iz)}var i6=ea.sU.define({create:function(e){return i7(e)?i8(e):[]},update:function(e,n){return i7(n.state)&&(0,ef.$H)(n,"doc",Y.rI,i7)?i8(n.state):e}}),i9=ea.sj.define({combine:function(e){var n;return null!==(n=e.find(function(e){return null!==e}))&&void 0!==n?n:null},enables:function(e){return[iz.compute([e],function(n){return n.facet(e)}),i5,[i6,(0,ef.P$)(function(e){return new i3(e)},{isEnabled:function(e){return null!==e.facet(iz)},provide:function(){return ep.Lz.editorAttributes.of(function(e){return null!==e.state.facet(iz)?{class:iK}:null})}})],(0,ef.P$)(function(e){return new i4(e)},{isEnabled:function(e){return null!==e.facet(iz)},eventObservers:{scroll:function(){var e;null===(e=this.plugin())||void 0===e||e.updateHandlePosition()}}})]}}),oe=t(28648),on="cm-multiplayer-selection-green",ot="cm-multiplayer-selection-red",or="cm-multiplayer-selection-blue",oi="cm-multiplayer-selection-gold",oo="cm-multiplayer-selection-purple",oa="cm-multiplayer-selection-teal",ol="cm-multiplayer-selection-pink",os=ep.Lz.theme((d={},(0,tA._)(d,".".concat(on),{background:"rgba(27, 196, 125, 0.2)"}),(0,tA._)(d,".".concat(ot),{background:"rgba(239, 85, 51, 0.2)"}),(0,tA._)(d,".".concat(or),{background:"rgba(24, 160, 251, 0.2)"}),(0,tA._)(d,".".concat(oi),{background:"rgba(255, 199, 0, 1)"}),(0,tA._)(d,".".concat(oo),{background:"rgba(144, 124, 255, 0.2)"}),(0,tA._)(d,".".concat(oa),{background:"rgba(0, 181, 206, 0.2)"}),(0,tA._)(d,".".concat(ol),{background:"rgba(238, 70, 211, 0.2)"}),d)),oc={"#1BC47D":on,"#EF5533":ot,"#18A0FB":or,"#FFC700":oi,"#907CFF":oo,"#00B5CE":oa,"#EE46D3":ol},ou=ea.Pe.define(),od=ea.Pe.define(),op=ea.Pe.define(),of=ea.sU.define({create:function(){return{}},update:function(e,n){if(!n.changes.empty){var t=function(e){return n.changes.mapPos(Math.min(n.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(e)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r[c.id]=(0,h._)((0,f._)({},c),{position:t(c.position),selectionStart:t(c.selectionStart),selectionEnd:t(c.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,p=void 0;try{for(var g,v=n.effects[Symbol.iterator]();!(u=(g=v.next()).done);u=!0){var w=g.value;if(w.is(oe.k)&&(e=(0,f._)({},e)),w.is(ou)&&w.value.position<=n.newDoc.length&&((e=(0,f._)({},e))[w.value.id]=(0,f._)({},w.value)),w.is(od)&&(e=(0,f._)({},e),w.is(od)&&delete e[w.value]),w.is(op)){e=(0,f._)({},e);var y=!0,b=!1,S=void 0;try{for(var Y,A=Object.entries(e)[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=(0,m._)(Y.value,2),x=C[0];C[1].username===w.value&&delete e[x]}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}}catch(e){d=!0,p=e}finally{try{u||null==v.return||v.return()}finally{if(d)throw p}}return e},provide:function(e){return[os,ea.Nb.high((0,ep.qd)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(n){return(0,ef.$H)(n,e)},markers:function(n){var t=n.state.field(e,!1);if(!t)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(t)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=c.selectionStart,d=c.selectionEnd,p=c.color.selection;if(u!==d){var f=ea.OF.range(u,d);r.push.apply(r,(0,g._)(ep.Ip.forRange(n,p,f)))}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r}})),iG.compute([e],function(n){var t=n.field(e,!1);return t?Object.entries(t).map(function(e){var t=(0,m._)(e,2),r=(t[0],t[1]);return{color:r.color.cursor,number:n.doc.lineAt(r.selectionStart).number}}):[]})]}}),oh=function(){function e(n,t){var r=this;(0,es._)(this,e),this.view=n,this.presence=t,this.destroyed=!1,this.followed=null,this.dispose=t.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(t.getFollowedUser())})}var n=e.prototype;return n.onFollowedUserChanged=function(e){var n=this;if(!this.destroyed&&(this.followed=e,this.followed)){var t=this.view.state.field(of,!1);if(t){var r=Object.values(t).find(function(e){var t;return e.username===(null===(t=n.followed)||void 0===t?void 0:t.username)});r&&this.jumpToPosition(r.position)}}},n.jumpToPosition=function(e){this.view.dispatch({effects:[ep.Lz.scrollIntoView(ea.OF.cursor(e),{x:"center",y:"center"})]})},n.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},n.postUpdate=function(e){if(this.followed){var n=void 0,t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=!0,c=!1,u=void 0;try{for(var d,p=l.effects[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;f.is(ou)&&f.value.username===this.followed.username&&(n=f)}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}n&&this.jumpToPosition(n.value.position)}},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),om=new nT.k(function(e){return ep.Z9.define(function(n){return new oh(n,e)},{provide:function(e){return ep.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),og=t(50117),ov=t(19327),ow=t(39651),oy=t(97285),ob=ep.Z9.define(function(e){var n=e.state.facet(oS),t=[];return{update:function(e){n=e.state.facet(oS);var t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){t=[]},logs:function(){return t},pushEvent:function(n){var t={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:n.type};n instanceof KeyboardEvent&&(t.key=n.key,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.altKey=n.altKey,t.ctrlKey=n.ctrlKey),n instanceof InputEvent&&(t.data=n.data,t.inputType=n.inputType,t.isComposing=n.isComposing),n instanceof CompositionEvent&&(t.data=n.data),this.pushLog(t)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(ea.ZX.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){n&&(t.push(e),t=t.slice(Math.max(0,t.length-100)))}}},{provide:function(e){var n=function(n,t){var r;return null===(r=t.plugin(e))||void 0===r?void 0:r.pushEvent(n)};return ea.Nb.highest(ep.Lz.domEventHandlers({keypress:n,keydown:n,keyup:n,beforeinput:n,input:n,compositionstart:n,compositionupdate:n,compositionend:n}))}}),oS=ea.sj.define({combine:function(e){return!!e.length&&e[0]}}),oY=new nT.k(function(e){return oS.of(e)}),oA=t(1953),oC=t(26710),ox=ea.YH.define(),o_=ea.Pe.define(),ok=ea.sU.define({create:function(){return!0},update:function(e,n){return!(0,ef.$H)(n,o_)&&e},provide:function(e){return iH.u.from(e)}}),oD=(0,z.x)({buttonLink:[W.wp.reset.button,W.wp.linkStyle]}),oE="hide-editor-file-size-warning",oR=oy.A.get(oE,"boolean"),oI=function(){function e(n,t,r,i){var o=this;(0,es._)(this,e),this.view=n,this.path=t,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,h._)((0,f._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(t,{onReady:function(e){var t=e.initialContent,r=e.writeChange,a=e.version;!o.destroyed&&(o.debug.latestReceivedVersion=a,o.debug.openVersion=a,o.debug.setBsodFilePathVersion({filePath:o.path,version:a}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:o_.of(null),annotations:[ea.ZX.addToHistory.of(!1),ea.ZX.remote.of(!0),ox.of(!0)]}),t.length>=0xa00000&&!0!==oR&&(oR=!0,oy.A.set(oE,!0),i.showWarning((0,v.FD)(v.FK,{children:["Large files may be slow to edit. Consider using",(0,v.Y)("br",{}),"Cloud Services like"," ",(0,v.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"objectStorage"}})},css:oD.buttonLink,children:"Object Storage"})," ","and"," ",(0,v.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"neon"}})},css:oD.buttonLink,children:"PostgreSQL"}),"."]}),5e3)))},onChange:function(e){var t=e.changes,r=e.changeSource,i=e.version,a=e.userId;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{n.dispatch({changes:t,annotations:[ea.ZX.remote.of(r===ov.iC.Container),ea.ZX.addToHistory.of(r===ov.iC.Local||0===a),ox.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(t,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var n=e.prototype;return n.postUpdate=function(e){if(e.docChanged&&this.writeChange){var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!(a.annotation(ea.ZX.remote)||a.annotation(ox))){this.debug.initiatedChanges++;var l=a.annotation(og.A)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(n){this.debugThrowWriteChangeError(e,a,n);break}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.destroy=function(){var e;this.destroyed=!0,null===(e=this.dispose)||void 0===e||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},n.debugThrowSyncRemoteOpError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:n,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,ep.c_)(r.view.state,t)})},n.debugThrowWriteChangeError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(ob),s=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(n.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==n}).map(function(e){return e.changes})),transactionDoc:n.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(s)}})}),(0,ep.c_)(e.state,t)},e}(),oF=new nT.k(function(e,n,t){return ep.Z9.define(function(r){return new oI(r,e,n,t)},{provide:function(e){return[ok,ep.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})]}})}),oT=ep.Lz.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:eI.LU.shadow1,borderRadius:eI.LU.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function oP(e){e.style.transform="translate(-10000px, -10000px)"}var oL=/iPhone|iPad|iPod/i;function oU(){return!!window.navigator.userAgent.match(oL)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function oN(e){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.classList.add("multiplayer-label");var t=document.createElement("div");return t.classList.add("multiplayer-cursor"),t.style.backgroundColor=e.color.cursor,t.style.position=oU()?"absolute":"fixed",t.appendChild(n),{dom:t,label:n}}var oO=new Map,oM=[oT,ep.Z9.define(function(e){var n=e.state.field(of,!1),t=new Map((n?Object.values(n):[]).map(function(e){return[e.id,{view:oN(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&c()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),t.forEach(function(e){o.observe(e.view.dom)}))}function l(){n&&0!==Object.values(n).length&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&!(r=e.inView)&&t.forEach(function(e){oP(e.view.dom)})}a();var s=null;function c(){null===s&&(s=setTimeout(function(){s=null,l()},50))}window.addEventListener("resize",c);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((n?Object.values(n):[]).map(function(n){var r=t.get(n.id),i=r?function(e,n){var t=oO.get(e);if(t)return t;var r=n.getBoundingClientRect().width;return oO.set(e,r),r}(n.username,r.view.label):null;return[n.id,{position:e.coordsAtPos(n.position),labelWidth:i}]}))}},write:function(e){t.forEach(function(n,t){var r=e.dimensions.get(t);!function(e){var n=e.cursorView,t=e.position,r=e.labelWidth,i=e.editorRect,o=n.dom,a=n.label;if(!t||!r){oP(o);return}var l=t.bottom-t.top;if(t.bottom<=i.top+l||t.top+l>=i.bottom||t.right<i.left-.1||t.left>i.right+.1){oP(o);return}var s=t.left+r-i.right,c="0px";s>0?(c="-".concat(s,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(c,", -100%)");var u=oU()?{x:t.left-i.left+"px",y:t.top-i.top+"px"}:{x:"calc(".concat(t.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(t.top,"px + var(--fixed-position-offset-y))")},d=u.x,p=u.y;o.style.transform="translate(".concat(d,", ").concat(p,")"),o.style.height=l+"px"}({cursorView:n.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat((0,iw.A)())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(of,!1);if(!(o!==r.startState.field(of,!1))){r.geometryChanged&&l();return}var s=new Map,c=new Set;if(o){var u=new Map((0,g._)(t.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(n){var t=u.get(n.id);if(t)c.add(t),s.set(n.id,{view:t,cursor:n});else{var r=oN(n);s.set(n.id,{view:r,cursor:n}),e.dom.appendChild(r.dom)}})}t.forEach(function(e){c.has(e.view)||e.view.dom.remove()}),t=s,n=o,a(),l()},destroy:function(){window.removeEventListener("resize",c),t.forEach(function(e){e.view.dom.remove()}),n=void 0,t=new Map,null==o||o.disconnect(),s&&clearTimeout(s)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],oB=function(){function e(n,t,r,i){var o=this;(0,es._)(this,e),this.view=n,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:op.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(t,{onReady:function(e){var n=e.updateSelections;o.destroyed||(o.updateSelections=n)},onCursor:function(e){if(!o.destroyed){var n=function(e){var n,t=e.cursor,r=e.usernameColorsMap,i=null===(n=t.user)||void 0===n?void 0:n.name;if(i){var o=t.id,a=t.position,l=t.selectionStart,s=t.selectionEnd,c=r[i];if(c&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof s)return ou.of({id:o,username:i,position:a,color:{cursor:c,selection:oc[c]||""},selectionStart:l,selectionEnd:s})}}({cursor:e,usernameColorsMap:o.colors});n&&o.view.dispatch({effects:n})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:od.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var n=e.prototype;return n.getColorMapFromUsers=function(e){return e.reduce(function(e,n){return n.username&&n.color?(0,h._)((0,f._)({},e),(0,tA._)({},n.username,n.color)):e},{})},n.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(ea.ZX.remote)}))&&this.updateSelections){var n=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(n)}},n.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),oH=new nT.k(function(e,n,t){return[oM,of,ep.Z9.define(function(r){return new oB(r,e,n,t)},{provide:function(e){return ep.Lz.updateListener.of(function(n){var t;return null===(t=n.view.plugin(e))||void 0===t?void 0:t.postUpdate(n)})}})]}),oz=t(50439),oW=t(84341),oG=t(60762),oV=t(9907),oj=t(5387),oZ=t(9491),oq=t(40172),oK=t(28354),o$=t(76985),oJ=t(98335),oQ=(0,z.x)({buttons:[W.wp.display.flex,W.wp.rowWithGap(4),W.wp.justify.end],input:[W.wp.colWithGap(4),W.wp.flex.grow(1)],label:[W.wp.color.foregroundDimmer,W.wp.fontSize(12),W.wp.height(24),W.wp.justify.center],flexRow:[W.wp.display.flex,W.wp.rowWithGap(8),W.wp.align.center]}),oX={fontFamily:"text-security-disc"},o0=G.D.label;function o1(e){var n=(0,nL.A)().secrets,t=(0,w.useId)(),r=(0,w.useId)(),i=(0,m._)((0,w.useState)(""),2),o=i[0],a=i[1],l=(0,m._)((0,w.useState)(e.initialValue),2),s=l[0],c=l[1],u=(0,m._)((0,w.useState)(!1),2),d=u[0],p=u[1],f=(0,w.useRef)(null);return(0,w.useEffect)(function(){if(e.isOpen){var n;null===(n=f.current)||void 0===n||n.focus(),(0,eZ.u4)(eZ.AZ.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,v.Y)(oZ.n1,{contain:!0,children:(0,v.Y)(o$.a,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,v.FD)(G.S,{gap:16,children:[(0,v.Y)(ti.EY,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,v.FD)(G.S,{css:oQ.flexRow,children:[(0,v.FD)(G.S,{css:oQ.input,children:[(0,v.Y)(o0,{css:oQ.label,htmlFor:t,children:"Key"}),(0,v.Y)(oK.pd,{id:t,ref:f,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,v.FD)(G.S,{css:oQ.input,children:[(0,v.FD)(G.S,{css:oQ.flexRow,children:[(0,v.Y)(o0,{css:oQ.label,htmlFor:r,children:"Value"}),(0,v.Y)(r1.K0,{alt:"Toggle Secret",onClick:function(){return p(function(e){return!e})},tooltipPlacement:"top",children:d?(0,v.Y)(oJ.A,{}):(0,v.Y)(ny.A,{})})]}),(0,v.Y)(oK.pd,{id:r,value:s,onChange:function(e){return c(e.target.value)},style:d?void 0:oX})]})]}),(0,v.FD)(G.S,{css:oQ.buttons,children:[(0,v.Y)(oq.$n,{text:"Cancel",onClick:e.onCancel}),(0,v.Y)(oq.$n,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===s.length,onClick:(0,el._)(function(){return(0,ec.YH)(this,function(t){switch(t.label){case 0:return[4,n.addEntries([{key:o,value:s}])];case 1:return t.sent(),e.onSaveSecret(o,s),(0,eZ.u4)(eZ.AZ.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var o2=t(74495),o5=t(36954),o4=t(68753),o3=(0,z.x)({hint:[W.wp.align.center,W.wp.border({color:eI.LU.outlineDimmer,direction:"top"}),W.wp.color.foregroundDimmest,W.wp.display.flex,W.wp.flex.row,W.wp.px(8),W.wp.py(4),W.wp.rowWithGap(8)],info:[W.wp.p(8)],key:[W.wp.px(4)],wrapper:[W.wp.backgroundColor.backgroundHigher,W.wp.borderRadius(4),W.wp.cursor.default,W.wp.font.default],mobileButtons:[W.wp.flex.grow(1)],mobileHint:[W.wp.justify.center]}),o8={borderTop:"1px solid ".concat(eI.LU.outlineDimmer),borderBottom:"1px solid ".concat(eI.LU.outlineDimmer),borderRadius:0};function o7(e){return(0,v.FD)(G.S,{css:o3.wrapper,style:e.onMobile?o8:void 0,children:[(0,v.FD)(G.S,{css:o3.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,v.Y)(G.S,{children:"The value you pasted looks like a secret."}),(0,v.Y)(G.S,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,v.Y)(o9,(0,f._)({},e)):(0,v.Y)(o6,(0,f._)({},e))]})}function o6(e){return(0,v.FD)(v.FK,{children:[e.supportsSecrets?(0,v.FD)(G.S,{css:o3.hint,onClick:e.onClickUseSecrets,children:[(0,v.Y)(o5.A,{}),"Press",(0,v.Y)(G.S,{css:o3.key,children:(0,v.Y)(o2._y,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,v.FD)(G.S,{css:o3.hint,onClick:e.onClickPasteAnyway,children:[(0,v.Y)(o4.A,{}),"Press",(0,v.Y)(G.S,{css:o3.key,children:(0,v.Y)(o2._y,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,v.FD)(G.S,{css:o3.hint,onClick:e.onClickUndo,children:[(0,v.Y)(o4.A,{}),"Press",(0,v.Y)(G.S,{css:o3.key,children:(0,v.Y)(o2._y,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function o9(e){return(0,v.FD)(G.S,{css:[o3.hint,o3.mobileHint],children:[e.supportsSecrets?(0,v.Y)(oq.$n,{css:o3.mobileButtons,iconLeft:(0,v.Y)(o5.A,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,v.Y)(oq.$n,{css:o3.mobileButtons,iconLeft:(0,v.Y)(o4.A,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,v.Y)(oq.$n,{css:o3.mobileButtons,iconLeft:(0,v.Y)(o5.A,{}),text:"Undo",onClick:e.onClickUndo})]})}var ae=t(66733),an=(0,z.x)({border:[W.wp.border({color:eI.LU.accentPrimaryDefault,direction:"y",width:1})],title:[W.wp.display.flex,W.wp.rowWithGap(8),W.wp.align.center,W.wp.justify.spaceBetween,W.wp.px(8),W.wp.pt(4),W.wp.font.default],wrapper:[W.wp.backgroundColor.backgroundRoot,W.wp.py(0),W.wp.position.relative,W.wp.zIndex(200)]});function at(e){var n;return n=e.onClose,(0,w.useEffect)(function(){var e=function(e){"Escape"===e.key&&n(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n]),(0,v.Y)(oZ.n1,{autoFocus:!0,children:(0,v.Y)(G.S,{css:an.wrapper,children:(0,v.FD)(G.S,{css:an.border,children:[(0,v.FD)(G.S,{css:an.title,children:[(0,v.FD)(ti.EY,{multiline:!1,children:["Access the secret ",(0,v.Y)("strong",{children:e.keyName}),":"]}),(0,v.Y)(r1.K0,{alt:"Close",onClick:e.onClose,children:(0,v.Y)(r4.A,{})})]}),(0,v.Y)(nl.ui,{background:"root",children:(0,v.Y)(ae.A,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var ar=t(60225),ai=oV.x.compute([oW.dz],function(e){var n=e.field(oW.dz).iter();if(null===n.value)return null;for(var t=[];null!==n.value;){var r=n.from,i=n.to,o=n.value;t.push({from:r,to:i,insert:o.result.secret}),n.next()}return t}),ao=function(e){function n(e,t){var r;return(0,es._)(this,n),(r=(0,tp._)(this,n)).secret=e,r.as=t,r}(0,tf._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,tt.J)((0,v.Y)(o7,{supportsSecrets:e.state.facet(oW.t5),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:oW.cA.of(n.secret)})},onClickPasteAnyway:function(){(0,oW.fy)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:oW.E3.of(n.secret.id)}),e.focus()}}));return"pocket"===this.as&&(t.style.zIndex="200",t.style.position="relative",this.adjustForGutter(t,e)),t},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(ep.xO),aa=ar.X.compute([oW.C3],function(e){var n=e.facet(eh.Md),t=e.field(oW.C3);return t&&n?{key:"pasteScannerModal",node:function(e){var n;return(0,v.Y)(o1,{isOpen:!0,initialValue:t.result.secret,provider:t.result.provider,onSaveSecret:(n=(0,el._)(function(n){var r,i,o,a,l;return(0,ec.YH)(this,function(s){for(r=e.state.field(oW.dz).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===t.id&&(i.push(oW.E3.of(l.id)),i.push(oW.BH.of({secret:n,from:o,to:a}))),r.next();return e.dispatch({effects:(0,g._)(i).concat([oW.Ws.of(null)])}),[2]})}),function(e){return n.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:oW.Ws.of(null)})}})}}:null}),al=ep.Lz.decorations.compute([oW.hb],function(e){var n=e.field(oW.hb).iter(),t=n.from,r=n.to,i=n.value,o=e.facet(eh.Md);return i&&o?ep.NZ.set(ep.NZ.widget({widget:new as(i.key,o),side:1,block:!0}).range(t,r)):ep.NZ.none}),as=function(e){function n(e,t){var r;return(0,es._)(this,n),(r=(0,tp._)(this,n)).key=e,r.filePath=t,r}(0,tf._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=(0,tt.J)((0,v.Y)(at,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:oW.i6.of(null)})},onInsert:function(n){e.dispatch(e.state.changeByRange(function(e){return{range:ea.OF.cursor(e.from+n.length),changes:{from:e.from,to:e.to,insert:n}}})),e.focus(),(0,eZ.u4)(eZ.AZ.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(n,e),n},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(ep.xO),ac=[ai,function(){var e=[oW.C3,oW.dz],n=function(e){return null!=e.field(oW.C3,!1)?null:e.field(oW.dz,!1)||null};return[ep.DK.compute(e,function(e){var t=n(e);if(!t||e.facet(oj.n))return null;for(var r=t.iter();r.value;){var i=function(){var e=new ao(r.value,"tooltip");return{v:{arrow:!0,pos:r.to,create:function(n){return{dom:e.toDOM(n)}}}}}();if("object"===(0,oG._)(i))return i.v}return null}),ep.Lz.decorations.compute(e,function(e){var t=n(e);if(!t||!e.facet(oj.n))return ep.NZ.none;var r=t.iter();if(!r.value)return ep.NZ.none;for(;r.value;){var i=new ao(r.value,"pocket");return ep.NZ.set(ep.NZ.widget({widget:i,side:1,block:!0}).range(r.to,r.to))}return ep.NZ.none})]}(),aa,al],au=t(20334),ad=new nT.k(function(e){return[oW.t5.of(!e),oW.hb,oW.dz,oW.C3,ac,oW.Ij]});function ap(e,n){var t=performance.now();tz.vF.time(e,t-n)}var af=new nT.k(function(e){var n=e?.01:.001;return ea.Nb.highest(ep.Lz.domEventHandlers({keydown:function(e){if(Math.random()<n){var t=e.timeStamp;requestAnimationFrame(function(){ap("editor input latency",t),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){ap("editor input latency after layout",t)}):setTimeout(function(){ap("editor input latency after layout",t)})})}}}))}),ah=t(81383),am=t(69745),ag=t(80421),av=t.n(ag),aw=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){av()(e)&&window.open(e,"_blank")}}],ay=new nT.k(function(e){return e?null:(0,am.Ay)({key:"mod",rules:aw})}),ab=t(19551),aS=t.n(ab),aY=new Set,aA=aS()(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=aY[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,eZ.u4)(eZ.AZ.WS_TYPED,{fileExt:o})}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}aY.clear()},18e4),aC=ep.Lz.updateListener.of(function(e){if(e.docChanged){var n=e.state.facet(eh.Md);if(n){var t=(0,E.an)(n)||(0,E.WP)(n);!e.transactions.some(function(e){return e.annotation(ea.ZX.remote)})&&(aY.has(t)||(aY.add(t),aA()))}}}),ax=t(9980),a_=ep.Lz.theme({".cm-ruler-element":{backgroundColor:eI.LU.backgroundHigher}}),ak=ea.sU.define({create:function(e){return 0===e.doc.length},update:function(e,n){return n.docChanged?0===n.state.doc.length:e}}),aD=(0,ep.qd)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,ef.$H)(e,aE,ak,oe.k)},markers:function(e){if(e.state.field(ak,!1))return[];var n=e.state.facet(aE);if(0===n.length)return[];var t=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,s=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=i+e.defaultCharacterWidth*p;f<o&&t.push(new ep.Ip("cm-ruler-element",f,0,2,a))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return t}}),aE=ea.sj.define({enables:[ak,aD,a_]}),aR=new nT.k(function(e){return e.map(function(e){return aE.of(e)})}),aI=t(43198),aF=ep.Lz.theme({"& .cm-scrollbar-gutter":{backgroundColor:eI.LU.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:eI.LU.backgroundHigher}}),aT=new nT.k(function(e,n){var t;return e?null:[aF,i9.of({create:function(){return{dom:document.createElement("div")}}}),iW.compute(["doc",tG],function(e){var t=e.field(tG,!1);if(!t)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(t.getLineChangeType(i)){case tB.DE.COVERED:r.push({number:i,color:n.values.global.greenDefault,zIndex:1});break;case tB.DE.MODIFIED:r.push({number:i,color:n.values.global.blueDefault,zIndex:0})}return r}),iq,(t=({color:n.values.global.foregroundDefault}).color,iG.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(n){var r=n.head;return{color:t,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]}),aP=t(5260);function aL(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(n),o=i.next();!o.done&&r.length<t;)r.push(o.value),o=i.next();return r}var aU=t(26190),aN=t(14349),aO=t(26928),aM=t(14359),aB=t(81870),aH=t(95202),az=t(29328),aW=t(32001);function aG(e){return e>420?"large":"small"}var aV=G.D.div,aj=(0,z.x)({root:[W.wp.px(4),W.wp.py(6),{borderBottom:"1px solid",borderColor:eI.LU.outlineDimmest}],panelButtonWrapper:[W.wp.center,W.wp.height(32)],content:[W.wp.display.grid,W.wp.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:eI.LU.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[W.wp.position.absolute,W.wp.top(0),W.wp.right(0),W.wp.height("100%"),W.wp.center,W.wp.pr(4)],searchInputWrapper:[W.wp.position.relative,{gridArea:"search"}],searchControls:[W.wp.display.flex,W.wp.align.center,W.wp.rowWithGap(8),W.wp.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[W.wp.display.flex,W.wp.align.center,W.wp.rowWithGap(8),W.wp.flex.wrap,{gridArea:"replace-controls"}],searchSettings:W.wp.flex.row});function aZ(e){var n=(0,w.useRef)(null);return(0,w.useEffect)(function(){if(n.current){var t;e!==(null===(t=n.current)||void 0===t?void 0:t.value)&&(n.current.value=e)}},[e]),n}var aq=new tt.E((0,w.forwardRef)(function(e,n){var t=e.view,r=e.query,i=e.updateQuery,o=(0,m._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,m._)((0,w.useState)([]),2),c=s[0],u=s[1],d=(0,m._)((0,w.useState)(null),2),p=d[0],f=d[1],h=c.length,g=(0,aU.A)(r),y=(0,aU.A)(c),b=aZ(r.search),S=aZ(r.replace);function Y(){(0,aP.Hg)(t);var e=t.state.selection.main;t.dispatch({effects:ep.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||f(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n>=h?1:n+1})}function A(){(0,aP.ve)(t);var e=t.state.selection.main;t.dispatch({effects:ep.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||f(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n<=1?h||1:n-1})}(0,w.useImperativeHandle)(n,function(){return{onSelectionSet:function(){var e=t.state.selection.main,n=y.current.findIndex(function(n){return n.from<=e.anchor&&n.to>=e.anchor});f(-1!==n?n+1:null)},onDocChanged:function(){u(aL(g.current,t.state.doc)),f(null)},onExpandRequested:function(){l(!0)}}},[t,g,y]),(0,w.useEffect)(function(){var e=aL(r,t.state.doc);u(e);var n=t.state.selection.main,i=e.findIndex(function(e){return e.from<=n.anchor&&e.to>=n.anchor});f(-1!==i?i+1:null)},[t,r]);var C=(0,m._)((0,w.useState)(function(){return aG(t.dom.clientWidth)}),2),x=C[0],_=C[1],k=(0,aN.A)(function(e){e.width&&_(aG(e.width))});function D(e){return(0,ep.TS)(t,e,"search-panel")}var E=h>0,R=r.search.length>0?"0 / 0":null,I=E?"".concat(p||1," / ").concat(h):R,F=I?8*I.length:null,T=(0,v.FD)(G.S,{css:aj.searchSettings,children:[(0,v.Y)(aB.A,{alt:"case sensitive",icon:(0,v.Y)(aH.A,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,v.Y)(aB.A,{alt:"regular expressions",icon:(0,v.Y)(az.A,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,v.Y)(aB.A,{alt:"whole words",icon:(0,v.Y)(aW.A,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),P=[aj.content];return"small"!==x&&a?P.push(aj.contentExpanded):"small"===x&&a?P.push(aj.contentExpandedSmall):"small"!==x||a||P.push(aj.contentSmall),(0,v.Y)(aV,{ref:k,onKeyDown:function(e){D(e)&&e.preventDefault()},children:(0,v.FD)(nl.ui,{elevated:!0,css:aj.root,row:!0,gap:4,children:[(0,v.Y)(G.S,{css:aj.panelButtonWrapper,children:(0,v.Y)(r1.K0,{alt:a?"Close replace panel":"Show replace panel",size:32,onClick:function(){l(function(e){return!e})},children:(0,v.Y)(nu.A,{rotate:a?90:0,style:{transition:"200ms ease"}})})}),(0,v.FD)(G.S,{css:P,children:[(0,v.FD)(G.S,{css:aj.searchInputWrapper,children:[(0,v.Y)(aM.T,{ref:b,style:{padding:4,paddingRight:null!=F?F:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,aO.T$)(e)&&"f"===e.key){e.currentTarget.select();return}if(!("enter"!==e.key.toLowerCase()||D(e))){if(e.preventDefault(),e.shiftKey){A();return}Y()}},onChange:function(e){i({search:e})}}),I?(0,v.Y)(G.S,{css:aj.matchLabel,children:(0,v.Y)(ti.EY,{variant:"small",color:"dimmest",multiline:!1,children:I})}):null]}),(0,v.FD)(G.S,{css:aj.searchControls,children:[(0,v.FD)(G.S,{row:!0,children:[(0,v.Y)(r1.K0,{size:32,alt:"Previous",onClick:function(){A()},children:(0,v.Y)(nu.A,{rotate:-90})}),(0,v.Y)(r1.K0,{size:32,alt:"Next",onClick:function(){Y()},children:(0,v.Y)(nu.A,{rotate:90})})]}),(0,v.Y)(oq.$n,{text:"Select all",onClick:function(){(0,aP.Cj)(t),t.focus()}}),T]}),a?(0,v.FD)(v.FK,{children:[(0,v.Y)(G.S,{css:aj.replaceInputWrapper,children:(0,v.Y)(oK.pd,{ref:S,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){"enter"!==e.key.toLowerCase()||D(e)||(e.preventDefault(),(0,aP.Aw)(t))},onChange:function(e){i({replace:e.target.value})}})}),(0,v.FD)(G.S,{css:aj.replaceControls,children:[(0,v.Y)(oq.$n,{text:"Replace",onClick:function(){(0,aP.Aw)(t)}}),(0,v.Y)(oq.$n,{text:"Replace all",onClick:function(){(0,aP.yh)(t)}})]})]}):null]}),(0,v.Y)(G.S,{css:aj.panelButtonWrapper,children:(0,v.Y)(r1.K0,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,aP.jO)(t)},children:(0,v.Y)(r4.A,{})})})]})})})),aK=ea.Pe.define(),a$=[(0,aP.$P)({createPanel:function(e){var n=!1,t=!1,r=!1,i=!1,o=!1,a=U()(function(n){var t,r,i,o,a,l,s=(0,aP.V8)(e.state),c=new aP.L0({search:null!==(t=n.search)&&void 0!==t?t:s.search,caseSensitive:null!==(r=n.caseSensitive)&&void 0!==r?r:s.caseSensitive,literal:null!==(i=n.literal)&&void 0!==i?i:s.literal,regexp:null!==(o=n.regexp)&&void 0!==o?o:s.regexp,replace:null!==(a=n.replace)&&void 0!==a?a:s.replace,wholeWord:null!==(l=n.wholeWord)&&void 0!==l?l:s.wholeWord});c.eq(s)||e.dispatch({effects:aP.Ri.of(c)})},300),l=aq.create({view:e,query:(0,aP.V8)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(n){(0,ef.$H)(n,aP.Ri)&&aq.set(l,{view:e,query:(0,aP.V8)(n.state),updateQuery:a}),n.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!t){var e;i=!1,null===(e=aq.ref(l))||void 0===e||e.onSelectionSet()}})),n.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!t){var e;r=!1,null===(e=aq.ref(l))||void 0===e||e.onDocChanged()}})),(0,ef.$H)(n,aK)&&!o&&(o=!0,requestAnimationFrame(function(){if(!t){var e;o=!1,null===(e=aq.ref(l))||void 0===e||e.onExpandRequested()}}))},mount:function(){n||(n=!0,requestAnimationFrame(function(){if(!t){n=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return t=!0}}}}),ep.w4.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,aP.NK)(e.state)||(0,aP.pi)(e))&&(e.dispatch({effects:aK.of(null)}),!0)}}])],aJ=t(55344),aQ=t(83733),aX=null!==(p=globalThis.requestIdleCallback)&&void 0!==p?p:globalThis.requestAnimationFrame;function a0(e,n,t){var r=e.field(n,!1);if(void 0===r){if(void 0===t)throw Error("Field is not mounted on state");return t}return n.spec.toJSON(r,e)}function a1(e){for(var n=e.sliceString(0,200)+e.length,t=0,r=0;r<n.length;r++)t=(t<<5)-t+n.charCodeAt(r)|0;return(t>>>0).toString(36)}var a2=function(){function e(n,t,r,i){var o=this;(0,es._)(this,e),this.view=n,this.replId=t,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(ok,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var n=e.prototype;return n.apply=function(){if(!this.historyIsMounted&&this.view.state.field(N.jN,!1)){(0,ep.c_)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));return}if(!this.key||this.view.state.field(ok,!1)){if(this.historyIsMounted){var e,n,t=this.key?iH.u.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(t)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==a1(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,N.b6)())}),this.historyIsMounted=!0;return}var i=ea.OF.fromJSON(r.selection),o=[(e=r.scroll,(n=ep.Lz.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,n),this.compartment.reconfigure([N.jN.init(function(e){var n,t;return n=N.jN,t=r.history,n.spec.fromJSON(t,e)}),(0,N.b6)()])];if(this.view.state.field(Y.rI,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],s=r.folds[a+1];o.push(Y.R3.of({from:l,to:s}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},n.scheduleCacheUpdate=function(){var e=this;this.pending||(this.pending=!0,aX(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:a1(e.view.state.doc),scroll:function(e){var n=e.scrollDOM.scrollTop,t=e.scrollDOM.scrollLeft;if(0===n&&0===t)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(n+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-n>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-n,scrollLeft:t}}(e.view),selection:e.view.state.selection.toJSON(),history:a0(e.view.state,N.jN),folds:a0(e.view.state,Y.rI,[])}))}))},n.postUpdate=function(e){if((0,ef.$H)(e,eh.Md,ok)){this.apply();return}!this.pending&&this.historyIsMounted&&(0,ef.$H)(e,"doc","selection",N.jN,Y.rI)&&this.scheduleCacheUpdate()},n.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,re._)(e,[{key:"key",get:function(){var e=this.view.state.facet(eh.Md);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),a5=new nT.k(function(e,n){var t=new ea.xx,r=ep.Z9.define(function(r){return new a2(r,e,n,t)},{provide:function(e){return ep.Lz.updateListener.of(function(n){var t;null===(t=n.view.plugin(e))||void 0===t||t.postUpdate(n)})}});return[t.of(iH.u.of(!0)),r]}),a4=ep.Lz.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),a3=t(80475),a8=t(36736),a7=t(41827),a6=new nT.k(function(e){var n=ep.Lz.domEventHandlers({scroll:U()(function(n,t){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var s,c=t.visibleRanges[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:t.state.doc.lineAt(r).number,to:t.state.doc.lineAt(i).number}})},250)}),t=U()(function(n,t,r){e("user:selection",{inputMethod:r,from:n,to:t})},250);return[n,ep.Lz.updateListener.of(function(n){var r=n.transactions,i=!0,o=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.isUserEvent("input.paste")&&e("user:paste",{}),c.isUserEvent("input.drop")&&e("user:new-drop",{}),c.isUserEvent("move.drop")&&e("user:move-drop",{}),c.isUserEvent("delete.cut")&&e("user:cut",{}),c.isUserEvent("input.complete")&&e("user:complete",{}),c.isUserEvent("select")&&t(c.newSelection.main.from,c.newSelection.main.to,c.isUserEvent("select.pointer")?"pointer":"keyboard"),c.isUserEvent("undo")&&e("user:undo",{}),c.isUserEvent("redo")&&e("user:redo",{})}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}})]}),a9=t(54867),le=t(16170),ln=t(79604),lt=t(92517);function lr(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function li(e,n){var t;return null==n?lr(e):{filePath:e,text:null!==(t=n.state.doc.toString())&&void 0!==t?t:"",selections:n.state.selection.ranges.map(function(e){var n=e.from;return{location:n,length:e.to-n}}),hasFocus:n.hasFocus}}function lo(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,iw.A)(),t={messageType:lt.tF.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,le._z)(t,n)}function la(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,iw.A)(),t={messageType:lt.tF.TEXT_EDITOR_CLOSED,filePath:e};(0,le._z)(t,n)}function ll(e,n,t,r,i){return r===e&&r===t.textEditorState.filePath&&n===t.textEditorState.filePath&&i===t.revisionId}function ls(e){var n=e.map(function(e){return ea.OF.range(e.location,e.location+e.length)});return ea.OF.create(n)}function lc(e,n,t,r,i){var o=i.payload;if((0,lt.$H)(o))return function(e,n,t,r,i){if(!ll(e,n,r,i.filePath,i.revisionId))return!1;var o=ls(i.selections);return t.dispatch({selection:o,scrollIntoView:!0}),!0}(e,n,t,r,o);if((0,lt.m3)(o))return function(e,n,t,r,i){if(!ll(e,n,r,i.filePath,i.revisionId))return!1;var o=ls(i.selections);return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:i.text},selection:o,scrollIntoView:!0}),!0}(e,n,t,r,o);if((0,lt.XN)(o))return function(e,n,t,r,i){if(!ll(e,n,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=ls(i.selections);return t.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,o);if((0,lt.bb)(o))return!!ll(e,n,r,o.filePath,o.revisionId)&&(t.dispatch(t.state.replaceSelection(o.text)),!0);if((0,lt.bj)(o))ll(e,n,r,o.filePath,o.revisionId)&&(0,oz.mJ)({filePath:e,view:t,clipboardText:o.text});else if((0,lt.Ho)(o))switch(o.action){case lt.wZ.REQUEST_BLUR:return function(e,n,t,r,i,o){if(!ll(e,n,r,i,o))return!1;t.contentDOM.blur()}(e,n,t,r,o.filePath,o.revisionId);case lt.wZ.REQUEST_UNDO:return!!ll(e,n,r,o.filePath,o.revisionId)&&((0,N.tN)(t),!0);case lt.wZ.REQUEST_REDO:return!!ll(e,n,r,o.filePath,o.revisionId)&&((0,N.ZS)(t),!0);case lt.wZ.REQUEST_INDENT_SELECTION:return!!ll(e,n,r,o.filePath,o.revisionId)&&(N.UY(t),!0);case lt.wZ.REQUEST_DEDENT_SELECTION:return!!ll(e,n,r,o.filePath,o.revisionId)&&(N.Mg(t),!0);case lt.wZ.REQUEST_TOGGLE_COMMENT:return!!ll(e,n,r,o.filePath,o.revisionId)&&(N.qh(t),!0);case lt.wZ.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!ll(e,n,r,o.filePath,o.revisionId)&&(0,ln.R)(t);case lt.wZ.REQUEST_FOCUS:return t.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var lu=t(92105),ld=t(87189),lp=t(79119),lf=t(45354),lh=t(25930),lm=t(33005),lg=t(41732),lv=t(58382),lw=t(45009),ly=t(30632),lb=t(72813);function lS(){var e=(0,lw._)(["\n  query GetReplCodeRepairAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useCodeRepair {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return lS=function(){return e},e}var lY={},lA=(0,ly.J1)(lS());function lC(){var e,n,t,r=(n={variables:{replId:(0,aQ.A)()}},t=(0,f._)({},lY,n),lb.I(lA,t)).data;return(null==r?void 0:null===(e=r.repl)||void 0===e?void 0:e.__typename)==="Repl"&&r.repl.authorizations.useCodeRepair.isAuthorized}function lx(){return(0,t0._P)({controlName:"flag-code-repair"})}function l_(e){return(0,w.useMemo)(function(){var n;return!!e&&(null===(n=nX.Jh.from(e))||void 0===n?void 0:n.id)==="python"},[e])}var lk=t(26205),lD=t(60768),lE=t(26030),lR=t(26171),lI=function(e){var n=parseInt(e.substring(1),16);return[n>>16&255,n>>8&255,255&n]},lF=t(5934);function lT(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var lP=t(22616);function lL(e,n,t,r){var i=(0,ow.A)().showError,o=(0,aQ.A)(),a=(0,lP.Rf)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||n});return(0,w.useMemo)(function(){var r;return n||a.loading||a.error||!a.data||(null===(r=a.data.threadsByFile)||void 0===r?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(n){return n.path===e&&(!t||!n.isResolved)}).reduce(function(e,n){return(0,h._)((0,f._)({},e),(0,tA._)({},n.id,n))},{})},[a.loading,a.data,a.error,e,n,t])}var lU=function(e){function n(){return(0,es._)(this,n),(0,tp._)(this,n,arguments)}(0,tf._)(n,e);var t=n.prototype;return t.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},t.eq=function(e){return!1},t.destroy=function(e){},n}(ea.FB);lU.prototype.elementClass="",lU.prototype.toDOM=void 0,lU.prototype.mapMode=ea.iR.TrackBefore,lU.prototype.startSide=lU.prototype.endSide=-1,lU.prototype.point=!0;var lN=ea.sj.define(),lO=ea.sj.define(),lM=ea.sj.define({combine:function(e){return e.some(function(e){return e})}}),lB=ep.Z9.fromClass(function(){function e(n){(0,es._)(this,e),this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(lO).map(function(e){return new lG(n,e)});var t=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!n.state.facet(lM),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling)}var n=e.prototype;return n.update=function(e){if(e.viewportChanged){var n=this.view.contentDOM.nextElementSibling;n&&n!==this.dom&&n.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var t=this.prevViewport,r=e.view.viewport,i=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(lM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},n.syncGutters=function(e){var n=this,t=this.dom.nextSibling;e&&this.dom.remove();var r=ea.om.iter(this.view.state.facet(lN),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new lW(e,n.view.viewport,-n.view.documentPadding.top)}),a=!0,l=!1,s=void 0;try{for(var c,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=void 0;if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;if(w.type==ep._B.Text){p=w;break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}else p=d.type==ep._B.Text?d:void 0;if(p){i.length&&(i=[]),lz(r,i,d.from);var y=!0,b=!1,S=void 0;try{for(var Y,A=o[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0)Y.value.line(this.view,p,i)}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var C=!0,x=!1,_=void 0;try{for(var k,D=o[Symbol.iterator]();!(C=(k=D.next()).done);C=!0)k.value.finish()}catch(e){x=!0,_=e}finally{try{C||null==D.return||D.return()}finally{if(x)throw _}}e&&this.view.scrollDOM.insertBefore(this.dom,t)},n.updateGutters=function(e){var n=e.startState.facet(lO),t=e.state.facet(lO),r=e.docChanged||e.heightChanged||e.viewportChanged||!ea.om.eq(e.startState.facet(lN),e.state.facet(lN),e.view.viewport.from,e.view.viewport.to);if(n==t){var i=!0,o=!1,a=void 0;try{for(var l,s=this.gutters[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{r=!0;var c=[],u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=n.indexOf(m);g<0?c.push(new lG(this.view,m)):(this.gutters[g].update(e),c.push(this.gutters[g]))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}var v=!0,w=!1,y=void 0;try{for(var b,S=this.gutters[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;Y.dom.remove(),0>c.indexOf(Y)&&Y.destroy()}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}var A=!0,C=!1,x=void 0;try{for(var _,k=c[Symbol.iterator]();!(A=(_=k.next()).done);A=!0){var D=_.value;this.dom.appendChild(D.dom)}}catch(e){C=!0,x=e}finally{try{A||null==k.return||k.return()}finally{if(C)throw x}}this.gutters=c}return r},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.dom.remove()},e}(),{provide:function(e){return ep.Lz.scrollMargins.of(function(n){var t=n.plugin(e);return t&&0!=t.gutters.length&&t.fixed?n.textDirection==ep.OP.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})}});function lH(e){return Array.isArray(e)?e:[e]}function lz(e,n,t){for(;e.value&&e.from<=t;)e.from==t&&n.push(e.value),e.next()}var lW=function(){function e(n,t,r){(0,es._)(this,e),this.gutter=n,this.height=r,this.localMarkers=[],this.i=0,this.cursor=ea.om.iter(n.markers,t.from)}var n=e.prototype;return n.line=function(e,n,t){this.localMarkers.length&&(this.localMarkers=[]),lz(this.cursor,this.localMarkers,n.from);var r=t.length?this.localMarkers.concat(t):this.localMarkers,i=this.gutter.config.lineMarker(e,n,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=n.top-this.height;if(this.i==o.elements.length){var l=new lV(e,n.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,r);this.height=n.bottom,this.i++}},n.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}},e}(),lG=function(){function e(n,t){var r,i=function(e){r.dom.addEventListener(e,function(r){var i=n.lineBlockAtHeight(r.clientY-n.documentTop);t.domEventHandlers[e](n,i,r)&&r.preventDefault()})};for(var o in(0,es._)(this,e),this.view=n,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)r=this,i(o);this.markers=lH(t.markers(n)),t.initialSpacer&&(this.spacer=new lV(n,0,0,[t.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var n=e.prototype;return n.update=function(e){var n=this.markers;if(this.markers=lH(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}var r=e.view.viewport;return!ea.om.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}(),lV=function(){function e(n,t,r,i){(0,es._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,t,r,i)}var n=e.prototype;return n.update=function(e,n,t,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),!function(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].compare(n[t]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},n.setMarkers=function(e,n){for(var t="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<n.length?n[i++]:null,s=!1;if(l){var c=l.elementClass;c&&(t+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,s=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var p=r.nextSibling;r.remove(),r=p}}if(!l)break;l.toDOM&&(s?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),s&&o++}this.dom.className=t,this.markers=n},n.destroy=function(){this.setMarkers(null,[])},e}(),lj=ea.sj.define(),lZ=ea.sj.define({combine:function(e){return(0,ea.QR)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,n){var t=Object.assign({},e);for(var r in n)!function(e){var r=t[e],i=n[e];t[e]=r?function(e,n,t){return r(e,n,t)||i(e,n,t)}:i}(r);return t}})}}),lq=function(e){function n(e){var t;return(0,es._)(this,n),(t=(0,tp._)(this,n)).number=e,t}(0,tf._)(n,e);var t=n.prototype;return t.eq=function(e){return this.number==e.number},t.toDOM=function(){return document.createTextNode(this.number)},n}(lU);function lK(e,n){return e.state.facet(lZ).formatNumber(n,e.state)}function l$(e){for(var n=9;n<e;)n=10*n+9;return n}lO.compute([lZ],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(lj)},lineMarker:function(e,n,t){return t.some(function(e){return e.toDOM})?null:new lq(lK(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:function(e){return e.startState.facet(lZ)!=e.state.facet(lZ)},initialSpacer:function(e){return new lq(lK(e,l$(e.state.doc.lines)))},updateSpacer:function(e,n){var t=lK(n.view,l$(n.view.state.doc.lines));return t==e.number?e:new lq(t)},domEventHandlers:e.facet(lZ).domEventHandlers}});var lJ=new(function(e){function n(){var e;return(0,es._)(this,n),e=(0,tp._)(this,n,arguments),e.elementClass="cm-activeLineGutter",e}return(0,tf._)(n,e),n}(lU)),lQ=(lN.compute(["selection"],function(e){var n=[],t=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;if(s.empty){var c=e.doc.lineAt(s.head).from;c>t&&(t=c,n.push(lJ.range(c)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return ea.om.of(n)}),t(60818)),lX=t(47547);let l0=function(e){var n=e.isOpen,t=e.threadId,r=(0,m._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,lQ.Mk)({variables:{id:t},skip:"initial-spacer"===t});(0,w.useEffect)(function(){if(a&&!a.error){var e,n=null===(e=a.data)||void 0===e?void 0:e.thread;n&&o((null==n?void 0:n.__typename)==="AnnotationAnchor"&&(null==n?void 0:n.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,v.Y)(r1.K0,{alt:n?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[W.wp.width(20),W.wp.height(20),W.wp.transition.snappy,W.wp.cursor.pointer,W.wp.display.flex,W.wp.borderRadius(8),W.wp.position.relative,W.wp.overflow("visible"),n?W.wp.color.accentPrimaryStrongest:W.wp.color.foregroundDimmest,{borderWidth:eI.LU.borderWidthDefault,borderStyle:"solid",borderColor:n?eI.LU.accentPrimaryDefault:"transparent",backgroundColor:n?eI.LU.accentPrimaryDimmer:eI.LU.backgroundHigher,outline:0},{":hover":{borderColor:n?eI.LU.accentPrimaryStronger:eI.LU.outlineDimmer,color:n?eI.LU.accentPrimaryStrongest:eI.LU.foregroundDimmer,background:n?eI.LU.accentPrimaryDefault+" !important":eI.LU.backgroundHighest},svg:{width:12,height:12}}],children:(0,v.FD)(v.FK,{children:[i?(0,v.Y)("div",{css:[W.wp.width(8),W.wp.height(8),W.wp.backgroundColor.redStronger,W.wp.position.absolute,W.wp.top(-1),W.wp.left(-1),W.wp.borderRadius("full")]}):null,(0,v.Y)(lX.A,{})]})})};var l1=t(50543),l2=t(40114),l5=t(5846),l4=t(72621),l3=t(21195),l8=t(54545),l7=t(77781),l6=t(22657);let l9=function(e){var n=e.caretSize,t=void 0===n?[8,12]:n,r=(0,eo._)(e,["caretSize"]);return(0,v.FD)("svg",(0,h._)((0,f._)({width:t[0],height:t[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,v.Y)("mask",{id:"outline",fill:"white",children:(0,v.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,v.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,v.Y)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,v.Y)("defs",{children:(0,v.FD)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,v.Y)("stop",{stopColor:"#57ABFF"}),(0,v.Y)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))};var se=t(70889),sn=t(38989),st=t(5609),sr=t(98541),si=t(18860),so=t(41760),sa=t(12470),sl=t(62514),ss=t(48701),sc=t(16021),su=t(68522),sd=t(73013),sp=t(10863),sf=(0,z.x)({inlineThreadHeader:[W.wp.position.relative,W.wp.px(12),W.wp.py(8),{borderBottomWidth:eI.LU.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:eI.LU.outlineDimmest}],inlineThreadHeaderCaret:[W.wp.position.absolute,W.wp.height("fit-content"),W.wp.display.flex,W.wp.flex.row,W.wp.align.center],inlineThreadInputContainer:[W.wp.px(12),W.wp.pb(8),W.wp.pt(8),W.wp.border({color:eI.LU.outlineDimmest,direction:"top"}),{".popover-control-container":[W.wp.flex.grow(1)]}],inlineThreadInput:[W.wp.flex.row,W.wp.align.start,W.wp.rowWithGap(8),W.wp.width("full")],commentContainer:[W.wp.px(12),W.wp.py(12),W.wp.maxHeight(300),W.wp.overflowY("auto"),W.wp.colWithGap(16)]}),sh=function(e){var n,t,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,s=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,p=e.openThreadsInbox,f={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},h=lL(null===o?"":o,l,!0,!0),m=(0,R.gc)("fontSize").preferences.fontSize,g=[12,8];switch(m){case 10:g=[8,6];break;case 14:g=[10,6];break;case 18:g=[12,8];break;case 24:g=[14,10]}var y=(0,w.useMemo)(function(){return Object.values(h).sort(function(e,n){return e.indexStart-n.indexStart})},[h]),b=(0,w.useMemo)(function(){return y.findIndex(function(e){return e.id===i})},[y,i]),S=(0,st.li)(),Y=(n=(0,el._)(function(){return(0,ec.YH)(this,function(e){return S(b===y.length-1?y[0].id:y[b+1].id),[2]})}),function(){return n.apply(this,arguments)}),A=(t=(0,el._)(function(){return(0,ec.YH)(this,function(e){return S(0===b?y[y.length-1].id:y[b-1].id),[2]})}),function(){return t.apply(this,arguments)});return(0,v.FD)(nl.ui,{background:"root",css:sf.inlineThreadHeader,row:!0,align:"center",justify:"space-between",children:[null!==c&&(0,v.Y)("span",{css:sf.inlineThreadHeaderCaret,style:{top:-g[1],left:c},children:(0,v.Y)(l9,{caretSize:g})}),(0,v.Y)(oq.$n,{iconLeft:(0,v.Y)(sd.A,{}),onClick:function(){p()},text:f.viewAll,size:"small"}),y.length>1?(0,v.FD)(G.S,{row:!0,align:"center",gap:4,children:[(0,v.Y)(r1.K0,{alt:f.previous,onClick:A,children:(0,v.Y)(ss.A,{})}),(0,v.FD)(ti.EY,{color:"dimmest",variant:"small",multiline:!1,children:[b+1,"/",y.length]}),(0,v.Y)(r1.K0,{alt:f.next,onClick:Y,children:(0,v.Y)(sl.A,{})})]}):null,(0,v.FD)(G.S,{row:!0,align:"center",gap:4,children:[r||a||s?null:(0,v.Y)(oq.$n,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,v.Y)(sc.A,{})}),!r&&a?(0,v.Y)(sr.a,{text:"Resolved",colorway:"positive"}):null,(0,v.Y)(oq.$n,{onClick:void 0===u?function(){}:u,text:f.dismiss,size:"small",iconLeft:(0,v.Y)(su.A,{})})]})]})},sm=function(e){var n,t,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,s=e.onRequestClose,c=void 0===s?function(){}:s,u=(0,m._)((0,w.useState)(""),2),d=u[0],p=u[1],g=(0,m._)((0,w.useState)((0,iw.A)()),2),y=g[0],b=g[1],S=(0,l8.A)().ref,Y=(0,w.useRef)(null),A={input:{placeholder:function(){return l?"Start a new thread (Markdown is supported)":i?"Reply to re-open thread":"Reply (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},C=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:y}),p(""),b((0,iw.A)()))},x=(0,l7.T)(),_=(0,l3.A)(),k=(0,m._)((0,l6.A)({"@":(n=(0,el._)(function(e){var n,t;return(0,ec.YH)(this,function(r){return n=_.filter(function(e){return e.id!==x}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,v.Y)(sa.A,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return n.apply(this,arguments)})}),2),D=k[0].suggestions,E=k[1],R=(0,l2.Bp)({items:(null==D?void 0:D.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(t=null==D?void 0:D.results.length)&&void 0!==t?t:0)>0,onSelectedItemChange:function(e){var n=e.selectedItem;if(D&&n){var t=D.applySuggestion({targetValue:d,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;p(r),setTimeout(function(){Y.current&&(Y.current.setSelectionRange(i,i),Y.current.focus())})}}}),I=R.isOpen,F=R.getInputProps,T=R.getMenuProps,P=R.getItemProps,L=R.highlightedIndex,U=R.getComboboxProps;return(0,w.useEffect)(function(){var e="threads/drafts/".concat(r),n=oy.A.get(e,"string");n&&p(n);var t=Y.current;return function(){if(t){var n=t.value;if(0===n.length){oy.A.remove(e);return}oy.A.set(e,n)}}},[r]),(0,v.Y)(nl.ui,{background:"root",css:sf.inlineThreadInputContainer,children:(0,v.FD)("div",(0,h._)((0,f._)({css:sf.inlineThreadInput},U()),{children:[l?(0,v.Y)(oq.$n,{text:A.cancel,onClick:c}):null,(0,v.FD)("div",{css:[{width:"100%"}],children:[(0,v.Y)(oK.ov,(0,f._)({},F({ref:function(e){Y.current=e,S(e),E(e)},value:d,onChange:function(e){var n=e.target.value;p(n),o({message:n,messageId:y})},onKeyDown:function(e){!I&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),C()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),c())},placeholder:A.input.placeholder(),css:[W.wp.height(32),W.wp.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,v.Y)("div",{css:{position:"relative"},children:(0,v.Y)("div",(0,h._)((0,f._)({},T({css:[{position:"absolute",top:eI.LU.space2,overflow:"hidden"},W.wp.borderRadius(16),W.wp.shadow(1),W.wp.backgroundColor.backgroundDefault]})),{children:null==D?void 0:D.results.map(function(e,n){return(0,l1.n)("div",(0,h._)((0,f._)({},P({item:e,index:n})),{key:e.value}),(0,v.FD)(so.z,{spacing:2,css:[L===n?W.wp.backgroundColor.backgroundHighest:null,W.wp.p(8)],children:[e.icon,(0,v.Y)("div",{children:e.value})]}))})}))})]}),(0,v.Y)(G.S,{css:[W.wp.pt(4)],children:(0,v.Y)(r1.K0,{alt:A.submit,tooltipDelay:"long",onClick:C,children:(0,v.Y)(sp.A,{})})})]}))})},sg=function(e){var n,t,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,s=e.filePath,c=e.openThreadsInbox,u=(0,sn.A)(r,l,s),d=u.thread,p=u.loading,f=u.isPlaceholder,h=u.getLatestAnchor,m=u.updateThread,y=u.changeThreadMessage,b=u.finalizeThreadMessage,S=function(){null==l||l.dispatch({effects:[lF.Ky.of(null)]})},Y=(0,R.gc)("fontSize").preferences.fontSize,A=(0,w.useRef)(null);(0,l4.A)(d);var C=h(),x=l&&!p&&"number"==typeof(null==C?void 0:C.indexEnd)&&C.indexEnd<=l.state.doc.length?null===(t=l.coordsAtPos(C.indexEnd))||void 0===t?void 0:t.left:null,_=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,k=Y;switch(Y){case 10:k=13;break;case 14:k=19;break;case 18:k=25;break;case 24:k=34}var D=(0,ow.A)().showConfirm,E=(0,aQ.A)(),I=(0,w.useRef)(null),F=function(){I.current&&(I.current.scrollTop=I.current.scrollHeight)};(0,w.useEffect)(function(){setTimeout(function(){F()},0)},[null==d?void 0:d.messages]);var T=(0,w.useMemo)(function(){return(null==d?void 0:d.messages)?(0,g._)(d.messages).sort(function(e,n){return Date.parse(e.timeCreated)-Date.parse(n.timeCreated)}):[]},[null==d?void 0:d.messages]),P=(n=(0,w.useRef)(0),(0,aN.A)(function(e){var t=e.height;t!==n.current&&(null==l||l.requestMeasure()),n.current=t}));return(0,v.Y)("div",{css:[W.wp.width("100%"),W.wp.backgroundColor.backgroundRoot],children:(0,v.FD)(G.S,{innerRef:(0,ee.P)(A,P,{breadcrumb:"client/workspace/components/Threads/Inline.tsx:671"}),css:[W.wp.font.default,{borderTopWidth:eI.LU.borderWidthDefault,borderBottomWidth:eI.LU.borderWidthDefault,borderStyle:"solid",borderColor:eI.LU.accentPrimaryDefault}],children:[f||p?null:(0,v.Y)(sh,{isCreating:i,isResolved:a,isLoading:p,threadId:r,filePath:s,caretPosition:x&&_?x-_-6:null,isPlaceholder:f,onRequestClose:S,onResolveThread:function(){m({changes:{isResolved:!0}}),D("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:c}),p&&!f?(0,v.Y)(G.S,{style:{height:k},children:(0,v.Y)(si.A,{viewBox:"0 0 400 21",backgroundColor:eI.LU.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:eI.LU.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,v.Y)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,v.FD)(v.FK,{children:[!i&&T.length>0?(0,v.Y)("div",{css:sf.commentContainer,style:{fontSize:Y},ref:I,children:T.map(function(e){return(0,v.Y)(se.A,{thread:d,message:e},e.id)})}):null,(0,v.Y)(sm,{threadId:r,isPlaceholder:f,isResolved:a,onRequestClose:S,onMessageChange:y,onMessageSubmit:function(e){b(e),(0,eZ.u4)(l5.AZ.MESSAGE_SENT,{replId:E,source:"threads",newThread:f})}})]})]})})},sv=function(e){function n(e,t){var r;return(0,es._)(this,n),(r=(0,tp._)(this,n)).id=e,r.filePath=t,r}(0,tf._)(n,e);var t=n.prototype;return t.eq=function(e){return e.id===this.id},t.toDOM=function(e){var n=(0,tt.J)((0,v.Y)(sg,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:function(){return(0,ir.zw)(e.state,{pane:{type:"threadInbox"}})}}));n.className="cm-thread-portal-widget";var t=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return t&&r&&lT(n,t,r),n},t.ignoreEvent=function(){return!0},n}(ep.xO),sw=function(e){function n(e,t){var r;return(0,es._)(this,n),(r=(0,tp._)(this,n)).id=e,r.active=t,r}(0,tf._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,tt.J)((0,v.Y)(l0,{isOpen:this.active,threadId:this.id}));return t.className="cm-thread-indicator",t.style.display="inline",t.style.cursor="pointer",t.setAttribute("aria-hidden","true"),t.onclick=function(t){t.stopPropagation(),t.preventDefault(),e.dispatch({effects:[lF.Ky.of(e.state.field(lF.dg)===n.id?null:n.id)]})},t},t.eq=function(e){return e.id===this.id&&e.active===this.active},n}(lU),sy=(i={class:"cm-thread-indicator-gutter",markers:function(e){var n=e.state.field(lF.K1),t=e.state.field(lF.dg);return ea.om.of(Object.values(n).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(n){var r=e.state.doc.lineAt(Math.min(n.indexStart,n.indexEnd)).from;return new sw(n.id,n.id===t).range(r)}),!0)},initialSpacer:function(){return new sw("initial-spacer",!1)}},[[lB],lO.of((0,f._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return ea.om.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},i))]),sb=t(82542),sS=function(e,n,t,r,i){if(n===t)return null;var o=(0,m._)(r,2),a=o[0],l=o[1];return ep.NZ.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(n,t)},sY=new nT.k(function(e,n){return e?[ea.Nb.highest(sy),lF.Am,lF.K1,lF.TW,lF.dg,ep.Lz.decorations.compute([lF.K1,lF.TW,lF.dg],function(e){var t=e.field(lF.K1),r=e.field(lF.TW),i=e.field(lF.dg),o=r||Object.values(t).find(function(e){return e.id===i});return ep.NZ.set((0,g._)(Object.values(t)).map(function(e){var t=o&&e.id===o.id;return sS(e.id,e.indexStart,e.indexEnd,n,t)}).filter(function(n){return null!==n&&n.from!==n.to&&n.from<=e.doc.length&&n.to<=e.doc.length}),!0)}),ep.Lz.decorations.compute([lF.K1,lF.TW,lF.dg,eh.Md],function(e){var n=e.field(lF.K1),t=e.field(lF.TW),r=e.field(lF.dg),i=e.facet(eh.Md);if(void 0===i)return ep.NZ.none;var o=(0,g._)(Object.values(n)).concat((0,g._)(t?[t]:[])).filter(Boolean).find(function(e){return e.id===r});return o?ep.NZ.set([ep.NZ.widget({widget:new sv(o.id,i),block:!0,side:1}).range(o.indexEnd)],!0):ep.NZ.none}),ep.Lz.updateListener.of(function(e){(0,eg.C)(e,oe.k,function(){var n=(0,g._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;lT(c,t,r)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})}),ep.Lz.updateListener.of(function(e){(0,eg.C)(e,lF.Mt,function(n){var t=n.value,r=e.state.field(lF.K1)[t];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[ep.Lz.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),sA=t(31352);function sC(e){var n=e.selection.main.head,t=e.doc.lineAt(n);return{offset:n,line:t.number,column:n-t.from+1}}var sx=new nT.k(function(e){return ep.Lz.focusChangeEffect.of(function(n,t){var r=n.facet(eh.Md);return r&&e(r,t?{type:"focus",position:sC(n)}:{type:"blur"}),null})}),s_=new nT.k(function(e){return ep.Lz.updateListener.of(function(n){if(n.selectionSet){var t=n.state.facet(eh.Md);t&&e(t,{type:"update",hasFocus:n.view.hasFocus,position:sC(n.state)})}})}),sk=t(71549),sD=new nT.k(function(){return(0,ep.BE)()}),sE=function(e){var n;return(0,a8.A)((n=(0,el._)(function(n){var t;return(0,ec.YH)(this,function(r){switch(r.label){case 0:return[4,n.status()];case 1:if((t=r.sent()).error)return[2,{error:t.error,isUnmerged:null}];if(t.changes.find(function(n){return n.path===e&&(n.type.index===a3.PX.UNMERGED||n.type.worktree===a3.PX.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})}),function(e){return n.apply(this,arguments)}),[e])||{error:null,isUnmerged:null}};function sR(e){var n,t,r,i,o,a,l,s,c,u,d,p,y,b,S,Y,A,C,I,T,P,L,N,O,M,z,W,G,V,j,Z,q,K,$,J,Q,X,ee,en,et,er,ei,eo,eu,ed,e_,ek,eD,eR,eF,eT,eP,eL,eU,eN,eO,eM,eB,eH,ez,eW,eG,eV,ej,eq,eK,e$,eJ,eQ,eX,e0,e1,e2,e5,e4,e3,e8,e7,e6,e9,ne,nn,nt,nr,ni,no,na,nl,ns,nc,nu,nd,np=e.filePath,nf=e.isHidden,nh=e.isReadOnly,nm=e.isReadOnlyWhileAgentWorking,ng=e.deeplink,nv=e.onDeeplinkUpdated,ny=e.performPaneOperation,nb=e.handleOpenPurchaseModal,nS=(0,nL.A)(),nY=nS.fs,nA=nS.debuggest,nC=nS.presence,nx=nS.runner,n_=(0,R.gc)("codeRepairHighlight","formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,nk=(0,ax.A)(),nR=nk.ref,nF=nk.view,nT=(0,w.useCallback)(function(e){return ny({operation:"open",pane:e,secondary:!0})},[ny]);(0,H.Hn)(nF);var nU=(0,B.eG)(),nH=oY.use(!!(null==nU?void 0:nU.match(/Chrome/i))&&!!(null==nU?void 0:nU.match(/Android/i))),nz="/replEnvironmentDesktop"===nE().pathname,nW=(0,w.useContext)(sk.IC),nG=(0,oA.gR)(),nV=(t=(n={path:np,isHidden:nf}).path,r=n.isHidden,i=(0,sA.EZ)(),o=sx.use(i),a=s_.use(i),(0,w.useEffect)(function(){i(t,{type:r?"hidden":"unhidden"})},[r,i,t]),(0,w.useEffect)(function(){return function(){i(t,{type:"unmount"})}},[i,t]),(0,w.useMemo)(function(){return[o,a]},[o,a])),nj=(c=(l={view:nF,presence:nC,fs:nY,filePath:np,performPaneOperation:ny}).view,u=l.presence,d=l.fs,p=l.filePath,y=l.performPaneOperation,b=oH.use(p,d,u),S=om.use(u),A=(Y={filePath:p,fs:d,performPaneOperation:y}).filePath,C=Y.fs,I=Y.performPaneOperation,T=(0,oC.A)().trackTimeToLoadFileEnd,P=(0,oA.iO)(),L=(0,oA.jk)(),N=(0,oA.Qq)(),O=(0,ow.A)().showWarning,M=(0,w.useMemo)(function(){return{trackTimeToLoadFileEnd:T,throwBsod:P,setBsodFilePathVersion:L,deleteBsodFilePathVersion:N,showWarning:O,performPaneOperation:I}},[N,L,P,T,O,I]),z=oF.use(A,C,M),W=null===(s=(0,D.Vn)(c,iH.u))||void 0===s||s,G=(0,w.useMemo)(function(){return[z,b,S]},[z,b,S]),(0,w.useMemo)(function(){return{isLoading:W,extensions:G}},[W,G])),nZ=nj.isLoading,nq=nj.extensions,nK=function(){var e=(0,aQ.A)(),n=(0,w.useContext)(aJ.H);if(!n)throw Error("Expected codemirror state to be in codemirror state context");return a5.use(e,n)}(),n$=(j=(V={filePath:np,isLoading:nZ}).filePath,Z=V.isLoading,q=(0,nL.A)().fs,K=(0,n4.A)(j),$=(0,R.gc)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,J=(0,t0._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),Q=(0,t0._P)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),X=!(0,t0._P)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),ee=Z||!$.codeIntelligence||!K.find(function(e){return e.isSupportedFile(j)}),en=(0,w.useMemo)(function(){return new ef.L(ee?[]:function(e,n,t,r,i){if(!n.length)return[];var o,a,l,s,c,u,d,p=[(a=(o={lspClients:n,path:t}).lspClients,l=o.path,ep.Z9.define(function(e){var n,t,r,i,o,s;return t=(n={lspClients:a,path:l,view:e}).lspClients,r=n.path,i=n.view,o=(0,iw.A)(),s=function(e){var n,t=ib.get(e.clientId);return(null!==(n=null==t?void 0:t.get(r))&&void 0!==n?n:[])[0]===o},function(){var e=!0,n=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(e=(l=s.next()).done);e=!0){var c,u=l.value,d=ib.get(u.clientId),p=null!==(c=null==d?void 0:d.get(r))&&void 0!==c?c:[];d?d.set(r,(0,g._)(p).concat([o])):ib.set(u.clientId,new Map([[r,[o]]])),u.notify.didOpen(r,i.state.doc.toString())}}catch(e){n=!0,a=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw a}}}(),{id:o,destroy:function(){var e=!0,n=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s,c=a.value,u=ib.get(c.clientId),d=(null!==(s=null==u?void 0:u.get(r))&&void 0!==s?s:[]).filter(function(e){return e!==o});c.getServerState()===iy.b.INITIALIZED&&c.isOpen(r)&&c.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){n=!0,i=e}finally{try{e||null==l.return||l.return()}finally{if(n)throw i}}},update:function(e){if(e.docChanged){var n=!0,i=!1,o=void 0;try{for(var a,l,c=t[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u,d=l.value;if(s(d)){var p=null===(u=d.getServerCapabilities())||void 0===u?void 0:u.textDocumentSync;if(p!==t3.TextDocumentSyncKind.None&&d.isOpen(r)){if(p===t3.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}a||(a=function(e,n){var t=[],r=n;return e.iterChanges(function(e,n,i,o,a){var l=a.sliceString(0),s=n-e,c=s+i;t.push({range:{start:(0,ev.Z3)(r,i),end:(0,ev.Z3)(r,c)},rangeLength:s,text:l}),r=r.replace(i,c,a)}),t}(e.changes,e.startState.doc)),d.notify.didChange(r,a)}}}}catch(e){i=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}}}}})),(0,k.E9)({lspClients:n,path:t}),function(e,n){function t(e){return(0,ey.A)(e).isTextDocumentSyncSupported}return ep.Z9.fromClass(function(){function r(e){(0,es._)(this,r),this.dispose=this.listen(e.state.facet(eh.Md))}var i=r.prototype;return i.update=function(e){(0,ef.$H)(e,eh.Md)&&(this.dispose=this.listen(e.state.facet(eh.Md)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if(this.dispose&&this.dispose(),r&&n.find(function(e){return t(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value;t(s)&&(0,ey.A)(s).isTextDocumentSyncSaveSupported&&s.isOpen(r)&&s.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,n),[eY,ex,ep.Z9.fromClass(function(){function e(t){(0,es._)(this,e);var r=this;this.abortControllers=[],this.getSymbolMap=(0,ew.A)((0,el._)(function(){var e,i,o;return(0,ec.YH)(this,function(a){switch(a.label){case 0:if(!(e=t.state.facet(eh.Md)))return[2];return r.abortControllers=[],[4,Promise.all(n.map(function(n){if(!(0,ey.A)(n).isDocumentSymbolSupported)return null;var t=new AbortController;return r.abortControllers.push(t),function(e,n,t){return eA.apply(this,arguments)}(n,e,t.signal)}))];case 1:return i=a.sent(),t.dispatch({effects:eS.of(null!==(o=i.find(Boolean))&&void 0!==o?o:null)}),[2]}})}),{wait:200}),eb(t.state)&&this.getSymbolMap().catch(eC)}var t=e.prototype;return t.update=function(e){(0,ef.$H)(e,"doc",em.q)&&eb(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(eC))},t.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},e}())]];return(0,t4.isMobile)()||p.push([rG,rO,rH,(0,t8.yU)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,t7.R)(e)?rN:""},addToOptions:[{render:function(e,n){if(!(0,t7.R)(n))return null;var t=(0,tt.J)((0,v.Y)("div",{className:rW,children:(0,v.Y)(rL.Ay,{size:"inherit",shortcut:{key:""}})}));return t.style.display="inline-flex",t},position:200}],override:n.map(function(e){return(0,t8.Ar)(["LineComment","BlockComment"],function(e){var n=.01>Math.random(),t=0,r=function(t,r,i){if(n&&r){var o=e.getLanguageId(r);return tz.vF.info("lsp:autocomplete:".concat(t),(0,f._)({languageId:o},i)),(0,eZ.u4)(eZ.AZ.LSP_COMPLETION_USED,(0,f._)({type:t,sampleRate:.01},i))}};function i(){return(i=(0,el._)(function(n){var i,o,a,l,s,c,u,d,p,w;return(0,ec.YH)(this,function(y){switch(y.label){case 0:if(!(o=e.getServerCapabilities())||!(null==o?void 0:o.completionProvider)||!(a=function(e,n){var t=e.state,r=e.pos;if(e.explicit)return{triggerKind:t3.CompletionTriggerKind.Invoked};var i=t.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==n?void 0:n.includes(o))?{triggerKind:t3.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:t3.CompletionTriggerKind.Invoked}:null}(n,(null==o?void 0:null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[])))return[2,null];if(t&&e.notify.cancelRequest(t),!(l=n.state.facet(eh.Md)))throw Error("path not found");return t=e.generateId(),s=n.state.doc,[4,e.request.completion(l,(0,ev.Z3)(s,n.pos),a,{id:t})];case 1:if("error"in(c=y.sent())||(u=c.result,n.aborted||!u))return[2,null];return d=Array.isArray(u)?u:u.items,w=Array.isArray(u)?{}:null!==(p=u.itemDefaults)&&void 0!==p?p:{},[2,function(e){for(var n,t=e.context,r=e.items,i=e.itemDefaults,o=e.client,a=e.trackCompletion,l=e.startingDoc,s=null,c=(E=r.filter(function(e){return!!e.label}),R=["label","kind"],I=new Set,E.filter(function(e){var n=R.map(function(n){return e[n]}).join("");return!I.has(n)&&(I.add(n),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),u=((c=c.sort(function(e,n){return e.sortText<n.sortText?-1:e.sortText>n.sortText?1:0})).length%2?c.length-1:c.length)/2,d=0;d<=u;d++){if(0===d&&c[u]){c[u].boost=0;continue}var p=c[u-d];if(p){var w=c[u-d+1],y=w.sortText,b=w.boost,S=void 0===b?0:b;p.boost=p.sortText===y?S:S+1}var Y=c[u+d];if(Y){var A=c[u+d-1],C=A.sortText,x=A.boost,_=void 0===x?0:x;Y.boost=Y.sortText===C?_:_-1}}var k=null!==(P=null===(F=c[0])||void 0===F?void 0:F.boost)&&void 0!==P?P:0,D=null!==(L=null===(T=c[c.length-1])||void 0===T?void 0:T.boost)&&void 0!==L?L:0;if(k>99||D<-99)for(var E,R,I,F,T,P,L,U,N=99/Math.max(Math.abs(k),Math.abs(D)),O=0;O<c.length;O++)c[O].boost=(null!==(U=c[O].boost)&&void 0!==U?U:0)*N;var M=(0,m._)(function(e){var n=Object.create(null),t=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value.filterText;n[s[0]]=!0;for(var c=1;c<s.length;c++)t[s[c]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=rz(n)+rz(t)+"*$";return[RegExp("^"+u),new RegExp(u)]}(c),2),B=M[0],H=M[1],z=t.matchBefore(H),W=t.pos;function G(e,n){var t,r,c,u,d,p,w,y,b,S,Y,A,C,x;return b=n.state.facet(eh.Md),S=null!==(d=(0,t6.A)(n.state))&&void 0!==d?d:"unknown",Y=(0,ey.A)(o),A=e.item,C=e.boost,x={label:A.label,detail:Y.isCompletionLabelDetailsSupported?null===(t=A.labelDetails)||void 0===t?void 0:t.description:A.detail,type:null===(r=Object.entries(eE.CompletionItemKind).find(function(e){var n=(0,m._)(e,2),t=(n[0],n[1]);return A.kind===t}))||void 0===r?void 0:r[0].toLowerCase(),commitCharacters:n.state.facet(t9)?null!==(y=null!==(w=null!==(p=A.commitCharacters)&&void 0!==p?p:i.commitCharacters)&&void 0!==w?w:null===(u=o.getServerCapabilities())||void 0===u?void 0:null===(c=u.completionProvider)||void 0===c?void 0:c.allCommitCharacters)&&void 0!==y?y:[]:void 0,boost:C},rT.set(x,e),x.apply=function(n,t,r,i){var c=function(e){var t=u?l:n.state.doc,r={from:(0,ev.TU)(t,e.start),to:(0,ev.TU)(t,e.end)};return u&&(r.from=u.mapPos(r.from),r.to=u.mapPos(r.to)),r};if(b){var u=s,d=null!==(v=null===(p=e.resolved)||void 0===p?void 0:p.additionalTextEdits)&&void 0!==v?v:A.additionalTextEdits;if(A.insertTextFormat===eE.InsertTextFormat.Snippet){var p,v,w,y,Y,C=null;d&&(C={changes:d.map(function(e){return(0,h._)((0,f._)({},c(e.range)),{insert:e.newText})})});var x=new rg(null!==(Y=null!==(y=null===(w=A.textEdit)||void 0===w?void 0:w.newText)&&void 0!==y?y:A.insertText)&&void 0!==Y?Y:A.label);if(A.textEdit&&"range"in A.textEdit){var _=i,k=c(A.textEdit.range);r=k.from,i=Math.max(i=k.to,_)}var D=C?[C,x.apply({view:n,from:r,to:i,path:b,completion:t})]:[x.apply({view:n,from:r,to:i,path:b,completion:t})];n.dispatch.apply(n,(0,g._)(D)),a("completion-accepted",b,{language:S,completionKind:A.kind,insertTextFormat:A.insertTextFormat});return}var E=[];if(A.textEdit){if(!("range"in A.textEdit))return;var R=c(A.textEdit.range);E.push((0,h._)((0,f._)({},R),{to:Math.max(R.to,n.state.selection.main.to),insert:A.textEdit.newText}))}else{var I=A.insertText||A.label,F=n.state.wordAt(i);F&&F.to>i&&I.includes(n.state.doc.sliceString(i,F.to))&&(i=F.to),E.push({from:r,to:i,insert:I})}var T=(0,m._)(E,1)[0],P="";null==d||d.forEach(function(e){var n=c(e.range);"from"in T&&n.from===T.from&&(P=e.newText),E.push((0,h._)((0,f._)({},n),{insert:e.newText}))});var L=i-r;n.state.selection.ranges.forEach(function(e){if(e!==n.state.selection.main){if(!("insert"in T)||!T.insert)throw Error("Expected insert in mainChange");var t=e.from-L,r=P+T.insert;E.push({from:t,to:e.to,insert:r})}});var U=ea.VR.of(E.map(function(e){return"from"in e&&void 0!==e.to?(0,h._)((0,f._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),n.state.doc.length);a("completion-accepted",b,{language:S,completionKind:A.kind,insertTextFormat:A.insertTextFormat}),n.dispatch({annotations:t8.rK.of(t),changes:U,selection:ea.OF.create(n.state.selection.ranges.map(function(e){return e.map(U,0)}),n.state.selection.mainIndex)}),A.command&&o.request.executeCommand(A.command.command,A.command.arguments)}},Y.isCompletionItemResolveSupported&&(x.info=(0,el._)(function(){var n,t,r,i,l,s,c;return(0,ec.YH)(this,function(u){switch(u.label){case 0:if(t=null!==(n=e.resolved)&&void 0!==n?n:null)return[3,2];return[4,o.request.resolveCompletionItem(A)];case 1:if(t="result"in(r=u.sent())?r.result:null,r.cancelled||null===t)return[2,null];e.resolved=t,u.label=2;case 2:if(i=Math.floor(0x7fffffff*Math.random()),l=[],b&&t.detail&&t.detail!==A.detail&&t.detail!==A.label&&(c=["```"+((s=b.lastIndexOf("."))>=0?b.slice(s+1):"md"),t.detail,"```"].join("\n"),l.push((0,v.Y)(rF,{className:t.documentation?"lsp-completion-detail":void 0,content:{value:c,kind:"markdown"}},"".concat(i,"-detail")))),t.documentation&&l.push((0,v.Y)(rF,{content:t.documentation},"".concat(i,"-documentation"))),0===l.length)return[2,null];return a("resolution-presented",b,{language:S,resolutionSource:"request",completionKind:A.kind}),[2,{dom:(0,tt.J)((0,v.Y)("div",{children:l}))}]}})})),x}return z&&(W=z.from),c.length&&a("completion-options-presented",t.state.facet(eh.Md),{language:null!==(n=(0,t6.A)(t.state))&&void 0!==n?n:"unknown"}),{from:W,options:c.map(function(e){return G(e,t)}),validFor:B,update:function(e,n,t,r){return(0,h._)((0,f._)({},e),{options:e.options.map(function(e){var n,t=null!==(n=rT.get(e))&&void 0!==n?n:null;return t?G(t,r):e})})},map:function(e,n){return s=s?s.composeDesc(n):n,e}}}({context:n,startingDoc:s,items:d,itemDefaults:w,client:e,trackCompletion:r})]}})})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(e))})})],function(e){var n={current:new Map};function t(){return(t=(0,el._)(function(t,i){var o,a,l,s,c,u;return(0,ec.YH)(this,function(d){switch(d.label){case 0:if(!(a=t.facet(eh.Md))||(l=t.field(r,!1),s=t.field(ih,!1),!(c=e.filter(function(e){var n,t,r,i=null!==(r=null===(t=e.getServerCapabilities())||void 0===t?void 0:null===(n=t.signatureHelpProvider)||void 0===n?void 0:n.triggerCharacters)&&void 0!==r?r:[];return!!(i.length&&(l||s&&i.includes(s)))})).length))return[2,null];return[4,function(e,n,t,r,i){return iv.apply(this,arguments)}(t,i,c,a,n)];case 1:if(!(null==(u=d.sent())?void 0:null===(o=u.signatures)||void 0===o?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=ea.sU.define({create:function(){return null},update:function(e,n){return n.isUserEvent("select.pointer")?null:(e&&n.newSelection.main.from!==e.pos&&(e=(0,h._)((0,f._)({},e),{pos:n.newSelection.main.from})),(0,eg.C)(n,id.effect,function(t){var r=t.value;e=r?{pos:n.newSelection.main.from,help:r,index:0}:null}),(0,eg.C)(n,ip,function(n){var t=n.value;if(e){var r=e.help.signatures.length,i=(r+e.index+t)%r;e=i>=e.help.signatures.length||i<0?null:(0,h._)((0,f._)({},e),{index:i})}}),e)},provide:function(e){var n=function(n){var t=n.state.field(e);if(!t)throw Error("expected nonnull field");var r=im.create({help:t.help,index:t.index});return{dom:r,update:function(n){im.update(r,function(r){var i=n.state.field(e);return i&&i!==t?{help:i.help,index:i.index}:r})}}};return ep.DK.compute([e],function(t){var r=t.field(e);return r?{pos:r.pos,create:n,above:!0}:null})}}),i=ep.Z9.define(function(){var n,r=U()((n=(0,el._)(function(e){var n,r,i;return(0,ec.YH)(this,function(o){switch(o.label){case 0:if(!(n=e.state.selection.main).empty)return[3,2];return r=e.state.field(id.state,!1),[4,function(e,n){return t.apply(this,arguments)}(e.state,n.from)];case 1:(i=o.sent())&&!r&&(0,t8.N)(e),e.dispatch({effects:id.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),0);return{update:function(n){e.some(function(e){return(0,ey.A)(e).isSignatureHelpSupported})&&n.selectionSet&&n.state.selection.main.empty&&r(n.view)}}});function o(e,n){var t=e.state.field(id.state,!1);return"active"!==(0,t8.DH)(e.state)&&null!=t&&("navigate"!==n||t.signatures.length>1)}var a=function(e){return function(n){return!!o(n,"navigate")&&(n.dispatch({effects:ip.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:id.effect.of(null)}),!0)}}];return[r,id.state,ih,i,ea.Nb.high(ep.w4.of(l))]}(n),(s=function(e){var n,t=null;return(0,ep.Ux)((n=(0,el._)(function(n,r){var i,o,a,l,s,c;return(0,ec.YH)(this,function(u){switch(u.label){case 0:if(n.state.facet(is.f)||!(0,ey.A)(e).isHoverSupported||!(i=n.state.facet(eh.Md)))return[2,null];o=(0,ev.Z3)(n.state.doc,r);try{a=n.state.wordAt(r)}catch(e){return[2,null]}if(t){if(t.from===(null==a?void 0:a.from)&&t.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(t.id)}return t={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(s=u.sent(),t=null,"error"in s||null===(c=s.result))return[2,null];return[2,function(e){var n,t,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)n=(0,ev.TU)(l,r.range.start),t=(0,ev.TU)(l,r.range.end),a=l.sliceString(n,t);else if(t=void 0,(n=o)<=i.doc.length){var s=i.wordAt(n);s?(a=l.sliceString(s.from,s.to),n=Math.min(n,s.from),t=s.to):a=l.sliceString(n,n+1)}return{pos:n,end:t,create:function(e){var n=(0,tt.J)((0,v.Y)(il,{content:r.contents,textHovered:a}));return n.classList.add("hover-tooltip"),n.style.padding="0",{dom:n,mount:function(){!function(e,n){n.forEach(function(n){return setTimeout(e,n)})}(function(){(0,ep.Pq)(e)},[0,50,200,1e3])}}},above:!0}}({hover:c,offset:r,state:n.state})]}})}),function(e,t){return n.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(ea.ZX.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(is.f))},hoverTime:0})},[ea.Nb.highest(n.map(function(e){return s(e)})),ep.Lz.domEventObservers({mousedown:function(e,n){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,ep.n6)(n.state)&&n.dispatch({effects:ep.vo})},keydown:function(e,n){"Escape"===e.key&&(0,ep.n6)(n.state)&&n.dispatch({effects:ep.vo})},scroll:function(e,n){(0,ep.n6)(n.state)&&n.dispatch({effects:ep.vo})}})]),(0,rV.Qb)(n,e,r),(0,ic.Of)({lspClients:n}),(c=ea.Pe.define(),u=ea.Pe.define(),[ep.Lz.updateListener.of((d=(0,el._)(function(e){var t,r,i,o,a,l,s,d,p,m,v,w,y,b,S,Y,A,C,x,_,k,D,E,R,I,F,T,P,L,U,N,O,M;return(0,ec.YH)(this,function(B){switch(B.label){case 0:if(!n.some(function(e){var n=(0,ey.A)(e);return n.isFindReferencesSupported||n.isFindDefinitionSupported}))return[2];t=null,r=!0,i=!1,o=void 0;try{for(a=e.transactions[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){s=l.value,d=!0,p=!1,m=void 0;try{for(v=s.effects[Symbol.iterator]();!(d=(w=v.next()).done);d=!0)(y=w.value).is(rZ.x)&&(t=y.value)}catch(e){p=!0,m=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw m}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(!t||!(b=e.view.state.facet(eh.Md)))return[2];S=e.state.doc,Y=(0,ev.Z3)(S,t),A=[],C=!0,x=!1,_=void 0;try{for(k=function(){var e=E.value,n=(0,ey.A)(e);n.isFindDefinitionSupported&&A.push(e.request.findDefinitions(b,Y).then(function(n){return{client:e,response:n,type:"definition"}})),n.isFindReferencesSupported&&A.push(e.request.findReferences(b,Y,{includeDeclaration:!1}).then(function(n){return{client:e,response:n,type:"references"}}))},D=n[Symbol.iterator]();!(C=(E=D.next()).done);C=!0)k()}catch(e){x=!0,_=e}finally{try{C||null==D.return||D.return()}finally{if(x)throw _}}return R=Promise.all(A),(0,rj.o8)(e.view,R),[4,R];case 1:I=B.sent(),F=[],T=[],P=!0,L=!1,U=void 0;try{for(N=function(){var e=M.value,n=e.client,t=e.response,r=e.type;if("error"in t)throw Error("Something went wrong fetching references: ".concat(t.error.message));var i=(0,it.U)(t.result);if(!i)return"continue";"definition"===r&&F.push.apply(F,(0,g._)(i.map(function(e){return(0,h._)((0,f._)({},e),{path:n.documentUriToPath(e.uri)})}))),"references"===r&&T.push.apply(T,(0,g._)(i.map(function(e){return(0,h._)((0,f._)({},e),{path:n.documentUriToPath(e.uri)})})))},O=I[Symbol.iterator]();!(P=(M=O.next()).done);P=!0)N()}catch(e){L=!0,U=e}finally{try{P||null==O.return||O.return()}finally{if(L)throw U}}if(!F.length&&!T.length)return(0,nO.A)(e.view,{message:"No references found",offset:t}),e.view.dispatch({effects:u.of(null)}),[2];return e.view.dispatch({effects:c.of({references:T,definitions:F})}),[2]}})}),function(e){return d.apply(this,arguments)})),ea.sU.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.is(c)&&(t=s.value),s.is(u)&&(t=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return[ep.w4.of([{key:"Escape",run:function(n){return!!n.state.field(e)&&(n.dispatch({effects:u.of(null)}),!0)}}]),ep.DK.compute([e],function(n){var t=n.field(e),r=n.facet(eh.Md);if(!t)return null;var i=n.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var n=(0,tt.J)((0,v.Y)("div",{children:(0,v.Y)(r6,(0,h._)((0,f._)({},t),{onClose:function(){e.dispatch({effects:u.of(null)})},jumpToPosition:function(n){if(n.path!==r){(0,ir.Tq)(e.state,{path:n,secondary:!1});return}var t=n.line,i=n.col;(0,t2.$)({view:e,line:t,col:i}),e.focus()}}))}));return n.classList.add("replit-tooltip"),n.style.padding="0",n.style.overflow="scroll",{dom:n}}}})]}})]),(0,iu.q)(e,n,i)),p}(q,K,j,Q,X))},[K,j,q,Q,ee,X]),et=(0,w.useMemo)(function(){return new ef.L(function(){return em.X.of(K.map(function(e){return(0,ey.A)(e)}))})},[K]),(0,w.useEffect)(function(){return!K.length||ee?en.set(null):(0,iT.xW)(K.map(function(e){return e.onServerCapabilitiesChange(function(){et.set(em.X.of(K.map(function(e){return(0,ey.A)(e)})))})}))},[et,K,en,ee]),[et.extension,en.extension,iP.use($.acceptSuggestionOnCommitCharacter),iL.use($.codeActionsOnSave),iU.use($.codeIntelligence),iF.use($.semanticTokens&&J?K:null)]),nQ=(ei=(er={debuggest:nA,filePath:np}).debuggest,eo=er.filePath,ed=(eu=(0,nL.A)()).fs,e_=eu.container,ek=(0,nP.A)(ei.mainClient),eR=(eD=(0,m._)((0,w.useState)(null),2))[0],eF=eD[1],(0,w.useEffect)(function(){var e;return(e=(0,el._)(function(){var e,n;return(0,ec.YH)(this,function(t){switch(t.label){case 0:return[4,e_.exec("printenv","REPL_HOME")];case 1:return(e=t.sent()).error||!e.output?eF(null):(n=e.output.trim(),eF(nI().join(n,eo))),[2]}})}),function(){return e.apply(this,arguments)})(),function(){}},[e_,eo]),nN.use(ek,eR,ed));(0,t2.A)({filePath:np,view:nF,isLoading:nZ,deeplink:ng,onDeeplinkUpdated:nv});var nX=(eP=(eT={view:nF,filePath:np}).view,eL=eT.filePath,eU=(0,nL.A)().fs,(0,m._)((0,lh.H)({accept:[lg.N.Code,lm.FILE],drop:function(e,n){if(eP){var t=n.getClientOffset(),r=t?eP.posAtCoords(t):null;if(null!==r){var i=function(e){eP.focus(),eP.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===lg.N.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var s,c=e.files[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;eL&&(0,E.e$)(eL)&&(0,lv.U)(u,eU,eL).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}}}}),2)[1]),n0=(0,n7.A)({filePath:np}),n1=(eO=(eN={view:nF,filePath:np,isLoading:nZ,enable:nz}).view,eM=eN.filePath,eB=eN.isLoading,eH=eN.enable,ez=(0,st.Ln)(),(0,w.useEffect)(function(){eO&&ez&&eO.dispatch({effects:[lF.Ky.of(ez),lF.Mt.of(ez)]})},[eO,ez]),eW=(0,sb.D)().theme,eV=(eG=(0,m._)((0,w.useState)([eI.LU.accentPrimaryDimmest,eI.LU.accentPrimaryDimmer]),2))[0],ej=eG[1],(0,w.useEffect)(function(){var e=lI(eW.values.global.accentPrimaryDimmest);ej(["rgba(".concat(e.join(","),", 0.5)"),eI.LU.accentPrimaryDimmer])},[eW]),eq=lL(eM,eB,!0,eH),eK=(0,nL.A)().fs,eJ=(e$=(0,lR.ah)(eM)).contentRef,eQ=e$.loadedFile,eX=e$.transformSelectionRef,(0,w.useEffect)(function(){var e=!1,n=eX.current,t=eJ.current;if(eQ&&n&&t&&!eB&&eO){var r=Object.values(eq);if(0===r.length){eO.dispatch({effects:lF.IF.of({})});return}Promise.all(r.map(function(e){return(0,lR.gu)({anchor:e,version:eK.getOTVersion(eM),transformSelection:n,content:t})})).then(function(n){if(!e){var t=n.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,f._)({},e.anchor,null==e?void 0:e.newSelection)});return eO.dispatch({effects:lF.IF.of(t.reduce(function(e,n){return e[n.id]=n,e},{}))}),function(){e=!0,eO&&eO.dispatch({effects:lF.IF.of({})})}}})}},[eq,eO,eQ,eK,eX,eJ,eM,eB]),sY.use(eH,eV));e2=(e0={view:nF,filePath:np}).view,e5=e0.filePath,e4=(0,nD.useRouter)(),e3=(0,F.Po)(e4),e8=(0,w.useRef)({revisionId:(0,iw.A)(),textEditorState:lr(e5),hasGhostwriterSuggestion:!1}),e7=(0,w.useRef)(e5),e6=null!==(e1=null==e2?void 0:e2.plugin(D.Pb))&&void 0!==e1?e1:null,(0,w.useEffect)(function(){if(e3&&e2&&e6&&!e6.destroyed){var e=function(e){lo(e8.current,e.messageId)},n=function(n){lc(e5,e7.current,e2,e8.current,n)?e(n):(0,le.Cf)(n.messageId)},t=function(n){lc(e5,e7.current,e2,e8.current,n)?e(n):(0,le.Cf)(n.messageId)},r=function(r){try{var i=r.data;if(!(0,lt.F5)(i)||i.protocolVersion!==lt.V2)return;var o=i.payload;i.messageDirection===lt.SU.TO_NATIVE&&(0,lt.Yf)(o)&&(e7.current=o.activePaneFilePath),(0,le.Vd)(r,function(r){var o=r.type;switch(o){case lt.tF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case lt.tF.REQUEST_SET_SELECTION:case lt.tF.REQUEST_REPLACE_SELECTION:case lt.tF.REQUEST_SET_TEXT:case lt.tF.REQUEST_INSERT_TEXT:case lt.tF.REQUEST_PASTE_TEXT:n(i);break;case lt.tF.TEXT_EDITOR_REQUEST_ACTION:t(i);break;default:(0,a9.A)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",r),e8.current={revisionId:(0,iw.A)(),textEditorState:li(e5,e2),hasGhostwriterSuggestion:(0,t7.R)(e2.state)},lo(e8.current);var i=!1,o=!1,a=e6.bind({changed:function(e){var n;return e.docChanged?(i=!0,!0):!!e.selectionSet||!!e.focusChanged||(null===(n=e8.current)||void 0===n?void 0:n.hasGhostwriterSuggestion)!==(0,t7.R)(e.state)},callback:function(){var e=i?(0,iw.A)():e8.current.revisionId;i=!1,e8.current={revisionId:e,textEditorState:li(e5,e2),hasGhostwriterSuggestion:(0,t7.R)(e2.state)},lo(e8.current)},destroy:function(){window.removeEventListener("message",r),o||(la(e5),o=!0)}});return function(){window.removeEventListener("message",r),a(),o||(la(e5),o=!0)}}},[e2,e5,e3,e6]);var n5=(e9=(0,a7.j)({path:np}),a6.use(e9)),n9=sE(np).isUnmerged,te=(nn=(ne={filePath:np,enableConflicts:!0===n9}).filePath,nt=ne.enableConflicts,nr=(0,t0._P)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),ni=(0,nL.A)().git,t1.use(ni,void 0===nn?null:nn,!(void 0!==nt&&nt)||!nr)),tn=(0,F.m5)(),tr=ay.use(tn),ti=oz.vL.use(nY),to=af.use(tn),ta=aR.use(n_.rulers),tl=(0,sb.D)(),ts=iB.use(tn,n_.minimapDisplay,tl),tc=aT.use(tn,tl),tp=(0,t0._P)({controlName:"flag-draft-buffers"}),tf=x.EI.use(nY,nx,tp,n_.formatOnSave),th=(no={filePath:np},na=(0,nL.A)().container,nl=(0,n2.I)(),ns=(0,R.gc)("codeIntelligence").preferences,nc=(0,n4.A)(no.filePath),nu=(0,n3.A)(nc),n8.use(nl,na,nc,nu,ns.codeIntelligence,no.filePath)),tm=nJ.use(n_.showLeadingWhitespace,n_.showEnclosedWhitespace,n_.showTrailingWhitespace,n_.showSelectedWhitespace),tg=(0,nB.T)({analyticsSurface:"workspace_editor"}),tv=(0,ld.MC)({path:np}),tw=(0,ld.o0)({path:np}),ty=(0,ld.r9)({path:np}),tb=(0,w.useCallback)(function(){nF&&tv(nF,"shortcut")},[nF,tv]),tS=(0,lf.U)({isMobile:tn,generateCode:tv,filePath:np}),tY=(0,w.useCallback)(function(){nT({type:"ghostwriterChat"})},[nT]),tA=(0,td.m)({onGenerateCode:tb,onReplyInChat:tY}),tC=(0,lE.EF)(),tx=tC.onContextMenu,t_=tC.closeContextMenu,tk=tC.openContextMenu,tD=tC.isVisible,tE=(0,w.useCallback)(function(e){nF&&(0,ep.TS)(nF,e,"context-menu")&&(t_(),e.stopPropagation(),e.preventDefault())},[t_,nF]),tR=(0,ld.B6)({path:np,view:nF}),tI=(0,w.useCallback)(function(e){tx(e,{command:tR(),width:275,onKeyDownHandler:tE})},[tR,tx,tE]),tF=(0,w.useCallback)(function(e,n){tk({target:e,command:[tR(),n],width:275,onKeyDownHandler:tE})},[tR,tE,tk]),tT=ld.F0.use(tn,tD,tI),tP=lp.a.use(tF),tL=(0,w.useCallback)(function(e){tk({target:{x:e.right-275,y:e.top},width:275,command:tR(),onKeyDownHandler:tE})},[tR,tE,tk]),tU=(0,lk.C)({editCode:ty,explainCode:tw,generateCode:tv,onMoreClick:tL}),tN=lC(),tO=lx(),tM=l_(np),tB=(nd=(0,au.g)(),ad.use(nd)),tH=n6.t7.use(n_.codeRepairHighlight),tW=tu.use(nb),tG=sD.use(),tV=(0,ir.tT)(ny),tj=aI.o.use(nY,nx,tp),tZ=nM.use(nm);return(0,v.Y)("div",{css:lD.mV,"data-cy":nZ?"loading-workspace-cm-editor":"workspace-cm-editor-".concat(np),children:(0,v.Y)(ah.Ay,{ref:nR,elementRef:nX,css:lD.$1,filePath:np,hideTooltips:nf,readOnly:nh,extensions:[tT,tP,nq,nQ,nK,n$,tS,tG,tr,nH,to,te,tc,ts,oz.yG,ti,ob,tA,tB,a4,ta,tm,tf,th,_.OR,n5,n0,n1,a$,aC,tn?[]:tU,nV,t5.f,tV,tj,tg,tO&&tN&&tM?tH:[],tO&&!tN&&tM?tW:[],tZ],onException:function(e){var n,t={filePath:np,cursorPosition:JSON.stringify(null==nW?void 0:null===(n=nW.get(nw.J0))||void 0===n?void 0:n.position),fileVersion:nG({filePath:np})};if(nF){var r=nF.plugin(ob),i=null==r?void 0:r.logs();null==r||r.flush(),t.domText=nF.contentDOM.innerText,t.keystrokes=JSON.stringify(i),t.selection=JSON.stringify(nF.state.selection.main.toJSON()),t.updateDoc=nF.state.doc.sliceString(0)}(0,lu.Q)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:t})},noHistory:!0})})}var sI=t(72769),sF=t(20150),sT=t(16667),sP=t(82182),sL=t(32578),sU=t(51297),sN=t(72653),sO=t(2301),sM=t(73128),sB=(0,S.eU)(0),sH=(0,S.eU)(new Map([["normal",[]],["compact",[]]])),sz=(0,S.eU)(null,function(e,n,t){var r=e(sj);n(sH,function(e){return(0,sU.jM)(e,function(e){var n=e.get(r);if(!n)throw Error("Expect width for: "+r);n[t.index]=t.width})})}),sW=(0,S.eU)(null,function(e,n,t){n(sH,function(e){return(0,sU.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(0,m._)(o.value,2)[1].slice(0,t)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})}),sG=(0,S.eU)(function(e){var n=new Map([["normal",0],["compact",0]]),t=!0,r=!1,i=void 0;try{for(var o,a=e(sH)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,m._)(o.value,2),s=l[0],c=l[1],u=0,d=!0,p=!1,f=void 0;try{for(var h,g=c[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var v=h.value;void 0!==v&&(u+=v)}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}n.set(s,u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),sV=(0,S.eU)(function(e){if("normal"===e(sj))return null;var n=e(sH).get("compact");if(!n)return null;var t=e(sB)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(void 0!==c){if((t-=c)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return null}),sj=(0,S.eU)(function(e){var n,t=e(sB);return(null!==(n=e(sG).get("normal"))&&void 0!==n?n:0)>t?"compact":"normal"}),sZ=(0,z.x)({item:[W.wp.viewStyle,eQ.b.listItem,W.wp.p(6),W.wp.rowWithGap(4),W.wp.align.center,{fontSize:eI.LU.fontSizeSmall}]});function sq(e){var n=(0,m._)((0,w.useState)(null),2),t=n[0],r=n[1],i=null!==t&&(null===(c=e.items[t])||void 0===c?void 0:c.popover);if(i)return(0,v.Y)(v.FK,{children:i});var o=[],a=!0,l=!1,s=void 0;try{for(var c,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;p.onClick||p.popover||o.push(p.key)}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}return(0,v.Y)(sF.W1,{disabledKeys:o,onAction:function(n){var t=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;if(s.key===n){if(s.onClick){s.onClick();break}s.popover&&r(e.items.indexOf(s));break}}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,v.Y)(sF.Dr,{id:e.key,css:sZ.item,children:(0,v.Y)(sK.Provider,{value:function(){},children:(0,w.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var sK=(0,w.createContext)(function(e){});function s$(){return(0,w.useContext)(sK)}var sJ=(0,z.x)({button:[W.wp.viewStyle,W.wp.reset.button,W.wp.rowWithGap(4),W.wp.center,W.wp.color.foregroundDimmest,W.wp.hover([W.wp.color.foregroundDefault]),W.wp.height("100%"),{fontSize:12,"&:has(*)":[W.wp.px(4),eQ.b.nofill,W.wp.borderRadius(0)]}],tooltip:[W.wp.backgroundColor.backgroundHighest,W.wp.borderRadius(4),W.wp.color.foregroundDimmer,W.wp.p(4),W.wp.border({color:eI.LU.outlineDefault}),{fontSize:12}]});function sQ(e){var n=(0,aN.A)(function(n){return e.onWidth(n.width)}),t=(0,m._)((0,w.useState)(null),2),r=t[0],i=t[1];return(0,v.Y)(G.S,{innerRef:n,children:(0,v.FD)(sT.k$,{isDisabled:null==r||e.hidden,children:[(0,v.Y)(sP.$,{isDisabled:e.isDisabled||e.hidden,css:sJ.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e)},children:(0,v.Y)(sK.Provider,{value:i,children:e.children})}),(0,v.Y)(sT.m_,{placement:"top",offset:8,css:sJ.tooltip,children:r})]})})}var sX=(0,z.x)({root:[W.wp.flex.growAndShrink(1),W.wp.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[W.wp.flex.growAndShrink(1)],moreButton:[{width:24},W.wp.reset.button,W.wp.center,eQ.b.nofill,W.wp.height("100%"),W.wp.position.absolute,W.wp.right(0),W.wp.top(0)]});function s0(e){var n=e.left.filter(Boolean),t=e.right.filter(Boolean),r=(0,m._)((0,w.useState)(function(){return(0,S.y$)()}),1)[0],i=(0,sN.md)(sj,{store:r}),o=(0,sN.md)(sV,{store:r}),a=(0,sN.Xr)(sz,{store:r}),l=(0,sN.Xr)(sB,{store:r}),s=(0,aN.A)(function(e){return l(e.width)}),c=n.length-1,u=(0,g._)(n).concat((0,g._)(t)),d=(0,sN.Xr)(sW,{store:r}),p=u.length;return(0,w.useEffect)(function(){d(p)},[d,p]),(0,v.Y)(v.FK,{children:(0,v.FD)(G.S,{className:e.className,css:sX.root,row:!0,innerRef:s,children:[u.map(function(e,n){return e.popover?(0,v.FD)(w.Fragment,{children:[(0,v.FD)(sL.zM,{children:[(0,v.Y)(sQ,{onWidth:function(e){return a({index:n,width:e})},hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,w.cloneElement)(e.item,{presentation:i})}),(0,v.Y)(sO.g_,{placement:n<=c?"top left":"top right",children:e.popover})]}),n===c?(0,v.Y)(G.S,{css:sX.middle}):null]},e.key):(0,v.FD)(w.Fragment,{children:[(0,v.Y)(sQ,{onWidth:function(e){return a({index:n,width:e})},onClick:e.onClick,hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,w.cloneElement)(e.item,{presentation:i})}),n===c?(0,v.Y)(G.S,{css:sX.middle}):null]},e.key+n)}),null===o?null:(0,v.FD)(sL.zM,{children:[(0,v.Y)(sP.$,{css:sX.moreButton,children:(0,v.Y)(sM.A,{size:12})}),(0,v.Y)(sO.g_,{placement:"top right",children:(0,v.Y)(sq,{items:u.slice(o)})})]})]})})}var s1=t(47303),s2=t(25877),s5=t(90365);function s4(e){var n=e.presentation,t=(0,R.gc)("codeSuggestion").preferences.codeSuggestion,r=s$();return(0,w.useEffect)(function(){r("compact"===n?"AI":null)},[r,n]),(0,v.FD)(v.FK,{children:[(0,v.Y)(rU.A,{size:12,color:t?eI.LU.blurpleDefault:void 0}),"compact"===n?null:(0,v.Y)(G.S,{children:"AI"})]})}var s3=(0,z.x)({root:[W.wp.p(8),W.wp.maxWidth(260)],featureHeader:[W.wp.rowWithGap(8),W.wp.align.center],featureTitle:[W.wp.rowWithGap(4),W.wp.align.center,W.wp.flex.growAndShrink(1),W.wp.fontWeight.medium],enableAutocomplete:[W.wp.rowWithGap(4),W.wp.align.center],divider:[W.wp.my(8)]});function s8(e){var n=e.activeFile,t=(0,w.useId)(),r=(0,R.gc)("codeSuggestion","codeRepairHighlight"),i=r.preferences,o=i.codeSuggestion,a=i.codeRepairHighlight,l=r.update,s=lC(),c=lx(),u=l_(n);return(0,v.FD)(G.S,{css:s3.root,children:[c&&s&&u?(0,v.FD)(v.FK,{children:[(0,v.FD)(G.S,{css:s3.featureHeader,children:[(0,v.FD)(G.S,{css:s3.featureTitle,children:[(0,v.Y)(s5.A,{color:eI.LU.blurpleDefault}),(0,v.Y)(ti.EY,{children:"AI Code Repair"})]}),(0,v.FD)(G.S,{css:s3.enableAutocomplete,children:[(0,v.Y)(G.S,{tag:"label",htmlFor:t,children:(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",children:"Enable"})}),(0,v.Y)(s1.S,{id:t,checked:a,name:"Code Repair Highlighting",onChange:function(){return l({codeRepairHighlight:!a})}})]})]}),(0,v.Y)(G.S,{gap:8,children:(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",children:"Highlights language-related errors that AI can fix for you"})}),(0,v.Y)(s2.a,{css:s3.divider})]}):null,(0,v.FD)(G.S,{css:s3.featureHeader,children:[(0,v.FD)(G.S,{css:s3.featureTitle,children:[(0,v.Y)(s5.A,{color:eI.LU.blurpleDefault}),(0,v.Y)(ti.EY,{children:"AI Autocomplete"})]}),(0,v.FD)(G.S,{css:s3.enableAutocomplete,children:[(0,v.Y)(G.S,{tag:"label",htmlFor:t,children:(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",children:"Enable"})}),(0,v.Y)(s1.S,{id:t,checked:o,name:"Code Complete",onChange:function(){return l({codeSuggestion:!o})}})]})]}),(0,v.FD)(G.S,{gap:8,children:[(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,v.FD)(G.S,{row:!0,gap:4,align:"center",children:[(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",children:"Press"}),(0,v.Y)(o2._y,{small:!0,keyCombo:"Tab"}),(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var s7=t(18131),s6=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(s6||{}),s9=(0,S.eU)(new Map),ce=(0,S.eU)(null,function(e,n,t,r){n(s9,function(e){return(0,sU.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,h._)((0,f._)({},n),{state:r}))})})}),cn=(0,S.eU)(null,function(e,n,t,r){n(s9,function(e){return(0,sU.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,h._)((0,f._)({},n),{health:r}))})})}),ct=(0,S.eU)(null,function(e,n,t,r){n(s9,function(e){return(0,sU.jM)(e,function(e){var i=new Set,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)!function(){var t,o=s.value;i.add(o.clientId),null===(t=e.get(o.clientId))||void 0===t||t.dispose(),e.set(o.clientId,{client:o,health:o.getServerHealth(),state:o.getServerState(),restart:function(){return r.restart(o.clientId)},dispose:(0,iT.xW)([o.onServerStateChange(function(e){return n(ce,o.clientId,e)}),o.onServerHealthChange(function(e){return n(cn,o.clientId,e)})])})}()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var u=!0,d=!1,p=void 0;try{for(var f,h=e.entries()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var g=(0,m._)(f.value,2),v=g[0],w=g[1].dispose;i.has(v)||(w(),e.delete(v))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}})})});function cr(e){switch(e){case 3:return 4;case 0:return 3;case 1:return 2;case 2:return 1;default:return 0}}function ci(e){return e.health===iy.A.STALLED?3:e.state===iy.b.INITIALIZING||e.state===iy.b.INITIALIZED&&e.health!==iy.A.READY?0:e.health===iy.A.READY?1:e.state===iy.b.EXITED?2:5}function co(e){return(0,sN.md)(e,{store:function(){var e=(0,w.useContext)(ca);if(!e)throw Error("Expected store in context");return e}()})}var ca=(0,w.createContext)(null);function cl(e){var n,t,r,i=(n=e.filePath,t=e.lspnix,r=(0,m._)((0,w.useState)(function(){return(0,S.y$)()}),1)[0],(0,w.useEffect)(function(){return t.onClient(n,function(e){return r.set(ct,e,t)})},[n,t,r]),r);return(0,v.Y)(ca.Provider,{value:i,children:e.children})}var cs=t(54858);function cc(e){return(0,v.Y)(j.Ay,(0,h._)((0,f._)({},e),{children:(0,v.Y)("path",{fill:eI.LU.foregroundDefault,d:"M8.25 4c-.764 0-1.407.125-1.932.394-.538.276-.905.68-1.143 1.15-.426.842-.425 1.904-.425 2.74v.09c0 .963-.017 1.666-.263 2.153a1.069 1.069 0 0 1-.49.492c-.248.127-.637.229-1.247.229a.75.75 0 0 0 0 1.5c.61 0 .999.101 1.248.229.235.12.383.283.49.492.245.486.262 1.19.262 2.153v.09c0 .835-.001 1.898.425 2.74.238.47.605.874 1.143 1.15.525.268 1.168.393 1.932.393a.75.75 0 0 0 0-1.5c-.61 0-.999-.1-1.248-.228a1.07 1.07 0 0 1-.489-.493c-.246-.486-.263-1.19-.263-2.152v-.09c0-.836.001-1.899-.424-2.74a2.587 2.587 0 0 0-.614-.794c.263-.228.464-.498.614-.794.425-.842.425-1.904.424-2.74v-.09c0-.963.017-1.666.263-2.153.106-.209.254-.371.49-.492C7.25 5.6 7.64 5.5 8.25 5.5a.75.75 0 0 0 0-1.5ZM15.75 4a.75.75 0 0 0 0 1.5c.61 0 1 .101 1.248.229.236.12.384.283.49.492.246.487.263 1.19.263 2.153v.09c-.001.836-.002 1.898.424 2.74.15.296.351.566.614.794a2.586 2.586 0 0 0-.614.794c-.426.841-.425 1.904-.424 2.74v.09c0 .963-.017 1.666-.263 2.152a1.07 1.07 0 0 1-.49.493c-.249.127-.637.229-1.248.229a.75.75 0 1 0 0 1.5c.765 0 1.408-.126 1.932-.394.539-.276.906-.68 1.144-1.15.426-.842.425-1.905.425-2.74v-.09c0-.964.016-1.667.263-2.153a1.07 1.07 0 0 1 .489-.492c.249-.128.637-.23 1.248-.23a.75.75 0 0 0 0-1.5c-.61 0-1-.1-1.248-.228a1.069 1.069 0 0 1-.49-.492c-.246-.487-.262-1.19-.262-2.153v-.09c0-.836.001-1.898-.425-2.74a2.567 2.567 0 0 0-1.144-1.15C17.158 4.125 16.515 4 15.751 4Z"})}))}var cu=t(5721);function cd(e){return(0,v.FD)(j.Ay,(0,h._)((0,f._)({},e),{children:[(0,v.Y)("path",{fill:"#F66",fillRule:"evenodd",d:"M8.47 8.47a.75.75 0 0 1 1.06 0L12 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L13.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L12 13.06l-2.47 2.47a.75.75 0 0 1-1.06-1.06L10.94 12 8.47 9.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}),(0,v.Y)("path",{fill:eI.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function cp(e){return(0,v.FD)(j.Ay,(0,h._)((0,f._)({},e),{children:[(0,v.Y)("path",{fill:eI.LU.yellowStronger,fillRule:"evenodd",d:"M12 7.33c.368 0 .667.298.667.667v2.822l2.323-1.394a.667.667 0 1 1 .686 1.143l-2.38 1.429 2.38 1.428a.667.667 0 1 1-.686 1.143l-2.323-1.394v2.823a.667.667 0 0 1-1.334 0v-2.823L9.01 14.568a.667.667 0 0 1-.686-1.143l2.38-1.428-2.38-1.429a.667.667 0 0 1 .686-1.143l2.323 1.394V7.997c0-.369.299-.667.667-.667Z",clipRule:"evenodd"}),(0,v.Y)("path",{fill:eI.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function cf(e){var n=e.filePath,t=e.presentation,r=(0,H.fZ)(),i=(0,D.Vn)(r,eh.ql),o=(0,w.useMemo)(function(){var e,t,r,o;return(r=null===(e=nX.Jh.from(n))||void 0===e?void 0:e.name)?r:(r=null==i?void 0:null===(t=i.language)||void 0===t?void 0:t.name)&&r.length>0?(o=r).slice(0,1).toUpperCase()+o.slice(1).toLowerCase():(r=(0,E.an)(n),i)?r:"Plain Text"},[n,i]),a=(0,D.Vn)(r,nQ.lu),l=(0,m._)((0,w.useState)(a?{title:a.name,value:a.id}:void 0),2),s=l[0],c=l[1],u=(0,w.useRef)(!1);(0,w.useEffect)(function(){u.current||(null==s?void 0:s.value)===(null==a?void 0:a.id)||c(a?{title:a.name,value:a.id}:void 0)},[s,a]);var d=s$();(0,w.useEffect)(function(){d("Language support"+("compact"===t?" (".concat(o,")"):""))},[d,t,o]);var p=co((0,w.useMemo)(function(){return(0,S.eU)(function(e){var n;return null!==(n=Array.from(e(s9).values()).map(function(e){return ci(e)}).sort(function(e,n){return cr(n)-cr(e)})[0])&&void 0!==n?n:5})},[]));return(0,v.FD)(v.FK,{children:[(0,v.Y)(cS,{state:p}),"compact"===t?null:(0,v.Y)(G.S,{children:o})]})}var ch=(0,z.x)({menu:[W.wp.p(8),W.wp.colWithGap(8),W.wp.maxWidth(390),W.wp.minWidth(390)],file:[W.wp.pl(4),W.wp.display.inlineFlex,W.wp.rowWithGap(4),W.wp.align.center,{verticalAlign:"top"}],section:[W.wp.rowWithGap(8),W.wp.align.center,W.wp.justify.spaceBetween],header:[W.wp.colWithGap(2),W.wp.flex.shrink(1)],staticWidth:[W.wp.flex.grow(0),W.wp.flex.shrink(1)],variableWidth:[W.wp.flex.grow(1),W.wp.flex.shrink(0),{flexBasis:0}],flexEnd:[W.wp.align.end],red:[W.wp.color.redDefault],row:[W.wp.rowWithGap(8),W.wp.align.center]});function cm(e){var n=e.filePath,t=e.openSettings,r=(0,H.fZ)(),i=(0,nL.A)().dotReplit,o=(0,D.Vn)(r,nQ.lu),a=(0,D.Vn)(r,nQ.et),l=(0,m._)((0,w.useState)(o?{title:o.name,value:o.id}:void 0),2),s=l[0],c=l[1],u=(0,w.useRef)(!1),d=(0,w.useMemo)(function(){var e;return null!==(e=null==a?void 0:a.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))&&void 0!==e?e:[]},[a]);return(0,v.FD)(G.S,{css:ch.menu,children:[(0,v.FD)(ti.Y9,{level:1,children:["Language support for ",(0,v.FD)("span",{css:ch.file,children:[(0,v.Y)(r2.A,{path:n,size:16})," ",(0,v.Y)("span",{children:(0,E.WP)(n)})]})]}),(0,v.Y)(s2.a,{}),(0,v.Y)(cg,{openSettings:t}),a&&s?(0,v.FD)(v.FK,{children:[(0,v.Y)(s2.a,{}),(0,v.FD)(G.S,{css:ch.section,children:[(0,v.Y)(G.S,{css:[ch.header,ch.staticWidth],children:(0,v.Y)(ti.EY,{multiline:!1,children:"Code Formatter"})}),1===a.length?(0,v.Y)(G.S,{css:[ch.header,ch.variableWidth,ch.flexEnd],children:(0,v.Y)(ti.EY,{multiline:!1,children:s.title})}):(0,v.Y)(G.S,{row:!0,gap:4,children:(0,v.Y)(cs.l,{placement:"top",items:d,selectedItem:(0,h._)((0,f._)({},s),{icon:u.current?(0,v.Y)(nS.A,{size:12}):void 0}),disabled:u.current,onChange:function(e){e.value!==s.value&&(u.current=!0,c(e),(function(e,n){return cY.apply(this,arguments)})(i,{path:n,formatterId:e.value}).finally(function(){return u.current=!1}))}})})]})]}):null]})}function cg(e){var n=e.openSettings,t=co((0,w.useMemo)(function(){return(0,S.eU)(function(e){return Array.from(e(s9).values()).map(function(e){return{clientId:e.client.clientId,clientName:e.client.clientName,restart:function(){return e.restart()}}})})},[]));return(0,v.FD)(v.FK,{children:[t.map(function(e){return(0,v.Y)(G.S,{css:ch.section,children:(0,v.Y)(cw,{languageServerId:e.clientId,name:e.clientName,restart:function(){return e.restart()},openSettings:n})},e.clientId)}),0===t.length?(0,v.Y)(G.S,{css:ch.section,children:(0,v.Y)(cy,{openSettings:n})}):null]})}function cv(e){var n=(0,v.Y)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(n){"Enter"===n.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,v.Y)(ti.EY,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,v.Y)(ti.EY,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,v.FD)(G.S,{css:ch.row,children:[(0,v.Y)(ti.EY,{css:ch.red,multiline:!1,children:"Stalled"})," ",n]});case 2:return(0,v.FD)(G.S,{css:ch.row,children:[(0,v.Y)(ti.EY,{css:ch.red,multiline:!1,children:"Stopped"})," ",n]});default:return null}}function cw(e){var n,t=co((n=e.languageServerId,(0,w.useMemo)(function(){return(0,S.eU)(function(e){var t=e(s9).get(n);return t?ci(t):5})},[n])));switch(t){case 0:case 1:case 2:case 3:return(0,v.FD)(v.FK,{children:[(0,v.Y)(G.S,{css:[ch.header,ch.variableWidth],children:(0,v.Y)(ti.EY,{multiline:!1,children:e.name})}),(0,v.Y)(G.S,{css:[ch.header,ch.staticWidth],children:(0,v.Y)(cv,{restart:e.restart,state:t})})]});default:return null}}function cy(e){return(0,R.gc)("codeIntelligence").preferences.codeIntelligence?(0,v.Y)(G.S,{css:ch.header,children:(0,v.Y)(ti.EY,{color:"dimmer",children:"Limited language support because the language server is not available."})}):(0,v.Y)(G.S,{css:ch.header,children:(0,v.FD)(ti.EY,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,v.Y)("br",{}),(0,v.Y)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(n){"Enter"===n.key&&e.openSettings()},children:"Open settings"})]})})}var cb=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(cb||{});function cS(e){switch(e.state){case 3:case 6:case 4:return(0,v.Y)(cp,{size:16});case 0:return(0,v.Y)(nS.A,{size:16,color:eI.LU.blueStronger});case 1:return(0,v.Y)(G.S,{dataCy:"ws-code-intelligence-active",children:(0,v.Y)(cu.A,{size:16})});case 2:return(0,v.Y)(cd,{size:16});case 5:return(0,v.Y)(cc,{size:16})}}function cY(){return(cY=(0,el._)(function(e,n){var t,r;return(0,ec.YH)(this,function(i){return(t=".".concat((0,s7.QC)(n.path)),r="rules/formatter/fileExtensions/".concat(t,"/id"),n.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,tA._)({},"".concat(t),{id:n.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}var cA=t(61317);function cC(e){var n,t=e.presentation,r=(0,a8.A)((n=(0,el._)(function(e){var n,t,r,i;return(0,ec.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=o.sent()).error)return[2,n];if(t=n.type,r=null,!(t!==a3.UN.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return n.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=s$();return(0,w.useEffect)(function(){o("compact"===t&&i?i:null)},[o,t,i]),i?(0,v.FD)(v.FK,{children:[(0,v.Y)(cA.A,{color:eI.LU.foregroundDimmer,size:12}),"compact"===t?null:(0,v.Y)(G.S,{children:i})]}):null}function cx(e){if(e.facet(iH.u))return"";var n=e.selection,t="",r=0;if(n.ranges.length>1){r=n.ranges.reduce(function(e,n){return e+(n.to-n.from)},0);var i=n.ranges.length;t="".concat(i," selections")}else{var o=n.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,t="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(t+=" (".concat(r," chars)")),t}function c_(e){var n=e.view,t=(0,w.useRef)(null);return(0,w.useEffect)(function(){var e,r=t.current,i=null!==(e=n.plugin(D.Pb))&&void 0!==e?e:null;if(r&&i&&!i.destroyed){var o=null,a=n.state;r.textContent=cx(a);var l=i.bind({changed:function(e){return(0,ef.$H)(e,"selection",iH.u)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?cx(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[n]),(0,v.Y)("span",{ref:t,"data-cy":"current-position"})}var ck=t(38253);function cD(e){var n=e.presentation,t=s$();return(0,w.useEffect)(function(){t("compact"===n?"History":null)},[t,n]),(0,v.FD)(v.FK,{children:["compact"===n?null:(0,v.Y)(G.S,{children:"History"}),(0,v.Y)(ck.A,{size:12})]})}var cE=t(70557),cR=t(55313);function cI(e,n,t){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var s,c=e.iterLines()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=i;if(i=i+u.length+1,0!==u.length){var p=(0,cR.t)(u,n),f=u.trimStart(),h=d+(u.length-f.length);if(0!==p&&d!==h){var m="";if(t===cE.c.TABS){var g=Math.floor(p/n),v=p%n;m="	".repeat(g)+" ".repeat(v)}else t===cE.c.SPACES&&(m=" ".repeat(p));m+f!==u&&r.push({from:d,to:h,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return ea.VR.of(r,e.length)}var cF=t(48788),cT=t(10121),cP=t(93532),cL=t(50514),cU=t(46086),cN=t(11756),cO=(0,z.x)({menu:[W.wp.p(8),W.wp.colWithGap(8),W.wp.maxWidth(410)],file:[W.wp.pl(4),W.wp.display.inlineFlex,W.wp.rowWithGap(4),W.wp.align.center,{verticalAlign:"top"}],section:[W.wp.rowWithGap(8),W.wp.align.center,W.wp.justify.spaceBetween],header:[W.wp.colWithGap(2),W.wp.flex.shrink(1)],sizeInput:{border:"none"}});function cM(e){var n,t=e.filePath,r=e.openSettings,i=(0,R.gc)("indentDetection","indentSize").preferences,o=(0,H.fZ)(),a=(0,D.Vn)(o,iH.u),l=null!==a&&!!i.indentDetection&&a,s=(0,D.Vn)(o,cF._t),c=(0,D.Vn)(o,cF.WD),u=(0,D.Vn)(o,cF.xu),d=null!==(n=(0,D.Vn)(o,ea.$t.tabSize))&&void 0!==n?n:i.indentSize,p="	"===(0,D.Vn)(o,Y.Xt)?cE.c.TABS:cE.c.SPACES,f=(0,m._)((0,w.useState)(!1),2),h=f[0],y=f[1],b=(0,m._)((0,w.useState)(p),2),S=b[0],A=b[1],C=(0,m._)((0,w.useState)(d),2),x=C[0],_=C[1],k=(0,m._)((0,w.useState)(!1),2),I=k[0],F=k[1],T=(0,m._)((0,w.useState)(!1),2),P=T[0],L=T[1],U=(0,m._)((0,w.useState)(!1),2),N=U[0],O=U[1],M=(0,m._)((0,w.useState)(!1),2),B=M[0],z=M[1];(0,w.useEffect)(function(){I||(A(p),_(d))},[p,d,I]),(0,w.useEffect)(function(){h||(A(p),_(d),F(!1))},[h,p,d]),(0,w.useEffect)(function(){S===p&&x===d&&F(!1)},[S,x,p,d]),(0,w.useEffect)(function(){if(P||N||B){var e=setTimeout(function(){L(!1),O(!1),z(!1)},1e3);return function(){return clearTimeout(e)}}},[P,N,B]),l&&h&&y(!1);var W=(0,w.useCallback)(function(){if(o){var e=cI(o.state.doc,d,p);o.dispatch({changes:e,effects:cF.mh.of(!0)}),O(!0)}},[o,p,d]),V=(0,w.useCallback)(function(){o&&(o.dispatch({effects:cF.mh.of(!0)}),o.state.field(cF.WD)&&o.dispatch({effects:cF.SF.of({type:void 0,size:void 0})}),z(!0))},[o]),j=(0,w.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var n=void 0,t=[cF.SF.of({type:S,size:x})];if(e){if(S!==p&&(n=cI(o.state.doc,d,S)),S===cE.c.SPACES&&x!==d){var r=function(e,n,t,r){if(n===cE.c.TABS)return ea.VR.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,s=!1,c=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=a;if(a=a+p.length+1,0!==p.length){var h=(0,cR.t)(p,t),m=p.trimStart(),g=f+(p.length-m.length);if(0!==h&&f!==g){var v=Math.floor(h/t),w=h%t,y=i.repeat(v)+" ".repeat(w);y+m!==p&&o.push({from:f,to:g,insert:y})}}}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return ea.VR.of(o,e.length)}(n?n.apply(o.state.doc):o.state.doc,S,d,x);n=n?n.compose(r):r}n&&t.push(cF.mh.of(!0))}o.dispatch({changes:n,effects:t}),F(!1),L(!0)}},[o,p,d,S,x]),Z=(0,w.useCallback)(function(){y(!1),r()},[r]),q=(0,w.useMemo)(function(){if(c){var e=c.size,n=c.type===cE.c.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(n,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[c,u]);return(0,v.FD)(G.S,{css:cO.menu,children:[(0,v.FD)(ti.Y9,{level:1,children:["Indentation for",(0,v.FD)("span",{css:cO.file,children:[(0,v.Y)(r2.A,{path:t,size:16})," ",(0,v.Y)("span",{children:(0,E.WP)(t)})]})]}),s?(0,v.Y)(cP.N,{colorway:"warning",icon:(0,v.Y)(o4.A,{}),text:"This file type requires that ".concat(s===cE.c.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,v.Y)(s2.a,{}),(0,v.FD)(G.S,{css:cO.section,children:[(0,v.FD)(G.S,{css:cO.header,children:[(0,v.Y)(ti.EY,{multiline:!1,children:"Indentation unit"}),(0,v.Y)(ti.EY,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,v.FD)(G.S,{row:!0,gap:4,children:[(0,v.Y)(cT.fq,{css:cO.sizeInput,size:x,onChange:function(e){e!==x&&(_(e),F(!0))}}),(0,v.Y)(cs.l,{items:(0,g._)(cT.pi),selectedItem:cT.pi.find(function(e){return e.value===(S===cE.c.SPACES?"spaces":"tabs")}),onChange:function(e){var n=(null==e?void 0:e.value)==="spaces"?cE.c.SPACES:cE.c.TABS;n!==S&&(A(n),F(!0))}})]})]}),(0,v.Y)(s2.a,{}),i.indentDetection?(0,v.FD)(v.FK,{children:[(0,v.FD)(G.S,{css:cO.section,children:[(0,v.FD)(G.S,{css:cO.header,children:[(0,v.Y)(ti.EY,{multiline:!1,children:"Detected indentation unit"}),(0,v.Y)(ti.EY,{variant:"small",color:"dimmer",children:q})]}),B?(0,v.Y)(oq.$n,{colorway:"positive",text:"Detected!",iconLeft:(0,v.Y)(sc.A,{}),onClick:V}):(0,v.Y)(oq.$n,{text:c?"Re-detect":"Detect",iconLeft:(0,v.Y)(cL.A,{}),disabled:!u&&!c,onClick:V})]}),(0,v.Y)(s2.a,{})]}):null,(0,v.FD)(G.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,v.Y)(oq.$n,{text:"Global settings",iconLeft:(0,v.Y)(cU.A,{}),onClick:Z}),(0,v.Y)(G.S,{row:!0,gap:4,children:P||N?(0,v.Y)(v.FK,{children:P?(0,v.Y)(oq.$n,{text:"Saved!",colorway:"positive",iconLeft:(0,v.Y)(sc.A,{}),onClick:function(){return j(!1)}}):(0,v.Y)(oq.$n,{text:"Re-indented!",colorway:"positive",iconLeft:(0,v.Y)(sc.A,{}),onClick:W})}):(0,v.Y)(v.FK,{children:I?(0,v.FD)(v.FK,{children:[(0,v.Y)(oq.$n,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,v.Y)(cN.A,{}),onClick:function(){return j(!0)}}),(0,v.Y)(oq.$n,{text:"Save",iconLeft:(0,v.Y)(sc.A,{}),onClick:function(){return j(!1)}})]}):(0,v.Y)(oq.$n,{text:"Re-indent file",iconLeft:(0,v.Y)(cN.A,{}),onClick:W})})})]})]})}function cB(e){var n,t=e.presentation,r=(0,R.gc)("indentDetection","indentSize").preferences,i=(0,H.fZ)(),o=(0,D.Vn)(i,iH.u),a=null!==o&&!!r.indentDetection&&o,l=null!==(n=(0,D.Vn)(i,ea.$t.tabSize))&&void 0!==n?n:r.indentSize,s="	"===(0,D.Vn)(i,Y.Xt)?cE.c.TABS:cE.c.SPACES,c=s$();return(0,w.useEffect)(function(){c("File Indentation")},[c]),(0,v.FD)(v.FK,{children:[(0,v.Y)(cz,{type:s,loading:a}),"compact"===t?null:(0,v.Y)(cW,{type:s,size:l,loading:a})]})}function cH(e){var n=e.size,t=void 0===n?16:n,r=(0,eo._)(e,["size"]);return(0,v.Y)(j.Ay,(0,h._)((0,f._)({size:t},r),{children:(0,v.Y)("circle",{cx:t,cy:t,r:t/2,fillRule:"evenodd"})}))}function cz(e){var n=e.type;return e.loading?(0,v.Y)(nS.A,{size:12}):n===cE.c.SPACES?(0,v.Y)(cH,{color:eI.LU.foregroundDimmer,size:12}):(0,v.Y)(cN.A,{color:eI.LU.foregroundDimmer,size:12})}function cW(e){var n=e.type,t=e.size;if(e.loading)return(0,v.Y)(ti.EY,{variant:"small",color:"dimmest",children:"Detecting..."});var r=n===cE.c.SPACES?"Spaces":"Tabs";return(0,v.FD)(ti.EY,{variant:"small",color:"dimmer",children:[r,": ",t]})}var cG=t(89117),cV=t(72250),cj=t(88859),cZ=(0,z.x)({group:[W.wp.align.center,W.wp.rowWithGap(4)]});function cq(e){var n,t,r,i,o,a,l,s,c=e.filePath,u=e.presentation,d=(t=(n=(0,m._)((0,w.useState)(null),2))[0],r=n[1],i=(0,n4.A)(c),o=(0,cj.t3)(),a=(0,cV.gB)(),(0,w.useEffect)(function(){var e=function(e){var n,t=o().find(function(e){var n=(0,m._)(e,2);return"problems"===(n[0],n[1]).type});if(t){var r=a(t[0]);r&&"problems"===r.type&&(null===(n=r.updateProblems)||void 0===n||n.call(r,c,e))}},n=function(n){if(n.path===c){var t=[],o=!0,a=!1,l=void 0;try{for(var s,u=i[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;d.isOpen(c)&&t.push.apply(t,(0,g._)(d.getDiagnostics(n.path)))}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(t),e(t)}},t=[],l=!0,s=!1,u=void 0;try{for(var d,p=i[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;f.isOpen(c)&&t.push.apply(t,(0,g._)(f.getDiagnostics(c)))}}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}r(t),e(t);var h=[],v=!0,w=!1,y=void 0;try{for(var b,S=i[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;h.push(Y.onDiagnostics(function(e){return n(e)}))}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}return function(){h.forEach(function(e){return e()}),o().some(function(e){var n=(0,m._)(e,2),t=(n[0],n[1]);return"codeEditor"===t.type&&t.data.path===c})||e([])}},[i,c,o,a]),t),p=(0,w.useMemo)(function(){var e;return d?(e=d.reduce(function(e,n){return void 0===n.severity||(e[n.severity]=(e[n.severity]||0)+1),e},{}),d.length>0&&0===Object.keys(e).length&&(e[eE.DiagnosticSeverity.Error]=d.length),e):null},[d]),f=p&&null!==(l=p[eE.DiagnosticSeverity.Error])&&void 0!==l?l:0,h=p&&null!==(s=p[eE.DiagnosticSeverity.Warning])&&void 0!==s?s:0,y=null===p,b=s$();return((0,w.useEffect)(function(){if(y){b(null);return}var e="";0===f&&0===h&&(e="No problems"),f>0&&(e+="".concat((0,rq.A)("Error",f),": ").concat(f)),h>0&&(e.length>0&&(e+=", "),e+="".concat((0,rq.A)("Warning",h),": ").concat(h)),b(e)},[b,u,y,h,f]),p)?(0,v.FD)(G.S,{align:"center",row:!0,gap:8,children:[(0,v.FD)(G.S,{css:cZ.group,children:[(0,v.Y)(cG.A,{severity:eE.DiagnosticSeverity.Error,size:12}),"compact"===u?null:(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(f)})]}),(0,v.FD)(G.S,{css:cZ.group,children:[(0,v.Y)(cG.A,{severity:eE.DiagnosticSeverity.Warning,size:12}),"compact"===u?null:(0,v.Y)(ti.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(h)})]})]}):null}var cK=t(67324);function c$(e){var n=e.presentation,t=e.toggled?"Diffing":"Diff",r=s$();return(0,w.useEffect)(function(){r("compact"===n?t:null)},[r,n,t]),(0,v.FD)(v.FK,{children:[(0,v.Y)(cK.A,{color:eI.LU.foregroundDimmer,size:12}),"compact"===n?null:(0,v.Y)(G.S,{children:t})]})}var cJ=t(95836);function cQ(e){return(0,v.Y)(cJ.A,(0,h._)((0,f._)({},e),{children:(0,v.Y)("path",{fill:"#009118",fillRule:"evenodd",d:"m15.09 2-.29.29v1.066l.254.255h1.342v1.03L7.52 13.65V3.624h1.475l.303-.304V2.242l-.28-.217H1.255L1 2.28v1.102l.258.258h1.35v18.465l.255.254h1.534l6.467-6.682a.512.512 0 0 1 .006-.016l.335-.939a.49.49 0 0 1 .142-.207l.32-.275a.49.49 0 0 1 .32-.118h.383L23 3.138V2.29L22.71 2h-7.62Zm-3.273 12.693-.183.157-.01.008-.004.012-.014.041-.331.928.25.25h1.083l.274-.276.301-1.035-.215-.215h-1l-.15.13Zm-1.871 2.714-.12.48h.774l-1.66 4.745h2.288l.133-.43h-.65l1.642-4.795H9.946Zm7.498.017-.514.583h-.885l-.546-.566h-1.826l-.149.445h.617l-1.592 4.695h1.914l.129-.38h-.46l1.065-3.355h2.039l-1.164 3.735h1.847l.143-.344h-.457l1.082-3.408h1.953l-1.181 3.752h2.034l.145-.38h-.528l1.31-4.257-.373-.503h-1.473l-.497.547h-.936l-.514-.564h-1.183Z",clipRule:"evenodd"})}))}var cX=(0,z.x)({text:[{textTransform:"capitalize"}]});function c0(e){var n=e.presentation,r=(0,m._)((0,w.useState)(null),2),i=r[0],o=r[1],a=(0,w.useRef)(null),l=(0,w.useRef)(null),s=s$(),c=(0,H.fZ)(),u=(0,R.gc)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",p=(0,w.useCallback)(function(e){var t=null!=e?e:"";if(c&&i&&void 0===e){var r,o,u=i.getCM(c);t=null!==(o=null==u?void 0:null===(r=u.state.vim)||void 0===r?void 0:r.mode)&&void 0!==o?o:"normal"}s("compact"===n?t:null),l.current=t,a.current&&a.current.innerText!==t&&(a.current.innerText=t||"")},[c,i,s,n]);return(0,w.useEffect)(function(){d&&!i&&t.e(7990).then(t.bind(t,13749)).then(function(e){o(e),p()})},[d,i,p]),(0,w.useEffect)(function(){if(c&&d&&i){var e,n=a.current,t=null!==(e=c.plugin(D.Pb))&&void 0!==e?e:null;if(n&&t&&!t.destroyed)return t.bind({changed:function(){var e,n,t=i.getCM(c),r=null!==(n=null==t?void 0:null===(e=t.state.vim)||void 0===e?void 0:e.mode)&&void 0!==n?n:"";return l.current!==r},callback:function(){p()}})}},[c,d,i,p]),d?(0,v.FD)(v.FK,{children:[(0,v.Y)(cQ,{size:12}),"compact"===n?null:(0,v.Y)("span",{css:cX.text,ref:a})]}):null}var c1=(0,z.x)({root:[{borderTop:"1px solid ".concat(eI.LU.backgroundHigher)},{height:"29px",contain:"strict"}]}),c2=(0,w.memo)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,y,b,S,Y,A,C,x,_,k=e.filePath,E=e.performPaneOperation,R=(0,w.useCallback)(function(e){return E({operation:"open",pane:e,secondary:!0})},[E]),I=(0,w.useCallback)(function(){return R({type:"preferences"})},[R]),F=(n=(0,sI.Ay)(),(0,sI.mS)(n)?{item:(0,v.Y)(s4,{}),popover:(0,v.Y)(s8,{activeFile:k}),key:"ai"}:null),T=(r=(t={filePath:k,openSettings:I}).filePath,i=t.openSettings,{item:(0,v.Y)(cf,{filePath:r,openSettings:i}),popover:(0,v.Y)(cm,{openSettings:i,filePath:r}),key:"codeIntelligence"}),P=(o=(0,t0._P)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,H.fZ)(),o?{item:(0,v.Y)(cq,{filePath:k}),onClick:a?function(){return(0,t5.Q)(a)}:void 0,key:"lspDiagnostics"}:null),L=(l=function(){return R({type:"git"})},(0,t0._P)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,v.Y)(cC,{}),onClick:l,key:"currentBranch"}:null),U=(s=(0,t0._P)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),h=(c=(0,H.fZ)(),u=(0,D.Vn)(c,tQ),d=!c||!u||null===u.head,p=(null==u?void 0:u.mode)===tK.INLINE_DIFF,f={toggle:(0,w.useCallback)(function(){if(!c)return null;c.dispatch({effects:tJ.of(p?tK.GUTTER_DIFF:tK.INLINE_DIFF)})},[c,p]),toggled:p,disabled:d}).toggle,m=f.toggled,g=f.disabled,s&&!g?{item:(0,v.Y)(c$,{toggled:m}),onClick:h,key:"toggleDiff"}:null),N={item:(0,v.Y)(c0,{}),key:"vimMode"},O=(y=(0,H.fZ)())?{item:(0,v.Y)(c_,{view:y}),onClick:function(){return(0,aP.cB)(y)},key:"currentPosition"}:null,M=(S=(b={filePath:k,performPaneOperation:E}).filePath,Y=b.performPaneOperation,A=(0,w.useCallback)(function(){Y({operation:"replace",pane:{type:"history",data:{path:S}}})},[Y,S]),{item:(0,v.Y)(cD,{}),key:"history",onClick:A}),B=(x=(C={filePath:k,openSettings:I}).filePath,_=C.openSettings,{item:(0,v.Y)(cB,{}),popover:(0,v.Y)(cM,{filePath:x,openSettings:_}),key:"indentation"});return(0,v.Y)(s0,{css:c1.root,left:[F,T,P,L,U,N],right:[O,B,M]})});function c5(e){var n=(0,nL.A)().lspnix;return(0,v.Y)(cl,{filePath:e.filePath,lspnix:n,children:(0,v.Y)(c2,(0,f._)({},e))})}var c4=t(17392),c3=(0,z.x)({root:[W.wp.position.relative,W.wp.flex.column,W.wp.overflowY("hidden"),W.wp.width("100%"),W.wp.height("100%")]});function c8(e){var n,t,r,i,o=(0,w.useRef)(null),a=(n=(0,er.Jw)(en.C.id,en.j.Editor),t=(0,er.Jw)(et.IW.id,et.Gp.ViewFile),r=(0,er.Jw)(et._t.id,et.ij.ViewCSSFile),i=(0,er.Jw)(et._t.id,et.ij.ViewTSFile),(0,ee.P)(n,t,r,i)),l=(0,M.A)(),s=(0,m._)((0,w.useState)(!1),2),c=s[0],u=s[1],d=(0,c4.A)(),p=(0,w.useCallback)(function(){u(!0)},[]),f=(0,P.jt)(),h=(0,P.hT)(),g=f&&(h===T.g32.AGENT_STATE_RUNNING||h===T.g32.AGENT_STATE_PAUSING);return(0,v.FD)(G.S,{innerRef:(0,ee.P)(a,o,{breadcrumb:"client/workspace/components/CodeEditorWrapper.tsx:64"}),css:c3.root,children:[(0,v.Y)(nY,{performPaneOperation:e.performPaneOperation,path:e.filePath,isReadOnly:e.isReadOnly}),(0,v.Y)("div",{css:lD.jy,children:(0,v.Y)(sR,{filePath:e.filePath,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,isReadOnly:g,isReadOnlyWhileAgentWorking:g,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation,handleOpenPurchaseModal:p})}),(0,v.Y)("div",{style:{display:l?"none":"block"},children:(0,v.Y)(c5,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,v.Y)(X,{filePath:e.filePath,isLoading:!1}),(0,v.Y)(ei.A,{isOpen:c,onClose:function(){return u(!1)},onPurchaseComplete:d,reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_code_repair",surface:"ghostwriter_power_up_dialog"}}})]})}var c7=t(80062),c6=(0,z.x)({root:[W.wp.coverContainer,W.wp.center,W.wp.p(16)]});function c9(e){var n=e.message;return(0,v.Y)(G.S,{css:c6.root,children:(0,v.Y)(G.S,{children:(0,v.Y)(cP.N,{icon:(0,v.Y)(o4.A,{}),colorway:"orange",text:n})})})}var ue=t(6806),un=t(19346);function ut(e){return(0,v.Y)(j.Ay,(0,h._)((0,f._)({},e),{children:(0,v.Y)("path",{fillRule:"evenodd",d:"M20.75 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h16a.75.75 0 0 0 .75-.75Zm-6-6a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 .75-.75Zm-4 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 .75-.75Z",clipRule:"evenodd"})}))}var ur=t(71594),ui=y.ZU.Object({type:y.ZU.Literal("codeEditor"),data:y.ZU.Object({path:y.ZU.Union([y.ZU.String({minLength:1}),y.ZU.Null()]),line:y.ZU.Optional(y.ZU.Number()),col:y.ZU.Optional(y.ZU.Number())})}),uo={Content:function(e){var n=e.pane,t=e.options;return(0,v.Y)(ul,(0,h._)((0,f._)({},n.data),{isActive:t.isActive,isHidden:t.isHidden,performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.pane,t=e.size;return(0,v.Y)(r2.A,{path:n.data.path||"",size:t})},getTitle:function(e){return e.data.path?(0,E.WP)(e.data.path):"No file open"},category:un.bY.WorkspaceFeatures,decode:function(e){return b.WT.Decode(ui,e)}};function ua(e){var n,t,r,i,o,a,l,s,c,u=e.path,d=e.performPaneOperation,p=(0,H.fZ)(),f=(0,I.A)(function(){return p?{match:c7.G2,data:{type:"action",label:"Toggle all folds",icon:(0,v.Y)(nu.A,{}),run:function(){0===(0,Y.hw)(p.state).size?(0,Y.hY)(p):(0,Y._I)(p)}}}:null},[p]),h=(0,D.Vn)(p,C.T);(0,w.useEffect)(function(){h&&d({operation:"commit"})},[h,d]);var m=(0,ng.KA)({path:u,performPaneOperation:d}),y=(n=(0,H.fZ)(),t=(0,D.Vn)(n,x.hb),(0,I.A)(function(){if(n&&t)return{match:c7.G2,data:{label:"Format "+(0,E.WP)(u),icon:(0,v.Y)(nb.A,{}),type:"action",run:function(){(0,x.BD)(n)}}}},[t,u,n])),b=(r=(0,F.m5)(),o=(i=(0,R.gc)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,I.A)(function(){return r?null:{match:c7.G2,data:{label:"Minimap",icon:(0,v.Y)(ut,{}),type:"context"},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?[{value:"none",label:"Hide",icon:(0,v.Y)(oJ.A,{})},{value:"characters",label:"Characters",icon:(0,v.Y)(eB.A,{})},{value:"blocks",label:"Blocks",icon:(0,v.Y)(eM.A,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:c7.G2,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),S=(l=function(){return d({operation:"replace",pane:{type:"history",data:{path:u}}})},(0,I.A)(function(){return{match:c7.G2,data:{label:"History",icon:(0,v.Y)(ck.A,{}),type:"action",run:function(){l()}}}},[l])),T=(s=(0,nw.vO)(),(0,I.A)(function(){var e=void 0;if((0,E.e$)(u)&&(e={type:"markdown",data:{path:u}}),(0,E.Z7)(u)&&(e={type:"media",data:{path:u}}),(0,E.Zy)(u)&&(e={type:"csvPreview",data:{path:u}}),e)return{match:c7.G2,data:{label:"Preview",icon:(0,v.Y)(ny.A,{}),type:"action",run:function(){if(e){if("csvPreview"===e.type){var n;e.data.line=null===(n=s())||void 0===n?void 0:n.position.line}d({operation:"replace",pane:e})}}}}},[s,u,d])),P=(c=(0,cj.JZ)(),{match:c7.G2,data:{label:"Reveal in file tree",icon:(0,v.Y)(ur.A,{}),type:"action",run:function(){c(u)}}});return(0,cV.Qt)(function(){if(p){var e=[];return y&&e.push(y),T&&e.push(T),e.push(S),b&&e.push(b),f&&e.push(f),e.push(P),m&&e.push.apply(e,(0,g._)(m)),{type:"codeEditor",commands:e,getEditorView:function(){return p},getCurrentSelectionText:function(){if(!p.state.selection.main.empty)return p.state.sliceDoc(p.state.selection.main.from,p.state.selection.main.to)},insertGhostwriterChatCode:function(e,n){(0,_.fJ)({view:p,insert:e,overwrite:n})},revertGhostwriterChatCode:function(){(0,_.sz)(p)},fetchProblems:function(){return(0,A.H_)(p),(0,k.VS)(p.state)}}}},[p,y,T,S,b,f,P,m]),(0,cV.HP)(function(){return p},[p]),null}function ul(e){var n,t,r,i,o,a,l,s,c=e.path,u=e.line,d=e.col,p=e.isActive,f=e.isHidden,h=e.performPaneOperation,g=(0,m._)((0,w.useState)(!f),2),y=g[0],b=g[1];y||f||b(!0);var Y=(0,m._)((0,w.useState)(function(){return(0,S.y$)()}),1)[0],A=(0,m._)((0,w.useState)(function(){return(0,S.y$)()}),1)[0],C=(t=(n={path:c,replaceEditorPath:(0,w.useCallback)(function(e){h({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[h]),getFileRenameInProgress:(0,nw.u6)()}).path,r=n.replaceEditorPath,i=n.getFileRenameInProgress,o=(0,nL.A)().fs,l=(a=(0,m._)((0,w.useState)(null),2))[0],s=a[1],(0,w.useEffect)(function(){if(t){if(t.startsWith("/"))return s('Cannot open "'.concat(t,'"')),function(){s(null)};var e=o.watchPathStat(t,{onNewStat:function(e){var n=i();if(!e.exists){if((null==n?void 0:n.from)===t){r(n.to);return}s('No file found at "'.concat(t,'", it may have been deleted'));return}if(e.type===ov.pt.Directory){s('"'.concat(t,'" is a directory'));return}s(null)},onError:function(){s('Unknown error occured while read "'.concat(t,'", try re-opening the editor'))}});return function(){e(),s(null)}}},[i,o,t,r]),l),x=(0,I.A)(function(){return{line:u,col:d}},[u,d]),_=(0,I.A)(function(){return function(){h({operation:"replace",pane:{type:"codeEditor",data:{path:c}}})}},[h,c]);return c?C?(0,v.Y)(c9,{message:C}):f&&!y?null:(0,v.Y)(H.dz.Provider,{value:Y,children:(0,v.FD)(ue.GK.Provider,{value:A,children:[(0,v.Y)(c8,{filePath:c,isHidden:null!=f&&f,deeplink:x,onDeeplinkUpdated:_,hideMobileKeyboardToolbar:!0,performPaneOperation:h},c),(0,v.Y)(ua,{path:c,isActive:p,performPaneOperation:h})]})}):null}},18039:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(40174),i=t(49711),o=r.ZU.Object({type:r.ZU.Literal("commands"),data:r.ZU.Object({autoFocus:r.ZU.Boolean()})}),a=function(e){return i.WT.Decode(o,e)}},30542:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(40174),i=t(49711),o=r.ZU.Object({type:r.ZU.Literal("config"),flow:r.ZU.Union([r.ZU.Literal("githubImport"),r.ZU.Literal("incompleteConfig")])}),a=function(e){return i.WT.Decode(o,e)}},15805:(e,n,t)=>{"use strict";t.d(n,{J:()=>V});var r=t(94086),i=t(40174),o=t(49711),a=t(53654),l=t(13454),s=t(66622),c=t(5482),u=t(30758),d=t(55195),p=t(19327),f=t(24481),h=t(80062),m=t(27189),g=t(55606),v=t(72606),w=t(59314),y=t(1175),b=t(52757),S=t(24955),Y=t(10168),A=t(32842),C=t(95235),x=t(69929),_=t(8367),k=t(10001),D=(0,b.i7)({"0%":{backgroundColor:S.LU.accentPrimaryDimmer},"100%":{backgroundColor:"transparent"}}),E=(0,Y.x)({filter:[A.wp.p(4),A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"})],tableRoot:[A.wp.flex.growAndShrink(1),A.wp.width("100%"),A.wp.overflow("auto"),{'&[data-resizing="true"]':{overflow:"hidden",pointerEvents:"none"}}],virtualTable:[A.wp.width("fit-content"),A.wp.position.relative],tableHeader:[A.wp.display.flex,A.wp.flex.row,A.wp.backgroundColor.backgroundDefault,A.wp.position.sticky,A.wp.zIndex(1),A.wp.top(0),A.wp.noSelect],headerCell:[A.wp.color.foregroundDefault,A.wp.fontWeight.medium,A.wp.fontSize(12),A.wp.px(6),A.wp.display.flex,A.wp.align.center,A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),A.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{background:S.LU.backgroundDefault,position:"sticky",left:0,zIndex:1}}],tableRow:[A.wp.flex.row,{'&[data-highlighted="true"]':{animation:"".concat(D," ").concat(2e3,"ms ease-out forwards")}}],tableCell:[A.wp.display.flex,A.wp.align.center,A.wp.color.foregroundDimmer,A.wp.fontSize(12),A.wp.px(6),A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),A.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{justifyContent:"center",position:"sticky",left:0,background:S.LU.backgroundDefault}}],resizeHandle:[A.wp.position.absolute,A.wp.top(0),A.wp.right(0),A.wp.height("100%"),A.wp.width(4),{cursor:"col-resize","&:hover":{backgroundColor:S.LU.accentPrimaryDefault}}]}),R=function(e,n){var t=(0,s._)((0,u.useState)(e),2),r=t[0],i=t[1],o=(0,u.useMemo)(function(){return new w.$S(e,{selector:function(e){return Object.values(e).join(" ")},casing:"case-insensitive"})},[e]);return(0,u.useEffect)(function(){if(!n){i(e);return}o.find(n).then(function(e){i(e.map(function(e){return e.item}))}).catch(function(){})},[e,o,n]),r},I=function(e){var n=(0,s._)((0,u.useState)(e),2),t=n[0],r=n[1],i=(0,s._)((0,u.useState)(null),2),o=i[0],a=i[1],l=(0,s._)((0,u.useState)(0),2),c=l[0],d=l[1],p=(0,s._)((0,u.useState)(0),2),f=p[0],h=p[1],g=(0,u.useCallback)(function(e,n){a(e),d(n.clientX),h(t[e])},[t]),v=(0,u.useCallback)(function(e){if(null!==o){var n=Math.max(50,Math.min(300,f+(e.clientX-c)));r(function(e){var t=(0,m._)(e);return t[o]=n,t})}},[o,f,c]),w=(0,u.useCallback)(function(){a(null)},[]);return(0,u.useEffect)(function(){if(null!==o){var e=function(e){return v(e)},n=function(){return w()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)}}},[w,v,o]),{columnWidths:t,setColumnWidths:r,resizingColumn:o,handleResizeStart:g}};function F(e){var n=e.data,t=e.initialLine,i=e.openInEditor,o=(0,y.a)(),a=(0,s._)((0,u.useState)(""),2),l=a[0],c=a[1],d=(0,u.useMemo)(function(){if(0===n.length)return{headers:[],data:[],calculatedColumnWidths:[]};var e=[""].concat((0,m._)(n[0])),t=e.map(function(e,n){return{key:n.toString(),label:e,isRowHeader:0===n}}),r=[],i=Array(e.length).fill(0);n.slice(1).forEach(function(e,n){var o={0:(n+1).toString(),key:n.toString()};t.slice(1).forEach(function(n,t){var r=e[t]||"";o[(t+1).toString()]=r,i[t+1]=Math.max(i[t+1],r.length)}),r.push(o)});var o=i.map(function(e,n){return 0===n?25:Math.min(Math.max(8*Math.max(e,t[n].label.length),50),300)});return{headers:t,data:r,calculatedColumnWidths:o}},[n]),p=d.headers,f=d.data,h=d.calculatedColumnWidths,w=R(f,l),b=I(h),S=b.columnWidths,Y=b.setColumnWidths,A=b.resizingColumn,D=b.handleResizeStart,F=(0,s._)((0,u.useState)(null),2),T=F[0],P=F[1];(0,u.useEffect)(function(){Y(h)},[h,Y]);var L=(0,u.useRef)(null),U=(0,g.Te)({count:w.length,getScrollElement:function(){return L.current},estimateSize:function(){return 25},overscan:10,rangeExtractor:function(e){var n=new Set([0].concat((0,m._)((0,v.vp)(e))));return(0,m._)(n)}});return(0,u.useEffect)(function(){if(t&&w.length>t){var e=t-2;U.scrollToIndex(e,{align:"center"}),P(e);var n=setTimeout(function(){return P(null)},2e3);return function(){return clearTimeout(n)}}},[w.length,t,U]),(0,r.FD)(r.FK,{children:[(0,r.Y)(_.S,{css:E.filter,children:(0,r.Y)(x.I,{value:l,onChange:function(e){return c(e.target.value)},onClear:function(){return c("")}})}),(0,r.Y)("div",{css:E.tableRoot,ref:L,"data-resizing":null!==A,children:(0,r.FD)("div",{css:E.virtualTable,style:{height:"".concat(U.getTotalSize(),"px"),width:"".concat(S.reduce(function(e,n){return e+n},0),"px")},children:[(0,r.Y)("div",{css:E.tableHeader,children:p.map(function(e,n){return(0,r.FD)("div",{css:E.headerCell,style:{width:"".concat(S[n],"px")},children:[e.label,o||0===n?null:(0,r.Y)("div",{css:E.resizeHandle,onMouseDown:function(e){return D(n,e)},role:"separator"})]},e.key)})}),U.getVirtualItems().map(function(e){var n=w[e.index];return n?(0,r.Y)("div",{css:E.tableRow,"data-index":e.index,"data-highlighted":e.index===T,style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(25+e.start,"px)")},children:p.map(function(e,t){var o=n[e.key];return(0,r.Y)("div",{css:E.tableCell,style:{width:"".concat(S[t],"px")},children:0===t?(0,r.Y)(C.K0,{colorway:"primary",alt:"Edit at this line",onClick:function(){return i(parseInt(o,10)+1)},size:18,children:(0,r.Y)(k.A,{})}):o},e.key)})},e.key.toString()):null})]})})]})}var T=t(50809),P=t(37673),L=t(72250),U=t(93532),N=t(73886),O=t(14753),M=t(68753),B=(0,Y.x)({root:[A.wp.flex.column,A.wp.height("100%"),A.wp.width("100%"),A.wp.overflow("hidden")],errorContainer:[A.wp.p(8)],loadingContainer:[A.wp.flex.growAndShrink(1),A.wp.center]});function H(e){var n=e.filePath,i=e.initialLine,o=e.performPaneOperation,a=(0,f.A)().fs,m=(0,s._)((0,u.useState)([]),2),g=m[0],v=m[1],w=(0,u.useCallback)(function(e){o({operation:"replace",pane:{type:"codeEditor",data:{path:n,line:e}}}),o({operation:"commit"})},[o,n]);(0,L.Qt)(function(){return{commands:[{match:h.G2,data:{label:"Open in Editor",icon:(0,r.Y)(N.A,{}),type:"action",run:function(){return w()}}}]}},[w]);var y=(0,s._)((0,u.useState)(!1),2),b=y[0],S=y[1],Y=(0,s._)((0,u.useState)(!0),2),A=Y[0],C=Y[1];return(0,u.useEffect)(function(){var e,r=(e=(0,l._)(function(e){var n;return(0,c.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.e(2278).then(t.t.bind(t,72278,23))];case 1:return r.sent().default.parse(e,{complete:function(e){v(e.data),C(!1),S(!1)}}),[3,3];case 2:return n=r.sent(),d.Cp(n),S(!0),[3,3];case 3:return[2]}})}),function(n){return e.apply(this,arguments)});return a.watchTextFile(n,{onReady:function(e){return r(e.initialContent)},onChange:function(e){return r(e.latestContent)},onMoveOrDelete:function(e){e.eventType===p.dV.Delete&&o({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[n,a,o]),(0,r.FD)(_.S,{css:B.root,children:[(0,r.Y)(T.ou,{path:n,performPaneOperation:o,children:(0,r.Y)(P.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:function(){return w()},icon:(0,r.Y)(N.A,{})})}),b?(0,r.Y)(_.S,{css:B.errorContainer,children:(0,r.Y)(U.N,{icon:(0,r.Y)(M.A,{}),colorway:"red",text:"This CSV could not be displayed."})}):(0,r.Y)(r.FK,{children:A?(0,r.Y)(_.S,{css:B.loadingContainer,children:(0,r.Y)(O.A,{})}):(0,r.Y)(F,{data:g,openInEditor:w,initialLine:i})})]})}var z=t(19346),W=t(75085),G=i.ZU.Object({type:i.ZU.Literal("csvPreview"),data:i.ZU.Object({path:i.ZU.String(),line:i.ZU.Optional(i.ZU.Integer())})}),V={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.data,i=t.path,o=t.line;return(0,r.Y)(H,{filePath:i,performPaneOperation:n,initialLine:o})},Icon:function(e){var n=e.size;return(0,r.Y)(W.A,{size:n})},getTitle:function(e){return e.data.path?(0,a.WP)(e.data.path):"CSV Preview"},description:"Preview CSV files in a tabular format",category:z.bY.Other,decode:function(e){return o.WT.Decode(G,e)}}},11359:(e,n,t)=>{"use strict";t.d(n,{B:()=>lA});var r,i,o,a,l,s=t(66622),c=t(60762),u=t(94086),d=t(30758),p=t(40174),f=t(49711),h=t(68670),m=t(58133),g=t(13454),v=t(27189),w=t(5482),y=t(55937),b=t(51439),S=t(59193),Y=t(15281),A=t(72275),C=t(42405),x=t(81247),_=t(78859),k=t(40171),D=t(79505),E=t(20837),R=t(45009),I=t(30632),F=t(72813);function T(){var e=(0,R._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return T=function(){return e},e}function P(){var e=(0,R._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var L={},U=(0,I.J1)(T()),N=(0,I.J1)(P(),U),O=t(52757),M=t(82542),B=t(32842),H=(0,O.AH)([B.wp.maxHeight(320),B.wp.minHeight(240),{aspectRatio:"2 / 1"}]);function z(){var e=(0,M.D)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var W=t(3460),G=t(93532),V=t(40889),j=t(8367),Z=function(e){var n=e.data;D.t1.register(D.E8);var t=(0,M.D)().values;return(0,u.Y)(k.yP,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:z()},scales:{y:{title:{display:!0,text:"# Requests",color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:t.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:t.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:t.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:t.global.outlineDimmest}}}},data:{labels:n.results.map(function(e){var n=e.value.replace("ms","").split("-"),t=n[n.length-1];return t.includes("s+")?t.replace("s+","000+"):"< "+t}),datasets:[{borderWidth:0,data:n.results.map(function(e){return e.count}),backgroundColor:Array(n.results.length).fill(t.global.tealDefault)}]}})};let q=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=(0,s._)((0,d.useState)(void 0),2),p=c[0],f=c[1],h=(n={variables:{id:o,input:{start:a,hours:l,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsDuration.__typename){case"UserError":case"NotFoundError":f(Error(e.getRepl.analyticsDuration.message))}}},t=(0,E._)({},L,n),F.I(N,t)),m=h.data,g=h.loading,v=h.error;return v&&f(v),(0,u.FD)(j.S,{gap:8,children:[(0,u.Y)(V.EY,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,u.FD)(j.S,{children:[g?(0,u.Y)(j.S,{css:[H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,p?(0,u.Y)(G.N,{text:p.message,colorway:"negative"}):null,(null==m?void 0:null===(r=m.getRepl)||void 0===r?void 0:r.__typename)==="Repl"&&(null===(i=m.getRepl.analyticsDuration)||void 0===i?void 0:i.__typename)==="ReplAnalyticsDuration"?(0,u.Y)(j.S,{css:H,children:(0,u.Y)(Z,{data:m.getRepl.analyticsDuration})}):null]})]})};var K=t(63946);function $(){var e=(0,R._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return $=function(){return e},e}function J(){var e=(0,R._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return J=function(){return e},e}function Q(){var e=(0,R._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}var X={},ee=(0,I.J1)($()),en=(0,I.J1)(J(),ee),et=(0,I.J1)(Q(),en),er=t(43952),ei=t(89401),eo=t(88953);D.t1.register(D.PP,D.kc,D.FN,D.No,D.m_);let ea=function(e){var n=e.labels,t=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,M.D)().values,s={labels:n.map(function(e){return e.toISOString()}),datasets:t.map(function(e){return(0,er._)((0,E._)({},e),{data:e.data.map(function(e){var n=e.x,t=e.y;return{x:n.toISOString(),y:t}}),pointRadius:.5,tension:.1})})},c=n.length;return(0,u.Y)(k.N1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,er._)((0,E._)({},z()),{callbacks:{title:function(e){var n=new Date(e[0].label);return(0,ei.A)(n,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,t){var r=n[t];if(c<=24){if(r.getHours()%4!=0)return;return(0,ei.A)(r,"HH:mm")}if(r.toISOString()===(0,eo.A)(r).toISOString())return(0,ei.A)(r,"MMM d")}}}}},data:s})};var el=function(e){var n=e.data,t=e.start,r=e.hours,i=(0,M.D)().values,o=Array(r).fill(0).map(function(e,n){return(0,K.A)(t,n)}),a=n.results.reduce(function(e,n){return e.set(n.timestamp,n),e},new Map),l=[{label:"Connected",data:o.map(function(e){var n;return{y:(null!==(n=a.get(e.toISOString()))&&void 0!==n?n:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var n;return{y:(null!==(n=a.get(e.toISOString()))&&void 0!==n?n:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,u.Y)(ea,{labels:o,datasets:l,maintainAspectRatio:!1})};let es=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=(0,s._)((0,d.useState)(void 0),2),p=c[0],f=c[1],h=(n={variables:{id:o,input:{start:a,hours:l,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":f(Error(e.getRepl.analyticsPageViews.message))}}},t=(0,E._)({},X,n),F.I(et,t)),m=h.data,g=h.loading,v=h.error,w=(null==m?void 0:null===(r=m.getRepl)||void 0===r?void 0:r.__typename)==="Repl"&&(null===(i=m.getRepl.analyticsPageViews)||void 0===i?void 0:i.__typename)==="ReplAnalyticsPageViews"?m.getRepl.analyticsPageViews:void 0,y=w?w.uniques:void 0;return v&&f(v),(0,u.FD)(j.S,{gap:8,children:[(0,u.FD)(j.S,{row:!0,align:"center",justify:"space-between",children:[(0,u.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Requests"}),y?(0,u.FD)(V.EY,{multiline:!1,children:[(0,u.Y)("strong",{children:y})," unique IP addresses"]}):null]}),(0,u.FD)(j.S,{children:[g?(0,u.Y)(j.S,{css:[B.wp.width("100%"),H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,p?(0,u.Y)(G.N,{text:p.message,colorway:"negative"}):null,w?(0,u.Y)(j.S,{css:H,children:(0,u.Y)(el,{data:w,start:a,hours:l})}):null]})]})};function ec(){var e=(0,R._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return ec=function(){return e},e}function eu(){var e=(0,R._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}function ed(){var e=(0,R._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var ep={},ef=(0,I.J1)(ec()),eh=(0,I.J1)(eu(),ef),em=(0,I.J1)(ed(),eh);t(53822),D.t1.register(D.PP,D.kc,D.FN,D.No,D.hE,D.m_,D.UA);let eg=function(e){var n,t,r,i=e.data,o=e.start,a=e.end,l=e.label,s=e.unit,c=e.xAxisLabel,d=e.yAxisLabel,p=(0,M.D)().values,f=z(),h={datasets:[{label:l,data:i,fill:!1,borderColor:p.global.blueDimmer,tension:.1}]},m=(r=Math).max.apply(r,(0,v._)(i.map(function(e){return e.y}))),g=Math.ceil(s===_.zj.Percentage?Math.max(m,100):Math.ceil(1.2*m)),w=(n=o,(t=a.getTime()-n.getTime())<=36e5?{unit:"minute",stepSize:5}:t<=216e5?{unit:"minute",stepSize:30}:t<=864e5?{unit:"hour",stepSize:2}:t<=2592e5?{unit:"hour",stepSize:6}:t<=6048e5?{unit:"hour",stepSize:12}:{unit:"day",stepSize:1}),y=w.unit,b=w.stepSize;return(0,u.Y)(k.N1,{data:h,options:{animation:!1,scales:{x:{type:"time",time:{unit:y},title:{display:!0,text:c},min:o.getTime(),max:a.getTime(),ticks:{stepSize:b,color:p.global.foregroundDimmer}},y:{title:{display:!0,text:d},type:"linear",suggestedMax:g,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:p.global.foregroundDimmer,callback:function(e){return s?"".concat(e).concat(s):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,E._)({},f)}}})};var ev=function(e){var n,t,r,i=e.start,o=e.end,a=e.timeSeriesFragment,l=e.xAxisLabel,c=e.yAxisLabel;if(0===a.results.length)return(0,u.Y)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var d={label:(n=a.results)[0].value,unit:(r=null===(t=n[0])||void 0===t?void 0:t.unit)?function(e,n){var t=Object.entries(e).find(function(e){var t=(0,s._)(e,2);return t[0],t[1]===n});if(t)return e[t[0]]}(_.zj,r):void 0,data:n.map(function(e){return{x:new Date(e.timestamp),y:e.count}})},p=d.label,f=d.unit,h=d.data;return(0,u.Y)(eg,{data:h,start:i,end:o,label:p,unit:f,xAxisLabel:l,yAxisLabel:c})},ew=function(e){var n=e.data,t=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,n){return(0,K.A)(t,n)}),a=n.results.reduce(function(e,n){var t,r=n.timestamp,i=n.value,o=n.count,a=null!==(t=e.get(i))&&void 0!==t?t:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,v._)(a.keys()).map(function(e,n){var t=i(e,n),r=a.get(e);return{label:e,data:o.map(function(e){var n,t=null!==(n=null==r?void 0:r.get(e.toISOString()))&&void 0!==n?n:0;return{x:new Date(e),y:t}}),borderColor:t,backgroundColor:t}});return(0,u.Y)(ea,{labels:o,datasets:l,maintainAspectRatio:!1})};let ey=function(e){var n,t,r,i,o=e.replId,a=e.title,l=e.metric,c=e.start,p=e.hours,f=e.colorFn,h=(0,s._)((0,d.useState)(void 0),2),m=h[0],g=h[1],v=(n={variables:{id:o,input:{metric:l,start:c,hours:p,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTimeSeries.__typename){case"TooManyRequestsError":g(Error("Too many requests"));break;case"UserError":case"NotFoundError":g(Error(e.getRepl.analyticsTimeSeries.message))}}},t=(0,E._)({},ep,n),F.I(em,t)),w=v.data,y=v.loading,b=v.error,S=(null==w?void 0:null===(r=w.getRepl)||void 0===r?void 0:r.__typename)==="Repl"&&(null===(i=w.getRepl.analyticsTimeSeries)||void 0===i?void 0:i.__typename)==="ReplAnalyticsTimeSeries"?w.getRepl.analyticsTimeSeries:void 0;return b&&g(b),(0,u.FD)(j.S,{gap:8,children:[(0,u.Y)(j.S,{row:!0,align:"center",justify:"space-between",children:(0,u.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:a})}),(0,u.FD)(j.S,{children:[y?(0,u.Y)(j.S,{css:[B.wp.width("100%"),H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,m?(0,u.Y)(G.N,{text:m.message,colorway:"negative"}):null,S?(0,u.Y)(j.S,{css:H,children:(0,_.P0)(l)?(0,u.Y)(ev,{start:c,end:(0,K.A)(c,p),timeSeriesFragment:S}):(0,u.Y)(ew,{data:S,start:c,hours:p,colorFn:f})}):null]})]})};var eb=t(27495),eS=t.n(eb);function eY(){var e=(0,R._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return eY=function(){return e},e}function eA(){var e=(0,R._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return eA=function(){return e},e}var eC={},ex=(0,I.J1)(eY()),e_=(0,I.J1)(eA(),ex),ek=t(24955),eD=t(95235),eE=t(68522),eR=t(14019),eI=function(e){var n=e.data,t=e.variant;if(0===n.results.length)return(0,u.Y)(V.EY,{multiline:!1,children:"No results"});switch(t){case"map":return(0,u.Y)(eP,{data:n});case"pie":return(0,u.Y)(eT,{data:n,devices:!1});case"device-pie":return(0,u.Y)(eT,{data:n,devices:!0});case"table":return(0,u.Y)(eF,{data:n})}},eF=function(e){var n=e.data;return D.t1.register(D.Bs),(0,u.Y)(j.S,{children:n.results.map(function(e,n){return(0,u.FD)(j.S,{css:[B.wp.py(8),{borderBottom:"1px solid ".concat(ek.LU.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],row:!0,gap:16,children:[(0,u.Y)(j.S,{css:[B.wp.flex.grow(1),B.wp.maxWidth("90%")],children:(0,u.Y)(V.EY,{title:e.value,multiline:!1,children:e.value})}),(0,u.Y)(j.S,{children:(0,u.Y)(V.EY,{multiline:!1,children:e.count})})]},n)})})},eT=function(e){var n=e.data,t=e.devices,r=(0,M.D)(),i=r.isDarkColorScheme,o=r.values,a=i?B.iB.categorical:B.iB.categorical.reverse(),l=new Map;return t?n.results.forEach(function(e){var n=e.value,t=e.count,r=n.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+t)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+t)}}):n.results.forEach(function(e){var n=e.value,t=e.count,r=n.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+t)}),(0,u.Y)(j.S,{css:H,children:(0,u.Y)(k.Fq,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:z()}},data:{labels:(0,v._)(l.keys()),datasets:[{borderWidth:(0,v._)(l.keys()).length>1?1:0,borderColor:o.global.outlineDimmest,data:(0,v._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,n){return a[n%a.length]})}]}})})},eP=function(e){var n=e.data,r=eS()(function(){return Promise.all([t.e(5501),t.e(2871),t.e(7101),t.e(7410)]).then(t.bind(t,7410))},{loadableGenerated:{webpack:function(){return[7410]}},ssr:!1}),i=n.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,u.Y)(r,{countries:i})};let eL=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=e.metric,p=e.count,f=e.variant,h=void 0===f?"table":f,m=e.expandable,g=(0,_.sJ)(c),v=(0,s._)((0,d.useState)(void 0),2),w=v[0],y=v[1],b=(0,s._)((0,d.useState)(!1),2),S=b[0],Y=b[1],A=(n={variables:{id:o,input:{metric:c,start:a,hours:l,deployment:!0,count:S?3*p:p}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTopList.__typename){case"UserError":case"NotFoundError":y(Error(e.getRepl.analyticsTopList.message))}}},t=(0,E._)({},eC,n),F.I(e_,t)),C=A.data,x=A.loading,k=A.error;return k&&y(k),(0,u.FD)(j.S,{gap:8,children:[(0,u.FD)(j.S,{row:!0,gap:8,children:[(0,u.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"device-pie"===h?"Top Devices":"Top ".concat(g)}),void 0!==m&&m?(0,u.Y)(eD.K0,{alt:S?"Collapse list":"Expand list",onClick:function(){return Y(!S)},children:S?(0,u.Y)(eE.A,{}):(0,u.Y)(eR.A,{})}):null]}),(0,u.FD)(j.S,{children:[x?(0,u.Y)(j.S,{css:[B.wp.height(80),B.wp.borderRadius(),W.S.backgroundPulse()]}):null,w?(0,u.Y)(G.N,{text:w.message,colorway:"negative"}):null,(null==C?void 0:null===(r=C.getRepl)||void 0===r?void 0:r.__typename)==="Repl"&&(null===(i=C.getRepl.analyticsTopList)||void 0===i?void 0:i.__typename)==="ReplAnalyticsTopList"?(0,u.Y)(eI,{variant:h,data:C.getRepl.analyticsTopList}):null]})]})};var eU=t(46391),eN=t(29454),eO=t(10168),eM=t(37535),eB=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],eH={label:"one week",key:168},ez=B.kL.min(600),eW=(0,eO.x)({fullWidth:(0,A._)({},ez,{gridColumn:"span 2"})}),eG=(0,eO.x)({container:[B.wp.display.grid,B.wp.gap(32),B.wp.pb(32),(0,A._)({},ez,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:eW.fullWidth,map:[eW.fullWidth],pies:[eW.fullWidth,B.wp.flex.column,(0,A._)({gap:32},B.kL.min(480),[B.wp.flex.row,{" > *":{flex:1}}])]}),eV=function(e){var n=e.replId,t=(0,s._)((0,d.useState)(eH),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,s._)((0,d.useState)((0,C.A)((0,x.A)(new Date),i-1)),2),c=l[0],p=l[1],f=(0,eN.g)("deployment-analytics-dot"),h=f.isDone,m=f.setAsDone,g=(0,C.A)((0,x.A)(new Date),23),v=(0,M.D)().values,w=[v.global.redStronger,v.global.redDimmer,v.global.redStrongest,v.global.redDimmest],y=[v.global.orangeDefault,v.global.orangeDimmer,v.global.orangeStronger,v.global.orangeDimmest],b=[v.global.blueDefault,v.global.blueDimmer,v.global.blueStronger,v.global.blueDimmest],A=[v.global.greenDefault,v.global.greenDimmer,v.global.greenStronger,v.global.greenDimmest];return(0,d.useEffect)(function(){(0,eU.Ae)({context:S.P.Analytics})},[]),(0,d.useEffect)(function(){h||m()},[h,m]),(0,u.Y)(Y.A,{children:(0,u.FD)(j.S,{css:eG.container,children:[(0,u.Y)(j.S,{css:eG.fullWidth,children:(0,u.Y)(eM.in,{items:eB,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!==(n=eB.find(function(e){return e.key===t}))&&void 0!==n?n:eH),p((0,C.A)((0,x.A)(new Date),t-1))},children:function(e){return(0,u.Y)(eM.Dr,{label:e.label,id:e.key},e.key)}})}),(0,u.Y)(j.S,{css:eG.fullWidth,children:(0,u.Y)(es,{replId:n,start:c,hours:i})}),(0,u.Y)(eL,{replId:n,metric:_.d0.Url,start:c,hours:i,count:4,expandable:!0}),(0,u.Y)(eL,{replId:n,metric:_.d0.Referrer,start:c,hours:i,count:4,expandable:!0}),(0,u.Y)(ey,{replId:n,title:"HTTP Statuses (24h)",metric:_.YE.Statuses,start:g,hours:24,colorFn:function(e,n){var t=Number(e);return t<300?A[n%A.length]:t<400?b[n%b.length]:t<500?y[n%y.length]:w[n%w.length]}}),(0,u.Y)(q,{replId:n,start:c,hours:i}),(0,u.FD)(j.S,{css:eG.pies,children:[(0,u.Y)(eL,{replId:n,metric:_.d0.Browser,start:c,hours:i,count:100,variant:"pie"}),(0,u.Y)(eL,{replId:n,metric:_.d0.Browser,start:c,hours:i,count:100,variant:"device-pie"})]}),(0,u.Y)(j.S,{css:eG.map,children:(0,u.Y)(eL,{replId:n,metric:_.d0.Country,start:c,hours:i,count:100,variant:"map"})})]})})},ej=t(18875),eZ=t(60102);function eq(){var e=(0,R._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n          suspendedReason\n        }\n        ...DeploymentsDeployOptionsDeployment\n        repl {\n          ...DeploymentsDeployOptionsAuthzRepl\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return eq=function(){return e},e}var eK={},e$=(0,I.J1)(eq(),eZ.aW,ej.vz,ej.px),eJ=t(5846),eQ=t(82436),eX=t(40172),e0=t(76985),e1=t(2298),e2=t(56984),e5=(0,eO.x)({styles0:[B.wp.height(128),B.wp.width(128),B.wp.borderRadius(2),e1.b.nofill],styles1:[B.wp.position.absolute]});function e4(e){var n=e.color;return(0,u.FD)(j.S,{align:"center",gap:4,children:[(0,u.FD)(j.S,{align:"center",justify:"center",children:[(0,u.Y)("svg",{viewBox:"0 0 128 128",css:e5.styles0,target:"_blank",onClick:function(){window.open("/mobile")},children:(0,u.Y)("path",{fill:null!=n?n:ek.LU.foregroundDefault,d:"m0,13.58v13.58h27.15V0H0v13.58ZM34.91,1.94v1.94h-3.88v3.88h3.88v-3.88h7.76v3.88h3.88v-3.88h-3.88V0h-7.76v1.94Zm31.03,0v1.94h-15.52v7.76h-15.52v3.88h7.76v7.76h-3.88v-3.88h-7.76v11.64h-15.52v7.76h-3.88v3.88h-3.88v-3.88H0v3.88h7.76v3.88H0v7.76h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h15.52v3.88h-3.88v7.76h3.88v-3.88h3.88v-3.88h7.76v-3.88h-7.76v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-19.39h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-7.76h3.88v3.88h3.88v7.76h-3.88v3.88h11.64v-3.88h3.88v3.88h15.52v3.88h-3.88v3.88h3.88v11.64h11.64v3.88h-11.64v3.88h-3.88v3.88h15.52v7.76h-3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h3.88v15.52h3.88v15.52h7.76v3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-7.76v-3.88h-3.88v3.88h3.88v3.88h-11.64v-3.88h3.88v-7.76h7.76v-3.88h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-11.64h-11.64v3.88h3.88v3.88h-7.76v-3.88h-7.76v-3.88h-7.76v3.88h7.76v7.76h-7.76v-3.88h-15.52v7.76h3.88v-3.88h7.76v3.88h3.88v3.88h-3.88v3.88h-11.64v-3.88h-3.88v-7.76h-3.88v15.52h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v3.88h3.88v3.88h7.76v-3.88h-7.76v-3.88h15.52v-3.88h-3.88v-3.88h7.76v-7.76h11.64v7.76h-7.76v3.88h-3.88v7.76h-3.88v3.88h3.88v3.88h27.15v-7.76h3.88v7.76h7.76v-3.88h3.88v3.88h3.88v-3.88h-3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88v3.88h7.76v-3.88h-3.88v-3.88h-7.76v-7.76h-3.88v-7.76h7.76v7.76h7.76v-3.88h-3.88v-7.76h-7.76v-3.88h-7.76v3.88h-3.88v-11.64h3.88v3.88h7.76v-3.88h-7.76v-3.88h3.88v-7.76h3.88v-3.88h3.88v3.88h3.88v3.88h-3.88v15.52h3.88v-11.64h3.88v-7.76h-3.88v-7.76h3.88v-7.76h-3.88v-11.64h-3.88v11.64h3.88v3.88h-3.88v3.88h-7.76v-3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-7.76h-7.76v3.88h3.88v3.88h-11.64v-3.88h3.88v-11.64h-3.88v7.76h-3.88v-11.64h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-3.88h7.76V3.88h3.88v3.88h3.88V0h-7.76v3.88h-3.88V0h-3.88v3.88h-7.76V0h-7.76v1.94Zm34.91,11.64v13.58h27.15V0h-27.15v13.58Zm-31.03-5.82v3.88h-7.76v3.88h-3.88v7.76h3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v7.76h-3.88v-7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h-11.64v-3.88h11.64v-3.88h3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h-7.76v-3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h7.76v-3.88h3.88v3.88Zm-46.8,5.82v9.45H4.13V4.13h18.89v9.45Zm100.85,0v9.45h-18.89V4.13h18.89v9.45Zm-116.11,0v5.82h11.64V7.76H7.76v5.82Zm73.7-3.88v1.94h-3.88v7.76h-3.88v3.88h3.88v3.88h3.88v-7.76h3.88v7.76h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88V7.76h7.76v1.94Zm27.15,3.88v5.82h11.64V7.76h-11.64v5.82Zm-38.79,11.64v1.94h3.88v-3.88h-3.88v1.94Zm-27.15,3.88v1.94h3.88v-3.88h-3.88v1.94Zm46.55,7.76v1.94h-11.64v-3.88h11.64v1.94Zm-62.06,7.76v1.94h-3.88v3.88h11.64v3.88h-11.64v3.88h3.88v3.88h3.88v11.64h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h-3.88v-7.76h3.88v-11.64h3.88v3.88h3.88v-7.76h-7.76v-3.88h-3.88v-3.88h3.88v-3.88h15.52v1.94Zm81.45,1.94v3.88h3.88v7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h3.88v-11.64h-3.88v-3.88h-3.88v-3.88h-3.88v-3.88h15.52v3.88Zm-96.97,1.94v1.94h3.88v-3.88h-3.88v1.94Zm89.21,0v1.94h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm-81.45,3.88v1.94h3.88v-3.88h-3.88v1.94Zm77.58,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-77.58,9.7v3.88h-7.76v7.76h3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-7.76v3.88Zm19.39-1.94v1.94h3.88v-3.88h-3.88v1.94Zm0,11.64v1.94h-3.88v7.76h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h-3.88v-3.88h3.88v-3.88h-3.88v1.94Zm58.18,7.76v1.94h3.88v-3.88h3.88v11.64h-7.76v-3.88h-3.88v-7.76h3.88v1.94Zm15.52,0v1.94h-3.88v-3.88h3.88v1.94ZM0,95.03v1.94h7.76v-3.88H0v1.94Zm23.27,0v1.94h3.88v-3.88h-3.88v1.94Zm46.55,0v1.94h-3.88v-3.88h3.88v1.94Zm38.79,7.76v5.82h-11.64v-11.64h11.64v5.82ZM0,114.42v13.58h27.15v-27.15H0v13.58Zm65.94-11.64v1.94h-3.88v-3.88h3.88v1.94Zm34.91,0v1.94h3.88v-3.88h-3.88v1.94Zm-42.67,3.88v1.94h-3.88v3.88h-3.88v-3.88h3.88v-3.88h3.88v1.94Zm-35.16,7.76v9.45H4.13v-18.89h18.89v9.45Zm-15.26,0v5.82h11.64v-11.64H7.76v5.82Zm100.85,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-69.82,3.88v1.94h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm54.3,0v1.94h-3.88v-3.88h3.88v1.94Zm31.03,3.88v1.94h3.88v-3.88h-3.88v1.94Z"})}),(0,u.Y)(e2.A,{size:32,css:e5.styles1,color:n})]}),(0,u.Y)(V.EY,{variant:"small",color:"dimmer",children:"Scan to install"})]})}var e3=t(70953),e8=t(37360),e7=(0,eO.x)({row:[B.wp.pb(12),B.wp.rowWithGap(2),B.wp.justify.center],buttonLeft:[B.wp.borderRadius(8,0,0,8),B.wp.flex.growAndShrink(1)],buttonRight:[B.wp.borderRadius(0,8,8,0)]});function e6(e){var n=e.shouldShow,t=e.onDismissTour,r=(0,s._)((0,d.useState)(!1),2),i=r[0],o=r[1];return(0,u.FD)(u.FK,{children:[n?(0,u.FD)(j.S,{css:e7.row,children:[(0,u.Y)(eX.$n,{iconLeft:(0,u.Y)(e8.A,{}),onClick:function(){(0,eQ.u4)(eJ.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:e7.buttonLeft}),(0,u.Y)(eX.$n,{css:e7.buttonRight,text:"",iconLeft:(0,u.Y)(e3.A,{}),onClick:t})]}):null,(0,u.Y)(e0.a,{isOpen:i,onRequestClose:function(){o(!1),t()},children:(0,u.Y)(e4,{})})]})}var e9=t(85848),ne=t(46549),nn=t(32442),nt=t(41276),nr=t(30282),ni=t(34805),no=t(93515),na=t(63516),nl=t(68753),ns=(0,eO.x)({self:B.wp.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},deployOptions:[B.wp.p(16),B.wp.pt(12),B.wp.borderRadius(8),B.wp.border({color:ek.LU.outlineDimmest})]}),nc=function(e){var n,t,r,i,o,a,l,c,p,f,v,y,b,S,Y,A,C,x,_,k=e.deploymentId,D=e.replId,R=e.dotReplit,I=e.fs,T=e.ports,P=e.secrets,L=e.onError,U=e.expanded,N=e.setExpanded,O=e.shouldShowMobileTour,M=e.onDismissMobileTour,B=e.openNetworkingPane,H=e.onResume,z=e.hasAgentSession,W=(0,h.Tp)().redeployWithNoNewOptions,V=(0,h.uS)(),Z=(i=(n={deploymentId:k,dotReplit:R}).deploymentId,o=n.dotReplit,l=(a=(0,s._)((0,d.useState)(null),2))[0],c=a[1],(0,d.useEffect)(function(){var e=!1;function n(){return(n=(0,g._)(function(){var n;return(0,w.YH)(this,function(t){switch(t.label){case 0:return[4,(0,e9.XE)(o)];case 1:if(n=t.sent(),e)return[2];return c(n),[2]}})})).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){e=!0}},[o]),y=(p={variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"},f=(0,E._)({},eK,p),v=F.I(e$,f)).data,b=v.loading,S=v.error,Y=(null==y?void 0:null===(t=y.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?y.hostingDeployment:null,(null==y?void 0:null===(r=y.hostingDeployment)||void 0===r?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===l||!Y&&b?{data:null,erorr:null,loading:!0}:S||!Y?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:Y,config:l,error:null,loading:!1}),q=(0,h.mj)().deployability,K=null===(A=Z.deployment)||void 0===A?void 0:A.currentBuild,$=(0,ne.g)({secrets:P,replId:D}).devSecrets,J=null===(C=Z.deployment)||void 0===C?void 0:C.currentBuild.envVars,Q=null===(x=Z.deployment)||void 0===x?void 0:x.repl.authorizations.editSecrets.isAuthorized,X=null===(_=Z.deployment)||void 0===_?void 0:_.repl.authorizations.editDeploymentSecrets.isAuthorized,ee=(0,d.useMemo)(function(){return $&&J&&Q&&X?(0,no.j)({secrets:new Map(null==J?void 0:J.map(function(e){return[e.name,e.value]})),otherSecrets:$}).missing.size:0},[$,J,Q,X]);if(Z.error)return(0,u.Y)(nn.Wx,{text:Z.error});if(U)return K?(0,u.Y)(j.S,{css:ns.deployOptions,children:(0,u.Y)(nt.S,{initialSubdomain:"",provider:K.provider,deploymentId:k,replId:D,fs:I,secrets:P,dotReplit:R,ports:T,onCancel:function(){return N(!1)},onDeploy:function(){return N(!1)},onError:L,initialSecretsSyncExpanded:ee>0,openNetworkingPane:B,hasAgentSession:z})}):(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:"Provider not found"});var en=Z.loading||!q.redeploy.isAuthorized||!(V===m.d.Ready||V===m.d.Suspended);return(0,u.FD)(j.S,{css:ns.self,children:[(0,u.Y)(nr.Y,{deployability:q,isRedeploy:!0}),(0,u.FD)(j.S,{css:ns.ctaGroup,children:[(0,u.Y)(eX.$n,{disabled:en,onClick:(0,g._)(function(){return(0,w.YH)(this,function(e){switch(e.label){case 0:if(Z.loading)return[2];if(V===m.d.Suspended)return H(),[2];return[4,W({hasAgentSession:z})];case 1:return e.sent(),[2]}})}),text:V===m.d.Suspended?"Resume":"Redeploy",iconLeft:(0,u.Y)(na.A,{})}),(0,u.Y)(eX.$n,{disabled:en,text:ee>0?"".concat(ee," ").concat((0,ni.A)("secrets",ee)," out of sync"):"Edit commands and secrets",iconLeft:ee>0?(0,u.Y)(nl.A,{}):void 0,onClick:function(){return N(!0)}}),(0,u.Y)(e6,{shouldShow:O,onDismissTour:M})]})]})},nu=(0,eO.x)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),nd=(0,eO.x)({container:{width:7,position:"relative"},linePast:[nu.line,{backgroundColor:ek.LU.outlineDimmest,top:15,bottom:-10}],linePresent:[nu.line,{backgroundImage:"linear-gradient(to top, ".concat(ek.LU.outlineDimmest,", ").concat(ek.LU.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[nu.line,{borderRight:"1px dashed "+ek.LU.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[nu.line,{backgroundColor:ek.LU.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[nu.line,{borderRight:"1px dashed "+ek.LU.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[nu.circlePast,B.wp.backgroundColor.accentPositiveDefault],circlePastRed:[nu.circlePast,B.wp.backgroundColor.accentNegativeDefault],circlePastGray:[nu.circlePast,B.wp.backgroundColor.outlineDimmer],circlePresent:[B.wp.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[B.wp.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function np(e){var n,t;switch(e.type){case"pastSuccess":n=nd.linePast,t=(0,u.Y)(j.S,{css:nd.circlePastGreen});break;case"pastFail":n=nd.linePast,t=(0,u.Y)(j.S,{css:nd.circlePastRed});break;case"pastNeutral":n=nd.linePast,t=(0,u.Y)(j.S,{css:nd.circlePastGray});break;case"present":n=nd.linePresent,t=(0,u.Y)(j.S,{css:nd.circlePresent});break;case"future":n=nd.lineFuture,t=(0,u.Y)("svg",{viewBox:"0 0 9 9",css:nd.circleFuture,children:(0,u.Y)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:ek.LU.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":n=nd.lineFutureFailClosed,t=(0,u.Y)(j.S,{css:nd.circleFutureFailClosed});break;case"futureFailOpen":n=nd.lineFutureFailOpen,t=null}return(0,u.FD)(j.S,{css:nd.container,children:[(0,u.Y)(j.S,{css:n,"data-timeline-line":!0}),t]})}var nf=t(64486),nh=t(37824);function nm(){var e=(0,R._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nm=function(){return e},e}var ng={},nv=(0,I.J1)(nm()),nw=t(43751),ny=t(96155),nb=t(75838);function nS(){var e=(0,R._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    status\n    state\n    domain\n  }\n"]);return nS=function(){return e},e}function nY(){var e=(0,R._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return nY=function(){return e},e}function nA(){var e=(0,R._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return nA=function(){return e},e}function nC(){var e=(0,R._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return nC=function(){return e},e}var nx={},n_=(0,I.J1)(nS()),nk=(0,I.J1)(nY(),n_),nD=(0,I.J1)(nA(),nk),nE=(0,I.J1)(nC(),n_);function nR(){var e=(0,R._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return nR=function(){return e},e}function nI(){var e=(0,R._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return nI=function(){return e},e}function nF(){var e=(0,R._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nF=function(){return e},e}var nT={},nP=(0,I.J1)(nR()),nL=(0,I.J1)(nI(),nk,ny.yH),nU=(0,I.J1)(nF(),nP),nN=t(98541),nO=t(16021),nM=t(14195),nB=t(14753),nH=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?(0,u.Y)(nl.A,{alt:"error"}):n<t?(0,u.Y)(nO.A,{alt:"success"}):n===t?(0,u.Y)(nB.A,{alt:"current"}):(0,u.Y)(nM.A,{alt:"waiting"})},nz=function(e){var n=e.stage,t=e.activeStage,r=e.erroredStage;return void 0===t?null:n===r?"negative":n<t?"positive":n===t?"primary":null},nW=function(e){var n,t=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=void 0!==i;return(0,u.Y)(d.Fragment,{children:(0,u.Y)(nN.a,{text:l?o:"",colorway:null!==(n=nz({stage:t,activeStage:i,erroredStage:a}))&&void 0!==n?n:void 0,variant:"filled",css:[l&&i<=t&&!a?W.S.foregroundPulse():{},B.wp.border({color:ek.LU.backgroundDefault}),B.wp.overflow("hidden"),(0,A._)({position:"relative",flex:1,height:26,zIndex:r-t,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":B.wp.display.none},B.kL.min(400),{" span":B.wp.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:l?(0,u.Y)(nH,{stage:t,activeStage:i,erroredStage:a}):void 0})},l&&i<=t&&!a?1:0)},nG=t(55382),nV=t(82402),nj=t(84321),nZ=t(56268),nq=t(83733),nK=t(9809),n$=t(97802),nJ=t(75897),nQ=(0,eO.x)({link:{color:ek.LU.foregroundDefault,textDecoration:"underline",":hover":{color:ek.LU.accentPrimaryStronger}},list:[{listStyle:"inside"}]});function nX(e){var n=e.provider,t=e.onViewApplicationLogs,r=(0,h.O6)();return(0,u.FD)(u.FK,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,u.Y)("br",{}),(0,u.Y)("br",{}),"Ways to debug:",(0,u.FD)("ul",{css:nQ.list,children:[r?(0,u.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,u.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,u.FD)("li",{children:["View our"," ",(0,u.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:nQ.link,onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),n!==y.Q0.Static&&t?(0,u.FD)("li",{children:["Look for errors in your application's server logs.",(0,u.Y)(eX.$n,{text:"Logs",size:"small",iconLeft:(0,u.Y)(nJ.A,{}),onClick:t,css:B.wp.display.inlineFlex})," "]}):null,(0,u.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}function n0(){var e=(0,h.O6)();return(0,u.FD)(u.FK,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,u.Y)("br",{}),(0,u.Y)("br",{}),"Ways to debug:",(0,u.FD)("ul",{css:nQ.list,children:[e?(0,u.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,u.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,u.FD)("li",{children:["View our"," ",(0,u.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:nQ.link,onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),(0,u.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}var n1=t(56573),n2=t(31955),n5=t(29048),n4=t(30111),n3=t(83515),n8=t(32401),n7=[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],n6=(0,eO.x)({errorsSection:[B.wp.p(8),B.wp.colorMixBg(ek.LU.accentNegativeDimmest,"transparent",.3),B.wp.color.accentNegativeStrongest],errorsSectionTitleText:[B.wp.color.foregroundDefault],errorsList:[B.wp.display.flex,B.wp.colWithGap(4),B.wp.pt(6),B.wp.pl(24),{listStyleType:"disc"}],suggestionsSectionAssistant:[B.wp.colorMixBg(ek.LU.tealDimmest,"transparent",.15),B.wp.border({direction:"top",color:ek.LU.outlineDimmer})],aiSuggestions:[B.wp.p(8),B.wp.colWithGap(8)],aiSuggestionsTitle:[B.wp.color.blurpleStrongest,B.wp.align.center],aiSuggestionsList:B.wp.pl(24),textButton:[n7]});function n9(e){var n=e.title,t=e.debugSummary,r=e.view,i=e.provider,o=e.onViewBuildLogs,a=e.viewingBuildLogs,l=e.viewBuildLogsIcon,c=e.openFile,p=e.openDebugChat,f=(0,nq.A)(),m=(0,h.i$)(),g=(0,d.useCallback)(function(e){(0,nZ.Q)({error:e,context:"useHostingDebugSummary",extras:{replId:f,deploymentId:m,debugSummary:t,view:r,provider:i}})},[t,m,i,f,r]),v=(0,b.Nx)(t,g),w=v.loading,y=v.debugResult,S=v.error,Y=(0,b.Nd)(),A=(0,h.om)().listFiles,C=(0,s._)((0,d.useState)([]),2),x=C[0],_=C[1],k=(0,b.Au)({initialSessionId:t.sessionId}).sendMessage,D=(0,b.dm)(),E=D.assistantMode,R=D.getAssistantMessageModel,I=D.getAssistantMessageIntent,F=(0,n$.T)({mode:E,authz:(0,nK.L)().authorizations}),T=(0,d.useRef)(!1);return(0,d.useEffect)(function(){m&&y&&!T.current&&(T.current=!0,(0,eU.QH)("viewed",{view:r,debugSummary:t,debugResult:y,replId:f,deploymentId:m}),y.suggestions.some(function(e){return!!tn(e)})&&A().then(function(e){e.files&&_(e.files)}))},[y,r,t,f,m,A]),(0,u.Y)(te,{title:n,debugSummary:t,debugResult:y,provider:i,viewingBuildLogs:a,viewBuildLogsIcon:l,loading:w,files:x,error:S,onViewBuildLogs:o,openFile:c,onDebugWithAssistant:function(){Y(t.sessionId,{sessionType:nj.dF3.CHAT}),k({kind:"message",message:"Can you help me with this deployment issue?",model:R(F),intent:I()}),p(t.sessionId)}})}function te(e){var n=e.title,t=e.debugSummary,r=e.debugResult,i=e.provider,o=e.viewingBuildLogs,a=e.viewBuildLogsIcon,l=e.loading,s=e.files,c=e.error,d=e.onViewBuildLogs,p=e.openFile,f=e.onDebugWithAssistant;return(0,u.FD)(n2.ui,{elevated:!0,children:[(0,u.FD)(j.S,{css:n6.errorsSection,gap:4,children:[(0,u.FD)(j.S,{row:!0,gap:12,align:"center",justify:"space-between",children:[(0,u.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,u.Y)(nl.A,{color:ek.LU.accentNegativeStronger}),(0,u.Y)(V.EY,{css:n6.errorsSectionTitleText,multiline:!1,children:n})]}),(0,u.Y)(j.S,{row:!0,gap:0,children:"function"==typeof d?(0,u.Y)(j.S,{children:(0,u.FD)("button",{css:n6.textButton,onClick:d,children:[o?"Hide":"View"," logs"," ",(0,u.Y)(tt,{viewingBuildLogs:o,viewBuildLogsIcon:a})]})}):null})]}),(0,u.FD)(V.EY,{children:[l?(0,u.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,u.Y)(nB.A,{}),(0,u.Y)(V.EY,{children:"Analyzing error, generating suggestions..."})]}):(0,u.Y)(u.FK,{children:r?(0,u.FD)(u.FK,{children:[(0,u.Y)(V.EY,{children:"Your deployment attempt had the following errors:"}),(0,u.Y)("ul",{css:n6.errorsList,children:r.errors.map(function(e){return(0,u.Y)("li",{children:e},e)})})]}):null}),c?(0,u.FD)(u.FK,{children:[(0,u.FD)(V.EY,{children:["An error occurred while loading AI generated suggestions. Please try deploying again or follow the common debugging steps."," "]}),t.type===y.Uf.DeploymentBuildError?(0,u.Y)(n0,{}):null,t.type===y.Uf.DeploymentPromotionError?(0,u.Y)(nX,{provider:i}):null]}):null]})]}),!l&&r?(0,u.Y)(j.S,{css:n6.suggestionsSectionAssistant,children:(0,u.FD)(j.S,{css:n6.aiSuggestions,children:[(0,u.FD)(j.S,{css:n6.aiSuggestionsTitle,row:!0,gap:8,children:[(0,u.Y)(n3.A,{}),(0,u.Y)(V.EY,{multiline:!1,style:{flex:"1 1 auto",color:ek.LU.tealStrongest},children:"Assistant suggestions"}),(0,u.Y)(eX.$n,{size:"small",iconLeft:(0,u.Y)(n8.A,{}),colorway:"teal",text:"Debug with ".concat(b.BP),onClick:f})]}),(0,u.Y)("ol",{css:n6.aiSuggestionsList,children:r.suggestions.map(function(e,n){return(0,u.Y)(ti,{suggestion:e,files:s,openFile:p},"".concat(t.id,"-").concat(n))})})]})}):null]})}function tn(e){var n,t,r,i;return"File"in e&&(null===(n=e.File)||void 0===n?void 0:n.file)!=="null"&&(null===(t=e.File)||void 0===t?void 0:t.file)!==""?(null===(r=e.File)||void 0===r?void 0:r.file.replace("./",""))||void 0:"file"in e&&"null"!==e.file&&""!==e.file&&(null===(i=e.file)||void 0===i?void 0:i.replace("./",""))||void 0}function tt(e){var n=e.viewingBuildLogs;return e.viewBuildLogsIcon||(n?(0,u.Y)(n4.A,{}):(0,u.Y)(n5.A,{}))}var tr=(0,eO.x)({self:{"[data-accordion-header]":[B.wp.align.start,B.wp.flex.growAndShrink(1),B.wp.rowWithGap(4)]},headerInner:[B.wp.flex.growAndShrink(1),B.wp.align.baseline,B.wp.rowWithGap(4)],description:[B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],interactiveDescription:[n7,B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],body:[B.wp.border(),B.wp.borderRadius(),B.wp.mt(4),B.wp.mb(8),B.wp.overflow("hidden"),B.wp.font.code,B.wp.fontSize("small"),{lineHeight:ek.LU.lineHeightSmall}],before:[B.wp.color.accentNegativeStrongest,B.wp.colorMixBg(ek.LU.accentNegativeDimmest,"transparent",.3),B.wp.px(6),B.wp.py(2)],after:[B.wp.color.accentPositiveStrongest,B.wp.colorMixBg(ek.LU.accentPositiveDimmest,"transparent",.3),B.wp.px(6)],fileLinkButton:[n7,B.wp.fontSize("small")]});function ti(e){var n=e.suggestion,t=e.files,r=e.openFile,i=(0,d.useRef)(tn(n)),o=(0,s._)((0,d.useState)(),2),a=o[0],l=o[1];(0,d.useEffect)(function(){if(i.current&&!a){var e=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)if(o.value===i.current){l(i.current);return}}catch(e){n=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}},[t,a]);var c=(null==n?void 0:n.after)&&(null==n?void 0:n.after)!=="",p=(null==n?void 0:n.before)&&(null==n?void 0:n.before)!=="";return c||p?(0,u.Y)("li",{css:tr.self,children:(0,u.Y)(n1.A,{toggleOn:"chevron",chevron:"none",headerContent:function(e){var t=e.isExpanded,i=e.toggle;return(0,u.FD)(u.FK,{children:[(0,u.FD)(j.S,{css:tr.headerInner,children:[(0,u.FD)("button",{css:tr.interactiveDescription,onClick:i,children:[(0,u.Y)(V.EY,{maxLines:t?void 0:1,style:{color:"inherit"},children:n.description})," "]}),a?(0,u.Y)("button",{css:tr.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]}),(0,u.Y)(eD.K0,{alt:"Show suggestion",onClick:i,children:t?(0,u.Y)(n4.A,{}):(0,u.Y)(n5.A,{})})]})},headerProps:{"data-accordion-header":""},children:(0,u.FD)(j.S,{css:tr.body,children:[p?(0,u.Y)(j.S,{css:tr.before,children:(0,u.Y)("pre",{children:n.before})}):null,c?(0,u.Y)(j.S,{css:tr.after,children:(0,u.Y)("pre",{children:n.after})}):null]})})}):(0,u.Y)("li",{css:tr.self,children:(0,u.FD)(j.S,{css:tr.headerInner,children:[(0,u.FD)(j.S,{css:tr.description,children:[(0,u.Y)(V.EY,{style:{color:"inherit"},children:n.description})," "]}),a?(0,u.Y)("button",{css:tr.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]})})}function to(e){var n=e.currentStatus,t=e.provider,r=e.logs,i=e.viewBuildLogs,o=e.debugSummary,a=e.openFile,l=e.openDebugChat,s=e.onViewBuildLogs,c=e.onViewApplicationLogs;if((0,h.mj)().hasDebugSummariesAuthorization&&o){var d=n===y.nH.Building?"Build failed":"Promotion failed";return(0,u.Y)(n9,{title:d,debugSummary:o,view:S.P.DeploymentInProgress,provider:t,openFile:a,openDebugChat:l})}return n===y.nH.Building?(0,u.Y)(tp,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s}):n===y.nH.Promoting?(0,u.Y)(td,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s,onViewApplicationLogs:c}):null}function ta(e){var n=e.currentStatus,t=e.provider,r=e.debugSummary,i=e.openFile,o=e.openDebugChat,a=e.onViewApplicationLogs;return(0,h.mj)().hasDebugSummariesAuthorization&&r?(0,u.Y)(n9,{title:"Deployment failed",debugSummary:r,view:"deploy_history_logs",provider:t,openFile:i,openDebugChat:o}):n===y.nH.Building?(0,u.Y)(tp,{provider:t,openFile:i}):n===y.nH.Promoting?(0,u.Y)(td,{provider:t,openFile:i,onViewApplicationLogs:a}):null}var tl=(0,eO.x)({self:[B.wp.borderRadius(4),B.wp.overflow("hidden"),B.wp.border({color:ek.LU.outlineDimmer}),B.wp.mb(6)]});function ts(e){var n=e.title,t=e.debugSummary,r=e.provider,i=e.openFile,o=e.openDebugChat,a=e.onViewBuildLogs;return(0,u.Y)(j.S,{css:tl.self,children:(0,u.Y)(n9,{title:n,debugSummary:t,view:S.P.Deployment,provider:r,onViewBuildLogs:a,viewBuildLogsIcon:(0,u.Y)(nJ.A,{}),openFile:i,openDebugChat:o})})}var tc=(0,eO.x)({errorContainer:[B.wp.p(12),B.wp.colWithGap(12)],xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden"),B.wp.borderRadius(4,4,0,0)],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(200)],xtermButton:B.wp.borderRadius(0,0,4,4)});function tu(e){var n=e.title,t=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,nV.V)(),c=(0,h.om)(),p=(0,s._)((0,nG.A)({openFile:a,listFiles:c.listFiles}),2),f=p[0],m=p[1],g=(0,d.useRef)(r?r.slice(-5):[]);return(0,d.useEffect)(function(){g.current.length&&g.current.forEach(function(e){null==f||f.write(e)})},[f]),(0,u.FD)(n2.ui,{elevated:!0,css:tc.errorContainer,children:[(0,u.FD)(j.S,{gap:8,children:[(0,u.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,u.Y)(nl.A,{color:ek.LU.accentNegativeStronger}),(0,u.Y)(V.EY,{multiline:!1,children:n})]}),(0,u.Y)(V.EY,{children:t})]}),void 0===i||i?null:(0,u.FD)(j.S,{children:[(0,u.Y)(j.S,{css:tc.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,u.Y)(j.D.div,{css:tc.xterm,ref:m})}),(0,u.Y)(eX.$n,{text:"View all",iconLeft:(0,u.Y)(eR.A,{}),onClick:function(){return null==o?void 0:o()},css:tc.xtermButton})]})]})}function td(e){return(0,u.Y)(tu,(0,E._)({title:"Your app failed to promote",description:(0,u.Y)(nX,{provider:e.provider,onViewApplicationLogs:e.onViewApplicationLogs})},e))}function tp(e){return(0,u.Y)(tu,(0,E._)({title:"Your app failed to build",description:(0,u.Y)(n0,{})},e))}function tf(e){return(0,u.Y)(tu,(0,E._)({title:"This build's deploy logs have expired",description:(0,u.Y)(u.FK,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}var th=t(25877),tm=t(65599),tg=[{id:0,title:"Provision",statusType:y.nH.Pending},{id:1,title:"Build",statusType:y.nH.Building},{id:2,title:"Bundle",statusType:y.nH.Running},{id:3,title:"Promote",statusType:y.nH.Promoting},{id:4,statusType:y.nH.Success}],tv=tg.filter(function(e){return"title"in e}),tw=function(e){return tg.find(function(n){return n.statusType===e})},ty=(0,eO.x)({base:{borderRadius:ek.LU.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24}}),tb=[B.wp.borderRadius(),{border:"1px solid ".concat(ek.LU.outlineDimmest)}],tS=(0,eO.x)({container:tb,top:[B.wp.p(16),B.wp.pt(12)],header:[B.wp.width("100%")],headerLeft:[B.wp.align.baseline,B.wp.flex.shrink(1)],started:[B.wp.rowWithGap(6),B.wp.flex.growAndShrink(1),B.wp.justify.end,B.wp.color.foregroundDimmest],cancel:[ty.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[B.wp.flex.grow(1),{zIndex:0}],bottom:[B.wp.borderRadius(0,0,4,4),B.wp.overflow("hidden")],logsOpen:[B.wp.overflow("hidden"),B.wp.height("auto")],logsClosed:[B.wp.overflow("hidden"),B.wp.height(0)],xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden")],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(340)],textButton:[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]}),tY=function(e){var n,t,r,i,o=(r={variables:{replId:(0,nq.A)(),provider:null!==(n=e.provider)&&void 0!==n?n:y.Q0.CloudRun},skip:!e.provider},i=(0,E._)({},nT,r),F.I(nU,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl.authorizations.editDeploymentStatus:void 0,l=null!==(t=null==a?void 0:a.isAuthorized)&&void 0!==t&&t;return(0,u.FD)(j.S,{css:tS.top,gap:12,children:[(0,u.FD)(j.S,{css:tS.header,row:!0,gap:8,justify:"space-between",children:[(0,u.FD)(j.S,{css:tS.headerLeft,row:!0,gap:8,children:[(0,u.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),e.timeStarted&&e.userDisplayName?(0,u.FD)(V.EY,{css:tS.started,multiline:!1,maxLines:1,children:["Started ".concat((0,nh.A)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,u.Y)("span",{children:e.userDisplayName})]}):null,(0,u.Y)(tm.m_,{isDisabled:l,tooltip:null==a?void 0:a.message,children:(0,u.Y)(eX.$n,{size:"small",text:"Cancel",css:tS.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,u.Y)(nB.A,{}):void 0,disabled:e.isCanceling||!l,"data-cancelable":e.onCancel?"true":"false"})})]}),(0,u.Y)(j.S,{row:!0,gap:6,justify:"end",children:e.onViewBuildLogs?(0,u.FD)("button",{css:tS.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,u.Y)(n4.A,{}):(0,u.Y)(n5.A,{})]}):null})]}),(0,u.Y)(j.S,{css:tS.stages,row:!0,children:tv.map(function(n){var t=n.id,r=n.title;return(0,u.Y)(nW,{stage:t,totalStagesWithTitle:tv.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},t)})})]})},tA=function(e){return(0,h.uS)()===m.d.Preparing?(0,u.Y)(j.S,{css:tS.container,children:(0,u.Y)(tY,{})}):(0,u.Y)(tC,(0,E._)({},e))},tC=function(e){var n,t,r,i,o,a,l,c,p,f,m,b,S,Y,A=e.initialBuild,C=e.viewBuildLogsOnLoad,x=e.onViewLogs,_=e.onCanceled,k=e.onError,D=e.openFile,R=e.openDebugChat,I=(0,h.UM)(),T=(0,h.tq)(),P=T?{id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary}:void 0,L=(0,d.useRef)(A||P),U=(n={skip:!(null===(i=L.current)||void 0===i?void 0:i.id),variables:{input:{buildId:null!==(Y=null===(o=L.current)||void 0===o?void 0:o.id)&&void 0!==Y?Y:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":k(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var n=e.hostingBuildDeployActionHistory.results;if(n&&n.length>0){var t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;switch(c.__typename){case"HostingBuildDeployLogAction":t.push(c.log);break;case"HostingBuildDeployStatusAction":r.push(c)}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}eo({type:"setHistory",payload:t});var u=!0,d=!1,p=void 0;try{for(var f,h=r[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;ea(m.status,m.debugSummary)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}break;default:k("Unexpected typename.")}},onError:function(e){k(e.message)}},t=(0,E._)({},ng,n),F.I(nv,t)),N=U.loading,O=U.refetch;(0,h.kW)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":eo({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":ea(e.status,e.debugSummary)}});var M=(0,s._)((0,d.useState)(L.current?null===(a=tw(L.current.status))||void 0===a?void 0:a.id:void 0),2),B=M[0],H=M[1],z=(0,s._)((0,d.useState)((null===(l=L.current)||void 0===l?void 0:l.status)==="failed"?null===(c=tw(null===(p=L.current)||void 0===p?void 0:p.status))||void 0===c?void 0:c.id:void 0),2),W=z[0],G=z[1],V=(0,s._)((0,d.useState)((null===(f=L.current)||void 0===f?void 0:f.debugSummary)||void 0),2),Z=V[0],q=V[1],K=(0,s._)((0,d.useState)(!1),2),$=K[0],J=K[1],Q=(0,h.om)(),X=(0,s._)((0,nG.A)({openFile:D,listFiles:Q.listFiles}),2),ee=X[0],en=X[1],et=(0,nV.V)(),er=(0,s._)((0,d.useReducer)(function(e,n){switch(n.type){case"setHistory":return ee&&ee.clear(),{allLogs:(0,v._)(n.payload).concat((0,v._)(e.allLogs))};case"addLog":return{allLogs:(0,v._)(e.allLogs).concat([n.payload]),recentLogs:[n.payload]};case"refetchLogs":return ee&&ee.clear(),N||O(),{allLogs:[]}}},{allLogs:[]}),2),ei=er[0],eo=er[1],ea=function(e,n){if(e===y.nH.Failed)G(B),n&&q(n);else{var t=tw(e);if(!t)return;H(t.id)}},el=(r=(0,g._)(function(){return(0,w.YH)(this,function(e){switch(e.label){case 0:return J(!0),[4,I()];case 1:return e.sent(),_(),[2]}})}),function(){return r.apply(this,arguments)}),es=(0,s._)((0,d.useState)(C||!1),2),ec=es[0],eu=es[1],ed=function(){eu(!ec),ec||(0,eU.Ae)({context:"deploy_progress_logs"})};(0,d.useEffect)(function(){(0,eU.Ae)({context:"deploy_progress"})},[]),(0,d.useEffect)(function(){var e;(null===(e=L.current)||void 0===e?void 0:e.id)&&T&&T.id!==L.current.id&&(L.current={id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary},H(void 0),G(void 0),eo({type:"refetchLogs"}))},[T,null===(m=L.current)||void 0===m?void 0:m.id,O]),(0,d.useEffect)(function(){var e;void 0!==B&&(null===(e=L.current)||void 0===e?void 0:e.status)==="failed"&&G(B)},[B,null===(b=L.current)||void 0===b?void 0:b.status]),(0,d.useEffect)(function(){if(ee){if(ei.recentLogs){ei.recentLogs.forEach(function(e){return ee.write(e)});return}ei.allLogs.forEach(function(e){return ee.write(e)})}},[ei,ee]);var ep=null===(S=tg.find(function(e){return e.id===B}))||void 0===S?void 0:S.statusType,ef=ep!==y.nH.Success&&!W;return L.current?(0,u.FD)(j.S,{css:tS.container,children:[(0,u.Y)(tY,{onCancel:ef?el:void 0,isCanceling:$,onViewBuildLogs:ed,viewBuildLogs:ec,provider:L.current.provider,timeStarted:L.current.timeStarted,userDisplayName:L.current.userDisplayName,activeStage:B,erroredStage:W}),(0,u.FD)(j.S,{css:tS.bottom,children:[(0,u.FD)(j.S,{css:ec?tS.logsOpen:tS.logsClosed,children:[(0,u.Y)(th.a,{}),(0,u.Y)(j.S,{css:tS.xtermContainer,style:{backgroundColor:null==et?void 0:et.background},children:(0,u.Y)(j.D.div,{css:tS.xterm,ref:en})})]}),W&&ep?(0,u.FD)(u.FK,{children:[(0,u.Y)(th.a,{}),(0,u.Y)(to,{currentStatus:ep,provider:L.current.provider,debugSummary:Z,logs:ei.allLogs,viewBuildLogs:ec,openFile:D,openDebugChat:R,onViewBuildLogs:ed,onViewApplicationLogs:x})]}):null]})]}):null},tx=t(17944),t_=t(29911),tk=t(82489),tD=function(e){return e.Current="current",e}(tD||{}),tE=(0,A._)({},"current",{icon:(0,u.Y)(function(e){var n=e.color;return(0,u.Y)(j.S,{css:[{textTransform:"capitalize"}],align:"center",row:!0,gap:8,children:(0,u.Y)(j.S,{tag:"span",css:[B.wp.width("8px"),B.wp.height("8px"),B.wp.borderRadius("full"),{backgroundColor:n,boxShadow:"0 0 12px ".concat(n)}]})})},{color:ek.LU.blueStronger}),text:"Current deployment"}),tR=j.D.div,tI=function(e){var n=e.activityLogItem.type,t=(0,s._)((0,d.useState)(!1),2),r=t[0],i=t[1],o=(0,s._)((0,d.useState)(!1),2),a=o[0],l=o[1],c=(0,d.useRef)(!1);(0,d.useEffect)(function(){c.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var p=n in tE&&tE[n];if(!p)return null;var f=p.icon,h=p.text;return(0,u.Y)(j.S,{css:[B.wp.p(8)],onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,u.FD)(tk.A,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,u.Y)(tR,{css:B.wp.cursor.pointer,children:f}),(0,u.Y)(j.S,{css:[B.wp.maxWidth(240)],children:(0,u.Y)(V.EY,{children:h})})]})})},tF=t(1175),tT=t(81243),tP=t(29567),tL=(0,eO.x)({activityLogContainerDesktop:[B.wp.pb(4),B.wp.align.center],rollbackPillSpan:[e1.b.listItem,B.wp.display.inlineBlock,B.wp.px(6),B.wp.fontSize(ek.LU.fontSizeDefault),B.wp.color.foregroundDimmer,B.wp.borderRadius(16),{whiteSpace:"nowrap"}],longId:[B.wp.maxWidth(260)],shortId:[B.wp.pl(4),B.wp.color.foregroundDimmer],buildIdColumn:[B.wp.flex.row,B.wp.minWidth(85)],pillSpanActivityLog:[B.wp.pl(16)],displayName:[B.wp.fontWeight.medium,B.wp.pl(6)],formattedText:[B.wp.pl(4),B.wp.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),tU=(0,eO.x)({subtitleView:[B.wp.py(4),B.wp.flex.row,B.wp.align.center]}),tN=function(e){var n=e.build,t=n.id.slice(0,8),r=(0,s._)((0,d.useState)(!1),2),i=r[0],o=r[1],a=(0,s._)((0,d.useState)(!1),2),l=a[0],c=a[1],p=(0,d.useRef)(!1);return(0,d.useEffect)(function(){p.current=!0;var e=setTimeout(function(){c(i)},200);return function(){clearTimeout(e)}},[i]),(0,u.Y)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,u.FD)(tk.A,{isOpen:l,onClickOutside:function(){return c(!1)},padding:8,children:[(0,u.Y)("span",{css:[e1.b.listItem,B.wp.display.inlineBlock,B.wp.px(2),B.wp.py(0),B.wp.borderRadius(4)],children:t}),(0,u.Y)(j.S,{css:[B.wp.maxWidth(260)],children:(0,u.Y)(V.EY,{variant:"small",children:n.id})})]})})},tO=(r={},(0,A._)(r,y.Ey.Deploy,"deployed"),(0,A._)(r,y.Ey.Rollback,"rolled back"),(0,A._)(r,y.Ey.Fail,"failed to deploy"),r),tM=function(e){var n,t=e.build,r=e.background,i=null===(n=t.rollbackSourceBuildId)||void 0===n?void 0:n.slice(0,8);r=null!=r?r:"higher";var o=(0,s._)((0,d.useState)(!1),2),a=o[0],l=o[1],c=(0,s._)((0,d.useState)(!1),2),p=c[0],f=c[1],h=(0,d.useRef)(!1);return(0,d.useEffect)(function(){h.current=!0;var e=setTimeout(function(){f(a)},200);return function(){clearTimeout(e)}},[a]),(0,u.Y)("span",{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,u.FD)(tk.A,{isOpen:p,onClickOutside:function(){return f(!1)},padding:8,children:[(0,u.FD)(n2.ui,{background:r,css:tL.rollbackPillSpan,children:[(0,u.Y)(tP.A,{size:12}),(0,u.Y)(V.EY,{css:tL.shortId,children:i})]}),(0,u.Y)(j.S,{css:tL.longId,children:(0,u.Y)(V.EY,{variant:"small",children:t.rollbackSourceBuildId})})]})})},tB=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in tO&&tO[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,u.FD)(j.S,{css:tL.activityLogContainerDesktop,row:!0,children:[(0,u.Y)("span",{css:tL.buildIdColumn,children:(0,u.Y)(tN,{build:r})}),(0,u.Y)(tT.e,{src:r.user.image||null,size:16,username:r.user.username||"",fullName:r.user.fullName||""}),(0,u.Y)("span",{css:tL.displayName,children:o}),(0,u.FD)("span",{css:tL.formattedText,children:[" "+a," "+i]}),l?(0,u.Y)("span",{css:tL.pillSpanActivityLog,children:(0,u.Y)(tM,{build:r})}):null," "]})},tH=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in tO&&tO[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,u.FD)(j.S,{children:[(0,u.FD)(j.S,{row:!0,align:"center",children:[(0,u.Y)(tN,{build:r}),l?(0,u.Y)("span",{css:tL.pillSpanActivityLog,children:(0,u.Y)(tM,{build:r})}):null]}),(0,u.FD)(j.S,{css:tU.subtitleView,children:[(0,u.Y)(tT.e,{src:r.user.image||null,size:24,username:r.user.username||"",fullName:r.user.fullName||""}),(0,u.Y)("span",{css:tL.displayName,children:o}),(0,u.FD)("span",{css:tL.formattedText,children:[" "+a," "+i]})]})]})},tz=function(e){var n=e.activityLogItem,t=(0,tF.a)(),r=new Date(n.build.timeCreated),i=Date.now(),o=(0,nh.A)(r,i,{addSuffix:!0});return(0,u.Y)(u.FK,{children:t?(0,u.Y)(tH,{activityLogItem:n,formattedTime:o}):(0,u.Y)(tB,{activityLogItem:n,formattedTime:o})})},tW=t(74547),tG=t(83290),tV=t(98335),tj=(0,eO.x)({title:[B.wp.fontSize(24),B.wp.pt(32)],subtitle:[B.wp.pt(6)],accordionContainer:[B.wp.pt(24)],accordion:[B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(6)],accordionItem:[B.wp.px(8),B.wp.py(2),B.wp.rowWithGap(8),B.wp.align.center],tableContainer:[B.wp.backgroundColor.backgroundDefault,B.wp.border({color:ek.LU.backgroundHigher}),B.wp.borderRadius(0,0,6,6),B.wp.px(12),B.wp.pb(6)],changedSecretsDisclaimer:[B.wp.py(8)],table:[B.wp.width("100%"),{".tr":{display:"flex",width:"100%",flexDirection:"row"},".th":{flexDirection:"row",borderBottom:"1px solid ".concat(ek.LU.outlineDimmest),color:ek.LU.foregroundDimmer},".td":{flexDirection:"row"}}],cell:[B.wp.fontWeight.normal,B.wp.fontSize(ek.LU.fontSizeDefault),B.wp.py(8),B.wp.display.flex,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween],secretValue:[B.wp.pl(4),B.wp.color.foregroundDefault],noValue:[B.wp.pl(4),B.wp.color.foregroundDimmest],shortId:[B.wp.display.inlineBlock,B.wp.py(0),B.wp.borderRadius(4)],longId:[B.wp.maxWidth(260)]}),tZ=function(e){var n=e.buildSecret,t=e.shortSecretLength,r=n.slice(0,void 0===t?8:t),i=(0,s._)((0,d.useState)(!1),2),o=i[0],a=i[1],l=(0,s._)((0,d.useState)(!1),2),c=l[0],p=l[1],f=(0,d.useRef)(!1);return((0,d.useEffect)(function(){f.current=!0;var e=setTimeout(function(){p(o)},200);return function(){clearTimeout(e)}},[o]),r.length===n.length)?(0,u.Y)("span",{children:r}):(0,u.Y)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,u.FD)(tk.A,{isOpen:c,onClickOutside:function(){return p(!1)},padding:8,children:[(0,u.FD)("span",{css:tj.shortId,children:[r,"..."]}),(0,u.Y)(j.S,{css:tj.longId,children:(0,u.Y)(V.EY,{variant:"small",children:n})})]})})};function tq(e){var n=e.secretKey,t=e.build1Secret,r=e.build2Secret,i=e.hideSecret,o=e.selectedSecretsMap,a=e.updateSecretsMap,l=(0,s._)((0,d.useState)(o.get(n)),2),c=l[0],p=l[1],f=function(e){var t=e.buildSecret;return(0,u.Y)("td",{className:"td",children:(0,u.FD)(j.S,{css:tj.cell,style:{justifyContent:"start"},children:[(0,u.Y)(tW.s,{id:n,value:null!=t?t:"",checked:c===t,onChange:function(){p(t),a({key:n,value:t})}}),t?(0,u.Y)("span",{css:tj.secretValue,children:i?"":(0,u.Y)(tZ,{buildSecret:t})}):(0,u.Y)("span",{css:tj.noValue,children:"No Value"})]})})};return(0,u.FD)("tr",{children:[(0,u.Y)("td",{className:"td",children:(0,u.Y)(j.S,{css:tj.cell,className:"cell",children:n})}),(0,u.Y)(f,{buildSecret:t}),(0,u.Y)(f,{buildSecret:r})]})}var tK=function(e){var n=e.secretKey,t=e.secretValue,r=e.hideSecret;return(0,u.FD)("tr",{children:[(0,u.Y)("td",{className:"td",children:(0,u.Y)(j.S,{css:tj.cell,className:"cell",children:n})}),(0,u.Y)("td",{className:"td",children:(0,u.Y)("span",{css:tj.cell,className:"cell",children:r?"":(0,u.Y)(tZ,{buildSecret:t,shortSecretLength:20})})})]})};let t$=function(e){var n=e.currentBuild,t=e.build,r=e.selectedSecretsMap,i=e.updateSecretsMap,o=(0,s._)((0,d.useState)(!1),2),a=o[0],l=o[1],c=(0,s._)((0,d.useState)(!1),2),p=c[0],f=c[1],h=(0,s._)((0,d.useState)(!0),2),m=h[0],g=h[1],v=(0,s._)((0,d.useState)(!0),2),w=v[0],y=v[1],b=(0,s._)((0,d.useState)(),2),S=b[0],Y=b[1];return((0,d.useEffect)(function(){var e,r,o,a,l,s,c,u,d,p=(r=(e={build1Secrets:n.envVars,build2Secrets:t.envVars}).build1Secrets,o=e.build2Secrets,a=new Map,l=new Map,s=new Map,c=new Map,u=new Set,d=new Map,r.forEach(function(e){s.set(e.name,e.value),u.add(e.name)}),o.forEach(function(e){c.set(e.name,e.value),u.add(e.name)}),u.forEach(function(e){var n=s.get(e)||void 0,t=c.get(e)||void 0;n===t?n&&(a.set(e,n),d.set(e,n)):(l.set(e,{build1Value:n,build2Value:t}),d.set(e,n))}),{unchangedSecrets:a,changedSecrets:l,defaultSelectedMap:d});p.defaultSelectedMap.forEach(function(e,n){i({key:n,value:e})}),Y(p)},[t.envVars,n.envVars,i]),S&&(0!==S.unchangedSecrets.size||0!==S.changedSecrets.size))?(0,u.FD)(u.FK,{children:[(0,u.Y)(j.S,{css:tj.title,children:"Review Secrets"}),(0,u.Y)(V.EY,{css:tj.subtitle,children:"Manage which secrets you would like to preserve from your production deployment or from your rollback target."}),S.changedSecrets.size>0?(0,u.Y)(j.S,{css:tj.accordionContainer,children:(0,u.Y)(n1.A,{headerContent:(0,u.FD)(j.S,{css:tj.accordionItem,children:[(0,u.Y)(nl.A,{color:ek.LU.yellowStronger}),S.changedSecrets.size,1===S.changedSecrets.size?" secret is ":" secrets are ","different across deployments"]}),expanded:p,onClick:function(){return f(!p)},css:tj.accordion,children:(0,u.FD)(j.S,{css:tj.tableContainer,children:[(0,u.Y)(V.EY,{css:tj.changedSecretsDisclaimer,children:"Select secret values from either your production environment or rollback environment to copy over in your rollback."}),(0,u.FD)("table",{css:tj.table,children:[(0,u.FD)("tr",{children:[(0,u.Y)("th",{className:"th",style:{width:"40%"},children:(0,u.Y)(j.S,{css:tj.cell,children:"Key"})}),(0,u.Y)("th",{className:"th",style:{width:"30%"},children:(0,u.Y)(j.S,{css:tj.cell,children:"Production"})}),(0,u.Y)("th",{className:"th",style:{width:"30%"},children:(0,u.FD)(j.S,{css:tj.cell,children:["Rollback Build",(0,u.Y)(eD.K0,{alt:w?"Reveal Values":"Hide Values",onClick:function(){y(!w)},children:w?(0,u.Y)(tV.A,{}):(0,u.Y)(tG.A,{})})]})})]}),Array.from(S.changedSecrets.entries()).map(function(e){var n=(0,s._)(e,2),t=n[0],o=n[1];return(0,u.Y)(tq,{secretKey:t,build1Secret:o.build1Value,build2Secret:o.build2Value,hideSecret:w,selectedSecretsMap:r,updateSecretsMap:i},t)})]})]})})}):null,S.unchangedSecrets.size>0?(0,u.Y)(j.S,{css:tj.accordionContainer,children:(0,u.Y)(n1.A,{headerContent:(0,u.FD)(j.S,{css:tj.accordionItem,children:[(0,u.Y)(nO.A,{color:ek.LU.accentPositiveStronger}),S.unchangedSecrets.size,1===S.unchangedSecrets.size?" secret is ":" secrets are ","shared across deployments"]}),expanded:a,onClick:function(){return l(!a)},css:tj.accordion,children:(0,u.Y)(j.S,{css:tj.tableContainer,children:(0,u.FD)("table",{css:tj.table,children:[(0,u.FD)("tr",{children:[(0,u.Y)("th",{className:"th",style:{width:"40%"},children:(0,u.Y)(j.S,{css:tj.cell,children:"Key"})}),(0,u.Y)("th",{className:"th",style:{width:"60%"},children:(0,u.FD)(j.S,{css:tj.cell,children:["Rollback Build",(0,u.Y)(eD.K0,{alt:m?"Reveal Values":"Hide Values",onClick:function(){g(!m)},children:m?(0,u.Y)(tV.A,{}):(0,u.Y)(tG.A,{})})]})})]}),Array.from(S.unchangedSecrets.entries()).map(function(e,n){var t=(0,s._)(e,2),r=t[0],i=t[1];return(0,u.Y)(tK,{secretKey:r,secretValue:i,hideSecret:m},n)})]})})})}):null]}):null};var tJ=t(10466),tQ=t(74328),tX=t(84761),t0=t(72602),t1=t(29032),t2=t(47650);function t5(e){var n=e.type,t=e.view,r=e.provider,i=e.onViewBuildLogs,o=e.openFile,a=e.openDebugChat,l=e.onClickRollback,s=(0,nq.A)();return(0,u.Y)(rl,{replId:s,type:void 0===n?"default":n,view:t,provider:r,onSelect:i,openFile:o,openDebugChat:a,onClickRollback:l})}var t4=tg.filter(function(e){return"title"in e}),t3=(0,eO.x)({root:[B.wp.px(8),B.wp.pb(8),{zIndex:0}]});function t8(e){var n=e.activeStage,t=e.erroredStage;return(0,u.Y)(j.S,{css:t3.root,row:!0,children:t4.map(function(e){return(0,u.Y)(nW,{stage:e.id,text:e.title,totalStagesWithTitle:t4.length,activeStage:n,erroredStage:t},e.id)})})}var t7=(0,eO.x)({root:[B.wp.height("100%")],header:[B.wp.pt(8),B.wp.px(8),B.wp.rowWithGap(8),B.wp.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+ek.LU.outlineDimmest}],name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],content:[B.wp.p(8),B.wp.flex.growAndShrink(1),B.wp.position.relative],loading:[B.wp.coverContainer,B.wp.center],error:[B.wp.m(8),B.wp.borderRadius(8),B.wp.overflow("hidden")],xterm:[B.wp.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[B.wp.coverContainer,B.wp.p(8)]}]}),t6=(0,eO.x)({root:[B.wp.pt(12),B.wp.pb(16),t_.R1.maxWidth],header:[B.wp.pt(8),B.wp.pl(8),B.wp.rowWithGap(8),B.wp.align.center],title:[B.wp.fontSize(24),B.wp.pt(8)],subheader:[B.wp.pt(12),B.wp.fontSize(14)],content:[B.wp.px(8),B.wp.flex.growAndShrink(1),B.wp.position.relative],prodToTargetContainer:[B.wp.pt(32),{b:{display:"contents",fontWeight:500}}],prodToTarget:[B.wp.pt(16),B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.align.center,B.wp.justify.spaceBetween],prodStatusDot:[B.wp.width(12),B.wp.align.center],buildContainer:[B.wp.py(12),B.wp.px(16),B.wp.borderRadius(),{outline:"1px solid ".concat(ek.LU.outlineDimmer)},B.wp.backgroundColor.outlineDimmest,B.wp.width("45%"),B.wp.height("100%")],buildContainerTitle:[B.wp.fontSize(16),B.wp.align.center],buildContainerSubTitle:[B.wp.color.foregroundDimmer],confirmButton:[B.wp.pt(24)]});function t9(e){var n=e.build,t=e.isCurrentBuild,r=Date.now(),i=(0,nh.A)(new Date(n.timeCreated),r,{addSuffix:!0}),o=t?(0,u.Y)(j.S,{css:t6.prodStatusDot,children:(0,u.Y)(tJ.$,{status:n.status})}):(0,u.Y)(t2.A,{color:ek.LU.outlineStrongest,size:12});return(0,u.FD)(j.S,{css:t6.buildContainer,gap:8,children:[(0,u.FD)(j.S,{css:t6.buildContainerTitle,row:!0,gap:6,children:[o,t?"Production":n.id.slice(0,8)]}),(0,u.FD)(j.S,{css:t6.buildContainerSubTitle,row:!0,gap:6,align:"center",children:[(0,u.Y)(tT.e,{src:n.user.image||null,size:12,username:n.user.username||"",fullName:n.user.fullName||""}),(0,u.Y)("b",{children:" "+n.user.displayName})," deployed"," "+i]})]})}function re(e){var n=e.build,t=e.onBack,r=e.onClickRollback,i=e.onError,o=(0,h.cF)(),a=(0,s._)((0,d.useState)(new Map),2),l=a[0],c=a[1],p=(0,tF.a)();return o?(0,u.FD)(j.S,{css:t6.root,children:[(0,u.Y)(j.S,{css:t6.header,children:(0,u.Y)(eD.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,u.Y)(tX.A,{})})}),(0,u.FD)(j.S,{css:t6.content,children:[(0,u.Y)(j.S,{css:t6.title,children:"Instant Rollback"}),(0,u.Y)(j.S,{css:t6.subheader,children:"Replace your current production with a previously successful deployment."}),(0,u.FD)(j.S,{css:t6.prodToTargetContainer,children:["Rolling back from ",(0,u.Y)("b",{children:"production"})," to the following"," ",(0,u.Y)("b",{children:"rollback target"}),":",(0,u.FD)(j.S,{css:t6.prodToTarget,children:[(0,u.Y)(t9,{build:o,isCurrentBuild:!0}),(0,u.Y)(t0.A,{}),(0,u.Y)(t9,{build:n,isCurrentBuild:!1})]})]}),p?null:(0,u.Y)(t$,{build:n,currentBuild:o,updateSecretsMap:function(e){var n=e.key,t=e.value;c(l.set(n,t))},selectedSecretsMap:l}),(0,u.Y)(j.S,{css:t6.confirmButton,children:(0,u.Y)(eX.$n,{text:"Confirm Rollback",iconLeft:(0,u.Y)(tP.A,{}),onClick:function(){var e=[];l.forEach(function(n,t){n&&e.push({name:t,value:n})}),r(e),t()},colorway:"primary"})})]})]}):(i("This deployment does not have a current build to rollback from"),null)}function rn(e){var n=e.build,t=e.onBack,r=e.fs,i=e.openFile,o=e.openDebugChat,a=e.onViewAppLogs,l=(0,s._)((0,nG.A)({openFile:i,listFiles:r.listFiles}),2),c=l[0],p=l[1],f=(0,eZ.XH)({variables:{input:{buildId:n.id}},ssr:!1,fetchPolicy:"cache-and-network"}),h=f.data,m=f.loading,g=(0,d.useMemo)(function(){var e=[],n=h&&"HostingBuildDeployActionHistoryResults"===h.hostingBuildDeployActionHistory.__typename?h.hostingBuildDeployActionHistory.results:null;if(n){var t=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var s,c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)!function(){var n=c.value;if("HostingBuildDeployLogAction"===n.__typename)return e.push(n.log);tg.some(function(e){return e.statusType===n.status})&&(t=n.status),n.status===y.nH.Failed&&(r=t)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=t?null===(s=tw(t))||void 0===s?void 0:s.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[h]);return(0,d.useEffect)(function(){c&&g&&c.write(g.logs.join(""))},[c,g]),(0,u.FD)(j.S,{css:t7.root,gap:8,children:[(0,u.FD)(j.S,{css:t7.header,children:[(0,u.Y)(eD.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,u.Y)(tX.A,{})}),(0,u.Y)(j.S,{children:(0,u.FD)(V.EY,{color:"dimmer",multiline:!1,children:[(0,u.Y)("span",{css:t7.name,children:n.user.displayName+" "}),(0,tx.f)(n.status)]})}),(0,u.Y)(tN,{build:n})]}),g||m?(0,u.FD)(u.FK,{children:[(null==g?void 0:g.erroredStatus)?(0,u.Y)(j.S,{css:t7.error,children:(0,u.Y)(ta,{currentStatus:g.erroredStatus,provider:n.provider,debugSummary:n.debugSummary,openFile:i,openDebugChat:o,onViewApplicationLogs:a})}):null,(0,u.Y)(t8,{activeStage:null==g?void 0:g.activeStage,erroredStage:null==g?void 0:g.erroredStage}),(0,u.Y)(j.S,{css:t7.divider}),(0,u.FD)(n2.ui,{css:t7.content,children:[(0,u.Y)(j.S,{css:t7.xterm,innerRef:p}),m||!c?(0,u.Y)(j.S,{css:t7.loading,children:(0,u.Y)(nB.A,{color:ek.LU.white,size:24})}):null]})]}):(0,u.Y)(tf,{provider:n.provider,openFile:i})]})}var rt=(0,eO.x)({item:B.wp.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}}}),rr=(0,eO.x)({empty:[B.wp.pb(8),B.wp.center,B.wp.align.stretch],items:[],loadMore:[B.wp.center],item:[B.wp.pl(8),B.wp.pr(4),B.wp.pb(12),B.wp.align.center,B.wp.flex.growAndShrink(1),B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.foregroundDefault),{"&:hover .itemRight":{display:"flex"},"&:hover .itemLine":{display:"flex"}}],itemMainText:[B.wp.flex.growAndShrink(1),(0,A._)({},B.kL.min(640),B.wp.flex.growAndShrink(0))],itemLine:[B.wp.display.none,(0,A._)({},B.kL.min(640),[B.wp.flex.growAndShrink(1),B.wp.border({color:ek.LU.outlineDimmest,direction:"top"})])],itemRight:[B.wp.textAlign.right,B.wp.display.none],itemPast:[rt.item,rt.past],itemFuture:[rt.item,rt.future],disabledLog:{cursor:"not-allowed"}}),ri=(0,eO.x)({top:B.wp.rowWithGap(12),button:[B.wp.reset.button,B.wp.cursor.pointer,B.wp.borderRadius(8),B.wp.display.flex,B.wp.rowWithGap(6),B.wp.align.center,B.wp.px(8),B.wp.color.foregroundDimmer,B.wp.height(32),B.wp.hover(B.wp.color.foregroundDefault),{'&[data-highlight="true"]':[B.wp.color.accentNegativeStrongest,B.wp.backgroundColor.accentNegativeDimmest,B.wp.border({color:ek.LU.accentNegativeDimmer})]}],info:[B.wp.flex.growAndShrink(1),{'&[data-open="false"]':B.wp.pb(6)}],buttonContent:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(8),B.wp.align.center],failedBuildList:B.wp.pt(8)});function ro(e){var n=e.items,t=e.upcomingBuildStatus,r=e.view,i=e.provider,o=e.onClick,a=e.openFile,l=e.openDebugChat,c=(0,s._)((0,d.useState)(!1),2),p=c[0],f=c[1],g=(0,h.uS)(),v=n[0],w=v.build.debugSummary,y=g===m.d.Ready&&!t&&r!==S.P.DeploymentInProgress&&w;return(0,u.FD)(j.S,{children:[(0,u.FD)(j.S,{css:ri.top,children:[(0,u.Y)(np,{type:p?"futureFailOpen":"futureFailClosed"}),(0,u.FD)(j.S,{css:ri.info,"data-open":p,children:[y?(0,u.Y)(ts,{title:"".concat(n.length," ").concat((0,ni.A)("build",n.length)," failed"),debugSummary:w,onViewBuildLogs:function(){return o(v.build)},openFile:a,provider:i,openDebugChat:l}):null,(0,u.FD)("button",{onClick:function(){return f(!p)},css:ri.button,children:[(0,u.FD)(j.S,{css:ri.buttonContent,children:[(0,u.Y)(eR.A,{}),(0,u.Y)(V.EY,{children:"View all failed builds"}),p?null:(0,u.FD)(V.EY,{css:B.wp.color.foregroundDimmest,variant:"small",children:[n.length>1?"Most recent: ":null,(0,nh.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),p?(0,u.Y)(n4.A,{color:ek.LU.foregroundDimmer}):(0,u.Y)(n5.A,{color:ek.LU.foregroundDimmer})]})]})]}),p?(0,u.Y)(j.S,{css:ri.failedBuildList,children:n.map(function(e){return(0,u.Y)(rc,{item:e,onClick:function(){return o(e.build)},type:"future"},e.id)})}):null]})}function ra(e){var n=e.items,t=e.view,r=e.provider,i=e.onClick,o=e.openFile,a=e.openDebugChat,l=(0,s._)((0,d.useState)(!1),2),c=l[0],p=l[1],f=(0,h.mj)().hasDebugSummariesAuthorization,m=(0,h.tq)(),g=(0,d.useRef)(void 0);(0,d.useEffect)(function(){(null==m?void 0:m.status)!==void 0&&(g.current=null==m?void 0:m.status)},[m,null==m?void 0:m.status]);var v=!m&&g.current!==y.nH.Building&&g.current!==y.nH.Success,w=v?ek.LU.accentNegativeStronger:ek.LU.foregroundDimmer;if(0===n.length)return null;var b=n[0];return f&&b.build.debugSummary?(0,u.Y)(ro,{items:n,upcomingBuildStatus:g.current,view:t,provider:r,onClick:i,openFile:o,openDebugChat:a}):(0,u.FD)(j.S,{children:[(0,u.FD)(j.S,{css:ri.top,children:[(0,u.Y)(np,{type:c?"futureFailOpen":"futureFailClosed"}),(0,u.Y)(j.S,{css:ri.info,"data-open":c,children:(0,u.FD)("button",{onClick:function(){return p(!c)},css:ri.button,"data-highlight":v,children:[(0,u.FD)(j.S,{css:ri.buttonContent,children:[v?(0,u.Y)(nl.A,{color:ek.LU.accentNegativeStronger}):null,(0,u.FD)(V.EY,{children:[n.length," ",(0,ni.A)("build",n.length)," failed"]}),c?null:(0,u.FD)(V.EY,{children:[n.length>1?"Most recent: ":null,(0,nh.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),c?(0,u.Y)(n4.A,{color:w}):(0,u.Y)(n5.A,{color:w})]})})]}),c?(0,u.Y)(j.S,{css:ri.failedBuildList,children:n.map(function(e){return(0,u.Y)(rc,{item:e,onClick:function(){return i(e.build)},type:"future"},e.id)})}):null]})}function rl(e){var n,t,r=e.replId,i=e.type,o=void 0===i?"default":i,a=e.view,l=e.provider,s=e.onSelect,c=e.openFile,p=e.openDebugChat,f=e.onClickRollback,v=(0,eZ.jN)({variables:{replId:r,count:20},fetchPolicy:"cache-and-network",ssr:!1}),b=v.data,S=v.previousData,Y=v.loading,A=v.error,C=v.fetchMore,x=null!=b?b:S,_=(0,h.uS)(),k=(null==x?void 0:x.getRepl.__typename)==="Repl"?x.getRepl:null,D=(null==k?void 0:null===(t=k.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?k.hostingDeployment:null,E=(n=(0,g._)(function(){var e;return(0,w.YH)(this,function(n){switch(n.label){case 0:if(!(e=null==D?void 0:D.activityLogs.pageInfo.nextCursor))return[2];return[4,C({variables:{after:e,count:20}})];case 1:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)}),R=(0,tQ.A)({onLoadMore:E,rootMargin:"0px 0px 300px 0px"}).targetRef,I=(0,h.cF)(),F=(0,h.tq)(),T=(0,d.useRef)(void 0);if((0,d.useEffect)(function(){(null==F?void 0:F.id)!==void 0&&(T.current=null==F?void 0:F.id)},[null==F?void 0:F.id]),Y&&!D)return"failureQueue"===o?null:(0,u.Y)(rd,{});if(!(null==D?void 0:D.activityLogs))return null;var P=D.activityLogs,L=P.items,U=P.pageInfo;if(0===L.length)return null;if(A)return(0,u.Y)(j.S,{css:rr.empty,children:(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:"Something went wrong"})});var N=function(e,n){var t=[],r=(null==n?void 0:n.timeCreated)?new Date(n.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(c.type!==y.Ey.Fail||r&&r.getTime()>new Date(c.build.timeCreated).getTime())break;t.push(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t}(L,I);return"failureQueue"===o?(0,u.Y)(t_.lQ,{render:N.length>0,initialHeight:44,children:(0,u.Y)(ra,{items:N,view:a,provider:l,onClick:s,openFile:c,openDebugChat:p})}):(0,u.FD)(j.S,{gap:8,"data-history-timeline-items":L.length-N.length,children:[(0,u.Y)(j.S,{css:rr.items,children:L.map(function(e,n){if(e.build.id===(null==I?void 0:I.id)||n<N.length)return null;var t=!1;return e.isRollbackCandidate&&e.build.status===y.nH.Success&&!e.build.rollbackSourceBuildId&&f&&_===m.d.Ready&&(t=!0),(0,u.Y)(rc,{item:e,onClick:function(){return s(e.build)},onClickRollback:t&&f?function(){return f(e.build)}:void 0},e.id)})}),U.nextCursor?(0,u.Y)(j.S,{css:rr.loadMore,children:(0,u.Y)(eD.K0,{disabled:Y,tooltipBehavior:"hidden",alt:"Show more",onClick:E,ref:R,children:Y?(0,u.Y)(nB.A,{}):(0,u.Y)(t1.A,{})})}):null]})}var rs=function(e){var n=e.onClickRollback,t=e.rollbackTooltip;if((0,tF.a)()&&!n)return(0,u.Y)(u.FK,{});var r=void 0===n;return(0,u.Y)(eD.K0,{alt:t,onClick:function(){return n?n():void 0},disabled:r,css:r&&rr.disabledLog,children:(0,u.Y)(tP.A,{})})};function rc(e){var n=e.item,t=e.onClick,r=e.onClickRollback,i=e.timeline,o=e.type,a=n.build.hasDeployLogs,l=!a,s=(0,tF.a)(),c=(0,h.uS)(),d="Rollback";r||(d="Cannot roll back, the image for this build is no longer available"),c!==m.d.Ready?d="Cannot roll back while a deployment is in progress":n.build.status!==y.nH.Success?d="Cannot roll back to a failed build":n.build.rollbackSourceBuildId&&(d="Cannot roll back, already rolled back to this deployment");var p=(0,u.FD)(j.S,{css:rr.item,row:!0,gap:8,style:s?{alignItems:"start"}:{},children:[(0,u.Y)(j.S,{css:rr.itemMainText,children:(0,u.Y)(tz,{activityLogItem:n})}),(0,u.Y)(j.S,{css:rr.itemLine,className:"itemLine"}),(0,u.FD)(j.S,{css:rr.itemRight,row:!0,gap:0,justify:"end",style:s?{display:"flex"}:{},className:"itemRight",children:[(0,u.Y)(tI,{activityLogItem:n}),(0,u.Y)(rs,{onClickRollback:r,rollbackTooltip:d}),(0,u.Y)(eD.K0,{alt:a?"View deploy logs":"Deploy logs expire after 30 days",onClick:t,disabled:l,css:l&&rr.disabledLog,children:(0,u.Y)(nJ.A,{})})]})]});return void 0===i||i?(0,u.FD)(j.S,{css:"past"===(void 0===o?"past":o)?rr.itemPast:rr.itemFuture,children:[(0,u.Y)(np,{type:n.type===y.Ey.Fail?"pastFail":"pastSuccess"}),p]}):p}var ru=(0,eO.x)({loading:[{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[W.S.backgroundPulse(),B.wp.height(20.4),B.wp.mt(2),B.wp.ml(4),B.wp.flex.growAndShrink(1),B.wp.borderRadius(6),{opacity:.5,marginBottom:14}]});function rd(){return(0,u.Y)(j.S,{children:[,,,].fill(0).map(function(e,n){return(0,u.FD)(j.S,{css:ru.loading,row:!0,gap:12,children:[(0,u.Y)(np,{type:"pastNeutral"}),(0,u.Y)(n2.ui,{elevated:!0,css:ru.loadingItem})]},n)})})}var rp=t(4645),rf=t(25204),rh=t.n(rf),rm=t(32476),rg=t(731),rv=(0,eO.x)({root:[B.wp.flex.shrink(1)],name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],item:[B.wp.pr(4),B.wp.align.center,B.wp.flex.growAndShrink(1)],itemMainText:[B.wp.flex.growAndShrink(1),B.wp.align.center],itemRight:[B.wp.textAlign.right],disabledLog:{cursor:"not-allowed"}}),rw=function(e){var n=e.onClick,t=(0,h.uS)(),r=(0,h.cF)();if(t===m.d.Loading||!r)return(0,u.Y)(nB.A,{size:12});var i=r.status,o=r.hasDeployLogs,a=!o;return(0,u.Y)(j.S,{css:rv.root,row:!0,gap:0,children:(0,u.FD)(j.S,{css:rv.item,row:!0,gap:8,children:[(0,u.Y)(tJ.$,{status:i}),(0,u.Y)(j.S,{css:rv.itemMainText,children:(0,u.FD)(V.EY,{multiline:!1,children:[(0,u.Y)("span",{css:rv.name,children:r.user.displayName+" "}),(0,tx.f)(i,r.suspendedReason)+" ",!function(e){switch(e){case y.nH.Building:case y.nH.Promoting:case y.nH.Running:case y.nH.Pending:case y.nH.Failed:case y.nH.Success:return!0;case y.nH.Resuming:case y.nH.Suspending:case y.nH.Suspended:case y.nH.UpdatingTier:return!1}}(i)?null:(0,u.Y)(tm.m_,{tooltip:(0,rg.A)(new Date(r.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,n){return(0,u.Y)("span",(0,er._)((0,E._)({},e),{ref:n,children:(0,nh.A)(new Date(r.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,u.Y)(j.S,{css:rv.itemRight,children:(0,u.Y)(eD.K0,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:a,css:a&&rv.disabledLog,children:(0,u.Y)(nJ.A,{})})})]})})},ry=(i={},(0,A._)(i,y.Q0.Gce,"Reserved VM"),(0,A._)(i,y.Q0.CloudRun,"Autoscale"),(0,A._)(i,y.Q0.Static,"Static"),(0,A._)(i,y.Q0.Cron,"Scheduled"),i);function rb(){var e=(0,R._)(["\n  query DeploymentSuspendedReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return rb=function(){return e},e}var rS={},rY=(0,I.J1)(rb()),rA=t(81663),rC=t(97407),rx=t(79653),r_=(0,eO.x)({suspendedLink:[B.wp.color.accentPrimaryStronger],deploymentInfoWrapper:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentSuspension:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)]});function rk(){var e,n,t,r=(0,nq.A)(),i=(0,h.cF)(),o=(0,h.mj)().deployability,a=(e={variables:{replId:r}},n=(0,E._)({},rS,e),F.I(rY,n)).data;if(!i)return null;var l=(null==a?void 0:a.getRepl.__typename)==="Repl"&&(null===(t=a.getRepl.org)||void 0===t?void 0:t.__typename)==="Org"?"Org Settings > Billing":"Account > Subscription",s=o.redeploy.isAuthorized?"You can resume your deployment to make it available once again.":"Navigate to ".concat(l," to resolve."),c="If no action is taken your deployment will be deleted ".concat(rA.wp," days after the date it was suspended. For more assistance reach out to our support team at ");return i.suspendedReason===y.UV.Ubb?(0,u.Y)(j.S,{css:r_.deploymentInfoWrapper,children:(0,u.Y)(j.S,{css:r_.deploymentSuspension,children:(0,u.Y)(G.N,{icon:(0,u.Y)(rx.A,{}),text:["Your deployment was suspended due to a billing failure. ".concat(s," ").concat(c),(0,u.Y)("a",{css:r_.suspendedLink,href:"mailto:support@replit.com",children:(0,u.Y)("u",{children:"support@replit.com"})},""),"."]})})}):i.suspendedReason===y.UV.SubscriptionRequired?(0,u.Y)(j.S,{css:r_.deploymentInfoWrapper,children:(0,u.Y)(j.S,{css:r_.deploymentSuspension,children:(0,u.Y)(G.N,{icon:(0,u.Y)(rx.A,{}),text:["Your deployment was suspended due to requiring an active ".concat(rC.en," membership. ").concat(s," ").concat(c),(0,u.Y)("a",{css:r_.suspendedLink,href:"mailto:support@replit.com",children:(0,u.Y)("u",{children:"support@replit.com"})},""),"."]})})}):null}function rD(){var e=(0,R._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return rD=function(){return e},e}function rE(){var e=(0,R._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return rE=function(){return e},e}var rR={},rI=(0,I.J1)(rD()),rF=(0,I.J1)(rE(),rI),rT=t(37057),rP=t(39651),rL=t(4595);function rU(e){var n,t,r=e.disabled,i=e.onSuccessfulExecution,o=(0,h.i$)(),a=(0,h.cF)(),l=(0,h.uS)(),c=(0,rP.A)().showError,p=(0,s._)((0,d.useState)(),2),f=p[0],g=p[1],v=function(e){g(e.message),c(e.message)},w=(0,s._)((n={onError:v,onCompleted:function(e){var n=e.executeScheduledJob;if("ExecuteScheduledJobResult"===n.__typename){null==i||i(n.execution);return}v(Error("An error occurred while executing the scheduled job"))}},t=(0,E._)({},rR,n),nb.n(rF,t)),2),b=w[0],S=w[1].loading,Y=!!(!o||!a||S||f||void 0!==r&&r),A=(null==a?void 0:a.status)===y.nH.Success,C=l===m.d.Ready,x=!Y&&C&&A,_=C?"You must successfully deploy your project before being able to run it":"Can't run while deployment is ".concat((0,rT.OS)(l));return(0,u.Y)(tm.m_,{tooltip:_,isDisabled:x,children:(0,u.Y)(eX.$n,{text:"Run now",iconLeft:S?(0,u.Y)(nB.A,{}):(0,u.Y)(rL.A,{}),size:"small",disabled:Y||!x,onClick:function(){o&&!Y&&b({variables:{deploymentId:o}})}})})}var rN=t(33242),rO=t(63679),rM=t(2301),rB=t(40904),rH=t(36954),rz=t(42022);function rW(e){return(0,u.Y)(rz.Ay,(0,er._)((0,E._)({},e),{children:(0,u.Y)("path",{fillRule:"evenodd",d:"M3.75 4A.25.25 0 0 1 4 3.75h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25H4A.25.25 0 0 1 3.75 7V4ZM4 2.25A1.75 1.75 0 0 0 2.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 8.75 7V4A1.75 1.75 0 0 0 7 2.25H4ZM16.75 4a.25.25 0 0 1 .25-.25h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-3a.25.25 0 0 1-.25-.25V4ZM17 2.25A1.75 1.75 0 0 0 15.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 21.75 7V4A1.75 1.75 0 0 0 20 2.25h-3ZM4 16.75a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h3a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25H4ZM2.25 17c0-.966.784-1.75 1.75-1.75h3c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0 1 7 21.75H4A1.75 1.75 0 0 1 2.25 20v-3ZM18 15.25A2.75 2.75 0 0 0 15.25 18v3a.75.75 0 0 0 1.5 0v-3A1.25 1.25 0 0 1 18 16.75h3a.75.75 0 0 0 0-1.5h-3Zm3 5a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V21a.75.75 0 0 1 .75-.75ZM12.75 7a.75.75 0 0 0-1.5 0v3A1.25 1.25 0 0 1 10 11.25H7a.75.75 0 0 0 0 1.5h3A2.75 2.75 0 0 0 12.75 10V7Zm-10.5 5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75ZM12 2.25a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5H12Zm0 13a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V16a.75.75 0 0 1 .75-.75Zm4-4a.75.75 0 0 0 0 1.5h1a.75.75 0 0 0 0-1.5h-1Zm5 0a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V12a.75.75 0 0 1 .75-.75ZM12.75 20a.75.75 0 0 0-1.5 0v1a.75.75 0 0 0 1.5 0v-1Z",clipRule:"evenodd"})}))}var rG=(0,eO.x)({qrCodeWrapper:[B.wp.p(8),B.wp.borderRadius(4),{backgroundColor:"white"}]}),rV=function(e){var n=e.currentBuild,t=(0,rO._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:rA.co}),r=(0,s._)((0,d.useState)([]),2),i=r[0],o=r[1],a=t!==rA.co;return(0,d.useEffect)(function(){var e=(null===(i=n.repl.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"&&n.repl.hostingDeployment.id,r=[];switch(n.provider){case y.Q0.Gce:case y.Q0.CloudRun:case y.Q0.Static:var i,a,l,s,c,u,d=(null===(a=n.repl.hostingDeployment)||void 0===a?void 0:a.__typename)==="HostingDeployment"?null===(l=n.repl.hostingDeployment)||void 0===l?void 0:l.replitAppSubdomain:void 0;!d&&(null===(s=n.repl.owner)||void 0===s?void 0:s.username)&&(d="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat((null===(u=window)||void 0===u?void 0:null===(c=u.location)||void 0===c?void 0:c.hostname)!=="replit.com"?".staging":"",".").concat(t),private:!1})}if(n.repl.domains){var p=n.repl.domains.filter(function(n){return(null==n?void 0:n.hosting_deployment_id)===e}),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;w&&r.push({href:"https://".concat(w.domain),private:!1,state:"verified"!==w.state?w.state:void 0})}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}o(r)},[n,t]),(0,u.FD)(j.S,{gap:2,css:[B.wp.flex.growAndShrink(1)],children:[a?(0,u.Y)(G.N,{colorway:"warning",text:"The ".concat(rA.co," domain is currently unavailable, please use the ").concat(t," URL below.")}):null,i.map(function(e,n){return(0,u.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,u.Y)(V.EY,{css:[B.wp.flex.shrink(1)],multiline:!1,children:(0,u.Y)("a",{href:e.href,target:"_blank",css:[B.wp.color.foregroundDefault],children:e.href})}),e.private?(0,u.Y)(rH.A,{color:ek.LU.foregroundDefault}):null,(0,u.Y)("a",{href:e.href,target:"_blank",css:[B.wp.display.flex,B.wp.align.center],children:(0,u.Y)(rB.A,{color:ek.LU.foregroundDefault})}),(0,u.Y)(rj,{url:e.href}),e.state?(0,u.FD)(V.EY,{multiline:!1,children:["(","pushed_to_goval"===e.state?"verifying":e.state,")"]}):null]},"domains-".concat(n))})]})};function rj(e){var n=e.url,t=(0,s._)((0,d.useState)(!1),2),r=t[0],i=t[1];return(0,u.FD)(rM.Wv,{isOpen:r,onOpenChange:function(e){return i(e)},label:"QR Code",children:[(0,u.Y)(eD.K0,{alt:"QR Code",children:(0,u.Y)(rW,{})}),(0,u.Y)(j.S,{align:"start",children:(0,u.Y)(j.S,{css:rG.qrCodeWrapper,children:(0,u.Y)(rN.Ay,{size:128,value:n})})})]})}var rZ=(0,O.i7)("\n    50% {\n      background-color: ".concat(ek.LU.accentPositiveDimmest,";\n      outline: 1px solid ").concat(ek.LU.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),rq=(0,eO.x)({deploymentInfo:[B.wp.colWithGap(8),B.wp.p(16),B.wp.borderRadius(),{outline:"1px solid transparent"}]}),rK=(0,eO.x)({textButton:[B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":[B.wp.cursor.pointer,B.wp.color.accentPrimaryStronger,B.wp.focusRing]}],textLink:B.wp.hover(B.wp.color.accentPrimaryStrongest),labeledSection:[B.wp.flex.growAndShrink(1),(0,A._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline])],labeledSectionFullWidth:[B.wp.flex.growAndShrink(1),(0,A._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline,B.wp.flex.grow(1),B.wp.justify.spaceBetween])],buildStatus:[B.wp.flex.shrink(1)],deploymentInfo:rq.deploymentInfo,deploymentInfoAnimate:[rq.deploymentInfo,{animation:"".concat(rZ," 700ms ease-out")}],deploymentInfoTitle:[B.wp.flex.wrap,B.wp.flex.shrink(0),B.wp.justify.spaceBetween],deploymentInfoContent:[(0,A._)({},B.kL.min(400),B.wp.colWithGap(4))],typeColumn:[B.wp.flex.wrap,B.wp.flex.shrink(1)]}),r$=function(e){var n=e.text,t=e.onClick,r=e.disabled;return(0,u.Y)("button",{css:rK.textButton,onClick:t,disabled:void 0!==r&&r,children:n})},rJ=function(e){var n=e.name,t=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,u.FD)(j.S,{css:rK.typeColumn,row:!0,gap:6,children:[(0,u.Y)(V.EY,{multiline:!1,children:n}),t?(0,u.FD)(V.EY,{color:"dimmest",multiline:!1,children:["(",t,")"]}):null,(0,u.Y)(r$,{text:"Manage",onClick:o,disabled:!r}),i?(0,u.Y)(rh(),{legacyBehavior:!0,href:"/usage",passHref:!0,children:(0,u.Y)("a",{css:rK.textLink,children:(0,u.Y)(V.EY,{children:"See all usage"})})}):null]})},rQ=function(e){var n=e.label,t=e.children,r=e.fullWidth;return(0,u.FD)(j.S,{css:r?rK.labeledSectionFullWidth:rK.labeledSection,children:[(0,u.Y)(j.S,{css:B.wp.minWidth(100),children:(0,u.Y)(V.EY,{css:B.wp.color.foregroundDimmer,multiline:!1,children:n})}),t]})},rX=function(e){var n=e.provider,t=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=e.onViewAction,a=(0,h.uS)(),l=(0,h.cF)(),s=void 0!==l,c=n!==y.Q0.Static&&s&&null===l.hasImageTag,p=!!((a===m.d.Ready||a===m.d.Suspended)&&!c),f=null,g=null,v=null,w=null,b=(0,h.tq)(),Y=(0,d.useRef)(void 0);(0,d.useEffect)(function(){b&&(Y.current=null==b?void 0:b.id)},[b,null==b?void 0:b.id]);var A=(null==l?void 0:l.status)===y.nH.Success,C=(null==l?void 0:l.id)===Y.current,x=(null==l?void 0:l.provider)!==y.Q0.Cron;switch(l&&(g=(0,u.FD)(u.FK,{children:[(0,u.Y)(rQ,{label:"Status",children:(0,u.Y)(j.S,{css:rK.buildStatus,row:!0,gap:4,align:"center",children:(0,u.Y)(rw,{onClick:function(){r(l)}})})}),x?(0,u.Y)(rQ,{label:"Domain",children:(0,u.Y)(rV,{currentBuild:l})}):null]})),n){case y.Q0.Gce:v=(0,u.Y)(rQ,{label:"Type",fullWidth:!s,children:(0,u.Y)(rJ,{name:ry[n],sku:null==t?void 0:t.configurationLabel,canManage:p,onManageClick:i})});break;case y.Q0.CloudRun:v=(0,u.Y)(rQ,{label:"Type",fullWidth:!s,children:(0,u.Y)(rJ,{name:ry[n],sku:t?"".concat(t.configurationLabel," / ").concat(t.maxInstances," Max"):"Beta",canManage:p,usageLink:!0,onManageClick:i})});break;case y.Q0.Static:v=(0,u.Y)(rQ,{label:"Type",fullWidth:!s,children:(0,u.Y)(rJ,{name:ry[n],sku:void 0,canManage:p&&s,onManageClick:i})});break;case y.Q0.Cron:if(!(null==l?void 0:null===(_=l.machineJob)||void 0===_?void 0:_.timezone))break;var _,k,D,E=null==l?void 0:null===(k=l.machineJob)||void 0===k?void 0:k.timezone,R=rm.m.find(function(e){return e.utc.includes(E)}),I=(null==R?void 0:R.abbr)||E;v=(0,u.Y)(rQ,{label:"Type",fullWidth:!s,children:(0,u.Y)(rJ,{name:ry[n],sku:"".concat(I,", ").concat(null==l?void 0:null===(D=l.machineJob)||void 0===D?void 0:D.crontab),canManage:!1,onManageClick:i})}),f=(0,u.Y)(rU,{onSuccessfulExecution:function(){o({type:S.k.ChangeView,payload:{view:S.P.Schedule}})}})}return(c&&(w=(0,u.Y)(j.S,{children:(0,u.Y)(G.N,{icon:(0,u.Y)(nl.A,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),g||v||w)?(0,u.FD)(n2.ui,{elevated:!0,css:A&&C?rK.deploymentInfoAnimate:rK.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,u.FD)(j.S,{css:rK.deploymentInfoTitle,row:!0,gap:8,children:[(0,u.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Production"}),f,l.rollbackSourceBuildId?(0,u.Y)(tM,{build:l,background:"highest"}):null]}):null,(0,u.FD)(j.S,{css:rK.deploymentInfoContent,gap:8,children:[(0,u.Y)(rk,{}),g,v,w]})]}):null},r0=t(99655),r1=t(73225),r2=t(60049),r5=t(98251),r4=t(16170),r3=t(92517),r8=(0,eO.x)({subView:[B.wp.pb(12),B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)],deploymentInfoWrapper:[{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[B.wp.pb(16),B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)]}),r7=function(e){var n,t,r,i=e.view,o=e.onLifecycleCommand,a=e.onViewAction,l=e.onError,c=e.openFile,p=e.hasAgentSession,f=(0,h.uS)(),g=(0,h.i$)(),v=(0,h.cF)(),w=(0,h.tq)(),b=(0,h.om)(),A=(0,h.g$)(),C=(0,r0.m6)(),x=(0,h.Tp)().rollbackToPreviousBuild,_=(n=(0,r2.useRouter)(),t=(0,r0.ME)(n,"storeReviewPrompt")&&(0,r0.Po)(n),r=(0,d.useCallback)(function(e){var n=e.source;t&&(0,r4._z)({messageType:r3.tF.REQUEST_STORE_REVIEW_PROMPT,source:n},(0,r5.Ak)())},[t]),(0,d.useMemo)(function(){return{isSupported:t,requestPrompt:r}},[t,r])),k=void 0!==v,D=(0,nq.A)(),E=(0,h.ik)(D),R=null==v?void 0:v.provider,I=k&&v.machineConfiguration?{configurationId:v.machineConfiguration.id,configurationLabel:v.machineConfiguration.label,configurationSlug:v.machineConfiguration.slug,maxInstances:null==v?void 0:v.maxMachineInstances}:void 0,F=(0,r1.A)("deployments-pane","deployments-mobile-download"),T=F.shouldDisplay,P=F.dismiss,L=F.register;(0,d.useEffect)(function(){L()},[L]),(0,d.useEffect)(function(){k&&f===m.d.Deploying&&_.requestPrompt({source:"deployProgress"})},[_,k,f]);var U=(null==v?void 0:v.status)&&v.status===y.nH.Success&&T&&!C,N=(0,s._)((0,d.useState)(!1),2),O=N[0],M=N[1],B=(0,s._)((0,d.useState)(null),2),H=B[0],z=B[1],W=(0,s._)((0,d.useState)(null),2),G=W[0],V=W[1],Z=(0,s._)((0,d.useState)(null),2),q=Z[0],K=Z[1];(0,d.useEffect)(function(){(0,eU.Ae)({context:S.P.Deployment})},[]),(0,d.useEffect)(function(){(f===m.d.Preparing||f===m.d.Deploying)&&(i===S.P.DeploymentInProgress||G||a({type:S.k.ChangeView,payload:{view:S.P.DeploymentInProgress}}))},[f,i,a,G]);var $=(0,d.useRef)(void 0);(0,d.useEffect)(function(){$.current=null==w?void 0:w.id},[null==w?void 0:w.id]);var J=(null==v?void 0:v.status)===y.nH.Success,Q=(null==v?void 0:v.id)===$.current;(0,d.useEffect)(function(){J&&Q&&a({type:S.k.ChangeView,payload:{view:S.P.Deployment}})},[J,Q,a]);var X=null==w?void 0:w.status,ee=(0,d.useRef)(X);(0,d.useEffect)(function(){X&&(ee.current=X)},[X]);var en=(0,h.Ol)(),et=(0,h.Rh)();if(G)return(0,u.Y)(rn,{build:G,fs:b,openFile:c,openDebugChat:function(e){a({type:S.k.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})},onBack:function(){V(null)},onViewAppLogs:function(){a({type:S.k.ChangeView,payload:{view:S.P.Logs}})}});if(H)return(0,u.Y)(re,{build:H,onBack:function(){z(null)},onClickRollback:function(e){x({rollbackCandidateBuildId:H.id,envVars:e})},onError:function(e){z(null),l(e)}});if(q===y.Q0.CloudRun)return(0,u.Y)(nf.J,{onError:l,onConfirm:function(e){a({type:S.k.SendDeploymentLifecycleCommand,payload:{command:y.jP.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return K(null)}});if(q===y.Q0.Gce)return(0,u.Y)(rp.VW,{replId:D,isTeamRepl:E,initialMachineConfiguration:I,onConfirm:function(e){a({type:S.k.SendDeploymentLifecycleCommand,payload:{command:y.jP.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return K(null)},onError:l});var er=!k||!g||!(f===m.d.Ready||f===m.d.Suspended||f===m.d.ProcessingLifecycleCommand),ei=function(e){a({type:S.k.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})};return(0,u.Y)(u.FK,{children:(0,u.Y)(Y.A,{children:(0,u.FD)(j.S,{children:[(0,u.FD)(j.S,{row:!0,gap:12,children:[k?(0,u.Y)(np,{type:"future"}):null,(0,u.FD)(j.S,{css:r8.subView,children:[er?null:(0,u.Y)(nc,{dotReplit:en,fs:b,secrets:A,ports:et,deploymentId:g,replId:D,onError:l,expanded:O,setExpanded:M,shouldShowMobileTour:null!=U&&U,onDismissMobileTour:P,openNetworkingPane:function(){a({type:S.k.OpenPane,payload:{type:"networking"}})},onResume:function(){o({command:y.jP.Resume})},hasAgentSession:p}),i===S.P.DeploymentInProgress?(0,u.Y)(tA,{openFile:c,openDebugChat:ei,viewBuildLogsOnLoad:!k,onViewLogs:function(){a({type:S.k.ChangeView,payload:{view:S.P.Logs}})},onCanceled:function(){a({type:S.k.ChangeView,payload:{view:S.P.Deployment}}),l("Build cancelled")},onError:l}):null]})]}),k&&R?(0,u.FD)(u.FK,{children:[(0,u.Y)(t5,{type:"failureQueue",onViewBuildLogs:V,openFile:c,openDebugChat:ei,view:i,provider:R}),(0,u.FD)(j.S,{css:r8.deploymentInfoWrapper,row:!0,gap:12,children:[(0,u.Y)(np,{type:"present"}),(0,u.Y)(j.S,{css:r8.deploymentInfo,children:(0,u.Y)(rX,{provider:R,machine:I,onViewBuildLogs:V,onManageClick:function(){if(R===y.Q0.CloudRun||R===y.Q0.Gce){K(R);return}R===y.Q0.Static&&a({type:S.k.ChangeView,payload:{view:S.P.Settings}})},onViewAction:a})})]}),(0,u.Y)(t5,{onViewBuildLogs:V,openFile:c,openDebugChat:ei,view:i,provider:R,onClickRollback:function(e){z(e)}})]}):null]})})})};function r6(){var e=(0,R._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    org {\n      __typename\n      id\n      slug\n      type\n    }\n  }\n"]);return r6=function(){return e},e}function r9(){var e=(0,R._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return r9=function(){return e},e}var ie={},it=(0,I.J1)(r6()),ir=(0,I.J1)(r9(),it);function ii(){var e=(0,R._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ii=function(){return e},e}var io={},ia=(0,I.J1)(ii(),it),il=t(54867),is=t(23108),ic=t(41928),iu=t(56071),id=t(39797),ip=t(89223),ih=t(53536),im=t(60372),ig=(0,eO.x)({cta:[B.wp.width("100%"),B.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[B.wp.colWithGap(8),B.wp.align.center],ctaStatusBanner:[B.wp.textAlign.left],disabledBanner:[B.wp.py(6),{alignSelf:"center"}]});function iv(e){var n=e.provider,t=e.isDeployable,r=e.isDeployableCode,i=e.isDeployableExplanation,o=e.isIncludedInSubscription,a=e.loading,l=e.onProviderContinue,s=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,d=e.showPaymentMethodForm,p=e.setShowSupportForm,f=e.replId,m=e.org,g=e.hasAgentSession,v=(0,h.gq)(),w=(0,r0.m6)();if(!t&&w)return(0,u.Y)(G.N,{text:i,colorway:"grey",css:ig.disabledBanner});if(o)return(0,u.FD)(u.FK,{children:[(0,u.Y)(eX.$n,{colorway:"primary",onClick:l,text:"Included in your subscription",loading:a,css:ig.cta}),(0,u.Y)(V.EY,{color:"dimmer",children:i})]});var b=function(){if(m){var e=(0,iu.EG)(m).settings.href.toString()+"/billing";window.open(e,"_blank");return}c()};switch(r){case y.S4.RequiresActiveSubscription:return(0,u.Y)(j.S,{css:ig.ctaContainer,children:(0,u.Y)(id.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ig.cta,colorway:"primary",variant:"default",disabled:d,onPlanCheckoutComplete:s,highlightUpsell:"deployments"})});case y.S4.RequiresPaymentMethodOrSubscription:return(0,u.FD)(j.S,{css:ig.ctaContainer,children:[(0,u.Y)(id.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ig.cta,colorway:"primary",variant:"default",disabled:d,onPlanCheckoutComplete:s}),(0,u.Y)(eX.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:ig.cta,disabled:d,loading:a,iconLeft:(0,u.Y)(im.A,{}),onClick:b})]});case y.S4.RequiresSmsVerification:return(0,u.Y)(is.A,{context:y.SG.Deployments,onSuccess:s});case y.S4.RequiresPaymentMethod:return(0,u.Y)(eX.$n,{colorway:"primary",text:"Add a payment method",css:ig.cta,disabled:d,loading:a,iconLeft:(0,u.Y)(im.A,{}),onClick:function(){return b()}});case y.S4.RequiresUnbanning:return(0,u.Y)(ih.d,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,u.Y)(nl.A,{}),css:ig.ctaStatusBanner,onClick:function(){return p()}});case y.S4.InsufficientBudget:return(0,u.FD)(u.FK,{children:[(0,u.Y)(G.N,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,u.Y)(nl.A,{}),css:ig.ctaStatusBanner}),(0,u.Y)(ip.h,{onUpdateSuccess:s,replId:f})]});case y.S4.FeatureDisabled:case y.S4.FeatureUnsupportedForReplitTeams:case y.S4.FeatureUnsupportedForTeamsEdu:case y.S4.FeatureUnsupportedForTeamsFree:case y.S4.FeatureUnsupportedForTeamsPro:case y.S4.InsufficientPermissions:case y.S4.InsufficientQuota:case y.S4.RequiresActiveTeamsSubscription:case y.S4.RequiresEmailVerification:if(r===y.S4.InsufficientQuota&&"static"===n)return(0,u.FD)(j.S,{css:ig.ctaContainer,children:[(0,u.Y)(G.N,{text:"You have reached the maximum number of Static deployments available on your plan.",colorway:"grey",css:ig.disabledBanner}),(0,u.Y)(id.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ig.cta,colorway:"primary",variant:"default",disabled:d,onPlanCheckoutComplete:s})]});return(0,u.Y)(G.N,{text:i,colorway:"grey",css:ig.disabledBanner});case y.S4.Authorized:case y.S4.AuthorizedQuota:return(0,u.FD)(u.FK,{children:[g&&n===y.Q0.Static?(0,u.Y)(G.N,{text:"Static deployments are not yet officially supported for Agent Apps.",colorway:"warning",icon:(0,u.Y)(nl.A,{}),css:ig.cta}):null,(0,u.Y)(eX.$n,{colorway:"primary",onClick:l,text:"Set up your deployment",loading:a,css:ig.cta}),v&&!v.hasDeploymentRepricing?(0,u.Y)(j.S,{row:!0,gap:8,align:"center",justify:"center",children:(0,u.Y)(ic.u,{})}):null]});default:(0,il.A)(r)}}var iw=t(76813),iy=t(14178),ib=t(76634),iS=t(39026),iY=t(33170),iA=t(4723),iC=(0,eO.x)({type:[B.wp.borderRadius(8),B.wp.p(8)]});function ix(e){var n,t,r,i,o=e.replId,a=e.initialState,l=e.fs,c=e.secrets,p=e.dotReplit,f=e.ports,m=e.onBack,g=e.onDeploy,v=e.onError,w=e.openNetworkingPane,b=e.hasAgentSession,S=(0,s._)((0,d.useState)(a),2),A=S[0],C=S[1],x=(n={variables:{replId:o},onError:function(e){return v(e.message)}},t=(0,E._)({},ie,n),F.I(ir,t)),_=x.data,k=x.loading,D=(0,h._k)().scheduledDeploymentCostDetails,R=(null==_?void 0:_.getRepl.__typename)==="Repl"?_.getRepl:null,I=R?(0,ib.ER)({replSlug:R.slug,username:null===(r=R.owner)||void 0===r?void 0:r.username}):"",T=(0,rO._P)({controlName:rA.T$,logFlagToAnalytics:!1}),P=(0,iA.Os)(iY.IW.id,iY.Gp.ConfirmDeployment),L=(0,iA.Os)(iY._t.id,iY.ij.ConfirmDeployment);if(k)return(0,u.Y)(nn.cN,{});if(!R)return null;var U=(null==R?void 0:null===(i=R.owner)||void 0===i?void 0:i.__typename)==="Team";return A.type===y.Q0.Static?(0,u.FD)(u.FK,{children:[(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(eD.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:m,children:(0,u.Y)(tX.A,{})})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(n2.ui,{css:iC.type,elevated:!0,children:(0,u.Y)(rQ,{label:"Type",fullWidth:!0,children:(0,u.Y)(rJ,{name:ry[A.type]})})})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(nt.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:A.type,onError:v,onCancel:m,onDeploy:g,dotReplit:p,fs:l,ports:f,secrets:c,openNetworkingPane:w,hasAgentSession:b})})]}):A.type===y.Q0.Gce?(0,u.FD)(u.FK,{children:[(0,u.Y)(rp.VW,{replId:o,isTeamRepl:U,onBack:m,onError:v,onChange:function(e){C({type:y.Q0.Gce,machine:e})}}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(nt.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:A.type,machine:A.machine,onError:v,onCancel:m,onDeploy:g,fs:l,secrets:c,dotReplit:p,ports:f,openNetworkingPane:w,hasAgentSession:b})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.FD)(V.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,u.Y)("a",{href:iy.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):A.type===y.Q0.Cron?T?(0,u.FD)(u.FK,{children:[(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(nn.fw,{onBack:m})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.FD)(j.S,{gap:4,children:[(0,u.Y)(V.EY,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,u.FD)(V.EY,{variant:"small",color:"dimmer",children:["Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $",D.fixedCostPerMonth,"/month per scheduled deployment scheduler."]})]})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(iS.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",detail:"More machine configurations coming soon.",children:(0,u.Y)(n2.ui,{css:iC.type,elevated:!0,children:(0,u.Y)(rJ,{name:"1 vCPU / 2 GiB RAM",sku:"$".concat(D.fixedConfigurationCostPerSec,"/sec")})})})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(nt.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:A.type,onError:v,onCancel:function(){return m()},onDeploy:g,fs:l,secrets:c,dotReplit:p,ports:f,openNetworkingPane:w,hasAgentSession:b})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.FD)(V.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,u.Y)("a",{href:iy.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):null:A.machine?(0,u.FD)(u.FK,{children:[(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(eD.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){C({type:y.Q0.CloudRun,machine:null}),P.goto(iY.Gp.ApproveDeployment),L.goto(iY.ij.ApproveDeployment)},children:(0,u.Y)(tX.A,{})})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(n2.ui,{css:iC.type,elevated:!0,children:(0,u.Y)(rQ,{label:"Type",fullWidth:!0,children:(0,u.Y)(rJ,{name:ry[A.type],sku:"".concat(A.machine.configurationLabel," / ").concat(A.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){C({type:y.Q0.CloudRun,machine:null})}})})})}),(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(nt.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:A.type,machine:A.machine,onError:v,onCancel:function(){return C({type:y.Q0.CloudRun})},onDeploy:g,fs:l,secrets:c,dotReplit:p,ports:f,openNetworkingPane:w,hasAgentSession:b})})]}):(0,u.Y)(Y.A,{maxWidth:!0,children:(0,u.Y)(nf.J,{onBack:m,onError:v,onConfirm:function(e){C({type:y.Q0.CloudRun,machine:e})}})})}var i_=t(69796),ik=t(19346),iD=t(14968),iE=t(66286),iR=t(85670),iI=t(22414),iF=t(95427),iT=t(84318),iP=B.kL.min(600),iL={order:"--provider-order"},iU={order:"var(".concat(iL.order,")")},iN=(0,O.AH)([B.wp.width("100%"),B.wp.maxWidth(340),(0,A._)({},iP,{order:iU.order})]),iO=(0,O.AH)([B.wp.reset.button,B.wp.overflow("hidden"),B.wp.position.relative,B.wp.focusRing,B.wp.borderRadius(),B.wp.width("100%")]),iM=(0,eO.x)({self:[iN,{"&::after":{content:"none"}}],selfLoading:[iN,W.S.foregroundPulse(),B.wp.border({color:ek.LU.backgroundHighest})],button:[iO,B.wp.border({color:ek.LU.outlineDimmer}),{"&:not(.is-disabled)":[e1.b.filledAndOutlined],"&.is-disabled":[B.wp.backgroundColor.backgroundHigher,{cursor:"not-allowed"}]}],buttonActive:[iO,B.wp.cursor.pointer,B.wp.backgroundColor.accentPrimaryDimmest,B.wp.border({color:ek.LU.accentPrimaryStronger})],content:[B.wp.p(8),B.wp.colWithGap(4),(0,A._)({},iP,B.wp.py(12))],contentRecommended:[B.wp.p(8),B.wp.colWithGap(4),(0,A._)({},iP,{paddingTop:12,paddingBottom:20})],recommended:[B.wp.py(4),B.wp.backgroundColor.backgroundHighest],recommendedActive:[B.wp.py(4),B.wp.backgroundColor.accentPrimaryDimmer],icon:[B.wp.display.none,B.wp.color.foregroundDimmer,B.wp.center,(0,A._)({},iP,B.wp.display.flex)],iconActive:[B.wp.display.none,B.wp.color.accentPrimaryStrongest,B.wp.center,(0,A._)({},iP,B.wp.display.flex)],title:[B.wp.center]});function iB(e){var n,t=e.loading,r=e.active,i=e.disabled,o=void 0!==i&&i,a=e.provider,l=e.onClick,s=e.title,c=e.description,d=e.recommended,p=e.index,f=e.isAgentDeployment,h=(n={},(0,A._)(n,y.Q0.CloudRun,(0,u.Y)(iR.A,{size:32})),(0,A._)(n,y.Q0.Gce,(0,u.Y)(iI.A,{size:32})),(0,A._)(n,y.Q0.Static,(0,u.Y)(iF.A,{size:32})),(0,A._)(n,y.Q0.Cron,(0,u.Y)(nM.A,{size:32})),n)[a];return(0,u.Y)("span",{css:t?iM.selfLoading:iM.self,children:(0,u.FD)("button",{css:r?iM.buttonActive:iM.button,className:o?"is-disabled":"",onClick:function(){return l(a)},disabled:t||o,style:(0,A._)({},iL.order,p),children:[d?(0,u.Y)(j.S,{css:r?iM.recommendedActive:iM.recommended,children:(0,u.Y)(V.EY,{variant:"small",children:f?"Chosen by Agent":"Recommended"})}):null,(0,u.FD)(j.S,{css:d?iM.contentRecommended:iM.content,children:[(0,u.Y)(j.S,{css:r?iM.iconActive:iM.icon,children:h}),(0,u.FD)(j.S,{children:[(0,u.Y)(j.S,{css:iM.title,row:!0,gap:4,children:(0,u.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:s})}),(0,u.Y)(V.EY,{multiline:!1,variant:"small",children:c})]})]})]})})}var iH=(0,eO.x)({container:[B.wp.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[B.wp.flex.growAndShrink(1),B.wp.textAlign.left]});function iz(e){var n=e.header,t=e.info;return(0,u.FD)(j.S,{css:iH.container,gap:12,children:[(0,u.Y)(V.EY,{variant:"subheadDefault",children:n}),t.map(function(e,n){return(0,u.FD)(j.S,{css:iH.item,align:"center",children:[e.icon,(0,u.Y)(V.EY,{css:iH.text,children:e.text})]},n)})]})}var iW=[y.Q0.Gce,y.Q0.CloudRun,y.Q0.Static,y.Q0.Cron],iG=(0,eO.x)({container:[B.wp.textAlign.center,t_.R1.maxWidth],title:[B.wp.width("100%"),B.wp.maxWidth(400),B.wp.align.center,{marginLeft:"auto",marginRight:"auto"}],body:B.wp.colWithGap(16),providers:[B.wp.flex.column,B.wp.align.center,(0,A._)({gap:8},iP,[B.wp.flex.row,B.wp.align.center,{gap:12}])],providerDetails:B.wp.colWithGap(16),ctaGroup:B.wp.colWithGap(8),payment:[B.wp.p(16),B.wp.borderRadius("container"),B.wp.textAlign.left,B.wp.shadow(2)]}),iV=function(e){var n,t,r,i,o,a,l=e.replId,c=e.onError,p=e.onDeploy,f=e.onViewAction,m=e.initialSelectedProvider,v=e.disableUnrecommendedProviders,b=void 0!==v&&v,C=e.hasAgentSession,x=e.flow,_=(0,h.om)(),k=(0,h.g$)(),D=(0,h.Ol)(),R=(0,h.Rh)(),I=(0,h._k)(),T=I.getRvmDeploymentCostDetailsByConfigurationSlug,P=I.autoscaleDeploymentCostDetails,L=I.staticDeploymentCostDetails,U=I.scheduledDeploymentCostDetails,N=(0,s._)((0,d.useState)(!1),2),O=N[0],M=N[1],B=(0,s._)((0,d.useState)(!1),2),H=B[0],z=B[1],W=(0,s._)((0,d.useState)(null!=m?m:null),2),G=W[0],Z=W[1],q=(0,h.kM)({replId:l,onError:c,dotReplitService:D}),K=q.activeProvider,$=q.setActiveProvider,J=q.recommendedProvider,Q=(0,s._)((0,d.useState)(null!==(o=null==x?void 0:x.skipIntro)&&void 0!==o&&o),2),X=Q[0],ee=Q[1];b||(b=X&&!!(null==x?void 0:x.isAgentDeployment));var en=(n={variables:{id:l},onError:function(e){return c(e.message)}},t=(0,E._)({},io,n),F.I(ia,t)),et=en.loading,er=en.data,ei=(0,s._)((0,d.useState)(!1),2),eo=ei[0],ea=ei[1],el=(0,h.mj)(),es=el.getDeployabilityByProvider,ec=el.refetch,eu=es(K),ed=eu.deploy,ep=eu.isIncludedInSubscription,ef=ed.isAuthorized,eh=ed.code,em=ed.message,eg=et||eo||void 0===K,ev=(0,rO._P)({controlName:"flag-disable-agent-static-deployments",logFlagToAnalytics:!1});(0,d.useEffect)(function(){(0,eU.Ae)({context:"intro"})},[]);var ew=(0,ik.Vv)(),ey=ew.getDescription,eb=ew.Icon,eS=(0,rO._P)({controlName:rA.T$,logFlagToAnalytics:!1}),eY=(null==er?void 0:null===(r=er.getRepl)||void 0===r?void 0:r.__typename)==="Repl"&&(null===(i=er.getRepl.org)||void 0===i?void 0:i.type)==="team"?er.getRepl.org:void 0;(0,d.useEffect)(function(){X&&ef&&void 0!==K&&G!==K&&Z(K)},[K,G,X,ef]);var eA=(0,d.useCallback)((0,g._)(function(){return(0,w.YH)(this,function(e){switch(e.label){case 0:return ea(!0),[4,ec()];case 1:return e.sent(),ea(!1),[2]}})}),[ec,ea]),eC=(0,iA.Os)(iY.IW.id,iY.Gp.SetupDeployment),ex=(0,iA.Os)(iY._t.id,iY.ij.SetupDeployment);if(G)return(0,u.Y)(ix,{replId:l,initialState:G?{type:G}:{type:y.Q0.Gce,didCheckout:!0},fs:_,secrets:k,dotReplit:D,ports:R,onDeploy:p,onBack:function(){ee(!1),Z(null),eC.goto(iY.Gp.SetupDeployment),ex.goto(iY.ij.SetupDeployment)},onError:c,hasAgentSession:C,openNetworkingPane:function(){f({type:S.k.OpenPane,payload:{type:"networking"}})}});var e_=C&&ev&&J!==y.Q0.Static,ek=(a={title:"Deploy to production",subtitle:ey({type:"deployments"})},(0,A._)(a,y.Q0.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,u.Y)(iw.Qm,{})},{text:"Reserved VMs are billed hourly starting at $".concat(T("e2-micro").costPerHour,"/hour."),icon:(0,u.Y)(iw.QX,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,u.Y)(iw.XD,{})}]}),(0,A._)(a,y.Q0.CloudRun,{display:!0,title:"Autoscale",subtitle:"".concat(J===y.Q0.CloudRun?"Best choice for most apps":"Meet demand exactly"),header:"Scale up and down to meet demand exactly",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,u.Y)(iw.Js,{})},{text:P.fixedCostPerMonth?"Usage-based pricing. Billed at $".concat(P.costPerComputeUnitUsd," per compute unit, plus a fixed cost of $").concat(P.fixedCostPerMonth," per month per deployment."):"Compute units are billed at $".concat(P.costPerComputeUnitUsd," per compute unit."),icon:(0,u.Y)(iw.iw,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,u.Y)(iw.XD,{})}]}),(0,A._)(a,y.Q0.Static,{display:!e_,title:"Static pages",subtitle:"Simple HTML websites",header:"Basic websites with no backend server",info:[{text:"You only pay for outbound data transfer included in Replit plans. $".concat(L.outboundDataCostPerGib,"/GiB otherwise."),icon:(0,u.Y)(iw.ly,{})},{text:"No database or data persistence.",icon:(0,u.Y)(iw.Y9,{})},{text:"Suitable for HTML, CSS, JavaScript sites.",icon:(0,u.Y)(iw.XD,{})}]}),(0,A._)(a,y.Q0.Cron,{display:eS,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,u.Y)(iw.Y9,{})},{text:"Usage-based pricing. Each scheduled job is billed at $".concat(U.costPerComputeUnitUsd," per compute unit + $").concat(U.fixedCostPerMonth," per month for the scheduler."),icon:(0,u.Y)(iw.iw,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,u.Y)(iw.XD,{})}]}),a);return(0,u.FD)(Y.A,{centered:!0,children:[(0,u.Y)(e0.a,{isOpen:H,onRequestClose:function(){return z(!1)},children:(0,u.Y)(iE.A,{onRequestClose:function(){return z(!1)}})}),(0,u.FD)(j.S,{css:iG.container,gap:32,children:[X?null:(0,u.FD)(j.S,{css:iG.title,gap:4,children:[(0,u.Y)(eb,{pane:{type:"deployments"},size:48}),(0,u.Y)(V.Y9,{level:1,variant:"subheadBig",children:ek.title}),(0,u.FD)(V.EY,{color:"dimmer",children:[ek.subtitle," ",(0,u.Y)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",children:"Learn more."})]}),(0,u.Y)(iD.v,{iconLeft:(0,u.Y)(iT.A,{}),text:" Choosing the right deployment type",href:"https://www.youtube.com/watch?v=sXP5d0k1atk",target:"_blank"})]}),(0,u.FD)(j.S,{css:iG.body,children:[(0,u.Y)(j.S,{css:iG.providers,children:iW.map(function(e,n){if(!ek[e].display)return null;var t=ek[e],r=t.title,i=t.subtitle,o=K===e,a=J===e;return(0,u.Y)(iB,{provider:e,loading:eg,active:o,onClick:function(e){$(e),M(!1)},title:r,description:i,recommended:a,index:e===J&&0===n?1.5:e===J&&2===n?.5:n,disabled:b&&!a,isAgentDeployment:(null==x?void 0:x.isAgentDeployment)&&a},e)})}),(0,u.FD)(j.S,{css:iG.ctaGroup,children:[(0,u.Y)(iv,{loading:eg,provider:K,isDeployable:ef,isDeployableCode:eh,isDeployableExplanation:em,isIncludedInSubscription:ep,onProviderContinue:function(){K&&(X||(Z(K),eC.goto(iY.Gp.ApproveDeployment),ex.goto(iY.ij.ApproveDeployment)))},refetchDeployabilityQueryData:eA,setShowPaymentMethodForm:function(){return M(!0)},showPaymentMethodForm:O,setShowSupportForm:function(){return z(!0)},org:eY,replId:l,hasAgentSession:C}),O?(0,u.Y)(n2.ui,{elevated:!0,css:iG.payment,children:(0,u.Y)(i_.y,{onSuccess:(0,g._)(function(){return(0,w.YH)(this,function(e){switch(e.label){case 0:return M(!1),[4,eA()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,u.Y)(j.S,{css:iG.providerDetails,children:!X&&K?(0,u.Y)(iz,{header:ek[K].header,info:ek[K].info}):null})]})]})},ij=t(39711),iZ=t(51297);function iq(){var e=(0,R._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return iq=function(){return e},e}function iK(){var e=(0,R._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return iK=function(){return e},e}function i$(){var e=(0,R._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return i$=function(){return e},e}var iJ={},iQ=(0,I.J1)(iq()),iX=(0,I.J1)(iK(),iQ),i0=(0,I.J1)(i$(),iQ),i1=t(29581),i2=t(14349),i5=(0,d.createContext)(null),i4=function(){var e=(0,d.useContext)(i5);if(!e)throw Error("Expected log context in context");return e},i3=function(e){var n,t,r,i,o=e.deploymentId,a=e.replId,l=e.executionId,c=e.openFile,u=(0,s._)((0,d.useState)(null),2),p=u[0],f=u[1],h=(0,s._)((0,d.useState)([]),2),m=h[0],y=h[1],b=(0,s._)((0,d.useState)(),2),S=b[0],Y=b[1],A=(0,s._)((0,d.useState)({message:"",executionId:l,start:null,end:null,level:null}),2),C=A[0],x=A[1],_=(0,d.useCallback)(function(){return x({message:"",executionId:l,start:null,end:null,level:null})},[l]),k=(0,s._)((0,d.useState)(!0),2),D=k[0],R=k[1],I=(0,s._)((0,d.useState)(!1),2),T=I[0],P=I[1],L=(0,s._)((0,d.useState)(!1),2),U=L[0],N=L[1],O=(0,s._)((0,d.useState)(!1),2),M=O[0],B=O[1],H=(0,s._)((0,i1.A)("deployments-logs-color",!0),2),z=H[0],W=H[1],G=(0,d.useRef)(!1),V=(0,i2.A)(function(e){var n=e.width;if(void 0!==n){var t=n>500;N(t),G.current||(G.current=!0,P(t))}}),j=(0,ij.Xj)(),Z=(n={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:o,replId:a,executionId:C.executionId?"d-scheduled-".concat(o,"-").concat(C.executionId):void 0,limit:100,level:C.level,message:C.message,start:null===(r=C.start)||void 0===r?void 0:r.toDate(j).toISOString(),end:null===(i=C.end)||void 0===i?void 0:i.toDate(j).toISOString()},onError:function(){Y("Something went wrong"),y([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.getRepl){if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){Y(void 0);var n=e.getRepl.hostingDeploymentLogs.result,t=(0,v._)(n).reverse();if(!p){if(n.length>0){var r=new Date(n[0].timestamp);r.setSeconds(r.getSeconds()+1),f(r.toISOString())}else f(new Date().toISOString())}y(t)}else Y(e.getRepl.hostingDeploymentLogs.message),y([])}}},t=(0,E._)({},iJ,n),F.I(iX,t)),q=Z.loading,K=Z.fetchMore,$=Z.subscribeToMore,J=Z.variables;(0,d.useEffect)(function(){q&&f(null)},[q]),(0,d.useEffect)(function(){f(null)},[C,o,a,l]),(0,d.useEffect)(function(){if(p)return $({document:i0,variables:{input:(0,er._)((0,E._)({deploymentId:o,executionId:l},C),{start:C.end?C.start:p,level:C.level||void 0})},updateQuery:function(e,n){var t=n.subscriptionData;return(0,iZ.jM)(e,function(e){if(!("hostingDeploymentLogs"in e.getRepl))return e;if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){var n=t.data.hostingDeploymentLogUpdates;e.getRepl.hostingDeploymentLogs.result.unshift(n)}return e})}})},[$,o,l,q,C,p]);var Q=(0,d.useRef)(null),X=(0,d.useRef)(!1),ee=(0,d.useRef)(!1),en=(0,d.useCallback)((0,g._)(function(){var e,n,t,r;return(0,w.YH)(this,function(i){switch(i.label){case 0:if(e=Q.current?Math.abs(Q.current.getTime()-Date.now()):0,q||Q.current&&e<500||ee.current||X.current)return[2];return(n=new Date(m[0].timestamp)).setSeconds(n.getSeconds()-1),X.current=!0,[4,K({variables:(0,er._)((0,E._)({},J),{end:n.toISOString()})})];case 1:return t=i.sent().data,X.current=!1,"hostingDeploymentLogs"in t.getRepl&&"ReplLogs"===t.getRepl.hostingDeploymentLogs.__typename&&(Q.current=new Date,0===t.getRepl.hostingDeploymentLogs.result.length?ee.current=!0:(r=(0,v._)(t.getRepl.hostingDeploymentLogs.result).reverse(),y(function(e){return(0,v._)(r).concat((0,v._)(e))}))),[2]}})}),[K,q,m,J]);return(0,d.useMemo)(function(){return{logs:m,loading:q,error:S,fetchPage:en,isLive:D,setIsLive:R,isExpanded:T,setIsExpanded:P,filter:C,setFilter:x,clearFilter:_,deploymentId:o,containerRef:V,isWide:U,isWrapped:M,setIsWrapped:B,openFile:c,isColorful:z,setIsColorful:W}},[_,V,o,S,en,C,z,T,D,U,M,q,m,c,W])},i8=t(55606),i7=t(72606),i6=t(55195),i9=t(50904),oe=t(11605),on=t.n(oe),ot=t(74603),or=t(68463),oi=(0,eO.x)({root:[B.wp.transition.none,B.wp.reset.button,B.wp.flex.row,B.wp.align.center,B.wp.font.code,B.wp.fontSize(12),B.wp.textAlign.left,B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%"),B.wp.color.foregroundDefault,B.wp.border({color:ek.LU.outlineDimmest,direction:"bottom"}),B.wp.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(ek.LU.backgroundDefault),"&:hover":{backgroundColor:ek.LU.interactiveBackground,"--cell-background":"".concat(ek.LU.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[B.wp.colorMixBg(ek.LU.accentNegativeDimmest,"transparent"),{borderBottomColor:ek.LU.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+ek.LU.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(ek.LU.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+ek.LU.accentPrimaryDefault}},B.wp.highRes({boxShadow:"0 -0.5px 0 0 "+ek.LU.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+ek.LU.accentPrimaryDefault}})]}],primaryCell:[B.wp.display.block,B.wp.pl(6),B.wp.py(6),B.wp.pr(4),B.wp.flex.growAndShrink(1),B.wp.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[B.wp.p(6),B.wp.color.foregroundDimmest,B.wp.truncate,{'&[data-error="true"]':B.wp.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),oo=(0,d.memo)(function(e){var n=e.log,t=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,s=i4(),c=s.isWrapped,p=s.isColorful&&n.level===y.$b.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!n.line.includes(e)}),f=(0,d.useMemo)(function(){return(0,ot.A)(n.line)},[n.line]);return(0,u.FD)("div",{tabIndex:0,role:"button",title:f,css:oi.root,style:{height:r,transform:"translateY(".concat(t,"px)")},"data-error":p,children:[l.map(function(e,t){var r=t===l.length-1,a=e.renderCell(n);return(0,u.Y)(j.S,{css:r?oi.primaryCell:oi.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,"data-error":p,"data-wrapped":c,children:a},e.key)}),(0,u.Y)("span",{css:oi.copyColumn,className:"copy",children:!a&&(0,u.Y)(or.r,{textToCopy:f,tooltipDisable:!0,css:oi.copyButton})})]})}),oa=t(13087),ol=t(50244),os=new oa.tQ,oc=function(e){var n=e.log,t=e.files,r=i4().openFile,i=n.line;i=n.level===y.$b.Error?(0,ot.A)(n.line):os.toHtml(n.line);var o=(0,s._)((0,d.useState)([]),2),a=o[0],l=o[1];(0,d.useEffect)(function(){(0,ol.C)(i,function(){return Promise.resolve(t)}).then(function(e){return l(e)})},[t,i]);var c=(0,d.useCallback)(function(e){e.preventDefault();var n=e.target;n.dataset.file&&r({path:n.dataset.file})},[r]);return(0,u.Y)("div",{dangerouslySetInnerHTML:{__html:function(e,n){n.sort(function(e,n){return e.from-n.from});var t="",r=0;return n.forEach(function(n){t+=e.slice(r,n.from);var i=e.slice(n.from,n.to);t+='<a href="#" data-file="'.concat(n.file,'">').concat(i,"</a>"),r=n.to}),t+=e.slice(r)}(i,a)},onKeyDown:c,onClick:c})},ou=t(57413),od=t(39735),op=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=(0,d.useRef)(!1);return(0,ou.S)(function(){n.current&&setTimeout(function(){t.current&&((0,od.A)(t.current),r.current=!0)},0)}),{didInitialScroll:r}},of=function(e){var n,t=e.didInitialScroll,r=e.itemHeight,i=e.scrollRef,o=i4(),a=o.fetchPage,l=o.setIsLive,c=(0,s._)((0,d.useState)(!1),2),u=c[0],p=c[1],f=(0,s._)((0,d.useState)(0),2),h=f[0],m=f[1],v=(0,s._)((0,d.useState)(0),2),y=v[0],b=v[1],S=(0,d.useRef)(),Y=(0,d.useRef)(!1);(0,d.useEffect)(function(){i.current&&m(i.current.offsetWidth-i.current.clientWidth)},[i]);var A=(0,d.useCallback)(function(e){(S.current||u)&&clearTimeout(S.current),p(!0),S.current=setTimeout(function(){p(!1),b(e.scrollLeft)},100)},[u]);return{scrollHandler:(0,d.useCallback)((n=(0,g._)(function(e){var n,i,o,s,c,u,d;return(0,w.YH)(this,function(p){switch(p.label){case 0:if(!(n=e.currentTarget)||Y.current)return[2];if(A(n),i=n.scrollHeight,o=n.scrollTop,l(c=i-(s=n.clientHeight)===o),u=20*r,!(!c&&o<u&&i>s&&t.current))return[3,5];Y.current=!0,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a()];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),i6.Cp(d),[3,4];case 4:Y.current=!1,p.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),[A,l,r,t,a]),isScrolling:u,scrollLeftOffset:y-h}},oh=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=i4(),i=r.loading,o=r.logs,a=r.isLive,l=r.isWrapped,s=(0,d.useRef)(0),c=(0,d.useRef)(o[0]),u=(0,d.useCallback)(function(){t.current&&(0,od.A)(t.current)},[t]);(0,d.useEffect)(function(){var e=n.current;if(e&&!i&&0!==o.length){if(a)e.scrollHeight>e.clientHeight&&u();else if(c.current&&c.current.timestamp>o[0].timestamp){var t=e.scrollHeight;if(t!==s.current){var r=t-s.current,l=e.scrollTop;e.scrollTo({top:l+r,behavior:"instant"})}}c.current=o[0],s.current=e.scrollHeight}},[a,i,o,n,u]);var p=(0,d.useRef)(l);(0,d.useEffect)(function(){a&&p.current!==l&&(u(),p.current=l)},[a,l,u])},om=(0,eO.x)({root:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],virtualTable:[B.wp.width("100%"),B.wp.position.relative],tableHeader:[B.wp.display.flex,B.wp.flex.row,B.wp.backgroundColor.backgroundDefault,B.wp.position.sticky,B.wp.zIndex(1),B.wp.top(0),B.wp.border({color:ek.LU.outlineDimmest,direction:"bottom"})],columnHeader:[B.wp.color.foregroundDimmer,B.wp.fontSize(12),{lineHeight:"18px"},B.wp.px(6),B.wp.justify.center],infoTooltip:[B.wp.display.flex,B.wp.align.center,B.wp.gap(4),{lineHeight:0}],bottomAnchor:[B.wp.position.absolute,B.wp.bottom(0),B.wp.left(0),B.wp.right(0)]}),og=function(){var e=i4().isColorful,n=(0,nV.V)();return(0,d.useMemo)(function(){var t={};if(n){var r=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,s._)(a.value,2),u=c[0],d=c[1];t["--ansi-".concat(on()(u))]=e?d:"currentColor"}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return t},[e,n])};function ov(){var e=i4(),n=e.loading,t=e.error,r=e.logs,i=e.isExpanded,o=e.isWrapped,a=e.isWide,l=!!(n||t),c=(0,d.useRef)(null),p=(0,d.useRef)(null),f=(0,r0.m6)(),m=og(),g=f?44:26,w=(0,i8.Te)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return c.current},estimateSize:function(){return g},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var n=new Set([0].concat((0,v._)((0,i7.vp)(e))));return(0,v._)(n)}});oh({scrollRef:c,scrollBottomRef:p});var b=of({didInitialScroll:op({scrollRef:c,scrollBottomRef:p}).didInitialScroll,itemHeight:g,scrollRef:c}),S=b.scrollHandler,Y=b.isScrolling,A=b.scrollLeftOffset,C=(0,h.cF)(),x=(null==C?void 0:C.provider)===y.Q0.Cron,_=(0,d.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,v._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),k=(0,h.om)().listFiles,D=(0,s._)((0,d.useState)([]),2),R=D[0],I=D[1];(0,d.useEffect)(function(){k().then(function(e){e.files&&I(e.files)})},[k]);var F=(0,r0.m6)(),T=(0,d.useMemo)(function(){return[{key:"time",title:(0,u.FD)("span",{css:om.infoTooltip,children:["Time",!F&&(0,u.Y)(tm.m_,{tooltip:"Logs persist for up to 30 days",css:om.infoTooltip,children:(0,u.Y)(rx.A,{size:12})})]}),width:a?173:115,renderCell:function(e){var n=(0,i9.A)(e.timestamp);return(0,ei.A)(n,a?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var n=e.buildId.split("-");return n?n[0]:e.buildId}},x&&{key:"run",title:"Run",width:50,renderCell:function(e){var n,t=null===(n=e.executionId)||void 0===n?void 0:n.split("-");return t?t[t.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:o?void 0:_,key:"log",title:"Log",renderCell:function(e){return(0,u.Y)(oc,{files:R,log:e})}}].filter(Boolean)},[R,x,i,F,a,o,_]),P=(0,d.useMemo)(function(){return T.reduce(function(e,n){return e+(n.width||0)},0)},[T]);return(0,u.Y)(j.S,{innerRef:c,css:om.root,onScroll:S,children:(0,u.FD)(j.S,{style:(0,E._)({height:w.getTotalSize(),minWidth:P,"--scroll-left-offset":"".concat(A,"px")},m),css:om.virtualTable,children:[(0,u.Y)(j.S,{css:om.tableHeader,children:T.map(function(e){return(0,u.Y)(j.S,{tag:"div",css:om.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:g},children:e.title},e.key)})}),w.getVirtualItems().map(function(e){var n=r[e.index];return n?(0,u.Y)(oo,{log:n,height:e.size,y:e.start,resizeRef:w.measureElement,index:e.index,disabled:l,isScrolling:Y,columns:T},e.key.toString()):null}),(0,u.Y)("div",{ref:p,css:om.bottomAnchor})]})})}var ow=(0,eO.x)({root:[B.wp.flex.grow(1)],noLogsContainer:[B.wp.pt(4)],noLogsText:[B.wp.textAlign.center],viewError:[B.wp.pt(0)]});function oy(){var e=i4(),n=e.logs,t=e.error;return e.loading?(0,u.Y)(Y.A,{css:ow.root,centered:!0,children:(0,u.Y)(nn.cN,{})}):0===n.length?(0,u.FD)(u.FK,{children:[t?(0,u.Y)(nn.Wx,{css:ow.viewError,text:t}):null,(0,u.Y)(Y.A,{css:ow.root,children:(0,u.FD)(j.S,{css:ow.noLogsContainer,gap:8,children:[(0,u.Y)(V.EY,{css:ow.noLogsText,children:"No logs are available."}),(0,u.FD)(V.EY,{color:"dimmer",css:ow.noLogsText,children:["Having trouble?"," ",(0,u.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,u.Y)(ov,{})}var ob=t(79029),oS=t(73963),oY=(0,eO.x)({buttonGroup:[B.wp.flex.row,B.wp.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}]});function oA(e){var n=e.onClear,t=e.label,r=e.buttonProps,i=e.children,o=n?"primary":void 0,a=(0,s._)((0,d.useState)(!1),2),l=a[0],c=a[1];return(0,u.FD)(oS.Y,{css:oY.buttonGroup,children:[(0,u.FD)(rM.Wv,{label:t,isOpen:l,onOpenChange:c,noArrow:!0,background:"higher",children:[(0,u.Y)(eX.$n,(0,E._)({colorway:o},r)),i]}),n?(0,u.Y)(eX.$n,{colorway:o,text:"",iconLeft:(0,u.Y)(e3.A,{}),onClick:n}):null]})}var oC=t(60872),ox=(0,eO.x)({section:[B.wp.p(8),B.wp.gap(8)],dateRangeInputs:[B.wp.display.grid,B.wp.gap(8),B.wp.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),o_=function(){var e=i4(),n=e.filter,t=e.setFilter;return(0,u.FD)(j.S,{css:ox.dateRangeInputs,children:[(0,u.Y)(oC.J,{variant:"text",children:"After"}),(0,u.Y)(ob.A,{granularity:"minute",hourCycle:24,value:n.start,onChange:function(e){return t(function(n){return(0,er._)((0,E._)({},n),{start:e})})}}),(0,u.Y)(oC.J,{variant:"text",children:"Before"}),(0,u.Y)(ob.A,{granularity:"minute",hourCycle:24,value:n.end,onChange:function(e){return t(function(n){return(0,er._)((0,E._)({},n),{end:e})})}})]})},ok=function(){var e=i4(),n=e.filter,t=e.setFilter,r=(0,ij.Xj)(),i=n.start||n.end,o="Date",a=n.start&&(0,ei.A)(n.start.toDate(r),"M/d/yy"),l=n.end&&(0,ei.A)(n.end.toDate(r),"M/d/yy");return a&&l?o="".concat(a," to ").concat(l):a?o="After ".concat(a):l&&(o="Before ".concat(l)),(0,u.Y)(oA,{label:"Date range",onClear:i?function(){return t(function(e){return(0,er._)((0,E._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:o,iconRight:i?void 0:(0,u.Y)(n5.A,{})},children:(0,u.Y)(j.S,{css:ox.section,children:(0,u.Y)(o_,{})})})},oD=t(28354),oE=t(17605),oR=(0,eO.x)({inputContainer:[B.wp.p(8)]}),oI=function(){var e=i4(),n=e.filter,t=e.setFilter,r=(0,s._)((0,d.useState)(n.executionId),2),i=r[0],o=r[1];return(0,d.useEffect)(function(){o(n.executionId)},[n.executionId]),(0,u.Y)(oD.pd,{placeholder:"*****",value:i||"",onChange:function(e){var n=e.target.value;o(n),n&&5!==n.length||t(function(e){return(0,er._)((0,E._)({},e),{executionId:n})})},onBlur:function(){return t(function(e){return(0,er._)((0,E._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,er._)((0,E._)({},e),{executionId:i})})}})},oF=function(){var e=i4(),n=e.filter,t=e.setFilter;return(0,u.Y)(oA,{onClear:n.executionId?function(){return t(function(e){return(0,er._)((0,E._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:n.executionId?"Run: ".concat(n.executionId):"Run ID",iconRight:n.executionId?void 0:(0,u.Y)(n5.A,{})},children:(0,u.Y)(j.S,{css:oR.inputContainer,children:(0,u.Y)(oE.A_,{children:(0,u.Y)(oI,{})})})})},oT=t(84911),oP=t(47303),oL=t(69929);function oU(e){return(0,u.Y)(rz.Ay,(0,er._)((0,E._)({},e),{children:(0,u.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm3 6a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm3 6a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var oN=function(){var e=(0,h.cF)();return(null==e?void 0:e.provider)===y.Q0.Cron},oO=(0,eO.x)({root:[B.wp.p(8),B.wp.rowWithGap(8),{"> *:first-child":B.wp.flex.grow(1)}],divider:B.wp.backgroundColor.outlineDimmer,section:[B.wp.p(8),B.wp.gap(8)],checkboxWithLabel:[B.wp.p(8)],buttonInnerCheckbox:[{pointerEvents:"none"}],clearFilterButton:[B.wp.borderRadius(0),B.wp.width("fit-content")]}),oM=function(){var e=i4(),n=e.filter,t=e.setFilter,r=function(){t(function(e){return(0,er._)((0,E._)({},e),{level:e.level===y.$b.Error?null:y.$b.Error})})};return(0,u.Y)(eX.$n,{colorway:n.level===y.$b.Error?"primary":void 0,text:"Errors only",iconLeft:(0,u.Y)(oP.S,{onChange:r,checked:n.level===y.$b.Error}),onClick:r})},oB=function(){var e=oN();return(0,u.FD)(u.FK,{children:[(0,u.Y)(oM,{}),(0,u.Y)(ok,{}),e&&(0,u.Y)(oF,{})]})},oH=function(){var e=i4(),n=e.filter,t=e.setFilter,r=e.clearFilter,i=oN(),o=!!(n.message||n.level||n.start||n.end||n.executionId),a=(0,oT.c)();return(0,u.Y)(oA,{label:"Filter",buttonProps:{text:"",iconLeft:(0,u.Y)(oU,{})},onClear:o?r:void 0,children:(0,u.FD)(j.S,{children:[(0,u.FD)(j.S,{css:oO.checkboxWithLabel,row:!0,gap:8,children:[(0,u.Y)(oP.S,{name:"Filter by errors only",id:a("errors-only"),checked:n.level===y.$b.Error,onChange:function(e){return t(function(n){return(0,er._)((0,E._)({},n),{level:e?y.$b.Error:null})})}}),(0,u.Y)("label",{htmlFor:a("errors-only"),children:"Errors only"})]}),i?(0,u.FD)(u.FK,{children:[(0,u.Y)(th.a,{css:oO.divider}),(0,u.Y)(j.S,{css:oO.section,children:(0,u.FD)(oE.A_,{children:[(0,u.Y)(oC.J,{color:"dimmer",children:"Run ID"}),(0,u.Y)(oI,{})]})})]}):null,(0,u.Y)(th.a,{css:oO.divider}),(0,u.FD)(j.S,{css:oO.section,children:[(0,u.Y)(oC.J,{color:"dimmer",children:"Date range"}),(0,u.Y)(o_,{})]}),(0,u.Y)(th.a,{css:oO.divider}),(0,u.Y)(eX.$n,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:oO.clearFilterButton})]})})};function oz(){var e=i4(),n=e.filter,t=e.setFilter,r=e.isWide,i=(0,s._)((0,d.useState)(n.message),2),o=i[0],a=i[1];return(0,d.useEffect)(function(){a(n.message)},[n.message]),(0,u.FD)(j.S,{css:oO.root,children:[(0,u.Y)(oL.I,{placeholder:"Search",value:o,onChange:function(e){a(e.target.value),""===e.target.value&&t(function(e){return(0,er._)((0,E._)({},e),{message:""})})},onBlur:function(){return t(function(e){return(0,er._)((0,E._)({},e),{message:o})})},onClear:function(){t(function(e){return(0,er._)((0,E._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,er._)((0,E._)({},e),{message:o})})}}),r?(0,u.Y)(oB,{}):(0,u.Y)(oH,{})]})}function oW(e){return(0,u.Y)(rz.Ay,(0,er._)((0,E._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,u.Y)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var oG=t(62514),oV=t(976),oj=(0,eO.x)({root:[B.wp.border({color:ek.LU.outlineDimmest,direction:"top"}),B.wp.height(29)],group:[B.wp.display.flex,B.wp.rowWithGap(8)],button:[B.wp.color.foregroundDefault,B.wp.borderRadius(0),B.wp.height("100%")],liveIndicatorWrapper:[B.wp.width(16),B.wp.height(16),B.wp.display.flex,B.wp.align.center,B.wp.justify.center],liveIndicator:[B.wp.width(6),B.wp.height(6),B.wp.borderRadius("full"),B.wp.backgroundColor.accentPositiveStronger],checkboxWrapper:[B.wp.display.flex,B.wp.align.center,B.wp.rowWithGap(4),B.wp.cursor.pointer],checkbox:[{input:[B.wp.width(16),B.wp.height(16)]}]});function oZ(){var e=i4(),n=e.isLive,t=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded,o=e.isWrapped,a=e.setIsWrapped,l=e.isColorful,s=e.setIsColorful,c=(0,oT.c)();return(0,u.FD)(j.S,{css:oj.root,row:!0,gap:8,justify:"space-between",children:[(0,u.FD)(j.S,{css:oj.group,children:[(0,u.Y)(eX.$n,{iconLeft:r?(0,u.Y)(eE.A,{rotate:90}):(0,u.Y)(eR.A,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:oj.button}),(0,u.FD)("label",{css:oj.checkboxWrapper,htmlFor:c("wrap"),children:[(0,u.Y)(oP.S,{id:c("wrap"),checked:o,onChange:function(){return a(function(e){return!e})},css:oj.checkbox}),(0,u.Y)(oW,{}),(0,u.Y)("span",{children:"Wrap"})]}),(0,u.FD)("label",{css:oj.checkboxWrapper,htmlFor:c("colorful"),children:[(0,u.Y)(oP.S,{id:c("colorful"),checked:l,onChange:function(){return s(function(e){return!e})},css:oj.checkbox}),(0,u.Y)(oV.A,{}),(0,u.Y)("span",{children:"Colors"})]})]}),(0,u.Y)(j.S,{css:oj.group,children:(0,u.Y)(eX.$n,{iconLeft:n?(0,u.Y)(j.S,{css:oj.liveIndicatorWrapper,children:(0,u.Y)(j.S,{css:oj.liveIndicator})}):(0,u.Y)(oG.A,{}),onClick:function(){return t(function(e){return!e})},variant:"nofill",text:"Live",css:oj.button})})]})}var oq=(0,eO.x)({root:[B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],header:[B.wp.p(6),{borderBottom:"1px solid ".concat(ek.LU.outlineDimmest)}]}),oK=function(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=e.openFile;return n?(0,u.Y)(o$,{deploymentId:n,replId:t,executionId:r,onBack:i,openFile:o}):(0,u.Y)(Y.A,{children:(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:"Deployment not found"})})};function o$(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=i3({deploymentId:n,replId:t,executionId:r,openFile:e.openFile});return(0,ou.S)(function(){(0,eU.Ae)({context:S.P.Logs})}),(0,u.Y)(i5.Provider,{value:o,children:(0,u.FD)(j.S,{css:oq.root,innerRef:o.containerRef,children:[i?(0,u.Y)(j.S,{css:oq.header,gap:8,children:(0,u.Y)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:(0,u.Y)(eD.K0,{alt:"Back",onClick:i,children:(0,u.Y)(tX.A,{})})})}):null,(0,u.Y)(oz,{}),(0,u.Y)(oy,{}),(0,u.Y)(oZ,{})]})})}var oJ=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],oQ={label:"one hour",key:1},oX=B.kL.min(600),o0=(0,eO.x)({fullWidth:(0,A._)({},oX,{gridColumn:"span 2"})}),o1=(0,eO.x)({container:(0,A._)({display:"grid",gap:32},oX,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:o0.fullWidth}),o2=function(e){var n=e.replId,t=(0,s._)((0,d.useState)(oQ),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,C.A)(new Date,i),c=(0,M.D)().values,p=o4(l,o5(i));return(0,u.Y)(Y.A,{children:(0,u.FD)(j.S,{css:o1.container,children:[(0,u.Y)(j.S,{css:o1.fullWidth,children:(0,u.Y)(eM.in,{items:oJ,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!==(n=oJ.find(function(e){return e.key===t}))&&void 0!==n?n:oQ)},children:function(e){return(0,u.Y)(eM.Dr,{label:e.label,id:e.key},e.key)}})}),(0,u.Y)(j.S,{css:o1.fullWidth,children:(0,u.Y)(ey,{replId:n,title:"CPU Utilization",metric:_.YE.CPU,start:p,hours:i,colorFn:function(){return c.global.redDefault}})}),(0,u.Y)(j.S,{css:o1.fullWidth,children:(0,u.Y)(ey,{replId:n,title:"Memory Utilization",metric:_.YE.Memory,start:p,hours:i,colorFn:function(){return c.global.redDefault}})})]})})},o5=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},o4=function(e,n){var t=e.getTime()%n;return new Date(e.getTime()-t)},o3=t(20189);function o8(){var e=(0,R._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return o8=function(){return e},e}function o7(){var e=(0,R._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return o7=function(){return e},e}var o6={},o9=(0,I.J1)(o8()),ae=(0,I.J1)(o7()),an=t(73743),at=t(50514),ar=(0,eO.x)({root:[B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],executionListHeader:[B.wp.p(6),{borderBottom:"1px solid ".concat(ek.LU.outlineDimmest)}],executionList:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[B.wp.rowWithGap(8),B.wp.align.center,B.wp.fontSize(12),B.wp.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(ek.LU.outlineDimmest),color:ek.LU.foregroundDimmer}],executionItemStatusDot:[B.wp.width("6px"),B.wp.height("6px"),B.wp.borderRadius("full"),B.wp.flex.shrink(0),B.wp.pr(4)],executionItemDistance:[B.wp.minWidth(100)],executionItemTimestamp:[B.wp.minWidth(90)],executionItemRunTime:[B.wp.minWidth(60)],executionItemStatus:[B.wp.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[{marginLeft:"auto"}],noExecutionsContainer:[B.wp.pt(4)],noExecutionsText:[B.wp.textAlign.center],maxResultsMessage:[B.wp.fontSize(12),B.wp.color.foregroundDimmest]});function ai(e){var n=e.deploymentId,t=e.replId,r=e.openFile,i=(0,s._)((0,d.useState)(),2),o=i[0],a=i[1];return n?o?(0,u.Y)(oK,{replId:t,deploymentId:n,executionId:o,onBack:function(){return a(void 0)},openFile:r}):(0,u.Y)(ao,{deploymentId:n,onViewExecutionLogs:function(e){var n=e.split("-");a(n[n.length-1])}}):(0,u.Y)(Y.A,{children:(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:"Deployment not found"})})}function ao(e){var n,t,r,i,o,a=e.deploymentId,l=e.onViewExecutionLogs,c=(0,s._)((0,d.useState)([]),2),p=c[0],f=c[1],h=(0,s._)((0,d.useState)(!1),2),m=h[0],g=h[1],w=(0,s._)((0,d.useState)(),2),y=w[0],b=w[1],Y=(n={variables:{deploymentId:a},onError:function(e){b(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&f(e.scheduledJobListExecutions.results)}},t=(0,E._)({},o6,n),F.I(o9,t)),A=Y.loading,C=Y.refetch,x=(0,s._)((r={onError:function(e){b(e)},onCompleted:function(e){var n=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===n.__typename&&f(function(e){return e.map(function(e){return e.id===n.execution.id?n.execution:e})})}},i=(0,E._)({},o6,r),nb.n(ae,i)),2),_=x[0],k=x[1].loading,D=!!(A||k||m||y);return(0,ou.S)(function(){A||C(),(0,eU.Ae)({context:S.P.Schedule})}),(0,u.FD)(j.S,{css:ar.root,children:[(0,u.FD)(j.S,{css:ar.executionListHeader,gap:8,children:[y?(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:null!==(o=y.message)&&void 0!==o?o:"Something went wrong"}):null,(0,u.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,u.Y)(rU,{disabled:D,onSuccessfulExecution:function(e){f(function(n){return[e].concat((0,v._)(n)).slice(0,50)})}}),(0,u.Y)(eD.K0,{alt:"Refresh",disabled:D,onClick:function(){D||(g(!0),C().finally(function(){g(!1)}))},children:m?(0,u.Y)(nB.A,{}):(0,u.Y)(at.A,{})})]})]}),(0,u.Y)(aa,{executions:p,loading:A,disabled:D,onExecutionItemAction:function(e){switch(e.type){case"cancel":_({variables:{deploymentId:a,executionId:e.payload.id}});break;case"logs":l(e.payload.id)}}})]})}function aa(e){var n=e.executions,t=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,d.useRef)(null),a=(0,r0.m6)()?44:28,l=(0,i8.Te)({count:n.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return t?(0,u.Y)(Y.A,{centered:!0,children:(0,u.Y)(nn.cN,{})}):0===n.length?(0,u.Y)(Y.A,{children:(0,u.FD)(j.S,{css:ar.noExecutionsContainer,gap:8,children:[(0,u.Y)(V.EY,{css:ar.noExecutionsText,children:"No runs yet..."}),(0,u.FD)(V.EY,{color:"dimmer",css:ar.noExecutionsText,children:["Having trouble?"," ",(0,u.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eU.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,u.Y)(j.S,{innerRef:o,css:ar.executionList,children:(0,u.Y)(j.S,{style:{height:l.getTotalSize()},css:ar.executionListRows,children:l.getVirtualItems().map(function(e){var t=n[e.index];return(0,u.Y)(au,{execution:t,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key.toString())})})})}var al=(o={},(0,A._)(o,y.vJ.Done,ek.LU.accentPositiveDefault),(0,A._)(o,y.vJ.Running,ek.LU.orangeStronger),(0,A._)(o,y.vJ.Failed,ek.LU.accentNegativeDefault),(0,A._)(o,y.vJ.Cancelled,ek.LU.greyDefault),(0,A._)(o,y.vJ.Unrecognized,ek.LU.greyDefault),o);function as(e){var n=e.status,t=n in al?al[n]:ek.LU.greyDefault;return(0,u.Y)(j.S,{tag:"span",css:ar.executionItemStatusDot,style:{backgroundColor:t,boxShadow:"0 0 8px ".concat(t)}})}var ac=function(e){return e.Cancel="cancel",e.Logs="logs",e}(ac||{});function au(e){var n=e.execution,t=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==n?void 0:n.endedAt)?(new Date(n.endedAt).valueOf()-new Date(n.startedAt).valueOf())/1e3:null;return(0,u.FD)(u.FK,{children:[(0,u.FD)(j.S,{title:n.id,css:ar.executionItem,style:{height:r,transform:"translateY(".concat(t,"px)")},children:[(0,u.Y)(as,{status:n.status}),(0,u.Y)(j.S,{css:ar.executionItemDistance,children:(0,o3.A)(new Date(n.startedAt),Date.now(),{addSuffix:!0})}),(0,u.FD)(j.S,{css:ar.executionItemTimestamp,children:[new Date(n.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(n.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,u.Y)(j.S,{css:ar.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,u.Y)(j.S,{css:ar.executionItemStatus,children:n.status}),(0,u.FD)(j.S,{css:ar.executionItemActions,row:!0,gap:8,align:"center",children:[n.status===y.vJ.Running?(0,u.Y)(eD.K0,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:n.id}})},children:(0,u.Y)(an.A,{})}):null,(0,u.Y)(eD.K0,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:n.id}})},children:(0,u.Y)(nJ.A,{})})]})]}),49===i?(0,u.Y)(j.S,{title:n.id,css:ar.executionItem,style:{height:r,transform:"translateY(".concat(t+r,"px)")},children:(0,u.Y)(V.EY,{css:ar.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}var ad=t(84199),ap=t(12923),af=t(86955);function ah(e){return(0,u.Y)(rz.Ay,(0,er._)((0,E._)({},e),{children:(0,u.Y)("path",{fillRule:"evenodd",d:"M4 2.25a.75.75 0 0 1 .75.75v7a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 4 2.25Zm8 0a.75.75 0 0 1 .75.75v4.25H15a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h2.25V3a.75.75 0 0 1 .75-.75Zm8 0a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Zm-8 9a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0v-9a.75.75 0 0 1 .75-.75ZM.25 14a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5H4.75V21a.75.75 0 0 1-1.5 0v-6.25H1A.75.75 0 0 1 .25 14Zm16 2a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-2.25V21a.75.75 0 0 1-1.5 0v-4.25H17a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var am=t(8351),ag=(0,eO.x)({container:B.wp.colWithGap(24),pauseAndResumeButtons:B.wp.colWithGap(8),sectionContainer:B.wp.colWithGap(8),sectionButton:[B.wp.color.accentNegativeStrongest,B.wp.transition.snappy,(0,A._)({backgroundColor:ek.LU.interactiveBackground,borderColor:"transparent"},B.Tp.hover,{borderColor:"transparent"})]}),av=function(e){var n=e.hideResume,t=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,o=(0,h.uS)(),a=(0,h.cF)(),l=(0,s._)((0,d.useState)(!1),2),c=l[0],p=l[1],f=i.editDeploymentStatus,g=f.isAuthorized,v=f.message,w=(null==a?void 0:a.status)===y.nH.Resuming,b=(null==a?void 0:a.status)===y.nH.Suspending,S=(null==a?void 0:a.status)===y.nH.Suspended,Y=w||b||o===m.d.ProcessingLifecycleCommand||o===m.d.Deploying,A=!(void 0!==n&&n)&&(S||w)&&(null==a?void 0:a.hasImageTag),C=!(void 0!==t&&t)&&!S&&!w&&(b||o===m.d.Deploying||o===m.d.Ready)&&(null==a?void 0:a.hasImageTag);return(0,u.Y)(u.FK,{children:(0,u.FD)(j.S,{css:ag.container,children:[A||C?(0,u.FD)(j.S,{css:ag.pauseAndResumeButtons,children:[A?(0,u.FD)(u.FK,{children:[(0,u.Y)(tm.m_,{tooltip:v,isDisabled:g,children:(0,u.Y)(eX.$n,{text:w?"Resuming":"Resume",onClick:function(){return r({command:y.jP.Resume})},loading:w,disabled:Y||!g,iconLeft:w?(0,u.Y)(nB.A,{}):(0,u.Y)(af.A,{})})}),(0,u.Y)(V.EY,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,C?(0,u.FD)(u.FK,{children:[(0,u.Y)(tm.m_,{tooltip:v,isDisabled:g,children:(0,u.Y)(eX.$n,{text:"Pause",onClick:function(){return r({command:y.jP.Suspend})},loading:b,disabled:Y||!g,iconLeft:b?(0,u.Y)(nB.A,{}):(0,u.Y)(ap.A,{})})}),(0,u.Y)(V.EY,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,u.Y)(aw,{setIsDestroying:p,onLifecycleCommand:r,authorizations:i}),(0,u.Y)(ay,{isDestroying:c,setIsDestroying:p,onLifecycleCommand:r,authorizations:i})]})})};function aw(e){var n=e.setIsDestroying,t=e.onLifecycleCommand,r=e.authorizations,i=(0,s._)((0,d.useState)(!1),2),o=i[0],a=i[1],l=r.deleteDeployment,c=l.isAuthorized,p=l.message;return(0,u.FD)(u.FK,{children:[(0,u.FD)(j.S,{css:ag.sectionContainer,children:[(0,u.Y)(tm.m_,{tooltip:p,isDisabled:c,children:(0,u.Y)(eX.$n,{text:"Change deployment type",onClick:function(){return a(!0)},disabled:!c,iconLeft:(0,u.Y)(ah,{})})}),(0,u.Y)(V.EY,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment"})]}),(0,u.Y)(e0.a,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,u.Y)(ad.A,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){n(!0),a(!1),t({command:y.jP.Destroy})},onCancel:function(){return a(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your App again."})})]})}function ay(e){var n=e.isDestroying,t=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,o=(0,s._)((0,d.useState)(!1),2),a=o[0],l=o[1],c=i.deleteDeployment,p=c.isAuthorized,f=c.message;return(0,u.FD)(u.FK,{children:[(0,u.FD)(j.S,{css:ag.sectionContainer,children:[(0,u.Y)(tm.m_,{tooltip:f,isDisabled:p,children:(0,u.Y)(eX.$n,{text:"Shut down",colorway:"negative",variant:"outlined",css:ag.sectionButton,onClick:function(){return l(!0)},disabled:n||!p,iconLeft:(0,u.Y)(am.A,{})})}),(0,u.Y)(V.EY,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,u.Y)(e0.a,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,u.Y)(ad.A,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){t(!0),l(!1),r({command:y.jP.Destroy})},onCancel:function(){return l(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function ab(e){var n=e.shouldShowDownloadQR,t=(0,s._)((0,d.useState)(n),2),r=t[0],i=t[1];return(0,u.Y)(j.S,{children:(0,u.FD)(j.S,{gap:8,children:[(0,u.Y)(eX.$n,{iconLeft:(0,u.Y)(e8.A,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var n=!e;return n&&(0,eQ.u4)(eQ.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),n})}}),r?(0,u.Y)(e4,{color:ek.LU.foregroundDefault}):null]})})}function aS(){var e=(0,R._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return aS=function(){return e},e}var aY={},aA=(0,I.J1)(aS()),aC=t(1670),ax=t(10001),a_=(0,eO.x)({root:[B.wp.p(8),B.wp.pt(12),B.wp.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[B.wp.rowWithGap(12),B.wp.align.center],typeCol:[B.wp.flex.growAndShrink(1)]}),ak=function(e){var n,t=e.machineConfiguration,r=(n=(0,E._)({},aY,void 0),F.I(aA,n)).data,i=(0,d.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"){var i=null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,aC.h7)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,d.useMemo)(function(){if(null!=t)return"Autoscale (".concat(t.label,")")},[t]);if(!o||!i)return(0,u.Y)(j.S,{justify:"center",row:!0,children:(0,u.Y)(nB.A,{})});var a=e.authorizations.editDeploymentTier,l=a.isAuthorized,s=a.message;return(0,u.FD)(n2.ui,{elevated:!0,css:a_.root,gap:4,children:[(0,u.FD)(j.S,{css:a_.outerRow,children:[(0,u.Y)(j.S,{css:a_.typeCol,gap:4,children:o?(0,u.Y)(V.EY,{multiline:!1,children:o}):null}),(0,u.Y)(eD.K0,{alt:l?"Edit":s,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,u.Y)(ax.A,{})})]}),i?(0,u.FD)(u.FK,{children:[(0,u.FD)(j.S,{css:a_.outerRow,children:[(0,u.Y)(V.EY,{multiline:!1,children:i.description}),(0,u.Y)(V.EY,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,u.Y)(j.S,{css:a_.outerRow,children:(0,u.Y)(rh(),{legacyBehavior:!0,passHref:!0,href:"/usage",prefetch:!1,children:(0,u.Y)("a",{role:"button",children:"View account resource limits"})})})]}):null]})};function aD(){var e=(0,R._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return aD=function(){return e},e}function aE(){var e=(0,R._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return aE=function(){return e},e}var aR={},aI=(0,I.J1)(aD()),aF=(0,I.J1)(aE()),aT=t(98734),aP=t(1478),aL=t(30846),aU=(0,aP.v)(["paddingRight"]),aN=aU.cssVars,aO=aU.styleTokens,aM=(0,eO.x)({inputWrapper:[B.wp.position.relative,B.wp.flex.growAndShrink(1),{input:[{paddingRight:aO.paddingRight}]}],copyButton:[B.wp.position.absolute,B.wp.top("50%"),B.wp.right(4),{transform:"translateY(-50%)"}]});function aB(e){return(0,u.FD)(j.S,{css:aM.inputWrapper,style:(0,A._)({},aN.paddingRight,e.value?"36px":"8px"),children:[(0,u.Y)(oD.pd,(0,er._)((0,E._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,u.Y)(eD.K0,{css:aM.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,aT.A)(e.value)},children:(0,u.Y)(aL.A,{})}):null]})}var aH=(0,eO.x)({root:[B.wp.flex.column,(a={gap:8},(0,A._)(a,B.kL.min("mobileMax"),[B.wp.flex.row,{"& > div:nth-of-type(1)":{maxWidth:50},"& > div:nth-of-type(2)":{width:"30%"}}]),(0,A._)(a,"label",[B.wp.color.foregroundDimmer,{fontSize:ek.LU.fontSizeSmall}]),a)],col:[B.wp.colWithGap(4),B.wp.flex.growAndShrink(1)],records:[B.wp.px(12),B.wp.pt(8),B.wp.pb(16),B.wp.colWithGap(16),B.wp.borderRadius(12),(0,A._)({},B.kL.min("mobileMax"),B.wp.colWithGap(12))],divider:(0,A._)({display:"flex",height:1,backgroundColor:ek.LU.outlineDimmest},B.kL.min("mobileMax"),B.wp.display.none)});function az(e){var n=e.hostname.split(".").slice(0,-2).join(".");return(0,u.FD)(j.S,{css:aH.root,children:[(0,u.FD)(j.S,{css:aH.col,children:[(0,u.Y)(j.S,{tag:"label",children:"Type"}),(0,u.Y)(oD.pd,{value:e.type,readOnly:!0})]}),(0,u.FD)(j.S,{css:aH.col,children:[(0,u.Y)(j.S,{tag:"label",children:"Hostname"}),(0,u.Y)(oD.pd,{value:""===n?"@":n,readOnly:!0})]}),(0,u.FD)(j.S,{css:aH.col,children:[(0,u.Y)(j.S,{tag:"label",children:"Record"}),(0,u.Y)(aB,{value:e.record,readOnly:!0})]})]})}function aW(e){var n="replit-verify=".concat(e.deploymentId);return(0,u.FD)(n2.ui,{background:"default",css:aH.records,children:[(0,u.Y)(az,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,u.Y)(j.S,{css:aH.divider}),(0,u.Y)(az,{hostname:e.hostname,type:"TXT",record:n})]})}var aG="https://docs.replit.com/cloud-services/deployments/custom-domains",aV=(0,eO.x)({root:[B.wp.colWithGap(8),B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.justify.center]}),aj=(0,eO.x)({root:aV.root,rootExpanded:[aV.root,B.wp.height("auto"),B.wp.pt(4),B.wp.pb(12),B.wp.justify.start],domainRow:[B.wp.reset.button,B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween],expanded:[B.wp.pl(4),B.wp.pr(8)],domainWrapper:[B.wp.flex.shrink(1),B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}],statusDot:[B.wp.borderRadius("full"),B.wp.width(6),B.wp.height(6)],buttons:[B.wp.flex.column,B.wp.justify.spaceBetween,(l={gap:8},(0,A._)(l,B.kL.min("mobileMax"),B.wp.flex.row),(0,A._)(l,"button",[B.wp.flex.growAndShrink(1)]),l)]}),aZ={verified:{color:ek.LU.accentPositiveDefault,text:"Verified"},verifying:{color:ek.LU.orangeDefault,text:"Verifying"},pushed_to_goval:{color:ek.LU.orangeDefault,text:"Verifying"},failed:{color:ek.LU.accentNegativeDefault,text:"Failed"}};function aq(e){var n,t,r,i,o=e.domain,a=e.deploymentId,l=e.apexProxy,c=e.authorizations,p=(0,s._)((0,d.useState)(!1),2),f=p[0],h=p[1],m=(0,s._)((0,d.useState)(!1),2),g=m[0],v=m[1],w=(0,s._)((n={variables:{id:a},fetchPolicy:"network-only",ssr:!1},t=(0,E._)({},nx,n),nw._(nD,t)),2),b=w[0],S=w[1].loading,Y=(0,s._)((r=(0,E._)({},aR,void 0),nb.n(aI,r)),2),A=Y[0],C=Y[1].loading,x=(0,s._)((i=(0,E._)({},aR,void 0),nb.n(aF,i)),2),_=x[0],k=x[1].loading,D=o.state===y.xp.Failed,R=c.addCustomDomain,I=R.isAuthorized,F=R.message,T=c.deleteCustomDomain,P=T.isAuthorized,L=T.message;return(0,u.FD)(n2.ui,{elevated:!0,css:f?aj.rootExpanded:aj.root,children:[(0,u.FD)(j.S,{css:aj.domainRow,style:{borderBottomLeftRadius:f?0:void 0,borderBottomRightRadius:f?0:void 0},children:[(0,u.FD)(j.S,{css:aj.domainWrapper,row:!0,gap:8,align:"center",children:[(0,u.Y)(V.EY,{multiline:!1,children:(0,u.Y)("a",{target:"_blank",href:"".concat(o.domain.startsWith("http://")||o.domain.startsWith("https://")?"":"https://").concat(o.domain),children:o.domain})}),(0,u.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,u.Y)(j.S,{css:aj.statusDot,style:{backgroundColor:aZ[o.state].color}}),(0,u.Y)(V.EY,{color:"dimmer",variant:"small",children:aZ[o.state].text})]})]}),(0,u.FD)(j.S,{row:!0,children:[(0,u.Y)(or.r,{textToCopy:o.domain,tooltipSuccessText:"Copy link"}),(0,u.Y)(tm.m_,{tooltip:F,isDisabled:I,children:(0,u.Y)(eD.K0,{alt:"Edit",disabled:!I,tooltipBehavior:"hidden",onClick:function(){v(!1),h(function(e){return!e})},css:B.wp.color.foregroundDimmer,children:f?(0,u.Y)(n4.A,{}):(0,u.Y)(ax.A,{})})})]})]}),f?(0,u.Y)(j.S,{css:aj.expanded,gap:12,children:g?(0,u.FD)(u.FK,{children:[(0,u.Y)(V.EY,{children:"Are you sure you want to unlink this domain?"}),(0,u.FD)(j.S,{css:aj.buttons,children:[(0,u.Y)(eX.$n,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){v(!1)}}),(0,u.Y)(eX.$n,{size:"small",disabled:C,text:"Yes, unlink "+o.domain,colorway:"negative",onClick:function(){A({variables:{input:{hostingDeploymentDomainId:o.id}}})}})]})]}):(0,u.FD)(u.FK,{children:[(0,u.FD)(j.S,{gap:6,children:[D?(0,u.FD)(u.FK,{children:[(0,u.FD)(j.S,{row:!0,gap:6,align:"center",children:[(0,u.Y)(nl.A,{}),(0,u.Y)(V.EY,{children:"DNS Error"})]}),(0,u.FD)(V.EY,{children:["Failed to link domain",o.status?": ".concat(o.status.endsWith(".")?o.status.slice(0,-1):o.status):null,". Make sure your domain's DNS settings have these records."," ",(0,u.Y)("a",{target:"_blank",href:aG,children:"Learn more"})]})]}):(0,u.FD)(V.EY,{color:"dimmer",children:["Add these records to your domain's"," ",(0,u.Y)("strong",{css:B.wp.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,u.Y)("a",{target:"_blank",href:aG,children:"Learn more"})]}),(0,u.Y)(aW,{hostname:o.domain,apexProxy:l,deploymentId:a})]}),(0,u.FD)(j.S,{css:aj.buttons,children:[(0,u.Y)(eX.$n,{iconLeft:S||k?(0,u.Y)(nB.A,{}):(0,u.Y)(at.A,{}),size:"small",text:D?"Retry linking":"Check status",onClick:function(){D?_({variables:{input:{hostingDeploymentDomainId:o.id}}}):b()}}),(0,u.Y)(tm.m_,{isDisabled:P,tooltip:L,children:(0,u.Y)(eX.$n,{iconLeft:(0,u.Y)(am.A,{}),size:"small",disabled:C||!P,text:D?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){v(!0)}})})]})]})}):null]})}var aK=t(96597),a$=t.n(aK);function aJ(e){return(0,u.Y)(rz.Ay,(0,er._)((0,E._)({},e),{children:(0,u.Y)("path",{fillRule:"evenodd",d:"M2.25 3A.75.75 0 0 1 3 2.25h18a.75.75 0 0 1 0 1.5h-1.304c-.273 1.86-1.53 3.131-2.595 4.209l-.067.068C15.749 9.328 14.75 10.384 14.75 12c0 1.616.999 2.672 2.284 3.973l.067.068c1.065 1.078 2.322 2.35 2.595 4.209H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h1.304c.273-1.86 1.53-3.131 2.595-4.209l.067-.068C8.251 14.672 9.25 13.616 9.25 12c0-1.616-.999-2.672-2.284-3.973L6.9 7.959C5.834 6.88 4.577 5.609 4.304 3.75H3A.75.75 0 0 1 2.25 3Zm3.577.75c.257 1.217 1.131 2.134 2.207 3.223l.067.068C9.303 8.258 10.75 9.721 10.75 12c0 2.278-1.447 3.742-2.65 4.959l-.066.068c-1.076 1.089-1.95 2.006-2.207 3.223H7.75l3.8-2.85a.75.75 0 0 1 .9 0l3.8 2.85h1.923c-.257-1.217-1.131-2.134-2.207-3.223l-.067-.068c-1.202-1.217-2.649-2.68-2.649-4.959 0-2.278 1.447-3.742 2.65-4.959l.066-.068c1.076-1.089 1.95-2.006 2.207-3.223H5.827Zm7.923 16.5L12 18.938l-1.75 1.312h3.5Z",clipRule:"evenodd"})}))}var aQ=t(85213),aX=(0,eO.x)({root:[B.wp.p(8),B.wp.borderRadius(8),B.wp.border({color:ek.LU.outlineDimmer})],labelRow:[B.wp.rowWithGap(8),B.wp.align.center],labelText:[B.wp.flex.growAndShrink(1)],controls:[{"& > button":[B.wp.flex.growAndShrink(1)]}],valueRow:[B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}]}),a0=function(e){try{return new URL(e.startsWith("http")?e:"https://".concat(e)).hostname.toLowerCase()}catch(n){return e.trim().toLowerCase()}};function a1(e){var n,t,r=(0,s._)((0,d.useState)(!0),2),i=r[0],o=r[1],a=(0,s._)((0,d.useState)(""),2),l=a[0],c=a[1],p=(0,s._)((0,d.useState)(!1),2),f=p[0],h=p[1],m=(0,s._)((0,d.useState)(!1),2),g=m[0],v=m[1],w=(0,s._)((n={onCompleted:function(){e.onAdd()}},t=(0,E._)({},nx,n),nb.n(nE,t)),2),y=w[0],b=w[1].loading,S=(0,d.useRef)(null),Y=(0,d.useId)(),A=a$()(l),C=b||!l||g&&!A,x=g&&!A?"Enter a valid domain":null,_=b?(0,u.Y)(nB.A,{}):(0,u.Y)(t0.A,{});return i||b||(_=(0,u.Y)(aQ.A,{})),(0,u.FD)(j.S,{tag:"form",css:aX.root,gap:16,onSubmit:function(n){if(n.preventDefault(),i){var t,r=a0(l);c(r),v(!0),a$()(r)?(o(!1),null===(t=S.current)||void 0===t||t.focus()):h(!0);return}y({variables:{input:{hostingDeploymentId:e.deploymentId,domain:l}}})},children:[(0,u.FD)(j.S,{gap:8,children:[(0,u.FD)(j.S,{tag:"label",htmlFor:Y,css:aX.labelRow,children:[A&&!i?(0,u.Y)(nO.A,{color:ek.LU.accentPositiveDefault}):null,(0,u.Y)(V.EY,{color:"dimmer",children:"First, enter your domain"})]}),i?(0,u.Y)(oD.pd,{id:Y,autoFocus:!0,placeholder:"example.com",value:l,disabled:b,onChange:function(e){c(e.currentTarget.value),v(!1),h(!1)}}):(0,u.FD)(n2.ui,{elevated:!0,css:aX.valueRow,children:[(0,u.Y)(j.S,{href:"https://"+l,tag:"a",target:"_blank",children:l}),(0,u.Y)(eD.K0,{alt:"Edit",onClick:function(){return o(!0)},children:(0,u.Y)(ax.A,{color:ek.LU.foregroundDimmer})})]}),x&&f?(0,u.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,u.Y)(nl.A,{size:12,color:ek.LU.orangeDefault}),(0,u.Y)(V.EY,{variant:"small",children:x})]}):null]}),!i&&A?(0,u.Y)(a2,{apexProxy:e.apexProxy,domain:l,deploymentId:e.deploymentId}):null,(0,u.FD)(j.S,{css:aX.controls,row:!0,gap:8,justify:"space-between",children:[(0,u.Y)(eX.$n,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,u.Y)(eX.$n,{ref:S,iconRight:_,colorway:"primary",type:"submit",disabled:C,text:i?"Next":"Link domain"})]})]})}function a2(e){var n={A:{hostname:e.domain,record:e.apexProxy},TXT:{hostname:e.domain,record:"replit-verify=".concat(e.deploymentId)}};return(0,u.FD)(j.S,{gap:8,children:[(0,u.FD)(j.S,{css:aX.labelRow,children:[(0,u.Y)(aJ,{color:ek.LU.foregroundDimmest}),(0,u.FD)(V.EY,{multiline:!0,css:aX.labelText,children:["Next, add the following records to your domain's DNS settings."," ",(0,u.Y)("a",{target:"_blank",href:aG,children:"Learn more"})]}),(0,u.Y)(or.i,{textToCopy:JSON.stringify(n,null,2),text:"JSON",showIcon:!0,size:"small"})]}),(0,u.Y)(aW,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var a5=t(43249),a4=(0,eO.x)({primaryDomain:[B.wp.height(32),B.wp.justify.spaceBetween,B.wp.align.center,B.wp.pl(8),B.wp.pr(4),B.wp.borderRadius(8)],primaryDomainLink:[B.wp.flex.shrink(1),B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}]});function a3(e){var n,t,r,i=e.deployment,o=e.authorizations,a=(0,s._)((0,d.useState)(!1),2),l=a[0],c=a[1],p=(0,s._)((0,d.useState)(void 0),2),f=p[0],m=p[1],g=(0,rO._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:rA.co});n={variables:{id:i.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:f,onCompleted:function(e){var n,t;m((null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"&&(null===(t=e.hostingDeployment.domains)||void 0===t?void 0:t.some(function(e){return e.state===y.xp.Verifying}))?3e4:void 0)}},t=(0,E._)({},nx,n),F.I(nD,t);var v=(null==i?void 0:null===(r=i.domains)||void 0===r?void 0:r.length)?i.domains:null,w=(null==i?void 0:i.currentBuild.status)===y.nH.Success,b=null==i?void 0:i.repl.apexProxy,S=(0,h.cF)(),Y=function(){var e,n,t,r,i,o=(null==S?void 0:null===(e=S.repl.hostingDeployment)||void 0===e?void 0:e.__typename)==="HostingDeployment"?null===(n=S.repl.hostingDeployment)||void 0===n?void 0:n.replitAppSubdomain:void 0;if(!o&&(null==S?void 0:null===(t=S.repl.owner)||void 0===t?void 0:t.username)&&(o="".concat(S.repl.slug,"-").concat(S.repl.owner.username)),o)return"".concat(o).concat((null===(i=window)||void 0===i?void 0:null===(r=i.location)||void 0===r?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(g)}(),A=o.addCustomDomain,C=A.isAuthorized,x=A.message;return(0,u.FD)(j.S,{gap:8,children:[(0,u.FD)(n2.ui,{elevated:!0,css:a4.primaryDomain,row:!0,gap:4,children:[(0,u.Y)(V.EY,{multiline:!1,css:a4.primaryDomainLink,children:(0,u.Y)("a",{href:"https://".concat(Y),target:"_blank",rel:"noreferrer noopener",children:Y})}),(0,u.FD)(j.S,{row:!0,align:"center",children:[(0,u.Y)(or.r,{textToCopy:null!=Y?Y:""}),(0,u.Y)(tm.m_,{tooltip:a8,children:(0,u.Y)(rH.A,{"aria-label":a8,color:ek.LU.foregroundDimmer,css:B.wp.m(4)})})]})]}),v&&i?(0,u.Y)(j.S,{gap:8,children:v.map(function(e){return(0,u.Y)(j.S,{children:(0,u.Y)(aq,{apexProxy:i.repl.apexProxy,deploymentId:i.id,domain:e,authorizations:o})},e.domain)})}):null,l&&b?(0,u.Y)(a1,{apexProxy:b,deploymentId:i.id,onAdd:function(){return c(!1)},onCancel:function(){return c(!1)}}):null,w?null:(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:"You must successfully deploy your project before linking a domain"}),!1===l?(0,u.Y)(j.S,{row:!0,children:(0,u.Y)(tm.m_,{tooltip:x,isDisabled:C,children:(0,u.Y)(eX.$n,{disabled:!w||!C,iconLeft:(0,u.Y)(a5.A,{}),text:"Link a domain",onClick:function(){return c(!0)},variant:"outlined",size:"small"})})}):null]})}var a8="You must shut down your deployment and redeploy to change the primary domain";function a7(){var e=(0,R._)(["\n  mutation NotificationsSectionUpdateFailureNotifications(\n    $input: UpdateMachineJobFailureNotificationInput!\n  ) {\n    updateMachineJobFailureNotification(input: $input) {\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UpdateMachineJobFailureNotificationResult {\n        failureNotifications\n      }\n    }\n  }\n"]);return a7=function(){return e},e}var a6={},a9=(0,I.J1)(a7()),le=t(24239),ln=t(75886);function lt(e){return(0,u.Y)(rz.Ay,(0,er._)((0,E._)({},e),{children:(0,u.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0l5.25 5.249a.745.745 0 0 1 .02.02l10.73 10.73.001.001 6 6a.75.75 0 1 1-1.061 1.06l-5.78-5.78H3a.75.75 0 0 1-.414-1.376l.063-.05c.06-.05.156-.136.275-.262.239-.252.575-.668.918-1.296C4.525 13.514 5.25 11.39 5.25 8a6.61 6.61 0 0 1 .173-1.517L.47 1.53a.75.75 0 0 1 0-1.06Zm6.283 7.344a5.096 5.096 0 0 0-.003.184V8c0 3.61-.775 5.986-1.592 7.484a8.768 8.768 0 0 1-.468.766h10.5L6.752 7.814Zm4.922-6.565A6.75 6.75 0 0 1 18.75 8v.011c-.026 1.617.177 3.23.604 4.79a.75.75 0 0 1-1.447.396 18.642 18.642 0 0 1-.657-5.204 5.25 5.25 0 0 0-8.164-4.37.75.75 0 0 1-.832-1.248 6.75 6.75 0 0 1 3.42-1.127ZM9.894 20.35a.75.75 0 0 1 1.025.273 1.25 1.25 0 0 0 2.162 0 .75.75 0 0 1 1.298.752 2.749 2.749 0 0 1-4.758 0 .75.75 0 0 1 .273-1.025Z",clipRule:"evenodd"})}))}var lr=(0,eO.x)({container:[B.wp.colWithGap(8)]});function li(e){var n,t,r=e.replId,i=e.isCurrentBuildSuccess,o=e.areFailureNotificationsEnabled,a=(0,rO._P)({controlName:"flag-cron-push-notifications",type:"boolean",default:!1,logFlagToAnalytics:!0}),l=(0,s._)((0,d.useState)(o),2),c=l[0],p=l[1],f=(0,s._)((0,d.useState)(void 0),2),h=f[0],m=f[1],g=(0,s._)((n={onCompleted:function(e){var n=e.updateMachineJobFailureNotification;((null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&(m(n.message),p(function(e){return!e}))}},t=(0,E._)({},a6,n),nb.n(a9,t)),1)[0],v=function(e){m(void 0),g({variables:{input:{replId:r,failureNotifications:e}}}),p(e)};return(0,u.FD)(j.S,{children:[h?(0,u.Y)(G.N,{text:h,colorway:"warning"}):null,(0,u.FD)(tm.m_,{isDisabled:i,tooltip:"Most recent build failed. Re-deploy successfully before enabling notifications",placement:"top-end",css:lr.container,children:[(0,u.FD)(le.e2,{disabled:!i,tag:"fieldset",name:"notification-switch",value:c?"enabled":"disabled",onChange:function(e){v("enabled"===e)},row:!0,primary:!0,stretch:!0,children:[(0,u.Y)(le.$O,{id:"failure-notifications-disabled",value:"disabled",text:"Disabled",icon:(0,u.Y)(lt,{})}),(0,u.Y)(le.$O,{id:"failure-notifications-enabled",value:"enabled",text:"Enabled",icon:(0,u.Y)(ln.A,{})})]}),(0,u.Y)(V.EY,{color:"dimmer",children:"Send email ".concat(a?"and push ":"","notifications when scheduled jobs fail")})]})]})}var lo=(0,eO.x)({container:[t_.R1.maxWidth,B.wp.py(8)],usageContainer:B.wp.colWithGap(16),header:B.wp.pb(8),paddedHeader:B.wp.pb(12)}),la=function(e){var n=e.deploymentId,t=e.onLifecycleCommand,r=e.onError;return n?(0,u.Y)(ls,{deploymentId:n,onLifecycleCommand:t,onError:r}):(0,u.Y)(Y.A,{children:(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:"Deployment not found"})})},ll={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:y.S4.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:y.S4.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:y.S4.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:y.S4.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:y.S4.InsufficientPermissions,message:"Loading"}};function ls(e){var n,t,r,i,o,a,l,c,p=(0,r0.m6)(),f=(0,s._)((0,d.useState)(!1),2),h=f[0],m=f[1];(0,d.useEffect)(function(){(0,eU.Ae)({context:S.P.Settings})},[]);var g=(0,s._)((n=(0,E._)({},nT,void 0),nw._(nU,n)),2),v=g[0],w=g[1],b=w.data,A=w.error,C=(t={variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var n;(null==e?void 0:null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"&&v({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}},r=(0,E._)({},nT,t),F.I(nL,r)),x=C.data,_=C.loading,k=C.error,D=(null==x?void 0:null===(i=x.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"?x.hostingDeployment:void 0,R=(null==D?void 0:D.currentBuild.provider)===y.Q0.Cron;if(h)return(0,u.Y)(nf.J,{onError:e.onError,onConfirm:function(n){e.onLifecycleCommand({command:y.jP.UpdateMachineConfiguration,machineConfigurationId:n.configurationId,maxMachineInstances:n.maxInstances})},onBack:function(){return m(!1)}});if(k)return(0,u.Y)(nn.Wx,{text:k.message});if(_||!D)return(0,u.Y)(Y.A,{centered:!0,children:(0,u.Y)(nn.cN,{})});var I=D.currentBuild,T=null!==(l=null==I?void 0:I.machineConfiguration)&&void 0!==l?l:void 0,P=(null==b?void 0:null===(o=b.getRepl)||void 0===o?void 0:o.__typename)==="Repl"?b.getRepl.authorizations:ll;return(0,u.Y)(Y.A,{children:(0,u.FD)(j.S,{css:lo.container,gap:32,children:[A?(0,u.Y)(G.N,{colorway:"negative",text:A.message}):void 0,I.provider===y.Q0.CloudRun?(0,u.FD)(j.S,{children:[(0,u.Y)(V.EY,{variant:"subheadDefault",css:lo.header,children:"Resource usage"}),(0,u.Y)(j.S,{css:lo.usageContainer,children:(0,u.Y)(ak,{machineConfiguration:T,onEditAutoscaleMachineConfiguration:function(){return m(!0)},authorizations:P})})]}):null,I.provider!==y.Q0.Cron?(0,u.FD)(j.S,{children:[(0,u.Y)(V.EY,{variant:"subheadDefault",css:lo.header,children:"Domains"}),(0,u.Y)(a3,{deployment:D,authorizations:P})]}):null,(0,u.FD)(j.S,{children:[(0,u.Y)(V.EY,{variant:"subheadDefault",css:lo.paddedHeader,children:"Manage deployment"}),(0,u.Y)(rk,{}),(0,u.Y)(av,{onLifecycleCommand:e.onLifecycleCommand,authorizations:P})]}),R?(0,u.FD)(j.S,{children:[(0,u.Y)(V.EY,{variant:"subheadDefault",css:lo.paddedHeader,children:"Scheduled Job Notifications"}),(0,u.Y)(li,{replId:D.repl.id,isCurrentBuildSuccess:D.currentBuild.status===y.nH.Success,areFailureNotificationsEnabled:null!==(c=null===(a=D.currentBuild.machineJob)||void 0===a?void 0:a.failureNotifications)&&void 0!==c&&c})]}):null,p?null:(0,u.FD)(j.S,{children:[(0,u.Y)(V.EY,{variant:"subheadDefault",css:lo.paddedHeader,children:"Deploy on the go"}),(0,u.Y)(ab,{shouldShowDownloadQR:!1})]})]})})}var lc=t(43035),lu=t(79261),ld=t(61780),lp=t(50024),lf=t(46086),lh=t(20662),lm=(0,eO.x)({root:[{height:"100%"},B.wp.overflow("hidden"),B.wp.position.relative],content:[B.wp.overflow("auto"),B.wp.flex.growAndShrink(1),B.wp.position.relative]}),lg=function(e){var n,t,r,i,o,a,l,c,p,f,m,A,C,x,_=e.onViewUpdate,k=e.onError,D=e.refetch,E=e.openFile,R=e.openPane,I=e.initialView,F=e.error,T=e.flow,P=function(e){J({type:S.k.SendDeploymentLifecycleCommand,payload:e})},L=(0,nq.A)(),U=(0,h.i$)(),N=(0,h.tq)(),O=(0,h.cF)(),M=(0,h.om)(),B="string"==typeof U,H=!(void 0!==N)&&!B,z=(0,lu.Ay)(),W=(0,b.QL)(),V=!!W,Z=(0,s._)((0,d.useState)(function(){return N?S.P.DeploymentInProgress:H?S.P.Intro:S.P.Deployment}),2),q=Z[0],K=Z[1];(0,d.useEffect)(function(){N&&K(S.P.DeploymentInProgress)},[N]);var $=(0,h.e_)(),J=(n=(0,g._)(function(e){var n;return(0,w.YH)(this,function(t){switch(t.label){case 0:switch(_(),e.type){case S.k.SendDeploymentLifecycleCommand:return[3,1];case S.k.ChangeView:return[3,3];case S.k.OpenPane:return[3,4]}return[3,7];case 1:return[4,$(e.payload)];case 2:if(t.sent(),e.payload.command===y.jP.Destroy)return K(S.P.Intro),D(),[2];return e.payload.command===y.jP.UpdateMachineConfiguration&&D(),K(S.P.Deployment),[3,8];case 3:return K(e.payload.view),[3,8];case 4:if(!("codeEditor"===(n=e.payload).type&&".replit"===n.data.path))return[3,6];return[4,M.stat(".replit")];case 5:if(!t.sent().exists)return k("Could not find .replit configuration file."),[2];t.label=6;case 6:return R(n),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),Q=(t=null==O?void 0:O.provider,r=(0,rO._P)({controlName:"flag-supply-eye",logFlagToAnalytics:!1,default:!1}),o=(i=(0,eN.g)("deployment-analytics-dot")).isLoading,a=i.isDone,(0,d.useMemo)(function(){return[{value:S.P.Deployment,label:"Overview",icon:(0,u.Y)(na.A,{})}].concat((0,v._)(t===y.Q0.Cron?[{value:S.P.Schedule,label:"Schedule",icon:(0,u.Y)(nM.A,{})}]:[]),(0,v._)(t!==y.Q0.Static?[{value:S.P.Logs,label:"Logs",icon:(0,u.Y)(nJ.A,{})}]:[]),(0,v._)(t!==y.Q0.Cron?[{value:S.P.Analytics,label:"Analytics",icon:(0,u.Y)(lp.A,{}),showDot:!o&&!a}]:[]),(0,v._)(t&&r&&lv(t)?[{value:S.P.ResourceMonitoring,label:"Resources",icon:(0,u.Y)(lh.A,{}),beta:!1}]:[]),[{value:S.P.Settings,label:"Settings",icon:(0,u.Y)(lf.A,{})}])},[a,o,t,r])),X=(l=(0,iA.Os)(iY.IW.id,iY.Gp.SetupDeployment,{onEnter:function(){q!==S.P.Intro&&l.goto(iY.Gp.MonitorDeployment)}}),c=(0,iA.Jw)(iY.IW.id,iY.Gp.ApproveDeployment),p=(0,iA.Jw)(iY.IW.id,iY.Gp.ConfirmDeployment),f=(0,iA.Os)(iY.IW.id,iY.Gp.MonitorDeployment),m=(0,iA.Os)(iY._t.id,iY.ij.SetupDeployment,{onEnter:function(){q!==S.P.Intro&&m.goto(iY.ij.MonitorDeployment)}}),A=(0,iA.Jw)(iY._t.id,iY.ij.ApproveDeployment),C=(0,iA.Jw)(iY._t.id,iY.ij.ConfirmDeployment),x=(0,iA.Os)(iY._t.id,iY.ij.MonitorDeployment),{shouldDisableUnrecommendedProviders:l.isActive||m.isActive,mergedTourRefs:(0,lc.P)(l.tourRef,c,p,f.tourRef,m.tourRef,A,C,x.tourRef,{breadcrumb:"client/deployments/Deployment/Views/useDeploymentGuidedTourSteps.ts:79"}),handleDeploy:function(){f.goto(iY.Gp.MonitorDeployment),x.goto(iY.ij.MonitorDeployment)}});return q===S.P.Intro?(0,u.Y)(j.S,{css:lm.content,innerRef:X.mergedTourRefs,children:(0,u.Y)(iV,{initialSelectedProvider:I===S.P.ReservedVMTierSelection?y.Q0.Gce:void 0,onViewAction:J,onError:k,onDeploy:function(){J({type:S.k.ChangeView,payload:{view:S.P.DeploymentInProgress}}),X.handleDeploy(),W&&z({action:"deploying_app",sessionId:W})},replId:L,disableUnrecommendedProviders:X.shouldDisableUnrecommendedProviders,hasAgentSession:V,flow:T})}):(0,u.FD)(j.S,{css:lm.root,innerRef:X.mergedTourRefs,children:[Q?(0,u.Y)(ld.P,{onClick:function(e){J({type:S.k.ChangeView,payload:{view:e.value}})},tabs:Q,value:q===S.P.DeploymentInProgress?S.P.Deployment:q}):null,(0,u.FD)(j.S,{css:lm.content,children:[F?(0,u.Y)(Y.A,{children:(0,u.Y)(G.N,{colorway:"warning",icon:(0,u.Y)(nl.A,{}),text:F})}):null,q===S.P.Analytics?(0,u.Y)(eV,{replId:L}):null,q===S.P.Logs?(0,u.Y)(oK,{replId:L,deploymentId:U,openFile:E}):null,q===S.P.ResourceMonitoring?(0,u.Y)(o2,{replId:L}):null,q===S.P.Settings?(0,u.Y)(la,{onError:k,deploymentId:U,onLifecycleCommand:P}):null,q===S.P.Deployment||q===S.P.DeploymentInProgress?(0,u.Y)(r7,{view:q,refetch:D,onViewAction:J,onError:k,openFile:E,onLifecycleCommand:P,hasAgentSession:V}):null,q===S.P.Schedule?(0,u.Y)(ai,{replId:L,deploymentId:U,openFile:E}):null]})]})},lv=function(e){return[y.Q0.Gce,y.Q0.CloudRun,y.Q0.Cron].includes(e)},lw=t(87590);function ly(e){var n=e.initialView,t=e.flow,r=e.onViewUpdate,i=e.openFile,o=e.openPane,a=e.tabsNavRef,l=(0,h.Ki)(),c=(0,h.uS)(),p=(0,h.Jz)(),f=(0,s._)((0,d.useState)(null),2),g=f[0],v=f[1];return c===m.d.Loading?(0,u.Y)(lw.A,{pane:{type:"deployments"},headerText:"Deploy to production",loading:!0}):(0,u.Y)(lg,{tabsNavRef:a,initialView:n,onViewUpdate:function(){g&&v(null),r()},onError:v,refetch:l,openFile:i,openPane:o,error:g||p,flow:t})}var lb=t(72250),lS=p.ZU.Object({skipIntro:p.ZU.Optional(p.ZU.Boolean()),isAgentDeployment:p.ZU.Optional(p.ZU.Boolean())}),lY=p.ZU.Object({type:p.ZU.Literal("deployments"),data:p.ZU.Optional(p.ZU.Object({view:p.ZU.Enum(S.P)})),flow:p.ZU.Optional(lS)}),lA={Content:function(e){var n=e.pane,t=n.data,r=n.flow,i=e.options.performPaneOperation,o=(0,d.useRef)(function(e){if(e&&(void 0===e?"undefined":(0,c._)(e))==="object"&&"view"in e&&e.view===S.P.ReservedVMTierSelection)return S.P.ReservedVMTierSelection}(t)),a=(0,d.useCallback)(function(e){return i({operation:"open",secondary:!0,pane:{type:(0,ik.QY)(e),data:e}})},[i]),l=(0,s._)((0,d.useState)(null),2),p=l[0],f=l[1];(0,lb.Qt)(function(){if(p)return{type:"deployments",getTabs:p.getTabs,setTab:p.setTab}},[p]);var h=(0,d.useCallback)(function(e){i({operation:"open",pane:e,secondary:!0})},[i]);return(0,u.Y)(ly,{tabsNavRef:f,initialView:o.current,onViewUpdate:function(){o.current&&(o.current=void 0,i({operation:"replace",pane:{type:"deployments"}}))},openFile:a,openPane:h,flow:r})},Icon:function(e){var n=e.size;return(0,u.Y)(rz.Vx.Provider,{value:{color:ek.LU.greenStrongest,size:n},children:(0,u.Y)(na.A,{})})},getTitle:function(){return"Deployments"},description:"Publish a live, stable, public version of your App, unaffected by the changes you make in the workspace.",category:ik.bY.CloudServices,decode:function(e){return f.WT.Decode(lY,e)}}},85304:(e,n,t)=>{"use strict";t.d(n,{D:()=>s});var r=t(40174),i=t(49711),o=t(14178),a=r.ZU.Union(Object.values(o.ik).map(function(e){return r.ZU.Literal(e)})),l=r.ZU.Object({type:r.ZU.Literal("docs"),data:r.ZU.Optional(r.ZU.Object({url:r.ZU.Optional(r.ZU.Union([a,r.ZU.Null()]))}))}),s=function(e){return i.WT.Decode(l,e)}},53370:(e,n,t)=>{"use strict";t.d(n,{u:()=>nc});var r=t(94086),i=t(30758),o=t(40174),a=t(49711),l=t(66622),s=t(20837),c=t(45009),u=t(30632),d=t(72813);function p(){var e=(0,c._)(["\n  query IntegrationsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(83733),g=t(78703),v=t(82436),w=t(73225),y=t(27189),b=t(25204),S=t.n(b),Y=t(59314),A=t(14178),C=t(24481),x=t(51570),_=t(29975),k=t(71105),D=(0,i.createContext)(void 0);function E(e){var n,t,i=e.children,o=(0,x.q)(),a=o.neonDatabases,l=o.loading,s=(0,_.G)(),c=s.buckets,u=s.loading,d=(0,k.x)(),p=d.isDotReplitAuthLoading,f=d.isDotReplitAuthEnabled;return n=a.length>0?"connected":l?"loading":"disconnected",t=c&&c.length>0?"connected":u?"loading":"disconnected",(0,r.Y)(D.Provider,{value:{neon:n,objectStorage:t,replAuth:f?"connected":p?"loading":"disconnected"},children:i})}function R(){var e=(0,i.useContext)(D);if(!e)throw Error("useConnectionStatus must be used within a ConnectionStatusProvider");return e}var I=t(13454),F=t(72275),T=t(43952),P=t(5482),L=t(8143),U=t(51439),N=t(76396),O=t(62906),M=t(1175),B=t(39651),H=t(35541),z=t(57218),W=t(72250),G=t(24955),V=t(73943),j=t(10168),Z=t(32842),q=t(40172),K=t(68463),$=t(25877),J=t(95235),Q=t(27233),X=t(38520),ee=t(31955),en=t(40889),et=t(65599),er=t(8367),ei=t(20778),eo=t(83515),ea=t(92578),el=t(29048),es=t(30111),ec=t(47177),eu=t(73886),ed=t(83702),ep=t(332),ef=t(86227),eh=t(46086),em=Z.kL.max(300),eg=(0,j.x)({root:[Z.wp.flex.column,Z.wp.borderRadius(),Z.wp.backgroundColor.backgroundHigher,Z.wp.border({color:G.LU.outlineDimmer,width:1}),Z.wp.overflow("hidden")],summary:[Z.wp.flex.column,Z.wp.gap(4)],summaryHeader:[Z.wp.flex.shrink(1),Z.wp.gap(8),Z.wp.p(8),Z.wp.align.center,Z.wp.justify.spaceBetween,(0,F._)({},em,[Z.wp.flex.wrap])],summaryTitle:[Z.wp.flex.shrink(1)],summaryControls:[Z.wp.flex.shrink(1),{'&[data-open="true"]':{display:"flex",maxHeight:"100px",opacity:1},'&[data-open="false"]':{display:"none",maxHeight:"0",opacity:0},transition:"\n        max-height var(--transition-duration) ease-in-out,\n        opacity var(--transition-duration) ease-in-out,\n        visibility var(--transition-duration) linear\n      "}],connectedIcon:[Z.wp.backgroundColor.accentPositiveDimmer,Z.wp.border({color:G.LU.accentPositiveDimmest,width:2}),Z.wp.borderRadius(8)],summaryDetails:[Z.wp.flex.column,Z.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%",opacity:1},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0",opacity:0},transition:"\n        max-height var(--transition-duration) ease-in-out,\n        opacity var(--transition-duration) ease-in-out,\n        visibility var(--transition-duration) linear\n      ",overflow:"hidden"}],summaryBody:[Z.wp.p(8),Z.wp.color.foregroundDimmer,{fontSize:G.LU.fontSizeSmall,lineHeight:G.LU.lineHeightSmall}],summaryFooter:[Z.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%",opacity:1},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0",opacity:0},transition:"\n        max-height var(--transition-duration) ease-in-out,\n        opacity var(--transition-duration) ease-in-out,\n        visibility var(--transition-duration) linear\n      "}],sectionContainer:[Z.wp.backgroundColor.backgroundRoot,Z.wp.flex.growAndShrink(1)],sectionTitle:[(0,F._)({},"@media (max-width: ".concat(V.LO.mobileMax,"px)"),{display:"none"})],sectionButton:[(0,F._)({},"@media (max-width: ".concat(V.LO.mobileMax,"px)"),{"& > div":{gap:0}})],divider:[Z.wp.height(2),Z.wp.backgroundColor.backgroundHighest]}),ev=function(){return(0,r.Y)(ec.A,{color:G.LU.accentPositiveDefault,css:eg.connectedIcon})},ew={Configuration:{icon:(0,r.Y)(eh.A,{}),colorway:"primary",variant:"default",displayName:"Configure"},"Code samples":{icon:(0,r.Y)(eu.A,{}),variant:"outlined",displayName:"Code samples"},Docs:{icon:(0,r.Y)(ea.A,{}),variant:"outlined",displayName:"Docs"}},ey=function(e){var n=e.sectionTitles,t=e.selectedSection,i=e.setSelectedSection;return(0,r.Y)(er.S,{row:!0,gap:8,children:n.map(function(e){return(0,r.Y)(q.$n,{variant:ew[e].variant,colorway:ew[e].colorway,css:eg.sectionButton,style:{outlineColor:t===e?G.LU.outlineStronger:G.LU.outlineDefault},iconLeft:ew[e].icon,text:(0,r.Y)(en.EY,{css:eg.sectionTitle,children:ew[e].displayName}),onClick:function(){t===e?i(null):i(e)}},e)})})},eb=function(e){var n=e.sections,t=e.selectedSection;return(0,r.Y)(ee.ui,{elevated:!0,css:eg.sectionContainer,children:n.map(function(e){return(0,r.FD)(er.S,{style:{display:t===e.title?"flex":"none"},children:[(0,r.Y)($.a,{css:eg.divider}),e.content]},e.key)})})},eS=function(e){var n,t=e.icon,o=e.title,a=e.description,s=e.onClick,c=e.isConnected,u=e.sections,d=e.configIcon,p=void 0===d?(0,r.Y)(eh.A,{}):d,f=e.editSecretsAuthzErrorMessage,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],v=(0,l._)((0,i.useState)(null),2),w=v[0],y=v[1],b=(0,O.A)(m,150),S=m||b,Y=(0,M.a)();return(0,r.Y)(er.S,{tag:"li",css:eg.root,onMouseEnter:function(){Y||g(!0)},onMouseLeave:function(){Y||w||g(!1)},children:(0,r.FD)(er.S,{css:eg.summary,children:[(0,r.FD)(er.S,{onClick:Y?function(){return g(!m)}:void 0,css:eg.summaryHeader,row:!0,children:[(0,r.FD)(er.S,{row:!0,gap:8,align:"center",css:eg.summaryTitle,children:[c?(0,r.Y)(ev,{}):null,t,(0,r.Y)(en.EY,{style:{overflow:"hidden",flexShrink:1},variant:"subheadDefault",children:o})]}),(0,r.FD)(er.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(er.S,{row:!0,gap:8,align:"center",css:eg.summaryControls,"data-open":S,style:{"--transition-duration":Y?"0.1s":"0.3s"},children:u?(0,r.Y)(ey,{sectionTitles:null!==(n=null==u?void 0:u.map(function(e){return e.title}))&&void 0!==n?n:[],selectedSection:w,setSelectedSection:y}):(0,r.Y)(et.m_,{isDisabled:!f,tooltip:f,children:(0,r.Y)(q.$n,{colorway:"primary",onClick:s,iconLeft:p,text:"Configure"})})}),(0,r.Y)(J.K0,{onClick:function(){y(null),g(!m)},alt:S?"Hide":"Configure",children:S?(0,r.Y)(es.A,{}):(0,r.Y)(el.A,{})})]})]}),(0,r.Y)(er.S,{css:eg.summaryDetails,"data-open":S,style:{"--transition-duration":Y?"0s":"0.2s"},children:(0,r.Y)(er.S,{css:eg.summaryBody,children:a})}),(0,r.Y)(er.S,{css:eg.summaryFooter,"data-open":S,style:{"--transition-duration":Y?"0.1s":"0.3s"},row:!0,align:"center",justify:"end",children:u?(0,r.Y)(eb,{sections:u,selectedSection:w}):null})]})})},eY=(0,j.x)({accordionItemBody:[Z.wp.flex.column,Z.wp.gap(8),Z.wp.p(8)],configurationItem:[Z.wp.flex.column,Z.wp.gap(8)],configurationItemTitle:[Z.wp.fontWeight.bold,Z.wp.flex.row,Z.wp.align.end,Z.wp.gap(4)],configurationActions:[Z.wp.gap(8)],secretRow:[Z.wp.gap(4),{input:{height:22}}],markdownReset:[{"& > div":{"*":{fontSize:"".concat(G.LU.fontSizeSmall," !important"),lineHeight:"".concat(G.LU.lineHeightSmall," !important")},"p, ol":{color:G.LU.foregroundDimmer},a:{color:"".concat(G.LU.foregroundDefault," !important"),textDecoration:"underline"},ol:{marginLeft:G.LU.space16},h4:{marginBottom:0,marginTop:G.LU.space16,color:G.LU.foregroundDefault}}}]}),eA=function(e){var n=e.serviceName,t=e.items,o=e.isConnected,a=e.secrets,s=e.editSecretsAuthzErrorMessage,c=(0,B.A)(),u=(0,l._)((0,i.useState)(new Map(t.map(function(e){return[e.key,""]}))),2),d=u[0],p=u[1];(0,i.useEffect)(function(){p(a)},[a]);var f=(0,C.A)().secrets,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],w=(0,i.useCallback)((0,I._)(function(){var e;return(0,P.YH)(this,function(t){switch(t.label){case 0:g(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,f.addEntries(d)];case 2:return t.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationSaved",service:n}),[3,4];case 3:return e=t.sent(),c.showError(e.message),[3,4];case 4:return g(!1),[2]}})}),[d,c,f,n]),b=(0,l._)((0,i.useState)(!1),2),S=b[0],Y=b[1],A=(0,i.useCallback)((0,I._)(function(){var e,r;return(0,P.YH)(this,function(i){switch(i.label){case 0:g(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(e=f).removeEntries.apply(e,(0,y._)(t.map(function(e){return e.key})))];case 2:return i.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationReset",service:n}),[3,4];case 3:return r=i.sent(),c.showError(r.message),[3,4];case 4:return Y(!1),g(!1),[2]}})}),[t,c,f,n]);return(0,r.FD)(er.S,{css:eY.accordionItemBody,children:[t.map(function(e){var n;return(0,r.FD)(er.S,{css:eY.configurationItem,children:[(0,r.FD)(er.S,{css:eY.configurationItemTitle,children:[e.title,e.required?null:(0,r.Y)(en.EY,{variant:"small",color:"dimmest",multiline:!1,children:"(optional)"})]}),(0,r.Y)(ei.Ay,{css:eY.markdownReset,children:e.description}),(0,r.FD)(er.S,{css:eY.secretRow,row:!0,align:"center",children:[(0,r.Y)(H.Ge,{value:e.key}),(0,r.Y)(H.iJ,{placeholder:e.placeholder,value:null!==(n=d.get(e.key))&&void 0!==n?n:"",canEditDisabledMessage:s,onChange:function(n){p(function(t){var r=new Map(t);return r.set(e.key,n),r})}})]})]},e.key)}),(0,r.FD)(er.S,{css:eY.configurationActions,row:!0,justify:"end",children:[o?(0,r.Y)(q.$n,{text:"Delete",colorway:"red",variant:"outlined",size:"small",onClick:function(){return Y(!0)},loading:m,disabled:void 0!==s}):null,(0,r.Y)(q.$n,{text:"Save",colorway:"primary",size:"small",onClick:w,loading:m,disabled:void 0!==s})]}),(0,r.Y)(H.g1,{keys:t.map(function(e){return e.key}),isOpen:S,onClose:function(){return Y(!1)},onConfirm:function(){return A()},loading:m})]})},eC=(0,j.x)({root:[Z.wp.flex.column,Z.wp.gap(8)],header:[Z.wp.mb(8),Z.wp.p(8),Z.wp.pb(0)],items:[Z.wp.flex.column,Z.wp.gap(8),Z.wp.overflowY("auto"),Z.wp.maxHeight(250),{marginLeft:"-var(".concat(G.LU.space8,")"),marginRight:"-var(".concat(G.LU.space8,")")}],item:[Z.wp.pl(8),Z.wp.width("100%"),Z.wp.flex.column,Z.wp.gap(8),{"&:not(:last-of-type)":[Z.wp.pb(8),{borderBottom:"1px solid ".concat(G.LU.outlineDimmest)}]}],itemHeader:[Z.wp.gap(4),Z.wp.fontWeight.bold],itemCodeRoot:[Z.wp.position.relative,Z.wp.minHeight(52)],itemCode:[Z.wp.font.code,Z.wp.overflowX("auto"),Z.wp.fontSize(12),Z.wp.width("100%"),Z.wp.pr(8),Z.wp.color.foregroundDimmer,{whiteSpace:"pre"}],itemCodeActions:[Z.wp.position.absolute,Z.wp.right(0),Z.wp.top(0),Z.wp.backgroundColor.backgroundDefault,Z.wp.flex.column,Z.wp.align.center,Z.wp.gap(4),Z.wp.pr(4)],askAiContainer:[Z.wp.p(8)]}),ex={JavaScript:{icon:(0,r.Y)(ep.A,{})},Python:{icon:(0,r.Y)(ef.A,{})}},e_=function(e){var n=e.items,t=e.serviceName,o=e.openPane,a=(0,l._)((0,i.useState)("JavaScript"),2),c=a[0],u=a[1],d=(0,z.J)().configs,p=(0,i.useCallback)(function(){return d.some(function(e){return["python2","python3"].includes(e.language)})?"Python":"JavaScript"},[d]);(0,i.useEffect)(function(){u(p())},[p]);var f=(0,W.Hw)(),h=(0,i.useCallback)(function(e){(0,L.flushSync)(function(){o({type:"ghostwriterChat"})});var n=f(function(e){var n=(0,l._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type});(null==n?void 0:n.bindings.type)==="ghostwriterChat"&&n.bindings.setInputText(e)},[o,f]);return(0,r.FD)(er.S,{css:eC.root,children:[(0,r.Y)(er.S,{css:eC.header,row:!0,align:"center",justify:"space-between",children:(0,r.Y)(X.l,{items:Object.entries(ex).map(function(e){var n=(0,l._)(e,2),t=n[0],r=n[1];return(0,T._)((0,s._)({},r),{value:t})}),selectedKey:c,onSelectionChange:function(e){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleLanguageChanged",service:t,language:e}),u(e)},"aria-label":"Select a language",children:function(e){return(0,r.Y)(Q.nh,{id:e.value,label:e.value,icon:e.icon},e.value)}})}),(0,r.Y)(er.S,{css:eC.items,children:n.map(function(e){return(0,r.FD)(er.S,{css:eC.item,children:[(0,r.FD)(er.S,{css:eC.itemHeader,row:!0,align:"center",children:[e.title,(0,r.Y)(J.K0,{tooltipPlacement:"right",colorway:void 0,alt:"Explain this code",onClick:function(){var n=e.code[c];(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleExplained",sample:n,service:t,title:e.title,language:c}),h(["Can you explain this code sample for me?","","```",n,"```"].join("\n"))},children:(0,r.Y)(ed.A,{color:G.LU.tealStronger})})]}),(0,r.FD)(er.S,{css:eC.itemCodeRoot,children:[(0,r.Y)(N.A,{fontSize:12,language:c,code:e.code[c],css:eC.itemCode}),(0,r.Y)(er.S,{css:eC.itemCodeActions,children:(0,r.Y)(K.r,{tooltipPlacement:"left",textToCopy:e.code[c],onCopy:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleCopied",service:t,sample:e.title,language:c})}})})]})]},e.title)})},c),(0,r.Y)(er.S,{css:eC.askAiContainer,children:(0,r.Y)(q.$n,{size:"small",text:"Get started with "+U.BP,iconLeft:(0,r.Y)(eo.A,{}),colorway:void 0,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleStartWithAi",service:t,language:c}),h("How do I use ".concat(t," in ").concat(c,"?"))}})})]})},ek=function(e){var n=e.configurationItems,t=e.codeSampleItems,o=e.title,a=e.description,c=e.openPane,u=e.editSecretsAuthzErrorMessage,d=e.icon,p=e.isConnected,f=(0,l._)((0,i.useState)({configuration:!1,codeSamples:!1}),2),h=f[0],m=f[1],g=(0,C.A)().secrets,w=(0,l._)((0,i.useState)(new Map),2),y=w[0],b=w[1];return(0,i.useEffect)(function(){return g.watch(function(e){b(e)})},[g]),(0,r.Y)(r.FK,{children:(0,r.Y)(eS,{title:o,description:a,icon:d,isConnected:p,editSecretsAuthzErrorMessage:u,onClick:function(){m(function(e){return(0,T._)((0,s._)({},e),{configuration:!0})}),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationOpened",service:o,source:"configureButton"})},onSectionToggle:function(e){m(function(n){var t=!n[e];return t&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configuration"===e?"configurationOpened":"codeSampleOpened",service:o,source:"accordion"}),(0,T._)((0,s._)({},n),(0,F._)({},e,t))})},sections:[{key:"codeSamples",title:"Code samples",content:(0,r.Y)(e_,{serviceName:o,items:t,openPane:c}),isOpen:h.codeSamples},{key:"configuration",title:"Configuration",content:(0,r.Y)(eA,{serviceName:o,items:n,isConnected:p,secrets:y,editSecretsAuthzErrorMessage:u}),isOpen:h.configuration}]})})},eD=t(79437),eE=t(1969),eR=t(95836),eI=t(64492),eF=t(20619),eT=t(75394),eP=t(3559),eL=t(33403),eU=[{tags:["database","storage"],pane:{type:"database"},serviceName:"neon"},{tags:["database","storage","sql"],pane:{type:"neon"},serviceName:"neon"},{tags:["storage","files"],pane:{type:"objectStorage"},serviceName:"objectStorage"},{tags:["authentication"],pane:{type:"replAuth"},serviceName:"replAuth"}],eN=[{title:"OpenAI",description:"OpenAI offers cutting-edge AI models for various applications, including natural language processing and generation. Enhance your projects with state-of-the-art AI capabilities.",tags:["AI","LLM","chat"],icon:(0,r.Y)(eP.A,{}),configurationItems:[{key:"OPENAI_API_KEY",title:"API Key",description:"To get started, you'll need an API key from OpenAI. Visit the [API keys page](https://platform.openai.com/account/api-keys) in your OpenAI account, generate a new key, and paste it below.",placeholder:"sk-",required:!0},{key:"OPENAI_ORG_ID",title:"Organization ID",description:"For accounts associated with multiple organizations, you can specify the [Organization ID](https://platform.openai.com/account/org-settings) to use. This is optional; if not provided, your default organization will be used."}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom openai import OpenAI\n\napi_key = os.environ['OPENAI_API_KEY']\norganization_id = os.environ.get('OPENAI_ORG_ID')  # Optional\n\nclient = OpenAI(api_key=api_key, organization=organization_id)",JavaScript:"import { OpenAI } from 'openai';\n\nconst apiKey = process.env.OPENAI_API_KEY;\nconst organizationId = process.env.OPENAI_ORG_ID;  // Optional\n\nconst openai = new OpenAI({\n  apiKey,\n  organization: organizationId,\n});"}},{title:"Chat creation",code:{Python:'response = client.chat.completions.create(\n    model="gpt-3.5-turbo",\n    messages=[\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "Hello!"}\n    ]\n)\n\nprint(response.choices[0].message.content)',JavaScript:'const response = await openai.chat.completions.create({\n  model: "gpt-3.5-turbo",\n  messages: [\n    {role: "system", content: "You are a helpful assistant."},\n    {role: "user", content: "Hello!"}\n  ],\n});\n\nconsole.log(response.choices[0].message.content);'}},{title:"Image generation",code:{Python:'response = client.images.generate(\n    model="dall-e-3",\n    prompt="A futuristic cityscape with flying cars",\n    size="1024x1024",\n    quality="standard",\n    n=1,\n)\n\nimage_url = response.data[0].url\nprint(f"Generated image URL: {image_url}")',JavaScript:'const response = await openai.images.generate({\n  model: "dall-e-3",\n  prompt: "A futuristic cityscape with flying cars",\n  size: "1024x1024",\n  quality: "standard",\n  n: 1,\n});\n\nconst imageUrl = response.data[0].url;\nconsole.log(`Generated image URL: ${imageUrl}`);'}},{title:"Embedding generation",code:{Python:'response = client.embeddings.create(\n    model="text-embedding-ada-002",\n    input="The quick brown fox jumps over the lazy dog"\n)\nembedding = response.data[0].embedding\nprint(f"Embedding vector (first 5 elements): {embedding[:5]}")',JavaScript:'const response = await openai.embeddings.create({\n  model: "text-embedding-ada-002",\n  input: "The quick brown fox jumps over the lazy dog",\n});\nconst embedding = response.data[0].embedding;\nconsole.log(`Embedding vector (first 5 elements): ${embedding.slice(0, 5)}`);'}}]},{title:"Google AI (Gemini)",description:"Google AI's Gemini model represents the latest in machine learning technology. Integrate this powerful tool into your applications for advanced natural language processing and generation.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.FD)(eR.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("g",{clipPath:"url(#clip0_7378_480)",children:(0,r.Y)("path",{fill:"url(#paint0_radial_7378_480)",d:"M24 12.024A12.783 12.783 0 0 0 12.024 24h-.048A12.782 12.782 0 0 0 0 12.024v-.048A12.782 12.782 0 0 0 11.976 0h.048A12.783 12.783 0 0 0 24 11.976v.048Z"})}),(0,r.FD)("defs",{children:[(0,r.FD)("radialGradient",{id:"paint0_radial_7378_480",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(24.19889 8.18296 -65.55084 193.84876 2.382 9.755)",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{offset:".067",stopColor:"#9168C0"}),(0,r.Y)("stop",{offset:".343",stopColor:"#5684D1"}),(0,r.Y)("stop",{offset:".672",stopColor:"#1BA1E3"})]}),(0,r.Y)("clipPath",{id:"clip0_7378_480",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))},{}),configurationItems:[{key:"GOOGLE_AI_API_KEY",title:"API Key",description:"To use Gemini, you'll need to set up an API key. Go to the [Google AI Studio](https://makersuite.google.com/app/apikey) to create one. Once you have your key, enter it below to start using Gemini in your projects.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport google.generativeai as genai\n\ngenai.configure(api_key=os.environ['GOOGLE_AI_API_KEY'])",JavaScript:'const {\n  GoogleGenerativeAI,\n  HarmCategory,\n  HarmBlockThreshold,\n} = require("@google/generative-ai");\n\nconst genAI = new GoogleGenerativeAI(process.env.GOOGLE_AI_API_KEY);'}},{title:"Chat creation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nchat = model.start_chat()\n\nresponse = chat.send_message(\"Hello, how are you?\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\n\nconst chat = model.startChat({\n  generationConfig: {\n    maxOutputTokens: 100,\n  },\n});\n\nconst result = await chat.sendMessage("Hello, how are you?");\nconst response = result.response;\nconsole.log(response.text());'}},{title:"Text generation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nresponse = model.generate_content(\"Write a short poem about artificial intelligence.\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\nconst result = await model.generateContent("Write a short poem about artificial intelligence.");\nconsole.log(result.response.text());'}},{title:"Image analysis",code:{Python:"from PIL import Image\n\nmodel = genai.GenerativeModel('gemini-pro-vision')\nimg = Image.open('image.jpg')\nresponse = model.generate_content([\"Describe this image:\", img])\nprint(response.text)",JavaScript:'const fs = require(\'fs\');\n\nconst model = genAI.getGenerativeModel({ model: "gemini-pro-vision" });\n\nconst imageParts = [\n  {\n    inlineData: {\n      data: fs.readFileSync("image.jpg", {encoding: \'base64\'}),\n      mimeType: "image/jpeg"\n    }\n  },\n];\n\nconst result = await model.generateContent(["Describe this image:", ...imageParts]);\nconsole.log(result.response.text());'}}]},{title:"Anthropic (Claude)",description:"Anthropic offers safe AI models like Claude, enhancing applications with capabilities for analysis, writing, coding, and problem-solving.",tags:["AI","LLM","chat"],icon:(0,r.Y)(eD.A,{}),configurationItems:[{key:"ANTHROPIC_API_KEY",title:"API Key",description:"[Create an API key](https://console.anthropic.com/account/keys) and paste the key below. If you get an error, you may have reached your Anthropic usage limits. To view your usage, check your [Anthropic usage dashboard](https://console.anthropic.com/usage).",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:'import os\nimport anthropic\n\nclient = anthropic.Anthropic(api_key=os.environ["ANTHROPIC_API_KEY"])',JavaScript:"const Anthropic = require('@anthropic-ai/sdk');\n\nconst anthropic = new Anthropic({\n  apiKey: process.env.ANTHROPIC_API_KEY,\n});"}},{title:"Chat creation",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Hello, Claude!"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Hello, Claude!'}\n  ],\n});\nconsole.log(message.content[0].text);"}},{title:"Streaming response",code:{Python:'with client.messages.stream(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Write a short story about time travel."}\n    ]\n) as stream:\n    for text in stream.text_stream:\n        print(text, end="", flush=True)',JavaScript:"const stream = await anthropic.messages.stream({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Write a short story about time travel.'}\n  ],\n});\n\nfor await (const chunk of stream) {\n  if (chunk.type === 'content_block_delta') {\n    process.stdout.write(chunk.delta.text);\n  }\n}"}},{title:"Content classification",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=100,\n    messages=[\n        {"role": "user", "content": "Classify the sentiment of this text: \'I absolutely love this product!\'"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 100,\n  messages: [\n    {role: 'user', content: \"Classify the sentiment of this text: 'I absolutely love this product!'\"}\n  ],\n});\nconsole.log(message.content[0].text);"}}]},{title:"Perplexity",description:"Perplexity AI provides powerful language models and APIs for various natural language processing tasks. Integrate advanced AI capabilities into your applications with ease.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(eL.A,{}),configurationItems:[{key:"PERPLEXITY_API_KEY",title:"API Key",description:"To use Perplexity's API, you'll need an API key. Sign up for an account on the [Perplexity website](https://www.perplexity.ai/), navigate to your account settings, and generate a new API key. Paste it below.",placeholder:"pplx-",required:!0}],codeSampleItems:[{title:"API Client Initialization",code:{Python:'import os\nimport requests\n\napi_key = os.environ[\'PERPLEXITY_API_KEY\']\nheaders = {\n    "Authorization": f"Bearer {api_key}",\n    "Content-Type": "application/json"\n}',JavaScript:"const apiKey = process.env.PERPLEXITY_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Text Generation",code:{Python:'url = "https://api.perplexity.ai/chat/completions"\ndata = {\n    "model": "sonar-medium-online",\n    "messages": [\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "What is the capital of France?"}\n    ]\n}\n\nresponse = requests.post(url, json=data, headers=headers)\nprint(response.json()[\'choices\'][0][\'message\'][\'content\'])',JavaScript:"const url = 'https://api.perplexity.ai/chat/completions';\nconst data = {\n  model: 'sonar-medium-online',\n  messages: [\n    {role: 'system', content: 'You are a helpful assistant.'},\n    {role: 'user', content: 'What is the capital of France?'}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: 'POST',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);"}}]},{title:"Mistral AI",description:"Mistral AI offers state-of-the-art language models and APIs for a wide range of AI applications. Leverage their powerful models to enhance your projects with advanced natural language processing capabilities.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(function(e){return(0,r.FD)(eR.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("path",{d:"M15 6v4h-2V6h2Zm4-4v4h-2V2h2ZM1 2h2v20H1V2Zm8 12h2v4H9v-4Zm8 0h2v8h-2v-8Z"}),(0,r.Y)("path",{fill:"#F7D046",d:"M19 2h4v4h-4V2ZM3 2h4v4H3V2Z"}),(0,r.Y)("path",{fill:"#F2A73B",d:"M15 10V6h8v4h-8ZM3 10V6h8v4H3Z"}),(0,r.Y)("path",{fill:"#EE792F",d:"M3 14v-4h20v4H3Z"}),(0,r.Y)("path",{fill:"#EB5829",d:"M11 14h4v4h-4v-4Zm8 0h4v4h-4v-4ZM3 14h4v4H3v-4Z"}),(0,r.Y)("path",{fill:"#EA3326",d:"M19 18h4v4h-4v-4ZM3 18h4v4H3v-4Z"})]}))},{}),configurationItems:[{key:"MISTRAL_API_KEY",title:"API Key",description:"To access Mistral AI's services, you need an API key. Visit the [Mistral AI platform](https://console.mistral.ai/), create an account, and generate a new API key. Enter it below.",placeholder:"mis-",required:!0}],codeSampleItems:[{title:"Client Setup",code:{Python:"import os\nfrom mistralai.client import MistralClient\n\napi_key = os.environ['MISTRAL_API_KEY']\nclient = MistralClient(api_key=api_key)",JavaScript:"const apiKey = process.env.MISTRAL_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Chat Completion",code:{Python:'chat_response = client.chat(\n    model="mistral-tiny",\n    messages=[\n        {"role": "user", "content": "What are the main features of Python?"}\n    ]\n)\n\nprint(chat_response.choices[0].message.content)',JavaScript:'const url = \'https://api.mistral.ai/v1/chat/completions\';\nconst data = {\n  model: "mistral-tiny",\n  messages: [\n    {role: "user", content: "What are the main features of Python?"}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);'}},{title:"Embedding Generation",code:{Python:'embed_response = client.embeddings(\n    model="mistral-embed",\n    input=["Hello world", "The quick brown fox jumps over the lazy dog"]\n)\n\nfor embedding in embed_response.data:\n    print(f"Embedding (first 5 dimensions): {embedding.embedding[:5]}")',JavaScript:'const url = \'https://api.mistral.ai/v1/embeddings\';\nconst data = {\n  model: "mistral-embed",\n  input: ["Hello world", "The quick brown fox jumps over the lazy dog"]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nresult.data.forEach((embedding, index) => {\n  console.log(`Embedding ${index + 1} (first 5 dimensions): ${embedding.embedding.slice(0, 5)}`);\n});'}}]},{title:"Google Sheets",description:"Google Sheets API allows you to read, write, and modify Google Sheets. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Spreadsheets","Data"],icon:(0,r.Y)(eI.A,{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Sheets access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Sheets API". Add "Google Docs API" if you\'re also using Google Docs.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Spreadsheet ID\n1. Open the Google Sheet you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/spreadsheets/d/SPREADSHEET_ID/edit#gid=0`\n3. The SPREADSHEET_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Spreadsheet Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Sheet.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/spreadsheets']\n)\n\nsheets_service = build('sheets', 'v4', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/spreadsheets'],\n});\n\nconst sheets = google.sheets({ version: 'v4', auth });"}},{title:"Read from Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B5'\n\nresult = sheets_service.spreadsheets().values().get(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE\n).execute()\n\nvalues = result.get('values', [])\nfor row in values:\n    print(row)",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B5';\n\nconst response = await sheets.spreadsheets.values.get({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n});\n\nconst rows = response.data.values;\nif (rows.length) {\n  rows.forEach(row => {\n    console.log(row);\n  });\n} else {\n  console.log('No data found.');\n}"}},{title:"Write to Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B2'\nVALUES = [\n    ['Name', 'Score'],\n    ['Alice', 95],\n]\n\nresult = sheets_service.spreadsheets().values().update(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE,\n    valueInputOption='USER_ENTERED',\n    body={'values': VALUES}\n).execute()\n\nprint(f\"{result.get('updatedCells')} cells updated.\")",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B2';\nconst VALUES = [\n  ['Name', 'Score'],\n  ['Alice', 95],\n];\n\nconst response = await sheets.spreadsheets.values.update({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n  valueInputOption: 'USER_ENTERED',\n  resource: { values: VALUES },\n});\n\nconsole.log(`${response.data.updatedCells} cells updated.`);"}}]},{title:"Google Docs",description:"Google Docs API allows you to create, read, and modify Google Docs. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Documents","Text Processing"],icon:(0,r.Y)(function(e){return(0,r.FD)(eR.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("path",{fill:"#3086F6",d:"M18.818 24H4.636C3.736 24 3 23.264 3 22.364V1.636C3 .736 3.736 0 4.636 0h9.819l6 6v16.364c0 .9-.737 1.636-1.637 1.636Z"}),(0,r.Y)("path",{fill:"#0C67D6",d:"m14.455 0 6 6h-6V0Z"}),(0,r.Y)("path",{fill:"#FDFFFF",d:"M16.636 10.636H6.818V9.273h9.818v1.363Zm0 1.91H6.818v1.363h9.818v-1.364Zm-2.727 3.272H6.82v1.364h7.09v-1.364Z"})]}))},{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Docs access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Docs API". Add "Google Sheets API" if you\'re also using Google Sheets.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Document ID\n1. Open the Google Doc you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/document/d/DOCUMENT_ID/edit`\n3. The DOCUMENT_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Document Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Doc.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/documents']\n)\n\ndocs_service = build('docs', 'v1', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/documents'],\n});\n\nconst docs = google.docs({ version: 'v1', auth });"}},{title:"Read from Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nresult = docs_service.documents().get(documentId=DOCUMENT_ID).execute()\nprint(f\"The title of the document is: {result.get('title')}\")\n\ncontent = result.get('body').get('content')\nfor element in content:\n    if 'paragraph' in element:\n        for run in element['paragraph']['elements']:\n            if 'textRun' in run:\n                print(run['textRun']['content'])",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst response = await docs.documents.get({\n  documentId: DOCUMENT_ID,\n});\n\nconsole.log(`The title of the document is: ${response.data.title}`);\n\nconst content = response.data.body.content;\ncontent.forEach(element => {\n  if (element.paragraph) {\n    element.paragraph.elements.forEach(run => {\n      if (run.textRun) {\n        console.log(run.textRun.content);\n      }\n    });\n  }\n});"}},{title:"Write to Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nrequests = [\n    {\n        'insertText': {\n            'location': {\n                'index': 1,\n            },\n            'text': 'Hello from the Google Docs API!'\n        }\n    }\n]\n\nresult = docs_service.documents().batchUpdate(\n    documentId=DOCUMENT_ID,\n    body={'requests': requests}\n).execute()\n\nprint(f\"Document updated: {result.get('documentId')}\")",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst requests = [\n  {\n    insertText: {\n      location: {\n        index: 1,\n      },\n      text: 'Hello from the Google Docs API!',\n    },\n  },\n];\n\nconst response = await docs.documents.batchUpdate({\n  documentId: DOCUMENT_ID,\n  requestBody: {\n    requests: requests,\n  },\n});\n\nconsole.log(`Document updated: ${response.data.documentId}`);"}}]},{title:"Slack",description:"Slack is a communication platform for teams to collaborate in real-time. Integrate with Slack to send messages, manage channels, and automate workflows.",tags:["communication","chat"],icon:(0,r.Y)(eF.A,{}),configurationItems:[{key:"SLACK_BOT_TOKEN",title:"Bot Token",description:"[Create a Slack app](https://api.slack.com/apps) and obtain a Bot Token. This token allows your bot to interact with your Slack workspace.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom slack_sdk import WebClient\n\nclient = WebClient(token=os.environ['SLACK_BOT_TOKEN'])",JavaScript:"const { WebClient } = require('@slack/web-api');\n\nconst client = new WebClient(process.env.SLACK_BOT_TOKEN);"}},{title:"Message sending",code:{Python:'try:\n    response = client.chat_postMessage(\n        channel="#general",\n        text="Hello from your bot!"\n    )\n    print(f"Message sent: {response[\'ts\']}")\nexcept Exception as e:\n    print(f"Error sending message: {e}")',JavaScript:"try {\n  const result = await client.chat.postMessage({\n    channel: '#general',\n    text: 'Hello from your bot!',\n  });\n  console.log(`Message sent: ${result.ts}`);\n} catch (error) {\n  console.error(`Error sending message: ${error}`);\n}"}},{title:"File upload",code:{Python:'try:\n    response = client.files_upload_v2(\n        channels="#general",\n        file="path/to/file.txt",\n        title="Sample File",\n        initial_comment="Here\'s a file for your review."\n    )\n    print(f"File uploaded: {response[\'file\'][\'id\']}")\nexcept Exception as e:\n    print(f"Error uploading file: {e}")',JavaScript:"try {\n  const result = await client.files.uploadV2({\n    channels: '#general',\n    file: fs.createReadStream('path/to/file.txt'),\n    title: 'Sample File',\n    initial_comment: \"Here's a file for your review.\",\n  });\n  console.log(`File uploaded: ${result.file.id}`);\n} catch (error) {\n  console.error(`Error uploading file: ${error}`);\n}"}},{title:"Retrieving channel information",code:{Python:"try:\n    response = client.conversations_info(channel=\"C1234567890\")\n    print(f\"Channel name: {response['channel']['name']}\")\n    print(f\"Channel purpose: {response['channel']['purpose']['value']}\")\nexcept Exception as e:\n    print(f\"Error retrieving channel info: {e}\")",JavaScript:"try {\n  const result = await client.conversations.info({\n    channel: 'C1234567890'\n  });\n  console.log(`Channel name: ${result.channel.name}`);\n  console.log(`Channel purpose: ${result.channel.purpose.value}`);\n} catch (error) {\n  console.error(`Error retrieving channel info: ${error}`);\n}"}}]},{title:"Discord",description:"Discord is a communication platform designed for creating communities. Integrate with Discord to send messages, manage servers, and enhance user engagement.",tags:["communication","chat"],icon:(0,r.Y)(eE.A,{}),configurationItems:[{key:"DISCORD_BOT_TOKEN",title:"Bot Token",description:"[Create a Discord application](https://discord.com/developers/applications), add a bot to it, and paste the bot token below. This token allows your bot to interact with Discord servers.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport discord\nfrom discord.ext import commands\n\nintents = discord.Intents.default()\nintents.message_content = True\nbot = commands.Bot(command_prefix='!', intents=intents)",JavaScript:"const { Client, GatewayIntentBits } = require('discord.js');\n\nconst client = new Client({\n  intents: [\n    GatewayIntentBits.Guilds,\n    GatewayIntentBits.GuildMessages,\n    GatewayIntentBits.MessageContent,\n  ],\n});"}},{title:"Bot setup and message handling",code:{Python:"@bot.event\nasync def on_ready():\n    print(f'We have logged in as {bot.user}')\n\n@bot.command()\nasync def hello(ctx):\n    await ctx.send('Hello!')\n\nbot.run(os.environ['DISCORD_BOT_TOKEN'])",JavaScript:"client.once('ready', () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n});\n\nclient.on('messageCreate', async message => {\n  if (message.content === '!hello') {\n    await message.reply('Hello!');\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Slash command",code:{Python:'@bot.tree.command(name="greet", description="Greet a user")\nasync def greet(interaction: discord.Interaction, user: discord.Member):\n    await interaction.response.send_message(f"Hello, {user.mention}!")\n\n@bot.event\nasync def on_ready():\n    await bot.tree.sync()\n    print(f\'We have logged in as {bot.user}\')\n\nbot.run(os.environ[\'DISCORD_BOT_TOKEN\'])',JavaScript:"const { Client, GatewayIntentBits, REST, Routes, SlashCommandBuilder } = require('discord.js');\n\nconst client = new Client({ intents: [GatewayIntentBits.Guilds] });\n\nconst commands = [\n  new SlashCommandBuilder()\n    .setName('greet')\n    .setDescription('Greet a user')\n    .addUserOption(option => option.setName('user').setDescription('The user to greet').setRequired(true)),\n];\n\nclient.once('ready', async () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n\n  const rest = new REST({ version: '10' }).setToken(process.env.DISCORD_BOT_TOKEN);\n  try {\n    await rest.put(Routes.applicationCommands(client.user.id), { body: commands });\n    console.log('Slash commands registered');\n  } catch (error) {\n    console.error(error);\n  }\n});\n\nclient.on('interactionCreate', async interaction => {\n  if (!interaction.isCommand()) return;\n\n  if (interaction.commandName === 'greet') {\n    const user = interaction.options.getUser('user');\n    await interaction.reply(`Hello, ${user}!`);\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Sending embeds",code:{Python:'@bot.command()\nasync def embed(ctx):\n    embed = discord.Embed(title="Example Embed", description="This is an example embed.", color=0x00ff00)\n    embed.add_field(name="Field 1", value="Value 1", inline=False)\n    embed.add_field(name="Field 2", value="Value 2", inline=False)\n    await ctx.send(embed=embed)',JavaScript:"client.on('messageCreate', async message => {\n  if (message.content === '!embed') {\n    const embed = new EmbedBuilder()\n      .setTitle('Example Embed')\n      .setDescription('This is an example embed.')\n      .setColor(0x00ff00)\n      .addFields(\n        { name: 'Field 1', value: 'Value 1' },\n        { name: 'Field 2', value: 'Value 2' }\n      );\n    await message.channel.send({ embeds: [embed] });\n  }\n});"}}]},{title:"Stripe",description:"Stripe is a payment processing platform that allows businesses to accept online payments. Integrate with Stripe to manage transactions, subscriptions, and billing.",tags:["payments"],icon:(0,r.Y)(eT.A,{}),configurationItems:[{key:"STRIPE_SECRET_KEY",title:"Secret Key",description:"[Create a Stripe account](https://dashboard.stripe.com/register) and obtain your Secret Key from the [API keys page](https://dashboard.stripe.com/apikeys). This key allows access to your Stripe account for processing payments.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport stripe\n\nstripe.api_key = os.environ['STRIPE_SECRET_KEY']",JavaScript:"const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);"}},{title:"Create a payment intent",code:{Python:"try:\n    intent = stripe.PaymentIntent.create(\n        amount=2000,  # Amount in cents\n        currency='usd',\n        payment_method_types=['card'],\n    )\n    print(f\"PaymentIntent created: {intent.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating PaymentIntent: {e}\")",JavaScript:"try {\n  const paymentIntent = await stripe.paymentIntents.create({\n    amount: 2000, // Amount in cents\n    currency: 'usd',\n    payment_method_types: ['card'],\n  });\n  console.log(`PaymentIntent created: ${paymentIntent.id}`);\n} catch (error) {\n  console.error(`Error creating PaymentIntent: ${error.message}`);\n}"}},{title:"Create a customer",code:{Python:"try:\n    customer = stripe.Customer.create(\n        email='customer@example.com',\n        name='John Doe',\n        description='Test customer'\n    )\n    print(f\"Customer created: {customer.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating customer: {e}\")",JavaScript:"try {\n  const customer = await stripe.customers.create({\n    email: 'customer@example.com',\n    name: 'John Doe',\n    description: 'Test customer'\n  });\n  console.log(`Customer created: ${customer.id}`);\n} catch (error) {\n  console.error(`Error creating customer: ${error.message}`);\n}"}},{title:"Create a subscription",code:{Python:"try:\n    subscription = stripe.Subscription.create(\n        customer='cus_1234567890',\n        items=[{'price': 'price_1234567890'}]\n    )\n    print(f\"Subscription created: {subscription.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating subscription: {e}\")",JavaScript:"try {\n  const subscription = await stripe.subscriptions.create({\n    customer: 'cus_1234567890',\n    items: [{ price: 'price_1234567890' }]\n  });\n  console.log(`Subscription created: ${subscription.id}`);\n} catch (error) {\n  console.error(`Error creating subscription: ${error.message}`);\n}"}}]},{title:"HubSpot",description:"HubSpot provides a comprehensive CRM platform with powerful API capabilities. Integrate HubSpot's features into your applications to manage contacts, deals, marketing campaigns, and more using secure private apps.",tags:["CRM","Marketing","API"],icon:(0,r.Y)(function(e){return(0,r.Y)(eR.A,(0,T._)((0,s._)({},e),{children:(0,r.Y)("path",{fill:"#FF7A59",d:"M12.478 10.13a5.463 5.463 0 0 0-1.718 3.984 5.45 5.45 0 0 0 1.095 3.285L9.77 19.496a1.72 1.72 0 0 0-.59-.105 1.694 1.694 0 0 0-1.697 1.702A1.685 1.685 0 0 0 9.18 22.78c.455 0 .88-.164 1.205-.488a1.692 1.692 0 0 0 .417-1.71l2.106-2.114a5.477 5.477 0 0 0 8.814-4.35 5.475 5.475 0 0 0-4.641-5.42V6.103a1.924 1.924 0 0 0 1.188-1.807c0-1.099-.88-2.017-1.98-2.017-1.099 0-1.967.918-1.967 2.017 0 .805.451 1.495 1.188 1.807v2.577a5.45 5.45 0 0 0-1.798.573c-1.162-.88-4.948-3.61-7.113-5.256.05-.185.084-.379.084-.58 0-1.214-.99-2.2-2.207-2.2a2.2 2.2 0 0 0 0 4.402 2.2 2.2 0 0 0 1.129-.32l6.873 4.83Zm3.77 6.89a2.906 2.906 0 1 1 0-5.813 2.906 2.906 0 0 1 0 5.813Z"})}))},{}),configurationItems:[{key:"HUBSPOT_ACCESS_TOKEN",title:"Access Token",description:"To get started, you'll need to create a private app in HubSpot. Go to Settings > Account Setup > Integrations > Private Apps. Create a new private app, select the necessary scopes, and generate your access token. Paste the token below.",placeholder:"pat-na1-----",required:!0}],codeSampleItems:[{title:"Authentication setup",code:{Python:"import os\nfrom hubspot import HubSpot\n\naccess_token = os.environ['HUBSPOT_ACCESS_TOKEN']\nclient = HubSpot(access_token=access_token)",JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });"}},{title:"Fetch contacts",code:{Python:'from hubspot import HubSpot\n\naccess_token = os.environ[\'HUBSPOT_ACCESS_TOKEN\']\nclient = HubSpot(access_token=access_token)\n\ndef get_all_contacts():\n    all_contacts = []\n    after = None\n    while True:\n        contacts_page = client.crm.contacts.basic_api.get_page(\n            limit=100,\n            after=after,\n            properties=["firstname", "lastname", "email"]\n        )\n        all_contacts.extend(contacts_page.results)\n        if not contacts_page.paging:\n            break\n        after = contacts_page.paging.next.after\n    return all_contacts\n\ncontacts = get_all_contacts()\nfor contact in contacts:\n    print(f"Name: {contact.properties[\'firstname\']} {contact.properties[\'lastname\']}")\n    print(f"Email: {contact.properties[\'email\']}")\n    print("---")',JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });\n\nasync function getAllContacts() {\n  const allContacts = [];\n  let after = undefined;\n  let hasMore = true;\n\n  while (hasMore) {\n    const apiResponse = await hubspotClient.crm.contacts.basicApi.getPage(\n      100,\n      after,\n      ['firstname', 'lastname', 'email']\n    );\n\n    allContacts.push(...apiResponse.results);\n\n    hasMore = !!apiResponse.paging;\n    after = hasMore ? apiResponse.paging.next.after : undefined;\n  }\n\n  return allContacts;\n}\n\ngetAllContacts()\n  .then(contacts => {\n    contacts.forEach(contact => {\n      console.log(`Name: ${contact.properties.firstname} ${contact.properties.lastname}`);\n      console.log(`Email: ${contact.properties.email}`);\n      console.log('---');\n    });\n  })\n  .catch(err => console.error('Error: ', err));"}}]}],eO=t(19346),eM=t(12219),eB=(0,j.x)({root:[Z.wp.px(8),Z.wp.flex.column,Z.wp.gap(12)],description:[Z.wp.flex.column,Z.wp.gap(4)],serviceList:[Z.wp.flex.column,Z.wp.gap(16),Z.wp.pb(8)],linkButton:[Z.wp.reset.button,Z.wp.linkStyle]});function eH(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,eO.Vv)(),s=a.getDescription,c=a.Icon,u=a.getTitle,d=R(),p=(0,C.A)().secrets,f=(0,l._)((0,i.useState)(new Map),2),h=f[0],m=f[1];(0,i.useEffect)(function(){return p.watch(function(e){m(e)})},[p]);var g=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!h.get(e.key)})},[h]),w=(0,i.useMemo)(function(){return eN.filter(function(e){return g(e.configurationItems)})},[g]),b=(0,i.useMemo)(function(){return eU.filter(function(e){return"connected"===d[e.serviceName]})},[d]),x=(0,i.useMemo)(function(){return(0,y._)(w).concat((0,y._)(b))},[w,b]),_=(0,i.useMemo)(function(){return new Y.Rk(x,{fuzzy:!1,selector:function(e){return"pane"in e?"".concat(u(e.pane)," ").concat(s(e.pane)," ").concat(e.tags.join(" ")):"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[x,s,u]),k=(0,i.useMemo)(function(){return t?_.find(t).map(function(e){return e.item}):x},[x,_,t]);return(0,r.FD)(er.S,{css:eB.root,children:[(0,r.Y)(en.EY,{variant:"subheadBig",children:"Connected Services"}),(0,r.Y)(er.S,{css:eB.description,children:(0,r.FD)(en.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your Repl to a variety of Replit's services and third-party services using"," ",(0,r.Y)("button",{css:eB.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:A.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:eB.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]})]})}),k.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(er.S,{tag:"ul",css:eB.serviceList,children:k.map(function(e){if("pane"in e){var t,i=u(e.pane);return(0,r.Y)(eS,{title:i,description:null!==(t=s(e.pane))&&void 0!==t?t:"",icon:(0,r.Y)(c,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:!0,configIcon:(0,r.Y)(eM.A,{}),configIconPosition:"right"},i)}if("title"in e)return(0,r.Y)(ek,{title:e.title,icon:e.icon,isConnected:!0,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(en.EY,{variant:"subheadDefault",children:"No matching services."})]})}var ez=t(55195),eW=t(63679),eG=t(41595),eV=t(11822),ej=t(28354),eZ=t(76985),eq=t(50656),eK=t(42022),e$=t(39736),eJ=(0,j.x)({root:[Z.wp.reset.button,Z.wp.overflow("hidden"),Z.wp.flex.row,Z.wp.align.center,Z.wp.justify.spaceBetween,Z.wp.p(8),Z.wp.gap(4),Z.wp.backgroundColor.backgroundHigher,Z.wp.border({color:G.LU.outlineDimmer,width:1}),Z.wp.borderRadius(),Z.wp.cursor.pointer,{"&:hover":{backgroundColor:G.LU.backgroundHighest,borderColor:G.LU.outlineDefault}}],title:[Z.wp.flex.row,Z.wp.align.center,Z.wp.gap(4)],content:[Z.wp.flex.column,Z.wp.gap(4)]}),eQ=function(e){var n=e.icon,t=e.title,i=e.description,o=e.onClick;return(0,r.FD)(er.S,{css:eJ.root,tag:"button",onClick:o,tabIndex:0,children:[(0,r.FD)(er.S,{css:eJ.content,children:[(0,r.FD)(en.EY,{variant:"subheadDefault",css:eJ.title,children:[(0,r.Y)(eK.Vx.Provider,{value:{size:16},children:n}),t]}),(0,r.Y)(en.EY,{variant:"small",color:"dimmer",children:i})]}),(0,r.Y)(eq.A,{})]})},eX=(0,j.x)({root:[Z.wp.flex.column,Z.wp.gap(8)],actions:[Z.wp.gap(8)]}),e0=function(e){var n,t=e.isOpen,o=e.setIsOpen,a=(0,m.A)(),c=(0,eG.i)(),u=(0,l._)((0,i.useState)(!1),2),d=u[0],p=u[1],f=(0,l._)((0,i.useState)({freeform:""}),2),h=f[0],g=f[1],w=(0,i.useId)(),y=!!h.freeform;return(0,i.useEffect)(function(){t||g({freeform:""})},[t]),(0,r.Y)(eZ.a,{isOpen:t,onRequestClose:function(){return o(!1)},children:(0,r.FD)(eV.lV,{onSubmit:(n=(0,I._)(function(e){var n;return(0,P.YH)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),!y)return[2];p(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"feedbackSubmitted",freeform:h.freeform}),[4,fetch("https://integrations-feedback-bot.replit.app/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:h.freeform,replId:a,username:null==c?void 0:c.username})})];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),ez.Cp(n),[3,4];case 4:return p(!1),o(!1),[2]}})}),function(e){return n.apply(this,arguments)}),css:eX.root,children:[(0,r.Y)(en.Y9,{variant:"headerDefault",level:2,children:"Integrations Feedback"}),(0,r.Y)(en.EY,{variant:"small",children:"Help us prioritize the services you want to use most in your Apps."}),(0,r.Y)(ej.ov,{rows:3,id:"".concat(w,"-freeform"),value:h.freeform,onChange:function(e){return g(function(n){return(0,T._)((0,s._)({},n),{freeform:e.target.value})})}}),(0,r.FD)(er.S,{css:eX.actions,justify:"end",row:!0,children:[(0,r.Y)(q.$n,{text:"Cancel",loading:d,onClick:function(){return o(!1)}}),(0,r.Y)(q.$n,{loading:d,disabled:!y,type:"submit",text:"Submit feedback",colorway:"primary"})]})]})})},e1=function(e){var n=e.onOpenFeedback;return(0,r.Y)(eQ,{icon:(0,r.Y)(e$.A,{}),title:"Don't see what you're looking for?",description:"Tell us what we're missing.",onClick:function(){return n()}})},e2=(0,j.x)({root:[Z.wp.px(8),Z.wp.flex.column,Z.wp.gap(12)],description:[Z.wp.flex.column,Z.wp.gap(4)],serviceList:[Z.wp.flex.column,Z.wp.gap(16),Z.wp.pb(8)],linkButton:[Z.wp.reset.button,Z.wp.linkStyle]});function e5(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,eW._P)({controlName:"flag-integrations-pane-feedback"}),s=(0,l._)((0,i.useState)(!1),2),c=s[0],u=s[1],d=(0,C.A)().secrets,p=(0,l._)((0,i.useState)(new Map),2),f=p[0],h=p[1];(0,i.useEffect)(function(){return d.watch(function(e){h(e)})},[d]);var m=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!f.get(e.key)})},[f]),g=(0,i.useMemo)(function(){return new Y.Rk(eN,{fuzzy:!1,selector:function(e){return"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[]),w=(0,i.useMemo)(function(){return t?g.find(t).map(function(e){return e.item}):eN},[g,t]);return(0,r.FD)(er.S,{css:e2.root,children:[(0,r.Y)(en.EY,{variant:"subheadBig",children:"External Services"}),(0,r.Y)(er.S,{css:e2.description,children:(0,r.FD)(en.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your App to a variety of third-party services using"," ",(0,r.Y)("button",{css:e2.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:A.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:e2.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]}),a&&w.length>0?(0,r.FD)("div",{children:["Don't see what you're looking for?"," ",(0,r.Y)("button",{css:e2.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"feedbackOpened",source:"description"}),u(!0)},children:"Send us feedback"}),"."]}):null]})}),w.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(er.S,{css:e2.serviceList,children:w.map(function(e){return(0,r.Y)(ek,{title:e.title,icon:e.icon,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,isConnected:m(e.configurationItems),editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(en.EY,{variant:"subheadDefault",children:"No matching services."}),a&&0===w.length?(0,r.Y)(e1,{onOpenFeedback:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"feedbackOpened",source:"card"}),u(!0)}}):null,(0,r.Y)(e0,{isOpen:c,setIsOpen:u})]})}var e4=t(82112),e3=(0,j.x)({root:[Z.wp.px(8),Z.wp.pb(8),Z.wp.flex.column,Z.wp.gap(12)]});function e8(e){var n=e.openPane,t=e.query,o=(0,eO.Vv)(),a=o.getDescription,l=o.Icon,s=o.getTitle,c=R(),u=(0,i.useMemo)(function(){return new Y.Rk(eU,{fuzzy:!1,selector:function(e){return"".concat(s(e.pane)," ").concat(a(e.pane)," ").concat(e.tags.join(" "))}})},[a,s]),d=(0,i.useMemo)(function(){return t?u.find(t).map(function(e){return e.item}):eU},[u,t]);return(0,r.FD)(er.S,{css:e3.root,children:[(0,r.Y)(en.EY,{variant:"subheadBig",children:"Replit Services"}),(0,r.Y)(en.EY,{variant:"text",color:"dimmer",children:"Connect to Replit's storage and auth services."}),d.length>0?null:(0,r.Y)(en.EY,{variant:"subheadDefault",children:"No matching services."}),eU.map(function(e){var t,i=s(e.pane);return d.includes(e)&&i!==e4.v?(0,r.Y)(eS,{title:i,description:null!==(t=a(e.pane))&&void 0!==t?t:"",icon:(0,r.Y)(l,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:"connected"===c[e.serviceName],configIcon:(0,r.Y)(eM.A,{}),configIconPosition:"right"},i):null})]})}var e7=t(52757),e6=t(24239),e9=t(69929),ne=t(74894),nn=t(85213),nt=t(75897),nr=t(44273),ni=(0,e7.AH)([Z.wp.maxWidth(600),Z.wp.width("100%"),{alignSelf:"center"}]),no=(0,j.x)({root:[Z.wp.width("100%"),Z.wp.overflowY("auto"),Z.wp.flex.column,Z.wp.flex.grow(1),Z.wp.height("100%"),Z.wp.width("100%"),{margin:"0 auto"}],header:[ni,Z.wp.backgroundColor.backgroundDefault,Z.wp.flex.growAndShrink(0),Z.wp.p(8),Z.wp.flex.row,Z.wp.gap(12),Z.wp.position.sticky,Z.wp.top(0),Z.wp.zIndex(1),{alignSelf:"center","& > div:first-child":{flexGrow:1}}],content:[Z.wp.flex.growAndShrink(1),Z.wp.width("100%"),Z.wp.gap(24),Z.wp.pb(8),ni]});function na(e){var n,t,o,a=e.openPane,c=(0,l._)((0,i.useState)(null),2),u=c[0],p=c[1],y=(0,l._)((0,i.useState)(""),2),b=y[0],S=y[1],Y=(0,m.A)(),A=(0,w.A)("integrations-pane","integrations-toast").dismiss,C=(n={variables:{replId:Y}},t=(0,s._)({},f,n),d.I(h,t)).data,x=(null==C?void 0:C.getRepl.__typename)==="Repl"?C.getRepl.authorizations.editSecrets:void 0,_=(null==x?void 0:x.isAuthorized)===!0?void 0:null!==(o=null==x?void 0:x.message)&&void 0!==o?o:"Checking Authorizations";return(0,i.useEffect)(function(){A()},[A]),(0,g.M)(v.AZ.INTEGRATIONS_PANE_USED,{action:"viewed"}),(0,r.Y)(E,{children:(0,r.FD)(er.S,{css:no.root,children:[(0,r.FD)(er.S,{css:no.header,children:[(0,r.Y)(e9.I,{placeholder:"Search for a service...",value:b,onChange:function(e){return S(e.target.value)},onBlur:function(){b&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"searchUsed",query:b})},onClear:function(){return S("")}}),(0,r.FD)(e6.e2,{name:"integrations-category",value:u,onChange:p,row:!0,children:[(0,r.Y)(e6.$O,{id:"all",value:null,text:"All",icon:(0,r.Y)(nt.A,{})}),(0,r.Y)(e6.$O,{id:"connected",value:"connected",text:"Connected",icon:(0,r.Y)(nn.A,{})}),(0,r.Y)(e6.$O,{id:"replit",value:"replit",text:"Replit",icon:(0,r.Y)(nr.A,{})}),(0,r.Y)(e6.$O,{id:"external",value:"external",text:"External",icon:(0,r.Y)(ne.A,{})})]})]}),(0,r.FD)(er.S,{css:no.content,children:[u&&"connected"!==u?null:(0,r.Y)(eH,{query:b,openPane:a,editSecretsAuthzErrorMessage:_}),u&&"replit"!==u?null:(0,r.Y)(e8,{query:b,openPane:a}),u&&"external"!==u?null:(0,r.Y)(e5,{query:b,openPane:a,editSecretsAuthzErrorMessage:_})]})]})})}var nl=t(1763),ns=o.ZU.Object({type:o.ZU.Literal("integrations")}),nc={Content:function(e){var n=e.options.performPaneOperation,t=(0,i.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:e})},[n]);return(0,r.Y)(na,{openPane:t})},Icon:function(e){var n=e.size;return(0,r.Y)(nl.A,{size:n})},getTitle:function(){return"Integrations"},description:"Connect to Replit-native and external services",category:eO.bY.CloudServices,decode:function(e){return a.WT.Decode(ns,e)}}},37159:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(40174),i=t(49711),o=r.ZU.Object({type:r.ZU.Literal("preferences")}),a=function(e){return i.WT.Decode(o,e)}},70299:(e,n,t)=>{"use strict";t.d(n,{B:()=>nE,a:()=>nF});var r,i=t(13454),o=t(66622),a=t(5482),l=t(94086),s=t(30758),c=t(40174),u=t(49711),d=t(51439),p=t(82436),f=t(29665),h=t(24481),m=t(80062),g=t(72275),v=t(20837),w=t(43952),y=t(27189),b=t(51297),S=t(16483),Y=t(62906),A=t(29581),C=t(14349),x=t(68279),_=t(99655),k=t(21374),D=t(29835),E=t(84504),R=t(4723),I=t(72412),F=t(74603),T=t(21177),P=t(54867),L=t(34805),U=t(23033),N=t(52186),O=t(65599);function M(e){var n,t,r,i,a,c,u=e.startTime,d=e.endTime,p=(t=!d,i=(r=(0,o._)((0,s.useState)(function(){return Date.now()}),2))[0],a=r[1],(0,s.useEffect)(function(){if(t){var e=setInterval(function(){a(Date.now())},100);return function(){clearInterval(e)}}},[t]),i);u&&d?c=d-u:d||(c=p-u);var f=c?(0,l.Y)(O.m_,{tooltip:"".concat(Math.round(c).toLocaleString(),"ms"),children:(n=c)<1e3?"".concat(Math.floor(n),"ms"):n<6e4?"".concat(Math.floor(n/1e3),"s"):"".concat(Math.floor(n/6e4),"m")}):null,h=(0,l.Y)(N.Dc,{live:!0,date:u,textVariant:"small",textColor:"dimmer",textTransform:"first-letter-capitalized"});return(0,l.Y)(l.FK,{children:f?(0,l.FD)(l.FK,{children:[f,B,h]}):h})}var B="\xa0\xa0",H=t(24955),z=t(10168),W=t(32842),G=t(40172),V=t(95235),j=t(98541),Z=t(40889),q=t(8367),K=t(16021),$=t(29048),J=t(50656),Q=t(47650),X=t(47177),ee=t(32401),en=t(68753);function et(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var er=(0,z.x)({outputBlockMetadataWrapper:[{containerType:"size"},W.wp.pl(4),W.wp.pr(8),W.wp.rowWithGap(4),W.wp.align.center,W.wp.justify.spaceBetween,W.wp.height(28),W.wp.backgroundColor.backgroundDefault,W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),W.wp.position.sticky,W.wp.top(0),W.wp.zIndex(1)],outputBlockMetadataWrapperLeft:[W.wp.flex.shrink(1)],outputBlockMetadataWrapperRight:[],outputMetadataTooltip:[W.wp.pl(4),W.wp.pr(4)],executionPill:[W.wp.flex.shrink(0),W.wp.display.flex,{"@container (max-width: 120px)":[W.wp.display.none]}],lastLineTextWrapper:[W.wp.flex.shrink(1)],lastLineText:[W.wp.display.block,W.wp.maxWidth("100%"),W.wp.overflow("hidden"),W.wp.font.code,W.wp.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],askAIButton:[W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.m(0),{"@container (max-width: 120px)":[W.wp.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[W.wp.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 420px)":{padding:"0 4px","& > span":[W.wp.display.none]}}],dateText:[W.wp.flex.row,W.wp.align.center,W.wp.textAlign.right,W.wp.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[W.wp.overflow("hidden"),W.wp.width(155),W.wp.flex.shrink(0),{"@container (max-width: 480px)":[W.wp.display.none]}],verticalDivider:[W.wp.mx(6),{width:1,height:28,background:H.LU.backgroundHigher}],portInfoDomain:[W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.m(0),{"@container (max-width: 400px)":W.wp.display.none}],portInfoPorts:[W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.m(0),{"@container (max-width: 320px)":W.wp.display.none}],portTooltipHeader:[W.wp.color.foregroundDimmer,W.wp.fontWeight.normal,W.wp.px(2),W.wp.pb(2)],portTooltipColumnLeft:[W.wp.textAlign.right],portTooltipColumnMiddle:[W.wp.textAlign.center,W.wp.px(4)],portInfoText:[W.wp.mr(0)]}),ei=[er.askAIButton,er.aiButtonWithoutPorts],eo=[er.askAIButton,er.aiButtonWithPorts],ea=(r={},(0,g._)(r,E._B.DEBUGGER,"debugger"),(0,g._)(r,E._B.PACKAGER,"packager"),(0,g._)(r,E._B.UNIT_TEST,"tests"),(0,g._)(r,E._B.EXECUTION,"run"),(0,g._)(r,E._B.PORT_INFO,"port"),(0,g._)(r,E._B.FORMATTER,"formatter"),(0,g._)(r,E._B.SAVE,"save"),r);function el(e){var n=e.onClick,t=e.showingPorts;return(0,l.FD)(q.S,{css:t?eo:ei,children:[(0,l.Y)(Z.EY,{color:"dimmer",children:(0,l.Y)(G.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.Y)(ee.A,{}),text:"Ask ".concat(d.BP),onClick:void 0===n?function(){}:n})}),(0,l.Y)(q.S,{css:er.verticalDivider})]})}function es(e){var n=e.openedPorts;return(0,l.Y)(q.S,{children:(0,l.FD)("table",{children:[(0,l.FD)("tr",{children:[(0,l.Y)("th",{css:er.portTooltipHeader,children:"Internal"}),(0,l.Y)("th",{}),(0,l.Y)("th",{css:er.portTooltipHeader,children:"External"})]}),(0,l.Y)("tbody",{children:n.map(function(e){var n=e.configuration,t=!0,r=null;switch(n.type){case U.gH.FORWARDED:t=!0,r=":".concat(n.externalPort);break;case U.gH.INTERNAL_ONLY:t=!1,r=null;break;case U.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case U.gH.MISCONFIGURED:case U.gH.CONFIG_MISSING:t=!0,r=(0,l.Y)(en.A,{})}return(0,l.FD)("tr",{children:[(0,l.FD)("td",{css:er.portTooltipColumnLeft,children:[":",n.localPort]}),(0,l.Y)("td",{css:er.portTooltipColumnMiddle,children:t?"":null}),(0,l.Y)("td",{children:r})]},n.localPort)})})]})})}function ec(e){var n=e.openPane,t=e.openedPorts,r=void 0!==t&&t.length>0,i=r?"{...}.replit.dev":"",o=(0,s.useMemo)(function(){return r?1===t.length?":".concat(t[0].configuration.localPort):"".concat(t.length," ").concat((0,L.A)("port",t.length)):""},[r,t]),a=(0,s.useCallback)(function(){n({type:"webview",data:{ports:r?{type:"local",port:t[0].configuration.localPort}:void 0}},!0)},[r,n,t]),c=(0,s.useCallback)(function(){n({type:"networking"},!0)},[n]);return r?(0,l.FD)(l.FK,{children:[(0,l.FD)(q.S,{css:er.portInfoDomain,children:[(0,l.Y)(Z.EY,{color:"dimmer",css:er.portInfoText,children:(0,l.Y)(O.m_,{tooltip:"Open Webview",children:(0,l.Y)(G.$n,{size:"small",variant:"underlinedOnHover",text:i,onClick:a})})}),(0,l.Y)(q.S,{css:er.verticalDivider})]}),(0,l.FD)(q.S,{css:er.portInfoPorts,children:[(0,l.Y)(Z.EY,{color:"dimmer",css:er.portInfoText,children:(0,l.Y)(O.m_,{tooltip:(0,l.Y)(es,{openedPorts:t}),children:(0,l.Y)(G.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.Y)(Q.A,{color:H.LU.accentPositiveStronger}),text:o,onClick:c})})}),(0,l.Y)(q.S,{css:er.verticalDivider})]})]}):null}function eu(e){var n=e.isDone,t=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,s=void 0===a?H.LU.accentPositiveDefault:a,c=e.startTime,u=e.endTime,d=e.openPane,p=e.isCollapsed,f=e.setIsCollapsed,h=e.lastMeaningfullLine,m=e.openedPorts,g=e.onAiChatClick;return(0,l.FD)(q.S,{css:er.outputBlockMetadataWrapper,onDoubleClick:function(){return f(!p)},children:[(0,l.FD)(q.S,{css:er.outputBlockMetadataWrapperLeft,row:!0,gap:4,align:"center",onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(V.K0,{alt:p?"Expand":"Collapse",onClick:function(){return f(!p)},children:p?(0,l.Y)(J.A,{}):(0,l.Y)($.A,{})}),(0,l.Y)(j.a,{color:"grey",text:et(i),css:er.executionPill}),(0,l.Y)(q.S,{css:er.lastLineTextWrapper,children:p?(0,l.Y)(Z.EY,{css:er.lastLineText,variant:"small",children:h}):null})]}),(0,l.FD)(q.S,{row:!0,gap:4,align:"center",onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(el,{showingPorts:!!m&&m.length>0,onClick:g}),(0,l.Y)(ec,{openPane:d,openedPorts:m}),(0,l.FD)(q.S,{css:er.dateContainer,row:!0,justify:"space-between",children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:er.dateText,children:(0,l.Y)(M,{startTime:c,endTime:u})}),(0,l.Y)(q.S,{css:er.verticalDivider})]}),(0,l.Y)(q.S,{css:er.outputMetadataTooltip,children:n?(0,l.Y)(O.m_,{tooltip:r,children:void 0!==t?(0,l.Y)(en.A,{}):(0,l.Y)(K.A,{})}):(0,l.Y)(O.m_,{tooltip:void 0===o?"Running...":o,children:(0,l.Y)(X.A,{color:s})})})]})]})}function ed(e){var n,t=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.startTime,a=e.endTime,s=e.localStartTime,c=e.localEndTime,u=e.isDone,d=e.data,p=e.error,f=e.openedPorts,h=e.onAiChatClick,m=ef(d.onMessage),g="Finished";return void 0!==p&&(g=void 0!==p?et(p):"Finished with error"),(0,l.Y)(eu,{isDone:u,error:p,finishedTooltipText:g,executionPillText:null!==(n=d.executionMode)&&void 0!==n?n:"unknown",startTime:null!=o?o:s,endTime:u?null!=a?a:c:void 0,lastMeaningfullLine:m,openPane:i,isCollapsed:t,setIsCollapsed:r,openedPorts:f,onAiChatClick:h})}function ep(e){var n=e.isCollapsed,t=e.setIsCollapsed,r=e.openPane,i=e.localStartTime,o=e.localEndTime,a=e.isDone,s=e.type,c=e.error,u=e.data,d=e.onAiChatClick,p=ef(u.onMessage),f=ea[s],h=c?(0,l.FD)(Z.EY,{multiline:!0,children:[et(ea[s])," error",(0,l.Y)("br",{}),c]}):"Finished",m=H.LU.accentPositiveDefault,g="Running...";if(s===E._B.DEBUGGER){var v=u.debugState;m="paused"===v?H.LU.yellowDefault:H.LU.accentPositiveDefault,g="paused"===v?"Paused":"Running..."}return(0,l.Y)(eu,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:a,finishedTooltipText:h,executionPillText:f,startTime:i,endTime:a?o:void 0,circleColor:m,runningTooltipText:g,lastMeaningfullLine:p,error:c,onAiChatClick:d})}function ef(e){var n=(0,o._)((0,s.useState)(""),2),t=n[0],r=n[1];return(0,s.useEffect)(function(){return e(function(e){var n,t=null===(n=(0,F.A)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===n?void 0:n.trim();t&&r(t)})}),t}function eh(e){var n,t,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.isDone,c=e.type,u=e.data,d=e.error,p=e.localStartTime,f=e.localEndTime,h=e.startTime,m=e.endTime,g=e.openedPorts,v=e.openAIWithMessage,w=(n=u.onMessage,t=(0,s.useRef)(""),(0,s.useEffect)(function(){return n(function(e){var n=(0,F.A)(e);t.current=(t.current+n).slice(-T.ZJ)})},[n]),t.current),y=function(){w&&(null==v||v((0,T.kq)(w)))};switch(c){case E._B.EXECUTION:return(0,l.Y)(ed,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,startTime:h,endTime:m,localStartTime:p,localEndTime:f,data:u,error:d,openedPorts:g,onAiChatClick:y});case E._B.DEBUGGER:case E._B.PACKAGER:case E._B.UNIT_TEST:case E._B.FORMATTER:case E._B.SAVE:return(0,l.Y)(ep,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,localStartTime:p,localEndTime:f,data:u,error:d,openedPorts:g,onAiChatClick:y});default:(0,P.A)(c)}}var em=t(63679),eg=t(27382),ev=t(87590),ew=t(83085),ey=t(20387),eb=t(25877),eS=t(86955),eY=t(46086),eA=(0,z.x)({emptyStateWrapper:[W.wp.p(8),W.wp.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[W.wp.backgroundColor.accentPositiveDimmest,W.wp.color.accentPositiveStrongest,W.wp.align.center,W.wp.borderRadius(8),W.wp.py(2),W.wp.px(6),W.wp.mx(4),W.wp.cursor.pointer,{"&:hover":[W.wp.color.white,W.wp.backgroundColor.accentPositiveDefault]}]}),eC=(0,z.x)({root:[W.wp.p(8),W.wp.colWithGap(8)],header:[W.wp.pt(4),W.wp.pb(8)]});function ex(e){var n=e.onClick;return(0,l.Y)(q.S,{tag:"span",style:{display:"inline-block"},children:(0,l.FD)(q.S,{tag:"button",onClick:n,css:eA.simpleRunButtonWrapper,row:!0,gap:6,children:[(0,l.Y)(eS.A,{size:12}),(0,l.Y)(Z.EY,{children:"Run"})]})})}function e_(e){var n,t=e.runner,r=e.openPane,i=(0,o._)((0,s.useState)(function(){return t.getRunState()}),2),a=i[0],c=i[1],u=(0,ey.g3)(),d=!!(null==u?void 0:u.workflowId),f=function(){if(null==u?void 0:u.run){u.run(E.QG.RUN_BUTTON_CLICKED),(0,p.u4)(p.AZ.WORKFLOW_RAN,{source:"console"});return}var e=t.getRunState();(e===E.ll.IDLE||e===E.ll.STOPPING)&&t.run(E.QG.RUN_BUTTON_CLICKED)},h=(0,em._P)({controlName:"flag-work-flows"});return((0,s.useEffect)(function(){var e=t.onStateChanged(function(e){c(e)});return function(){return e()}},[t]),a===E.ll.OFFLINE)?(0,l.Y)(q.S,{css:eA.emptyStateWrapper,children:"The Repl is booting..."}):a===E.ll.RUNNING||a===E.ll.BEFORE_RUN?(0,l.Y)(q.S,{css:eA.emptyStateWrapper,children:"Running..."}):h?(0,l.FD)(q.S,{css:eC.root,children:[(0,l.Y)(Z.EY,{children:"Results of your code will appear here when you run"}),(0,l.Y)(eb.a,{}),(0,l.FD)(q.S,{css:eC.header,gap:6,align:"start",children:[(0,l.Y)(Z.EY,{variant:"small",color:"dimmer",children:"Default"}),(0,l.Y)(G.$n,{size:"small",text:null!==(n=null==u?void 0:u.workflowId)&&void 0!==n?n:eg.Ov,iconLeft:(0,l.Y)(eS.A,{}),colorway:"positive",onClick:function(){(0,p.u4)(p.AZ.RUN_BUTTON_CLICKED,{source:"emptyConsole",runner:d?"workflows":"pid1"}),f()}})]}),(0,l.Y)(eb.a,{}),(0,l.FD)(q.S,{gap:6,children:[(0,l.FD)(q.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(Z.EY,{variant:"small",color:"dimmer",children:"Workflows"}),(0,l.Y)(V.K0,{alt:"Configure",onClick:function(){r({type:"workflows"})},children:(0,l.Y)(eY.A,{size:12})})]}),(0,l.Y)(ew.O,{})]})]}):(0,l.Y)(ev.A,{pane:{type:"runnerOutput"},headerText:"Run your code",bodyText:(0,l.FD)(l.FK,{children:["Results of your code will appear here when you"," ",(0,l.Y)(ex,{onClick:f})," the project."]})})}var ek=t(26928),eD=t(41827),eE=t(25264),eR=t(26030),eI=t(94143),eF=t(86691),eT=t(90172),eP={noScroll:!0},eL=(0,z.x)({terminal:{gridRow:1,gridColumn:1,position:"sticky",top:eE.eQ.topOffset,"& .xterm":[W.wp.py(eE.Ww),W.wp.pl(eE.Ww),W.wp.height("100%"),W.wp.overflow("hidden")],"& .xterm-viewport":[W.wp.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:eE.eQ.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function eU(e){var n=e.onMessage,t=e.onInput,r=e.openAIWithMessage,i=e.openSearchAndReplace,a=e.autoFocus,c=e.maxHeight,u=e.onResizeTerminal,d=e.scrollPosition,p=e.scrollParent,f=e.openPane,h=(0,eE.Ui)({maxHeight:c,openPane:f}),m=h.visibleHeight,g=h.visibleLines,v=h.bufferHeight,w=h.bufferLines,y=h.wrapperResizeRef,b=h.xterm,S=h.xtermRef,Y=h.hasScrollback,A=(0,s.useMemo)(function(){return null==b?void 0:b._term},[b]),C=(0,s.useMemo)(function(){var e,n=null==A?void 0:A._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[A]),x=(0,o._)((0,s.useState)(!1),2),_=x[0],k=x[1],D=(0,o._)((0,s.useState)(""),2),E=D[0],R=D[1],I=(0,o._)((0,s.useState)(!1),2),F=I[0],P=I[1],L=(0,s.useRef)(null),U=(0,em._P)({controlName:"flag-output-userevents",logFlagToAnalytics:!1}),N=(0,eD.j)();(0,s.useEffect)(function(){return function(){null!==L.current&&clearTimeout(L.current)}},[L]),(0,s.useEffect)(function(){if(A){if(d<1||!Y){A.scrollToLine(0);return}var e=v-m,n=w-g;if(e<1){A.scrollToLine(0);return}var t=Math.round(d/e*n);A.scrollToLine(t)}},[v,w,Y,d,A,m,g]);var O=(0,s.useCallback)(function(){if(A){var e=A.getSelectionPosition();e&&p(e.start.y*C.height-c/2)}},[A,c,p,C.height]);(0,s.useEffect)(function(){if(U)return n(function(e){return N("repl:run:output",{output:e})})},[n,U,N]);var M=(0,eR.EF)().onContextMenu,B=(0,eI.P)({xterm:b,isOutputsTerminal:!0,openAIWithMessage:r,openShellSearch:function(e){k(!0),R(e)},openSearchAndReplace:i});return(0,eT.Z)({xterm:b,onAskAssistant:function(e){null==r||r((0,T.kq)(e))}}),(0,l.FD)(eE._x,{onInput:t,xterm:b,wrapperResizeRef:y,bufferHeight:v,setOnMessage:n,onResizeTerminal:u,autoFocus:a,style:{pointerEvents:F?"none":"all"},onWheel:function(){P(!0),L.current&&clearTimeout(L.current),L.current=setTimeout(function(){P(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ek.T$)(e)&&(k(!0),e.preventDefault())},children:[_?(0,l.Y)(q.S,{css:eL.searchWidget,children:(0,l.Y)(eF.p,{searchValue:E,setSearchValue:R,findPrevious:function(e){(null==b?void 0:b.findPrevious(e,eP))&&O()},findNext:function(e){(null==b?void 0:b.findNext(e,eP))&&O()},exit:function(){return k(!1)}})}):null,(0,l.Y)(eE.DJ,{xtermRef:S,visibleHeight:m,maxHeight:c,css:eL.terminal,onContextMenu:function(e){return M(e,{command:B})}})]})}var eN=t(3460),eO=(0,z.x)({terminalLoadingWrapper:[W.wp.p(8)],terminalLoadingLine:[W.wp.borderRadius(2),eN.S.foregroundPulse(),W.wp.height(16),W.wp.mb(4)]});function eM(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),r=(0,s.useMemo)(function(){return Array.from({length:t}).map(function(e,n){return(0,l.Y)(q.S,{css:eO.terminalLoadingLine,style:{width:100*Math.random()+"%"}},n)})},[t]);return(0,l.Y)(q.S,{css:eO.terminalLoadingWrapper,style:{height:n+"px"},children:(0,l.Y)(q.S,{style:{position:"sticky",top:36},children:r})})}var eB=t(43035);function eH(e){var n=e.visualState,t=e.onSetVisualState,r=e.maxHeight,i=(0,o._)((0,s.useState)(n===E.p$.EXPANDED?0:void 0),2),a=i[0],l=i[1],c=(0,s.useRef)(null),u=(0,o._)((0,s.useState)(n===E.p$.EXPANDED?"expanded":"collapsed"),2),d=u[0],p=u[1],f=(0,o._)((0,s.useState)(n===E.p$.COLLAPSED?0:void 0),2),h=f[0],m=f[1],g=(0,s.useCallback)(function(e){e&&l(e.getBoundingClientRect().height)},[]),v=(0,C.A)(function(e){var n=e.height;"expanded"===d&&l(n)},{type:"debounce",wait:200});(0,s.useEffect)(function(){if(c.current)switch(d){case"start-collapsing":p("is-collapsing");break;case"is-collapsing":m(0);break;case"start-expanding":p("is-expanding");break;case"is-expanding":m(a);break;case"expanded":m(void 0)}},[d,a]);var w="expanded"!==d&&"is-expanding"!==d,y=(0,s.useCallback)(function(e){t(e?E.p$.COLLAPSED:E.p$.EXPANDED)},[t]),b=(0,s.useRef)(n);(0,s.useEffect)(function(){b.current===E.p$.EXPANDED&&n===E.p$.COLLAPSED&&c.current&&(p("start-collapsing"),m(Math.min(c.current.getBoundingClientRect().height,r)),p("start-collapsing")),b.current===E.p$.COLLAPSED&&n===E.p$.EXPANDED&&p("start-expanding"),b.current=n},[r,n]);var S=(0,s.useCallback)(function(){"is-collapsing"===d&&p("collapsed"),"is-expanding"===d&&p("expanded")},[d]),Y=(0,s.useMemo)(function(){return{style:{height:h,transition:"height 120ms ease-out",overflow:"expanded"===d||"start-collapsing"===d?"visible":"hidden"},onTransitionEnd:S}},[h,d,S]);return{collapsedStep:d,isCollapsed:w,setIsCollapsed:y,blockWrapperRef:c,blockWrapperProps:Y,blockResizeRef:(0,s.useMemo)(function(){return(0,eB.P)(v,g)},[v,g]),measuredBlockHeight:a}}var ez=t(37673),eW=t(34926),eG=t(75895),eV=t(21980),ej=t(76862),eZ=t(41595),eq=t(75165),eK=t(82402),e$=t(1478),eJ=t(89020),eQ=t(37163),eX=t(53536),e0=(0,z.x)({button:[W.wp.textAlign.left]});let e1=function(e){var n=e.onClick;return(0,eQ.A)()?(0,l.Y)(eX.d,{text:"Missing required secrets. Click here to add them.",onClick:n,iconRight:(0,l.Y)(eY.A,{}),colorway:"warning",css:e0.button}):null};var e2=t(74894),e5=t(27093),e4=t(42796).hp,e3=(0,e$.v)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),e8=e3.cssVars,e7=e3.styleTokens,e6=(0,z.x)({outputBlockMetadataWrapper:[{containerType:"size"},W.wp.pl(4),W.wp.pr(8),W.wp.rowWithGap(4),W.wp.align.center,W.wp.justify.spaceBetween,W.wp.height(28),W.wp.backgroundColor.backgroundDefault,W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),W.wp.position.sticky,W.wp.top(0),W.wp.zIndex(1)],outputBlockMetadataWrapperLeft:[W.wp.rowWithGap(4),W.wp.align.center],outputBlockMetadataWrapperRight:[W.wp.rowWithGap(4),W.wp.align.center],taskNamePill:[W.wp.maxWidth(100),W.wp.flex.shrink(0),W.wp.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[W.wp.display.none],"&:hover":{maxWidth:"none","> span":{overflow:"visible",textOverflow:"clip"}}}],dateText:[W.wp.flex.row,W.wp.align.center,W.wp.textAlign.right,W.wp.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[W.wp.overflow("hidden"),W.wp.width(120),W.wp.flex.shrink(0),{"@container (max-width: 510px)":[W.wp.display.none]}],outputBlockClosingBorder:[W.wp.height(1),W.wp.zIndex(1),W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[W.wp.minHeight(e7.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:eE.eQ.topOffset,"& .xterm":[W.wp.py(eE.Ww),W.wp.pl(eE.Ww),W.wp.height("100%"),W.wp.overflow("hidden")],"& .xterm-viewport":[W.wp.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:eE.eQ.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[W.wp.flex.growAndShrink(0),W.wp.rowWithGap(4),W.wp.align.center],outputMetadataTooltip:[W.wp.pl(4),W.wp.pr(4)],verticalDivider:[W.wp.mx(6),{width:1,height:28,background:H.LU.backgroundHigher}]});function e9(e){var n=e.isDone,t=e.hasError,r=e.errorMessage,i=e.finishedMessage,o=e.stopTask;return n?(0,l.Y)(O.m_,{css:e6.outputMetadataTooltip,tooltip:t?"Error".concat(r?": ".concat(r):""):"Finished".concat(i?": ".concat(i):""),children:t?(0,l.Y)(en.A,{}):(0,l.Y)(K.A,{})}):void 0!==o?(0,l.Y)(V.K0,{alt:"Stop",onClick:o,children:(0,l.Y)(X.A,{color:H.LU.accentPositiveDefault})}):(0,l.Y)(O.m_,{tooltip:"Running...",children:(0,l.Y)(X.A,{color:H.LU.accentPositiveDefault})})}function ne(e){var n=e.isInRecoveryMode,t=e.isCollapsed,r=e.setIsCollapsed,i=e.taskName,o=e.isDone,a=e.hasError,c=e.errorMessage,u=e.startTime,d=e.endTime,p=e.activeUsers,f=e.openPane,h=e.openedPorts,m=e.onAIChatClick,g=e.stopTask,v="packager.installForAll"===i||"packager.installForLanguage"===i,w=(0,s.useCallback)(function(){f({type:"dependencies"})},[f]);return(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapper,onDoubleClick:function(){return r(!t)},children:[v?(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapperLeft,children:[(0,l.Y)(V.K0,{alt:"Open Packager",onClick:w,children:(0,l.Y)(e5.A,{})}),(0,l.Y)(j.a,{color:"grey",text:"Packager",css:e6.taskNamePill})]}):(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(V.K0,{alt:t?"Expand":"Collapse",onClick:function(){return r(!t)},children:t?(0,l.Y)(J.A,{}):(0,l.Y)($.A,{})}),(0,l.Y)(j.a,{color:"grey",text:i,css:e6.taskNamePill})]}),(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.Y)(el,{showingPorts:!!h&&h.length>0,onClick:m}),(0,l.Y)(ec,{openPane:f,openedPorts:h}),(0,l.FD)(q.S,{css:e6.dateContainer,row:!0,justify:"space-between",children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:e6.dateText,children:(0,l.Y)(M,{startTime:u,endTime:d})}),(0,l.Y)(q.S,{css:e6.verticalDivider})]}),p.length>0?(0,l.Y)(q.S,{css:e6.avatarWrapper,children:p.map(function(e){return(0,l.Y)(eJ.A,{user:e,size:16},e.id)})}):null,(0,l.Y)(e9,{isDone:o,stopTask:g,hasError:a,errorMessage:c}),!0===n?(0,l.Y)(O.m_,{tooltip:"The nix environment failed to build. Check if your .replit and replit.nix files are configured properly. For more information look into /run/replit/env/error.",children:(0,l.Y)(en.A,{color:H.LU.accentNegativeDefault})}):null]})]})}function nn(){}var nt={noScroll:!0};function nr(e){var n,t,r,c,u,d=e.taskIdx,p=e.runId,f=e.currentUserId,h=e.maxHeight,m=e.scrollParent,g=e.scrollPosition,v=e.openPane,w=e.openAIWithMessage,y=(0,eE.Ui)({maxHeight:h,openPane:v}),b=y.visibleHeight,S=y.visibleLines,Y=y.bufferHeight,A=y.bufferLines,C=y.wrapperResizeRef,x=y.hasScrollback,_=y.xterm,k=y.xtermRef,D=(0,s.useMemo)(function(){return null==_?void 0:_._term},[_]),E=(0,s.useMemo)(function(){var e,n=null==D?void 0:D._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[D]),R=(0,o._)((0,s.useState)(null),2),I=R[0],F=R[1],P=(0,o._)((0,s.useState)(!1),2),L=P[0],U=P[1],N=(0,s.useRef)(null);(0,s.useEffect)(function(){return function(){null!==N.current&&clearTimeout(N.current)}},[N]),(0,s.useEffect)(function(){if(D){if(g<1||!x){D.scrollToLine(0);return}var e=Y-b,n=A-S;if(e<1){D.scrollToLine(0);return}var t=Math.round(g/e*n);D.scrollToLine(t)}},[Y,A,x,g,D,b,S]);var O=(0,o._)((0,s.useState)(null),2),M=O[0],B=O[1];(0,ej.b)((n=(0,i._)(function(e,n){var t,r,i,o,l,s,c,u,h,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.signal,!_||!I)return[2];i=(r=e.workflows.connectToTask.stream({runId:p,taskIdx:d,userId:f,processViewId:"outputs"},{signal:t})).reqWritable,o=r.resReadable,B({onInput:function(e){if(i.isWritable()){var n=new Uint8Array(e4.from(e));i.write({$kind:"stdin",stdin:n})}},onResizeTerminal:function(e){i.isWritable()&&i.write({$kind:"resize",size:e})},onFocus:function(){i.isWritable()&&i.write({$kind:"focused"})},onBlur:function(){i.isWritable()&&i.write({$kind:"blurred"})}}),i.write({$kind:"resize",size:_.getSize()}),l=!1,s=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),u=(0,eG._)(o),a.label=2;case 2:return[4,u.next()];case 3:if(!(l=!(h=a.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];if("TASK_ERROR"===m.payload.code)return eV.vF.info("[".concat(m.payload.code,"] ").concat(m.payload.message," in workflow outputs")),[3,4];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&I(m.payload.chunk),a.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return g=a.sent(),s=!0,c=g,[3,12];case 7:if(a.trys.push([7,,10,11]),!(l&&null!=u.return))return[3,9];return[4,u.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return B(null),i.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[p,d,I,_,f]);var H=(0,s.useCallback)(function(e){return F(function(){return e}),function(){}},[]),z=(0,o._)((0,s.useState)(!1),2),W=z[0],G=z[1],V=(0,o._)((0,s.useState)(""),2),j=V[0],Z=V[1],K=(0,s.useCallback)(function(e){v({type:"searchReplace",data:{initialQuery:e}},!0)},[v]),$=(0,eR.EF)().onContextMenu,J=(0,eI.P)({xterm:_,isOutputsTerminal:!0,openAIWithMessage:w,openShellSearch:function(e){G(!0),Z(e)},openSearchAndReplace:K});(0,eT.Z)({xterm:_,onAskAssistant:function(e){null==w||w((0,T.kq)(e))}});var Q=(0,s.useCallback)(function(){if(D){var e=D.getSelectionPosition();e&&m(e.start.y*E.height-h/2)}},[D,h,m,E.height]);return(0,l.FD)(eE._x,{xterm:_,wrapperResizeRef:C,bufferHeight:Y,setOnMessage:H,onInput:null!==(t=null==M?void 0:M.onInput)&&void 0!==t?t:nn,onResizeTerminal:null!==(r=null==M?void 0:M.onResizeTerminal)&&void 0!==r?r:nn,onFocus:null!==(c=null==M?void 0:M.onFocus)&&void 0!==c?c:nn,onBlur:null!==(u=null==M?void 0:M.onBlur)&&void 0!==u?u:nn,style:{pointerEvents:L?"none":"all"},onWheel:function(){U(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(function(){U(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ek.T$)(e)&&(G(!0),e.preventDefault())},children:[W?(0,l.Y)(q.S,{css:e6.searchWidget,children:(0,l.Y)(eF.p,{searchValue:j,setSearchValue:Z,findPrevious:function(e){(null==_?void 0:_.findPrevious(e,nt))&&Q()},findNext:function(e){(null==_?void 0:_.findNext(e,nt))&&Q()},exit:function(){return G(!1)}})}):null,(0,l.Y)(eE.DJ,{xtermRef:k,visibleHeight:b,maxHeight:h,css:e6.terminal,onContextMenu:function(e){return $(e,{command:J})}})]})}function ni(e){var n,t=e.runId,r=e.taskIdx,i=e.task,o=e.config,a=e.isInRecoveryMode,c=e.isCollapsed,u=e.setIsCollapsed,d=e.openPane,p=e.openedPorts,h=e.onAIChatClick,m="ERROR"===i.state||"FAILED"===i.state,g="ERROR"===i.state||"FAILED"===i.state?null===(n=i.result)||void 0===n?void 0:n.message:void 0,v="RUNNING"!==i.state,w=(0,eq.Q4)(),y=(0,s.useMemo)(function(){return i.userIds.map(function(e){return w.find(function(n){return n.id===e})}).filter(Boolean)},[i,w]),b="shell.exec"===o.task&&"args"in o?(0,eg.ZM)(o.args):o.task,S=(0,f.I)(function(e){return function(){e.workflows.stopTask.rpc({runId:t,taskIdx:r})}},[t,r]);return(0,l.Y)(ne,{isCollapsed:c,setIsCollapsed:u,taskName:b,isInRecoveryMode:a,isDone:v,hasError:m,errorMessage:g,startTime:i.startTime,endTime:v?i.endTime:void 0,activeUsers:y,openPane:d,openedPorts:p,stopTask:null!=S?S:void 0,onAIChatClick:h})}function no(e){var n,t,r,c,u,d=e.task,p=e.taskIdx,h=e.runId,m=e.config,y=e.maxHeight,b=e.rootRef,S=e.currentUser,A=e.ports,_=e.openAIWithMessage,k=e.openPane,R=e.onDoExposePort,I=e.onDontExposePort,P=(0,s.useRef)(null),L=(0,o._)((0,s.useState)(!0),2),U=L[0],N=L[1],O=(0,o._)((0,s.useState)(!1),2),M=O[0],B=O[1],H=(0,o._)((0,s.useState)(0),2),z=H[0],W=H[1],G=(0,eK.V)(),V=(0,Y.A)(U,M?6e4:500),j=null!==(c=(null===(n=d.metadata)||void 0===n?void 0:n.task)==="shell.exec"&&d.metadata.isInRecoveryMode)&&void 0!==c&&c,Z=(0,D.LO)(A,(null===(t=d.metadata)||void 0===t?void 0:t.task)==="shell.exec"?null===(r=d.metadata)||void 0===r?void 0:r.cgroupPath:void 0),K=(0,o._)((0,s.useState)(E.p$.EXPANDED),2),$=eH({maxHeight:y,visualState:K[0],onSetVisualState:K[1]}),J=$.collapsedStep,Q=$.isCollapsed,X=$.setIsCollapsed,ee=$.blockWrapperRef,en=$.blockWrapperProps,et=$.blockResizeRef,er=$.measuredBlockHeight;(0,s.useEffect)(function(){if(b.current){var e,n=b.current,t=function(){var t,r;W(Math.max(0,n.scrollTop-(null!==(r=null===(t=P.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0))),B(!0),e&&clearTimeout(e),e=setTimeout(function(){B(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[b,P]),(0,s.useEffect)(function(){if(P.current&&b.current)return(0,x.l)(P.current,function(){return N(!0),function(){N(!1)}},{root:b.current,threshold:0})},[b,P]);var ei=(0,f.I)(function(e){return(0,i._)(function(){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.workflows.readTaskBuffer.subscribe({runId:h,taskIdx:p}).resReadable,t=new Uint8Array([]),r=!1,i=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,eG._)(n),a.label=2;case 2:return[4,l.next()];case 3:if(!(r=!(s=a.sent()).done))return[3,5];if(!(c=s.value).ok)throw Error(c.payload.code+": "+c.payload.message);"output"===c.payload.$kind&&(t=e4.concat([t,c.payload.chunk])),"finished"===c.payload.$kind&&(u=(0,F.A)(t.toString()),_((0,T.kq)(u))),a.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return d=a.sent(),i=!0,o=d,[3,12];case 7:if(a.trys.push([7,,10,11]),!(r&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(i)throw o;return[7];case 11:return[7];case 12:return[2]}})})}),eo=(0,o._)((0,s.useState)(0),2),ea=eo[0],el=eo[1],es=(0,C.A)(function(e){var n=e.height;"expanded"===J&&el(n)},{type:"debounce",wait:200}),ec=(0,s.useCallback)(function(){k({type:"networking"})},[k]),eu=(0,s.useCallback)(function(e,n){k({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[k]),ed=(0,s.useCallback)(function(){k({type:"envEditor"})},[k]),ep="FINISHED"===d.state||"FAILED"===d.state,ef=!1;return"collapsed"===J?ef=!1:(!ep||V)&&(ef=!0),(0,l.FD)(q.S,{innerRef:P,children:[(0,l.Y)(ni,{runId:h,taskIdx:p,task:d,config:m,isInRecoveryMode:j,isCollapsed:Q,setIsCollapsed:X,openPane:k,openedPorts:Z,onAIChatClick:function(){return null==ei?void 0:ei()}}),(0,l.FD)(q.S,{innerRef:es,style:{position:"sticky",top:28},children:[(0,l.Y)(e1,{onClick:ed}),(0,l.Y)(eW.yN,{configurations:Z.map(function(e){return e.configuration}),openWebview:function(){eu("/",Z[0].configuration.localPort)},openNetworkingTool:ec,onDontExposePort:function(){1===Z.length&&I(Z[0].configuration.localPort)},onDoExposePort:function(){1===Z.length&&R(Z[0].configuration.localPort)}})]}),(0,l.Y)("div",(0,w._)((0,v._)({ref:ee},en),{children:(0,l.Y)(q.S,{css:e6.outputBlockTerminalWrapper,style:(u={},(0,g._)(u,e8.blockMinHeight,er+"px"),(0,g._)(u,e8.terminalBackgroundColor,null==G?void 0:G.background),(0,g._)(u,eE.O3.topOffset,28+ea+"px"),u),children:ef?(0,l.Y)(q.S,{innerRef:et,children:(0,l.Y)(nr,{taskIdx:p,runId:h,maxHeight:y-28-ea,currentUserId:S.id,scrollParent:function(e){var n,t,r,i=e+(null!==(r=null===(n=P.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0);null===(t=b.current)||void 0===t||t.scrollTo({top:i})},scrollPosition:z,openPane:k,openAIWithMessage:_})}):(0,l.Y)(eM,{targetHeight:null!=er?er:0})})})),(0,l.Y)(q.S,{css:e6.outputBlockClosingBorder})]})}function na(e){var n,t,r=(0,s.useCallback)(function(){e.openPane({type:"dependencies"})},[e]),i=e.task.metadata;if(((null==i?void 0:i.task)==="packager.installForAll"||(null==i?void 0:i.task)==="packager.installForLanguage")&&(null==i?void 0:i.hasUserFacingOutput)===!0)return(0,l.Y)(no,(0,v._)({},e));var o="ERROR"===e.task.state||"FAILED"===e.task.state,a="ERROR"===e.task.state||"FAILED"===e.task.state?null===(n=e.task.result)||void 0===n?void 0:n.message:void 0,c="FINISHED"===e.task.state?null===(t=e.task.result)||void 0===t?void 0:t.message:void 0,u="RUNNING"!==e.task.state;return(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapper,children:[(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapperLeft,children:[(0,l.Y)(V.K0,{alt:"Open Packager",onClick:r,children:(0,l.Y)(e5.A,{})}),(0,l.Y)(j.a,{color:"grey",text:"Packager",css:e6.taskNamePill})]}),(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapperRight,children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:e6.dateText,children:(0,l.Y)(M,{startTime:e.task.startTime,endTime:"FINISHED"===e.task.state?e.task.endTime:void 0})}),(0,l.Y)(q.S,{css:e6.verticalDivider}),(0,l.Y)(e9,{isDone:u,hasError:o,errorMessage:a,finishedMessage:c})]})]})}function nl(e){var n=e.task,t=e.config,r=e.openPane,i=t.args,o=(0,s.useCallback)(function(){r({type:"webview",data:{ports:{type:"local",port:i}}},!0)},[r,i]);return(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapper,children:[(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapperLeft,children:[(0,l.Y)(V.K0,{alt:"Open Webview",onClick:o,children:(0,l.Y)(e2.A,{})}),(0,l.Y)(j.a,{color:"grey",text:":".concat(i),css:e6.taskNamePill})]}),(0,l.FD)(q.S,{css:e6.outputBlockMetadataWrapperRight,children:[(0,l.Y)(Z.EY,{color:"dimmer",variant:"small",css:e6.dateText,children:(0,l.Y)(M,{startTime:n.startTime})}),(0,l.Y)(q.S,{css:e6.verticalDivider}),(0,l.Y)(O.m_,{tooltip:"Finished",css:e6.outputMetadataTooltip,children:(0,l.Y)(K.A,{})})]})]})}function ns(e){var n=(0,eZ.i)();if(!n)return null;var t=e.config.task;switch(t){case"shell.exec":case"dummy.echo":case"dummy.print":case"dummy.sleep":case"dummy.pass":case"dummy.fail":return(0,l.Y)(no,(0,w._)((0,v._)({},e),{currentUser:n}));case"packager.installForLanguage":case"packager.installForAll":return(0,l.Y)(na,(0,w._)((0,v._)({},e),{currentUser:n}));case"workspace.openWebview":return(0,l.Y)(nl,(0,w._)((0,v._)({},e),{config:e.config}));case"workflow.run":return null;default:(0,P.A)(t)}}var nc=t(19346),nu=t(2298),nd=t(11927),np=t(8351),nf=(0,e$.v)(["blockMinHeight","terminalBackgroundColor"]),nh=nf.cssVars,nm=nf.styleTokens,ng=(0,z.x)({outputsListParent:[W.wp.flex.growAndShrink(1),W.wp.overflow("hidden"),W.wp.borderRadius(0,0,8,8)],outputsListWrapper:[W.wp.height("100%")],outputsList:[W.wp.height("auto"),W.wp.overflowY("scroll"),W.wp.flex.growAndShrink(1)],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[W.wp.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[W.wp.minHeight(nm.blockMinHeight)],outputBlockTerminalWrapper:[W.wp.minHeight(nm.blockMinHeight),{backgroundColor:nm.terminalBackgroundColor}],outputBlockClosingBorder:[W.wp.height(1),W.wp.zIndex(1),W.wp.border({direction:"bottom",width:1,style:"solid",color:H.LU.backgroundHigher}),{marginTop:-1}],workflowsListButton:[W.wp.viewStyle,W.wp.reset.button,W.wp.p(2),W.wp.height(22),W.wp.rowWithGap(8),W.wp.align.center,nu.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],workflowsListButtonText:[{fontSize:H.LU.fontSizeSmall}]});function nv(e){var n,t=e.onInput,r=e.openPane,i=e.openAIWithMessage,a=e.openSearchAndReplace,c=e.openSecretsPane,u=e.autoFocus,d=e.rootRef,p=e.maxHeight,f=e.onResizeTerminal,h=e.isDone,m=e.data,y=e.error,b=e.localStartTime,S=e.localEndTime,A=e.startTime,_=e.endTime,k=e.type,R=e.visualState,F=e.onSetVisualState,T=e.ports,P=e.onDontExposePort,L=e.onDoExposePort,U=(0,s.useRef)(null),N=(0,o._)((0,s.useState)(!0),2),O=N[0],M=N[1],B=(0,o._)((0,s.useState)(!1),2),H=B[0],z=B[1],W=(0,o._)((0,s.useState)(0),2),G=W[0],V=W[1],j=(0,eK.V)(),Z=(0,Y.A)(O,H?6e4:500),K=(0,D.LO)(T,k===E._B.EXECUTION?m.cgroup:void 0),$=(0,o._)((0,s.useState)(0),2),J=$[0],Q=$[1],X=(0,s.useCallback)(function(e,n){r({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[r]),ee=eH({maxHeight:p,visualState:R,onSetVisualState:F}),en=ee.collapsedStep,et=ee.isCollapsed,er=ee.setIsCollapsed,ei=ee.blockWrapperRef,eo=ee.blockWrapperProps,ea=ee.blockResizeRef,el=ee.measuredBlockHeight;(0,I.A)({sendInput:function(e){return t(e),!0},paste:function(){return!1}}),(0,s.useEffect)(function(){if(d.current){var e,n=d.current,t=function(){var t,r;V(Math.max(0,n.scrollTop-(null!==(r=null===(t=U.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0))),z(!0),e&&clearTimeout(e),e=setTimeout(function(){z(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[d,U]),(0,s.useEffect)(function(){if(U.current&&d.current)return(0,x.l)(U.current,function(){return M(!0),function(){M(!1)}},{root:d.current,threshold:0})},[d,U]);var es=(0,C.A)(function(e){var n=e.height;"expanded"===en&&Q(n)},{type:"debounce",wait:200}),ec=!1;return"collapsed"===en?ec=!1:(!h||Z)&&(ec=!0),(0,l.FD)(q.S,{innerRef:U,children:[(0,l.Y)(eh,{isCollapsed:et,setIsCollapsed:er,openPane:r,isDone:h,data:m,localStartTime:b,localEndTime:S,startTime:A,endTime:_,type:k,error:y,openedPorts:K,openAIWithMessage:i}),(0,l.FD)(q.S,{innerRef:es,style:{position:"sticky",top:28},children:[(0,l.Y)(e1,{onClick:c}),(0,l.Y)(eW.yN,{configurations:K.map(function(e){return e.configuration}),openWebview:function(){X("/",K[0].configuration.localPort)},openNetworkingTool:function(){r({type:"networking"})},onDontExposePort:function(){1===K.length&&P(K[0].configuration.localPort)},onDoExposePort:function(){1===K.length&&L(K[0].configuration.localPort)}})]}),(0,l.Y)("div",(0,w._)((0,v._)({ref:ei},eo),{children:(0,l.Y)(q.S,{css:ng.outputBlockTerminalWrapper,style:(n={},(0,g._)(n,nh.blockMinHeight,el+"px"),(0,g._)(n,nh.terminalBackgroundColor,null==j?void 0:j.background),(0,g._)(n,eE.O3.topOffset,28+J+"px"),n),children:ec?(0,l.Y)(q.S,{innerRef:ea,children:(0,l.Y)(eU,{onMessage:m.onMessage,onInput:t,openAIWithMessage:i,openSearchAndReplace:a,maxHeight:p-28-J,onResizeTerminal:f,scrollPosition:G,scrollParent:function(e){var n,t,r,i=e+(null!==(r=null===(n=U.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0);null===(t=d.current)||void 0===t||t.scrollTo({top:i})},autoFocus:u,openPane:r})}):(0,l.Y)(eM,{targetHeight:null!=el?el:0})})})),(0,l.Y)(q.S,{css:ng.outputBlockClosingBorder})]})}function nw(e){var n=e.openPane,t=e.isActive,r=e.runner,i=e.ports,a=e.sessionId,c=e.openAIWithMessage,u=e.onClear,d=e.onDontExposePort,p=e.onDoExposePort,f=(0,o._)((0,s.useState)([]),2),h=f[0],m=f[1],g=(0,o._)((0,s.useState)(0),2),v=g[0],w=g[1],Y=(0,o._)((0,s.useState)(!0),2),x=Y[0],D=Y[1],I=(0,s.useRef)(null),F=(0,R.Jw)(k.C.id,k.j.Output),T=(0,o._)((0,s.useState)(!1),2),P=T[0],L=T[1],U=(0,s.useRef)(0),N=(0,_.m5)(),O=(0,o._)((0,A.A)("show-only-latest-console-runs",!0),2),M=O[0],B=O[1],H=(0,ey.If)(),z=(0,s.useMemo)(function(){return H?Object.entries(H).flatMap(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];return r.tasks.filter(function(e){return e.state===S.Dr.RUNNING||e.state===S.Dr.FINISHED||e.state===S.Dr.FAILED}).map(function(e,n){return{task:e,taskIdx:n,runId:t,config:r.workflow.tasks[n]}})}):[]},[H]),W=(0,C.A)(function(e){w(e.height)},{type:"throttle",wait:200}),G=(0,s.useCallback)(function(e){return n({type:(0,nc.QY)(e),data:e})},[n]),V=(0,s.useCallback)(function(){n({type:"envEditor"})},[n]),j=(0,s.useCallback)(function(e){n({type:"searchReplace",data:{initialQuery:e}})},[n]),Z=(0,s.useCallback)(function(e){c(e),a&&n({type:"ghostwriterChat",data:{sessionId:a}})},[n,c,a]);(0,s.useEffect)(function(){return r.onStateChanged(function(e){L(e===E.ll.BEFORE_RUN)})},[r]),(0,s.useEffect)(function(){m(r.getOutputBlocks())},[r]),(0,s.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){m(e)}),n=r.onBlockChanged(function(e){!h.find(function(n){return n.id===e.id})&&I.current&&(I.current.scrollTo(0,I.current.scrollHeight),D(!0)),m((0,b.jM)(function(n){var t=n.findIndex(function(n){return n.id===e.id});t>=0?n[t]=e:n.push(e)}))});return function(){n(),e()}},[r,h,I]);var K=(0,s.useMemo)(function(){var e=(0,y._)(h.map(function(e){return{type:"OutputBlock",data:e}})).concat((0,y._)(z.map(function(e){return{type:"WorkflowsTask",data:e}}))).sort(function(e,n){var t,r;return("OutputBlock"===e.type?null!==(t=e.data.startTime)&&void 0!==t?t:-1/0:e.data.task.startTime)-("OutputBlock"===n.type?null!==(r=n.data.startTime)&&void 0!==r?r:-1/0:n.data.task.startTime)}),n=e.filter(function(e){var n=e.type,t=e.data;return!M||("OutputBlock"===n?!1===t.isDone:"RUNNING"===t.task.state)});return 0===n.length&&e.length>0?[e[e.length-1]]:n},[h,M,z]),$=0===K.length;return(0,l.FD)(q.S,{css:ng.outputsListParent,innerRef:F,children:[P?(0,l.Y)(nd.A,{}):null,(0,l.FD)(q.S,{css:ng.outputsListWrapper,innerRef:W,children:[(0,l.Y)(nb,{onClear:u,showOnlyLatest:M,setShowOnlyLatest:B,isEmpty:$,openPane:n}),$?(0,l.Y)(e_,{runner:r,openPane:n}):(0,l.FD)(q.S,{css:[ng.outputsList,x&&ng.outputsListSnapToBottom],innerRef:I,onScroll:function(){I.current&&(I.current.scrollTop<U.current?D(!1):D(I.current.scrollHeight-I.current.scrollTop-20<v),U.current=I.current.scrollTop)},children:[K.map(function(e,o){var a=e.type,s=e.data;if("WorkflowsTask"===a)return(0,l.Y)(ns,{task:s.task,taskIdx:s.taskIdx,runId:s.runId,config:s.config,maxHeight:v,rootRef:I,ports:i,openPane:n,openAIWithMessage:Z,onDoExposePort:p,onDontExposePort:d},s.runId+"-"+s.taskIdx);var c=o===h.length-1;return(0,l.Y)(nv,{rootRef:I,maxHeight:v,onInput:function(e){var n=r.getRunState();(n===E.ll.IDLE||n===E.ll.RUNNING)&&r.sendInput(e)},openFile:G,openAIWithMessage:Z,openSearchAndReplace:j,openPane:n,openSecretsPane:V,onResizeTerminal:function(e){s.isDone||s.type!==E._B.EXECUTION||r.resizeTerminalForBlock(s.id,e)},autoFocus:t&&c&&!N,isDone:s.isDone,type:s.type,error:s.error,visualState:s.visualState,onSetVisualState:function(e){return r.setBlockVisualState(s.id,e)},localStartTime:s.localStartTime,localEndTime:s.localEndTime,startTime:s.startTime,endTime:s.endTime,data:s.data,ports:i,onDontExposePort:d,onDoExposePort:p},s.id)}),x?(0,l.Y)(q.S,{css:ng.scrollSnap}):null]})]})]})}var ny=(0,z.x)({header:[W.wp.height(28),W.wp.flex.row,W.wp.align.center,W.wp.justify.end,{borderBottom:"1px solid ".concat(H.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}],groupRight:[W.wp.height("100%"),W.wp.rowWithGap(4),W.wp.px(2)]});function nb(e){return(0,l.Y)(q.S,{css:ny.header,align:"end",children:(0,l.FD)(q.S,{css:ny.groupRight,align:"center",children:[(0,l.Y)(ez.g,{text:"Show Only Latest",isSelected:e.showOnlyLatest,onChange:e.setShowOnlyLatest}),(0,l.Y)(ez.k,{altText:"Clear History",buttonText:"Clear History",icon:(0,l.Y)(np.A,{}),onClick:e.onClear,disabled:e.isEmpty})]})})}var nS=t(9809),nY=t(97802),nA=t(74495),nC=t(72250),nx=t(58411),n_=t(42022),nk=t(52885),nD=c.ZU.Object({type:c.ZU.Literal("runnerOutput")}),nE={id:"outputs.clear",name:"Clear console history",default:void 0};function nR(e){var n,t,r,c,u,g,v,w=e.runner,y=e.options,b=(t=(n=(0,h.A)()).fs,r=n.ports,c=(0,f.I)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),u=(0,s.useCallback)(function(){c&&c(),w.clearBlockHistory()},[w,c]),(0,nC.Qt)(function(){return{commands:[{match:m.G2,data:{type:"action",label:"Clear History",icon:(0,l.Y)(np.A,{}),run:function(){return u()}}}],type:"runnerOutput",startBlock:w.startBlock,endBlock:w.endBlock,writeOutputToBlock:w.writeOutputToBlock,writeErrorToBlock:w.writeErrorToBlock}},[w,u]),(0,nA.SJ)(function(){return[nE.id,w.clearBlockHistory]},[w]),g=(0,s.useCallback)(function(e){r.updateDotReplitPortsMapping(e,void 0)},[r]),{onClear:u,onDoExposePort:(0,s.useCallback)(function(e){r.tryExposingPortAutomatically(e)},[r]),onDontExposePort:g,ports:r,fs:t}),S=b.ports,Y=b.onDontExposePort,A=b.onDoExposePort,C=b.onClear,x=(0,o._)((0,s.useState)(""),2),_=x[0],k=x[1],D=(0,nx.I)(),E=y.performPaneOperation,R=(0,s.useCallback)(function(e){E({operation:"open",secondary:!D||"ghostwriterChat"===e.type,pane:e})},[E,D]),I=(0,d.Au)({onSession:function(e){k(e),R({type:"ghostwriterChat",data:{sessionId:e}})}}).sendMessage,F=(0,d.dm)(),T=F.assistantMode,P=F.getAssistantMessageModel,L=F.getAssistantMessageIntent,U=(0,nS.L)().authorizations,N=(0,nY.T)({mode:T,authz:U}),O=(0,s.useCallback)((v=(0,i._)(function(e){var n;return(0,a.YH)(this,function(t){return n=P(N),(0,p.u4)(p.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:T,model:n,user_model_selection:n,message_content:e,message_source:"console"}),I({kind:"message",message:e,intent:L(),model:n}),[2]})}),function(e){return v.apply(this,arguments)}),[I,P,L,N,T]);return(0,l.Y)(nw,{runner:w,ports:S,isActive:y.isActive,openPane:R,sessionId:_,openAIWithMessage:O,onClear:C,onDontExposePort:Y,onDoExposePort:A})}var nI=(0,z.x)({unavailable:[W.wp.p(8)]}),nF={Content:function(e){var n=e.options,t=(0,h.A)().runner;return"outputs"!==t.mode?(0,l.Y)(q.S,{css:nI.unavailable,children:(0,l.Y)(Z.EY,{children:"Console is not available."})}):(0,l.Y)(nR,{options:n,runner:t})},Icon:function(e){var n=e.size;return(0,l.Y)(n_.Vx.Provider,{value:{color:H.LU.yellowStrongest,size:n},children:(0,l.Y)(nk.A,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",category:nc.bY.WorkspaceFeatures,decode:function(e){return u.WT.Decode(nD,e)}}},82112:(e,n,t)=>{"use strict";t.d(n,{M:()=>c,v:()=>s});var r=t(94086),i=t(19346),o=t(40889),a=t(8367),l=t(68753),s="Unsupported",c={Content:function(){return(0,r.Y)(a.S,{style:{padding:32},children:(0,r.Y)(o.EY,{variant:"text",multiline:!1,children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.Y)(l.A,{})},getTitle:function(){return s},category:i.bY.Other,decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},48358:(e,n,t)=>{"use strict";t.d(n,{L9:()=>m,Rd:()=>h});var r=t(27189),i=t(94086),o=t(40174),a=t(49711),l=t(14178),s=["youtube.com","youtube-nocookie.com","vimeo.com","wistia.com","sadanandpai.github.io"],c=function(e){try{var n=new URL(e).hostname;return s.some(function(e){return n===e||n.endsWith("."+e)})}catch(e){return!1}},u=t(19346),d=t(32842),p=t(4595),f=o.ZU.Object({type:o.ZU.Literal("videoPlayer"),data:o.ZU.Object({embedUrl:o.ZU.String(),title:o.ZU.String()})}),h={Content:function(e){var n=e.pane.data;return(0,i.Y)(m,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,i.Y)(p.A,{size:n})},getTitle:function(e){return e.data.title},category:u.bY.Other,decode:function(e){return a.WT.Decode(f,e)}};function m(e){var n,t=e.embedUrl,o=e.borderRadius,a=e.title;return c(t)?(0,i.Y)("iframe",{title:a,src:t,frameBorder:"0",css:[d.wp.coverContainer,(n=d.wp).borderRadius.apply(n,(0,r._)(void 0===o?[0,0,8,8]:o))]}):(0,i.FD)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,i.Y)("a",{href:l.WA,target:"_blank",children:"Request more formats here."})]})}},36856:(e,n,t)=>{"use strict";t.d(n,{D4:()=>R,QS:()=>I});var r=t(20837),i=t(43952),o=t(66622),a=t(94086),l=t(30758),s=t(40174),c=t(49711),u=t(51439),d=t(20334),p=t(29835),f=t(24481),h=t(21809),m=t(44115),g=t(45350),v=t(63764),w=t(42393),y=t(23311),b=t(19346),S=t(72250),Y=t(39959),A=t(24955),C=t(95235),x=t(42022),_=t(95427),k=t(30433),D=s.ZU.Union([s.ZU.Object({type:s.ZU.Literal("local"),port:s.ZU.Number(),path:s.ZU.Optional(s.ZU.String())}),s.ZU.Object({type:s.ZU.Literal("external"),port:s.ZU.Number(),path:s.ZU.Optional(s.ZU.String())})]),E=s.ZU.Object({type:s.ZU.Literal("webview"),data:s.ZU.Optional(s.ZU.Object({previewScreenSize:s.ZU.Optional(g.R),ports:s.ZU.Optional(D)}))}),R=function(e){return"portType"in e&&"port"in e?c.WT.Decode(E,{ports:{type:e.portType,port:e.port,path:e.path}}):c.WT.Decode(E,e)},I={Content:function(e){var n,t,s=e.pane.data,c=e.options,g=c.performPaneOperation,b=(0,f.A)(),A=b.container,x=b.runner,_=b.ports,D=(0,l.useRef)(null),E=(0,l.useRef)(null),R=(0,u.jt)(),I=(0,p.w)(_),F=(0,d.g)(),T=(0,l.useMemo)(function(){return F?m.YY:(0,m.Eo)(s,I)},[s,I,F]),P=null==s?void 0:null===(n=s.ports)||void 0===n?void 0:n.path,L=(0,l.useRef)(null!=P?P:"/"),U=(0,o._)((0,l.useState)(!1),2),N=U[0],O=U[1];(0,S.Qt)(function(){return{type:"webview",refresh:function(){var e;null===(e=D.current)||void 0===e||e.refresh()},navigate:function(e,n){var t;null===(t=D.current)||void 0===t||t.navigateTo(e,n)},setShouldShowAgentDeployBanner:O}},[]),(0,v.A)({container:A,runner:x,refreshWebView:function(){var e;null===(e=D.current)||void 0===e||e.refresh()}}),(0,w.A)({runner:x,refreshWebView:null===(t=D.current)||void 0===t?void 0:t.refresh});var M=(0,l.useCallback)(function(){return g({operation:"open",secondary:!0,pane:{type:"networking"}})},[g]),B=(0,l.useCallback)(function(){return g({operation:"open",secondary:!0,pane:{type:"agentChat"}})},[g]),H=(0,l.useCallback)(function(e){g({operation:"open",pane:e})},[g]),z=(0,l.useCallback)(function(e){g({operation:"replace",pane:{type:"webview",data:(0,i._)((0,r._)({},s),{previewScreenSize:e})}})},[s,g]),W=(0,l.useMemo)(function(){return void 0===T},[T]);(0,Y.El)({isVisible:!W&&c.isActive});var G=(0,l.useCallback)(function(e){L.current=e},[]),V=(0,l.useCallback)(function(){var e=E.current||R?"agent":"assistant";g({operation:"openPip",data:{type:e,eventId:"agent"===e&&E.current||"",port:T,path:L.current}})},[T,g,R]);return W?(0,a.Y)(y.A,{openNetworkingTool:M,openAgentPane:B}):(0,a.FD)(a.FK,{children:[(0,a.Y)(h.cR,{side:"right",children:T?(0,a.Y)(C.K0,{size:36,alt:"Picture in Picture",onClick:V,children:(0,a.Y)(k.A,{})}):null}),(0,a.Y)(m.QJ,{ref:D,initialPort:T,initialPath:P,openPane:H,shouldShowAgentDeployBanner:N,openNetworkingTool:M,ports:_,container:A,previewScreenSize:null==s?void 0:s.previewScreenSize,setPreviewScreenSize:z,onCurrentRelativeUrlChanged:G})]})},Icon:function(e){var n=e.size;return(0,a.Y)(x.Vx.Provider,{value:{color:A.LU.foregroundDimmer,size:n},children:(0,a.Y)(_.A,{})})},getTitle:function(){return"Webview"},description:"Preview your App as a web application",category:b.bY.WorkspaceFeatures,decode:R}},40379:(e,n,t)=>{"use strict";t.d(n,{P:()=>Ca});var r,i,o,a,l,s,c,u,d,p,f=t(94086),h=t(40174),m=t(49711),g=t(72275),v=t(66622),w=t(30758),y=t(13454),b=t(5482),S=t(84321),Y=t(51439),A=t(81383),C=t(9980),x=t(18317),_=t(83733),k=t(24481),D=t(76396),E=t(66061),R=t(56573),I=t(68463),F=t(27233),T=t(38520),P=t(40889),L=t(8367);function U(e){var n=(0,E.J2)(e.session.data);return(0,f.Y)(R.A,{headerContent:(0,f.Y)(P.EY,{children:"Session data"}),children:(0,f.Y)(D.A,{code:JSON.stringify(n,null,2),language:"json"})})}function N(e){var n=(0,E.J2)(e.session.data);return(0,f.Y)(F.nh,{id:e.session.id,label:(null==n?void 0:n.title)||"untitled"})}function O(e){var n=(0,E.J2)(e.event);return n?(0,f.Y)(L.S,{children:(0,f.Y)(R.A,{headerContent:(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(P.EY,{children:n.id}),(0,f.Y)(I.r,{textToCopy:n.id,tooltipSuccessText:"Copied to clipboard"})]}),children:(0,f.Y)(D.A,{code:JSON.stringify(n,null,2),language:"json"})})}):(0,f.Y)(L.S,{children:"No data found for event"})}var M={direction:"reverse",size:1e3,state:{revertedToEventId:null},transformer:function(e){return e}},B=t(81976),H=t(88859),z=t(10168),W=t(32842),G=t(40172),V=t(2420),j=t(31520),Z=(0,z.x)({wrapper:[W.wp.p(4)],button:[W.wp.my(2)],generalTab:[W.wp.py(12)]}),q={datasetId:"",runId:"",instanceId:"",replDescription:""},K={General:function(){var e="Show hidden events",n=(0,Y.oh)(),t=(0,Y.qO)();return(0,f.Y)(L.S,{css:Z.generalTab,children:(0,f.FD)(L.S,{gap:2,children:[(0,f.Y)(V.d,{"aria-label":e,isSelected:n,onChange:t,children:(0,f.Y)(P.EY,{children:e})}),(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:"Renders hidden events in the agent chat"})]})})},"Session state":function(){var e=(0,Y.Nv)(),n=(0,C.A)(),t=n.ref,r=n.view;return(0,w.useEffect)(function(){null==r||r.dispatch({changes:{from:0,to:r.state.doc.length,insert:JSON.stringify(e,void 0,2)}})},[r,e]),(0,f.Y)(A.Ay,{ref:t,initialDoc:JSON.stringify(e,void 0,2),language:"json",readOnly:!0})},"File context":function(){var e=(0,Y.nt)(),n=(0,H.Sx)(),t=(0,(0,Y.dm)().getAssistantMessageModel)({isAuthorized:!0}),r=(0,k.A)(),i=r.fs,o=r.dotReplit,a=(0,B.P)(i,o),l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1];return(0,w.useEffect)(function(){var r=!1;function i(){return(i=(0,y._)(function(){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,a({modelType:t,filePreferences:e,recentFiles:n()})];case 1:if(i=o.sent(),r)return[2];return c(i),[2]}})})).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r=!0}},[n,e,t,a]),(0,f.Y)(x.A,{json:s})},"Inject session":function(){var e,n=(0,_.A)(),t=(0,Y.oz)(),r=(e=(0,y._)(function(e){return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,t({replId:n,sessionType:S.dF3.AGENT_SESSION,seededEvent:e})];case 1:return r.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),i=(0,w.useMemo)(function(){return{"Edit File":{benchmarkParameters:q,contents:{$kind:"agentTimelineEventContents",agentTimelineEventContents:{toolName:"Edit file",planStepId:"",message:"Edited a file index.ts",toolData:{$kind:"fileEditData",fileEditData:{filePath:"index.ts",diff:"--- /index.js\n+++ /index.js\n@@ -8,7 +8,7 @@\n const app = express();\n console.log(`Files: index.js, node_modules, package.json, package-lock.json, replit.nix`);\n const PORT = process.env.PORT || 3000;\n-app.listen(PORT, () => {\n+    console.log(`Files: index.js, node_modules, package.json, package-lock.json, replit.nix`);\n     console.log(`Server is running on port ${PORT}`);\n     \n     // Display the list of files extracted from ls command output"}}}}},Packager:{benchmarkParameters:q,contents:{$kind:"agentTimelineEventContents",agentTimelineEventContents:{toolName:"Packager",planStepId:"",message:"Installing a few dependencies",toolData:{$kind:"packagerInstallData",packagerInstallData:{inputLanguage:"python",inputPackages:["numpy","pandas"],output:"Installing numpy, pandas...",isExecuting:!1,processId:""}}}}},Deployment:{benchmarkParameters:q,contents:{$kind:"agentTimelineEventContents",agentTimelineEventContents:{toolName:"Deployment",planStepId:"",message:"Suggested the user Deploy the project.",toolData:{$kind:"deployData",deployData:{}}}}},"Present Webview Result :3000/":{benchmarkParameters:q,contents:{$kind:"agentTimelineEventContents",agentTimelineEventContents:{toolName:"Present Result",planStepId:"",message:"Presented results to the user",toolData:{$kind:"presentResultsToolData",presentResultsToolData:{resultType:"website",websitePort:3e3,websiteRoute:"/",shellCommand:"",shellCommandWorkflowName:""}}}}},"Present Webview Result :3000/test":{benchmarkParameters:q,contents:{$kind:"agentTimelineEventContents",agentTimelineEventContents:{toolName:"Present Result",planStepId:"",message:"Presented results to the user",toolData:{$kind:"presentResultsToolData",presentResultsToolData:{resultType:"website",websitePort:3e3,websiteRoute:"/test",shellCommand:"",shellCommandWorkflowName:""}}}}}}},[]);return(0,f.FD)(L.S,{css:Z.wrapper,children:["Seed with:",Object.entries(i).map(function(e){var n=(0,v._)(e,2),t=n[0],i=n[1];return(0,f.Y)(G.$n,{css:Z.button,alignment:"start",text:t,onClick:function(){return r(i)}},t)})]})},"Session Events":function(){var e,n,t=(0,Y.NC)(),r=(0,E.Rj)(function(){return t.sessions.query({types:[S.dF3.CHAT,S.dF3.REPL_CREATION_V3,S.dF3.AGENT_SESSION,S.dF3.AGENT_REPLAY_SESSION]}).map(function(e){return Array.from(e.values())})},[t],{default:[]}),i=(0,v._)((0,w.useState)(null!==(n=null===(e=r[0])||void 0===e?void 0:e.id)&&void 0!==n?n:null),2),o=i[0],a=i[1],l=(0,E.Rj)(function(){return o?t.sessions.get(o):null},[o,t]),s=(0,E.J2)(null==l?void 0:l.latest),c=(0,E.Rj)(function(){return null==s?void 0:s.transform(M)},[s]);return(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(T.l,{label:"Select a session",selectedKey:o,onSelectionChange:function(e){"string"==typeof e&&a(e)},children:r.map(function(e){return(0,f.Y)(N,{session:e},e.id)})}),l?(0,f.Y)(U,{session:l}):null,(0,f.Y)(L.S,{children:null==c?void 0:c.map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.Y)(O,{event:r},t)})})]})}},$=(0,z.x)({wrapper:[W.wp.flex.growAndShrink(1),(r={},(0,g._)(r,"& > div",[W.wp.flex.growAndShrink(1),W.wp.overflowY("auto"),W.wp.colWithGap(4)]),(0,g._)(r,"& > div > div:first-of-type",[W.wp.flex.shrink(1),W.wp.overflowY("auto")]),(0,g._)(r,"& > div > div:last-of-type",[W.wp.flex.growAndShrink(1),W.wp.overflowY("auto")]),r)]}),J=t(76296),Q=(0,z.x)({container:[W.wp.py(8),W.wp.px(12),W.wp.colWithGap(12)]}),X=t(34679),ee=t(27189),en=t(20837),et=t(45009),er=t(30632),ei=t(72813);function eo(){var e=(0,et._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return eo=function(){return e},e}var ea={},el=(0,er.J1)(eo()),es=t(95123),ec=t(51302),eu=t(88966),ed=t(31955);function ep(e){var n=e.event,t=n.input,r=n.output,i=n.error,o=n.start,a=n.end,l=n.cached,s=(0,v._)((0,w.useState)(!0),2),c=s[0],u=s[1],d=(0,w.useCallback)(function(){return u(function(e){return!e})},[]),p="bash"===t[0]&&"-c"===t[1]?t.slice(2).join(" "):t.join(" "),h=r.trimEnd();return(0,f.FD)(L.S,{css:[(0,eu.Li)(i?"negative":"positive"),l?{opacity:.75}:void 0,W.wp.borderRadius(8)],children:[(0,f.FD)(L.S,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[W.wp.py(4),W.wp.px(8),W.wp.font.code,W.wp.cursor.pointer],row:!0,gap:4,justify:"space-between",children:[(0,f.FD)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",p]}),(0,f.FD)("span",{css:[W.wp.color.foregroundDimmer,W.wp.flex.shrink(0)],children:[i?(0,f.Y)("span",{css:[W.wp.mr(16)],children:i}):null,l?(0,f.Y)("span",{children:"CACHED"}):(0,f.FD)("span",{children:[a-o," ms"]})]})]}),c?null:(0,f.Y)(L.S,{css:[W.wp.px(2),W.wp.pb(2),W.wp.borderRadius(0,0,8,8)],children:(0,f.Y)(ed.ui,{elevated:!0,css:[W.wp.p(8),W.wp.borderRadius(8)],children:(0,f.Y)(D.A,{code:h})})})]})}var ef=t(1689),eh=t(88249),em=t(6806),eg=t(10524),ev=t(52186);function ew(e){var n=e.t,t=e.children;return(0,f.FD)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,f.FD)(P.EY,{css:{minWidth:"8em"},multiline:!1,children:[n,":"," "]}),(0,f.Y)("span",{children:t})]})}var ey=t(55606),eb=t(17789),eS=t(89257),eY=t(95235),eA=t(28354),eC=t(74547),ex=t(73197),e_=(0,z.x)({container:[W.wp.height("100%"),W.wp.position.relative],controls:[W.wp.px(4),W.wp.pb(8),W.wp.backgroundColor.backgroundDefault]}),ek=(0,z.x)({in:[W.wp.color.greenStrongest],out:[W.wp.color.redStrongest],error:[W.wp.color.magentaStrongest]}),eD=[W.wp.flex.row,W.wp.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],eE=(0,z.x)({clickable:(0,ee._)(eD),clickableHighlighted:(0,ee._)(eD).concat([W.wp.backgroundColor.accentPositiveDimmer]),inner:[W.wp.flex.grow(1),W.wp.rowWithGap(4),W.wp.maxWidth("100%")],log:[W.wp.flex.growAndShrink(1),{opacity:.5}],row:[W.wp.my(4),W.wp.mx(4)],timestamp:[W.wp.fontSize(13),{cursor:"pointer"}]});function eR(e){var n,t=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,w.useMemo)(function(){return r.highlightOnly&&(0,eb.jQ)(t,r)},[r,t]),l=null!==(n=t.cmd.channel)&&void 0!==n?n:0,s=(0,w.useMemo)(function(){var e=(0,en._)({},t.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[t]),c=i?t.timestamp-i:t.timestamp,u=(0,v._)((0,eh.A)(!0),2),d=u[0],p=u[1];return(0,f.FD)(L.S,{css:eE.row,children:[(0,f.Y)(L.S,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:a?eE.clickableHighlighted:eE.clickable,children:(0,f.FD)(L.S,{css:eE.inner,children:[(0,f.Y)(P.EY,{className:"icon",multiline:!1,children:"in"===t.dir?(0,f.Y)(L.S,{css:ek.in,children:""}):"out"===t.dir?(0,f.Y)(L.S,{css:ek.out,children:""}):(0,f.Y)(L.S,{css:ek.error,children:""})}),(0,f.Y)(P.EY,{className:"link",multiline:!1,children:(0,f.FD)("code",{children:["#",l," - ",t.channel.service,t.channel.name?"::".concat(t.channel.name):""]})}),(0,f.Y)(P.EY,{css:eE.log,multiline:!1,children:(0,f.Y)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s.formatted})}),null!=c&&(0,f.Y)(L.S,{style:{opacity:.5},onClick:function(){o(t.timestamp)},children:(0,f.Y)(P.EY,{css:eE.timestamp,multiline:!1,children:t.timestamp===i?"(reference)":(0,f.FD)(f.FK,{children:[c.toFixed(0)," ms"]})})})]})}),!d&&(0,f.Y)(f.FK,{children:void 0!==s.cleaned&&(0,f.Y)(eS.U,{name:"cmd",src:s.cleaned})})]})}var eI=(0,z.x)({listContainer:[W.wp.position.relative,W.wp.height("100%")],listScroller:[W.wp.overflow("auto"),W.wp.coverContainer],listBox:[W.wp.width("100%"),W.wp.position.relative],listItem:[W.wp.position.absolute,W.wp.top(0),W.wp.left(0),W.wp.width("100%")]}),eF=(0,w.memo)(function(e){var n=e.logs,t=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,w.useRef)(null),a=(0,ey.Te)({count:n.length,getScrollElement:function(){return o.current},getItemKey:function(e){return n[e].id},estimateSize:function(){return 30},overscan:10});return(0,f.Y)("div",{css:eI.listContainer,children:(0,f.FD)("div",{ref:o,css:eI.listScroller,children:[(0,f.Y)("div",{css:eI.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,s=e.start,c=n[o];return c?(0,f.Y)("div",{"data-index":o,ref:a.measureElement,css:eI.listItem,style:{transform:"translateY(".concat(s,"px)")},children:(0,f.Y)(eR,{log:c,filters:t,timeRef:r,setTimeRef:i})},l.toString()):null})}),(0,f.Y)("div",{className:"bottom-anchor"})]})})}),eT=function(e){var n=e.filters,t=e.updateFilters;return(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,f.Y)(eA.pd,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,v._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{n=new RegExp(i,o)}catch(e){}}t({regexp:n})},placeholder:"\\w+,gi"}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,f.Y)(eA.pd,{id:"channels",onChange:function(e){t({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,f.Y)(eC.z,{css:W.wp.rowWithGap(16),name:"direction",value:n.direction,onChange:function(e){var n=e.target.value;t({direction:"in"===n||"out"===n||""===n?n:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(eC.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,f.Y)(eC.z,{css:W.wp.rowWithGap(16),name:"filter-style",value:n.highlightOnly?"highlight":"filter",onChange:function(e){return t({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(eC.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},eP=t(98734),eL=t(44019),eU=t(73540),eN=t(2459),eO=(0,z.x)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[W.wp.flex.shrink(1)]}),eM=t(186),eB=t(97285),eH=t(52431),ez=t(99813),eW=t(72653),eG=(0,ez.eU)(null),eV=(0,ez.eU)(null),ej=function(){var e=(0,eW.Xr)(eG),n=(0,eW.Xr)(eV);return(0,w.useCallback)(function(t){if(!t){e(null),n(null);return}e({id:-1,connectionString:t,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,isEphemeral:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase",maxComputeUnits:1,minComputeUnits:1,historyRetentionSeconds:86400,timeCreated:new Date().toString()}),n(t)},[n,e])},eZ=t(24955),eq=t(31060),eK=t(65640),e$=t(26196),eJ=t.n(e$),eQ=t(77119),eX=t(96367),e0=t(19327),e1=t(26190),e2=t(53460),e5="(click to upload dev build)",e4=(0,ez.eU)(["IDLE","pid2 running latest prod ".concat(e5)]);function e3(e,n){return e8.apply(this,arguments)}function e8(){return(e8=(0,y._)(function(e,n){var t,r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return[4,e.exec("printenv","REPL_HOME")];case 1:if((t=a.sent()).error||!t.output)return n("IDLE","could not printenv REPL_HOME"),[2,null];return r=t.output.trim(),i="/home/runner/bin/pid2",o=eJ().join(r,".local/bin/pid2"),[2,{REPL_HOME:r,pid2BinDst:i,pid2BinDst2:o}]}})})).apply(this,arguments)}function e7(){return(e7=(0,y._)(function(e,n,t){var r,i,o,a,l,s,c,u,d,p,f,h,m,g;return(0,b.YH)(this,function(v){switch(v.label){case 0:return[4,(0,e2.EW)()];case 1:if("dev"===(o=v.sent()))return t("IDLE","dev is not a version we can upload to the container"),[2];return[4,function(e,n,t,r){return e6.apply(this,arguments)}(o,e,n,t)];case 2:return v.sent(),[4,e3(e,t)];case 3:if(!(a=v.sent()))return[2];return l=eJ().join(a.REPL_HOME,".cache/replit/pid2/".concat(o)),s=eJ().join(l,"pid2"),[4,e.exec("stat","-c","%N",a.pid2BinDst)];case 4:return c=v.sent(),[4,e.exec("stat","-c","%N",a.pid2BinDst2)];case 5:if(u=v.sent(),!c.error&&(null===(r=c.output)||void 0===r?void 0:r.includes(s))&&!u.error&&(null===(i=u.output)||void 0===i?void 0:i.includes(s)))return t("IDLE","pid2 version ".concat(o," already exists in container ").concat(e5)),[2];return d=eJ().dirname(a.pid2BinDst),[4,e.exec("mkdir","-p",d)];case 6:if((p=v.sent()).error)throw Error("pid2: mkdir ".concat(d,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst)];case 7:if((f=v.sent()).error)throw Error("pid2: link ".concat(a.pid2BinDst,": ").concat(f.error));return h=eJ().dirname(a.pid2BinDst2),[4,e.exec("mkdir","-p",h)];case 8:if(v.sent().error)throw Error("pid2: mkdir ".concat(h,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst2)];case 9:if(m=v.sent(),f.error)throw Error("pid2: link ".concat(a.pid2BinDst2,": ").concat(m.error));return t("RESTARTING","pid2 version ".concat(o," installed, restarting pid2")),[4,e.exec("bash","-c","kill -9 $(pidof pid2)")];case 10:return(g=v.sent()).error&&t("ERROR","pid2: couldn't kill ".concat(g.error)),t("IDLE","pid2 version ".concat(o," installed ").concat(e5)),[2]}})})).apply(this,arguments)}function e6(){return(e6=(0,y._)(function(e,n,t,r){var i,o,a,l,s,c,u,d,p,f;return(0,b.YH)(this,function(h){switch(h.label){case 0:return i=eJ().join(eX.Dl,".cache/replit/pid2/".concat(e)),o=eJ().join(i,"success"),[4,t.stat(o)];case 1:if((a=h.sent()).exists&&a.type===e0.pt.File)return[2];return r("UPLOADING","pid2: uploading version ".concat(e," to container...")),[4,fetch("/pid2/bundle")];case 2:if(!(l=h.sent()).ok)throw Error("Error fetching PID2 bundle: ".concat(l.statusText));if(!l.body)throw Error("Error fetching PID2 bundle: ".concat(l));return[4,l.arrayBuffer()];case 3:return s=h.sent(),c=".cache/replit/pid2/pid2-".concat(e,".tar.gz"),[4,t.writeFile(c,eQ.A.from(s))];case 4:if((u=h.sent()).error)throw Error("pid2: writing tarball: ".concat(u.error));return[4,n.exec("mkdir","-p",i)];case 5:if((d=h.sent()).error)throw Error("pid2: mkdir: ".concat(d.error));return[4,n.exec("tar","-C",i,"-xf",c)];case 6:if((p=h.sent()).error)throw Error("pid2: untar: ".concat(p.error));return[4,t.writeFile(eJ().join(i,"pid2.version"),e)];case 7:if((f=h.sent()).error)throw Error("pid2: writeVersion: ".concat(f.error));return[4,n.exec("touch",o)];case 8:return h.sent(),[4,n.exec("rm","-f",c)];case 9:return h.sent(),r("UPLOADED","pid2: ".concat(e," upload success")),[2]}})})).apply(this,arguments)}var e9=t(29665),ne=t(65640),nn=(0,z.x)({view:[W.wp.pt(16),W.wp.px(12),W.wp.colWithGap(12)],uploadMessage:[W.wp.flex.growAndShrink(1),W.wp.width("100%"),W.wp.font.code]}),nt=t(75895),nr=t(43952),ni=t(60762),no=t(66144),na=t(16608),nl=t(2814),ns=t(9907),nc=t(76008),nu=t(36601),nd=t(75362),np=t(76862);function nf(e){var n=(0,v._)((0,w.useState)(null),2),t=n[0],r=n[1],i=(0,E.J2)(e.logs),o=null!==t?i[i.length-t-1]:null,a=(0,C.A)(),l=a.ref,s=a.view;(0,w.useEffect)(function(){s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:o?o.data:""}})},[o,s]);var c=(0,w.useRef)(t);return(0,w.useEffect)(function(){c.current=t},[t]),(0,w.useEffect)(function(){return e.logs.subscribe(function(e){var n=c.current;(null===n||e.length-2===n)&&r(e.length-1)})},[e.logs]),(0,f.FD)(L.S,{css:nY.response,row:!0,gap:0,children:[(0,f.FD)(L.S,{css:nY.responseL,children:[(0,f.Y)(L.S,{css:nY.logHeader,align:"start",justify:"center",children:o?null==o?void 0:o.name:null}),(0,f.Y)(L.S,{css:nY.logData,children:(0,f.Y)(A.Ay,{ref:l,language:"json",readOnly:!0})})]}),(0,f.FD)(L.S,{css:nY.responseR,children:[(0,f.Y)(L.S,{css:nY.logsHeader,children:(0,f.Y)(G.$n,{size:"small",text:"Clear",disabled:!i.length,onClick:e.onClear})}),(0,f.Y)(L.S,{css:nY.logsList,children:i.map(function(e,n){var o=i.length-n-1;return(0,f.Y)("code",{role:"button",tabIndex:0,className:t===o?"selected":void 0,onClick:function(){r(o)},onKeyDown:function(e){"Enter"===e.key&&r(o)},children:e.name},o)})})]})]})}var nh=no.Pe.define(),nm=no.Pe.define(),ng=no.Pe.define(),nv=na.Lz.theme({"&":{border:"1px solid ".concat(eZ.LU.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(eZ.LU.outlineDefault)}}),nw=new nu.k(function(e,n){return[nv,no.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(nh)&&(e=l.value),l.is(ng)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(t){return[na.Z9.define(function(){var t,r,i=new AbortController;return{update:(t=(0,y._)(function(t){var o,a,l,s,c,u,d,p,f,h,m,g,v,w,y,S,Y,A,C,x,_,k,D,E,R,I,F,T,P,L,U,N,O,M;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!e)return[2];o=void 0,a=!0,l=!1,s=void 0;try{for(c=t.transactions[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){d=u.value,p=!0,f=!1,h=void 0;try{for(m=d.effects[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var B;(v=g.value).is(nh)&&v.value&&(o=v.value),v.is(nm)&&(null==r||r.write((B=v.value,JSON.parse(B,function(e,n){return(void 0===n?"undefined":(0,ni._)(n))==="object"&&"Uint8Array"===n.type&&void 0!==n.data?new Uint8Array(n.data):n})))),v.is(ng)&&i.abort()}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(!o)return[2];switch(w=o.service,y=o.procedure,S=o.type,Y=e.client[w][y][S],A=void 0,C=1,o.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,Y(o.input,{signal:i.signal})];case 2:return x=b.sent(),n({name:"".concat(w,".").concat(y,".").concat(S,".").concat(C),data:ny(x)}),t.view.dispatch({effects:ng.of(null)}),[3,9];case 3:return[4,Y(null!==(_=o.input)&&void 0!==_?_:void 0,{signal:i.signal})];case 4:return D=(k=b.sent()).reqWritable,E=k.resReadable,r=D,A=E,[3,9];case 6:return A=b.sent().resReadable,[3,9];case 7:return[4,Y(null!==(R=o.input)&&void 0!==R?R:void 0,{signal:i.signal})];case 8:return F=(I=b.sent()).reqWritable,I.finalize,r=F,[3,9];case 9:if(!A)return[3,22];T=!1,P=!1,b.label=10;case 10:b.trys.push([10,15,16,21]),U=(0,nt._)(A),b.label=11;case 11:return[4,U.next()];case 12:if(!(T=!(N=b.sent()).done))return[3,14];O=N.value,n({name:"".concat(w,".").concat(y,".").concat(S,".").concat(C),data:ny(O)}),C++,b.label=13;case 13:return T=!1,[3,11];case 14:return[3,21];case 15:return M=b.sent(),P=!0,L=M,[3,21];case 16:if(b.trys.push([16,,19,20]),!(T&&null!=U.return))return[3,18];return[4,U.return()];case 17:b.sent(),b.label=18;case 18:return[3,20];case 19:if(P)throw L;return[7];case 20:return[7];case 21:t.view.dispatch({effects:ng.of(null)}),b.label=22;case 22:return[2]}})}),function(e){return t.apply(this,arguments)})}}),na.Lz.editable.from(t,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),ns.x.compute([t,"doc"],function(e){var n,r;return e.doc.length?null:(null===(n=e.field(t))||void 0===n?void 0:n.type)==="stream"||(null===(r=e.field(t))||void 0===r?void 0:r.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),na.w4.of([{key:"Tab",run:function(e){var n;return!e.state.doc.length&&(e.dispatch({changes:null!==(n=e.state.facet(ns.x)[0])&&void 0!==n?n:void 0}),!0)}}]),na.S7.of(function(n){var r=function(){if(e){var t=nS(n.state.doc.toString());if(t){var r=t.type,i=t.service,o=t.procedure,a=t.input;r&&i&&o&&n.dispatch({effects:nh.of({type:r,service:i,procedure:o,input:a}),changes:"stream"===r||"upload"===r?{from:0,to:n.state.doc.length,insert:""}:void 0})}}},i=function(){n.dispatch({effects:nm.of(n.state.doc.toString()),changes:{from:0,to:n.state.doc.length,insert:""}})},o=function(){var r,i=n.state.field(t),o=new Set,a=n.state.doc.toString();return e&&i&&"rpc"!==i.type&&(o.add("Close"),("stream"===i.type||"upload"===i.type)&&a.startsWith("{")&&a.endsWith("}")&&o.add("Send")),e&&!i&&a.length&&(o.add("Clear"),(null===(r=nS(a))||void 0===r?void 0:r.type)&&o.add("Send")),o},a=nC.create({enabled:o(),onSend:function(){null==n.state.field(t)?r():i(),n.focus()},onClose:function(){n.dispatch({effects:[ng.of(null),nh.of(null)],changes:{from:0,to:n.state.doc.length,insert:""}})},onClear:function(){n.dispatch({changes:{from:0,to:n.state.doc.length,insert:""}}),n.focus()}});return{dom:a,top:!1,update:function(e){if((0,nl.$H)(e,t,"doc")){var n=e.state.field(t);nC.update(a,function(e){return(0,nr._)((0,en._)({},e),{enabled:o(),inProgress:n?"".concat(n.type,": ").concat(n.service,".").concat(n.procedure):void 0})})}}}})]}})]});function ny(e){return JSON.stringify(e,function(e,n){return n instanceof Uint8Array?Array.from(n):n},2)}var nb=["rpc","stream","subscribe","upload"];function nS(e){try{n=JSON.parse(e)}catch(e){return null}var n,t=0,r=null,i=null,o=null;try{for(;t<3;){var a=Object.keys(n)[0];if(void 0===a)throw Error("expected key");if(0===t&&(r=a),1===t&&(i=a),2===t){if(nb.includes(a))o=a;else throw Error("expected procedure type")}n=n[a],t++}return{type:o,service:r,procedure:i,input:n}}catch(e){return{type:o,service:r,procedure:i,input:null}}}var nY=(0,z.x)({buttons:[W.wp.p(4),W.wp.rowWithGap(4)],status:[W.wp.p(4),W.wp.pb(0)],response:[W.wp.flex.growAndShrink(1),W.wp.border({width:1,color:eZ.LU.outlineDefault}),{marginTop:"4px"}],logHeader:[W.wp.height("37px"),W.wp.display.flex,W.wp.p(4),W.wp.border({width:1,color:eZ.LU.outlineDefault,direction:"bottom"})],logData:[W.wp.display.block,W.wp.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[W.wp.display.flex,W.wp.align.end,W.wp.p(4),W.wp.border({width:1,color:eZ.LU.outlineDefault,direction:"bottom"})],logsList:[W.wp.display.block,W.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseL:[W.wp.display.flex,W.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseR:[W.wp.display.flex,W.wp.border({width:1,color:eZ.LU.outlineDefault,direction:"left"}),W.wp.width("40%"),W.wp.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(eZ.LU.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:eZ.LU.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),nA=["Send","Close","Clear"],nC=new nc.E(function(e){return(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{css:nY.status,children:(0,f.FD)(P.EY,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,f.FD)(f.FK,{children:["In progress - ",e.inProgress]}):null]})}),(0,f.Y)(L.S,{css:nY.buttons,children:Object.values(nA).map(function(n){return(0,f.Y)(G.$n,{size:"small",disabled:!e.enabled.has(n),text:n,onClick:function(){switch(n){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},n)})})]})});function nx(){var e=(0,et._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return nx=function(){return e},e}function n_(){var e=(0,et._)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return n_=function(){return e},e}var nk={},nD=(0,er.J1)(nx()),nE=(0,er.J1)(n_(),nD),nR=t(52757),nI=t(94416),nF=(0,nR.AH)([W.wp.colWithGap(16),W.wp.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),nT=t(67925),nP=t(3274),nL=t(39651),nU=t(21980),nN=t(3460),nO=t(84911),nM=t(47303);function nB(e){var n=e.sessionId,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(""),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1],d=(0,nL.A)().showConfirm,p=(0,nO.c)();return null==n?(0,f.Y)(L.S,{children:(0,f.Y)(P.EY,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,f.FD)(L.S,{gap:8,children:[(0,f.FD)(P.EY,{variant:"small",multiline:!1,children:["RUM Session ID: ",n]}),(0,f.Y)(P.EY,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(eA.ov,{id:p("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(nM.S,{id:p("issueInRecording"),checked:c,onChange:function(e){return u(e)}}),(0,f.Y)("label",{htmlFor:p("issueInRecording"),children:(0,f.Y)(P.EY,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,f.Y)(G.$n,{onClick:function(){var e=(0,nP.A)();i(!0),(0,nU.yH)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:c,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var nH=t(1953),nz=t(16483),nW=t(20387),nG=(0,z.x)({wrapper:[W.wp.p(4)],noWorkflow:[W.wp.p(4),W.wp.flex.growAndShrink(1)]}),nV=function(e){return e.Repl="repl",e.Pid2="pid2",e.Pid2Repl="pid2Repl",e.MuxedShell="pid2MuxedShell",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum",e.CommandBar="commandBar",e.Workflows="workflows",e.TriggerBSOD="triggerBSOD",e}(nV||{}),nj=(i={},(0,g._)(i,"repl",function(){var e,n,t,r,i,o,a,l,s,c,u=(0,_.A)(),d=(e={variables:{replId:u}},n=(0,en._)({},nk,e),ei.I(nE,n)).data,p=(null==d?void 0:d.repl.__typename)==="Repl"?JSON.parse(JSON.stringify(d.repl)):void 0;return p&&(delete p.__typename,null===(t=p.user)||void 0===t||delete t.__typename,null===(r=p.origin)||void 0===r||delete r.__typename,delete p.config.__typename,null===(i=p.source)||void 0===i||delete i.__typename,null===(a=p.source)||void 0===a||null===(o=a.release)||void 0===o||delete o.__typename,null===(c=p.source)||void 0===c||null===(s=c.release)||void 0===s||null===(l=s.repl)||void 0===l||delete l.__typename),(0,f.FD)(L.S,{css:nF,children:[(0,f.Y)(nI.A,{replId:u}),(0,f.Y)("div",{children:p?(0,f.Y)(x.A,{json:p}):null})]})}),(0,g._)(i,"pid2",function(){var e,n,t,r,i,o,a,l,s,c,u,d=(0,k.A)().container,p=null===(c=d.getContext())||void 0===c?void 0:c.repl,h=(0,e2.yB)(),m=(0,v._)((0,w.useState)("unknown"),2),g=m[0],S=m[1],Y=(0,v._)((0,w.useState)(null),2),A=Y[0],C=Y[1],x=(0,v._)((0,w.useState)(null),2),_=x[0],D=x[1],E=(0,v._)((0,w.useState)(null),2),R=E[0],I=E[1],F=(t=(n=(0,k.A)()).fs,i=null===(e=(r=n.container).getContext())||void 0===e?void 0:e.repl,o=(0,eW.Xr)(e4),l=(a=(0,v._)((0,eW.md)(e4),2))[0],a[1],s=(0,e1.A)(l),(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||!("IDLE"===s.current||"ERROR"===s.current))return[2];return o(["STARTING","starting pid2 upload process"]),[4,function(e,n,t){return e7.apply(this,arguments)}(r,t,function(e,n){o([e,n])})];case 1:return e.sent(),[2]}})}),[s,i,o,r,t])),T=(0,v._)((0,eW.md)(e4),2),U=T[0],N=T[1],O=(0,e9.I)(function(e){return(0,y._)(function(){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return S("loading"),n=setTimeout(function(){S("unhealthy")},5e3),[4,e3(d,C)];case 1:if(!(t=i.sent()))return S("unhealthy"),[2];return[4,d.exec("stat","-c","%N",t.pid2BinDst2)];case 2:return(r=i.sent()).error?C("LocalPid2 not installed: ".concat(r.output)):C("LocalPid2 installed: ".concat(r.output)),e.healthCheck.ping.rpc({}).then(function(e){D(e.payload),clearTimeout(n),e.ok?S("ok"):S("unhealthy")}).catch(function(){clearTimeout(n),S("unhealthy")}),[2]}})})});return u="ok"===g?"green":"unhealthy"===g?"red":"grey",(0,f.FD)(L.S,{css:nn.view,children:[(0,f.FD)(P.Y9,{level:3,children:["Is pid2 enabled? ",h?"Yes":"No"]}),(0,f.Y)(G.$n,{text:"Ping pid2 (state: ".concat(g,")"),colorway:u,disabled:!O,onClick:function(){null==O||O()}}),_?(0,f.Y)("code",{children:JSON.stringify(_,null,2)}):null,A?(0,f.Y)("code",{children:A}):null,(0,f.Y)(G.$n,{colorway:"purple",text:"Upload pid2 to Repl",onClick:(0,y._)(function(){return(0,b.YH)(this,function(e){return p&&F(),[2]})})}),(0,f.FD)(P.EY,{css:nn.uploadMessage,children:["[",U,"] ",N]}),(0,f.Y)(G.$n,{colorway:"red",text:"Delete uploaded pid2",onClick:(0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!p)return[2];return[4,e3(d,I)];case 1:if(!(e=r.sent()))return[2];return[4,d.exec("rm","-f",e.pid2BinDst)];case 2:return n=r.sent(),[4,d.exec("rm","-f",e.pid2BinDst2)];case 3:if(t=r.sent(),n.error)return I("".concat(n.error,": ").concat(n.output)),[2];if(t.error)return I("".concat(t.error,": ").concat(t.output)),[2];return I("uploaded pid2 deleted"),[2]}})})}),R?(0,f.Y)(P.EY,{css:nn.uploadMessage,children:R}):null,(0,f.Y)(G.$n,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=h,ne.log("window.pid2: ",h)}})]})}),(0,g._)(i,"pid2Repl",function(){var e=(0,v._)((0,w.useState)(function(){return new nd.N([])}),1)[0],n=(0,w.useCallback)(function(n){return e.update(function(e){return[n].concat((0,ee._)(e))})},[e]),t=(0,v._)((0,w.useState)(null),2),r=t[0],i=t[1];(0,np.b)(function(e){return i({client:e}),function(){return i(null)}},[]);var o=nw.use(r,n);return(0,f.FD)(f.FK,{children:[(0,f.Y)(A.Ay,{language:"json",hideGutter:!0,extensions:o}),(0,f.Y)(nf,{logs:e,onClear:function(){return e.set([])}})]})}),(0,g._)(i,"pid2MuxedShell",function(){var e,n=(0,v._)((0,w.useState)([]),2),t=n[0],r=n[1];return(0,np.b)((e=(0,y._)(function(e,n){var t,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,i=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,o=!1,a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),s=(0,nt._)(i),p.label=2;case 2:return[4,s.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];r(u.payload.processes),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),a=!0,l=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=s.return))return[3,9];return[4,s.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),(0,f.Y)(L.S,{children:(0,f.Y)(x.A,{json:t})})}),(0,g._)(i,"logs",function(e){var n=e.isHidden,t=(0,v._)((0,eh.A)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,eb.jg)(),c=(0,eb.lY)(),u=(0,eb.x6)(),d=(0,eb.R7)(),p=(0,eb.G2)(),h=(0,eb.ou)();return n?null:(0,f.FD)(L.S,{css:e_.container,gap:8,children:[(0,f.FD)(L.S,{css:e_.controls,gap:8,children:[(0,f.Y)(G.$n,{colorway:c?void 0:"positive",onClick:u,text:c?"Stop logging goval":"Start logging goval"}),(0,f.FD)(L.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(G.$n,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,f.Y)(G.$n,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,f.Y)(eY.K0,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s)),n=document.createElement("a");n.setAttribute("href",e);var t=new Date().toISOString();n.setAttribute("download","logs-".concat(t.slice(0,t.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),n.click()},size:32,children:(0,f.Y)(ex.A,{})}),(0,f.Y)(G.$n,{colorway:"negative",onClick:function(){return h()},text:"Clear logs"})]}),r?(0,f.Y)(eT,{filters:d,updateFilters:function(e){p((0,en._)({},d,e))}}):null]}),(0,f.Y)(eF,{logs:s,filters:d,timeRef:a,setTimeRef:l})]})}),(0,g._)(i,"lsp",eS.O),(0,g._)(i,"ai",X.uG),(0,g._)(i,"aiChat",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.isHidden,t=e.performPaneOperation;return n?null:(0,f.Y)(L.S,{css:$.wrapper,children:(0,f.FD)(j.tU,{children:[(0,f.Y)(j.wb,{"aria-label":"Tabs",children:Object.keys(K).map(function(e){return(0,f.Y)(j.oz,{children:e},e)})}),(0,f.Y)(j.T2,{children:Object.entries(K).map(function(e){var n=(0,v._)(e,2),r=n[0],i=n[1];return(0,f.Y)(j.Kp,{children:(0,f.Y)(i,{performPaneOperation:t})},r)})})]})})}),(0,g._)(i,"git",function(){var e,n=(0,v._)((0,w.useState)([]),2),t=n[0],r=n[1],i=(e=(0,en._)({},ea,void 0),ei.I(el,e)).data,o=(0,es.A)(ec.Y);return(0,w.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,ee._)(e)).slice(0,100)})},[o]),(0,f.FD)(L.S,{css:[W.wp.p(8)],children:[(0,f.FD)(ed.ui,{elevated:!0,css:[W.wp.borderRadius(8),W.wp.p(8),W.wp.mb(8)],children:[(0,f.Y)("span",{children:"Git Service Connection Info"}),(0,f.Y)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,n){return"accessToken"===e?"censored":n},2):"No gitHubInfo"})]}),(0,f.Y)(L.S,{gap:4,children:t.length?t.map(function(e){return(0,f.Y)(ep,{event:e},e.key)}):"No events yet..."})]})}),(0,g._)(i,"history2",function(){var e=(0,es.A)(em.pX)(),n=(0,es.A)(em.aP)(),t=(0,v._)((0,eh.A)(!1),2),r=t[0],i=t[1];if(!e)return null;var o=e.filePath,a=e.changes,l=e.users,s=e.version,c=e.playing,u=e.count,d=a[s];if(!d)return(0,f.FD)(L.S,{children:[(0,f.FD)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,f.Y)("pre",{children:JSON.stringify(e,null,2)})]});var p=null==l?void 0:l[d.userId],h=d.timestamp,m=r&&n?function(e,n){try{return(0,ef.$1)(e,n).op}catch(e){return e}}(d.changes,n.state.doc.sliceString(0)):null;return(0,f.FD)(L.S,{gap:16,css:[W.wp.p(4)],children:[(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(ew,{t:"File",children:(0,f.Y)("pre",{children:o})}),(0,f.FD)(ew,{t:"Version",children:[s," / ",u-1]}),(0,f.Y)(ew,{t:"Playing",children:(0,f.Y)(eg.R,{children:c?"true":"false"})}),(0,f.Y)(ew,{t:"Date",children:(0,f.Y)(ev.Dc,{date:h})})]}),p?(0,f.FD)(L.S,{children:[(0,f.Y)(ew,{t:"Author",children:p.username}),(0,f.FD)(L.S,{css:[W.wp.pl(8),W.wp.colWithGap(4)],children:[(0,f.Y)(ew,{t:"ID",children:p.id}),(0,f.Y)(ew,{t:"Name",children:p.username}),(0,f.Y)(ew,{t:"Image",children:(0,f.Y)("a",{href:p.image,children:p.image})})]})]}):null,(0,f.Y)(V.d,{isSelected:r,onChange:i,children:"Changes"}),d?null:"No changes",r&&d?(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{children:[(0,f.Y)(ew,{t:"Changeset",children:(0,f.Y)("pre",{children:JSON.stringify(d,null,2)})}),n?(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{css:[W.wp.mt(4)],children:[(0,f.Y)(ew,{t:"OT",children:(0,f.Y)("pre",{children:JSON.stringify(m,null,2)})}),(0,f.Y)("p",{children:(0,f.FD)("small",{children:["Note that the OT value is translated ",(0,f.Y)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,g._)(i,"metadata",function(){var e=(0,k.A)().container;(0,eU.A)(e);var n=e.getConnectionMetadata();if(!n)return(0,f.Y)("div",{children:"no token yet, wait for connection"});var t=n.token,r=new URL(n.conmanURL).host,i='./conman-repl -t "'.concat(t,'" -u ').concat(r);return(0,f.FD)("div",{css:eO.root,children:[(0,f.FD)(L.S,{row:!0,gap:2,children:[(0,f.FD)(P.EY,{css:eO.command,multiline:!1,children:["conman Repl command: ",(0,f.Y)(eg.R,{children:i})]}),(0,f.Y)(eY.K0,{alt:"Copy to clipboard",onClick:function(){return(0,eP.A)(i)},children:(0,f.Y)(eN.A,{})})]}),(0,f.FD)("div",{children:["metadata:",(0,f.Y)("pre",{children:JSON.stringify(n,null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{}),(0,f.FD)("div",{children:["parsed token:",(0,f.Y)("pre",{children:JSON.stringify((0,eL.pI)(n.token),null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{})]})}),(0,g._)(i,"override",function(){var e=(0,v._)((0,w.useState)(eB.A.get("gurl","string")||""),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=ej(),l=(0,eM.RL)(),s=""===n?"null":JSON.stringify((0,eH.x)(n),null,2);return(0,f.FD)(L.S,{css:[W.wp.pt(16),W.wp.px(12),W.wp.colWithGap(12)],children:[(0,f.FD)(L.S,{gap:12,children:[(0,f.Y)(eq.Ay,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:n,onChange:function(e){return t(e.currentTarget.value)}}),(0,f.FD)("pre",{children:["metadata override preview:",s]}),(0,f.FD)(L.S,{row:!0,gap:12,children:[(0,f.Y)(G.$n,{colorway:"positive",onClick:function(){eB.A.set("gurl",n),window.location.reload()},text:"Set gurl and reload"}),(0,f.Y)(G.$n,{colorway:"yellow",onClick:function(){eB.A.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},text:"Switch to canary & reload"}),(0,f.Y)(G.$n,{colorway:"orange",onClick:function(){eB.A.remove("gurl"),window.location.reload()},text:"Unset gurl and reload"}),(0,f.Y)(G.$n,{colorway:"red",onClick:function(){eB.A.set("gurl","ws://localhost:4560"),window.location.reload()},text:"Switch to localhost & reload"})]}),(0,f.Y)("div",{children:eB.A.get("gurl","string")?"currently in localStorage: ".concat(eB.A.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,f.Y)("p",{children:"Gurl order of precedence:"}),(0,f.FD)("ol",{style:{margin:12},children:[(0,f.Y)("li",{children:"gurl in localStorage (set above)"}),(0,f.FD)("li",{children:["If in development webapp and a theres a response from",(0,f.Y)("code",{children:"https://localhost:4563"})," or",(0,f.FD)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,f.FD)("li",{children:["default is ",(0,f.Y)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,f.Y)("hr",{css:[W.wp.my(16),{borderColor:eZ.LU.outlineDefault}]}),(0,f.FD)(L.S,{gap:12,children:[(0,f.Y)(P.EY,{multiline:!1,children:"Override Database"}),(0,f.Y)(eq.Ay,{type:"text",value:i,onChange:function(e){o(e.target.value)}}),(0,f.Y)(L.S,{row:!0,gap:8,children:(0,f.Y)(G.$n,{colorway:"positive",onClick:function(){a(i)},text:"Override Postgres connection string"})})]}),(0,f.Y)(G.$n,{onClick:function(){window.ldClient=l,eK.log("window.ldClient: ",l)},text:"Assign LD client to window for testing"})]})}),(0,g._)(i,"rum",function(){var e,n=null===(e=nT.L.getInternalContext())||void 0===e?void 0:e.session_id,t=nT.L.getInitConfiguration(),r=null!=t&&100===t.sampleRate,i=(0,v._)((0,w.useState)(null!=n),2),o=i[0],a=i[1];return(0,f.Y)(L.S,{gap:16,css:[W.wp.p(4)],children:r?(0,f.FD)(f.FK,{children:[(0,f.Y)(G.$n,{onClick:o?function(){nT.L.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,nU.mC)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,en._)({},o&&nN.S.backgroundPulse(eZ.LU.redDimmest,eZ.LU.redDimmer))}),o?(0,f.Y)(nB,{sessionId:n}):null]}):(0,f.Y)(G.$n,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),(0,g._)(i,"commandBar",function(){var e=(0,J.H)(),n=(0,J.D)();return(0,f.Y)(L.S,{css:Q.container,children:(0,f.Y)(V.d,{isSelected:e,onChange:n,children:"Show match scores in Command Bar"})})}),(0,g._)(i,"workflows",function(){var e=(0,v._)((0,w.useState)([]),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(void 0),2),i=r[0],o=r[1],a=(0,nW.OK)(),l=(0,nW.mP)(),s=(0,nW.If)();(0,w.useEffect)(function(){var e,n,r=null!==(n=null==l?void 0:l.map(function(e){return{id:e.name}}))&&void 0!==n?n:[];t(r),o(null===(e=r[0])||void 0===e?void 0:e.id)},[l]);var c=(0,e9.I)(function(e){return function(n){var t=n.workflowId;return e.workflows.runWorkflow.rpc({workflowId:t})}},[]),u=(0,e9.I)(function(e){return function(n){var t=n.runId;e.workflows.stopRun.rpc({runId:t})}},[]);return(0,f.FD)(L.S,{css:nG.wrapper,children:[(0,f.FD)(L.S,{children:[i?(0,f.Y)(T.l,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:i,items:n,children:function(e){return(0,f.Y)(F.nh,{label:e.id},e.id)}}):(0,f.Y)(L.S,{row:!0,align:"center",justify:"center",css:nG.noWorkflow,children:(0,f.Y)(P.EY,{children:"No workflow selected"})}),(0,f.Y)(G.$n,{onClick:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||!c)return[2];return[4,c({workflowId:i})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!i})]}),s?(0,f.Y)(L.S,{children:Object.entries(s).map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[t," step: ",r.step,r.step===nz.zY.RUNNING?(0,f.Y)(G.$n,{text:"Stop",onClick:function(){null==u||u({runId:t})}}):null]},t)})}):null,(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{children:"Run State"}),(0,f.Y)(x.A,{json:s})]}),(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{children:"Config"}),(0,f.Y)(x.A,{json:a})]})]})}),(0,g._)(i,"triggerBSOD",function(){var e=(0,nH.iO)();return(0,f.Y)(L.S,{gap:16,children:(0,f.Y)(G.$n,{text:"Throw BSOD",onClick:function(){return e({error:Error("[DEBUG] TriggerBSOD"),origin:"debug: Debug"})}})})}),i),nZ=Object.values(nV),nq=(0,z.x)({surface:[W.wp.p(4),W.wp.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[W.wp.flex.growAndShrink(1),W.wp.overflow("auto")],content:[W.wp.flex.growAndShrink(1),W.wp.height("100%")]});function nK(e){var n=e.paneOptions,t=(0,v._)((0,w.useState)("repl"),2),r=t[0],i=t[1],o=nZ.map(function(e){return(0,f.Y)(G.$n,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,f.FD)(ed.ui,{background:"default",css:nq.surface,gap:8,children:[(0,f.Y)(L.S,{css:nq.tabs,children:o}),(0,f.Y)(L.S,{css:nq.tab,children:Object.entries(nj).map(function(e){var t=(0,v._)(e,2),i=t[0],o=t[1];return(0,f.Y)(L.S,{css:nq.content,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,f.Y)(o,{isHidden:n.isHidden||r!==i,performPaneOperation:n.performPaneOperation})},i)})})]})}var n$=t(19346),nJ=t(67415),nQ=t(42022),nX=h.ZU.Object({type:h.ZU.Literal("adminPanel")}),n0={Content:function(e){var n=e.options;return(0,f.Y)(nK,{paneOptions:n})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.redStronger,size:n},children:(0,f.Y)(nJ.A,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",category:n$.bY.Other,decode:function(e){return m.WT.Decode(nX,e)}},n1=t(62580),n2=t(50809),n5=t(65245),n4=t(20888),n3=(0,z.x)({container:[W.wp.coverContainer,W.wp.py(4),W.wp.px(8)]});function n8(e){var n=e.performPaneOperation,t=(0,k.A)().fs,r="cmdOrCtrlKey"===(0,n1.gc)("multiselectModifierKey").preferences.multiselectModifierKey?"cmdOrCtrlKey":"altKey",i=(0,n4.J)(!0),o=(0,w.useCallback)(function(e){return!i(e.filename)},[i]),a=(0,n5.u)({fs:t,filter:o,multiselectModifierKey:r,readOnly:!0,fontSize:13,manageWidth:!0,onFileSelect:function(e){var t=e.path;n({operation:"replace",pane:(0,n2.af)(t)})}});return(0,f.Y)(L.S,{css:n3.container,children:(0,f.Y)(n5.J,{store:a.store})})}var n7=t(55011),n6=h.ZU.Object({type:h.ZU.Literal("agentFiles")}),n9={Content:function(e){return(0,f.Y)(n8,{performPaneOperation:e.options.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.blurpleStrongest,size:n},children:(0,f.Y)(n7.A,{})})},getTitle:function(){return"Files"},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(n6,e)}},te=t(53654),tn=t(72250),tt=t(72700),tr=t(14753),ti=(0,z.x)({text:{width:"100%",textAlign:"center"},loaderContainer:[W.wp.display.flex,W.wp.center,W.wp.height("100%")]}),to=h.ZU.Object({type:h.ZU.Literal("binary"),data:h.ZU.Object({path:h.ZU.String()})}),ta={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(tl,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(tt.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,te.WP)(e.data.path)},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(to,e)}};function tl(e){var n=e.path,t=e.performPaneOperation,r=(0,k.A)().fs,i=(0,n2.KA)({path:n,performPaneOperation:t});(0,tn.Qt)(function(){if(i)return{commands:i?(0,ee._)(i):[]}},[i]);var o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(!0),2),c=s[0],u=s[1];return((0,w.useEffect)(function(){var e=r.watchFile(n,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,n]),c)?(0,f.Y)(L.S,{css:ti.loaderContainer,children:(0,f.Y)(tr.A,{})}):null===a?(0,f.Y)(P.EY,{multiline:!1,children:"Failed to load binary file"}):(0,f.FD)(f.FK,{children:[(0,f.Y)(n2.ou,{path:n,performPaneOperation:t}),(0,f.FD)(n2.UC,{centered:!0,children:[(0,f.Y)(P.EY,{css:ti.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,f.Y)(eY.K0,{alt:"Download",css:[W.wp.position.absolute,W.wp.bottom(8),W.wp.right(8),W.wp.p(16)],children:(0,f.Y)("a",{href:"data:text/plain;base64,".concat(a),download:(0,te.WP)(n),css:[W.wp.color.foregroundDimmer],children:(0,f.Y)(ex.A,{})})})]})]})}var ts=t(62757),tc=t(15805),tu=t(14178),td=t(32904),tp=t(75008),tf=t(43740),th=t(75165),tm=t(72602),tg=t(30846),tv=(0,z.x)({button:{width:"fit-content"}});function tw(e){var n=e.code,t=e.activeFile,r=(0,th.vO)(),i=(0,tf.A)(t),o=i?{text:"Insert",iconRight:(0,f.Y)(tm.A,{}),onClick:function(){var e,t,o;return i({code:n,insertAt:null!==(o=null===(t=r())||void 0===t?void 0:null===(e=t.position)||void 0===e?void 0:e.offset)&&void 0!==o?o:"end"})}}:{text:"Copy",iconLeft:(0,f.Y)(tg.A,{}),onClick:function(){return(0,eP.A)(n)}};return(0,f.Y)(ed.ui,{background:"default",children:(0,f.Y)(G.$n,(0,en._)({size:"small",variant:"outlined",css:tv.button},o))})}var ty=(0,z.x)({self:W.wp.colWithGap(4),content:[W.wp.backgroundColor.backgroundRoot,W.wp.borderRadius(4),W.wp.p(4),W.wp.align.center,W.wp.maxWidth("100%"),W.wp.overflowX("auto"),{width:"fit-content"}]});function tb(e){var n=e.method,t=e.content,r=e.activeFile,i=(0,v._)((0,w.useState)(t),2),o=i[0],a=i[1];return(0,f.FD)(L.S,{css:ty.self,children:[(0,f.Y)(t_,{title:n}),(0,f.Y)(L.S,{css:ty.content,row:!0,gap:4,children:o.map(function(e,t){var r="".concat(n,"-").concat(t);return"input"===e.type?(0,f.Y)(tY,{i:t,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,f.Y)(tC,{value:e.value},r)})}),(0,f.Y)(tw,{code:o.reduce(function(e,n){return e+(n.value||("input"===n.type?n.placeholder:""))},""),activeFile:r})]})}var tS=(0,z.x)({self:[W.wp.width(64),W.wp.height(24),W.wp.zIndex(1)]});function tY(e){var n=e.i,t=e.value,r=e.placeholder,i=e.setContent;return(0,f.Y)(eA.pd,{onChange:function(e){i(function(t){return t.map(function(t,r){return n===r?(0,nr._)((0,en._)({},t),{value:e.target.value}):t})})},placeholder:r,value:t||"",css:tS.self})}var tA=(0,z.x)({self:[W.wp.borderRadius(0),W.wp.backgroundColor.backgroundRoot],code:[W.wp.font.code,W.wp.color.greyStronger,W.wp.p(4),{whiteSpace:"pre-wrap"}]});function tC(e){var n=e.value;return(0,f.Y)(L.S,{css:tA.self,children:(0,f.Y)(P.EY,{css:tA.code,children:n})})}var tx=(0,z.x)({self:W.wp.rowWithGap(4),bold:{fontWeight:eZ.LU.fontWeightMedium}});function t_(e){var n=e.title,t=(0,v._)((0,td.A)(function(){var e=(0,tp._)(n.split(" "));return[e[0],e.slice(1).join(" ")]},[n]),2),r=t[0],i=t[1];return(0,f.FD)(L.S,{css:tx.self,children:[(0,f.Y)(P.EY,{css:tx.bold,multiline:!1,children:r}),(0,f.Y)(P.EY,{color:"dimmer",multiline:!1,children:i})]})}var tk=function(e){return e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix",e}(tk||{}),tD={language:"Bash",methods:[tF("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),tF("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),tF("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),tF("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},tE={language:"Node",methods:[tF("Import the database",'const Database = require("@replit/database")'),tF("Create a new database","const db = new Database()"),tF("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),tF("Get a key's value",'db.get("{{key}}").then(value => {})'),tF("Delete a key",'db.delete("{{key}}").then(() => {})'),tF("List all keys","db.list().then(keys => {\n  console.log(keys);\n})"),tF("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},tR={language:"Go",methods:[tF("Import the database",'import "github.com/replit/database-go"'),tF("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),tF("Get a key's value",'value, _ := database.Get("{{key}}")'),tF("Delete a key",'database.Delete("{{key}}")'),tF("List all keys",'keys, _ := database.ListKeys("")'),tF("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},tI={language:"Python",methods:[tF("Import the database","from replit import db"),tF("Set a key to a value",'db["{{key}}"] = "{{value}}"'),tF("Get a key's value",'db["{{key}}"]'),tF("Delete a key",'del db["{{key}}"]'),tF("List all keys","keys = db.keys()\nprint(list(keys))"),tF("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function tF(e,n){return{method:e,content:function(e){for(var n=[],t=0;t<e.length;){var r=e.indexOf("{{",t),i=e.indexOf("}}",t);if(-1===r||-1===i){n.push({type:"code",value:e.substring(t)});break}n.push({type:"code",value:e.substring(t,r)}),n.push({type:"input",placeholder:e.substring(r+2,i)}),t=i+2}return n}(n)}}var tT=(0,z.x)({self:W.wp.colWithGap(24),code:[W.wp.font.code,W.wp.color.greyStronger,W.wp.backgroundColor.backgroundRoot,W.wp.p(4),W.wp.borderRadius(4)]});function tP(e){var n=e.activeFile,t=(0,td.A)(function(){return function(e){switch(e?(0,te.an)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return tE;case"go":return tR;case"py":return tI;default:return tD}}(n)},[n]);return(0,f.FD)(L.S,{css:tT.self,children:[(0,f.FD)(P.EY,{color:"dimmer",children:["You can use the Database from any App by making HTTP requests or a client library as outlined below. Weve set an environment variable called ",(0,f.Y)("code",{css:tT.code,children:"REPLIT_DB_URL"})," in your App if you'd like to interact with the database directly."]}),t.methods.map(function(e){return(0,f.Y)(tb,{method:e.method,content:e.content,activeFile:n},"".concat(t.language).concat(e.method))})]})}var tL=(0,z.x)({children:[W.wp.p(12),W.wp.colWithGap(8)]});function tU(e){var n=e.title,t=e.defaultExpanded,r=e.children;return(0,f.Y)(R.A,{defaultExpanded:t,headerContent:(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:n}),children:(0,f.Y)(L.S,{css:tL.children,children:r})})}var tN=t(34805),tO=t(36335),tM=(0,nR.i7)("from{opacity:0}to{opacity:1}"),tB=(0,z.x)({self:[{animation:"".concat(tM," 100ms forwards ease-in-out alternate")}],selfLoadingText:[W.wp.height(16),W.wp.width(48),W.wp.borderRadius(4),nN.S.backgroundPulse()],selfLoading:[W.wp.height(12),W.wp.borderRadius(16),nN.S.backgroundPulse()],text:[W.wp.rowWithGap(4),{display:"inline-flex"}],textSpan:[W.wp.width("fit-content"),W.wp.display.inlineFlex]});function tH(e){var n,t,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(n=1e6*(n=o)/1048576,"".concat(n.toFixed(),"/50 MiB")),l=i||!r;return(0,f.Y)(L.S,{css:tB.self,gap:8,children:l?(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{css:tB.selfLoadingText}),(0,f.Y)(L.S,{css:tB.selfLoading})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(P.EY,{color:"dimmer",css:tB.text,multiline:!1,children:[(0,f.Y)(L.D.span,{css:tB.textSpan,children:a}),(0,f.Y)(L.D.span,{css:tB.textSpan,children:"|"}),(0,f.Y)(L.D.span,{css:tB.textSpan,children:(t=(t=null==r?void 0:r.keysCount)||0,"".concat(t," ").concat((0,tN.A)("key",t)))})]}),(0,f.Y)(tO.W,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}function tz(){var e=(0,et._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return tz=function(){return e},e}function tW(){var e=(0,et._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return tW=function(){return e},e}var tG={},tV=(0,er.J1)(tz()),tj=(0,er.J1)(tW(),tV),tZ=t(87590),tq=t(14968),tK=t(93532),t$=t(39274),tJ=(0,z.x)({sectionWrapper:[W.wp.width("100%"),W.wp.maxWidth(450)]});function tQ(e){var n,t,r,i,o,a,l,s,c,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,_.A)()},pollInterval:1e4},o=(0,en._)({},tG,i),a=ei.I(tj,o)).data,s=a.error,c=a.loading,l&&("Repl"===l.repl.__typename?t=null==l?void 0:null===(r=l.repl)||void 0===r?void 0:r.database:n="Could not fetch Database info"),s&&("GraphQL error: You don't have access to this database"===s.message?t=null:n=s.message),{db:t,loading:c,error:n}),p=d.db,h=d.error,m=d.loading,g=(0,th.rM)(),v=(0,n$.Vv)().getTitle({type:"database"});return(0,f.Y)(tZ.A,{pane:{type:"database"},headerText:v,action:(0,f.FD)(L.S,{css:tJ.sectionWrapper,gap:16,children:[h?(0,f.Y)(tK.N,{colorway:"negative",text:h}):null,(0,f.Y)(tU,{title:"Storage capacity",children:(0,f.Y)(tH,{database:p,loading:m})}),(0,f.Y)(tU,{title:"How to use the database",children:(0,f.Y)(tP,{activeFile:g})}),(0,f.Y)(tX,{performPaneOperation:u})]})})}function tX(e){var n=e.performPaneOperation;return(0,f.Y)(tq.v,{href:tu.ik.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),n({operation:"open",pane:{type:"docs",data:{url:tu.ik.REPL_DATABASE}}})},iconLeft:(0,f.Y)(t$.A,{}),text:"Learn more in the docs"})}var t0=t(22414),t1=h.ZU.Object({type:h.ZU.Literal("database")}),t2={Content:function(e){var n=e.options.performPaneOperation;return(0,f.Y)(tQ,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.blurpleStronger,size:n},children:(0,f.Y)(t0.A,{})})},getTitle:function(){return"Replit Key-Value Store"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",category:n$.bY.CloudServices,decode:function(e){return m.WT.Decode(t1,e)}},t5=t(87689),t4=t(43650),t3=t(5846),t8=t(78703),t7=t(16530),t6=t(68670),t9=t(14349),re=t(82436),rn=t(19677),rt=t(60569),rr=t(85325),ri=new Map,ro=t(57218),ra=t(18562),rl=t(62714),rs=t(64251),rc=(0,z.x)({shadow:{position:"absolute",'&[data-position="top"], &[data-position="bottom"]':{left:0,right:0,height:12},'&[data-position="left"], &[data-position="right"]':{top:0,bottom:0,height:12},'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, var(--shadow-color))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, var(--shadow-color))"},'&[data-position="left"]':{left:0,backgroundImage:"linear-gradient(to left, transparent, var(--shadow-color))"},'&[data-position="right"]':{right:0,backgroundImage:"linear-gradient(to right, transparent, var(--shadow-color))"}}});function ru(e){var n=e.scrolledAmount,t=e.scrollableAmount,r=e.orientation,i=void 0===r?"vertical":r,o=e.hideEnd,a=e.shadowColor,l=void 0===a?"rgba(2, 2, 3, 0.32)":a;return(0,f.FD)(f.FK,{children:[n>0&&(0,f.Y)("div",{css:rc.shadow,"data-position":"vertical"===i?"top":"left",style:{"--shadow-color":l}}),!(void 0!==o&&o)&&n<t&&(0,f.Y)("div",{css:rc.shadow,"data-position":"vertical"===i?"bottom":"right",style:{"--shadow-color":l}})]})}var rd=t(65599),rp=t(40904),rf=t(79653),rh=t(27093),rm=t(43249),rg=t(8351),rv=(0,z.x)({header:[W.wp.height(36)],description:[W.wp.flex.column,W.wp.gap(8)],divider:[W.wp.backgroundColor.outlineDimmer],package:[W.wp.p(4),W.wp.flex.row,W.wp.align.center,W.wp.border({color:"transparent"}),W.wp.justify.spaceBetween,{"&:hover":{backgroundColor:eZ.LU.backgroundHighest}}],packageList:[W.wp.maxHeight(220),W.wp.overflowY("auto")],packageMetadata:[W.wp.flex.growAndShrink(1),W.wp.align.center,W.wp.overflow("hidden"),W.wp.mr(8)],packageName:[W.wp.truncate,W.wp.flex.growAndShrink(1),W.wp.mx(8),{"> a":[W.wp.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[W.wp.flex.column,W.wp.gap(8)],packager:[W.wp.backgroundColor.backgroundHigher,W.wp.borderRadius(4),W.wp.overflow("hidden")],packagerHeader:[W.wp.pl(4),W.wp.flex.row,W.wp.justify.spaceBetween,W.wp.flex.growAndShrink(1)],packagerHeaderTitle:[W.wp.truncate,W.wp.flex.shrink(1)],packagerEmptyState:[W.wp.p(8),W.wp.align.center,W.wp.backgroundColor.backgroundOverlay,W.wp.borderRadius(0,0,4,4),W.wp.color.foregroundDimmest],dividerInner:[W.wp.p(0),W.wp.m(0),{borderBottom:"1px solid",borderBottomColor:eZ.LU.backgroundHighest}]});function rw(e){var n,t,r,i,o,a,l=e.pkg,s=e.uninstall,c=(0,rr.UK)(),u=(t=(0,rr.UK)(),r=(0,k.A)(),o=(i=(0,v._)((0,w.useState)(null!==(n=ri.get("".concat(null==t?void 0:t.id,":").concat(l.name)))&&void 0!==n?n:null),2))[0],a=i[1],(0,w.useEffect)(function(){if((null==t?void 0:t.id)&&l.name){var e,n=l.name;if(!ri.has(n)){var i=(0,rt.N)(t.id),o=!1;return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:t.id,name:n,services:r})];case 1:if((e=l.sent())&&"string"!=typeof(null==e?void 0:e.homepageURL)&&delete e.homepageURL,o)return[2];return ri.set("".concat(t.id,":").concat(n),null!=e?e:null),a(null!=e?e:null),[2]}})}),function(){return e.apply(this,arguments)})(),function(){o=!0}}}},[null==t?void 0:t.id,l.name]),o),d=(0,w.useMemo)(function(){var e=(null==u?void 0:u.description)||l.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var n=document.createElement("DIV");return n.innerHTML=e,(n.textContent||n.innerText||"").trim()}return e},[null==u?void 0:u.description,l.description]),p=(0,rn.A)((null==u?void 0:u.license)||l.license),h=(0,w.useMemo)(function(){if(u){var e;return(0,nr._)((0,en._)({},u),{version:null!==(e=null==u?void 0:u.version)&&void 0!==e?e:l.spec,name:(null==c?void 0:c.id)==="nix"&&(null==u?void 0:u.prettyName)||l.name,license:p,description:d})}return l},[null==c?void 0:c.id,d,u,p,l]),m=(0,rl.n5)(),g=(0,rl.BL)(),S=(0,w.useMemo)(function(){return m.some(function(e){return e.pkgs.some(function(e){return e.name===l.name})})},[l.name,m]),Y=(0,w.useMemo)(function(){return!!(null!==g&&g.pkgs.find(function(e){return e.name===l.name}))},[g]);return(0,f.FD)(L.S,{css:rv.package,tag:"li",children:[(0,f.FD)(L.S,{css:rv.packageMetadata,row:!0,children:[(0,f.Y)(rh.A,{}),(0,f.FD)(P.EY,{css:rv.packageName,children:[h.name,h.homepageURL?(0,f.Y)("a",{href:h.homepageURL,target:"_blank",children:(0,f.Y)(rp.A,{})}):null]}),h.version?(0,f.Y)(P.EY,{color:"dimmer",children:h.version}):null]}),(0,f.FD)(L.S,{css:[W.wp.gap(4),W.wp.align.center],row:!0,children:[h.description||h.license?(0,f.Y)(rd.m_,{tooltip:(0,f.FD)("div",{children:[(0,f.Y)("div",{children:h.description}),h.license?(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:h.license}):null]}),children:(0,f.Y)(rf.A,{})}):null,(0,f.Y)(eY.K0,{alt:"Uninstall",disabled:Y||S,onClick:function(){s()},children:(0,f.Y)(rg.A,{})})]})]})}function ry(e){var n=e.onAddPackage,t=e.name,r=e.id,i=e.addText;return(0,f.FD)(L.S,{css:rv.packagerHeader,children:[(0,f.Y)(P.EY,{css:rv.packagerHeaderTitle,id:r,children:t}),(0,f.Y)(eY.K0,{alt:i,onClick:n,children:(0,f.Y)(rm.A,{})})]})}function rb(e){var n=e.packages,t=e.labelId,r=(0,rr.UK)(),i=(0,rl.q3)(),o=(0,w.useRef)(null),a=(0,ey.Te)({count:n.length,getScrollElement:function(){return o.current},estimateSize:function(){return 34},overscan:15,measureElement:function(e){return e.getBoundingClientRect().height}}),l=(0,v._)((0,w.useState)(0),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(0),2),d=u[0],p=u[1],h=a.getTotalSize(),m=(0,t9.A)(function(e){return p(e.height)});return r?(0,f.Y)(L.S,{css:W.wp.position.relative,innerRef:m,children:(0,f.FD)(L.S,{innerRef:o,css:rv.packageList,onScroll:function(e){c(e.target.scrollTop)},children:[(0,f.Y)(ru,{scrolledAmount:s,scrollableAmount:h-d,hideEnd:!0}),(0,f.Y)(L.S,{style:{height:h},tag:"ul","aria-labelledby":t,children:a.getVirtualItems().map(function(e){var t=n[e.index];return(0,f.Y)(rw,{pkg:t,uninstall:function(){i({id:r.id,pkg:t})}},t.name)})})]})}):null}var rS=new Map;function rY(e){var n=e.onAddPackage,t=e.openFile,r=(0,rr.UK)(),i=(0,rl.H_)(null==r?void 0:r.id),o=(0,w.useMemo)(function(){return i.filter(function(e){return e.name}).sort(function(e,n){return e.name&&n.name?e.name.localeCompare(n.name):0})},[i]),a=(0,w.useId)(),l=(0,w.useCallback)(function(){n(null==r?void 0:r.id)},[n,null==r?void 0:r.id]),s=(null==r?void 0:r.id)==="nix",c=(0,w.useMemo)(function(){return null==r?void 0:r.packagerFiles.filter(function(e){return!e.includes("lock")&&!e.endsWith("/")})},[null==r?void 0:r.packagerFiles]),u=(0,t6.om)(),d=(0,v._)((0,w.useState)(r?rS.get(r.id):void 0),2),p=d[0],h=d[1];return((0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n,t,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:if(!c||!r)return[2];e=!0,n=!1,t=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),i=c[Symbol.iterator](),s.label=2;case 2:if(e=(o=i.next()).done)return[3,5];return a=o.value,[4,u.readFile(a)];case 3:if("content"in s.sent())return rS.set(r.id,a),h(a),[3,5];s.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return l=s.sent(),n=!0,t=l,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(n)throw t}return[7];case 8:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,u,c]),r)?(0,f.FD)(L.S,{css:rv.packagerRoot,children:[(0,f.Y)(L.S,{css:rv.packager,children:(0,f.Y)(R.A,{defaultExpanded:!0,headerContent:(0,f.Y)(ry,{id:a,name:r.name,addText:"Add new ".concat(s?"dependency":"package"),onAddPackage:l}),children:(0,f.FD)(f.FK,{children:[(0,f.Y)(rx,{css:rv.divider}),o.length>0?(0,f.Y)(rb,{packages:o,labelId:a}):(0,f.FD)(L.S,{css:rv.packagerEmptyState,children:["No ",s?"dependencies":"packages"," found"]})]})})}),(0,f.Y)(G.$n,{colorway:"primary",variant:"outlined",text:"Add new ".concat(s?"dependency":"package"),iconLeft:(0,f.Y)(rm.A,{}),onClick:l}),p?(0,f.Y)(G.$n,{variant:"nofill",text:"Open ".concat(p),iconLeft:(0,f.Y)(rh.A,{}),onClick:function(){(0,re.u4)(t3.AZ.DEPENDENCIES_PACKAGER_FILE_OPENED,{packagerId:r.id,file:p}),t({path:p})}}):null]}):null}function rA(e){var n=e.configs,t=e.description,r=e.title,i=e.openFile,o=(0,t7._)(e,["configs","description","title","openFile"]);return(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{css:rv.header,row:!0,justify:"space-between",children:(0,f.Y)(P.Y9,{variant:"subheadDefault",level:2,children:r})}),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(rs.s,{color:"dimmer",css:rv.description,children:t}),n.length>0?n.map(function(e){return(0,f.Y)(ra.A,{config:e,children:(0,f.Y)(rY,(0,en._)({openFile:i},o))},e.id)}):null]})]})}function rC(e){var n=(0,ro.J)().configs,t=(0,w.useMemo)(function(){return n.find(function(e){return"nix"===e.id})},[n]);return t?(0,f.Y)(rA,(0,nr._)((0,en._)({title:"System Dependencies",description:(0,f.FD)("span",{children:["Add additional support to your environment with"," ",(0,f.Y)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages"}),"."]})},e),{configs:[t]})):null}var rx=function(){return(0,f.Y)("div",{css:rv.dividerInner})},r_=t(88072),rk=t(29761);function rD(e){var n=e.openFile,t=e.openConsole,r=e.openNixTab,i=(0,ro.J)().configs,o=(0,w.useMemo)(function(){return i.filter(function(e){return"nix"!==e.id})},[i]),a=(0,v._)((0,w.useState)({mode:"Overview"}),2),l=a[0],s=a[1];switch((0,t8.M)(t3.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"import"}),l.mode){case"Overview":return(0,f.Y)(rk._0,{children:(0,f.Y)(rA,{title:"Manage Imports",configs:o,openFile:n,onAddPackage:function(e){s({mode:"Search",initialPackager:e})},description:(0,f.FD)(f.FK,{children:[(0,f.Y)(P.EY,{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),0===o.length?(0,f.Y)(P.EY,{color:"dimmest",children:(0,f.FD)("p",{children:["You don't currently have any packagers. Add language support by"," ",(0,f.Y)("a",{href:"",onClick:function(e){e.preventDefault(),r()},children:"adding a System Module"}),"."]})}):null]})})});case"Search":return(0,f.Y)(r_.Y,{onBack:function(){return s({mode:"Overview"})},initialCategory:l.initialPackager,openConsole:t})}}var rE=t(64999),rR=t(44273),rI=(0,z.x)({systemModules:[W.wp.flex.column,W.wp.gap(8)],sectionHeader:[W.wp.height(36)]});function rF(e){var n=e.openFile,t=e.openConsole,r=(0,t5.G)().modules,i=(0,v._)((0,w.useState)({mode:"Overview"}),2),o=i[0],a=i[1];if((0,t8.M)(t3.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"nix"}),!r)return null;switch(o.mode){case"Overview":return(0,f.FD)(rk._0,{children:[(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{css:rI.sectionHeader,row:!0,justify:"space-between",children:(0,f.Y)(P.Y9,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,f.FD)(L.S,{css:rI.systemModules,children:[(0,f.Y)(rs.s,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your App."}),(0,f.Y)(rE.A,{modules:r}),(0,f.Y)(G.$n,{text:"Add new module",variant:r.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,f.Y)(rm.A,{}),onClick:function(){a({mode:"Search",initialCategory:"Modules"})}}),(0,f.Y)(G.$n,{text:"Open .replit",variant:"nofill",iconLeft:(0,f.Y)(rR.A,{}),onClick:function(){n({path:".replit"})}})]})]}),(0,f.Y)(rC,{onAddPackage:function(){a({mode:"Search",initialCategory:"Packages"})},openFile:n}),(0,f.Y)(tq.v,{href:tu.ik.DEPENDENCY_MANAGEMENT,target:"_blank",rel:"noopener",variant:"underlinedOnHover",colorway:"primary",iconRight:(0,f.Y)(rp.A,{}),text:"Learn more about Nix and .replit configuration"})]});case"Search":return(0,f.Y)(r_.m,{onBack:function(){return a({mode:"Overview"})},initialCategory:o.initialCategory,openConsole:t})}}var rT=t(61780),rP=t(78952),rL=(0,z.x)({root:[W.wp.overflow("hidden"),W.wp.flex.growAndShrink(1)],content:[W.wp.flex.growAndShrink(1),W.wp.overflowY("auto")]});function rU(e){var n,t=e.openFile,r=e.openConsole,i=e.initialTab,o=(0,ro.J)(),a=o.configs,l=o.loading,s=(0,t5.G)(),c=s.modules,u=s.configs,d=(0,t4.A)(),p=(0,w.useMemo)(function(){return a.filter(function(e){return"nix"!==e.id})},[a]).length>0,h=(0,v._)((0,w.useState)(p?void 0===i?"import":i:"nix"),2),m=h[0],g=h[1];return((0,w.useEffect)(function(){p||g("nix")},[p,l]),a&&c&&u&&d&&!l)?("import"===m?n=(0,f.Y)(rD,{openFile:t,openConsole:r,openNixTab:function(){return g("nix")}}):"nix"===m&&(n=(0,f.Y)(rF,{openFile:t,openConsole:r})),(0,f.FD)(L.S,{css:rL.root,children:[(0,f.Y)(rT.P,{tabs:[{value:"import",label:"Imports",icon:(0,f.Y)(rh.A,{})},{value:"nix",label:"System (Advanced)",icon:(0,f.Y)(rP.A,{})}],value:m,onClick:function(e){g(e.value)}}),(0,f.Y)(L.S,{css:rL.content,children:n})]})):(0,f.Y)(rk.Gu,{})}var rN=t(9670),rO=t(65094),rM=h.ZU.Object({type:h.ZU.Literal("dependencies"),initialTab:h.ZU.Optional(h.ZU.Union([h.ZU.Literal("import"),h.ZU.Literal("nix")]))}),rB={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.initialTab,r=(0,w.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})},[n]),i=(0,w.useCallback)(function(){n({operation:"open",secondary:!0,pane:{type:"runnerOutput"}})},[n]);return(0,f.Y)(rU,{openFile:r,openConsole:i,initialTab:t})},Icon:function(e){var n=e.size;return(0,f.Y)(rO.A,{size:n})},getTitle:function(){return"Dependencies"},description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",category:rN.b.WorkspaceFeatures,decode:function(e){return m.WT.Decode(rM,e)}},rH=t(95427),rz=h.ZU.Object({type:h.ZU.Literal("devdocs")}),rW={Content:function(e){return(0,f.Y)("iframe",{title:"DevDocs",height:"100%",src:"https://devdocs.io"})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.foregroundDimmer,size:n},children:(0,f.Y)(rH.A,{})})},getTitle:function(){return"DevDocs"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Documentation for common software platforms & APIs",category:n$.bY.Other,decode:function(e){return m.WT.Decode(rz,e)}},rG=t(80475),rV=t(36736),rj=t(55195),rZ=function(e){var n=e.context,t=e.gitService,r=e.result,i=e.data;rj.v4(function(e){e.setTag("service","git"),e.setTag("context",n),e.setExtra("env",t.getEnv()),i&&rj.l7("data",i),rj.Cp(r.error)})},rq=function(){var e=(0,y._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if("generatedFile"===r.type)return[2,""];if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:t,revision:i,convertToBase64:(0,te.FN)(t)})];case 1:if((o=l.sent()).error)throw rZ({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:t,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,n.readFile(t,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})});return function(n,t,r,i){return e.apply(this,arguments)}}();let rK=function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!0),2),s=l[0],c=l[1],u=(0,k.A)().fs,d=(0,rV.A)((t=(0,y._)(function(t){var r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:c(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,rq(t,u,e,n)];case 2:return r=o.sent(),c(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),c(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[e,n,u],r);return(0,w.useEffect)(function(){d&&(d.error?a(null):a(d.content))},[d]),{fileContent:o,loading:s}};var r$=t(73712),rJ=t(5080),rQ="rgba(180, 0, 0, 0.125)",rX="rgba(0, 180, 0, 0.125)",r0=na.Lz.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:rX},"&.cm-merge-a .cm-changedLineGutter":{background:rQ},"&.cm-merge-b .cm-changedText":{background:rX,outline:"solid 1px ".concat(rX),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:rQ,outline:"solid 1px ".concat(rQ),borderRadius:"2px"},".cm-collapsedLines":{color:eZ.LU.accentPrimaryStrongest,background:eZ.LU.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:eZ.LU.accentPrimaryDimmer}}}),r1=[na.Lz.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),na.Lz.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],r2=[no.Nb.highest(r1),r0],r5=t(28648),r4=t(61754);function r3(e){var n,t,r,i=e.a,o=e.b,a=e.style,l=e.className,s=(0,t7._)(e,["a","b","style","className"]),c=(0,v._)((0,w.useState)(null),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(null),2),h=p[0],m=p[1],g=(0,w.useRef)(!1),y=(0,e1.A)(s),b=(0,e1.A)(i.doc),S=(0,e1.A)(o.doc),Y=(0,A.pm)((0,nr._)((0,en._)({},i),{readOnly:!0})),C=(0,A.pm)((0,nr._)((0,en._)({},o),{readOnly:!0})),x=(n=(0,v._)((0,w.useState)(),2)[1],(0,w.useCallback)(function(e){n(function(){throw e})},[])),_=s.orientation,k=s.revertControls,D=s.renderRevertControl,E=s.collapseUnchanged,R=s.gutter,I=s.highlightChanges,F=void 0!==E,T=null==E?void 0:E.margin,P=null==E?void 0:E.minSize,L=null!==(t=null==h?void 0:h.a)&&void 0!==t?t:null,U=null!==(r=null==h?void 0:h.b)&&void 0!==r?r:null;return(0,A.vO)(),(0,w.useEffect)(function(){var e=function(e){x(e)};if(u){var n=null;try{n=new rJ.SV((0,nr._)((0,en._)({},y.current),{parent:u,a:{doc:b.current,extensions:[na.Lz.exceptionSink.of(e),r2].concat((0,ee._)(Y))},b:{doc:S.current,extensions:[na.Lz.exceptionSink.of(e),r2].concat((0,ee._)(C))}}))}catch(n){e(n)}return n&&(m(n),g.current=!0),function(){if(n){m(null);try{n.destroy()}catch(n){e(n)}}}}},[u]),(0,w.useEffect)(function(){L&&!g.current&&L.dispatch({changes:{from:0,to:L.state.doc.length,insert:i.doc}})},[L,i.doc]),(0,w.useEffect)(function(){U&&!g.current&&U.dispatch({changes:{from:0,to:U.state.doc.length,insert:o.doc}})},[U,o.doc]),(0,w.useEffect)(function(){h&&!g.current&&r8(h,y.current.collapseUnchanged)},[h,y,i.doc,o.doc]),(0,w.useEffect)(function(){if(h&&!g.current){var e=F?{margin:T,minSize:P}:void 0;h.reconfigure({orientation:_,revertControls:k,renderRevertControl:D,collapseUnchanged:e,gutter:R,highlightChanges:I}),e&&r8(h,e)}},[h,_,k,D,F,T,P,R,I]),(0,r5.O)(L),(0,r5.O)(U),(0,w.useEffect)(function(){g.current=!1}),(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:d,className:l,style:a}),(0,f.Y)(r4.OE,{view:L}),(0,f.Y)(r4.OE,{view:U})]})}function r8(e,n){e&&n&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,en._)({},n)}))}var r7=(0,z.x)({container:[W.wp.width(60),W.wp.height(24),W.wp.display.flex,W.wp.center,W.wp.borderRadius(4),W.wp.fontSize(eZ.LU.fontSizeSmall)]});function r6(e){var n,t,r;switch(e.type){case rG.PX.ADDED:case rG.PX.UNTRACKED:n="Added",t=eZ.LU.greenDimmest,r=eZ.LU.greenStrongest;break;case rG.PX.MODIFIED:n="Modified",t=eZ.LU.yellowDimmest,r=eZ.LU.yellowStrongest;break;case rG.PX.DELETED:n="Deleted",t=eZ.LU.redDimmest,r=eZ.LU.redStrongest;break;case rG.PX.RENAMED:n="Renamed",t=eZ.LU.tealDimmest,r=eZ.LU.tealStrongest;break;case rG.PX.COPIED:n="Copy",t=eZ.LU.limeDimmest,r=eZ.LU.limeStrongest;break;default:return null}return(0,f.Y)(L.S,{style:{backgroundColor:t,color:r},css:r7.container,children:(0,f.Y)("span",{children:n})})}function r9(e){var n,t,r;switch(e.type){case"ADDED":n="Added",t=eZ.LU.greenDimmest,r=eZ.LU.greenStrongest;break;case"MODIFIED":n="Modified",t=eZ.LU.yellowDimmest,r=eZ.LU.yellowStrongest;break;case"DELETED":n="Deleted",t=eZ.LU.redDimmest,r=eZ.LU.redStrongest;break;case"RENAMED":n="Renamed",t=eZ.LU.tealDimmest,r=eZ.LU.tealStrongest;break;case"COPIED":n="Copy",t=eZ.LU.limeDimmest,r=eZ.LU.limeStrongest;break;default:return null}return(0,f.Y)(L.S,{style:{backgroundColor:t,color:r},css:r7.container,children:(0,f.Y)("span",{children:n})})}var ie=t(26352),it=t(24239),ir=t(29048),ii=t(30111),io=[{"& > span:first-child-of-type":[W.wp.flex.grow(1),W.wp.textAlign.left]},{"& > span":[W.wp.flex.shrink(1)]},W.wp.height("auto"),W.wp.p(8),W.wp.fontWeight.medium,W.wp.backgroundColor.backgroundHigher,W.wp.flex.row,W.wp.align.center,W.wp.justify.spaceBetween,W.wp.overflow("hidden"),W.wp.cursor.pointer],ia=(0,z.x)({buttonFolded:[io,W.wp.borderRadius(8)],buttonUnfolded:[io,W.wp.borderRadius(8,8,0,0)],rowContainer:[W.wp.position.relative,W.wp.zIndex(1),W.wp.overflow("hidden")],diffContainer:[W.wp.flex.grow(1),W.wp.borderRadius(8)],bodyContainer:[W.wp.borderRadius(0,0,8,8),W.wp.p(8),W.wp.display.flex,W.wp.flex.row,W.wp.flex.wrap,W.wp.align.center,W.wp.justify.center,W.wp.backgroundColor.backgroundDefault,W.wp.border({color:eZ.LU.outlineDimmer,direction:"bottom"}),W.wp.border({color:eZ.LU.outlineDimmer,direction:"left"}),W.wp.border({color:eZ.LU.outlineDimmer,direction:"right"})],noChangesContainer:[W.wp.py(8),W.wp.px(8),W.wp.center,W.wp.width("100%")],innerContainer:[W.wp.display.flex,W.wp.align.center],splitContainer:[W.wp.p(8),W.wp.display.flex,W.wp.flex.row,W.wp.justify.spaceBetween,W.wp.maxWidth("100%"),W.wp.align.center],splitChild:[{flexBasis:"50%"}],buttonGroupItem:[W.wp.width(64),W.wp.height(32)]}),il=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(it.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(L.S,{css:ia.buttonGroupItem,children:(0,f.Y)(it.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(L.S,{css:ia.buttonGroupItem,children:(0,f.Y)(it.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},is=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(L.S,{css:t?ia.buttonFolded:ia.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(L.S,{css:[ia.rowContainer,W.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(tt.A,{path:o}),(0,f.Y)(P.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(P.EY,{multiline:!1,color:"dimmest",css:[W.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(tm.A,{}),(0,f.Y)(tt.A,{path:a}),(0,f.Y)(P.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(P.EY,{multiline:!1,color:"dimmest",css:[W.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(tt.A,{path:a}),(0,f.Y)(P.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(P.EY,{multiline:!1,color:"dimmest",css:[W.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(I.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(L.S,{css:ia.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(r9,{type:i.status}),(0,f.Y)(eY.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(ir.A,{}):(0,f.Y)(ii.A,{})})]})]})},ic=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(r3,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(A.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[r$.X.of(no.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},iu=function(e){return(0,te.FN)(e)?"media":(0,te.m6)(e)?"ot":"binary"},id=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(L.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(ie.jM,{src:(0,ie.p4)(n,(0,te.P7)(r)),mime:(0,te.P7)(r),fileName:r})});case"ot":return(0,f.Y)(A.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},ip=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.loading)return(0,f.Y)(L.S,{css:ia.noChangesContainer,children:(0,f.Y)(tr.A,{size:20})});if(n.initial.content===n.final.content)return(0,f.Y)(L.S,{css:ia.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(L.S,{css:ia.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=iu(n.initial.filename),o=iu(n.final.filename);if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(L.S,{css:ia.noChangesContainer,children:(0,f.Y)(L.S,{css:ia.innerContainer,children:(0,f.Y)(ie.jM,{src:(0,ie.p4)(n.final.content,(0,te.P7)(n.final.filename)),mime:(0,te.P7)(n.final.filename),fileName:n.final.filename})})});case"ot":return(0,f.Y)(L.S,{css:ia.noChangesContainer,children:(0,f.Y)(A.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(L.S,{css:ia.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,f.Y)(L.S,{css:ia.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,f.Y)(ic,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(L.S,{css:ia.splitContainer,children:[(0,f.Y)(L.S,{css:ia.splitChild,align:"center",justify:"center",children:(0,f.Y)(id,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(L.S,{css:ia.splitChild,children:(0,f.Y)(id,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},ih=function(e){var n=e.diff,t=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,f.FD)(L.S,{css:ia.diffContainer,children:[(0,f.Y)(is,{folded:t,setFolded:r,diff:n}),t?null:(0,f.Y)(ed.ui,{css:ia.bodyContainer,elevated:!0,children:(0,f.Y)(ip,{diff:n,splitOrUnified:i})})]},n.id)},im=t(61990),ig=h.ZU.Object({type:h.ZU.Literal("git"),revision:h.ZU.String()}),iv=h.ZU.Object({type:h.ZU.Literal("fs")}),iw=h.ZU.Object({type:h.ZU.Literal("generatedFile"),content:h.ZU.String()}),iy=h.ZU.Object({left:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([ig,iv,iw])}),right:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([ig,iv,iw])})}),ib=h.ZU.Object({type:h.ZU.Literal("diff"),data:h.ZU.Union([iy,h.ZU.Array(iy)])}),iS=(0,z.x)({container:[W.wp.p(8),W.wp.colWithGap(8)],singleDiffWrapper:[W.wp.width("100%"),W.wp.backgroundColor.backgroundHigher,W.wp.borderRadius(4),W.wp.mb(8)],accordionBody:[W.wp.p(4),W.wp.border({direction:"x",width:1,color:eZ.LU.backgroundHigher}),W.wp.border({direction:"bottom",width:1,color:eZ.LU.backgroundHigher}),W.wp.backgroundColor.backgroundDefault,W.wp.borderRadius(0,0,4,4)]});function iY(e){var n=e.left,t=e.right,r=e.splitOrUnified,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=rK(n.path,n.data),s=l.fileContent,c=l.loading,u=rK(t.path,t.data),d=u.fileContent,p=u.loading,h="generatedFile"===n.data.type?n.data.content:null,m="generatedFile"===t.data.type?t.data.content:null,g=s||h,y=d||m,b=(0,w.useMemo)(function(){return null===g&&null!==y?rG.Os.ADDED:null!==g&&null===y?rG.Os.DELETED:rG.Os.MODIFIED},[g,y]),S={id:"".concat(n.path,"-").concat(t.path),status:b,loading:c||p,initial:{filename:(0,te.WP)(n.path),path:(0,te._6)(n.path),content:null!=g?g:""},final:{filename:(0,te.WP)(t.path),path:(0,te._6)(t.path),content:null!=y?y:""}};return(0,f.Y)(L.S,{css:iS.singleDiffWrapper,children:(0,f.Y)(R.A,{expanded:o,onClick:function(){return a(function(e){return!e})},headerContent:(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(tt.A,{path:n.path}),(0,f.Y)(P.EY,{multiline:!1,children:n.path})]}),children:(0,f.Y)(L.S,{css:iS.accordionBody,children:(0,f.Y)(ip,{splitOrUnified:r,diff:S})})})})}var iA={Content:function(e){var n=e.pane.data,t=(0,v._)((0,w.useState)("Split"),2),r=t[0],i=t[1],o=(0,w.useMemo)(function(){return Array.isArray(n)?n:[n]},[n]);return(0,f.FD)(L.S,{css:iS.container,children:[(0,f.Y)(il,{value:r,onChange:i}),(0,f.Y)(L.S,{children:o.map(function(e){return(0,f.Y)(iY,{left:e.left,right:e.right,splitOrUnified:r},e.left.path+e.right.path)})})]})},Icon:function(){return(0,f.Y)(im.A,{})},getTitle:function(e){var n=e.data,t=Array.isArray(n)?n:[n];if(1===t.length){var r=t[0];return r.left.path===r.right.path?"Diff: ".concat((0,te.WP)(r.left.path)):"Diff: ".concat((0,te.WP)(r.left.path)," - ").concat((0,te.WP)(r.right.path))}return"Diff: ".concat(t.length," files")},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(ib,e)}},iC=t(32889),ix=t.n(iC);function i_(){var e=(0,et._)(["\n  query WorkspaceDraw($id: String!) {\n    currentUser {\n      id\n      username\n    }\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n      }\n    }\n  }\n"]);return i_=function(){return e},e}var ik={},iD=(0,er.J1)(i_()),iE=t(54341),iR=t(57810),iI=function(e){return e.reduce(function(e,n){return e[n.id]=n,e},{})};let iF=function(e,n,t){if(!e)return[];var r,i=n(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=t.reduce(function(e,n){var t,r,a;return n.id===(null===(t=o.editingElement)||void 0===t?void 0:t.id)||n.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||n.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[n.id]&&i[n.id].version>n.version?e.push(i[n.id]):i[n.id]&&i[n.id].version===n.version&&i[n.id].versionNonce!==n.versionNonce&&i[n.id].versionNonce<n.versionNonce?e.push(i[n.id]):e.push(n),delete i[n.id]),e},[])).concat.apply(r,(0,ee._)(Object.values(i)))},iT=function(){var e,n,t=new Promise(function(t,r){e=t,n=r});return t.resolve=e,t.reject=n,t};var iP=t(40460),iL=t(82542),iU=t(14436),iN=(0,nR.AH)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",iU.uF-1,"px;}");function iO(e){var n,r,i,o,a,l,s=e.fs,c=e.filePath,u=(0,v._)((0,w.useState)(void 0),2),d=u[0],p=u[1],h=(0,iE.A)(),m=(0,w.useRef)(function(e){return(0,ee._)(e)}),g=(0,w.useRef)(function(e){return -1}),S=(0,w.useRef)(),Y=(0,w.useRef)(iT()),A=(0,e9.I)(function(e){return function(n){return e.excalidraw.update.rpc(n)}},[]);(0,w.useEffect)(function(){Promise.all([t.e(559),t.e(1460)]).then(t.t.bind(t,81460,23)).then(function(e){m.current=function(n){return n.filter(function(n){return n.isDeleted||!e.isInvisiblySmallElement(n)})},g.current=e.getSceneVersion,p(e.Excalidraw)})},[]);var C=(0,w.useCallback)(function(){return S.current},[]),x=(n={variables:{id:(0,_.A)()},ssr:!1},r=(0,en._)({},ik,n),ei.I(iD,r)),k=x.data,D=x.loading,E=(null==k?void 0:null===(l=k.currentUser)||void 0===l?void 0:l.username)||"",R=(0,iL.D)().isDarkColorScheme,I=(0,iP.Q4)(),F=(0,iR.A)(),T=null==F?void 0:F.color,P=(0,v._)((0,w.useState)(new Map),2),U=P[0],N=P[1],O=(0,v._)((0,w.useState)(-1),2),M=O[0],B=O[1],H=(0,w.useRef)((0,nP.A)()).current;(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!k||!k.currentUser)return[2];return[4,Y.current];case 1:return t.sent(),e=C().getAppState().collaborators,n=new Map,I.forEach(function(t){if(t.username!==(null==k?void 0:null===(r=k.currentUser)||void 0===r?void 0:r.username)){var r,i=e.get(t.username)||{};n.set(t.username,(0,nr._)((0,en._)({},i),{username:t.username,color:{background:t.color,foreground:t.color}}))}}),C().updateScene({collaborators:n}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[k,I,C]);var z=(0,w.useCallback)((i=(0,y._)(function(e,n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){n||(e=e.filter(function(e){return!U.has(e.id)||e.version>U.get(e.id)})),t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,U.set(l.id,l.version),N(new Map(U))}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return null==A||A({paneId:H,path:c,$kind:"elements",elements:JSON.stringify(e)}),[2]})}),function(e,n){return i.apply(this,arguments)}),[A,H,c,U]);(0,np.b)((o=(0,y._)(function(e,n){var t,r,i,o,a,l,s,u,d,p,f,h,m,v,w,y,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return t=n.signal,r=e.excalidraw.listen.subscribe({paneId:H,path:c},{signal:t}).resReadable,[4,Y.current];case 1:b.sent(),i=!1,o=!1,b.label=2;case 2:b.trys.push([2,7,8,13]),l=(0,nt._)(r),b.label=3;case 3:return[4,l.next()];case 4:if(!(i=!(s=b.sent()).done))return[3,6];if(!(u=s.value).ok)return[2];"collaborator"===u.payload.$kind?(d=C().getAppState().collaborators,f=(p=u.payload).pointer,h=p.selectedElementIds,d.set(u.payload.username,(0,nr._)((0,en._)({},d.get(u.payload.username)),{pointer:f,selectedElementIds:h,username:u.payload.username})),C().updateScene({collaborators:d})):"elements"===u.payload.$kind?(m=JSON.parse(u.payload.elements),v=iF(C(),iI,m),(w=g.current(v))>M&&(B(w),C().updateScene({elements:v}))):"leave"===u.payload.$kind&&((y=C().getAppState().collaborators).delete(u.payload.username),C().updateScene({collaborators:y})),b.label=5;case 5:return i=!1,[3,3];case 6:return[3,13];case 7:return S=b.sent(),o=!0,a=S,[3,13];case 8:if(b.trys.push([8,,11,12]),!(i&&null!=l.return))return[3,10];return[4,l.return()];case 9:b.sent(),b.label=10;case 10:return[3,12];case 11:if(o)throw a;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return o.apply(this,arguments)}),[H,c,C,M,g]),(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!c||!s)return[2];return[4,s.readFile(c)];case 1:if(!("content"in(e=t.sent())))return[3,3];return n=JSON.parse(e.content.toString()||"{}"),[4,Y.current];case 2:t.sent(),C().updateScene({elements:n.elements||[],appState:n.appState||{}}),C().scrollToContent(),t.label=3;case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,s,C]);var W=(0,w.useCallback)(ix()((a=(0,y._)(function(e,n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(t=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,s.writeFile(c,eQ.A.from(JSON.stringify({elements:t,files:n})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,n){return a.apply(this,arguments)}),350),[c]),G=(0,w.useCallback)(function(e){var n=g.current(e);n>M&&(z(m.current(e),!1),B(n))},[z,m,g]);return(0,f.FD)(L.S,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:T?"0 3px 0 3px ".concat(T):"none",backgroundColor:eZ.LU.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){null==A||A({paneId:H,path:c,$kind:"leave"})},children:[d&&!D?(0,f.Y)(d,{ref:function(e){e&&(S.current=e,e.readyPromise&&e.readyPromise.then(function(e){Y.current.resolve(e)}).catch(function(e){Y.current.reject(e)}))},UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:R?"dark":"light",onPointerUpdate:function(e){var n=e.pointer;null==A||A({paneId:H,path:c,$kind:"collaborator",pointer:n,selectedElementIds:C().getAppState().selectedElementIds||{}})},onChange:function(e,n,t){G(e),g.current(e)>M&&W(e,t)},name:E}):null,h?(0,f.Y)(nR.mL,{styles:[iN]}):null]})}function iM(e){var n=e.fs,t=e.filePath;return(0,f.Y)(iO,{fs:n,filePath:t},t)}var iB=t(46099),iH=h.ZU.Object({type:h.ZU.Literal("draw"),data:h.ZU.Object({path:h.ZU.String()})}),iz={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(iW,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(iB.A,{size:n})},getTitle:function(e){return(0,te.WP)(e.data.path)},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(iH,e)}};function iW(e){var n=e.path,t=e.performPaneOperation,r=(0,k.A)().fs,i=(0,n2.KA)({path:n,performPaneOperation:t});return(0,tn.Qt)(function(){if(i)return{commands:i}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n2.ou,{path:n,performPaneOperation:t}),(0,f.Y)(n2.UC,{children:(0,f.Y)(iM,{fs:r,filePath:n})})]})}var iG=t(35541),iV=t(36954),ij=h.ZU.Object({type:h.ZU.Literal("envEditor")}),iZ={Content:function(e){var n=e.options.performPaneOperation,t=(0,k.A)().runner;return(0,f.Y)(iG.Ay,{getRunState:t.getRunState,performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(iV.A,{size:n})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your App",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(ij,e)}},iq=t(63679),iK=t(31909),i$=t(60049),iJ=t(45640),iQ=t(99655),iX=t(40500),i0=t(97407),i1=t(39797),i2=t(48091),i5=t(73159),i4="The ".concat(i0.Lm," plan includes Basic ").concat(Y.BP,". Upgrade for more capabilities."),i3=(0,z.x)({pill:[W.wp.cursor.pointer]}),i8=function(e){var n=(0,i5.A)(),t=n.showAiUpsell,r=n.refetch,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return t?(0,f.FD)(f.FK,{children:[(0,f.Y)(rd.m_,{tooltip:i4,children:(0,f.Y)(i2.a,{css:i3.pill,text:"BASIC",onClick:function(){return a(!0)}})}),(0,f.Y)(iX.A,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",onPurchaseComplete:function(){var n;null===(n=e.onPurchaseComplete)||void 0===n||n.call(e),r()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(P.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(P.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},i7=t(80001),i6=t(70904),i9=t(17392),oe=t(83515),on=(0,z.x)({upgradeSurface:[W.wp.p(16),W.wp.center,W.wp.borderRadius("container")],upgradeSurfaceAiItems:[(0,g._)({},i6.Gw,[W.wp.rowWithGap(16)])],upgradeSurfaceAiItem:[W.wp.colWithGap(8),W.wp.align.center,W.wp.width(220),W.wp.textAlign.center],upgradeSurfaceAiItemTitle:[W.wp.rowWithGap(4),W.wp.align.center]});function ot(){var e=(0,v._)((0,w.useState)("Upgrade to Replit ".concat(i0.en," for more powerful AI")),2),n=e[0],t=e[1],r=(0,t9.A)(function(e){e.width<i6.V2?t("Upgrade to ".concat(i0.en)):t("Upgrade to Replit ".concat(i0.en," for more powerful AI"))});return(0,f.FD)(ed.ui,{elevated:!0,css:on.upgradeSurface,gap:16,innerRef:r,children:[(0,f.Y)(i1.A,{context:"ai_chat_upsell",text:n,variant:"default",highlightUpsell:"assistant"}),(0,f.FD)(L.S,{css:on.upgradeSurfaceAiItems,gap:16,align:"center",children:[(0,f.FD)(L.S,{css:on.upgradeSurfaceAiItem,children:[(0,f.FD)(L.S,{css:on.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(oe.A,{size:16}),(0,f.Y)(P.EY,{variant:"subheadDefault",children:Y.BP}),(0,f.Y)(i2.a,{text:"ADVANCED"})]}),(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:Y.JY})]}),(0,f.FD)(L.S,{css:on.upgradeSurfaceAiItem,children:[(0,f.FD)(L.S,{css:on.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(i7.l,{size:16}),(0,f.Y)(P.EY,{variant:"subheadDefault",children:"Agent"})]}),(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:Y.RB})]})]})]})}function or(){var e=(0,i9.A)();return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(P.Y9,{level:1,variant:"subheadDefault",children:Y.BP}),(0,f.Y)(i8,{onPurchaseComplete:e})]})}var oi=t(35863),oo=t(10690),oa=function(){var e=(0,i5.A)(),n=e.showAiUpsell,t=e.refetch,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,i9.A)();return n?(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{tag:"button",css:ol.bannerWrapper,onClick:function(){return o(!0)},children:(0,f.Y)(tK.N,{icon:(0,f.Y)(oo.A,{}),colorway:"yellow",text:"Youre using the free Basic AI model. Upgrade to get better AI responses and more accurate code generation and analysis.",css:ol.banner})}),(0,f.Y)(iX.A,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){t(),a()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(P.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(P.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},ol=(0,z.x)({bannerWrapper:[W.wp.cursor.pointer,W.wp.textAlign.left],banner:[W.wp.borderRadius(0)]}),os=t(74607),oc=t(57382),ou=t(33841),od=t(39183),op=t(85213),of=(0,z.x)({root:[W.wp.borderRadius(4),W.wp.border({color:eZ.LU.outlineDimmest})],header:[W.wp.border({color:eZ.LU.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function oh(e){var n=e.codeReference,t=e.onClick;return(0,f.FD)(ed.ui,{css:of.root,elevated:!0,children:[(0,f.Y)(L.S,{css:of.header,row:!0,gap:4,children:(0,f.Y)(G.$n,{css:of.button,size:"small",variant:"nofill",iconLeft:(0,f.Y)(tt.A,{size:12,path:n.filePath}),iconRight:(0,f.Y)(op.A,{}),text:"".concat(n.filePath," ").concat(n.range.lineFrom,":").concat(n.range.lineTo),onClick:t})}),(0,f.Y)(D.A,{lineNumbers:!0,lineNumbersStart:n.range.lineFrom,language:n.language,code:n.code,filePath:n.filePath})]})}var om=t(12887),og=t(541);function ov(e){if(!e)return null;var n,t=e.contents.contents,r={id:e.sender.id},i=null!==(n=function(e){var n;switch(null==e?void 0:null===(n=e.contents.contents)||void 0===n?void 0:n.$kind){case"messageEventContents":if(e.contents.contents.messageEventContents.intent===S.qRv.DEBUG)break;return e.contents.contents.messageEventContents.codeReference;case"inlineActionEventContents":return e.contents.contents.inlineActionEventContents.codeReference;default:return null}}(e))&&void 0!==n?n:void 0;return(null==t?void 0:t.$kind)==="messageEventContents"?{sender:r,contents:t.messageEventContents,uploadedFiles:t.messageEventContents.uploadedFiles,codeReference:i,content:t.messageEventContents.content}:(null==t?void 0:t.$kind)==="inlineActionEventContents"?{sender:r,contents:t.inlineActionEventContents,codeReference:i,content:t.inlineActionEventContents.content}:null}var ow=(0,z.x)({event:[W.wp.px(16),W.wp.pt(32),W.wp.pb(16),{justifyContent:"end"}],main:[W.wp.flex.growAndShrink(1)],userMessageAttachments:[W.wp.maxWidth("100%")],message:[W.wp.maxWidth(400),W.wp.px(8),W.wp.py(6),W.wp.borderRadius(),W.wp.colorMixBg(eZ.LU.accentPrimaryDefault,"transparent",.4)],codeReference:[{width:"100%"}],avatar:[W.wp.pt(6)]}),oy=(0,w.memo)(function(e){var n=e.id,t=e.openPane,r=(0,Y.Al)(n,ov),i=(0,w.useCallback)(function(e){var n,r="string"==typeof e?{path:e}:e;t({type:null!==(n=(0,n$.QY)(r))&&void 0!==n?n:"codeEditor",data:r})},[t]),o=(0,k.A)().fs;return r?(0,f.Y)(ob,{openFile:i,content:r.content,userId:Number(r.sender.id),codeReference:r.codeReference,uploadedFiles:r.uploadedFiles,readFile:o.readFile}):null});function ob(e){var n=e.openFile,t=e.readFile,r=e.content,i=e.userId,o=e.codeReference,a=e.uploadedFiles,l=(0,om.Vd)({openFile:n,messageSenderType:S.utd.USER});return(0,f.FD)(L.S,{css:ow.event,row:!0,gap:8,children:[(0,f.FD)(L.S,{css:ow.main,gap:8,align:"end",children:[a?(0,f.Y)(oS,{attachments:a,readFile:t}):null,(0,f.Y)(L.S,{css:ow.message,children:(0,f.Y)(om.d2,{text:r,codeComponent:l,messageState:S.qOk.COMPLETE})}),(null==o?void 0:o.code)?(0,f.Y)(L.S,{css:ow.codeReference,children:(0,f.Y)(oh,{codeReference:o,onClick:function(){var e=null==o?void 0:o.filePath;e&&n({path:e,line:null==o?void 0:o.range.lineTo})}})}):null]}),(0,f.Y)(L.S,{css:ow.avatar,children:(0,f.Y)(og.H,{id:i,showAvatarOnly:!0})})]})}function oS(e){var n=e.attachments,t=e.readFile;return 0===n.length?null:(0,f.Y)(L.S,{css:ow.userMessageAttachments,children:(0,f.Y)(oc.A,{fileAttachments:n.map(function(e){return(0,f.Y)(ou.m,{attachment:e,readFile:t,getAttachmentTypeDisclaimer:(0,od.F)({aiName:Y.BP})},e.path)})})})}var oY=t(9950);function oA(){var e=(0,et._)(["\n  fragment MonthlyCreditsCurrentUser on CurrentUser {\n    id\n    usageInterval {\n      ... on UsageInterval {\n        __typename\n        subtotalAmountUsd\n        planDiscountUsd\n      }\n    }\n  }\n"]);return oA=function(){return e},e}function oC(){var e=(0,et._)(["\n  fragment MonthlyCreditsOrg on UsageInterval {\n    availableCreditsUsd\n  }\n"]);return oC=function(){return e},e}function ox(){var e=(0,et._)(["\n  query MonthlyCreditsUser($orgId: String) {\n    currentUser {\n      id\n      ...MonthlyCreditsCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...TotalUsageOrg\n          usageInterval {\n            ... on UsageInterval {\n              ...MonthlyCreditsOrg\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return ox=function(){return e},e}var o_={},ok=(0,er.J1)(oA()),oD=(0,er.J1)(oC()),oE=(0,er.J1)(ox(),ok,oY.Y,oD),oR=t(81536);function oI(){var e,n,t,r,i,o,a=(0,_.A)(),l=(0,oR.R)(a).orgId,s=(e={variables:{orgId:l}},n=(0,en._)({},o_,e),ei.I(oE,n)),c=s.data,u=s.loading,d=!1;return u?d:d=l?(null==c?void 0:null===(t=c.currentUser)||void 0===t?void 0:t.org.__typename)==="Org"&&"UsageInterval"===c.currentUser.org.usageInterval.__typename&&0===c.currentUser.org.usageInterval.availableCreditsUsd:(null==c?void 0:null===(i=c.currentUser)||void 0===i?void 0:null===(r=i.usageInterval)||void 0===r?void 0:r.__typename)==="UsageInterval"&&c.currentUser.usageInterval.subtotalAmountUsd>=(null!==(o=c.currentUser.usageInterval.planDiscountUsd)&&void 0!==o?o:0)}var oF=t(64719),oT=t(50970),oP=t(2298),oL=t(98541),oU=t(29567),oN=(0,z.x)({container:[W.wp.py(4),W.wp.px(8),W.wp.borderRadius(4),W.wp.flex.growAndShrink(1),W.wp.rowWithGap(8),W.wp.align.center,W.wp.border({color:"transparent"}),{backgroundColor:eZ.LU.interactiveBackground,"&.generation-complete":[oP.b.filledAndOutlined],"&.generation-in-progress":[nN.S.foregroundPulse()],"&.is-applied":[W.wp.py(2)]}],iconCol:[W.wp.py(4),{alignSelf:"flex-start"}],textCol:[W.wp.flex.growAndShrink(1),W.wp.colWithGap(4),W.wp.overflow("hidden")],filePathAndDiffLines:[W.wp.rowWithGap(4),W.wp.justify.spaceBetween,W.wp.align.center],filePath:[W.wp.flex.shrink(1)],diffLineStatsPill:[W.wp.fontWeight.medium],editSummary:[{".is-reverted &":[W.wp.color.foregroundDimmest,{textDecoration:"line-through"}]}]});function oO(e){var n=e.filePath,t=e.content,r=e.changeSummary,i=e.status,o=e.lineStats,a=e.onOpenDiff,l=e.state,s=l===S.u5I.GENERATION_COMPLETE,c=(0,w.useCallback)(function(){s&&a(n,{type:"generatedFile",content:t})},[n,a,s,t]);return(0,f.FD)(ed.ui,{css:oN.container,className:"is-".concat(i," generation-").concat(function(e){switch(e){case S.u5I.GENERATION_IN_PROGRESS:return"in-progress";case S.u5I.GENERATION_REGENERATING:return"regenerating";case S.u5I.GENERATION_COMPLETE:return"complete";case S.u5I.GENERATION_ERROR:return"error";default:return"unknown"}}(l)),onClick:c,children:[(0,f.Y)(L.S,{css:oN.iconCol,children:(0,f.Y)(tt.A,{path:n,fill:"reverted"===i?eZ.LU.foregroundDimmest:void 0})}),(0,f.FD)(L.S,{css:oN.textCol,children:[(0,f.FD)(L.S,{css:oN.filePathAndDiffLines,children:[(0,f.Y)(P.EY,{variant:"text",color:"default",multiline:!1,css:oN.filePath,children:n}),"reverted"===i?(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(oU.A,{}),(0,f.Y)(P.EY,{variant:"text",color:"dimmer",children:"Reverted"})]}):s?(0,f.Y)(oB,{filePath:n,lineStats:o}):null]}),(0,f.Y)(L.S,{css:oN.editSummary,children:(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:r})})]})]})}function oM(e){var n=e.filePath,t=e.linesAdded,r=e.linesRemoved,i=e.onOpenDiff,o=e.commitHash;return(0,f.FD)(ed.ui,{css:oN.container,className:"is-applied generation-complete",onClick:function(){return i(n,{type:"git",revision:o})},children:[(0,f.Y)(L.S,{css:oN.iconCol,children:(0,f.Y)(tt.A,{path:n})}),(0,f.Y)(L.S,{css:oN.textCol,children:(0,f.FD)(L.S,{css:oN.filePathAndDiffLines,children:[(0,f.Y)(P.EY,{variant:"text",color:"default",children:n}),(0,f.Y)(oB,{filePath:n,lineStats:{added:t,removed:r}})]})})]})}function oB(e){var n=e.lineStats;return null==n?null:(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(oL.a,{css:oN.diffLineStatsPill,compact:!0,colorway:"positive",text:"+".concat(n.added)}),(0,f.Y)(oL.a,{css:oN.diffLineStatsPill,compact:!0,colorway:"negative",text:"-".concat(n.removed)})]})}var oH=t(44080),oz=t(25264),oW=t(42796).hp;function oG(){return{spawnCommand:(0,e9.I)(function(e){var n;return n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.spawn.rpc({cmd:"bash",args:["-ci",n]})];case 1:if(!(t=r.sent()).ok)return[2,t];return[2,{ok:!0,payload:t.payload.id}]}})}),function(e){return n.apply(this,arguments)}},[]),killProcessId:(0,e9.I)(function(e){var n;return n=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.kill.rpc({id:n})];case 1:return[2,t.sent()]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetCommandOutput:(0,e9.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=e.shellExec.monitor.subscribe({id:n}).resReadable,r=-1,i=!1,o=!1,b.label=1;case 1:b.trys.push([1,6,7,12]),l=(0,nt._)(t),b.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=b.sent()).done))return[3,5];if((c=s.value).ok&&"Finished"===c.payload.state)return r=c.payload.exitCode,[3,5];b.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return u=b.sent(),o=!0,a=u,[3,12];case 7:if(b.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:b.sent(),b.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:d=e.shellExec.readBuffer.subscribe({id:n}).resReadable,p=oW.alloc(0),f=!1,h=!1,b.label=13;case 13:b.trys.push([13,18,19,24]),g=(0,nt._)(d),b.label=14;case 14:return[4,g.next()];case 15:if(!(f=!(v=b.sent()).done))return[3,17];if((w=v.value).ok&&"output"===w.payload.$kind&&(p=oW.concat([p,w.payload.output])),w.ok&&"finished"===w.payload.$kind)return[2,{commandOutput:p.toString(),exitCode:r,processId:n}];b.label=16;case 16:return f=!1,[3,14];case 17:return[3,24];case 18:return y=b.sent(),h=!0,m=y,[3,24];case 19:if(b.trys.push([19,,22,23]),!(f&&null!=g.return))return[3,21];return[4,g.return()];case 20:b.sent(),b.label=21;case 21:return[3,23];case 22:if(h)throw m;return[7];case 23:return[7];case 24:return[2]}})}),function(e){return n.apply(this,arguments)}},[])}}var oV=t(86955),oj=t(50514),oZ=t(33747),oq=t(49321),oK=t(68753),o$=(0,z.x)({container:[W.wp.borderRadius(4),W.wp.flex.growAndShrink(1),W.wp.border({width:1,color:eZ.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[W.wp.mt(4),W.wp.mr(4)]}],headerWrapper:[W.wp.width("100%"),W.wp.flex.growAndShrink(1)],headerInner:[W.wp.width("100%")],textWrapper:[W.wp.flex.growAndShrink(1),W.wp.flex.wrap,W.wp.font.code,{lineHeight:eZ.LU.lineHeightDefault}],actionsWrapper:[W.wp.flex.growAndShrink(0),W.wp.height("100%")],terminalWrapper:[W.wp.width("100%"),{"> div":W.wp.borderRadius(0,0,4,4)}],warningIcon:[W.wp.mx(4)]});function oJ(e){var n=e.command,t=e.eventId,r=e.parentToActiveChild,i=e.sessionId,o=e.openPane,a=(0,v._)((0,w.useState)("proposed"!==n.state),2),l=a[0],s=a[1],c=oG(),u=c.spawnCommand,d=c.killProcessId,p=c.waitAndGetCommandOutput,h=(0,Y.ib)({sessionId:i,parentToActiveChild:r,eventIdWhichProposedShellExecution:t}),m=h.sendStartedShellExecutionMessage,g=h.sendFinishedShellExecutionMessage;(0,w.useEffect)(function(){"running"===n.state&&s(!0),"finished"===n.state&&0===n.commandOutput.length&&s(!1)},[n]);var S=(0,w.useCallback)((0,y._)(function(){var e,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:if(!u||!d||!p)return[2];if("running"!==n.state)return[3,2];return[4,d(n.processId)];case 1:case 6:return o.sent(),[2];case 2:return[4,u(n.command)];case 3:if(!(null==(e=o.sent())?void 0:e.ok))return[2];return[4,m({processId:t=e.payload,messageContentsOffset:n.messageContentsOffset})];case 4:if(!(null==(r=o.sent())?void 0:r.ok))return[2];return[4,p(t)];case 5:if(!(i=o.sent()))return[2];return[4,g((0,nr._)((0,en._)({},i),{messageContentsOffset:n.messageContentsOffset}))]}})}),[n,d,g,m,u,p]),A=(0,w.useCallback)(function(){o({type:"shell",data:{initialCmd:"".concat(n.command,"\n")}})},[n.command,o]);return(0,f.Y)(oQ,{command:n,isExpanded:l,toggleExpanded:function(){return s(function(e){return!e})},openPane:o,onRunInline:S,onRunInShell:A})}function oQ(e){var n=e.command,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onRunInline,a=e.onRunInShell,l=(0,f.Y)(oV.A,{}),s="Run";return"running"===n.state&&(l=(0,f.Y)(oq.A,{}),s="Stop"),"finished"===n.state&&(l=(0,f.Y)(oj.A,{}),s="Run again"),(0,f.Y)(ed.ui,{elevated:!0,children:(0,f.Y)(R.A,{css:o$.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.Y)(L.S,{css:o$.headerWrapper,row:!0,children:(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",css:o$.headerInner,children:[(0,f.Y)(L.S,{row:!0,gap:8,align:"center",css:o$.textWrapper,children:n.command}),(0,f.Y)(L.S,{align:"start",css:o$.actionsWrapper,children:(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(eY.K0,{size:24,alt:"Run in Shell",onClick:a,children:(0,f.Y)(oZ.A,{})}),(0,f.Y)(G.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,text:s,iconLeft:l,onClick:o}),n.isDangerous?(0,f.Y)(rd.m_,{tooltip:"This command is potentially dangerous!",children:(0,f.Y)(oK.A,{color:eZ.LU.accentNegativeDefault,css:o$.warningIcon})}):null]})})]})}),children:(0,f.FD)(L.S,{css:o$.terminalWrapper,children:["running"===n.state?(0,f.Y)(oH.A,{processId:n.processId,maxHeight:160,openPane:i,interactive:!0}):null,"finished"===n.state?(0,f.Y)(oz.xd,{output:n.commandOutput,maxHeight:160,openPane:i}):null]})})})}var oX=t(22824);function o0(e){var n,t=e.sessionId,r=e.eventId,i=e.parentToActiveChild,o=(0,Y.uY)(r),a=(0,Y.R9)(r),l=(0,Y.H_)({sessionId:t,eventId:r,parentToActiveChild:i}),s=(0,w.useMemo)(function(){var e;return(null!==(e=null==o?void 0:o.shellCommands)&&void 0!==e?e:[]).map(function(e){var n,t;return l.forEach(function(r){if(!(0,S.VFn)(r.contents.contents,"iterativeAgentEventContents"))return!1;var i=(0,S.QNh)(r.contents.contents).contents;(0,S.VFn)(i,"startedShellExecution")&&i.startedShellExecution.messageContentsOffset===e.messageContentsOffset&&(n=i.startedShellExecution),(0,S.VFn)(i,"finishedShellExecution")&&i.finishedShellExecution.messageContentsOffset===e.messageContentsOffset&&(t=i.finishedShellExecution)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"finished",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,commandOutput:t.commandOutput,exitCode:t.exitCode}:n?{state:"running",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,processId:n.processId}:{state:"proposed",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory}})},[null==o?void 0:o.shellCommands,l]),c=(0,w.useMemo)(function(){var e;return(null!==(e=null==o?void 0:o.packageInstalls)&&void 0!==e?e:[]).map(function(e){var n,t;return l.forEach(function(r){if(!(0,S.VFn)(r.contents.contents,"iterativeAgentEventContents"))return!1;var i=(0,S.QNh)(r.contents.contents).contents;(0,S.VFn)(i,"installingPackages")&&i.installingPackages.messageContentsOffset===e.messageContentsOffset&&(n=i.installingPackages),(0,S.VFn)(i,"installedPackages")&&i.installedPackages.messageContentsOffset===e.messageContentsOffset&&(t=i.installedPackages)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"installed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,installationOutput:t.installationOutput,exitCode:t.exitCode}:n?{state:"installing",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,processId:n.processId}:{state:"proposed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset}})},[null==o?void 0:o.packageInstalls,l]),u=(0,w.useMemo)(function(){return o?o.workspaceToolNudges:[]},[o]),d=(0,w.useMemo)(function(){return o?o.runConfigurations.map(function(e){var n=l.some(function(n){if(!(0,S.VFn)(n.contents.contents,"iterativeAgentEventContents"))return!1;var t=(0,S.QNh)(n.contents.contents).contents;return!!(0,S.VFn)(t,"appliedRunConfiguration")&&t.appliedRunConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,en._)({state:n?"applied":"proposed"},e)}):[]},[o,l]),p=(0,w.useMemo)(function(){return o?o.deploymentConfigurations.map(function(e){var n=l.some(function(n){if(!(0,S.VFn)(n.contents.contents,"iterativeAgentEventContents"))return!1;var t=(0,S.QNh)(n.contents.contents).contents;return!!(0,S.VFn)(t,"appliedDeploymentConfiguration")&&t.appliedDeploymentConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,en._)({state:n?"applied":"proposed"},e)}):[]},[o,l]),f=(0,Y.gv)(r),h=(0,w.useMemo)(function(){if(!(0,S.VFn)(f,"proposedFileChanges"))return{fileChanges:[],commitId:"",summary:""};var e=(0,S.QNh)(f),n=e.changes,t=e.commitId,r=e.summary;return{fileChanges:n.map(function(e){return(0,nr._)((0,en._)({},e),{filePath:(0,oX.iD)(e.filePath)})}),commitId:t,summary:r}},[f]),m=h.fileChanges,g=h.commitId,v=h.summary,y=(0,w.useMemo)(function(){return(0,ee._)(s.map(function(e){return(0,S.hT8)("shellCommand",e)})).concat((0,ee._)(c.map(function(e){return(0,S.hT8)("packageInstall",e)})),(0,ee._)(m.map(function(e){return(0,S.hT8)("fileChange",e)})),(0,ee._)(u.map(function(e){return(0,S.hT8)("workspaceToolNudge",e)})),(0,ee._)(d.map(function(e){return(0,S.hT8)("runConfiguration",e)})),(0,ee._)(p.map(function(e){return(0,S.hT8)("deploymentConfiguration",e)}))).sort(function(e,n){return(0,S.QNh)(e).messageContentsOffset-(0,S.QNh)(n).messageContentsOffset})},[s,c,m,u,d,p]);return{commitId:(null==o?void 0:o.commitId)||g,summary:(null==o?void 0:o.summary)||v,sortedActions:y,shellCommands:s,fileChanges:m,packageInstalls:c,workspaceToolNudges:u,runConfigurations:d,deploymentConfigurations:p,didCreateCheckpoint:null!==(n=null==o?void 0:o.didCreateCheckpoint)&&void 0!==n&&n,didCountEditRequest:a}}var o1=t(86537);function o2(){var e,n=(0,k.A)().fs;return(0,w.useCallback)((e=(0,y._)(function(e){var t,r,i,o,a,l,s,c,u,d,p,f,h,m;return(0,b.YH)(this,function(g){switch(g.label){case 0:t=e.changes,r=new Map,i=!0,o=!1,a=void 0,g.label=1;case 1:g.trys.push([1,6,7,8]),l=t[Symbol.iterator](),g.label=2;case 2:if(i=(s=l.next()).done)return[3,5];if((c=s.value).state!==S.u5I.GENERATION_COMPLETE)return[3,4];return u=[""],[4,n.readFile(c.filePath)];case 3:(d=g.sent()).error||(u=d.content.toString().split("\n")),p=no.EY.of(u),f=no.EY.of(c.content.split("\n")),h=o1.o.create(p,f),r.set(c.filePath,h.getLineStats()),g.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return m=g.sent(),o=!0,a=m,[3,8];case 7:try{i||null==l.return||l.return()}finally{if(o)throw a}return[7];case 8:return[2,r]}})}),function(n){return e.apply(this,arguments)}),[n])}var o5=t(96489),o4=t.n(o5);function o3(e){var n=e.changeStatus,t=e.removePane,r=(0,H.tL)(),i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,w.useRef)(n);return(0,w.useEffect)(function(){if("applied"!==l.current&&"applied"===n&&null!=o){var e,i=null===(e=r.find(function(e){var n=(0,v._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&o4()(t.data,o)}))||void 0===e?void 0:e[0];i&&(t(i),a(null))}l.current=n},[n,o,r,t]),{onOpenTemporaryDiffPane:a}}var o8=t(12219),o7=(0,z.x)({container:[W.wp.px(8),W.wp.py(4),W.wp.borderRadius(4),W.wp.flex.growAndShrink(1),W.wp.rowWithGap(8),oP.b.filledAndOutlined],iconCol:[W.wp.py(4)],textCol:[W.wp.flex.growAndShrink(1),W.wp.justify.center]});function o6(e){var n=e.toolName,t=e.openPane,r=(0,n$.Vv)();return o9.includes(n)?(0,f.FD)(ed.ui,{css:o7.container,onClick:function(){return t({type:n})},children:[(0,f.Y)(L.S,{css:o7.iconCol,children:r.Icon({pane:{type:n},size:16})}),(0,f.FD)(L.S,{css:o7.textCol,children:[(0,f.Y)(P.EY,{color:"default",children:r.getTitle({type:n})}),(0,f.Y)(P.EY,{color:"dimmer",variant:"small",children:r.getDescription({type:n})})]}),(0,f.Y)(L.S,{css:o7.iconCol,children:(0,f.Y)(o8.A,{})})]}):null}var o9=["agentChat","deployments","envEditor"];function ae(){return(0,e9.I)(function(e){var n;return n=(0,y._)(function(n){var t,r;return(0,b.YH)(this,function(i){return t=n.buildCommand,r=n.runCommand,[2,e.agentToolDeployConfig.update.rpc({build:t?["sh","-c",t]:void 0,run:["sh","-c",r]})]})}),function(e){return n.apply(this,arguments)}},[])}var an=t(16021),at=t(63516),ar=(0,z.x)({container:[W.wp.p(8),W.wp.borderRadius(4),W.wp.flex.growAndShrink(1),W.wp.border({width:1,color:eZ.LU.interactiveBorder})],runCommandPill:[W.wp.font.code,W.wp.flex.growAndShrink(0)],infoWrapper:[W.wp.flex.growAndShrink(1),W.wp.flex.wrap,W.wp.height("100%")],actionsWrapper:[W.wp.flex.growAndShrink(0)]});function ai(e){var n=e.deploymentConfiguration,t=e.eventId,r=e.parentToActiveChild,i=e.sessionId,o=e.openPane,a=(0,w.useCallback)(function(){o({type:"deployments"})},[o]),l=ae(),s=(0,Y.Az)({sessionId:i,parentToActiveChild:r,eventIdWhichProposedDeploymentConfiguration:t}),c=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!l)return[2];return[4,l({buildCommand:n.buildCommand,runCommand:n.runCommand})];case 1:if(!e.sent().ok)return[2];return[4,s({messageContentsOffset:n.messageContentsOffset})];case 2:return e.sent(),[2]}})}),[l,n.buildCommand,n.messageContentsOffset,n.runCommand,s]),u=n.buildCommand.length>0,d="Set deployment run command to ";return u&&(d=" and run command to "),(0,f.Y)(ed.ui,{elevated:!0,css:ar.container,children:(0,f.FD)(L.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(L.S,{row:!0,align:"center",gap:8,css:ar.infoWrapper,children:[u?(0,f.FD)(f.FK,{children:["Set deployment build command to"," ",(0,f.Y)(oL.a,{text:n.buildCommand,css:ar.runCommandPill})]}):null,d,(0,f.Y)(oL.a,{text:n.runCommand,css:ar.runCommandPill})]}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",css:ar.actionsWrapper,children:[(0,f.Y)(eY.K0,{size:24,alt:"Open Deployments",onClick:a,children:(0,f.Y)(at.A,{})}),(0,f.Y)(G.$n,{size:"small",onClick:c,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,colorway:"proposed"===n.state?"primary":void 0,iconLeft:(0,f.Y)(an.A,{})})]})]})})}var ao=t(44394),aa=t(42796).hp;function al(){return{spawnInstall:(0,e9.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=n.language,r=n.packageList,[4,e.agentToolPackager.spawnInstallPackages.rpc({language:t,pkgs:r})];case 1:if(!(i=o.sent()).ok)return[2,i];return[2,{ok:!0,payload:i.payload.id}]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetSpawnedInstallPackagesResult:(0,e9.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=e.agentToolPackager.waitAndGetSpawnedInstallPackagesResult.subscribe({processId:n}).resReadable,r=aa.alloc(0),i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,nt._)(t),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=p.sent()).done))return[3,5];if((c=s.value).ok&&"output"===c.payload.$kind&&(r=aa.concat([r,c.payload.output])),c.ok&&"finished"===c.payload.$kind)return u=c.payload.exitCode,[2,{installationOutput:r.toString(),exitCode:u}];p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e){return n.apply(this,arguments)}})}}function as(e){var n=e.eventId,t=e.packageInstall,r=e.sessionId,i=e.parentToActiveChild,o=e.openPane,a=(0,Y.Aj)({sessionId:r}).stageChanges,l=(0,v._)((0,w.useState)("installed"===t.state&&0!==t.exitCode),2),s=l[0],c=l[1];(0,w.useEffect)(function(){"installing"===t.state&&c(!0),"installed"===t.state&&0===t.exitCode&&c(!1)},[t]);var u=al(),d=u.spawnInstall,p=u.waitAndGetSpawnedInstallPackagesResult,h=(0,Y.iW)({eventIdWhichProposedPackageInstall:n,sessionId:r,parentToActiveChild:i}),m=h.sendInstallingPackagesMessage,g=h.sendInstalledPackagesMessage,S=(0,w.useCallback)((0,y._)(function(){var e,n,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!d||!p)return[2];return c(!0),[4,null==d?void 0:d({language:t.language,packageList:t.packageList})];case 1:if(!(null==(e=i.sent())?void 0:e.ok))return[2];return[4,m({processId:n=e.payload,messageContentsOffset:t.messageContentsOffset})];case 2:return i.sent(),[4,p(n)];case 3:if(!(r=i.sent()))return[2];return 0===r.exitCode&&c(!1),[4,g({installationOutput:r.installationOutput,exitCode:r.exitCode,processId:n,messageContentsOffset:t.messageContentsOffset})];case 4:return i.sent(),[4,a()];case 5:return i.sent(),[2]}})}),[d,p,t,m,g,a]);return(0,f.Y)(au,{packageInstall:t,isExpanded:s,toggleExpanded:function(){return c(function(e){return!e})},openPane:o,onInstallClick:S})}var ac=(0,z.x)({container:[W.wp.borderRadius(4),W.wp.flex.growAndShrink(1),W.wp.border({width:1,color:eZ.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[W.wp.mt(4),W.wp.mr(4)]}],headerWrapper:[W.wp.width("100%"),W.wp.flex.growAndShrink(1)],headerInner:[W.wp.mb(2)],packagesWrapper:[W.wp.width("100%"),W.wp.py(4),{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:eZ.LU.space8}],package:[W.wp.borderRadius(4),W.wp.px(8),W.wp.py(4),W.wp.width("calc(50% - ".concat(eZ.LU.space4,")")),W.wp.backgroundColor.backgroundHighest],terminalWrapper:[W.wp.width("100%"),{"> div":W.wp.borderRadius(0,0,4,4)}]});function au(e){var n=e.packageInstall,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onInstallClick,a=(0,w.useCallback)(function(){i({type:"dependencies"})},[i]),l="Install",s=(0,f.Y)(rh.A,{}),c=!1;return"installing"===n.state&&(l="Installing...",s=(0,f.Y)(tr.A,{}),c=!0),"installed"===n.state&&(l="Installed",s=(0,f.Y)(an.A,{}),c=!0),(0,f.Y)(ed.ui,{elevated:!0,children:(0,f.Y)(R.A,{css:ac.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.FD)(L.S,{css:ac.headerWrapper,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",css:ac.headerInner,children:[(0,f.Y)(P.EY,{variant:"text",color:"default",children:"Dependencies"}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(eY.K0,{size:24,alt:"Open Dependencies",onClick:a,children:(0,f.Y)(rO.A,{})}),(0,f.Y)(G.$n,{text:l,iconLeft:s,disabled:c,size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:o})]})]}),(0,f.Y)(L.S,{css:ac.packagesWrapper,children:n.packageList.map(function(e,n){return(0,f.Y)(ed.ui,{css:ac.package,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(rh.A,{}),(0,f.Y)(P.EY,{children:e})]})},n+"-"+e)})})]}),children:(0,f.FD)(L.S,{css:ac.terminalWrapper,children:["installing"===n.state?(0,f.Y)(ao.A,{processId:n.processId,openPane:i,maxHeight:160}):null,"installed"===n.state?(0,f.Y)(oz.xd,{output:n.installationOutput,maxHeight:160,openPane:i}):null]})})})}var ad=t(77781);function ap(){var e,n=(0,ad.T)(),t=(0,nW.mP)(),r=(0,nW.Eo)(),i=(0,nW.Ss)(),o=(0,nW.z1)(),a=(0,nW.jP)();return(0,w.useCallback)((e=(0,y._)(function(e){var l;return(0,b.YH)(this,function(s){return n&&((l=t.findIndex(function(n){return n.name===e.workflowName}))>=0?i(l,function(n){var t="agent"===n.author,r=n.tasks.find(function(n){return"shell.exec"===n.task&&n.args===e.oldCommand});if(r)r.args=e.newCommand;else{if(t){var i=n.tasks.find(function(e){return"shell.exec"===e.task}),o=n.tasks.filter(function(e){return"shell.exec"!==e.task});n.tasks=(0,ee._)(o).concat([(0,nr._)((0,en._)({},i),{task:"shell.exec",args:e.newCommand})]);return}n.tasks=[{task:"shell.exec",args:e.newCommand}]}},{persist:!0}):r({name:e.workflowName,author:n,tasks:[{task:"shell.exec",args:e.newCommand}]}),(e.setRunButton||!a)&&o(e.workflowName)),[2]})}),function(n){return e.apply(this,arguments)}),[n,t,a,i,r,o])}var af=t(46086),ah=(0,z.x)({container:[W.wp.p(8),W.wp.borderRadius(4),W.wp.flex.growAndShrink(1),W.wp.border({width:1,color:eZ.LU.interactiveBorder})],infoWrapper:[W.wp.flex.growAndShrink(1),W.wp.flex.wrap],runCommandPill:[W.wp.font.code,W.wp.flex.growAndShrink(0)],inlineRunButton:[W.wp.display.inlineFlex,W.wp.backgroundColor.greyDimmest,W.wp.color.greyStrongest,W.wp.align.center,W.wp.borderRadius(8),W.wp.py(2),W.wp.px(6),W.wp.mx(2)],actionsWrapper:[W.wp.flex.growAndShrink(0)]});function am(e){var n=e.text;return(0,f.FD)(L.S,{css:ah.inlineRunButton,row:!0,gap:6,children:[(0,f.Y)(oV.A,{size:12}),(0,f.Y)(P.EY,{children:n})]})}function ag(e){var n=e.runConfiguration,t=e.eventId,r=e.parentToActiveChild,i=e.sessionId,o=e.openPane,a=(0,w.useCallback)(function(){o({type:"workflows"})},[o]),l=ap(),s=(0,Y.CH)({sessionId:i,parentToActiveChild:r,eventIdWhichProposedRunConfiguration:t}),c=(0,w.useCallback)(function(){l(n),s({messageContentsOffset:n.messageContentsOffset})},[l,s,n]);return(0,f.Y)(ed.ui,{elevated:!0,css:ah.container,children:(0,f.FD)(L.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(L.S,{row:!0,align:"center",gap:8,css:ah.infoWrapper,children:["Set",(0,f.Y)(am,{text:n.workflowName}),"to",(0,f.Y)(oL.a,{text:n.newCommand,css:ah.runCommandPill})]}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",css:ah.actionsWrapper,children:[(0,f.Y)(eY.K0,{size:24,alt:"Open Workflows",onClick:a,children:(0,f.Y)(af.A,{})}),(0,f.Y)(G.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:c,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,iconLeft:(0,f.Y)(an.A,{})})]})]})})}var av=t(53323);let aw=(0,w.memo)(function(e){var n=e.text,t=e.eventId,r=e.eventState,i=e.markdownCodeComponent,o=e.markdownLinkComponent,a=e.sessionId,l=e.parentToActiveChild,s=e.openPane,c=e.removePane,u=[],d=(0,Y.vX)(t);null!=d&&u.push((0,f.Y)(ab,{eventState:r,ragSources:d,openPane:s},"rag-sources"));var p=o0({sessionId:null!=a?a:null,eventId:t,parentToActiveChild:l}),h=p.sortedActions,m=p.commitId,g=p.fileChanges,A=o2(),C=(0,v._)((0,w.useState)(function(){return new Map}),2),x=C[0],_=C[1];(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,A({changes:g})];case 1:return _(e.sent()),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[g,A]);var k=h.reduce(function(e,u){var d=(0,S.QNh)(u).messageContentsOffset;if(null==d||!a)return e;var p=(0,ee._)(e.parts);if(p.push((0,f.Y)(om.d2,{text:n.slice(e.chars,d),codeComponent:i,linkComponent:o,messageState:r},"text-slice-".concat(e.chars,"-to-").concat(d))),(0,S.VFn)(u,"fileChange")){var h=(0,S.QNh)(u);p.push((0,f.Y)(aS,{change:h,commitId:m,lineStats:x.get(h.filePath),sessionId:a,parentToActiveChild:l,eventId:t,openPane:s,removePane:c},h.filePath))}else if((0,S.VFn)(u,"shellCommand")){var g=(0,S.QNh)(u);p.push((0,f.Y)(oJ,{command:g,openPane:s,eventId:t,parentToActiveChild:l,sessionId:a},g.command))}else if((0,S.VFn)(u,"packageInstall"))p.push((0,f.Y)(as,{eventId:t,parentToActiveChild:l,sessionId:a,packageInstall:u.packageInstall,openPane:s},u.packageInstall.language+"---"+u.packageInstall.packageList.join("-")));else if((0,S.VFn)(u,"workspaceToolNudge")){var v=(0,S.QNh)(u);"deployments"===v.toolName?p.push((0,f.Y)(oT.K4,{eventId:t,onConfigure:function(){return s({type:"deployments"})},paneType:"ghostwriterChat"},v.toolName)):p.push((0,f.Y)(aY,{nudge:v,openPane:s},v.toolName))}else(0,S.VFn)(u,"runConfiguration")?p.push((0,f.Y)(ag,{runConfiguration:u.runConfiguration,openPane:s,eventId:t,parentToActiveChild:l,sessionId:a},u.runConfiguration.workflowName+"---"+u.runConfiguration.oldCommand+"---"+u.runConfiguration.newCommand)):(0,S.VFn)(u,"deploymentConfiguration")&&p.push((0,f.Y)(ai,{deploymentConfiguration:u.deploymentConfiguration,openPane:s,eventId:t,parentToActiveChild:l,sessionId:a},u.deploymentConfiguration.buildCommand+"---"+u.deploymentConfiguration.runCommand));return{chars:d,parts:p}},{chars:0,parts:u}),D=k.chars,E=k.parts,R=n.slice(D).trim();R.length>0&&E.push((0,f.Y)(om.d2,{text:R,codeComponent:i,linkComponent:o,messageState:r},"remaining-text"));var I=h.filter(function(e){return null==(0,S.QNh)(e).messageContentsOffset}),F=!0,T=!1,P=void 0;try{for(var L,U=I[Symbol.iterator]();!(F=(L=U.next()).done);F=!0){var N=L.value;if((0,S.VFn)(N,"fileChange")){var O=(0,S.QNh)(N);E.push((0,f.Y)(aS,{change:O,commitId:m,lineStats:x.get(O.filePath),sessionId:a,parentToActiveChild:l,eventId:t,openPane:s,removePane:c},O.filePath))}}}catch(e){T=!0,P=e}finally{try{F||null==U.return||U.return()}finally{if(T)throw P}}return(0,f.Y)(f.FK,{children:E})});var ay=(0,z.x)({container:[W.wp.borderRadius()],accordionItem:[W.wp.flex.growAndShrink(1)],list:[W.wp.display.flex,W.wp.colWithGap(2),W.wp.p(4),W.wp.border({color:eZ.LU.outlineDefault}),W.wp.borderRadius()],listItem:[W.wp.cursor.pointer,oP.b.listItem,W.wp.p(4),W.wp.borderRadius(4)],header:[W.wp.color.foregroundDimmer]});function ab(e){var n=e.eventState,t=e.ragSources,r=e.openPane;if(0===t.length)return null;var i=(0,tN.A)("file",t.length);return(0,f.Y)(ed.ui,{css:ay.container,row:!0,children:(0,f.Y)(R.A,{css:ay.accordionItem,headerContent:(0,f.FD)(L.S,{row:!0,gap:6,align:"center",css:ay.header,children:[(0,f.Y)(av.A,{}),(0,f.Y)(P.EY,{children:n===S.qOk.IN_PROGRESS?"Reading ".concat(t.length," ").concat(i,""):"Read ".concat(t.length," ").concat(i)})]}),children:(0,f.Y)("ul",{"aria-label":"RAG sources",css:ay.list,children:t.map(function(e){var n=(0,oF.A)(e.url);return(0,f.Y)("li",{children:(0,f.FD)(L.S,{css:ay.listItem,row:!0,gap:4,onClick:function(){return r({type:"codeEditor",data:{path:n}})},children:[(0,f.Y)(tt.A,{path:n,size:16}),(0,f.Y)(P.EY,{variant:"small",children:n})]})},e.url)})})})})}function aS(e){var n=e.change,t=e.commitId,r=e.lineStats,i=e.sessionId,o=e.parentToActiveChild,a=e.eventId,l=e.openPane,s=e.removePane,c=(0,Y.tS)({sessionId:i,parentToActiveChild:o,eventId:a}),u=c.appliedOrRevertedChanges,d=c.changeStatus,p=o3({changeStatus:d,removePane:s}).onOpenTemporaryDiffPane,h=(0,w.useCallback)(function(e,n){var r={type:"diff",data:{left:{path:e,data:{type:"git",revision:t}},right:{path:e,data:n}}};l(r),p(r.data)},[l,t,p]);if(!n)return null;if("applied"===d&&(0,S.VFn)(null==u?void 0:u.contents,"appliedFileChanges")){var m=(0,S.QNh)(u.contents),g=m.appliedChanges,v=m.commitHash,y=g.find(function(e){return e.filePath===n.filePath});return y?(0,f.Y)(oM,(0,en._)({commitHash:v,onOpenDiff:h},y)):null}return(0,f.Y)(oO,(0,nr._)((0,en._)({},n),{status:d,lineStats:r,onOpenDiff:h}))}function aY(e){var n=e.nudge,t=e.openPane;return(0,f.Y)(o6,(0,nr._)((0,en._)({},n),{openPane:t}))}var aA=(0,w.memo)(function(e){var n,t,r=e.eventId,i=e.eventState,o=e.sessionId,a=e.parentToActiveChild,l=e.openPane,s=e.removePane,c=e.markdownCodeComponent,u=e.markdownLinkComponent,d=(0,Y.z_)(r),p=(0,Y.NX)(r);return(null==d?void 0:d.content)||i===S.qOk.COMPLETE?(null==d?void 0:d.$kind)==="messageEventContents"||(null==d?void 0:d.$kind)==="inlineActionEventContents"?p===S.qRv.ITERATIVE_AGENT?(0,f.Y)(aw,{text:null!==(n=d.content)&&void 0!==n?n:"",eventId:r,eventState:i,markdownCodeComponent:c,markdownLinkComponent:u,sessionId:o,parentToActiveChild:a,openPane:l,removePane:s}):(0,f.Y)(om.d2,{text:null!==(t=d.content)&&void 0!==t?t:"",codeComponent:c,linkComponent:u,messageState:i}):null:(0,f.Y)(tr.A,{})}),aC=t(3596),ax=t(29454);function a_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.commit,t=void 0===n||n,r=(0,k.A)().git,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1];return(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,r.isInitialized()];case 1:if(null!=(e=n.sent()).error)return c(e.error),[2];if(a(e.initialized),!e.initialized)return[3,7];if(!t)return[3,6];n.label=2;case 2:return n.trys.push([2,4,,6]),[4,r.getCommit({commit:"HEAD"})];case 3:case 5:return n.sent(),[3,6];case 4:return n.sent(),[4,r.commit({message:"Initial commit"})];case 6:return a(!0),[3,9];case 7:return[4,r.init({initialCommit:t})];case 8:n.sent(),a(!0),n.label=9;case 9:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,t]),{isGitInitialized:o,gitError:s}}var ak=t(38584),aD=(0,z.x)({root:[W.wp.width("100%")],banner:[W.wp.width("100%")],li:[{listStyle:"none"}]});function aE(e){var n=e.changedPaths,t=e.openPane,r=(0,v._)((0,w.useState)(100),2),i=r[0],o=r[1],a=(0,t9.A)(function(e){o(e.width/10)});return(0,f.Y)(L.S,{innerRef:a,css:aD.root,children:(0,f.Y)(tK.N,{css:aD.banner,icon:(0,f.Y)(rf.A,{}),colorway:"yellow",text:(0,f.FD)(rs.s,{variant:"small",children:[Y.BP," has detected other changes to these files since this code was generated:",(0,f.Y)("ul",{style:{margin:0},children:n.map(function(e){return(0,f.Y)("li",{css:aD.li,children:(0,f.Y)(G.$n,{variant:"underlined",size:"small",iconLeft:(0,f.Y)(tt.A,{path:e,size:16}),text:(0,ak.U)(e,{truncateFrom:"start",maxLength:i}),onClick:function(){return t({type:"codeEditor",data:{path:e}})}})},e)})}),"You can retry this ",aC.go," or overwrite those changes and apply ",Y.BP," edits anyway."]})})})}var aR=t(51297),aI=t(54867),aF=t(47650),aT=t(4595),aP=(0,z.x)({wrapper:[W.wp.width("100%"),W.wp.p(8),W.wp.borderRadius(4)],actionRowWrapper:[W.wp.height(24)],actionRow:[W.wp.maxWidth("100%"),W.wp.flex.growAndShrink(1),W.wp.overflow("hidden")],handleOverflow:[W.wp.maxWidth("100%"),W.wp.flex.growAndShrink(1),W.wp.overflow("hidden")],alignBaseline:[W.wp.height("100%"),{alignItems:"baseline"}],iconWrapper:[W.wp.width(20)],errorText:[W.wp.color.accentNegativeStronger]});function aL(e){var n=e.action,t=n.state;switch(t){case"preparing":return null;case"scheduled":case"skipped":return(0,f.Y)(aF.A,{});case"working":return(0,f.Y)(tr.A,{});case"done":return(0,f.Y)(an.A,{color:eZ.LU.accentPositiveDefault});case"failed":return(0,f.Y)(rd.m_,{tooltip:n.error,children:(0,f.Y)(oK.A,{color:eZ.LU.accentNegativeDefault})});default:(0,aI.A)(t)}}function aU(e){var n=e.action,t=n.$kind;switch(t){case"workspaceToolNudge":return null;case"shellCommand":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:aP.handleOverflow,children:[(0,f.Y)(oZ.A,{}),(0,f.FD)(L.S,{row:!0,gap:2,css:aP.alignBaseline,children:["Run shell command:"," ",(0,f.Y)(P.EY,{multiline:!1,variant:"code",children:n.shellCommand.command})]})]});case"packageInstall":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:aP.handleOverflow,children:[(0,f.Y)(rO.A,{}),(0,f.FD)(L.S,{row:!0,gap:2,css:aP.alignBaseline,children:["Install dependencies:",n.packageInstall.packageList.map(function(e){return(0,f.Y)(oL.a,{text:e},e)})]})]});case"fileChange":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:aP.handleOverflow,children:[(0,f.Y)(av.A,{}),(0,f.FD)(L.S,{row:!0,gap:4,css:aP.alignBaseline,children:["Edit file",(0,f.Y)(P.EY,{multiline:!1,variant:"code",children:n.fileChange.filePath})]})]});case"runConfiguration":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:aP.handleOverflow,children:[(0,f.Y)(aT.A,{}),(0,f.FD)(L.S,{row:!0,gap:4,css:aP.alignBaseline,children:["Configure ",(0,f.Y)(oL.a,{text:n.runConfiguration.workflowName})," ","workflow"]})]});case"deploymentConfiguration":var r=n.deploymentConfiguration.buildCommand.length>0,i=n.deploymentConfiguration.runCommand.length>0,o="";return r&&!i?o="Configure deployment build command":!r&&i?o="Configure deployment run command":r&&i&&(o="Configure deployment build and run commands"),(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:aP.handleOverflow,children:[(0,f.Y)(at.A,{}),(0,f.Y)(L.S,{row:!0,gap:4,css:aP.alignBaseline,children:(0,f.Y)(L.S,{row:!0,align:"center",children:o})})]});default:(0,aI.A)(t)}}function aN(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,A,C,x,_,D,R,I,F,T,P,L,U,N,O,M,B,H,z,W,G,V,j,Z,q,K,$,J,Q=e.sessionId,X=e.eventId,ee=e.parentToActiveChild,et=e.changeStatus,er=e.onCancel,ei=(t=(n={sessionId:Q,eventId:X,parentToActiveChild:ee,handleAutoRestart:e.handleAutoRestart,doAutoApplyChanges:e.doAutoApplyChanges}).sessionId,r=n.eventId,i=n.parentToActiveChild,o=n.handleAutoRestart,a=n.doAutoApplyChanges,l=(0,Y.Aj)({sessionId:t}).commitAppliedChanges,c=(s=o0({sessionId:t,eventId:r,parentToActiveChild:i})).sortedActions,u=s.summary,d=(0,E.HJ)(void 0),(0,w.useEffect)(function(){void 0===d.current&&d.set(c.map(function(e){return"workspaceToolNudge"===e.$kind?{action:e,state:"skipped",checked:!1}:"shellCommand"===e.$kind&&e.shellCommand.isDangerous?{action:e,state:"preparing",checked:!1}:{action:e,state:"preparing",checked:!0}}))},[d,c]),h=(p=(0,v._)((0,w.useState)({state:"idle"}),2))[0],m=p[1],g=(0,e1.A)(h),A=(0,w.useRef)(!1),C=(0,Y.pq)({sessionId:t,parentToActiveChild:i,useLatestEventId:!0}),x=o2(),D=(_=oG()).spawnCommand,R=_.waitAndGetCommandOutput,F=(I=(0,Y.ib)({sessionId:t,parentToActiveChild:i,eventIdWhichProposedShellExecution:r})).sendStartedShellExecutionMessage,T=I.sendFinishedShellExecutionMessage,L=(P=al()).spawnInstall,U=P.waitAndGetSpawnedInstallPackagesResult,O=(N=(0,Y.iW)({eventIdWhichProposedPackageInstall:r,sessionId:t,parentToActiveChild:i})).sendInstallingPackagesMessage,M=N.sendInstalledPackagesMessage,B=ap(),H=(0,Y.CH)({sessionId:t,parentToActiveChild:i,eventIdWhichProposedRunConfiguration:r}),z=ae(),W=(0,Y.Az)({sessionId:t,parentToActiveChild:i,eventIdWhichProposedDeploymentConfiguration:r}),G=(0,k.A)().fs,j=(0,w.useCallback)((V=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.change,[4,G.writeFile(n.filePath,n.content)];case 1:if(null!==(t=r.sent()).error)return[2,{error:t.error}];return[2,{}]}})}),function(e){return V.apply(this,arguments)}),[G]),Z=(0,w.useMemo)(function(){return D&&R&&L&&U&&z},[z,D,L,R,U]),q=(0,w.useCallback)((0,y._)(function(){var e,n,t,i,a,s,c,p,f,h,v,w,y,_,k,E,I,P,N,G,V,q,K,$,J,Q,X,ee,et,er,ei,eo,ea,el,es;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!d.current||"idle"!==g.current.state||!Z)return[2];return m({state:"working"}),[4,x({changes:e=d.current.map(function(e){return(0,S.VFn)(e.action,"fileChange")?(0,S.QNh)(e.action):null}).filter(function(e){return null!==e})})];case 1:n=b.sent(),t=new Set,d.update((0,aR.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"===e.state&&e.checked?"scheduled":"skipped"})})),i=-1,a=!1,s=!1,b.label=2;case 2:b.trys.push([2,27,28,33]),p=(0,nt._)(d.current),b.label=3;case 3:return[4,p.next()];case 4:if(!(a=!(f=b.sent()).done))return[3,26];if(h=f.value,i++,"scheduled"!==h.state)return[3,25];switch(d.update((0,aR.jM)(function(e){e&&(e[i].state="working")})),v=function(){d.update((0,aR.jM)(function(e){e&&(e[i]={action:e[i].action,checked:e[i].checked,state:"done"})}))},w=function(e){d.update((0,aR.jM)(function(n){n&&(n[i]={action:n[i].action,checked:n[i].checked,state:"failed",error:e})}))},_=(y=h.action).$kind){case"workspaceToolNudge":return[3,5];case"shellCommand":return[3,6];case"packageInstall":return[3,11];case"runConfiguration":return[3,16];case"deploymentConfiguration":return[3,19];case"fileChange":return[3,22]}return[3,24];case 5:return[3,25];case 6:return k=y.shellCommand,[4,null==D?void 0:D(k.command)];case 7:if(!(null==(E=b.sent())?void 0:E.ok))return w("spawning shell command failed"),[3,25];return[4,F({processId:E.payload,messageContentsOffset:k.messageContentsOffset})];case 8:if(!(null==(I=b.sent())?void 0:I.ok))return w("server request failed"),[3,25];return[4,null==R?void 0:R(E.payload)];case 9:if(!(P=b.sent())||0!==P.exitCode)return w("shell command failed"),[3,25];return[4,T((0,nr._)((0,en._)({},P),{messageContentsOffset:k.messageContentsOffset}))];case 10:if(!(null==(N=b.sent())?void 0:N.ok))return w("server request failed"),[3,25];return v(),[3,25];case 11:return G=y.packageInstall,[4,null==L?void 0:L({language:G.language,packageList:G.packageList})];case 12:if(!(null==(V=b.sent())?void 0:V.ok))return w("spawning packager failed"),[3,25];return[4,O({processId:V.payload,messageContentsOffset:G.messageContentsOffset})];case 13:if(!(null==(q=b.sent())?void 0:q.ok))return w("server request failed"),[3,25];return[4,null==U?void 0:U(V.payload)];case 14:if(!(K=b.sent())||0!==K.exitCode)return w("failed to run packager"),[3,25];return[4,M({installationOutput:K.installationOutput,exitCode:K.exitCode,processId:V.payload,messageContentsOffset:G.messageContentsOffset})];case 15:if(!(null==($=b.sent())?void 0:$.ok))return w("server request failed"),[3,25];return v(),[3,25];case 16:return[4,B(J=y.runConfiguration)];case 17:return b.sent(),[4,H({messageContentsOffset:J.messageContentsOffset})];case 18:if(!(null==(Q=b.sent())?void 0:Q.ok))return w("server request failed"),[3,25];return v(),[3,25];case 19:return X=y.deploymentConfiguration,[4,null==z?void 0:z({buildCommand:X.buildCommand,runCommand:X.runCommand})];case 20:if(!(null==(ee=b.sent())?void 0:ee.ok))return w("failed configuring deployment"),[3,25];return[4,W({messageContentsOffset:X.messageContentsOffset})];case 21:if(!(null==(et=b.sent())?void 0:et.ok))return w("server request failed"),[3,25];return v(),[3,25];case 22:return[4,j({change:y.fileChange})];case 23:if(b.sent().error)return w("file write failed"),[3,25];return v(),t.add(y.fileChange.filePath),[3,25];case 24:(0,aI.A)(_),b.label=25;case 25:return a=!1,[3,3];case 26:return[3,33];case 27:return er=b.sent(),s=!0,c=er,[3,33];case 28:if(b.trys.push([28,,31,32]),!(a&&null!=p.return))return[3,30];return[4,p.return()];case 29:b.sent(),b.label=30;case 30:return[3,32];case 31:if(s)throw c;return[7];case 32:return[7];case 33:return[4,l({changes:ei=e.filter(function(e){return t.has(e.filePath)}),summary:u,eventId:r})];case 34:if(ea="hash"in(eo=b.sent())?eo.hash:null,el="error"in eo?eo.error:null,!ea)return el===Y.ic.NOTHING_TO_COMMIT?m({state:"failed",error:"nothing to commit",canRetryApply:!1}):m({state:"failed",error:"commit failed: "+el,canRetryApply:!0}),[2];return[4,C({appliedChanges:ei.map(function(e){var t,r,i=e.filePath,o=e.changeSummary,a=n.get(i);return{filePath:i,linesAdded:null!==(t=null==a?void 0:a.added)&&void 0!==t?t:0,linesRemoved:null!==(r=null==a?void 0:a.removed)&&void 0!==r?r:0,changeSummary:o}}),commitHash:ea})];case 35:if(!(null==(es=b.sent())?void 0:es.ok))return m({state:"failed",error:"server request failed",canRetryApply:!0}),[2];return m({state:"done"}),o(),A.current=!1,[2]}})}),[d,g,Z,l,u,r,x,C,o,D,F,R,T,L,O,U,M,B,H,z,W,j]),K=(0,w.useCallback)(function(){d.update((0,aR.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"})})),m({state:"idle"}),g.current={state:"idle"},q()},[q,g,d]),$=(0,E.J2)(d),J=(0,w.useCallback)(function(e){d.update((0,aR.jM)(function(n){n&&"preparing"===n[e].state&&(n[e].checked=!n[e].checked)}))},[d]),(0,w.useEffect)(function(){a&&Z&&"idle"===g.current.state&&!0!==A.current&&(A.current=!0,q())},[q,a,g,A,Z]),{state:h,multistepActions:$,toggleMultistepActionCheck:J,applyActions:q,reapplyActions:K}),eo=ei.applyActions,ea=ei.reapplyActions,el=ei.multistepActions,es=ei.toggleMultistepActionCheck,ec=ei.state,eu=(0,w.useMemo)(function(){return!!("failed"===ec.state||(null==el?void 0:el.some(function(e){return"failed"===e.state})))},[el,ec.state]);return el&&0!==el.length&&("applied"!==et||eu)?(0,f.Y)(aO,{multistepActions:el,multistepState:ec,onCancel:er,applyActions:eo,reapplyActions:ea,toggleMultistepActionCheck:es}):null}function aO(e){var n=e.multistepActions,t=e.multistepState,r=e.onCancel,i=e.applyActions,o=e.reapplyActions,a=e.toggleMultistepActionCheck,l=(0,w.useMemo)(function(){return null==n?void 0:n.some(function(e){return"preparing"===e.state&&!0===e.checked})},[n]);return(0,f.FD)(ed.ui,{elevated:!0,css:aP.wrapper,gap:8,children:[(0,f.Y)(P.EY,{children:"Apply all:"}),(0,f.FD)(L.S,{gap:8,css:aP.handleOverflow,children:[(0,f.Y)(L.S,{gap:4,css:aP.handleOverflow,children:null==n?void 0:n.map(function(e,n){return(0,f.FD)(L.S,{row:!0,gap:8,css:aP.actionRow,children:[(0,f.Y)(L.S,{align:"center",justify:"center",css:aP.iconWrapper,children:"preparing"===e.state?(0,f.Y)(nM.S,{name:e.action.$kind,checked:e.checked,onChange:function(){a(n)}}):(0,f.Y)(aL,{action:e})}),(0,f.Y)(L.S,{align:"center",css:aP.actionRowWrapper,children:(0,f.Y)(aU,{action:e.action})})]},n+"---"+e.action.$kind)})}),"idle"===t.state?(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(G.$n,{text:"Cancel",onClick:r}),(0,f.Y)(G.$n,{text:"Ok",colorway:"primary",disabled:!l,onClick:i})]}):null,"failed"===t.state?(0,f.FD)(L.S,{row:!0,gap:16,css:aP.errorText,align:"center",children:[(0,f.Y)(L.S,{children:t.error}),t.canRetryApply?(0,f.Y)(G.$n,{text:"Try again",colorway:"primary",onClick:o}):null]}):null]})]})}var aM=t(2301),aB=(0,z.x)({popoverContent:[W.wp.p(8),W.wp.colWithGap(8)]});function aH(e){var n=e.runState,t=e.onClick,r=n===S.g32.AGENT_STATE_PAUSING,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),a(!1),[2]}})}),[t]);return(0,f.FD)(aM.Wv,{label:"Pause ".concat(Y.g$," confirmation"),placement:"top",trigger:"click",isOpen:o,onOpenChange:a,children:[(0,f.Y)(G.$n,{text:r?"Pausing ".concat(Y.g$,""):"Pause ".concat(Y.g$),colorway:"red",disabled:r}),(0,f.FD)(L.S,{css:aB.popoverContent,children:[(0,f.FD)(P.EY,{children:["Are you sure you want to pause"," ",(0,Y.Nn)({variant:"casual",capitalizeFirstChar:!1}),"?"]}),(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(G.$n,{text:"Cancel",onClick:function(){return a(!1)}}),(0,f.Y)(G.$n,{text:"Pause ".concat(Y.g$),onClick:l,colorway:"red"})]})]})]})}function az(){return(az=(0,y._)(function(e,n){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:var o;return t={},r=null,[4,Promise.all(n.map((o=(0,y._)(function(n){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(n)];case 1:return(i=o.sent()).error?r=i.error:t[n]=i.content.toString(),[2]}})}),function(e){return o.apply(this,arguments)})))];case 1:return i.sent(),[2,{contents:t,error:r}]}})})).apply(this,arguments)}var aW=t(67324),aG=t(21691),aV=t(89386),aj=(0,z.x)({buttonRow:[W.wp.flex.wrap],errorContainer:[W.wp.rowWithGap(8),W.wp.align.center,W.wp.color.accentNegativeDefault],statusBanner:[W.wp.width("100%")]});function aZ(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,A,C,x,_=e.fileChanges,D=e.commitId,E=e.summary,R=e.shellCommands,I=e.packageInstalls,F=e.runConfigurations,T=e.deploymentConfigurations,U=e.eventId,N=e.sessionId,O=e.parentToActiveChild,M=e.setActiveChild,B=e.openAiChatSettingsPanel,H=e.openPane,z=e.removePane,V=(0,iq._P)({controlName:"flag-no-jar",logFlagToAnalytics:!1}),j=(0,ax.Z)("workspace-assistant-auto-apply-changes"),Z=(0,ax.Z)("workspace-assistant-auto-restart-repl"),q=(0,n1.gc)("assistantAutoApplyChanges","assistantAutoRestartRepl").preferences,K=_.length>0,$=R.length>0,J=I.length>0,Q=F.length>0,X=T.length>0,ee=$||J||Q||X,et=q.assistantAutoApplyChanges&&j.isDone&&(!!V||!ee),er=1===_.length&&!ee,ei=a_().isGitInitialized,eo=(0,v._)((0,w.useState)(!1),2),ea=eo[0],el=eo[1],es=(0,v._)((0,w.useState)(null),2),ec=es[0],eu=es[1],ed=(0,v._)((0,w.useState)(!1),2),ep=ed[0],ef=ed[1],eh=(0,v._)((0,w.useState)(null),2),em=eh[0],eg=eh[1],ev=o2(),ew=(0,Y.dm)().getAssistantMessageModel,ey=(0,Y.Aj)({sessionId:N}),eb=ey.supportsAgent&&(ey.agentRunState===S.g32.AGENT_STATE_RUNNING||ey.agentRunState===S.g32.AGENT_STATE_PAUSING),eS=(0,v._)((0,w.useState)(null),2),eY=eS[0],eA=eS[1],eC=(0,w.useCallback)((0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ey.pauseAgent()];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),eA("Unable to pause agent: ".concat(e)),[3,3];case 3:return[2]}})}),[ey]),ex=(0,Y.tS)({sessionId:N,parentToActiveChild:O,eventId:U}),e_=ex.latestEventIdWhichProposedChanges,ek=ex.applyLatestChanges,eD=ex.changeStatus,eE=ex.isMessageComplete,eR=_.some(function(e){return e.state===S.u5I.GENERATION_REGENERATING}),eI=eE&&"pending"===eD&&!eR,eF=e_===U,eT=o3({changeStatus:eD,removePane:z}).onOpenTemporaryDiffPane,eP=(n=(0,k.A)().fs,(0,w.useCallback)((t=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.changes.map(function(e){return n.writeFile(e.filePath,e.content)}))];case 1:if(null!=(t=r.sent().find(function(e){return null!=e.error})))return[2,{error:t.error}];return[2,{}]}})}),function(e){return t.apply(this,arguments)}),[n])),eL=(i=(r={filePaths:(0,w.useMemo)(function(){return _.map(function(e){return e.filePath})},[_]),commitId:D}).commitId,o=r.filePaths,a=(0,k.A)().fs,s=(l=(0,v._)((0,w.useState)(null),2))[0],c=l[1],d=(0,rV.A)((u=(0,y._)(function(e){var n,t,r,a,l,s,c,u,d,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(n=null,t={},!i)return[2,{fileContents:t,error:rG.uA.NO_COMMITS}];r=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),s=o[Symbol.iterator](),f.label=2;case 2:if(r=(c=s.next()).done)return[3,5];return u=c.value,[4,e.getFileContents({path:u,revision:i,convertToBase64:!1})];case 3:(d=f.sent()).error?n=d.error:d.content&&(t[u]=d.content),f.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return p=f.sent(),a=!0,l=p,[3,8];case 7:try{r||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2,{error:n,fileContents:t}]}})}),function(e){return u.apply(this,arguments)}),[i,o],{keepStaleResult:!0}),(0,w.useEffect)(function(){(null==d?void 0:d.error)&&c(d.error)},[d]),h=(p=(0,v._)((0,w.useState)({}),2))[0],m=p[1],(0,w.useEffect)(function(){(function(e,n){return az.apply(this,arguments)})(a,o).then(function(e){var n=e.contents,t=e.error;m(n),t&&c(t)});var e=o.map(function(e){return a.watchTextFile(e,{onChange:(0,y._)(function(){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,a.readFile(e)];case 1:if((n=t.sent()).error)return c(n.error),[2];return m(function(t){return(0,nr._)((0,en._)({},t),(0,g._)({},e,n.content.toString()))}),[2]}})})})});return function(){e.forEach(function(e){return e()})}},[a,o]),(0,w.useMemo)(function(){if(null==d||null==h)return{changedPaths:[],hasAnyChangedPaths:!1,error:s,isLoading:!0};if(s)return{changedPaths:[],hasAnyChangedPaths:!1,error:s,isLoading:!1};var e=o.filter(function(e){return h[e]!==d.fileContents[e]});return{changedPaths:e,hasAnyChangedPaths:e.length>0,error:s,isLoading:!1}},[h,d,o,s])),eU=eL.changedPaths,eN=eL.hasAnyChangedPaths,eO=eL.isLoading,eM=(A=!!(0,nW.jP)(),C=(0,e9.I)(function(e){return function(){return e.workflows.agentRestartRepl.rpc({})}},[]),x=(0,e9.I)(function(e){return function(){return e.agentToolRun.run.rpc({})}},[]),(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){return A?[2,null==C?void 0:C()]:[2,null==x?void 0:x()]})}),[A,C,x])),eB=(0,v._)((0,w.useState)(!1),2),eH=eB[0],ez=eB[1],eW=(0,Y.ql)(),eG=(0,Y.jJ)(U),eV=(0,w.useCallback)(function(){eW(U,{model:ew({isAuthorized:!0},"advanced"),intent:S.qRv.ITERATIVE_AGENT}),eG&&M({parentEventId:eG.parentEventId,eventId:null})},[eW,U,ew,eG,M]),ej=(0,w.useCallback)((0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!q.assistantAutoRestartRepl)return[3,2];return[4,null==eM?void 0:eM()];case 1:(null==(e=t.sent())?void 0:e.ok)?ez(!0):eg(null!==(n=null==e?void 0:e.payload.message)&&void 0!==n?n:"Failed to restart workflow"),t.label=2;case 2:return[2]}})}),[q.assistantAutoRestartRepl,eM]),eZ=(0,w.useCallback)((0,y._)(function(){var e,n,t,r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return el(!0),[4,ev({changes:_})];case 1:return e=a.sent(),[4,eP({changes:_})];case 2:if((n=a.sent()).error)return eu(n.error),el(!1),[2];return eu(null),t=_.map(function(n){var t,r,i=n.filePath,o=n.changeSummary,a=e.get(i);return{filePath:i,linesAdded:null!==(t=null==a?void 0:a.added)&&void 0!==t?t:0,linesRemoved:null!==(r=null==a?void 0:a.removed)&&void 0!==r?r:0,changeSummary:o}}),[4,ey.commitAppliedChanges({changes:_,summary:E,eventId:U})];case 3:if(i="hash"in(r=a.sent())?r.hash:null,o="error"in r?r.error:null,!i)return o===Y.ic.NOTHING_TO_COMMIT?(eu("There were no changes to commit."),ef(!1)):(eu("Something went wrong".concat(o?": ".concat(o):"",". Please try again.")),ef(!0)),el(!1),[2];return ek({appliedChanges:t,commitHash:i}),el(!1),j.isDone||j.setAsDone(),ej(),[2]}})}),[eP,_,ev,ey,E,U,ek,j,ej]),eq=(0,v._)((0,w.useState)(!1),2),eK=eq[0],e$=eq[1],eJ=(0,w.useCallback)(function(){if(!V||er)return eZ();e$(!0)},[eZ,er,V]),eQ=(0,w.useCallback)(function(){var e=_.map(function(e){return{left:{path:e.filePath,data:{type:"git",revision:D}},right:{path:e.filePath,data:{type:"generatedFile",content:e.content}}}});H({type:"diff",data:e}),eT(e)},[D,H,_,eT]),eX=(0,w.useMemo)(function(){return!!et&&!!eF&&!ea&&!!eI&&!eb},[eb,ea,eF,eI,et]);(0,w.useEffect)(function(){eX&&eJ()},[eX,eJ]);var e0=(0,f.Y)(tK.N,{css:aj.statusBanner,icon:(0,f.Y)(rf.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[Y.BP," can automatically apply proposed changes to your App. You can enable this behavior in"," ",(0,f.Y)(G.$n,{css:W.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:B,text:"".concat(Y.BP," Settings")}),"."]}),closable:!0,closeAction:j.setAsDone}),e1=(0,f.Y)(tK.N,{css:aj.statusBanner,icon:(0,f.Y)(rf.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[Y.BP," automatically restarted your App after applying file changes. You can disable this behavior in"," ",(0,f.Y)(G.$n,{css:W.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:B,text:"".concat(Y.BP," Settings")}),"."]}),closable:!0,closeAction:Z.setAsDone}),e2=eb?(0,f.FD)(P.EY,{variant:"small",color:"dimmer",children:[(0,Y.Nn)({capitalizeFirstChar:!0})," is currently active. Changes cannot be applied until ",(0,Y.Nn)()," finishes working."]}):null,e5=!V&&$?(0,f.FD)(P.EY,{variant:"small",color:"dimmer",children:[q.assistantAutoApplyChanges?"Auto-apply was paused. ":"","Make sure to run the proposed shell"," ",(0,tN.A)("command",R.length),K?" and apply file changes":""," before proceeding."]}):null;return eF&&ei?ea||eR?(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[eR?(0,f.Y)(P.EY,{color:"dimmer",children:"Thinking"}):ea?(0,f.Y)(P.EY,{color:"dimmer",children:"Applying changes"}):null,(0,f.Y)(tr.A,{})]}):eE?(0,f.FD)(L.S,{gap:8,align:"start",children:[j.isDone?null:e0,(0,f.Y)(aq,{changeStatus:eD,isLoadingFilesChangedSinceCommit:eO,hasAnyChangedPaths:eN,changedPaths:eU,openPane:H,handleRetryProposingChanges:eV,handleApplyChanges:eJ,isAgentActive:eb,agentRunState:ey.agentRunState,handlePauseAgent:eC,assistantAutoApplyChanges:q.assistantAutoApplyChanges,openMultiDiffPane:eQ,isMultistepApplyUIVisible:eK}),null!=e2?e2:e5,null==eY?null:(0,f.FD)(L.S,{css:aj.errorContainer,children:[(0,f.Y)(aG.A,{}),eY,(0,f.Y)(G.$n,{text:"Try again",onClick:eC,variant:"underlined",iconLeft:(0,f.Y)(aV.A,{})})]}),null==ec?null:(0,f.FD)(L.S,{css:aj.errorContainer,children:[(0,f.Y)(aG.A,{}),ec,ep?(0,f.Y)(G.$n,{text:"Try again",onClick:eJ,variant:"underlined",iconLeft:(0,f.Y)(aV.A,{})}):null]}),!eH||Z.isDone?null:e1,null==em?null:(0,f.FD)(L.S,{css:aj.errorContainer,children:[(0,f.Y)(aG.A,{}),em]}),eK?(0,f.Y)(aN,{sessionId:N,eventId:U,parentToActiveChild:O,changeStatus:eD,onCancel:function(){e$(!1)},handleAutoRestart:ej,doAutoApplyChanges:eX}):null]}):null:null}function aq(e){var n=e.changeStatus,t=e.isLoadingFilesChangedSinceCommit,r=e.hasAnyChangedPaths,i=e.changedPaths,o=e.openPane,a=e.handleRetryProposingChanges,l=e.handleApplyChanges,s=e.isAgentActive,c=e.agentRunState,u=e.handlePauseAgent,d=e.assistantAutoApplyChanges,p=e.openMultiDiffPane;return e.isMultistepApplyUIVisible||"pending"!==n?null:t?(0,f.Y)(L.S,{css:aj.buttonRow,row:!0,gap:8,align:"center",children:(0,f.Y)(G.$n,{text:"Validating code changes",iconLeft:(0,f.Y)(tr.A,{}),disabled:!0})}):r?(0,f.FD)(f.FK,{children:[(0,f.Y)(aE,{changedPaths:i,openPane:o}),(0,f.FD)(L.S,{css:aj.buttonRow,row:!0,gap:8,align:"center",children:[(0,f.Y)(G.$n,{text:"Retry ".concat(aC.go),onClick:a,iconLeft:(0,f.Y)(aV.A,{})}),(0,f.Y)(G.$n,{text:"Overwrite and apply",onClick:l,iconLeft:(0,f.Y)(an.A,{}),colorway:"warning"})]})]}):(0,f.FD)(L.S,{css:aj.buttonRow,row:!0,gap:8,align:"center",children:[s?(0,f.Y)(aH,{runState:c,onClick:u}):null,(0,f.Y)(G.$n,{text:"Apply all",onClick:l,iconLeft:(0,f.Y)(an.A,{}),disabled:s,colorway:d?"green":"primary"}),(0,f.Y)(G.$n,{text:"Preview code changes",onClick:p,iconLeft:(0,f.Y)(aW.A,{}),disabled:s})]})}function aK(e){var n=o0(e);return n.fileChanges.length>0?(0,f.Y)(aZ,(0,en._)({},e,n)):null}var a$=(0,z.x)({container:[W.wp.px(16),W.wp.py(8)]});function aJ(){return(0,f.Y)(L.S,{css:a$.container,children:(0,f.Y)(tK.N,{text:"".concat(Y.BP," saved your work"),icon:(0,f.Y)(an.A,{}),colorway:"primary"})})}var aQ=t(57517),aX=t(20662),a0=function(e){return e.None="none",e.Starter="starter",e.Paid="paid",e}({}),a1=(0,z.x)({root:[W.wp.py(4),W.wp.px(8),W.wp.borderRadius(),W.wp.border({color:eZ.LU.outlineDimmest})],icon:{paddingTop:3},mainContent:[W.wp.flex.growAndShrink(1),W.wp.colWithGap(4)],footer:[{"@container (max-width: 400px)":[W.wp.colWithGap(8),W.wp.align.start,W.wp.height("100%")]}],footerActions:[W.wp.flex.growAndShrink(1),W.wp.flex.row,W.wp.justify.end,W.wp.color.foregroundDimmer,{"@container (max-width: 400px)":{width:"100%"}}],footerSmallButtonContainer:[W.wp.display.inlineFlex,{"@container (max-width: 400px)":[W.wp.flex.grow(1)]}],footerSmallButton:[{marginTop:-10,marginRight:-4},{"@container (max-width: 400px)":{margin:0}}],timestamp:[W.wp.rowWithGap(4),W.wp.flex.wrap],summaryContainer:[W.wp.width(200)]});function a2(e){var n=e.commitId,t=e.changeSetSummary,r=e.date,i=e.isAtCheckpoint,o=e.isRestoring,a=e.wasReverted,l=e.isLoading,s=e.onCommitRestore,c=e.onOpenCommit,u=e.restoreButtonText,d=e.usageIndicatorVariant,p=oI(),h="starter"===d?"Used 1 ".concat(i0.Lm," plan ").concat(Y.BP," ").concat(aC.go):"The ".concat(aC.go," for this checkpoint used ").concat(aC.a7,"\xa2 ").concat(p?"":"of your usage credits",".");return(0,f.FD)(ed.ui,{elevated:!0,css:a1.root,row:!0,gap:8,children:[(0,f.Y)(L.S,{css:a1.icon,children:(0,f.Y)(im.A,{color:eZ.LU.foregroundDimmest})}),(0,f.FD)(L.S,{css:a1.mainContent,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(P.EY,{maxLines:2,color:a&&!i?"dimmer":"default",style:{textDecoration:a&&!i?"line-through":void 0},children:i?"Currently at checkpoint":"Checkpoint made"}),a&&!i?(0,f.Y)(P.EY,{color:"dimmer",children:"Reverted"}):null]}),"none"!==d?(0,f.Y)(rd.m_,{tooltip:h,placement:"top",children:(0,f.Y)(aX.A,{})}):null]}),(0,f.Y)(L.S,{children:void 0!==l&&l?(0,f.Y)(L.S,{css:a1.summaryContainer,children:(0,f.Y)(aQ.Ay,{speed:2,backgroundColor:eZ.LU.backgroundHighest,foregroundColor:eZ.LU.backgroundHigher,height:18,children:(0,f.Y)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"16"})})}):t?(0,f.Y)(P.EY,{color:"dimmer",variant:"small",children:t}):null}),(0,f.FD)(L.S,{css:a1.footer,row:!0,align:"center",children:[(0,f.FD)(L.S,{row:!0,gap:8,children:[r?(0,f.Y)(L.S,{css:a1.timestamp,style:{color:eZ.LU.foregroundDimmer},children:(0,f.Y)(ev.Dc,{textVariant:"small",live:!0,date:r})}):null,n?(0,f.Y)(a5,{commitId:n,onOpenCommit:c}):null]}),(0,f.Y)(L.S,{css:a1.footerActions,children:n&&s&&!i?(0,f.Y)(rd.m_,{tooltip:"Already at this checkpoint",isDisabled:!i,css:a1.footerSmallButtonContainer,children:(0,f.Y)(G.$n,{css:a1.footerSmallButton,onClick:s,iconLeft:o?(0,f.Y)(tr.A,{}):a?(0,f.Y)(aV.A,{}):(0,f.Y)(oU.A,{}),disabled:o||i,size:"small",variant:"outlined",text:a?"Restore checkpoint":void 0===u?"Go to this checkpoint":u})}):null})]})]})]})}function a5(e){var n=e.commitId,t=e.onOpenCommit;return(0,f.FD)(L.S,{css:a1.timestamp,style:{color:eZ.LU.foregroundDimmer},children:[(0,f.Y)(P.EY,{variant:"small",multiline:!1,children:""}),t?(0,f.Y)(G.$n,{variant:"underlinedOnHover",text:n.slice(0,8),size:"small",onClick:function(){return t(n)}}):(0,f.Y)(P.EY,{variant:"small",children:n})]})}var a4=(0,z.x)({root:[W.wp.px(16),W.wp.py(8),W.wp.colWithGap(8)],errorContainer:[W.wp.color.accentNegativeDefault]});function a3(e){var n,t=e.commitHash,r=e.created,i=e.onOpenCommit,o=e.onRestoreToCommit,a=e.isRestoring,l=e.error,s=void 0===l?null:l,c=e.currentCommit,u=void 0===c?null:c,d=e.commitDetails,p=void 0===d?null:d,h=e.isLoading,m=e.usageIndicatorVariant,g=(null==u?void 0:u.hash)===t,v=(null==u?void 0:u.trailers[rG.aT])===t,w=(n=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o()];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(L.S,{css:a4.root,children:[s?(0,f.Y)(L.S,{css:a4.errorContainer,children:s}):null,(0,f.Y)(a2,{commitId:t,changeSetSummary:null==p?void 0:p.subject,date:r,isAtCheckpoint:!!(v||g),isRestoring:void 0!==a&&a,onCommitRestore:w,onOpenCommit:i,isLoading:void 0!==h&&h,usageIndicatorVariant:m})]})}function a8(e){var n,t,r=e.commitHash,i=e.created,o=e.onOpenCommit,a=e.onRestoreToCommit,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!0),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(null),2),Y=S[0],A=S[1],C=(0,v._)((0,w.useState)(null),2),x=C[0],_=C[1],k=(0,v._)((0,w.useState)(!0),2),D=k[0],E=k[1];(0,rV.A)((n=(0,y._)(function(e){var n,t,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.all([e.getCommit({commit:"HEAD"}),e.getCommit({commit:r})])];case 1:return t=(n=v._.apply(void 0,[a.sent(),2]))[0],i=n[1],t.error?A(null):(o={},Object.entries(t.trailers||{}).forEach(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];o[t]=null!=r?r:""}),A({hash:t.hash,trailers:o})),i.error?_(null):_({subject:i.subject}),g(!1),[2,{error:null}]}})}),function(e){return n.apply(this,arguments)}),[r]),(0,w.useEffect)(function(){if(D){var e=setTimeout(function(){E(!1)},3e3);return function(){return clearTimeout(e)}}},[D]);var R=(t=(0,y._)(function(){return(0,b.YH)(this,function(e){if(!a)return[2];c(!0);try{a(),p(null)}catch(e){p("Failed to restore to checkpoint")}finally{c(!1)}return[2]})}),function(){return t.apply(this,arguments)});return(0,f.Y)(a3,{commitHash:r,created:i,onOpenCommit:o,onRestoreToCommit:R,isRestoring:s,error:d,currentCommit:Y,commitDetails:x,isLoading:m,usageIndicatorVariant:a0.None})}var a7=t(84761),a6=(0,w.memo)(function(e){var n=e.eventIds,t=e.index,r=e.onClick,i=n.length;return i<2?null:(0,f.FD)(L.S,{row:!0,gap:2,align:"center",children:[(0,f.Y)(eY.K0,{onClick:function(){r(n[t>0?t-1:i-1])},alt:"Previous",tooltipBehavior:"hidden",children:(0,f.Y)(a7.A,{})}),(0,f.FD)(P.EY,{variant:"small",color:"dimmest",children:[t+1,"/",i]}),(0,f.Y)(eY.K0,{onClick:function(){r(n[t<i-1?t+1:0])},alt:"Next",tooltipBehavior:"hidden",children:(0,f.Y)(tm.A,{})})]})}),a9=(0,z.x)({button:[W.wp.height(24)]});function le(e){var n=e.intent,t=e.model,r=e.getEvents,i=e.setActiveChild,o=e.eventId,a=(0,Y.ql)(),l=(0,Y.jJ)(o),s=(0,Y.Gk)();function c(e){a(o,e),l&&i({parentEventId:l.parentEventId,eventId:null})}return(0,f.Y)(G.$n,{size:"small",text:"Rerun",variant:"nofill",css:a9.button,iconLeft:(0,f.Y)(oj.A,{}),disabled:!s,onClick:function(){if(n){"message"===n.kind?c({model:t,intent:n.value}):"inline"===n.kind&&c({model:t,type:n.value});var i="message"===n.kind&&n.value===S.qRv.ITERATIVE_AGENT?"advanced":"basic";(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"message_reran",assistant_mode:i,model:t.type,message_content:function(n){var t=r().filter(function(e){return e.id===n}),i=t.length>0?t[0]:null;if(i){var o=i.parentEventId,a=e.getEvents().filter(function(e){return e.id===o}),l=a.length>0?a[0]:null;if((0,S.VFn)(null==l?void 0:l.contents.contents,"messageEventContents"))return(0,S.QNh)(l.contents.contents).content}return null}(o),message_source:"chat_pane",message_surface:"workspace_ai_pane"})}}})}var ln=(0,z.x)({container:[W.wp.flex.growAndShrink(1)],costInfo:[W.wp.height(24)],flexSpacer:[W.wp.flex.growAndShrink(1)]});function lt(e){var n=e.intent,t=e.model,r=e.getEvents,i=e.setActiveChild,o=e.eventId,a=e.sessionId,l=e.parentToActiveChild,s=e.isMessageComplete,c=e.hasUserExhaustedMonthlyCredits,u=(0,Y.jJ)(o),d=o0({sessionId:a,eventId:o,parentToActiveChild:l}).didCountEditRequest,p=(0,Y.tS)({sessionId:a,parentToActiveChild:l,eventId:o}).changeStatus,h=(0,iq._P)({controlName:"flag-assistant-message-rerun-button"});return(0,f.FD)(L.S,{css:ln.container,row:!0,gap:4,justify:"start",children:[d&&"pending"===p?(0,f.Y)(L.S,{css:ln.costInfo,row:!0,align:"center",children:(0,f.Y)(rd.m_,{tooltip:"This ".concat(aC.go," used ").concat(aC.a7,"\xa2 ").concat(c?"":"of your usage credits","."),placement:"bottom",children:(0,f.Y)(aX.A,{color:eZ.LU.foregroundDimmer})})}):null,h&&s?(0,f.Y)(le,{eventId:o,intent:n,model:t,getEvents:r,setActiveChild:i}):null,(0,f.Y)(L.S,{css:ln.flexSpacer}),u?(0,f.Y)(a6,{eventIds:u.eventIds,index:u.index,onClick:function(e){u&&i({parentEventId:null==u?void 0:u.parentEventId,eventId:e})}}):null]})}var lr=t(34366),li=(0,z.x)({path:[W.wp.flex.growAndShrink(1),W.wp.align.center],source:[W.wp.color.foregroundDimmest],sourceArrow:[W.wp.mx(8)]});function lo(e){var n=e.path,t=e.prefix,r=e.source,i=e.onClick;return(0,f.FD)(L.S,{css:li.path,row:!0,gap:8,children:[(0,f.Y)(tt.A,{path:n}),(0,f.FD)(P.EY,{multiline:!1,children:[(0,f.Y)(lr.mi,{path:n,prefix:t,onClick:i}),r?(0,f.FD)("span",{css:li.source,children:[(0,f.Y)("span",{css:li.sourceArrow,children:""}),(0,f.Y)(lr.mi,{path:r})]}):null]})]})}var la=t(76985),ll=t(73743),ls=(0,z.x)({list:[W.wp.px(4),W.wp.colWithGap(2)]});function lc(e){var n,t=e.isOpen,r=e.files,i=e.commitHash,o=e.callback,a=(0,e1.A)(o),l=(0,w.useCallback)(function(){var e;null===(e=a.current)||void 0===e||e.call(a,!0)},[a]),s=(0,w.useCallback)(function(){var e;null===(e=a.current)||void 0===e||e.call(a,!1)},[a]),c=(0,rV.A)((n=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!i)return[2,{error:rG.uA.INVALID_REFERENCE}];return[4,e.status()];case 1:if((n=r.sent()).error)return[2,{error:n.error}];return[4,e.getCommit({commit:i})];case 2:if((t=r.sent()).error)return[2,{error:t.error}];return[2,t]}})}),function(e){return n.apply(this,arguments)}),[i]),u=c&&!c.error&&c.subject;return(0,f.Y)(la.a,{isOpen:t,onRequestClose:s,children:t?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(P.Y9,{level:2,children:c?"Restore to ".concat(null!=u?u:"".concat(Y.BP," checkpoint")):(0,f.Y)(tr.A,{})}),0===r.length?(0,f.Y)(P.EY,{multiline:!1,children:"No file changes for this commit."}):(0,f.FD)(f.FK,{children:[(0,f.Y)(lu,{files:r}),(0,f.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(G.$n,{text:"Cancel",iconLeft:(0,f.Y)(ll.A,{}),onClick:s}),(0,f.Y)(G.$n,{text:"Restore Commit",iconLeft:(0,f.Y)(oU.A,{}),colorway:"primary",onClick:l})]})]})]}):null})}function lu(e){var n=e.files;return(0,f.Y)(L.S,{gap:12,children:(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(P.EY,{multiline:!1,children:"The following ".concat((0,tN.A)("file",n.length)," will be modified")}),(0,f.Y)(ld,{files:n})]})})}function ld(e){var n=e.files,t=(0,w.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(L.S,{children:(0,f.FD)("ul",{css:ls.list,children:[t.map(function(e){return(0,f.Y)("li",{children:(0,f.Y)(lo,{path:e.path,source:e.originalPath})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(P.EY,{color:"dimmer",children:[" ",n.length-20," more"," ",(0,tN.A)("file",n.length-20)]})})]})})}function lp(){var e,n,t=(0,v._)((0,w.useState)(function(){return{isOpen:!1,files:[]}}),2),r=t[0],i=t[1],o=(e=(0,k.A)().git,(0,w.useCallback)((n=(0,y._)(function(n){var t,r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=n.commitA,r=n.commitB,[4,e.status()];case 1:if(null!==(i=a.sent()).error)return[2,{error:i.error}];return[4,e.getChangesBetweenCommits({a:t,b:r})];case 2:if(null!==(o=a.sent()).error)return[2,{error:o.error}];return[2,{error:null,files:o.files}]}})}),function(e){return n.apply(this,arguments)}),[e]));return{confirmRestoreToCommit:(0,w.useCallback)(function(e){var n;return new Promise((n=(0,y._)(function(n,t){var r,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({commitA:"HEAD",commitB:e})];case 1:if((r=l.sent()).error)return t(r.error),[2];if(0===r.files.length)return t("No files changed"),[2];return a=function(e){i({isOpen:!1,files:[],callback:void 0,commitHash:void 0}),n(e)},i({isOpen:!0,files:r.files,callback:a,commitHash:e}),[2]}})}),function(e,t){return n.apply(this,arguments)}))},[o]),restoreConfirmationModal:(0,w.useMemo)(function(){return(0,f.Y)(lc,(0,en._)({},r))},[r])}}var lf=t(97012);function lh(e){var n=e.children,t=e.intent,r=e.showUpsell,i=e.date;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(oe.A,{size:24}),(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:Y.BP}),r?(0,f.Y)(i8,{}):null,(0,f.Y)(ev.Dc,{textVariant:"small",textColor:"dimmest",date:i}),(null==t?void 0:t.kind)==="message"?(0,f.Y)(lf.m2,{intent:t.value,icon:{color:eZ.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null==t?void 0:t.kind)==="inline"?(0,f.Y)(lf.vc,{type:t.value,icon:{color:eZ.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,n]})}var lm=(0,z.x)({root:[W.wp.px(16),W.wp.py(8),W.wp.colWithGap(8)],footerRight:[W.wp.flex.growAndShrink(1)]});function lg(e){var n=e.children,t=e.headerProps,r=void 0===t?{showUpsell:!1,intent:null,date:new Date}:t,i=e.headerActions,o=e.footer,a=e.footerActions,l=(0,t7._)(e,["children","headerProps","headerActions","footer","footerActions"]);return(0,f.FD)(L.S,(0,nr._)((0,en._)({css:lm.root},l),{children:[(0,f.Y)(lh,(0,nr._)((0,en._)({},r),{children:i})),n,o||a?(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(L.S,{children:o}),(0,f.Y)(L.S,{css:lm.footerRight,row:!0,gap:8,align:"center",justify:"end",children:a})]}):null]}))}function lv(e){var n=(0,Y.Gk)(),t=(0,v._)((0,w.useState)(n),1)[0];switch(e.type){case S.fqQ.MANUALLY_ABORTED:return(0,f.Y)(tK.N,{icon:(0,f.Y)(rf.A,{}),text:"Message was stopped"});case S.fqQ.USAGE_LIMIT:return(0,f.Y)(tK.N,{icon:(0,f.Y)(oK.A,{}),colorway:"orange",text:"Usage limit reached"});default:return(0,f.Y)(tK.N,{icon:(0,f.Y)(oK.A,{}),colorway:"red",text:t?"Something went wrong":"Please refresh the page and try again"})}}var lw=t(99858),ly=t(58831);function lb(){var e,n=(0,k.A)().git;return(0,w.useCallback)((e=(0,y._)(function(e){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=e.commitHash,[4,n.status()];case 1:if(null!=(r=o.sent()).error)return[2,{error:r.error}];return[4,n.restoreCommit({commit:t})];case 2:if(i=o.sent(),n.forceRefresh(),null!=i.error)return[2,{error:i.error}];return[2,{}]}})}),function(n){return e.apply(this,arguments)}),[n])}function lS(e){if(!e)return null;var n=e.contents.contents,t={type:S.e3q.MODEL_TYPE_UNKNOWN,overrideModelName:""},r=null,i=null;(null==n?void 0:n.$kind)==="messageEventContents"?(r={value:n.messageEventContents.intent,kind:"message"},t=n.messageEventContents.usedModelSelector,i=n.messageEventContents.sources):(null==n?void 0:n.$kind)==="inlineActionEventContents"&&(r={value:n.inlineActionEventContents.messageType,kind:"inline"},t=n.inlineActionEventContents.usedModelSelector);var o=e.error&&e.error.type!==S.fqQ.EVENT_ERROR_TYPE_UNKNOWN?e.error.type:null,a=!!((null==n?void 0:n.$kind)==="messageEventContents"&&n.messageEventContents.intent===S.qRv.DEBUG);return{id:e.id,created:e.created,state:e.state,intent:r,error:o,usedModelSelector:t,sources:i,isDebugMessage:a,sessionId:e.sessionId}}var lY=(0,w.memo)(function(e){var n,t=e.id,r=e.openPane,i=e.removePane,o=e.getEvents,a=e.setActiveChild,l=e.parentToActiveChild,s=e.openAiChatSettingsPanel,c=e.isLastEvent,u=(0,Y.vX)(t),d=lb(),p=lp(),h=p.confirmRestoreToCommit,m=p.restoreConfirmationModal,g=oI(),v=(0,w.useCallback)(function(e){var n,t="string"==typeof e?{path:e}:e;r({type:null!==(n=(0,n$.QY)(t))&&void 0!==n?n:"codeEditor",data:t})},[r]),A=(0,w.useCallback)(function(e,n){return r({type:"webview",data:{ports:{path:e,port:n,type:"local"}}})},[r]),C=(0,Y.Al)(t,lS),x=(0,Y.uY)(t),_=(n=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!(null==x?void 0:x.commitId))return[2];return[4,h(x.commitId)];case 1:if(!e.sent())return[3,3];return[4,d({commitHash:x.commitId})];case 2:e.sent(),e.label=3;case 3:return[2]}})}),function(){return n.apply(this,arguments)}),k=(0,om.Vd)({openFile:v,messageSenderType:S.utd.AI}),D=(0,ly.A)({openWebview:A,ragSources:u}),E=(0,w.useCallback)(function(e){return r({type:"git",data:{mode:{type:lw.C.COMMIT,hash:e}}})},[r]);if(!C)return null;var R=C.state===S.qOk.COMPLETE,I=null==x?void 0:x.didCreateCheckpoint;return(0,f.FD)(L.S,{children:[m,I?c?(0,f.Y)(aJ,{}):(0,f.Y)(a8,{commitHash:x.commitId,created:C.created,onOpenCommit:E,onRestoreToCommit:_}):null,(0,f.FD)(lg,{"data-cy":"message-from-ai",headerProps:{showUpsell:!0,date:C.created,intent:C.intent},headerActions:(0,f.Y)(lt,{intent:C.intent,model:C.usedModelSelector,getEvents:o,setActiveChild:a,eventId:C.id,sessionId:C.sessionId,parentToActiveChild:l,isMessageComplete:R,hasUserExhaustedMonthlyCredits:g}),footer:R&&C.error?(0,f.Y)(lv,{type:C.error}):null,children:[(0,f.Y)(aA,{eventId:t,sessionId:C.sessionId,parentToActiveChild:l,openPane:r,removePane:i,markdownCodeComponent:C.isDebugMessage?void 0:k,markdownLinkComponent:D,eventState:C.state}),(0,f.Y)(aK,{eventId:t,sessionId:C.sessionId,parentToActiveChild:l,setActiveChild:a,openAiChatSettingsPanel:s,openPane:r,removePane:i})]})]})}),lA=t(14652);function lC(e){if((null==e?void 0:null===(n=e.contents.contents)||void 0===n?void 0:n.$kind)!=="benchmarkConclusion")return null;var n,t=e.contents.contents.benchmarkConclusion;return{completionReason:t.completionReason,exception:t.exception,steps:t.steps}}function lx(e){var n=(0,lA.i)(),t=(0,Y.Al)(e.id,lC);return n&&t?(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{children:(0,f.Y)(P.EY,{variant:"headerDefault",children:"Benchmark Conclusion:"})}),(0,f.Y)(L.S,{children:(0,f.FD)(P.EY,{color:"dimmer",children:["Reason: ",t.completionReason]})}),(0,f.Y)(L.S,{children:(0,f.FD)(P.EY,{color:"dimmer",children:["Exception: ",t.exception]})}),(0,f.Y)(L.S,{children:(0,f.FD)(P.EY,{color:"dimmer",children:["Steps: ",t.steps]})})]}):null}var l_=(0,z.x)({container:[W.wp.flex.growAndShrink(1),W.wp.borderRadius(),W.wp.py(4),W.wp.px(8),W.wp.border({color:eZ.LU.outlineDimmest}),oP.b.filledAndOutlined],runButton:[W.wp.rowWithGap(4),W.wp.justify.center,W.wp.align.center,W.wp.height(24),W.wp.minWidth(48),W.wp.cursor.pointer,W.wp.position.relative,W.wp.fontWeight.medium]});function lk(e){var n=e.isWorkflowLoading,t=e.isRunning,r=e.forceDisable,i=e.handleRunButtonClick;return n?(0,f.FD)(L.S,{css:l_.runButton,children:[(0,f.Y)(tr.A,{size:12}),(0,f.Y)(P.EY,{multiline:!1,variant:"small",children:"Loading"})]}):t?(0,f.FD)(L.S,{css:l_.runButton,onClick:i,children:[(0,f.Y)(oj.A,{size:12}),(0,f.Y)(P.EY,{multiline:!1,variant:"small",children:"Rerun"})]}):(0,f.FD)(L.S,{disabled:r,css:l_.runButton,onClick:i,children:[(0,f.Y)(oV.A,{size:12}),(0,f.Y)(P.EY,{multiline:!1,variant:"small",children:"Run"})]})}function lD(){var e,n,t,r,i,o=(0,nW.OK)(),a=(0,nW.oh)(),l=null==o?void 0:o.runButton,s=(0,nW.cz)(),c=s.isRunning,u=s.runButtonRunsWorkflows,d=s.isDisabled,p=(0,nW.d_)(),h=(0,w.useCallback)(function(){(0,re.u4)(re.AZ.RUN_BUTTON_CLICKED,{source:"assistantRerunButton",runner:u?"workflows":"pid1"}),p()},[u,p]);return(0,f.Y)(ed.ui,{css:l_.container,children:(0,f.Y)(rd.m_,{placement:"top",tooltip:(t=(e={forceDisable:d,runButtonText:l,isRunning:c,isWorkflowLoading:a}).forceDisable,r=e.isRunning,i=e.isWorkflowLoading,n=t?"Run button is not configured":i?"Connecting to the workspace":r?"Rerun repl":"Run repl",(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:n})),children:(0,f.Y)(lk,{forceDisable:d,handleRunButtonClick:h,isRunning:c,isWorkflowLoading:a})})})}var lE=(0,z.x)({root:[W.wp.px(16),W.wp.py(8),W.wp.colWithGap(8)],errorContainer:[W.wp.color.accentNegativeDefault]});function lR(e){var n=e.sessionId,t=e.parentToActiveChild,r=e.commitHash,i=e.created,o=e.eventId,a=e.eventWhichProposedChanges,l=e.onOpenCommit,s=e.appliedChanges,c=e.usageIndicatorVariant,u=(0,iQ.m5)(),d=(0,n1.gc)("assistantAutoRestartRepl").preferences,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(null),2),S=g[0],A=g[1],C=lI("HEAD"),x=lI("HEAD^1"),_=C&&!C.error&&C.hash===r,k=(0,Y.tS)({sessionId:n,parentToActiveChild:t,eventId:a}),D=k.changeStatus,E=k.changeSetSummary,R=k.didCountEditRequest,I=C&&!C.error&&C.trailers[rG.aT]===r,F=lb(),T=lp(),U=T.confirmRestoreToCommit,N=T.restoreConfirmationModal,O=(0,Y.d8)(n);function M(){return(M=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!r)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,U(r)];case 2:return e.sent()&&B(r),[3,4];case 3:return e.sent(),A("Something went wrong. Please try again."),[3,4];case 4:return[2]}})})).apply(this,arguments)}function B(e){return H.apply(this,arguments)}function H(){return(H=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];return m(!0),[4,F({commitHash:e})];case 1:if((n=t.sent()).error)return A(n.error),m(!1),[2];return A(null),m(!1),[2]}})})).apply(this,arguments)}var z=x&&!x.error,W=(0,f.FD)(f.FK,{children:[(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:"You may need to re-run your App to see the latest changes take effect."}),u?null:(0,f.Y)(lD,{})]});return(0,f.FD)(L.S,{css:lE.root,children:[N,S?(0,f.FD)(L.S,{css:lE.errorContainer,row:!0,gap:8,align:"center",children:[(0,f.Y)(aG.A,{}),S]}):null,_?z?(0,f.Y)(a2,{commitId:r,changeSetSummary:E,date:i,isAtCheckpoint:!1,isRestoring:h,onOpenCommit:l,onCommitRestore:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,B(x.hash)];case 1:return e.sent(),O({eventIdWhichProposedChanges:a,eventIdWhichAppliedChanges:o,revertedChanges:s}),[2]}})}),restoreButtonText:"Undo these changes",usageIndicatorVariant:R?c:a0.None}):null:(0,f.Y)(a2,{commitId:r,changeSetSummary:E,date:i,isAtCheckpoint:!!I,isRestoring:h,onCommitRestore:function(){return M.apply(this,arguments)},onOpenCommit:l,usageIndicatorVariant:R?c:a0.None,wasReverted:"reverted"===D}),(0,f.Y)(L.S,{gap:8,align:"start",children:_&&!d.assistantAutoRestartRepl?W:null})]})}function lI(e){var n;return(0,rV.A)((n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,n.getCommit({commit:e})];case 1:if((t=r.sent()).error)return[2,t];return[2,{hash:t.hash,trailers:t.trailers,error:null,body:t.body,subject:t.subject}]}})}),function(e){return n.apply(this,arguments)}),[e])}function lF(e){var n=e.id,t=e.parentToActiveChild,r=e.openPane,i=e.checkpointUsageIndicatorVariant,o=(0,Y.Al)(n,lT),a=(0,w.useCallback)(function(e){return r({type:"git",data:{mode:{type:lw.C.COMMIT,hash:e}}})},[r]);return o?(0,S.VFn)(o.contents,"appliedFileChanges")?(0,f.Y)(lR,(0,nr._)((0,en._)({},(0,S.QNh)(o.contents)),{sessionId:o.sessionId,parentToActiveChild:t,created:o.created,eventId:n,onOpenCommit:a,usageIndicatorVariant:i})):((0,S.VFn)(o.contents,"revertedFileChanges"),null):null}function lT(e){if(!e)return null;var n=e.contents.contents;return(0,S.VFn)(n,"iterativeAgentEventContents")?(0,nr._)((0,en._)({},(0,S.QNh)(n)),{created:e.created,sessionId:e.sessionId}):null}var lP=t(61302),lL=t(47406),lU=t(5511),lN=(0,z.x)({bannerWrapper:[W.wp.position.sticky],loading:[W.wp.center,W.wp.flex.growAndShrink(1)]});function lO(e){var n,t,r=e.shouldAutoscrollRef,i=(0,t7._)(e,["shouldAutoscrollRef"]),o=(0,w.useRef)(new Map),a=i.sessionId,l=(n=(0,w.useRef)(null),t=(0,E.HJ)(!1),(0,w.useEffect)(function(){var e=n.current;if(e){var r=function(){var n=e.scrollTop>0;t.current!==n&&t.set(n)},i=requestAnimationFrame(r),o=function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(r)};return e.addEventListener("scroll",o),function(){e.removeEventListener("scroll",o),i&&cancelAnimationFrame(i)}}},[n,t]),{scrollerRef:n,isScrolledDown:t}),s=l.scrollerRef,c=l.isScrolledDown;return(0,f.FD)(lU.y,{shouldAutoScrollRef:r,scrollCacheKey:a,scrollCache:o.current,scrollerRef:s,children:[(0,f.Y)(L.S,{css:lN.bannerWrapper,children:(0,f.Y)(oa,{})}),(0,f.Y)(lM,(0,en._)({},i)),(0,f.Y)(lL.U,{show:c})]})}function lM(e){var n=e.sessionId,t=e.parentToActiveChild,r=e.setActiveChild,i=e.openPane,o=e.removePane,a=e.openAiChatSettingsPanel,l=(0,Y.BN)(n,t),s=l.chatEvents,c=l.loading,u=l.getEvents,d=(0,lP.F)()?a0.Starter:a0.Paid,p=(0,k.A)().secrets,h=s.length?s[s.length-1].id:void 0,m=(0,os.z7)();return c&&!s.length?(0,f.Y)(L.S,{css:lN.loading,children:(0,f.Y)(tr.A,{})}):(0,f.Y)(os.cX,{value:m,children:s.map(function(e){var n=e.id;switch(e.view){case"userMessage":return(0,f.Y)(oy,{id:n,openPane:i},n);case"aiMessage":return(0,f.Y)(lY,{id:n,getEvents:u,setActiveChild:r,openPane:i,removePane:o,addSecretEntries:p.addEntries,isLastEvent:n===h,parentToActiveChild:t,openAiChatSettingsPanel:a});case"benchmarkConclusion":return(0,f.Y)(lx,{id:n},n);case"iterativeAgentAction":return(0,f.Y)(lF,{id:n,parentToActiveChild:t,isLastEvent:n===h,openPane:i,checkpointUsageIndicatorVariant:d},n);default:return null}})})}var lB=t(43282),lH=t(20543),lz=t(69932),lW=t(99083),lG=t(23094),lV=t(25877);function lj(e){var n=e.hasAccessToAdvancedModel,t=(0,iq._P)({controlName:"flag-poliwag-override"}),r=(0,n1.gc)("assistantAutoApplyChanges","assistantAutoRestartRepl","assistantAdvancedModelOverride"),i=r.preferences,o=r.update,a=(0,Y.UK)().assistantAdvancedModelOverride,l=(0,Y.Vv)(a),s=(0,Y.vm)().advancedModelName,c=t?(0,f.FD)(f.FK,{children:[(0,f.Y)(lW.n,{setting:lz.KY.assistantAdvancedModelOverride,currentValue:i.assistantAdvancedModelOverride,update:o,title:(0,f.FD)(f.FK,{children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,f.Y)(P.EY,{multiline:!1,children:"Model Override"}),(0,f.Y)(lG._,{})]}),(0,f.Y)(L.S,{row:!0,gap:8,children:(0,f.FD)(P.EY,{variant:"small",color:"dimmest",children:["Current: ",(null!=l?l:s).readable]})})]})}),(0,f.Y)(lV.a,{})]}):null;return(0,f.FD)(f.FK,{children:[c,n?(0,f.Y)(lW.n,{setting:lz.KY.assistantAutoApplyChanges,update:o,currentValue:i.assistantAutoApplyChanges}):(0,f.Y)(lW.j,{setting:lz.KY.assistantAutoApplyChanges,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically apply code changes."}),(0,f.Y)(lV.a,{}),n?(0,f.Y)(lW.n,{setting:lz.KY.assistantAutoRestartRepl,update:o,currentValue:i.assistantAutoRestartRepl}):(0,f.Y)(lW.j,{setting:lz.KY.assistantAutoRestartRepl,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically restart your App after applying changes."})]})}var lZ=t(75838);function lq(){var e=(0,et._)(["\n  query UserPrompts {\n    currentUser {\n      id\n      aiPrompts {\n        ... on UserAiPromptsResult {\n          prompts {\n            id\n            prompt\n            title\n          }\n        }\n      }\n    }\n  }\n"]);return lq=function(){return e},e}function lK(){var e=(0,et._)(["\n  mutation UpdateUserAiPrompts($input: UpdateUserAiPromptsInput!) {\n    updateUserAiPrompts(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return lK=function(){return e},e}function l$(){var e=(0,et._)(["\n  mutation EditUserAiPrompt($input: EditUserAiPromptInput!) {\n    editUserAiPrompt(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return l$=function(){return e},e}function lJ(){var e=(0,et._)(["\n  mutation DeleteUserAiPrompts($input: DeleteUserAiPromptsInput!) {\n    deleteUserAiPrompt(input: $input) {\n      ... on DeleteUserAiPromptResult {\n        id\n      }\n    }\n  }\n"]);return lJ=function(){return e},e}function lQ(){var e=(0,et._)(["\n  query ReplSelectedPrompt($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        replAiPromptId\n      }\n    }\n  }\n"]);return lQ=function(){return e},e}function lX(){var e=(0,et._)(["\n  mutation UpdateReplAiPromptSelection(\n    $input: UpdateReplAiPromptSelectionInput!\n  ) {\n    updateReplAiPromptSelection(input: $input) {\n      ... on UpdateReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return lX=function(){return e},e}function l0(){var e=(0,et._)(["\n  mutation DeleteReplAiPromptSelection(\n    $input: DeleteReplAiPromptSelectionInput!\n  ) {\n    deleteReplAiPromptSelection(input: $input) {\n      ... on DeleteReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return l0=function(){return e},e}var l1={},l2=(0,er.J1)(lq()),l5=(0,er.J1)(lK()),l4=(0,er.J1)(l$()),l3=(0,er.J1)(lJ()),l8=(0,er.J1)(lQ()),l7=(0,er.J1)(lX()),l6=(0,er.J1)(l0()),l9=t(46216),se=(0,z.x)({input:[W.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],inputContainer:[W.wp.py(4),W.wp.colWithGap(8)],buttonContainer:[W.wp.width("100%"),W.wp.rowWithGap(6),W.wp.justify.end,W.wp.pt(4)]});function sn(e){var n,t,r,i=e.refetchPrompts,o=e.onClose,a=(0,v._)((0,w.useState)(""),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(""),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((n={onCompleted:function(){(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"custom_prompt_saved",title:u,prompt:l}),C(),i(),o(),m(!1)},onError:function(){m(!0)}},t=(0,en._)({},l1,n),lZ.n(l5,t)),2),S=g[0],Y=g[1].loading,A=(r=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(e=l.trim(),n=u.trim(),!e||!n)return[2];return[4,S({variables:{input:{prompt:e,title:n}}})];case 1:return t.sent(),[2]}})}),function(){return r.apply(this,arguments)}),C=function(){s(""),d("")},x=Y||!l||!u;return(0,f.FD)(L.S,{css:se.inputContainer,children:[h?(0,f.Y)(tK.N,{icon:(0,f.Y)(aG.A,{}),colorway:"red",text:"Could not save prompt. Try again."}):null,(0,f.Y)(l9.l,{onSubmit:function(e){e.preventDefault(),A()},children:(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(L.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(P.EY,{children:"Title"}),(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(eA.pd,{disabled:Y,value:u,onChange:function(e){var n=e.target.value;n.length<=70&&d(n)}}),(0,f.Y)(P.EY,{children:"Prompt"}),(0,f.Y)(eA.ov,{disabled:Y,value:l,onChange:function(e){var n=e.target.value;n.length<=15e3&&s(n)},css:se.input,autoSize:!0}),(0,f.FD)(L.S,{css:se.buttonContainer,children:[(0,f.Y)(G.$n,{colorway:"primary",text:"Save",type:"submit",disabled:x,loading:Y}),(0,f.Y)(G.$n,{text:"Cancel",onClick:function(){o(),m(!1)}})]})]})})]})}var st=t(11822),sr=(0,z.x)({input:[W.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],inputContainer:[W.wp.py(4),W.wp.colWithGap(8)],buttonContainer:[W.wp.width("100%"),W.wp.rowWithGap(6),W.wp.justify.end],form:[W.wp.colWithGap(6)],promptItems:[W.wp.py(8),W.wp.colWithGap(4)],promptItem:[W.wp.borderRadius(),W.wp.py(6),W.wp.px(8)],loading:[W.wp.py(4),W.wp.rowWithGap(6),W.wp.align.center]});function si(e){var n,t,r,i,o,a,l=e.isOpen,s=e.prompts,c=e.promptDataLoading,u=e.onClose,d=e.refetchPrompts,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],S=(0,v._)((0,w.useState)(s||[]),2),Y=S[0],A=S[1],C=(0,v._)((0,w.useState)(new Set),2),x=C[0],_=C[1],k=(0,v._)((n={onCompleted:function(){d()}},t=(0,en._)({},l1,n),lZ.n(l3,t)),2),D=k[0],E=k[1].loading,I=(0,v._)((r={onCompleted:function(){d()}},i=(0,en._)({},l1,r),lZ.n(l4,i)),2),F=I[0],T=I[1].loading;(0,w.useEffect)(function(){s&&A(function(e){return s.map(function(n){return x.has(n.id)&&e.find(function(e){return e.id===n.id})||n})})},[s,x]);var U=function(e,n,t){A(function(r){return r.map(function(r){return r.id===e?(0,nr._)((0,en._)({},r),(0,g._)({},n,t)):r})}),_(function(n){return new Set(n).add(e)})},N=(o=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!(null==(n=Y.find(function(n){return n.id===e}))?void 0:n.title)||!(null==n?void 0:n.prompt))return[2];return[4,F({variables:{input:{promptId:n.id,prompt:n.prompt,title:n.title}}})];case 1:return t.sent(),_(function(n){var t=new Set(n);return t.delete(e),t}),[2]}})}),function(e){return o.apply(this,arguments)}),O=function(e){A(function(n){return n.map(function(n){return n.id===e&&s&&s.find(function(n){return n.id===e})||n})}),_(function(n){var t=new Set(n);return t.delete(e),t})},M=(a=(0,y._)(function(e){return(0,b.YH)(this,function(n){return D({variables:{input:{promptId:e}}}),[2]})}),function(e){return a.apply(this,arguments)});return(0,f.FD)(la.a,{isOpen:l,onRequestClose:function(){u(),m(!1)},children:[(0,f.Y)(P.EY,{variant:"subheadBig",children:"Manage Prompts"}),s?(0,f.FD)(L.S,{css:sr.promptItems,children:[(0,ee._)(Y).sort(function(e,n){return e.title.localeCompare(n.title,void 0,{sensitivity:"base"})}).map(function(e){return(0,f.Y)(R.A,{headerContent:(0,f.Y)(P.EY,{children:e.title}),children:(0,f.Y)(ed.ui,{elevated:!0,css:sr.promptItem,children:(0,f.FD)(st.lV,{css:sr.form,onSubmit:function(n){n.preventDefault(),N(e.id)},children:[(0,f.FD)(L.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(P.EY,{children:"Title"}),(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(eA.pd,{disabled:T,value:e.title,onChange:function(n){return U(e.id,"title",n.target.value)}}),(0,f.Y)(P.EY,{children:"Prompt"}),(0,f.Y)(eA.ov,{disabled:T,value:e.prompt,onChange:function(n){return U(e.id,"prompt",n.target.value)},css:sr.input,autoSize:!0}),(0,f.FD)(L.S,{css:sr.buttonContainer,children:[(0,f.Y)(G.$n,{colorway:"red",text:"Delete",onClick:function(){return M(e.id)},disabled:E}),(0,f.Y)(G.$n,{colorway:"primary",text:"Save",type:"submit",disabled:!x.has(e.id)||T||!e.title||!e.prompt}),(0,f.Y)(G.$n,{text:"Reset",onClick:function(){return O(e.id)},disabled:!x.has(e.id)})]})]})})},e.id)}),c?(0,f.FD)(L.S,{css:sr.loading,children:[(0,f.Y)(tr.A,{size:16}),(0,f.Y)(P.EY,{variant:"small",color:"dimmer",children:"Updating prompts"})]}):null]}):null,(0,f.Y)(L.S,{css:sr.inputContainer,children:h?(0,f.Y)(sn,{refetchPrompts:d,onClose:function(){return m(!1)}}):(0,f.Y)(G.$n,{text:"Add new prompt",iconLeft:(0,f.Y)(rm.A,{}),colorway:"primary",onClick:function(){return m(!0)}})})]})}var so="default",sa={id:so,prompt:"".concat(Y.BP," will operate using its default behavior."),title:"Default"},sl=(0,z.x)({select:[W.wp.flex.growAndShrink(1),{"& button":{height:"auto",minHeight:"32px"},"& button > span > div > span":{textAlign:"justify"}}],selectContainer:[W.wp.width("100%"),W.wp.align.center],loadingContainer:[W.wp.px(8),W.wp.py(8),W.wp.borderRadius(),W.wp.mr(24),W.wp.gap(6)],loadingPrompt:[W.wp.width("fit-content"),W.wp.px(4),nN.S.foregroundPulse(),{color:"transparent"}]});function ss(){var e,n,t,r,i,o,a,l,s,c,u,d,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,_.A)(),S=(e={notifyOnNetworkStatusChange:!0},n=(0,en._)({},l1,e),ei.I(l2,n)),A=S.data,C=S.loading,x=S.refetch,k=(t={variables:{replId:g}},r=(0,en._)({},l1,t),ei.I(l8,r)),D=k.data,E=k.refetch,R=(0,v._)((i={onCompleted:function(){E()}},o=(0,en._)({},l1,i),lZ.n(l7,o)),1)[0],I=(0,v._)((a={update:function(e,n){var t,r=n.data;(null==r?void 0:null===(t=r.deleteReplAiPromptSelection)||void 0===t?void 0:t.__typename)==="DeleteReplAiPromptSelectionResult"&&r.deleteReplAiPromptSelection.repl.id&&e.modify({id:e.identify({__typename:"Repl",id:g}),fields:{replAiPromptId:function(){}}})}},l=(0,en._)({},l1,a),lZ.n(l6,l)),1)[0],U=A&&(null===(c=A.currentUser)||void 0===c?void 0:c.aiPrompts.__typename)==="UserAiPromptsResult"?null===(u=A.currentUser)||void 0===u?void 0:u.aiPrompts.prompts:[],N=(null==D?void 0:D.getRepl.__typename)==="Repl"?D.getRepl.replAiPromptId:void 0,O=(s=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(e!==so)return[3,3];if(!N)return[3,2];return[4,I({variables:{input:{replId:g,promptId:N}}})];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return[4,R({variables:{input:{promptId:e,replId:g}}})];case 4:return(null===(t=i.sent().data)||void 0===t?void 0:null===(n=t.updateReplAiPromptSelection)||void 0===n?void 0:n.__typename)==="UpdateReplAiPromptSelectionResult"&&(r=U.find(function(n){return n.id===e}),(0,re.u4)(t3.AZ.ASSISTANT_USED,{action:"custom_prompt_selected",title:null==r?void 0:r.title,prompt:null==r?void 0:r.prompt})),[2]}})}),function(e){return s.apply(this,arguments)});return(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(P.EY,{multiline:!1,children:[Y.BP," Prompt"]}),(0,f.FD)(P.EY,{variant:"small",color:"dimmest",children:["Personalize your ",Y.BP," with custom rules & instructions"]}),C?(0,f.FD)(ed.ui,{css:sl.loadingContainer,elevated:!0,children:[(0,f.Y)(P.EY,{css:sl.loadingPrompt,children:"Sample prompt title"}),(0,f.Y)(P.EY,{variant:"small",css:sl.loadingPrompt,children:"Sample prompt contents. These are rules & instructions for Assistant behavior."})]}):(0,f.FD)(L.S,{css:sl.selectContainer,row:!0,gap:4,children:[(0,f.Y)(T.l,{"aria-label":"Assistant Custom Prompt",style:{marginRight:0},items:[sa].concat((0,ee._)(U)),defaultSelectedKey:(null===(d=U.find(function(e){return N===e.id}))||void 0===d?void 0:d.id)||so,onSelectionChange:function(e){var n;O((null===(n=U.find(function(n){return n.id===e}))||void 0===n?void 0:n.id)||so)},css:sl.select,children:function(e){return(0,f.Y)(F.nh,{id:e.id,label:e.title,description:e.prompt,dataCy:e.id},e.id)}}),(0,f.Y)(eY.K0,{alt:"Manage prompts",onClick:function(){return m(!0)},children:(0,f.Y)(af.A,{})})]}),(0,f.Y)(si,{isOpen:h,prompts:U,promptDataLoading:C,onClose:function(){m(!1)},refetchPrompts:x})]})}var sc=t(41322),su=t(8705),sd=t(3005),sp=t(56071),sf=t(18525),sh=t(18682),sm=t(1478),sg=(0,sm.v)(["fontSize","padding","border"]),sv=sg.cssVars,sw=sg.styleTokens,sy=(0,z.x)({root:[W.wp.center,W.wp.flex.growAndShrink(1)],input:[{backgroundColor:"transparent",border:sw.border,fontSize:sw.fontSize,padding:sw.padding},W.wp.flex.growAndShrink(1)]});function sb(e){var n,t,r=(0,v._)((0,w.useState)(e.initialValue),2),i=r[0],o=r[1],a=(0,e1.A)(e.onCancel),l=(0,sh.A)(function(){return a.current()},[]),s=(0,w.useRef)(null);(0,w.useEffect)(function(){var e;null===(e=s.current)||void 0===e||e.select()},[]);var c=e.compact?(n={},(0,g._)(n,sv.border,"0 none"),(0,g._)(n,sv.fontSize,eZ.LU.fontSizeSmall),(0,g._)(n,sv.padding,"0 ".concat(eZ.LU.space2)),n):(t={},(0,g._)(t,sv.padding,"".concat(eZ.LU.space8)),(0,g._)(t,sv.fontSize,eZ.LU.fontSizeDefault),t);return(0,f.Y)(L.S,{style:c,innerRef:l,css:sy.root,row:!0,gap:4,tag:"form",onSubmit:function(n){n.preventDefault(),i&&e.onSubmit(i)},children:(0,f.Y)(eA.pd,{placeholder:"Name this chat",ref:s,css:sy.input,value:i,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(n){"Escape"===n.key&&e.onCancel()}})})}var sS=t(39667),sY=t(76554),sA=t(29032),sC=t(75897);function sx(e){var n,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1];return r?(0,f.Y)(sb,{compact:!0,initialValue:null!==(n=e.session.title)&&void 0!==n?n:"",onCancel:function(){return i(!1)},onSubmit:function(n){i(!1),e.onRename(n)}}):(0,f.Y)(sk,{session:e.session,onRename:function(){return i(!0)},onToggleArchived:e.onToggleArchived})}var s_=(0,z.x)({root:[W.wp.flex.growAndShrink(1),{maxWidth:"100%"}],button:[W.wp.px(4),W.wp.reset.button,W.wp.rowWithGap(4),W.wp.align.center,W.wp.flex.growAndShrink(1),oP.b.nofill,{fontWeight:eZ.LU.fontWeightMedium,svg:[W.wp.color.foregroundDimmest],"&:hover svg":[W.wp.color.foregroundDimmer]}],popover:[W.wp.borderRadius(4),W.wp.shadow(1),W.wp.border()],item:[oP.b.listItem,W.wp.minWidth(140),W.wp.px(4),W.wp.py(2)]});function sk(e){var n=["Rename",e.session.archived?"Unarchive":"Archive"],t=(0,su.WM)({items:n,onSelectedItemChange:function(n){switch(n.selectedItem){case"Rename":e.onRename();break;case"Archive":case"Unarchive":e.onToggleArchived()}}}),r=(0,v._)((0,w.useState)(null),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(null),2),l=a[0],s=a[1],c=(0,sc.E)(i,l,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom"});return(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{css:s_.root,children:[(0,f.FD)(L.S,(0,nr._)((0,en._)({tag:"button",css:s_.button},t.getToggleButtonProps({refKey:"innerRef",ref:o})),{children:[(0,f.Y)(sf.n,{variant:"small",color:e.session.title?"default":"dimmest",multiline:!1,text:e.session.title||"New chat"}),(0,f.Y)(sA.A,{rotate:t.isOpen?180:0,size:12})]})),(0,f.Y)(L.S,(0,nr._)((0,en._)({},t.getMenuProps({refKey:"innerRef"})),{children:t.isOpen?(0,f.Y)(sY.Z,{children:(0,f.Y)(ed.ui,(0,nr._)((0,en._)({elevated:!0,style:c.styles.popper,innerRef:s,css:s_.popover},c.attributes.popper),{children:n.map(function(e,n){var r=t.highlightedIndex===n?{backgroundColor:eZ.LU.interactiveBackground}:void 0;return(0,f.Y)(L.S,(0,nr._)((0,en._)({css:s_.item,style:r},t.getItemProps({refKey:"innerRef",item:e,index:n})),{children:(0,f.Y)(P.EY,{variant:"small",children:e})}),e)})}))}):null}))]})})}function sD(e){return(0,f.Y)(eY.K0,{alt:"Settings",onClick:e.onClick,children:(0,f.Y)(af.A,{})})}function sE(e){var n,t=(0,sd.ET)(),r=t.orgId,i=t.orgSlug,o=(0,Y.Lh)(null!==(n=e.sessionId)&&void 0!==n?n:""),a=(0,iq._P)({controlName:"flag-no-header-usage"}),l=r&&i?"".concat((0,sp.EG)({slug:i}).usage.href,"#agent"):"/usage#agent";return(0,f.Y)(sS.A,{alt:o&&a?"Your usage for this chat: $".concat((o/100).toFixed(2)):"Usage Page",href:l,target:"_blank",onClick:function(){(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"})},children:(0,f.Y)(aX.A,{})})}var sR=(0,z.x)({root:[W.wp.height(28),W.wp.rowWithGap(4),W.wp.px(2),W.wp.justify.spaceBetween,W.wp.align.center],center:[W.wp.flex.growAndShrink(1),W.wp.align.center],right:[W.wp.rowWithGap(0)]});function sI(e){var n=e.onSidebarButtonClick,t=e.onAddButtonClick,r=e.title,i=e.prefsButton,o=e.usageButton,a=e.sessionCost;return(0,f.FD)(L.S,{align:"center",row:!0,gap:0,children:[(0,f.Y)(L.S,{children:(0,f.Y)(eY.K0,{alt:"All chats",onClick:n,children:(0,f.Y)(sC.A,{})})}),(0,f.Y)(G.$n,{iconLeft:(0,f.Y)(rm.A,{}),text:"New chat",size:"small",variant:"nofill",onClick:t}),(0,f.Y)(L.S,{css:sR.center,children:r}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[a,o,i]})]})}var sF=t(9735),sT=(0,z.x)({container:[W.wp.flex.growAndShrink(1),W.wp.flex.column,W.wp.position.relative],body:[W.wp.py(8),W.wp.px(16),W.wp.flex.growAndShrink(1),W.wp.overflowY("auto")],footer:[W.wp.py(8),W.wp.px(16),W.wp.minHeight(40),W.wp.flex.row,W.wp.align.center],settingsPaneButton:[W.wp.display.inlineFlex,W.wp.mx(4),{verticalAlign:"bottom",gap:eZ.LU.space4}],heading:[W.wp.fontWeight.medium],upgradePill:[oP.b.filled,(o={},(0,g._)(o,eZ.qo.interactiveBackground,eZ.LU.yellowDimmest),(0,g._)(o,eZ.qo.interactiveBackgroundActive,eZ.LU.yellowDimmer),o)]});function sP(e){var n=e.hasAccessToAdvancedModel,t=e.onOpenUserSettings,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1];return(0,f.FD)(ed.ui,{css:sT.container,background:"default",children:[(0,f.FD)(L.S,{css:sT.body,gap:8,children:[(0,f.Y)(lV.a,{}),(0,f.Y)(ss,{}),(0,f.Y)(lV.a,{}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(P.EY,{css:sT.heading,variant:"text",children:"Advanced ".concat(Y.BP," Preferences")}),n?null:(0,f.Y)(i2.a,{css:sT.upgradePill,text:i0.en,onClick:function(){return o(!0)}})]}),(0,f.Y)(lj,{hasAccessToAdvancedModel:n}),(0,f.Y)(lV.a,{})]}),(0,f.Y)(lV.a,{}),(0,f.Y)(L.S,{css:sT.footer,children:(0,f.FD)(P.EY,{variant:"small",children:["Looking for more workspace settings?"," ",(0,f.Y)(G.$n,{css:sT.settingsPaneButton,iconLeft:(0,f.Y)(af.A,{}),size:"small",variant:"underlined",text:"Open User Settings",onClick:t})]})}),(0,f.Y)(iX.A,{isOpen:i,onClose:function(){return o(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_chat_upsell",surface:"assistant_settings"}},highlightUpsell:"assistant"})]})}function sL(e){var n=e.onBack;return(0,f.Y)(L.S,{css:sR.root,children:(0,f.FD)(L.S,{row:!0,align:"center",children:[(0,f.Y)(eY.K0,{onClick:n,alt:"Back to session",children:(0,f.Y)(sF.A,{})}),(0,f.Y)(P.EY,{children:"Settings"})]})})}var sU=t(11909),sN=t(31416),sO=t(93004),sM=t(6938),sB=t(1918),sH=t(53426),sz=t(26176),sW=function(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)({x:0,y:0}),2);return{clicked:n,setClicked:t,points:r[0],setPoints:r[1]}},sG=function(){var e=sW(),n=e.clicked,t=e.setClicked,r=e.points,i=e.setPoints;(0,w.useEffect)(function(){var e=function(){return t(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[t]);var o=(0,w.useCallback)(function(e){var n=e.x,r=e.y;t(!0),i({x:n,y:r})},[t,i]),a=(0,w.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),o({x:e.clientX,y:e.clientY})},[o]),l=(0,w.useCallback)(function(){t(!1)},[t]);return{triggerProps:{onContextMenu:a},menuProps:(0,nr._)((0,en._)({},r),{isOpen:n}),onClose:l,open:o}},sV=(0,z.x)({menu:[W.wp.position.fixed,W.wp.flex.column,W.wp.borderRadius(8),W.wp.shadow(1),{"& > :first-child":[W.wp.borderRadius(8,8,0,0)],"& > :last-child":[W.wp.borderRadius(0,0,8,8)]}],item:[W.wp.reset.button,{'&:not([disabled]):not([aria-disabled="true"])':[oP.b.listItem],'&[disabled], &[aria-disabled="true"]':[W.wp.color.foregroundDimmest]},W.wp.p(8),W.wp.rowWithGap(8),W.wp.align.center],underlay:[W.wp.position.fixed,{top:0,left:0,bottom:0,right:0}]}),sj=function(e){e.preventDefault()},sZ=function(e){var n=e.children,t=e.isOpen,r=e.defaultOpen,i=e.onOpenChange,o=e.x,a=e.y,l=(0,t7._)(e,["children","isOpen","defaultOpen","onOpenChange","x","y"]),s=(0,sO.T)({isOpen:t,defaultOpen:r,onOpenChange:i}),c=(0,w.useRef)(null),u=(0,sM.l)({},s,c),d=u.modalProps,p=u.underlayProps;return t?(0,f.Y)(sB.hJ,{portalContainer:document.body,children:(0,f.Y)("div",(0,nr._)((0,en._)({css:sV.underlay},p),{onContextMenu:sj,children:(0,f.Y)(sH.Ay,{children:(0,f.Y)(ed.ui,(0,nr._)((0,en._)({elevated:!0,css:sV.menu},d,l),{innerRef:c,tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",style:{left:o,top:a},children:(0,f.Y)(sz.Se,{options:{direction:"vertical"},children:n})}))})}))}):null},sq=L.D.button,sK=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.isDisabled,o=void 0!==i&&i,a=e.onClick,l=(0,t7._)(e,["children","iconLeft","isDisabled","onClick"]),s=(0,w.useRef)(null),c=(0,v._)((0,sz.A9)(s,o),4),u=c[0],d=c[1],p=c[2],h=c[3];(0,sz.xK)(d,s);var m=(0,w.useCallback)(function(e){o||(h(),null==a||a(e))},[h,o,a]);return(0,f.FD)(sq,(0,nr._)((0,en._)({disabled:o,css:sV.item,role:"menuitem",ref:(0,sN.P)(n,s),tabIndex:u,onKeyDown:p,onClick:m},l),{children:[r,(0,f.Y)(P.EY,{multiline:!1,children:t})]}))}),s$=t(73128),sJ=(0,sm.v)(["sessionBackground","actionsButtonDisplay"]),sQ=sJ.cssVars,sX=sJ.styleTokens,s0=(0,z.x)({loading:[W.wp.coverContainer,W.wp.center],tabList:[W.wp.position.sticky,W.wp.top(0),W.wp.rowWithGap(4),W.wp.p(8),W.wp.align.center,W.wp.justify.spaceBetween],tabListLeft:[W.wp.viewStyle,W.wp.rowWithGap(2)],tab:[W.wp.viewStyle,oP.b.nofill,W.wp.px(8),W.wp.height(30),W.wp.justify.center,W.wp.borderRadius(4),{"&[data-selected]":{backgroundColor:eZ.LU.interactiveBackgroundActive}}],sessions:[W.wp.overflowY("auto"),W.wp.flex.growAndShrink(1),W.wp.px(8)],editTimestamp:[W.wp.px(4)],session:[W.wp.px(6),W.wp.py(4),W.wp.border({direction:"bottom"}),oP.b.listItem,W.wp.borderRadius(),(a={backgroundColor:sX.sessionBackground},(0,g._)(a,W.$_.canHover,(0,g._)({},sQ.actionsButtonDisplay,"none")),(0,g._)(a,"&:hover",(0,g._)({},sQ.actionsButtonDisplay,"block")),a)],emptyState:[W.wp.center,W.wp.p(16)],header:[W.wp.rowWithGap(4),W.wp.height(24),W.wp.align.center],title:[W.wp.flex.growAndShrink(1)],actionsButton:[{opacity:.5,display:sX.actionsButtonDisplay,"&:hover":{opacity:1}}]});function s1(e){var n=e.onClick;return(0,f.FD)(L.S,{style:(0,g._)({},sQ.sessionBackground,eZ.LU.accentPrimaryDimmest),css:s0.session,onClick:n,children:[(0,f.Y)(L.S,{css:s0.header,children:(0,f.Y)(L.S,{css:s0.title,children:(0,f.Y)(P.EY,{multiline:!1,children:"New Chat"})})}),(0,f.Y)(P.EY,{multiline:!1,color:"dimmest",variant:"small",children:"just now"})]})}function s2(e){var n,t=e.selected,r=e.onClick,i=e.onRename,o=e.onToggleArchived,a=e.session,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=sG(),d=u.menuProps,p=u.triggerProps,h=u.open;return s?(0,f.FD)(L.S,{children:[(0,f.Y)(sb,{initialValue:null!==(n=a.title)&&void 0!==n?n:"",onCancel:function(){return c(!1)},onSubmit:function(e){i(e),c(!1)}}),(0,f.Y)(L.S,{css:s0.editTimestamp,children:(0,f.Y)(ev.Dc,{textColor:"dimmest",textVariant:"small",date:a.created})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(L.S,(0,nr._)((0,en._)({style:t?(0,g._)({},sQ.sessionBackground,eZ.LU.backgroundHigher):void 0,css:s0.session,onClick:r},p),{children:[(0,f.FD)(L.S,{css:s0.header,children:[(0,f.Y)(L.S,{css:s0.title,children:(0,f.Y)(sf.n,{multiline:!1,text:a.title||"Untitled"})}),(0,f.Y)(eY.K0,{css:s0.actionsButton,alt:"Actions",tooltipBehavior:"hidden",onClick:function(e){var n=e.target.getBoundingClientRect();h({x:n.x,y:n.y})},children:(0,f.Y)(s$.A,{})})]}),(0,f.Y)(ev.Dc,{textColor:"dimmest",textVariant:"small",date:a.created})]})),(0,f.FD)(sZ,(0,nr._)((0,en._)({},d),{children:[(0,f.Y)(sK,{onClick:function(){return c(!0)},children:"Rename"}),(0,f.Y)(sK,{onClick:o,children:a.archived?"Unarchive":"Archive"})]}))]})}function s5(){return(0,f.Y)(L.S,{css:s0.emptyState,children:(0,f.Y)(P.EY,{color:"dimmest",children:"No chats"})})}function s4(e){var n=e.currentSessionId,t=e.loading,r=(0,Y.te)().filter(function(e){return e.sessionType===S.dF3.CHAT});return t&&!r.length?(0,f.Y)(L.S,{css:s0.loading,children:(0,f.Y)(tr.A,{})}):(0,f.FD)(L.S,{css:s0.sessions,children:[t||0!==r.length?null:(0,f.Y)(s5,{}),r.map(function(t){return(0,f.Y)(s2,{session:t,selected:t.id===n,onClick:function(){return e.onSessionClick(t.id)},onToggleArchived:function(){return e.onToggleArchived(t,e.currentSessionId)},onRename:function(n){return e.updateSession(t.id,{title:n})}},t.id)})]})}function s3(e){var n=e.currentSessionId,t=e.loading,r=(0,Y.Dq)().filter(function(e){return e.sessionType===S.dF3.CHAT});return t&&!r.length?(0,f.Y)(L.S,{css:s0.loading,children:(0,f.Y)(tr.A,{})}):(0,f.FD)(L.S,{css:s0.sessions,children:[0===r.length?(0,f.Y)(s1,{onClick:function(){return e.onNewSessionClick()}}):null,r.map(function(t){return(0,f.Y)(s2,{session:t,selected:t.id===n,onClick:function(){return e.onSessionClick(t.id)},onToggleArchived:function(){return e.onToggleArchived(t,e.currentSessionId)},onRename:function(n){return e.updateSession(t.id,{title:n})}},t.id)})]})}var s8=["Chats","Archived"];function s7(e){var n=(0,v._)((0,w.useState)("Chats"),2),t=n[0],r=n[1];return(0,f.FD)(sU.tU,{selectedKey:t,onSelectionChange:function(n){r(n),e.refetch({archivedOnly:"Archived"===n})},children:[(0,f.Y)(L.S,{css:s0.tabList,children:(0,f.Y)(sU.wb,{"aria-label":"Chats",css:s0.tabListLeft,children:s8.map(function(e){return(0,f.Y)(sU.oz,{id:e,css:s0.tab,children:(0,f.Y)(P.EY,{color:"dimmer",children:e})},e)})})}),s8.map(function(n){return(0,f.Y)(sU.Kp,{id:n,children:"Chats"===n?(0,f.Y)(s3,(0,en._)({},e)):(0,f.Y)(s4,(0,en._)({},e))},n)})]})}var s6=(0,z.x)({sessionsListContainer:[W.wp.flex.growAndShrink(1),W.wp.overflowY("auto")],footer:[W.wp.border({direction:"top",color:eZ.LU.outlineDimmest})]});function s9(e){var n=e.fetchSessions,t=e.onSettingsButtonClick,r=(0,t7._)(e,["fetchSessions","onSettingsButtonClick"]);return(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{css:s6.sessionsListContainer,children:(0,f.Y)(s7,(0,en._)({loading:n.loading,refetch:n.refetch},r))}),(0,f.Y)(L.S,{css:s6.footer,children:(0,f.Y)(G.$n,{text:"Settings",iconLeft:(0,f.Y)(af.A,{}),alignment:"start",onClick:t,size:"small",variant:"nofill"})})]})}var ce=t(91960),cn=t(12462),ct=t(46982),cr=t(60372),ci="assistant_freemium_quota";function co(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,cn.V)().assistantEdits,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return(0,ct.N)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:ct.h,onHitThreshold:function(){t(!0),a(!0)}}),(0,ct.N)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:100,onHitThreshold:function(){(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"hit_freemium_quota"})}}),(0,f.FD)(aM.Wv,{isOpen:n,onOpenChange:function(e){t(e),e||a(!1)},label:"Usage",placement:"bottom start",children:[(0,f.Y)(eY.K0,{alt:"Usage",disabled:!r,children:(0,f.Y)(L.S,{css:ca.iconBadgeWrapper,children:(0,f.Y)(aX.A,{})})}),(0,f.Y)(L.S,{css:ca.popoverWrapper,children:(0,f.FD)(L.S,{gap:12,children:[(0,f.FD)(P.EY,{css:ca.header,children:["Free ",Y.BP," usage"]}),(0,f.Y)(cl,{limit:null==r?void 0:r.limit,usage:null==r?void 0:r.usage,isShowingAlertExplanation:o})]})})]})}var ca=(0,z.x)({popoverWrapper:[W.wp.p(8),W.wp.width(280)],header:[W.wp.fontWeight.bold],measureBar:[W.wp.height(8)],usageMeterAndTitle:[W.wp.display.flex,W.wp.flex.row,W.wp.justify.spaceBetween,W.wp.align.center],iconBadgeWrapper:[W.wp.position.relative]});function cl(e){var n=e.limit,t=e.usage,r=e.isShowingAlertExplanation,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,i9.A)();if(!n||void 0===t)return(0,f.Y)(tr.A,{});var s=t>=n,c=Math.floor(t/n*100),u="You've used ".concat(c,"% of your ").concat(i0.Lm," plan ").concat(Y.BP," ").concat((0,ce.pluralize)(aC.go),". ").concat(Y.BP," creates edits when asked to make a change to the code.");return(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{gap:4,children:(0,f.Y)(cs,{title:"".concat(Y.BP," ").concat((0,ce.pluralize)(aC.go)),current:t,max:n})}),s?(0,f.Y)(cu,{}):null,r?(0,f.Y)(tK.N,{text:u,colorway:"primary"}):null,(0,f.Y)(i1.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:ci,iconLeft:(0,f.Y)(cr.A,{}),highlightUpsell:"assistant"}),(0,f.Y)(iX.A,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:ci}},onPurchaseComplete:function(){l()}})]})}function cs(e){var n=e.title,t=e.current,r=e.max;return(0,f.FD)(L.S,{gap:6,children:[(0,f.FD)(L.S,{css:ca.usageMeterAndTitle,children:[(0,f.Y)(P.EY,{height:"singleLine",children:n}),(0,f.FD)(P.EY,{height:"singleLine",color:"dimmer",children:[t," / ",r]})]}),(0,f.Y)("div",{children:(0,f.Y)(tO.W,{css:ca.measureBar,total:r,current:t,color:eZ.LU.blueDefault,tooltipHidden:!0})})]})}var cc=(0,z.x)({root:[W.wp.border({color:eZ.LU.orangeDimmer}),W.wp.borderRadius(),W.wp.py(4),W.wp.px(6),W.wp.colorMixBg(eZ.LU.orangeDimmer,"transparent",.25)],text:[W.wp.color.orangeStronger]});function cu(){return(0,f.Y)(L.S,{css:cc.root,children:(0,f.Y)(P.EY,{css:cc.text,children:"You've used 100% of your free AI quota."})})}var cd=t(19404);function cp(e){var n=(0,Y.Lh)(e.sessionId);return null===n?null:(0,f.Y)(cd._,{cents:n})}var cf=(0,z.x)({root:[W.wp.px(4),W.wp.flex.growAndShrink(1)],header:[W.wp.height(28),{zIndex:1}],main:[W.wp.position.relative,W.wp.flex.growAndShrink(1),W.wp.justify.end],content:[W.wp.flex.growAndShrink(1),{paddingLeft:lB.Sl.paddingLeft,justifyContent:"end"}],sidebarBlanket:[W.wp.coverContainer,{zIndex:3,backgroundColor:eZ.LU.backgroundOverlay,pointerEvents:lB.Sl.sidebarBlanketPointerEvents,opacity:lB.Sl.sidebarBlanketOpacity}],sidebar:[W.wp.position.absolute,W.wp.top(0),W.wp.left(0),W.wp.borderRadius(),{pointerEvents:lB.Sl.sidebarPointerEvents,width:lB.Sl.sidebarWidth,height:lB.Sl.sidebarHeight,opacity:lB.Sl.sidebarOpacity,transform:lB.Sl.sidebarTransform,border:"1px solid "+eZ.LU.outlineDimmest,zIndex:3}]});function ch(e){var n=e.sessionId,t=e.children,r=e.isSettingsPanelOpen,i=e.setIsSettingsPanelOpen,o=e.setSessionId,a=e.openUserSettingsPane,l=e.onNewSessionClick,s=(0,Y.UK)().hasAccessToAdvancedModel,c=(0,lP.F)(),u=(0,Y.rE)({sessionTypes:[S.dF3.CHAT]}),d=(0,Y.Nd)(),p=(0,Y.QV)(n),h=(0,lB.r8)(),m=h.state,g=h.setSidebarContainerEl,v=h.toggleSidebar,y=h.closeIfNeeded;function b(){i(!0),y()}function A(){(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"new_session",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),y(),l()}var C=(0,Y.Z2)(),x=(0,Y.lf)();function _(e,n){if((0,re.u4)(re.AZ.ASSISTANT_USED,{action:e.archived?"chat_unarchived":"chat_archived",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),e.id===n){var t=e.archived?C().filter(function(e){return e.sessionType===S.dF3.CHAT}):x().filter(function(e){return e.sessionType===S.dF3.CHAT});if(t.length>1){var r=t.find(function(n){return n.id!==e.id});o(r?r.id:null)}else A()}d(e.id,{archived:!e.archived})}var k=(0,w.useRef)(null);(0,lH.d)(k,m,lB.aT);var D=(0,iq._P)({controlName:"flag-no-header-usage"}),E=p?(0,f.Y)(sx,{session:p,onRename:function(e){(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"chat_renamed",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),d(p.id,{title:e})},onToggleArchived:function(){_(p,p.id)}},p.id):null,R=(0,f.Y)(sI,{onAddButtonClick:A,onSidebarButtonClick:function(){return v()},title:E,prefsButton:(0,f.Y)(sD,{onClick:b}),usageButton:c?(0,f.Y)(co,{}):(0,f.Y)(sE,{sessionId:n}),sessionCost:p&&!D?(0,f.Y)(cp,{sessionId:p.id}):null});return(0,f.FD)(L.S,{css:cf.root,innerRef:k,children:[(0,f.Y)(ed.ui,{css:cf.header,children:r?(0,f.Y)(sL,{onBack:function(){return i(!1)}}):R}),(0,f.FD)(L.S,{css:cf.main,innerRef:g,children:[r?null:(0,f.Y)(L.S,{css:cf.sidebarBlanket,onClick:function(){return v(!1)}}),(0,f.Y)(ed.ui,{css:cf.sidebar,children:(0,f.Y)(s9,{currentSessionId:n,fetchSessions:u,onNewSessionClick:A,onSessionClick:function(e){i(!1),o(e),y()},onToggleArchived:_,updateSession:d,onSettingsButtonClick:b})}),(0,f.Y)(L.S,{css:cf.content,children:r?(0,f.Y)(sP,{hasAccessToAdvancedModel:s,onOpenUserSettings:a}):t})]})]})}var cm=t(52750),cg=t(34896),cv=t(9809),cw=t(60519),cy=t(58572),cb=t(96095),cS=t(76222);function cY(){var e=(0,et._)(["\n  fragment StartWithAiUsageBudget on UsageBasedBillingBudget {\n    id\n    hasReachedBudget\n  }\n"]);return cY=function(){return e},e}function cA(){var e=(0,et._)(["\n  query AssitantUsageBanner($orgId: String) {\n    currentUser {\n      id\n      ...CoreSubscriptionPlanStatus\n      usageBasedBillingBudget {\n        __typename\n        ... on UsageBasedBillingBudget {\n          ...StartWithAiUsageBudget\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          name\n          usageBasedBillingBudget {\n            __typename\n            ... on UsageBasedBillingBudget {\n              ...StartWithAiUsageBudget\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return cA=function(){return e},e}var cC={},cx=(0,er.J1)(cY()),c_=(0,er.J1)(cA(),cb.y,cx,cS.B9),ck=t(69796),cD=t(77420),cE=t(87910),cR=(0,z.x)({bannerContainer:[W.wp.pb(6)],buttonLink:[W.wp.reset.button,oP.b.underlined]});function cI(e){var n,t,r,i,o,a,l,s,c,u,d,p,h=e.assistantAuthz,m=(0,v._)((0,w.useState)(!1),2),g=m[0],y=m[1],b=(0,v._)((0,w.useState)(!1),2),S=b[0],A=b[1],C=(0,v._)((0,w.useState)(!1),2),x=C[0],k=C[1],D=null===(r=(0,cD.y)().paymentMethod)||void 0===r?void 0:r.last4,E=(0,_.A)(),R=(0,oR.R)(E).orgId,I=(n={variables:{orgId:R}},t=(0,en._)({},cC,n),ei.I(c_,t)),F=I.data,T=I.loading,U=!1;R?(i=(null==F?void 0:null===(o=F.currentUser)||void 0===o?void 0:o.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===F.currentUser.org.usageBasedBillingAlerts.__typename?F.currentUser.org.usageBasedBillingAlerts:void 0,U=(null==F?void 0:null===(a=F.currentUser)||void 0===a?void 0:a.org.__typename)==="Org"&&(null===(l=F.currentUser.org.usageBasedBillingBudget)||void 0===l?void 0:l.__typename)==="UsageBasedBillingBudget"&&F.currentUser.org.usageBasedBillingBudget.hasReachedBudget):(i=(null==F?void 0:null===(s=F.currentUser)||void 0===s?void 0:s.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?F.currentUser.usageBasedBillingAlerts:void 0,U=(null==F?void 0:null===(u=F.currentUser)||void 0===u?void 0:null===(c=u.usageBasedBillingBudget)||void 0===c?void 0:c.__typename)==="UsageBasedBillingBudget"&&F.currentUser.usageBasedBillingBudget.hasReachedBudget);var N=null!==(d=null==F?void 0:F.currentUser)&&void 0!==d?d:null,O=(null==N?void 0:N.org.__typename)==="Org"?N.org:void 0,M=null!==(p=null==N?void 0:N.hasCore)&&void 0!==p&&p;return T||(null==h?void 0:h.advancedAssistant.isAuthorized)||x?null:D||M?U?(0,f.FD)(L.S,{children:[(0,f.Y)(la.a,{isOpen:S,onRequestClose:function(){return A(!1)},children:(0,f.Y)(cE.j,{org:O,initialSettings:i,onDone:function(){return A(!1)}})}),(0,f.Y)(L.S,{css:cR.bannerContainer,children:(0,f.Y)(tK.N,{icon:(0,f.Y)(aX.A,{}),text:(0,f.FD)(P.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cR.buttonLink,onClick:function(){A(!0)},children:"increase your usage budget"})," ","to enable Advanced ",Y.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return k(!0)}})})]}):null:(0,f.FD)(L.S,{children:[(0,f.Y)(la.a,{isOpen:g,onRequestClose:function(){return y(!1)},children:(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Add Payment Method"}),(0,f.Y)(ck.y,{onSuccess:function(){y(!1)}})]})}),(0,f.Y)(L.S,{css:cR.bannerContainer,children:(0,f.Y)(tK.N,{icon:(0,f.Y)(cr.A,{}),text:(0,f.FD)(P.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cR.buttonLink,onClick:function(){y(!0)},children:"add a billing method"})," ","to enable Advanced ",Y.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return k(!0)}})})]})}var cF=t(17079),cT=t(87756),cP=t(47736),cL=t(86587),cU=t(41056),cN=t(31478),cO=t(55042),cM=t(82182),cB=t(63621),cH=t(84899),cz=t(1175),cW=t(60872),cG=t(18576),cV=t(27640),cj=(0,z.x)({root:[W.wp.flex.growAndShrink(1),W.wp.color.foregroundDimmer],label:[W.wp.visuallyHidden],selectButton:[W.wp.reset.button,W.wp.flex.row,W.wp.rowWithGap(4),W.wp.cursor.pointer,W.wp.align.center,W.wp.px(4),W.wp.py(2),oP.b.nofill,W.wp.color.foregroundDimmest,W.wp.fontSize(12),{'&[aria-expanded="true"] .chevron':{transform:"rotate(180deg)"},"&:hover":W.wp.color.foregroundDefault}],pooverSurface:[W.wp.borderRadius(4),W.wp.border({color:eZ.LU.outlineDefault})]});function cZ(e){var n,t=e.assistantMode,r=e.availableModelNames,i=e.assistantAdvancedAuthz,o=e.showModelNames,a=void 0===o||o,l=e.basicModeAffordances,s=e.advancedModeAffordances,c=e.onChange,u=r.basicModelName,d=r.advancedModelName,p=r.overrideModelName,h=(0,cz.a)();return(0,f.Y)(L.S,{css:cj.root,children:(0,f.FD)(cO.l6,{selectedKey:t,onSelectionChange:function(e){switch(e){case"basic":case"advanced":c(e)}},children:[(0,f.Y)(cW.J,{css:cj.label,children:"Assistant mode"}),(0,f.FD)(cM.$,{css:cj.selectButton,children:[(0,f.Y)(lf.D8,{model:"basic"===t?S.e3q.BASIC:S.e3q.ADVANCED,size:12}),"basic"===t?"Basic":"Advanced",(0,f.Y)(sA.A,{size:12})]}),(0,f.Y)(cB.A,{placement:h?"top":void 0,children:(0,f.Y)(ed.ui,{css:cj.pooverSurface,elevated:!0,children:(0,f.FD)(cH.qF,{"aria-label":"Assistant chat mode",selectionMode:"single",children:[(0,f.Y)(cH.nh,{id:"basic","aria-label":"basic",children:(0,f.Y)(cK,{readableModelName:u.readable,isSelected:"basic"===t,modeAffordances:void 0===l?"Ask questions":l,showModelNames:a})}),(0,f.Y)(cH.nh,{id:"advanced","aria-label":"advanced",children:(0,f.Y)(c$,{readableModelName:null!==(n=null==p?void 0:p.readable)&&void 0!==n?n:d.readable,isSelected:"advanced"===t,isOverrideActive:null!=r.overrideModelName,authz:i,modeAffordances:void 0===s?"Generate code & actions":s,showModelNames:a})})]})})})]})})}var cq=(0,z.x)({root:[W.wp.px(8),W.wp.py(6),W.wp.rowWithGap(8),W.wp.align.center,W.wp.cursor.pointer,W.wp.hover({backgroundColor:eZ.LU.backgroundHighest})],content:[W.wp.colWithGap(0),W.wp.flex.growAndShrink(1)],modelName:[W.wp.rowWithGap(6),W.wp.align.center]});function cK(e){var n=e.readableModelName,t=e.isSelected,r=e.modeAffordances,i=e.showModelNames;return(0,f.FD)(L.S,{css:cq.root,children:[(0,f.Y)(L.S,{children:(0,f.Y)(cG.A,{color:eZ.LU.foregroundDimmer})}),(0,f.FD)(L.S,{css:cq.content,children:[(0,f.Y)(L.S,{css:cq.modelName,children:(0,f.Y)(P.EY,{variant:"small",children:"Basic"})}),(0,f.FD)(P.EY,{variant:"small",color:"dimmer",children:[r," ",i?"with ".concat(n):""]})]}),(0,f.Y)(L.S,{children:t?(0,f.Y)(an.A,{color:eZ.LU.foregroundDefault}):null})]})}function c$(e){var n=e.readableModelName,t=e.authz,r=e.isSelected,i=e.isOverrideActive,o=e.modeAffordances,a=e.showModelNames;return(0,f.FD)(L.S,{css:cq.root,children:[(0,f.Y)(L.S,{children:(0,f.Y)(cV.A,{color:eZ.LU.foregroundDefault})}),(0,f.FD)(L.S,{css:cq.content,children:[(0,f.FD)(L.S,{css:cq.modelName,children:[(0,f.Y)(P.EY,{variant:"small",children:"Advanced"}),t.isAuthorized?(0,f.FD)(P.EY,{variant:"small",color:"dimmer",children:[aC.a7,"\xa2/",aC.go]}):null,t.isAuthorized?null:(0,f.Y)(i2.a,{text:i0.en}),void 0!==i&&i?(0,f.Y)(oL.a,{colorway:"orange",text:"Override"}):null]}),(0,f.FD)(P.EY,{variant:"small",color:"dimmer",children:[o," ",a?"with ".concat(n):""]})]}),(0,f.Y)(L.S,{children:r?(0,f.Y)(an.A,{color:eZ.LU.foregroundDefault}):null})]})}var cJ=(0,z.x)({root:[W.wp.px(6),W.wp.borderRadius(4,4,0,0),W.wp.rowWithGap(6),W.wp.align.center,W.wp.minHeight(28),W.wp.backgroundColor.backgroundHigher,W.wp.position.relative,W.wp.container("assistantControlBar")],modeSelectContainer:[W.wp.flex.growAndShrink(1)],modelIndicatorText:[{"@container (max-width: 270px)":{display:"none"}}],modelIndicatorTooltip:[W.wp.colWithGap(8),W.wp.p(4),W.wp.width("100%")]});function cQ(e){var n,t,r,i=e.availableModelNames,o=e.assistantAdvancedAuthz,a=void 0===o?{isAuthorized:!0}:o,l=e.onModeSelectChange,s=(0,Y.dm)().assistantMode;return(0,f.FD)(L.S,{css:cJ.root,children:[(0,f.Y)(oe.A,{}),(0,f.Y)(L.S,{css:cJ.modeSelectContainer,children:(0,f.Y)(cZ,{availableModelNames:i,assistantMode:s,assistantAdvancedAuthz:a,onChange:l})}),(0,f.Y)(cX,{assistantMode:s,assistantAdvancedAuthz:a,isOverrideActive:"advanced"===s&&null!=i.overrideModelName,preferredAdvancedModelName:Y.xI.readable,text:(n=i.basicModelName,t=i.advancedModelName,r=i.overrideModelName,"basic"===s?n.readable:"advanced"===s&&r?r.readable:t.readable)})]})}function cX(e){var n=e.assistantMode,t=e.assistantAdvancedAuthz,r=e.isOverrideActive,i=e.preferredAdvancedModelName,o=e.text;return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[void 0!==r&&r?(0,f.Y)(oL.a,{colorway:"orange",text:"Override"}):null,(0,f.Y)(P.EY,{css:cJ.modelIndicatorText,variant:"small",color:"dimmer",children:o}),(0,f.Y)(rd.m_,{tooltip:"basic"===n?(0,f.Y)(c0,{assistantAdvancedAuthz:t}):(0,f.Y)(c1,{assistantAdvancedAuthz:t,preferredAdvancedModelName:i}),placement:"top-end",children:(0,f.Y)(rf.A,{color:eZ.LU.foregroundDimmest})})]})}function c0(e){var n=e.assistantAdvancedAuthz;return(0,f.Y)(L.S,{css:cJ.modelIndicatorTooltip,children:(0,f.FD)(P.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Basic"}),": ",Y.BP,n.isAuthorized?" will answer questions about your code or the Replit environment using a lightweight model.":" will answer general coding questions."]})})}function c1(e){var n=e.assistantAdvancedAuthz,t=e.preferredAdvancedModelName;return(0,f.FD)(L.S,{css:cJ.modelIndicatorTooltip,children:[(0,f.FD)(P.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Advanced"}),": In addition to answering questions,"," ",Y.BP," will write code, propose file changes & shell commands, and use advanced code search techniques."]}),n.isAuthorized&&t?(0,f.FD)(P.EY,{variant:"small",children:["Note that ",t," is best for code generation, and you will experience degraded performance with other models."]}):null]})}var c2=t(37729),c5=t(33312),c4=t(23118),c3=t(89236),c8=t(9076),c7=t(9863),c6=t(24392),c9=t(43035),ue=t(44087),un=t(33170),ut=t(4723),ur=t(28175),ui=t(34420),uo=t(87171),ua=t(88456),ul=no.sj.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:[]},compare:o4()}),us=new nu.k(function(e){return ul.of(e)}),uc=t(20150),uu=t(20645),ud=(0,z.x)({popover:[W.wp.borderRadius(4),W.wp.border({color:eZ.LU.outlineDefault}),W.wp.overflow("hidden"),W.wp.maxWidth(290)]}),up=t(15656),uf=t(53536),uh=t(53535),um=t(16709);function ug(e){return(0,f.FD)(nQ.Ay,(0,nr._)((0,en._)({},e),{children:[(0,f.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.125.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h9a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M18.438 13.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 13.8Z",clipRule:"evenodd"})]}))}var uv=t(99413);function uw(e){return(0,f.Y)(nQ.Ay,(0,nr._)((0,en._)({},e),{children:(0,f.Y)("path",{d:"M12 1c.717 0 1.36.441 1.617 1.11l2.298 5.975 5.975 2.298a1.732 1.732 0 0 1 0 3.234l-5.975 2.298-2.298 5.975a1.732 1.732 0 0 1-3.234 0l-2.298-5.975-5.975-2.298a1.732 1.732 0 0 1 0-3.234l5.975-2.298 2.298-5.975C10.641 1.441 11.283 1 12 1Z"})}))}var uy=t(2091),ub=(0,z.x)({root:[oP.b.listItem,W.wp.p(4),W.wp.colWithGap(2)],content:[],left:[W.wp.flex.growAndShrink(1),W.wp.rowWithGap(4),W.wp.align.center,{fontSize:eZ.LU.fontSizeSmall}],warning:[{color:eZ.LU.accentNegativeDefault}],dir:[{opacity:.6},W.wp.flex.shrink(100)]});function uS(e){var n=e.path,t=e.highlighted,r=e.ranges,i=e.status,o=t?{backgroundColor:eZ.LU.interactiveBackgroundActive}:void 0,a=i?({included:(0,f.Y)(an.A,{}),overflowing:(0,f.Y)(oK.A,{}),truncated:(0,f.Y)(oK.A,{}),unsupported:(0,f.Y)(oK.A,{})})[i]:null,l=(0,up.dt)({path:n,ranges:null!=r?r:[]}),s=l.directory,c=l.filename,u=s&&s.text.split("/"),d=u&&u.length>2?"".concat(u[0],"/.../").concat(u[u.length-1],"/"):s&&s.text+"/";return(0,f.Y)(rd.m_,{maxWidth:600,closeDelay:"none",tooltip:n,children:(0,f.FD)(L.S,{css:ub.root,style:o,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",style:o,children:[(0,f.FD)(L.S,{css:ub.left,style:o,children:[(0,f.Y)(tt.A,{path:n,size:16}),(0,f.Y)(uh.e,{text:c.text,highlight:c.ranges,dimmed:!t}),s?(0,f.Y)(L.S,{color:"dimmest",css:ub.dir,children:(0,f.Y)(uh.e,{text:d||"",highlight:s.ranges,dimmed:!t})}):null]}),(0,f.Y)(rd.m_,{tooltip:"File not supported",isDisabled:"unsupported"!==i,children:a})]}),"overflowing"===i||"truncated"===i?(0,f.Y)(P.EY,{css:ub.warning,variant:"small",children:"Exceeds file memory"}):null]})})}var uY=(0,sm.v)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),uA=uY.cssVars,uC=uY.styleTokens,ux=(0,z.x)({root:[W.wp.width(290),W.wp.maxHeight(300),W.wp.display.flex],inputRow:[W.wp.p(4),W.wp.position.relative,(s={},(0,g._)(s,uA.iconColor,eZ.LU.foregroundDimmest),(0,g._)(s,uA.placeholderColor,eZ.LU.foregroundDimmer),(0,g._)(s,":focus-within, :hover",(l={},(0,g._)(l,uA.iconColor,eZ.LU.foregroundDimmer),(0,g._)(l,uA.placeholderColor,eZ.LU.foregroundDimmest),l)),s)],searchIcon:[W.wp.pl(12),W.wp.coverContainer,W.wp.align.start,W.wp.justify.center,{color:uC.iconColor,pointerEvents:"none"}],input:[W.wp.p(4),W.wp.pl(24)],header:[W.wp.px(4),W.wp.height(24),W.wp.align.center,W.wp.display.flex,W.wp.justify.spaceBetween],selectionButton:[W.wp.reset.button,oP.b.nofill,W.wp.p(2),{fontSize:eZ.LU.fontSizeSmall}],menu:[W.wp.flex.growAndShrink(1),{overflow:"auto",borderBottom:"1px solid "+eZ.LU.outlineDimmer}],item:[{transform:uC.itemTransform,position:"absolute",top:0,left:0,width:"100%"}],aiContext:[W.wp.px(6),W.wp.py(2),W.wp.align.center],ragText:[W.wp.px(6)]});function u_(e,n){return n.status&&!e.status?1:e.status&&!n.status?-1:"included"===n.status&&"included"!==e.status?1:"included"===e.status&&"included"!==n.status?-1:0}function uk(e){var n,t,r,i,o,a,l,s=e.fileContextInclusions,c=e.findFiles,u=e.overscan,d=e.onChange,p=e.unSelectAllFiles,h=e.isRagAuthorized,m=e.ragState,S=e.updatePopperPositionRef,A=(0,w.useRef)(null),C=(0,v._)((0,w.useState)(""),2),x=C[0],_=C[1],k=(0,v._)((0,w.useState)(!1),2),D=k[0],E=k[1],R=(r=(t=(0,v._)((0,w.useState)({loading:!0,error:null,items:null}),2))[0],i=t[1],(o=(0,w.useRef)(null)).current||(o.current=(0,cg.A)((n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,c(e)];case 1:return n=t.sent(),(0,w.startTransition)(function(){i(null!==n.error?{error:n.error,loading:!1,items:null}:{items:n.files,total:n.total,error:null,loading:!1})}),[2]}})}),function(e){return n.apply(this,arguments)}),{wait:40})),a=(0,w.useCallback)(function(e){var n;return null===(n=o.current)||void 0===n?void 0:n.call(o,e).catch(function(){})},[]),(0,w.useEffect)(function(){return a(""),function(){try{var e;null===(e=o.current)||void 0===e||e.cancel()}catch(e){}}},[a]),{files:r.items,loading:r.loading,error:r.error,total:r.total,update:a}),I=R.files,F=R.total,T=R.loading,U=R.error,N=R.update,O=(0,w.useRef)(null),M=(0,e1.A)(x),B=(0,w.useMemo)(function(){var e=new Map(s.map(function(e){return[e.path,e.inclusionStatus]})),n=null==I?void 0:I.map(function(n){var t=n.path;return{path:t,ranges:n.ranges,status:e.get(t)}});if(!n)return null;if(O.current&&!M.current)return(0,uu.A)(n,{existing:O.current,getKey:function(e){return e.path}});if(M.current)return n;var t=n.sort(u_);return O.current=t,t},[I,s,M]),H=(0,w.useMemo)(function(){var e;return null!==(e=null==B?void 0:B.filter(function(e){return e.status}))&&void 0!==e?e:[]},[B]);(0,w.useEffect)(function(){if(!T){var e;null===(e=S.current)||void 0===e||e.call(S)}},[T,S]);var z=(0,su.Bp)({inputValue:x,items:null!=B?B:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,n){var t=n.changes;switch(n.type){case su.Bp.stateChangeTypes.InputKeyDownEnter:case su.Bp.stateChangeTypes.ItemClick:return(0,aR.jM)(t,function(n){n.highlightedIndex=e.highlightedIndex});default:return t}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&V.getVirtualItems()[e.highlightedIndex]&&V.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case su.Bp.stateChangeTypes.InputKeyDownEnter:case su.Bp.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var n,t,r,i=H.includes(e.selectedItem)?"exclude":"include";d({path:e.selectedItem.path,preference:i}),null===(r=A.current)||void 0===r||r.select();break;case su.Bp.stateChangeTypes.InputChange:_(null!==(n=e.inputValue)&&void 0!==n?n:""),N(null!==(t=e.inputValue)&&void 0!==t?t:"")}}}),G=(0,w.useRef)(null),V=(0,ey.Te)({count:null!==(l=null==B?void 0:B.length)&&void 0!==l?l:0,getScrollElement:function(){return G.current},estimateSize:function(){return 32},getItemKey:function(e){var n,t;return null!==(t=null==B?void 0:null===(n=B[e])||void 0===n?void 0:n.path)&&void 0!==t?t:""},overscan:void 0===u?4:u}),j="".concat(eZ.LU.space4," ").concat(eZ.LU.space4," 0 0");return!T||(null==B?void 0:B.length)||(j=eZ.LU.space4),(0,f.FD)(L.S,{css:ux.root,style:(0,g._)({},uA.inputBorderRadius,j),children:[(0,f.FD)(L.S,{css:ux.aiContext,row:!0,gap:6,children:[(0,f.Y)(P.EY,{css:W.wp.fontWeight.medium,children:"Context"}),h?(0,f.Y)(L.S,{children:(0,f.Y)(uw,{color:eZ.LU.tealDefault,size:12})}):null]}),(0,f.FD)(L.S,{css:ux.ragText,children:[h?(0,f.Y)(tK.N,{colorway:"teal",text:(0,f.FD)(L.S,{children:[(0,f.FD)(L.S,{row:!0,gap:4,css:W.wp.align.center,children:[(0,f.FD)(P.EY,{variant:"small",children:[Y.BP," will automatically decide context."]}),(null==m?void 0:m.remainingFilesToIndex)?(0,f.Y)(rd.m_,{maxWidth:300,tooltip:(0,f.FD)(L.S,{css:W.wp.textAlign.center,children:[(0,f.FD)(P.EY,{children:[Y.BP," is getting to know your code"]}),(0,f.Y)(P.EY,{color:"dimmer",children:"(".concat(m.remainingFilesToIndex," files remaining)")})]}),children:(0,f.Y)(tr.A,{size:12})}):null]}),(0,f.Y)(P.EY,{variant:"small",children:"You may highlight specific files if you'd like."})]})}):null,h?null:(0,f.Y)(uf.d,{iconLeft:(0,f.Y)(uy.A,{}),onClick:function(){return E(!0)},colorway:"yellow",text:"Have ".concat(Y.BP," decide context automatically")})]}),(0,f.FD)(L.S,{css:ux.inputRow,children:[(0,f.Y)(L.S,{css:ux.searchIcon,children:T?(0,f.Y)(tr.A,{size:12}):(0,f.Y)(uv.A,{size:12})}),(0,f.Y)(eA.pd,(0,en._)({autoFocus:!0,placeholder:"Search files",css:ux.input},z.getInputProps({ref:A})))]}),U?(0,f.Y)(tK.N,{icon:(0,f.Y)(oK.A,{}),text:U}):null,void 0!==F?(0,f.FD)(L.S,{css:ux.header,row:!0,gap:2,children:[(0,f.Y)(P.EY,{variant:"small",color:"dimmest",children:"".concat(s.length,"/").concat(F," selected")}),s.length?(0,f.Y)(L.S,{tag:"button",css:ux.selectionButton,onClick:function(){return function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=(null!=I?I:[])[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;e.push(a.path)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}p({paths:e})}()},children:"Unselect All"}):null]}):null,(0,f.Y)("div",(0,nr._)((0,en._)({css:ux.menu},z.getMenuProps({ref:G})),{children:(0,f.Y)("div",{style:{height:"".concat(V.getTotalSize(),"px"),width:"100%",position:"relative"},children:V.getVirtualItems().map(function(e){var n=e.index,t=e.key,r=e.start,i=null==B?void 0:B[n];return i?(0,f.Y)(L.S,(0,nr._)((0,en._)({"data-index":n,css:ux.item,style:(0,g._)({},uA.itemTransform,"translateY(".concat(r,"px)"))},z.getItemProps({item:i,index:n,refKey:"innerRef",ref:V.measureElement})),{"aria-selected":void 0!==i.status,children:(0,f.Y)(uS,{highlighted:n===z.highlightedIndex,path:i.path,ranges:i.ranges,status:i.status})}),t.toString()):null})})})),(0,f.Y)(iX.A,{isOpen:D,onClose:function(){return E(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_context_menu",surface:"ghostwriter_power_up_dialog"}}})]})}var uD=(0,z.x)({button:[W.wp.height(24),W.wp.reset.button,W.wp.align.center,W.wp.cursor.pointer,W.wp.px(4),W.wp.py(2),W.wp.rowWithGap(4),oP.b.nofill,W.wp.color.foregroundDimmer,{"&:hover":W.wp.color.foregroundDefault,"@container (max-width: 400px)":{"> div > span":W.wp.display.none}}]});function uE(e){var n,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(null),2),c=s[0],u=s[1];(0,w.useEffect)(function(){var e=function(e){"Escape"===e.key&&i(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var d=(0,sc.E)(a,c,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"top-start"}),p=(0,w.useCallback)(function(){d.update&&d.update()},[d]),h=(0,w.useRef)(p);(0,w.useEffect)(function(){h.current=p},[p]);var m=e.fileContextInclusions,g=e.findFiles,y="Add file context",b=m.filter(function(e){return"included"===e.inclusionStatus});b.length&&(y=1===b.length?(n=(0,te.WP)(b[0].path)).length>20?n.slice(0,10)+"..."+n.slice(-10):n:b.length+" files");var S=(0,w.useId)();return(0,f.FD)(uc.cQ,{children:[(0,f.Y)(G.$n,{iconLeft:e.isRagAuthorized?(0,f.Y)(ug,{}):(0,f.Y)(um.A,{}),text:y,css:uD.button,ref:l,onClick:function(){return i(function(e){return!e})},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":S}),(0,f.Y)(cB.A,{isOpen:r,shouldCloseOnInteractOutside:function(e){var n;return n=[c,a],!(e instanceof Node&&n.some(function(n){return null==n?void 0:n.contains(e)}))&&(i(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,f.Y)(ed.ui,(0,nr._)((0,en._)({id:S,elevated:!0,style:d.styles.popper,innerRef:u,css:ud.popover},d.attributes.popper),{children:(0,f.Y)(uk,{overscan:e.overscan,onChange:e.onChange,unSelectAllFiles:e.unSelectAll,findFiles:g,fileContextInclusions:m,isRagAuthorized:e.isRagAuthorized,updatePopperPositionRef:h,ragState:e.ragState})}))})]})}var uR={render:function(e){var n=e.file,t=n.path,r=n.match,i=(0,nc.J)((0,f.Y)(L.S,{css:ub.root,style:{width:"100%"},className:"option",children:(0,f.FD)(L.S,{css:ub.content,children:[(0,f.FD)(L.S,{css:ub.left,children:[(0,f.Y)(tt.A,{path:t,size:16}),(0,f.Y)(uh.e,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,f.Y)(L.S,{color:"dimmest",css:ub.dir,children:(0,f.Y)(uh.e,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===n.inclusionStatus?(0,f.Y)(an.A,{}):null]})}));return i.style.display="flex",i.style.width="100%",i},position:81},uI=na.Lz.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:eZ.LU.fontFamilyDefault,fontSize:eZ.LU.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:eZ.LU.backgroundHighest}},".cm-completionLabel":{width:0}}),uF=new nu.k(function(e){if(!e)return[];function n(){return(n=(0,y._)(function(n){var t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!e||!n.matchBefore(/@(\S*)/g)||null===(t=n.matchBefore(/\w*/)))return[2,null];return[4,e(t.text)];case 1:return i=null!==(r=l.sent().files)&&void 0!==r?r:[],o=new Map(n.state.facet(ul).map(function(e){return[e.path,e.inclusionStatus]})),a=i.map(function(e){var n=e.path,t=e.ranges;return{label:n,displayLabel:" ",file:{path:n,inclusionStatus:o.get(n),match:(0,up.dt)({path:n,ranges:null!=t?t:[]})}}}),[2,{from:t.from,filter:!1,options:a}]}})})).apply(this,arguments)}return[uI,(0,c2.yU)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[uR],override:[function(e){return n.apply(this,arguments)}],maxRenderedOptions:100})]}),uT=new nu.k(function(e){return na.Lz.updateListener.of(function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.annotation(c2.rK);l&&e(l.label)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})}),uP=t(78910),uL=t(78542),uU=t(88708),uN=t(15892),uO=t.n(uN),uM=(0,z.x)({root:[W.wp.display.inlineFlex],button:[W.wp.reset.button,W.wp.display.inlineFlex,W.wp.px(2),oP.b.outlined,W.wp.borderRadius(4),W.wp.rowWithGap(2),W.wp.align.center],warning:{color:eZ.LU.redDefault}}),uB=new nc.E(function(e){var n=(0,te.WP)(e.path),t=(0,te._6)(e.path);return(0,f.Y)(rd.m_,{isDisabled:!t&&!e.warning,tooltip:(0,f.FD)(L.S,{children:[e.warning?(0,f.Y)(P.EY,{variant:"small",css:uM.warning,children:e.warning}):null,t?(0,f.FD)(P.EY,{variant:"small",color:"dimmest",children:[t,"/"]}):null]}),children:function(t,r){return(0,f.Y)(L.S,(0,nr._)((0,en._)({css:uM.root,innerRef:r},t),{children:(0,f.FD)(L.S,{tag:"button",css:uM.button,onClick:function(){return e.onClick()},children:[(0,f.Y)(tt.A,{size:12,path:e.path}),(0,f.Y)(P.EY,{variant:"small",children:n}),e.warning?(0,f.Y)(oK.A,{size:12}):null]})}))}})}),uH=function(e){function n(e,t){var r;return(0,uL._)(this,n),(r=(0,uP._)(this,n)).file=e,r.onClick=t,r}(0,uU._)(n,e);var t=n.prototype;return t.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},t.toDOM=function(){var e=this.file,n=e.path,t=e.inclusionStatus,r=null;switch(t){case"included":break;case"unsupported":r="File not supported";break;case"truncated":case"overflowing":r="Exceedes memory limit"}var i=uB.create({path:n,onClick:this.onClick,warning:r});return i.style.display="inline",i},n}(na.xO),uz=function(e,n){return new na.dT({regexp:RegExp("".concat(e.map(function(e){var n=e.path;return"@".concat(uO()(n))}).join("|")),"g"),decoration:function(t,r){var i,o=t[0].substring(1,null===(i=t[0])||void 0===i?void 0:i.length),a=e.find(function(e){return e.path===o});return a?na.NZ.replace({widget:new uH(a,function(){return n(o)}),inclusive:!0}):null}})},uW=new nu.k(function(e){return e?na.Z9.fromClass(function(){function n(t){(0,uL._)(this,n);var r=t.state.facet(ul);this.match=r.length&&e?uz(r,e):null,this.placeholders=this.match?this.match.createDeco(t):na.NZ.none}return n.prototype.update=function(n){var t=n.state.facet(ul);if(0===t.length){this.match=null,this.placeholders=na.NZ.none;return}if((0,nl.$H)(n,ul)){this.match=uz(t,e),this.placeholders=this.match.createDeco(n.view);return}if((0,nl.$H)(n,"doc")){if(!this.match){this.match=uz(t,e),this.placeholders=this.match.createDeco(n.view);return}this.placeholders=this.match.updateDeco(n,this.placeholders)}},n}(),{decorations:function(e){return e.placeholders},provide:function(e){return na.Lz.atomicRanges.of(function(n){var t;return(null===(t=n.plugin(e))||void 0===t?void 0:t.placeholders)||na.NZ.none})}}):[]}),uG=t(15145),uV=t(83522),uj=t(48701),uZ=t(34605),uq=(0,sm.v)(["padding","columnGap"]),uK=uq.cssVars,u$=uq.styleTokens,uJ=na.Lz.theme((c={"&":{flexGrow:1},"& .cm-content":{fontFamily:eZ.LU.fontFamilyDefault}},(0,g._)(c,"& .".concat(c6.Fb),{display:"none"}),(0,g._)(c,"& .cm-cursor",{borderLeftColor:eZ.LU.foregroundDefault,borderLeftWidth:"1px"}),c)),uQ=(0,z.x)({controlBarContainer:[W.wp.position.absolute,W.wp.width("100%"),W.wp.top(0),W.wp.left(0),W.wp.border({width:1,color:eZ.LU.outlineDimmer,direction:"bottom"})],footer:[W.wp.py(4),W.wp.height(32)],left:[W.wp.flex.growAndShrink(1),{cursor:"text"}],right:[W.wp.display.flex,W.wp.rowWithGap(8),W.wp.align.end],rightColumn:[W.wp.display.flex,W.wp.flex.column,W.wp.align.center],codemirror:[W.wp.display.flex,W.wp.flex.grow(1),W.wp.maxHeight(300),{"& .cm-editor":[W.wp.flex.grow(1)]}],send:[W.wp.borderRadius(),W.wp.mr(2)],sendDisabled:[(0,eu.Li)("grey")],sendEnabled:[(0,eu.Li)("teal")],chatInput:[W.wp.borderRadius(4),oP.b.filledAndOutlined,W.wp.p(4),W.wp.position.relative,{"@media (hover: hover)":{":not([disabled], [aria-disabled])":{cursor:"text"}},padding:u$.padding,columnGap:u$.columnGap,rowGap:eZ.LU.space4,border:"1px solid ".concat(eZ.LU.outlineDimmest),"&:not([disabled], [aria-disabled])":{borderColor:eZ.LU.outlineDimmer},"&:hover:not([disabled], [aria-disabled]):hover":{borderColor:eZ.LU.tealStronger},"&:focus-within":{borderColor:eZ.LU.tealStronger}}]});function uX(e){var n,t,r,i,o,a,l,s,c,u,d,p=(0,C.A)(),h=p.ref,m=p.view,v=(0,iQ.m5)(),y=(0,iQ.m6)(),b=(t=(n={view:m,setPromptEditor:e.inputRef}).view,r=n.setPromptEditor,i=(0,w.useRef)(null),o=(0,e1.A)(r),(0,w.useEffect)(function(){if(t){var e=o.current;return e({setValue:function(e){t.state.doc.toString()!==e&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},getValue:function(){return t.state.doc.toString()},focus:function(){t.focus(),t.dispatch({selection:{anchor:t.state.doc.length}})},animatePlaceholder:function(){t.dispatch({effects:uG.om.of(!0)}),(0,ue.U)(i,"border-color",eZ.LU.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null===(e=i.current)||void 0===e||e.style.removeProperty("border-color")})},60),t.focus()}}),function(){e(null)}}},[t,o]),i),S=(0,uG.hk)({text:e.placeholderText}),Y=(0,c8.Vn)(m,uG.Im),A=ua.bZ.use(e.maxLength),x=(0,e1.A)(e.onSubmit),_=u0.use((0,w.useCallback)(function(e){return x.current(e)},[x]),!e.isConnected),k=uF.use(e.findFiles),D=uW.use(e.openFile),E=us.use(e.fileContextInclusions),R=c5.L.use({analyticsSurface:e.analyticsSurface,shouldTrack:!0}),I=e.updateFileContext,F=uT.use((0,w.useCallback)(function(e){return null==I?void 0:I({path:e,preference:"include"})},[I])),T=ur.U.use({addAttachments:e.addAttachments,onAutoAttachedLargePaste:function(e){(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"auto_attached_large_paste",fileSize:e})}}),P=(0,ut.Jw)(un.IW.id,un.Gp.GenerateVisualizationCode),U=(0,ut.Jw)(un._t.id,un.ij.GenerateStylingCode),N=(0,ui.A)({addAttachments:e.addAttachments}),O=N.isDraggedOver,M=N.drop,B=(!m||!0===Y)&&!e.loading||e.loading&&!e.isLastEventInProgress||(null===(s=e.assistantModeAuthz)||void 0===s?void 0:s.isAuthorized)===!1,H=e.attachments,z=e.attachmentButton,W=e.controlBar,G=e.debugButton,V=e.fileContextButton,j=function(){var n=e.loading,t=e.isLastEventInProgress;return n?t?"Stop":"Loading":"Send"},Z=function(){if(e.loading&&e.isLastEventInProgress){e.onStop();return}if(m){var n=m.state.doc.toString();n&&(e.onSubmit(n),m.dispatch({changes:{from:0,to:m.state.doc.length}}))}},q=(0,uV.z)({type:"assistant"}),K=(0,w.useMemo)(function(){return(0,c9.P)(e.isPasteAndDropSupported?M:void 0,b,P,U,q)},[b,P,M,q,U,e.isPasteAndDropSupported]);return(0,f.FD)(ed.ui,{css:uQ.chatInput,innerRef:K,style:(d={flexDirection:"compact"===e.variant?"row":void 0},(0,g._)(d,uK.padding,"compact"===e.variant?"2px 5px":"4px 4px"),(0,g._)(d,uK.columnGap,v||y?"0px":"4px"),(0,g._)(d,"borderColor",O?eZ.LU.accentPrimaryDefault:void 0),(0,g._)(d,"paddingTop",e.controlBar?eZ.LU.space32:void 0),d),children:[W?(0,f.Y)(L.S,{css:uQ.controlBarContainer,children:W}):null,H,(0,f.Y)(c7.A,{ref:h,css:uQ.codemirror,fontSize:14,extensions:[uJ,_,R,T,S,ua.tP,A,E,D,k,F,c3.r,c4.N,e.isPasteAndDropSupported?T:[]]}),(0,f.FD)(L.S,{css:uQ.footer,row:!0,gap:8,align:"end",children:["compact"===e.variant?null:(0,f.FD)(L.S,{css:uQ.left,row:!0,gap:8,align:"center",onClick:function(e){e.target===e.currentTarget&&(null==m||m.focus())},children:[z,V,G]}),(0,f.FD)(L.S,{css:uQ.right,style:{alignItems:"compact"===e.variant?"flex-end":"center"},children:["compact"===e.variant?null:(0,f.Y)(ua.v$,{view:m}),e.feedbackButton,e.deepThinkingControl,(0,f.FD)(L.S,{css:uQ.rightColumn,children:["compact"===e.variant?(0,f.Y)(ua.v$,{view:m}):null,v?(0,f.Y)(uo.J,{variant:"assistant",alt:j(),onClick:Z,dataCy:"ai-chat-send-button",iconOverride:e.isLastEventInProgress?(0,f.Y)(uZ.A,{}):void 0}):(0,f.Y)(ed.ui,{elevated:!0,css:uQ.send,children:e.isConnected?(0,f.Y)(eY.K0,{css:B?uQ.sendDisabled:uQ.sendEnabled,disabled:B,tooltipContents:(null===(c=e.assistantModeAuthz)||void 0===c?void 0:c.isAuthorized)?void 0:null===(u=e.assistantModeAuthz)||void 0===u?void 0:u.message,tooltipBehavior:B?"default":"hidden",dataCy:"ai-chat-send-button",alt:j(),onClick:Z,children:(a=e.loading,l=e.isLastEventInProgress,a?l?(0,f.Y)(uZ.A,{}):(0,f.Y)(tr.A,{}):(0,f.Y)(uj.A,{}))}):(0,f.Y)(eY.K0,{disabled:!0,alt:"Connecting....",children:(0,f.Y)(tr.A,{})})})]})]})]})]})}var u0=new nu.k(function(e,n){return na.Lz.domEventHandlers({keydown:function(t,r){!((0,c2.lq)(r.state).length>0)&&("Enter"===t.key&&t.metaKey&&t.stopPropagation(),"Enter"===t.key&&!t.shiftKey)&&(t.preventDefault(),!(n||r.state.field(uG.Im))&&(e(r.state.doc.toString()),r.dispatch({changes:{from:0,to:r.state.doc.length}})))}})});function u1(){var e=(0,et._)(["\n  query GetRagAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useRag {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return u1=function(){return e},e}var u2={},u5=(0,er.J1)(u1());function u4(){var e,n,t,r,i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,_.A)(),s=(e={variables:{replId:l}},n=(0,en._)({},u2,e),ei.I(u5,n)),c=s.data,u=s.refetch,d=(null==c?void 0:null===(r=c.repl)||void 0===r?void 0:r.__typename)==="Repl"&&c.repl.authorizations.useRag.isAuthorized;return(0,np.b)((t=(0,y._)(function(e,n){var t,r,i,o,l,s,c,u,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(t=n.signal,!d)return[2];r=e.viktor.subscribeCurrentState.subscribe({},{signal:t}).resReadable,i=!1,o=!1,f.label=1;case 1:f.trys.push([1,6,7,12]),s=(0,nt._)(r),f.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(c=f.sent()).done))return[3,5];if(!(u=c.value).ok)return a({error:u.payload.message}),[3,5];a(u.payload),f.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=f.sent(),o=!0,l=p,[3,12];case 7:if(f.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:f.sent(),f.label=9;case 9:return[3,11];case 10:if(o)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[d]),{isRagAuthorized:d,ragState:o,refetchRagAuthorization:(0,w.useCallback)(function(){u({replId:l})},[u,l])}}var u3=t(72123),u8=t(97802),u7=(0,z.x)({attachments:[W.wp.px(4),W.wp.py(8)]});function u6(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,A,C=e.assistantAuthz,x=e.sendMessage,_=e.stopMessage,D=e.openFile,E=e.openGitCommit,R=e.inputRef,I=e.loading,F=e.sessionId,T=e.parentToActiveChild,P=e.fileContextInclusions,L=e.getFileContext,U=e.dataAppTourGenerateCodeStep,N=e.portfolioWebsiteTourGenerateCodeStep,O=e.shouldAutoscrollRef,M=(0,iq._P)({controlName:"flag-agent-debug-info-button"}),B=(0,iq._P)({controlName:"flag-machine-meditation"}),z=!(0,lP.F)()&&(null==C?void 0:C.advancedAssistant.isAuthorized),W=(0,k.A)().fs;a_();var G=(n=(0,H.Sx)(),t=(0,n4.J)(),(0,w.useCallback)((r=(0,y._)(function(e){var r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,W.listFiles()];case 1:if((r=s.sent()).error||!r.files)return[2,{error:null!==(i=r.error)&&void 0!==i?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!t(e)}),!e)return[3,3];return[4,(0,up.UI)(e,o)];case 2:return l=s.sent(),[3,4];case 3:l=(0,uu.A)(o,{existing:n(),getKey:function(e){return e}}).map(function(e){return{path:e}}),s.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[W,t,n])),V=(0,Y.ey)(F,T),j=!!(V&&V.state===S.qOk.IN_PROGRESS),Z=(0,Y.GS)(),q=(0,Y.Y9)(),K=(0,Y.vm)(),$=(0,Y.Gk)(),J=u4(),Q=J.isRagAuthorized,X=J.ragState,ee=J.refetchRagAuthorization;(0,w.useEffect)(function(){ee()},[null==C?void 0:null===(A=C.advancedAssistant)||void 0===A?void 0:A.isAuthorized,ee]);var en=(0,v._)((0,w.useState)(!1),2),et=en[0],er=en[1],ei=(0,v._)((0,w.useState)("ai_model_selector"),2),eo=ei[0],ea=ei[1],el=(0,Y.dm)(),es=el.assistantMode,ec=el.setAssistantMode,eu=(0,Y.K2)(),ed=(0,cF.s)(eu.qualified).messageCharacters,ep=(0,iQ.m5)(),ef=(0,nL.A)().showError,eh=(0,w.useCallback)((i=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.files,t=e.onError,[4,(0,cT.Zn)({parentPath:cL.Ls,files:n,fs:W,overwrite:!0,onError:function(e){return t(e.error)}})];case 1:return r.sent(),[2]}})}),function(e){return i.apply(this,arguments)}),[W]),em=(0,cL.Ay)({sessionId:null!=F?F:void 0,uploadFiles:eh,onError:ef}),eg=em.attachments,ev=em.removeAttachment,ew=em.addAttachments,ey=em.clearAttachments,eb=(0,u8.T)({mode:es,authz:C}),eS=(0,cU.B)(),eY=eS.isDeepThinkingEnabled,eA=eS.setIsDeepThinkingEnabled,eC=(a=(o={authz:eb,sendMessage:x,getFileContext:L,shouldAutoscrollRef:O}).authz,l=o.sendMessage,s=o.getFileContext,c=o.shouldAutoscrollRef,u=(0,Y.Gk)(),d=u4().isRagAuthorized,h=(p=(0,Y.dm)()).getAssistantMessageIntent,m=p.getAssistantMessageModel,g=p.getAssistantMode,(0,w.useCallback)(function(e,n,t){if(u){var r=m(a);(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:g(),model:r,message_content:e,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),l({kind:"message",message:e,uploadedFiles:n.map(function(e){return{path:e.path,mimeType:e.file.type}}),model:r,intent:h(),useRag:d,extraResources:[],enableDeepThinking:null==t?void 0:t.enableDeepThinking},{newSessionType:S.dF3.CHAT,getFileContext:s}),c.current=!0}},[u,h,g,m,a,l,d,s,c]));function ex(){return(ex=(0,y._)(function(e){return(0,b.YH)(this,function(n){return eb.isAuthorized&&(eC(e,eg,{enableDeepThinking:eY}),ey(),e.trim().length>0&&((null==U?void 0:U.isActive)?U.next():(null==N?void 0:N.isActive)&&N.next())),[2]})})).apply(this,arguments)}var e_=(0,Y.dp)();return(0,f.FD)(f.FK,{children:[(0,f.Y)(uX,{assistantModeAuthz:eb,placeholderText:"Ask ".concat(Y.BP,", use @ to include specific files..."),isPasteAndDropSupported:!0,isConnected:$,inputRef:R,isLastEventInProgress:j,loading:I,findFiles:G,fileContextInclusions:P,updateFileContext:function(e){return Z(e.path,e.preference)},openFile:D,openGitCommit:E,maxLength:ed,onStop:_,onSubmit:function(e){return ex.apply(this,arguments)},analyticsSurface:"workspace_ai_sidebar",attachments:(0,f.Y)(oc.A,{css:u7.attachments,fileAttachments:eg.map(function(e){return(0,f.Y)(ou.m,{attachment:e,removeAttachment:ev,getAttachmentTypeDisclaimer:(0,od.F)({aiName:Y.BP}),imagesDisabledMessage:"basic"===es?"".concat(Y.BP," can't see images in Basic mode"):void 0},e.path)})}),attachmentButton:(0,f.Y)(cP.e,{status:I?"loading":"composing",addAttachments:ew}),addAttachments:ew,debugButton:M&&F?(0,f.Y)(u3.A,{sessionId:F,sessionType:S.dF3.CHAT}):null,fileContextButton:(0,f.Y)(uE,{isInMobileWorkspace:ep,onChange:function(e){return Z(e.path,e.preference)},unSelectAll:function(e){return q(e.paths)},findFiles:G,fileContextInclusions:P,isRagAuthorized:Q,ragState:X}),controlBar:(0,f.Y)(cQ,{availableModelNames:K,assistantAdvancedAuthz:null==C?void 0:C.advancedAssistant,onModeSelectChange:function(e){if(!(null==C?void 0:C.advancedAssistant.isAuthorized)&&"advanced"===e){ea("ai_model_selector"),er(!0);return}e!==es&&(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:e,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),ec(e)}}),feedbackButton:F&&z?(0,f.Y)(cN.M,{sessionId:F,sendAgentFeedback:e_}):null,deepThinkingControl:B&&"advanced"===es&&null!=K.overrideModelName?(0,f.Y)(cU.A,{isEnabled:eY,setIsEnabled:eA}):null}),(0,f.Y)(iX.A,{isOpen:et,onClose:function(){return er(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",highlightUpsell:"assistant",analyticsContext:{upgrade:{context:eo,surface:"ghostwriter_power_up_dialog"}}})]})}var u9=(0,z.x)({root:[W.wp.py(8),W.wp.px(6)],surface:[W.wp.py(8),W.wp.px(12),W.wp.borderRadius(),W.wp.textAlign.center],buttonContainer:[W.wp.width("100%"),W.wp.justify.center],chatInputWrapper:[W.wp.px(8),W.wp.pb(8)]});function de(e){var n=e.assistantAuthz,t=e.sendMessage,r=e.stopMessage,i=e.openFile,o=e.openGitCommit,a=e.inputRef,l=e.loading,s=e.parentToActiveChild,c=e.sessionId,u=e.getFileContext,d=e.fileContextInclusions,p=e.shouldAutoscrollRef,h=e.hideInput,m=(0,v._)((0,w.useState)(!1),2),g=m[0],y=m[1],b=(0,lP.F)(),S=(0,cn.V)().assistantEdits,A=(0,Y.dm)(),C=A.assistantMode,x=A.setAssistantMode,_=!!("advanced"===C&&b&&!(null==S?void 0:S.isUnderQuota)),k=(0,iq._P)({controlName:"flag-freemium-ai-load-shedder"}),D=(0,i9.A)(),E=function(){(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:"basic",message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),x("basic")};return _?(0,f.FD)(L.S,{css:u9.root,children:[(0,f.FD)(ed.ui,{elevated:!0,css:u9.surface,gap:8,align:"center",children:[(0,f.FD)(P.EY,{variant:"subheadDefault",children:["You've run out of free ",Y.BP," ",(0,tN.A)(aC.go)]}),(0,f.FD)(P.EY,{children:["Upgrade to ",i0.en," to continue generating code. You can still ask ",Y.BP," questions in Basic mode."]}),(0,f.FD)(L.S,{css:u9.buttonContainer,row:!0,gap:8,children:[(0,f.Y)(G.$n,{text:"Upgrade to ".concat(i0.en),iconLeft:(0,f.Y)(cV.A,{}),onClick:function(){return y(!0)},colorway:"brand"}),(0,f.Y)(G.$n,{text:"Switch to Basic mode",onClick:function(){return E()}})]})]}),(0,f.Y)(iX.A,{isOpen:g,onClose:function(){return y(!1)},type:"purchase",analyticsContext:{upgrade:{context:"assistant_freemium_quota"}},onPurchaseComplete:D,reloadPageAfterPurchaseComplete:!0})]}):h?null:b&&k?(0,f.Y)(cy.n,{aiName:Y.BP}):(0,f.FD)(L.S,{css:u9.chatInputWrapper,children:[(0,f.Y)(cI,{assistantAuthz:n}),(0,f.Y)(u6,{assistantAuthz:n,sendMessage:t,stopMessage:r,openFile:i,openGitCommit:o,inputRef:a,loading:l,parentToActiveChild:s,sessionId:c,getFileContext:u,fileContextInclusions:d,shouldAutoscrollRef:p})]})}var dn=(0,w.forwardRef)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,h,m,g,A=(0,iJ.A)(),C=(0,v._)((0,w.useState)(!1),2),x=C[0],_=C[1],D=e.openPane,E=e.onSessionChange,R=e.removePane,I=(0,Y.Au)({initialSessionId:e.initialSessionId}),F=I.sendMessage,T=I.stopMessage,P=I.loading,L=I.setSessionId,U=I.sessionId,N=I.setActiveChild,O=I.parentToActiveChild,M=I.hasAnyChatSessions;(0,w.useImperativeHandle)(n,function(){return{updateActiveSessionId:function(e){L(null!=e?e:null)}}}),(0,w.useEffect)(function(){null==E||E(U)},[E,U]),t=(0,v._)((0,cw.jd)({fetchPolicy:"network-only",ssr:!1}),1)[0],(0,Y.sS)(U,function(e){if(e&&(0,S.VFn)(e,"updateEventMessage")){var n=e.updateEventMessage.typedOperations[0];n&&((0,S.VFn)(n.operation,"addProposedFileChange")||(0,S.VFn)(n.operation,"addProposedShellCommand"))&&setTimeout(function(){t()},2e3)}});var z=(0,Y.QV)(U),W=(0,Y.q4)(),G=(0,w.useRef)(!1),V=(0,v._)((0,w.useState)(null),2),j=V[0],Z=V[1],q=(0,i$.useRouter)(),K=(0,iQ.ME)(q,"hideChatInput"),$=(0,cv.L)(),J=$.authorizations,Q=$.loading,X=(0,Y.dm)().getAssistantMode;function et(e){if(L(e),!A&&(null==j||j.focus(),!e)){var n;null==j||null===(n=j.setValue)||void 0===n||n.call(j,"")}}var er=(0,w.useCallback)(function(e){return D((0,n2.af)(e))},[D]),ei=(0,w.useCallback)(function(e){return D({type:"git",data:{mode:{type:lw.C.COMMIT,hash:e}}})},[D]),eo=(0,k.A)(),ea=eo.fs,el=eo.dotReplit,es=(i=(r={recentFilesObservable:(0,H.rE)(),getFileContext:(0,B.P)(ea,el),assistantMode:X()}).recentFilesObservable,o=r.getFileContext,a=r.assistantMode,l=(0,e1.A)(o),s=(0,Y.Vg)(),c=(0,Y.nt)(),d=(u=(0,v._)((0,w.useState)([]),2))[0],p=u[1],(0,w.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,null===(n=l.current)||void 0===n?void 0:n.call(l,{modelType:"advanced"===a?S.e3q.ADVANCED:S.e3q.BASIC,filePreferences:c,recentFiles:e})];case 1:if(!(t=r.sent()))return[2];return p(function(e){var n=e.filePreferences,t=e.fileContextState,r=new Map(t.fileContext.map(function(e){return[e.filePath,"included"]})),i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=(0,v._)(l.value,2),u=c[0],d=c[1];if("exclude"===d){r.delete(u);continue}if(t.unsupportedPreferredFiles.has(u)){r.set(u,"unsupported");continue}r.set(u,"included"===r.get(u)?"included":"overflowing")}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return(0,ee._)(r.entries()).map(function(e){var n=(0,v._)(e,2);return{path:n[0],inclusionStatus:n[1]}})}({fileContextState:t,filePreferences:c})),[2]}})})).apply(this,arguments)}return e(i.current),i.subscribe((0,cg.A)(e,{wait:2e3}))},[i,c,a,l]),{fileContextInclusions:d,getFileContext:(0,w.useMemo)(function(){return function(){return o({modelType:"advanced"===a?S.e3q.ADVANCED:S.e3q.BASIC,filePreferences:s(),recentFiles:i.current})}},[o,s,a,i])}),ec=es.fileContextInclusions,eu=es.getFileContext,ed=e.inputRef,ep=(0,w.useCallback)(function(e){Z(e),null==ed||ed(e)},[ed]),ef=(m=(h=(0,v._)((0,w.useState)(!1),2))[0],g=h[1],{isSettingsPanelOpen:m,openSettingsPanel:(0,w.useCallback)(function(){return g(!0)},[]),openUserSettingsPane:(0,w.useCallback)(function(){D({type:"preferences"})},[D]),setIsSettingsPanelOpen:g}),eh=!!(null==J?void 0:J.advancedAssistant.isAuthorized);return(0,f.FD)(f.FK,{children:[(0,f.FD)(ch,(0,nr._)((0,en._)({sessionId:U,setSessionId:et,onNewSessionClick:function(){et(null),null==j||j.animatePlaceholder()}},ef),{children:[z?(0,f.Y)(lO,{openPane:D,removePane:R,parentToActiveChild:O,setActiveChild:N,sessionId:null==z?void 0:z.id,shouldAutoscrollRef:G,openAiChatSettingsPanel:ef.openSettingsPanel}):(0,f.Y)(cm.T,{showIntroVideoCard:!M,showPromptSuggestions:!K,sessionType:S.dF3.CHAT,onPromptSuggestionClick:j?function(e){var n;null==j||null===(n=j.setValue)||void 0===n||n.call(j,e.text),A||null==j||j.focus()}:void 0,openAiChatSettingsPanel:ef.openSettingsPanel,titleContent:Q||eh?null:(0,f.Y)(or,{}),footerContent:Q?null:eh?(0,f.Y)(dr,{openSettingsPanel:ef.openSettingsPanel}):(0,f.Y)(ot,{})}),W?(0,f.Y)(oi.x,{}):(0,f.Y)(de,{assistantAuthz:J,sendMessage:F,stopMessage:T,openFile:er,openGitCommit:ei,inputRef:ep,loading:P,parentToActiveChild:O,sessionId:U,getFileContext:eu,fileContextInclusions:ec,shouldAutoscrollRef:G,hideInput:K})]})),(0,f.Y)(iX.A,{isOpen:x,onClose:function(){return _(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),dt=(0,z.x)({text:[W.wp.py(4)],button:[W.wp.color.foregroundDimmer,W.wp.display.inlineFlex,W.wp.align.center]});function dr(e){var n=e.openSettingsPanel;return(0,f.FD)(P.EY,{color:"dimmer",variant:"small",css:dt.text,children:["Want more tailored responses? Customize your ".concat(Y.BP,"'s behavior in "),(0,f.Y)(G.$n,{css:dt.button,text:"Settings",size:"small",onClick:n,variant:"underlined"}),"."]})}var di=t(50630),da=t(29895),dl=h.ZU.Object({type:h.ZU.Literal("ghostwriterChat"),data:h.ZU.Optional(h.ZU.Object({sessionId:h.ZU.Optional(h.ZU.String()),newSessionType:h.ZU.Optional(h.ZU.Enum(S.dF3))}))}),ds=(0,z.x)({root:[W.wp.center,W.wp.flex.growAndShrink(1),W.wp.p(16)]});function dc(){return(0,f.Y)(L.S,{css:ds.root,children:(0,f.Y)(P.EY,{children:"AI is disabled for this team"})})}var du={Content:function(e){var n=e.pane.data,t=e.options,r=(0,iq._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),i=t.performPaneOperation,o=(0,w.useCallback)(function(e){i({operation:"open",pane:e,secondary:!0})},[i]),a=(0,w.useCallback)(function(e){i({operation:"remove",pane:{id:e}})},[i]),l=(0,H.AU)("workspaceTourGuide"),s=(0,v._)((0,w.useState)(null),2),c=s[0],u=s[1],d=(0,w.useRef)(null==n?void 0:n.sessionId);(0,tn.HP)(function(){return c},[c]);var p=(0,w.useRef)("");(0,tn.Qt)(function(){return c?(p.current&&(c.setValue(p.current),p.current=""),{type:"ghostwriterChat",setInputText:c.setValue}):{type:"ghostwriterChat",setInputText:function(e){p.current=e}}},[c]);var h=(0,e1.A)(null==n?void 0:n.sessionId),m=(0,w.useCallback)(function(e){h.current!==e&&i({operation:"replace",pane:{type:"ghostwriterChat",data:e?{sessionId:e}:void 0}})},[i,h]),g=(0,w.useRef)(null);return((0,w.useEffect)(function(){var e;null===(e=g.current)||void 0===e||e.updateActiveSessionId(null==n?void 0:n.sessionId)},[null==n?void 0:n.sessionId]),(0,iK.f)().isTeamWithAiDisabled)?(0,f.Y)(dc,{}):r?(0,f.Y)(di.A,{textVariant:"headerDefault",showImage:!0}):(0,f.Y)(dn,{ref:g,inputRef:u,initialSessionId:d.current,openPane:o,removePane:a,isGuidedWorkspaceTourActive:null!=l&&l,analyticsMessageSurface:"workspace_ai_pane",onSessionChange:m})},Icon:function(e){var n=e.size,t=e.color;return(0,f.Y)(nQ.Vx.Provider,{value:{color:t,size:n},children:t?(0,f.Y)(da.A,{color:t}):(0,f.Y)(oe.A,{})})},getTitle:function(){return Y.BP},description:Y.C3,category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(dl,e)}},dd=(0,w.createContext)(null);function dp(){var e=(0,w.useContext)(dd);if(!e)throw Error("Expected store in context");return e}var df=(0,ez.eU)([]),dh=(0,ez.eU)(function(e){return e(df)},function(e,n,t){var r=e(df),i=Math.random().toString(36).substring(7);n(df,[{id:i,type:t,dismiss:function(){var t=e(df).filter(function(e){return e.id!==i});n(df,t)}}].concat((0,ee._)(r)))});function dm(){return(0,eW.Xr)(dh,{store:dp()})}function dg(e,n){(0,re.u4)(t3.AZ.GIT_FEATURE_USED,(0,en._)({action:e,source:"git-pane"},n))}var dv=t(8235),dw=(0,z.x)({checkboxLabel:W.wp.rowWithGap(8)});function dy(){var e=(0,w.useId)(),n=(0,v._)((0,w.useState)(!0),2),t=n[0],r=n[1],i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=dm(),s=(0,k.A)().git;function c(){return(c=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(o)return[2];return a(!0),[4,s.init({initialCommit:t,includeAllInitialFiles:!0})];case 1:return(e=n.sent()).error?(a(!1),l(e.error)):(s.forceRefresh(),dg("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,f.FD)(f.FK,{children:[(0,f.Y)(G.$n,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,f.Y)(tr.A,{}):(0,f.Y)(dv.A,{}),colorway:"primary",loading:o,onClick:function(){return c.apply(this,arguments)}}),(0,f.FD)(L.S,{css:dw.checkboxLabel,tag:"label",children:[(0,f.Y)(nM.S,{id:e,checked:t,onChange:function(e){return r(e)},size:"small"}),(0,f.Y)(P.EY,{variant:"small",multiline:!1,children:"Create initial commit with all changes"})]})]})}var db=t(20521),dS=t(71416);function dY(){var e,n=(0,rV.A)((e=(0,y._)(function(e){return(0,b.YH)(this,function(n){return[2,{connectedToGithub:dA(e),error:null}]})}),function(n){return e.apply(this,arguments)}));return null==n||n.error?null:n.connectedToGithub}function dA(e){return e.hasProfile(rG.HJ.GITHUB)}var dC=t(76860);function dx(e){var n=e.label,t=e.allowReconnect,r=e.callback,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,k.A)().git,s=dY(),c=(0,iE.A)(),u=(0,dS.P)({onAuth:function(){dg("github-user-connected"),a(!1),l.refreshProfiles({preferredProvider:rG.HJ.GITHUB}),null==r||r()},onClose:function(){return a(!1)}});return s&&!(void 0!==t&&t)?(0,f.Y)(G.$n,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,f.Y)(an.A,{}),disabled:!0}):(0,f.Y)(G.$n,{text:o||null===s?"Connecting...":c?"Visit account page to connect to GitHub":void 0===n?"Connect to GitHub":n,colorway:"primary",iconLeft:o?(0,f.Y)(tr.A,{}):(0,f.Y)(dC.A,{}),loading:o,onClick:function(){if(c){db.M.openExternalUrl("/account#connected-services");return}a(!0),u()}})}var d_=t(76515);function dk(e){return!!e&&("string"==typeof e?e.includes(d_.Oe):e.fetch.includes(d_.Oe))}function dD(e){return e.endsWith(".git")?e.slice(0,-4):e}function dE(e){if(!e)return null;var n="string"==typeof e?e:e.fetch;return dk(n)?dD(n):null}function dR(e){var n="string"==typeof e?e:e.fetch;if(dk(n)){var t=(n=dD(n)).split("/");if(t.length<2)return null;var r=t[t.length-2],i=t[t.length-1];return"".concat(r,"/").concat(i)}return null}var dI=t(70953),dF=(0,z.x)({body:[W.wp.p(4),W.wp.colWithGap(8),W.wp.borderRadius(0,0,8,8)],remedies:[W.wp.flex.wrap,{gap:"8px"}]});function dT(e){var n=e.description,t=e.remedies,r=e.error;return(0,f.FD)(ed.ui,{css:dF.body,elevated:!0,children:[(0,f.Y)(P.EY,{children:n}),(0,f.FD)(L.S,{css:dF.remedies,row:!0,align:"center",justify:"end",children:[t,(0,f.Y)(G.$n,{text:"Dismiss",iconLeft:(0,f.Y)(dI.A,{}),onClick:r.dismiss})]})]})}function dP(e){var n,t=e.error,r=(0,rV.A)((n=(0,y._)(function(e){var n,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:switch(t.type){case rG.uA.UNKNOWN_NOT_GIT:return[3,1];case rG.uA.UNKNOWN:return[3,2];case rG.uA.CHANNEL_CLOSED:return[3,3];case rG.uA.NOT_INITIALIZED:return[3,4];case rG.uA.UNAUTHENTICATED:return[3,5];case rG.uA.INDEX_FILE_CORRUPT:return[3,7];case rG.uA.UNKNOWN_REMOTE:return[3,8];case rG.uA.UNKNOWN_REF:return[3,9];case rG.uA.INDEX_LOCKED:return[3,10];case rG.uA.NO_COMMITS:return[3,11];case rG.uA.PATH_MATCHED_NO_FILES:return[3,12];case rG.uA.USER_NOT_CONFIGURED:return[3,13];case rG.uA.INVALID_REFERENCE:return[3,14];case rG.uA.BRANCH_ALREADY_EXISTS:return[3,15];case rG.uA.MERGE_CONFLICT:return[3,16];case rG.uA.UPSTREAM_NOT_SET:return[3,17];case rG.uA.HEAD_DETACHED:return[3,18];case rG.uA.DIRTY_WORKTREE:return[3,19];case rG.uA.PROTECTED_BRANCH:return[3,20];case rG.uA.PUSH_REJECTED:return[3,21];case rG.uA.REMOTE_ALREADY_EXISTS:return[3,22];case rG.uA.TIMEOUT:return[3,23];case rG.uA.ALREADY_INITIALIZED:return[3,24]}return[3,25];case 1:return n="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,26];case 2:return n="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,26];case 3:return n="The command was interrupted. Please try again.",r=null,[3,26];case 4:return n="There isn't a Git repository in the Repl's root directory.",r=null,[3,26];case 5:return[4,e.getRemotes()];case 6:if((i=p.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,s=void 0;try{for(c=i.remotes.values()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)if(d=u.value,dk(d)){o=!0;break}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(o){if(dA(e))return n="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,f.Y)(dx,{label:"Update GitHub Repository Access",callback:t.dismiss,allowReconnect:!0}),[3,26];return n="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,f.Y)(dx,{label:"Connect to GitHub",callback:t.dismiss,allowReconnect:!0}),[3,26]}}return n="Failed to authenticate with the remote.",r=null,[3,26];case 7:return n="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,26];case 8:return n="The remote specified isn't configured.",r=null,[3,26];case 9:return n="Remote ref of current branch is missing, publish your branch or restore the remote branch",r=null,[3,26];case 10:return n="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,26];case 11:return n="There are no commits in the repository.",r=null,[3,26];case 12:return n="The path specified didn't match any files.",r=null,[3,26];case 13:return n="There isn't any user information configured for Git.",r=null,[3,26];case 14:return n="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,26];case 15:return n="The branch specified already exists.",r=null,[3,26];case 16:return n="There was an unexpected merge conflict.",r=null,[3,26];case 17:return n="The upstream branch isn't set.",r=null,[3,26];case 18:return n="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,26];case 19:return n="There are uncommitted changes.",r=null,[3,26];case 20:return n="This operation cannot be performed on a protected branch.",r=null,[3,26];case 21:return n="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,26];case 22:return n="The remote specified already exists.",r=null,[3,26];case 23:return n="The remote operation timed out.",r=null,[3,26];case 24:return n="There is already a Git repository in the Repl's root directory.",r=null,[3,26];case 25:return n="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,26];case 26:return[2,{description:n,remedies:r,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t],{refresh:!1});if(!r)return(0,f.Y)(dT,{description:null,remedies:null,error:t});if(r.error)return(0,f.Y)(dT,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:t});var i=r.description,o=r.remedies;return(0,f.Y)(dT,{description:i,remedies:o,error:t})}var dL=(0,z.x)({errorNotification:[{pointerEvents:"all"},W.wp.p(1),W.wp.backgroundColor.accentNegativeDimmer,W.wp.borderRadius(8),W.wp.shadow(3)],header:[W.wp.py(4),W.wp.px(8),W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.justify.spaceBetween,W.wp.color.accentNegativeStrongest],errorType:[W.wp.font.code,{opacity:.75}],body:[W.wp.pt(4),W.wp.pb(8),W.wp.px(8),W.wp.colWithGap(8),W.wp.backgroundColor.backgroundHigher,W.wp.borderRadius(0,0,8,8)]});function dU(e){var n=e.error;return(0,f.FD)(L.S,{css:dL.errorNotification,children:[(0,f.FD)(L.S,{css:dL.header,children:[(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(oK.A,{}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case rG.uA.UNKNOWN_NOT_GIT:return"Unknown Error";case rG.uA.UNKNOWN:return"Unknown Git Error";case rG.uA.NOT_INITIALIZED:case rG.uA.UNAUTHENTICATED:case rG.uA.INDEX_FILE_CORRUPT:case rG.uA.UNKNOWN_REMOTE:case rG.uA.UNKNOWN_REF:case rG.uA.INDEX_LOCKED:case rG.uA.NO_COMMITS:case rG.uA.PATH_MATCHED_NO_FILES:case rG.uA.USER_NOT_CONFIGURED:case rG.uA.INVALID_REFERENCE:case rG.uA.BRANCH_ALREADY_EXISTS:case rG.uA.MERGE_CONFLICT:case rG.uA.HEAD_DETACHED:case rG.uA.DIRTY_WORKTREE:case rG.uA.PUSH_REJECTED:case rG.uA.PROTECTED_BRANCH:case rG.uA.REMOTE_ALREADY_EXISTS:case rG.uA.ALREADY_INITIALIZED:case rG.uA.TIMEOUT:return"Git Error";default:return"Unknown Error"}}(n)})]}),(0,f.Y)(P.EY,{css:dL.errorType,multiline:!1,children:n.type})]}),(0,f.Y)(L.S,{css:dL.body,children:(0,f.Y)(dP,{error:n})})]})}var dN=(0,z.x)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},W.wp.position.absolute,W.wp.top(0),W.wp.bottom(0),W.wp.left(0),W.wp.right(0),W.wp.p(8),W.wp.colWithGap(16),W.wp.zIndex(10)]});function dO(){var e=(0,eW.md)(dh,{store:dp()});return(0,f.Y)(L.S,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:dN.errorList,children:e.map(function(e){return(0,f.Y)(dU,{error:e},e.id)})})}function dM(){var e,n,t,r,i,o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,k.A)().git,c=(n=(e=(0,v._)((0,w.useState)(!1),2))[0],t=e[1],r=(0,k.A)().git,(0,w.useEffect)(function(){return r.onBusyChange(t)},[r]),n),u=dm(),d=(0,rV.A)((i=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((n=r.sent()).error)return u(n.error),[2,n];if(!n.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((t=r.sent()).error)return u(t.error),[2,t];return[2,{hasRemotes:t.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var p=!!d&&d.hasRemotes,h=c||a||null===d;function m(){return(m=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(s.isBusy()||h)return[2];if(l(!0),!p)return[3,2];return[4,s.fetch()];case 1:(e=n.sent()).error?u(e.error):dg("remote-fetched"),n.label=2;case 2:return[4,s.refreshProfiles()];case 3:return n.sent(),s.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,f.Y)(eY.K0,{alt:p?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return m.apply(this,arguments)},disabled:h,children:h?(0,f.Y)(tr.A,{}):(0,f.Y)(oj.A,{})})}var dB=t(86846),dH=t(43751);function dz(){var e=(0,et._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return dz=function(){return e},e}var dW={},dG=(0,er.J1)(dz()),dV=t(54548),dj=t(56948),dZ=t(81243),dq=t(91297),dK=(0,z.x)({gitUserContainer:[W.wp.flex.row],gitUserInnerContainer:[W.wp.align.center,W.wp.flex.row,{"& > :not(:first-child)":{marginLeft:eZ.LU.space4}}],gitUserInnerContainerFlipped:[W.wp.align.center,W.wp.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:eZ.LU.space4}}],alignCenter:[W.wp.align.center]});function d$(e){var n=e.name,t=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,s=void 0!==l&&l,c=e.flip,u=void 0!==c&&c,d=e.placement,p=e.showTooltip;return void 0===p||p?(0,f.Y)(L.S,{css:dK.gitUserContainer,children:(0,f.Y)(rd.m_,{placement:void 0===d?"bottom":d,tooltip:(0,f.Y)(P.EY,{children:t}),children:(0,f.FD)(L.S,{css:u?dK.gitUserInnerContainerFlipped:dK.gitUserInnerContainer,children:[(0,f.Y)(dJ,{email:t,name:n,enablePlaceholder:i,small:s}),(0,f.Y)(P.EY,{multiline:!1,color:a,variant:s?"small":"text",children:n})]})})}):(0,f.Y)(L.S,{css:dK.gitUserContainer,children:(0,f.FD)(L.S,{css:u?dK.gitUserInnerContainerFlipped:dK.gitUserInnerContainer,children:[(0,f.Y)(dJ,{email:t,name:n,enablePlaceholder:i,small:s}),(0,f.Y)(P.EY,{multiline:!1,color:a,variant:s?"small":"text",children:n})]})})}function dJ(e){var n,t,r=e.name,i=e.email,o=e.enablePlaceholder,a=void 0!==o&&o,l=e.small,s=void 0!==l&&l,c=(0,v._)((n={initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1},t=(0,en._)({},dW,n),dH._(dG,t)),1)[0],u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1];return(0,w.useEffect)(function(){var e;(e=(0,y._)(function(){var e,n,t,r,o,a,l,s,u,d;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(!i.endsWith("@".concat(dj.D)))return[3,1];return e=i.split("@")[0],(n=(0,v._)(e.split("+"),2))[0],t=n[1],p((0,dV.d3)("https://github.com/".concat(t,".png"))),[3,4];case 1:if(!i.endsWith("@".concat(dj.O)))return[3,3];return a=i.split("@")[0],(l=(0,v._)(a.split("-"),2))[0],[4,c({variables:{username:l[1]}})];case 2:return(s=null===(o=f.sent().data)||void 0===o?void 0:null===(r=o.userByUsername)||void 0===r?void 0:r.image)&&p(s),[3,4];case 3:u=(0,dB.Fx)(i),(d=new URL("https://gravatar.com/avatar/".concat(u))).searchParams.append("d","404"),p(d.toString()),f.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[i,c]),(0,w.useMemo)(function(){var e=s?12:16;return null===d?a?(0,f.Y)(dq.A,{css:dK.alignCenter,size:e}):null:(0,f.Y)(dZ.e,{css:dK.alignCenter,username:r,src:d,onError:function(){return p(null)},size:e})},[d,a,s,r])}var dQ=t(69929),dX=L.D.button,d0=(0,z.x)({fullWidth:[W.wp.width("100%")],searchContainer:[W.wp.p(8)],paddedX:[W.wp.px(8)],loadingContainer:[W.wp.display.flex,W.wp.align.center,W.wp.justify.center,W.wp.py(48)],menu:[W.wp.maxWidth(390),W.wp.width(280),W.wp.display.flex,W.wp.flex.shrink(1),W.wp.maxHeight(640),W.wp.borderRadius(8),W.wp.overflow("hidden")],form:[W.wp.display.flex,W.wp.flex.growAndShrink(1),W.wp.flex.column,W.wp.overflow("hidden")],body:[W.wp.py(8),W.wp.colWithGap(8),W.wp.flex.growAndShrink(1),W.wp.overflow("auto")],branchMetadata:[W.wp.flex.shrink(1)],selector:[W.wp.display.flex,W.wp.align.center,W.wp.rowWithGap(4)],menuItem:[{backgroundColor:"inherit"},oP.b.listItem,W.wp.px(8),W.wp.py(4),W.wp.borderRadius(0),W.wp.align.start],inputDisabled:[{opacity:.75}],padded:[W.wp.p(8)],virtualItem:[W.wp.position.absolute,W.wp.top(0),W.wp.left(0),W.wp.width("100%"),W.wp.overflow("hidden")],virtualList:[W.wp.position.relative],divider:[W.wp.mt(8),W.wp.mb(8),W.wp.ml(0),W.wp.mr(0)],errorText:[W.wp.color.accentNegativeStronger,W.wp.mt(4)],createBranchButton:[W.wp.height(32),W.wp.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),d1=function(e,n){var t,r,i,o=dm(),a=(0,k.A)().git,l=(0,v._)((0,w.useState)(!0),2),s=l[0],c=l[1],u=(0,rV.A)((t=(0,y._)(function(e){var n,t,r,i,a,l,s,u,d,p,f,h,m,g,v,w,y,S,Y,A,C;return(0,b.YH)(this,function(b){switch(b.label){case 0:return c(!0),[4,e.isInitialized()];case 1:if((n=b.sent()).error)return o(n.error),c(!1),[2,n];if(!n.initialized)return c(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((t=b.sent()).error)return o(t.error),c(!1),[2,t];return[4,e.findDefaultBranches()];case 3:if((r=b.sent()).error)return o(r.error),c(!1),[2,r];i=t.branches,a=new Set,l=!0,s=!1,u=void 0;try{for(d=function(){var e=f.value,n=i.find(function(n){return(0,rG.CC)(n,e)});n&&a.add(n)},p=r.refs[Symbol.iterator]();!(l=(f=p.next()).done);l=!0)d()}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}h=Date.now()-72e6,m=[],g=[],v=!0,w=!1,y=void 0;try{for(S=i[Symbol.iterator]();!(v=(Y=S.next()).done);v=!0)A=Y.value,a.has(A)||(A.commit.author.date>h?m.push(A):g.push(A))}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}return C=Array.from(a),c(!1),[2,{active:m,stale:g,important:C,error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(r=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(s||(0,rG.CC)(e,n))return[2];return c(!0),[4,a.switchBranch(n)];case 1:return(t=r.sent()).error?(o(t.error),c(!1)):(a.forceRefresh(),dg("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),p=(i=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(s||""===e)return[2];return c(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(n=t.sent()).error?(o(n.error),c(!1)):(a.forceRefresh(),dg("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,w.useEffect)(function(){null!==e&&(c(!1),n({type:lw.C.CURRENT_BRANCH}))},[e,n]),null===u||s)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:null};if(u.error)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:u.error};var f=u.active,h=u.stale,m=u.important;return{loading:s,active:null!=f?f:[],stale:null!=h?h:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:p,error:null}},d2=function(e){var n=e.branch,t=d1(n,e.switchMode),r=t.loading,i=t.active,o=t.important,a=t.stale,l=t.handleSwitchBranch,s=t.handleCreateBranch,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(""),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(!1),2),S=g[0],Y=g[1];return(0,f.Y)(pn,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:n,query:h,setQuery:m,onSwitchBranch:l,createBranchLoading:S,createBranch:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return Y(!0),[4,s(h)];case 1:return e.sent(),m(""),Y(!1),[2]}})}),loading:r})},d5=function(e){var n=e.onClick,t=e.children,r=(0,w.useRef)(null),i=(0,v._)((0,sz.A9)(r,!1),4),o=i[0],a=i[1],l=i[2],s=i[3];return(0,sz.xK)(a,r),(0,f.Y)(dX,{ref:r,role:"menuitem",css:d0.menuItem,onClick:function(e){s(),n(e)},onKeyDown:l,tabIndex:o,children:t})},d4=function(e){var n=e.branch;return(0,f.FD)(L.S,{css:d0.branchMetadata,row:!0,gap:8,align:"center",children:[(0,f.Y)(d$,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,f.Y)(P.EY,{color:"dimmer",variant:"small",children:(0,ev.ie)(n.commit.author.date)})]})},d3=function(e){var n=e.branch,t=e.current,r=e.onSwitchBranch,i=(0,w.useMemo)(function(){return(0,rG.FF)(n,t)},[n,t]);return(0,f.FD)(d5,{onClick:function(){return r(n)},children:[(0,f.Y)(P.EY,{multiline:!1,children:(0,f.Y)(lr.Yi,{name:n.name,remote:n.type===rG.xx.REMOTE?n.remote:null,current:i})}),(0,f.Y)(d4,{branch:n})]})},d8=function(e,n){return n.filter(function(n){return(0,rG.fn)(n).toLowerCase().includes(e.toLowerCase())})},d7=function(e,n,t){var r=0,i=[];if(e.length+n.length+t.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});n.length+t.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<n.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:n[a]});t.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<t.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:t[l]})}return i},d6=function(e){var n=e.item,t=e.current,r=e.onSwitchBranch;return"heading"===n.type?(0,f.Y)(L.S,{css:d0.paddedX,children:(0,f.Y)(P.EY,{multiline:!1,variant:"small",color:"dimmest",css:W.wp.fontWeight.medium,children:n.title})}):"divider"===n.type?(0,f.Y)(L.S,{css:d0.divider,children:(0,f.Y)(lV.a,{})}):(0,f.Y)(L.S,{children:(0,f.Y)(d3,{branch:n.branch,current:t,onSwitchBranch:r})})},d9=function(e){var n=e.items,t=e.current,r=e.onSwitchBranch,i=(0,w.useRef)(null),o=(0,ey.Te)({overscan:10,count:n.length,getScrollElement:function(){return i.current},estimateSize:function(e){var t,r;return null!==(t=void 0===(r=n[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)&&void 0!==t?t:0}});return(0,f.Y)(sz.Se,{options:{direction:"vertical"},children:(0,f.Y)("div",{css:d0.body,ref:i,children:(0,f.Y)("ul",{css:d0.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:d0.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,f.Y)(d6,{item:n[e.index],current:t,onSwitchBranch:r})},e.key.toString())})})})})},pe=function(e){var n=e.query,t=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,s=e.createBranchLoading,c=e.createBranch,u=e.loading,d=(0,w.useMemo)(function(){return d7(r,i,o)},[r,i,o]),p='Create Branch "'.concat(n,'"'),h=(0,w.useMemo)(function(){return(0,ee._)(r).concat((0,ee._)(i),(0,ee._)(o)).some(function(e){return e.name===n})},[n,r,i,o]);return(0,f.Y)(L.S,{css:d0.menu,children:(0,f.Y)("form",{onSubmit:function(e){e.preventDefault(),c()},css:d0.form,children:u?(0,f.Y)(L.S,{css:d0.loadingContainer,children:(0,f.Y)(tr.A,{})}):(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{css:d0.searchContainer,children:(0,f.Y)(dQ.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,f.Y)(L.S,{css:d0.paddedX,children:(0,f.Y)(lV.a,{})}),d.length>0?(0,f.Y)(d9,{items:d,current:a,onSwitchBranch:l}):null,h||""===n?null:(0,f.FD)(L.S,{css:d0.padded,children:[(0,f.Y)(G.$n,{text:p,size:"small",iconLeft:s?(0,f.Y)(tr.A,{}):(0,f.Y)(rm.A,{}),stretch:!0,css:d0.createBranchButton,disabled:s||!(0,rG.eB)(n),type:"submit"}),(0,rG.eB)(n)?null:(0,f.Y)(P.EY,{variant:"small",css:d0.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},pn=function(e){var n=e.isOpen,t=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,s=e.setQuery,c=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,p=e.loading,h=(0,w.useMemo)(function(){return d8(l,r)},[l,r]),m=(0,w.useMemo)(function(){return d8(l,i)},[l,i]),g=(0,w.useMemo)(function(){return d8(l,o)},[l,o]);return(0,f.FD)(aM.Wv,{label:"View Branches",placement:"bottom",isOpen:n,onOpenChange:function(e){t(e)},offset:16,children:[function(e){var t=e.onClick,r=(0,t7._)(e,["onClick"]);return(0,f.Y)(G.$n,{variant:"nofill",text:(0,f.FD)(P.EY,(0,nr._)((0,en._)({multiline:!1,variant:"small",css:d0.selector},r),{children:[(0,f.Y)(lr.Yi,{name:a.name,remote:a.type===rG.xx.REMOTE?a.remote:null,icon:!0}),n?(0,f.Y)(ii.A,{}):(0,f.Y)(ir.A,{})]})),size:"small",stretch:!0,alignment:"start",css:d0.fullWidth,onClick:t})},(0,f.Y)(pe,{query:l,setQuery:s,filteredImportant:h,filteredActive:m,filteredStale:g,current:a,onSwitchBranch:c,createBranchLoading:u,createBranch:d,loading:p})]})},pt=t(89960),pr=(0,z.x)({container:[W.wp.height(36),W.wp.px(8),W.wp.py(4),W.wp.rowWithGap(8),W.wp.backgroundColor.backgroundDefault,W.wp.align.center,W.wp.justify.spaceBetween,W.wp.zIndex(1),{borderBottom:"1px solid ".concat(eZ.LU.outlineDimmer)}],left:[W.wp.rowWithGap(4),W.wp.align.center,W.wp.flex.growAndShrink(1)],right:[W.wp.rowWithGap(8),W.wp.align.center],back:{marginLeft:-4}}),pi=function(e){var n=e.openSettings;return(0,f.FD)(L.S,{css:pr.container,children:[(0,f.FD)(L.S,{css:pr.left,children:[(0,f.Y)(pt.A,{size:16}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,f.FD)(L.S,{css:pr.right,children:[(0,f.Y)(pd,{openSettings:n}),(0,f.Y)(dM,{})]})]})},po=function(e){var n=e.branch,t=e.switchMode,r=e.openSettings;return(0,f.FD)(L.S,{css:pr.container,children:[(0,f.Y)(L.S,{css:pr.left,children:(0,f.Y)(d2,{branch:n,switchMode:t})}),(0,f.FD)(L.S,{css:pr.right,children:[(0,f.Y)(pd,{openSettings:r}),(0,f.Y)(dM,{})]})]})},pa=function(e){var n=e.onBack;return(0,f.FD)(L.S,{css:pr.container,children:[(0,f.FD)(L.S,{css:pr.left,children:[(0,f.Y)(pc,{onBack:n,alt:"Back"}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,f.Y)(L.S,{css:pr.right})]})},pl=function(e){var n=e.switchMode,t=e.openSettings;return(0,f.FD)(L.S,{css:pr.container,children:[(0,f.FD)(L.S,{css:pr.left,children:[(0,f.Y)(pu,{switchMode:n}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,f.FD)(L.S,{css:pr.right,children:[(0,f.Y)(pd,{openSettings:t}),(0,f.Y)(dM,{})]})]})};function ps(e){var n=e.mode,t=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({type:lw.C.SETTINGS})};switch(n){case lw.C.DASHBOARD:return(0,f.Y)(pi,{openSettings:o});case lw.C.BRANCH:case lw.C.CURRENT_BRANCH:if(null===t)throw Error("Tried to show branch in header, but branch is null");return(0,f.Y)(po,{branch:t,switchMode:r,openSettings:o});case lw.C.SETTINGS:return(0,f.Y)(pa,{onBack:i});case lw.C.COMMIT:return(0,f.Y)(pl,{switchMode:r,openSettings:o});default:return(0,f.FD)(L.S,{css:pr.container,children:[(0,f.Y)(L.S,{css:pr.left}),(0,f.Y)(L.S,{css:pr.right})]})}}function pc(e){var n=e.onBack,t=e.alt;return(0,f.Y)(eY.K0,{css:pr.back,alt:t,size:28,onClick:n,children:(0,f.Y)(sF.A,{})})}function pu(e){var n=e.switchMode;return(0,f.Y)(pc,{css:pr.back,onBack:function(){return n({type:lw.C.CURRENT_BRANCH})},alt:"Back to current branch"})}function pd(e){var n=e.openSettings;return(0,f.Y)(eY.K0,{alt:"Settings",size:24,onClick:n,children:(0,f.Y)(af.A,{})})}function pp(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,f.Y)(P.EY,{multiline:!1,children:"Please finish the patch manually."})]})}function pf(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,f.Y)(P.EY,{multiline:!1,children:"Please finish the bisect manually."})]})}function ph(){var e=(0,et._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return ph=function(){return e},e}var pm={},pg=(0,er.J1)(ph()),pv=function(e){return"repl-".concat(e)},pw=function(e){var n=e.replId,t=e.branch;return"repl-".concat(n,"/").concat(t)},py=function(){var e=(0,y._)(function(e){var n,t,r,i,o,a,l,s;return(0,b.YH)(this,function(c){switch(c.label){case 0:return n=e.git,r=pv(t=e.replId),i="".concat(t,"@ssh.v1.replit.dev:."),[4,n.getRemotes()];case 1:if((o=c.sent()).error)return[2,o];if(!o.remotes.has(r))return[3,4];if(!((null===(a=o.remotes.get(r))||void 0===a?void 0:a.fetch)!==i))return[3,3];return[4,n.setRemoteURL({remote:r,url:i})];case 2:if((l=c.sent()).error)return[2,l];c.label=3;case 3:return[2,{error:null,remote:{name:r,url:i}}];case 4:return[4,n.addRemote({name:r,url:i,fetch:!0})];case 5:if((s=c.sent()).error&&s.error!==rG.uA.REMOTE_ALREADY_EXISTS)return[2,s];return[2,{error:null,remote:{name:r,url:i}}]}})});return function(n){return e.apply(this,arguments)}}(),pb=t(85670),pS=(0,z.x)({statusText:[W.wp.display.flex,W.wp.flex.row,W.wp.textAlign.left],settingsButton:[W.wp.reset.button,W.wp.linkStyle,W.wp.fontWeight.medium,W.wp.textAlign.left,W.wp.ml(4)]}),pY=function(e){var n=e.onViewSettingsClick;return(0,f.Y)("button",{css:pS.settingsButton,onClick:n,children:"Settings view."})};function pA(e){var n,t,r,i,o,a,l=e.branch,s=e.onViewSettingsClick,c=e.performPaneOperation,u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(null),2),Y=S[0],A=S[1],C=(0,v._)((0,w.useState)(!1),2),x=C[0],D=C[1],E=(n={variables:{id:(0,_.A)()}},t=(0,en._)({},pm,n),ei.I(pg,t)).data,R=(null==E?void 0:null===(i=E.repl)||void 0===i?void 0:i.__typename)==="Repl"&&(null===(o=E.repl.project)||void 0===o?void 0:o.id)||!1,I=dm(),F=(0,k.A)().git,T=(0,rV.A)((r=(0,y._)(function(e){var n,t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,e.isInitialized()];case 1:if((n=s.sent()).error)return I(n.error),rZ({context:"publish-branch-button-initialized",gitService:e,result:n}),[2,{remote:null,error:n.error}];if(!n.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((t=s.sent()).error)return rZ({context:"publish-branch-button-get-remotes",gitService:e,result:t}),I(t.error),[2,t];return r=function(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,v._)(i.value,2),l=a[0];if(!({url:a[1].fetch}).url.endsWith(".replit.dev:."))return l}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}(t.remotes),[4,e.status()];case 3:if((i=s.sent()).error)return I(i.error),rZ({context:"publish-branch-button-status",gitService:e,result:i}),[2,i];if(!(i.branch&&r))return[3,5];return o=(0,rG.w9)(i.branch),a="refs/remotes/".concat(r,"/").concat(o),[4,e.branchExists(a)];case 4:(l=s.sent()).error?(rZ({context:"publish-branch-button-branch-exists",gitService:e,result:l,data:{upstream:o,fullRemoteRef:a}}),I(l.error)):l.exists&&A("".concat(r,"/").concat(o)),s.label=5;case 5:return[2,{remote:r,error:null}]}})}),function(e){return r.apply(this,arguments)}),[I],{keepStaleResult:!1});if((0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(x&&Y))return[3,2];return[4,F.setBranchUpstream({upstream:Y})];case 1:(e=n.sent()).error&&(rZ({context:"publish-branch-button-set-branch-upstream",gitService:F,result:e,data:{upstream:Y}}),I(e.error)),D(!1),A(null),n.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[F,I,x,Y]),null==T?void 0:T.error)return null;var U=T?T.remote:null,N=null===T,O=l.type!==rG.xx.LOCAL||!U||x;function M(){return(M=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!U||d)return[2];if(Y)return g(!0),[2];return p(!0),[4,F.push({publish:{remote:U}})];case 1:return(e=n.sent()).error?(p(!1),I(e.error),rZ({context:"publish-branch-button-push",gitService:F,result:e,data:{remote:U}})):(F.forceRefresh(),dg("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var B="".concat(U,"/").concat(l.name);return(a=d?"Pushing to '".concat(B,"'..."):l.type!==rG.xx.LOCAL?"Branch has already been pushed to '".concat(B,"'"):N?"Checking if branch ".concat(l.name," can be pushed..."):U?"Push branch as '".concat(B,"'"):"No remotes to push to",R&&T&&!U)?(0,f.FD)(f.FK,{children:[(0,f.Y)(G.$n,{iconLeft:(0,f.Y)(oL.a,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){c({operation:"open",pane:{type:"project"}})},iconRight:(0,f.Y)(o8.A,{})}),(0,f.Y)(P.EY,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,f.FD)(f.FK,{children:[Y?(0,f.Y)(la.a,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,f.FD)(L.S,{gap:24,children:[(0,f.Y)(P.EY,{variant:"headerDefault",children:"Branch already exists"}),(0,f.Y)(P.EY,{children:"Upstream branch '".concat(Y,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,f.Y)(G.$n,{text:"Set upstream to '".concat(Y,"'"),onClick:function(){Y&&(D(!0),g(!1))}})]})}):null,N||U?null:(0,f.Y)(tK.N,{text:(0,f.Y)(L.S,{css:pS.statusText,children:(0,f.FD)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,f.Y)(pY,{onViewSettingsClick:s})]})}),colorway:"warning",closable:!1}),(0,f.Y)(G.$n,{text:a,iconLeft:N||d?(0,f.Y)(tr.A,{}):(0,f.Y)(pb.A,{}),onClick:function(){return M.apply(this,arguments)},loading:N||d,disabled:O})]})}var pC=function(e,n,t){var r=new Set,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r.add(c.hash)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;r.add(m.hash)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return e.filter(function(e){return!r.has(e.hash)})},px=t(54545),p_=t(90857),pk=t(74495),pD=t(75820),pE=t(74893),pR=t(8473),pI={height:32,width:"100%",resize:"none",border:"none"},pF={width:"100%",resize:"none",border:"none"},pT=(0,z.x)({surface:[W.wp.p(8),W.wp.colWithGap(12),W.wp.borderRadius(0,0,8,8)],button:[W.wp.height("auto"),W.wp.py(8),W.wp.fontWeight.medium,W.wp.borderRadius(8,8,0,0),W.wp.justify.start,W.wp.border({color:eZ.LU.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[W.wp.display.inlineFlex,W.wp.rowWithGap(4)],subjectFieldHeader:[W.wp.center,W.wp.justify.spaceBetween],subjectInput:pI,bodyInput:pF,subjectInputDisabled:[pI,{opacity:.5}],bodyInputDisabled:[pF,{opacity:.5}],required:[W.wp.color.accentNegativeStronger],keyCombo:[W.wp.display.inlineFlex,W.wp.rowWithGap(4),W.wp.flex.grow(1),W.wp.align.center],keyComboText:[W.wp.fontWeight.normal,W.wp.color.foregroundDimmest]});function pP(e){var n=e.message,t=e.disabled,r=void 0!==t&&t,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,v._)((0,w.useState)(!0),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,w.useRef)(null),y=(0,w.useRef)(null),b=(0,tp._)(n.split("\n\n")),S=b[0],Y=void 0===S?"":S,A=b.slice(1).join("\n\n"),C=(0,cz.a)();function x(e,n){i((e=e.replaceAll("\n"," "))+(n?"\n\n"+n:""))}var _=(0,pk.Jn)(p_.Pi.gitCommit.id);return(0,pD.RD)(p_.cl,h),(0,pk.SJ)(function(){return[p_.Pi.gitCommit.id,{run:function(){null==o||o()},scope:p_.cl,bubble:!1}]},[o]),(0,f.FD)(L.S,{children:[(0,f.Y)(G.$n,{css:pT.button,text:(0,f.FD)("span",{css:pT.requiredText,children:[(0,f.Y)("span",{children:"Message"}),l?(0,f.Y)(pN,{}):null]}),secondaryText:C||!_?void 0:(0,f.FD)("span",{css:pT.keyCombo,children:[(0,f.Y)("span",{css:pT.keyComboText,children:"Commit:"}),(0,f.Y)(pk._y,{keyCombo:_,small:!0})]}),iconRight:l?(0,f.Y)(ir.A,{}):(0,f.Y)(ii.A,{}),onClick:function(){return s(function(e){return!e})},size:"small"}),(0,f.FD)(ed.ui,{css:pT.surface,elevated:!0,children:[(0,f.Y)(pL,{ref:g,value:Y,compact:l,disabled:r,onChange:function(e){x(e,A)},onNewline:function(){if(l)s(!1),d(!0);else{if(!y.current)return;y.current.focus(),y.current.setSelectionRange(0,0)}},onFocus:function(){m(!0)},onBlur:function(){m(!1)}}),l&&!A?null:(0,f.Y)(pU,{ref:y,value:A,compact:l,disabled:r,onChange:function(e){if(x(Y,e),l&&!e){var n;null===(n=g.current)||void 0===n||n.focus()}else l&&s(!1)},onBackspaceWhenEmpty:function(){g.current&&g.current.focus()},onFocus:function(){u&&d(!1),m(!0)},onBlur:function(){m(!1)},autoFocus:u})]})]})}var pL=(0,w.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,s=e.onNewline,c=e.onFocus,u=e.onBlur,d=(0,Y.Gk)(),p=(0,k.A)().container,h=(0,Y.a0)({onResponse:function(e){var n;null==l||l(e||""),null===(n=v.current)||void 0===n||n.focus()}}),m=h.sendMessage,g=h.loading,v=(0,w.useRef)(null),S=(0,px.A)().ref;function A(){return(A=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,p.exec("git","diff")];case 1:return[2,e.sent().output||""]}})})).apply(this,arguments)}function C(){return(C=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!d)return[2];return[4,function(){return A.apply(this,arguments)}()];case 1:return e=n.sent(),m("You are a helpful robot that conducts code reviews","Based on this diff: ".concat(e," can you write a helpful summary of changes in this commit? Only write two sentences.")),[2]}})})).apply(this,arguments)}return(0,f.FD)(L.S,{gap:8,children:[i?null:(0,f.FD)(L.S,{css:pT.subjectFieldHeader,row:!0,children:[(0,f.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:(0,f.FD)("span",{css:pT.requiredText,children:[(0,f.Y)("span",{children:"Summary"}),(0,f.Y)(pN,{})]})}),(0,f.Y)(pE.K,{iconLeft:g?(0,f.Y)(tr.A,{}):(0,f.Y)(pR.A,{}),text:"Summarize with AI",onClick:function(){return C.apply(this,arguments)}})]}),(0,f.Y)(eA.ov,{ref:i?n:(0,c9.P)(n,S,v,{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:322"}),css:a?pT.subjectInputDisabled:pT.subjectInput,placeholder:"Summary of your commit...",value:t,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:c,onBlur:u})]})}),pU=(0,w.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,s=e.onChange,c=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,p=(0,px.A)().ref;return(0,f.FD)(L.S,{gap:8,children:[i?null:(0,f.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,f.Y)(eA.ov,{ref:i?n:(0,c9.P)(n,p,{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:385"}),css:a?pT.bodyInputDisabled:pT.bodyInput,placeholder:"Description of your commit...",value:t,disabled:a,onChange:function(e){return null==s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===t&&(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function pN(){return(0,f.Y)(rd.m_,{tooltip:"This field is required.",placement:"top",children:(0,f.Y)("span",{css:pT.required,children:"*"})})}var pO=t(10997),pM=t(55337),pB=(0,z.x)({actionsIndex:[W.wp.height(24),W.wp.align.center,W.wp.borderRadius(4)],actionsWorktree:[W.wp.height(24),W.wp.flex.row,W.wp.align.center,W.wp.borderRadius(4)],unstage:[W.wp.height(24),W.wp.width(24),W.wp.borderRadius(2)],stage:[W.wp.px(12),W.wp.height(24),W.wp.width(24),W.wp.borderRadius(2)],discard:[W.wp.pl(16),W.wp.pr(12),W.wp.height(24),W.wp.width(24),W.wp.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[W.wp.height("75%"),W.wp.width(1),W.wp.backgroundColor.outlineStronger]});function pH(e){var n=e.file,t=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1];function h(){return(h=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({reset:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({add:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function g(){return(g=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==t)return[2];return p(!0),[4,i(n.path)];case 1:return e.sent(),p(!1),[2]}})})).apply(this,arguments)}return a=a||d||s,"index"===t?(0,f.Y)(ed.ui,{elevated:!0,css:pB.actionsIndex,children:(0,f.Y)(eY.K0,{css:pB.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(tr.A,{}):(0,f.Y)(pM.A,{})})}):(0,f.FD)(ed.ui,{elevated:!0,css:pB.actionsWorktree,children:[(0,f.Y)(eY.K0,{css:pB.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:a,children:d?(0,f.Y)(tr.A,{}):(0,f.Y)(oU.A,{css:pB.discardIcon})}),(0,f.Y)("div",{css:pB.divider}),(0,f.Y)(eY.K0,{css:pB.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(tr.A,{}):(0,f.Y)(rm.A,{})})]})}var pz=(0,z.x)({modifiedFile:[W.wp.py(2),W.wp.rowWithGap(4),W.wp.align.center]});function pW(e){var n,t=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,s=e.onFilePathClick,c=null==a?void 0:a.get(t.path),u=null===(n=t.source)||void 0===n?void 0:n.path,d="index"===r?t.type.index:t.type.worktree,p=(0,td.A)(function(){if(d!==rG.PX.DELETED)return function(){return s({path:t.path})}},[t.path,s,d]);return(0,f.FD)(L.S,{css:pz.modifiedFile,children:[(0,f.Y)(lo,{path:t.path,prefix:c,source:u,onClick:p}),(0,f.Y)(r6,{type:d}),(0,f.Y)(pH,{file:t,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var pG=(0,z.x)({actions:[W.wp.backgroundColor.backgroundHighest,W.wp.borderRadius(8)],buttonDiscard:[W.wp.borderRadius(8,0,0,8)],buttonStage:[W.wp.borderRadius(0,8,8,0)],divider:[W.wp.my(8),W.wp.width(1),W.wp.backgroundColor.outlineStronger]});function pV(e){var n=e.type,t=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];function p(){return h.apply(this,arguments)}function h(){return(h=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o)return[2];return s(!0),[4,t({all:"index"!==n})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==n)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===n?(0,f.Y)(G.$n,{text:"Unstage All",iconLeft:l?(0,f.Y)(tr.A,{}):(0,f.Y)(pM.A,{}),onClick:p,disabled:o,loading:l,size:"small"}):(0,f.FD)(L.S,{css:pG.actions,row:!0,gap:2,children:[(0,f.Y)(G.$n,{css:pG.buttonDiscard,text:"Discard All",iconLeft:u?(0,f.Y)(tr.A,{}):(0,f.Y)(oU.A,{}),onClick:function(){return m.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,f.Y)("div",{css:pG.divider}),(0,f.Y)(G.$n,{css:pG.buttonStage,text:"Stage All",iconLeft:l?(0,f.Y)(tr.A,{}):(0,f.Y)(rm.A,{}),onClick:p,disabled:o,loading:l,size:"small"})]})}var pj=(0,z.x)({list:[W.wp.pt(4),W.wp.pb(8),W.wp.colWithGap(4)],listFolded:[W.wp.py(4)],header:[W.wp.px(8),W.wp.rowWithGap(4),W.wp.align.center],headerFoldable:[W.wp.py(4),W.wp.pl(4),W.wp.pr(8),W.wp.rowWithGap(4),W.wp.align.center],headerText:[W.wp.flex.grow(1)],body:[W.wp.px(8),W.wp.maxHeight("25vh"),W.wp.overflowY("auto")]});function pZ(e){var n,t=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,s=e.foldable,c=void 0!==s&&s,u=e.disabled,d=void 0!==u&&u,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,w.useRef)(null),y=(0,w.useRef)(null),b=(0,ey.Te)({count:t.length,getScrollElement:function(){return y.current},getItemKey:function(e){return t[e].path},estimateSize:function(){return 28},overscan:20}),S=b.getVirtualItems();return c&&h?(0,f.Y)(L.S,{css:pj.listFolded,children:(0,f.FD)(L.S,{css:c?pj.headerFoldable:pj.header,children:[(0,f.Y)(pq,{files:t,type:r,setFolded:m,foldable:!0,folded:!0}),(0,f.Y)(pV,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,f.FD)(L.S,{innerRef:g,css:pj.list,children:[(0,f.FD)(L.S,{css:c?pj.headerFoldable:pj.header,children:[(0,f.Y)(pq,{files:t,type:r,setFolded:m,foldable:c}),(0,f.Y)(pV,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,f.Y)(L.D.div,{ref:y,css:pj.body,children:(0,f.Y)("div",{style:{minHeight:b.getTotalSize()},children:(0,f.Y)("div",{style:{transform:"translateY(".concat(null===(n=S[0])||void 0===n?void 0:n.start,"px)"),willChange:"transform"},children:S.map(function(e){var n=t[e.index];return(0,f.Y)("div",{"data-index":e.index,children:(0,f.Y)(pW,{file:n,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},n.path)},e.key.toString())})})})})]})}function pq(e){var n=e.files,t=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,tN.A)("file",n.length),s="".concat(n.length," ").concat("index"===t?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,f.FD)(f.FK,{children:[(0,f.Y)(eY.K0,{alt:"Show list",onClick:function(){return r(!1)},children:(0,f.Y)(ir.A,{})}),(0,f.Y)(P.EY,{css:pj.headerText,multiline:!1,children:s})]}):(0,f.FD)(f.FK,{children:[o?(0,f.Y)(eY.K0,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,f.Y)(ii.A,{color:eZ.LU.foregroundDimmest})}):null,(0,f.Y)(P.EY,{css:pj.headerText,color:"dimmest",multiline:!1,children:s})]})}var pK=(0,z.x)({list:[W.wp.px(4),W.wp.colWithGap(2)]});function p$(e){var n=e.show,t=e.files,r=e.pathMap,i=e.callback,o=(0,e1.A)(i),a=(0,w.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!0)},[o]),l=(0,w.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!1)},[o]);return(0,f.Y)(la.a,{isOpen:n,onRequestClose:l,children:n?(0,f.FD)(L.S,{gap:8,children:[(0,f.FD)(P.Y9,{level:2,children:["Discard ",(0,tN.A)("Change",t.length)]}),(0,f.Y)(pJ,{files:t,pathMap:r}),(0,f.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(G.$n,{text:"Cancel",iconLeft:(0,f.Y)(ll.A,{}),onClick:l}),(0,f.Y)(G.$n,{text:"Discard ".concat((0,tN.A)("Change",t.length)),iconLeft:(0,f.Y)(oU.A,{}),colorway:"negative",onClick:a})]})]}):null})}function pJ(e){var n=e.files,t=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.type.worktree===rG.PX.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(P.EY,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,f.Y)(pQ,{files:i,pathMap:t})]}):r.length&&!i.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(P.EY,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,f.Y)(pQ,{files:r,pathMap:t})]}):(0,f.FD)(L.S,{gap:12,children:[r.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(P.Y9,{level:3,children:["Tracked ",(0,tN.A)("File",r.length)]}),(0,f.Y)(P.EY,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,f.Y)(pQ,{files:r,pathMap:t})]}):null,i.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(P.Y9,{level:3,children:["Untracked ",(0,tN.A)("File",i.length)]}),(0,f.Y)(P.EY,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,f.Y)(pQ,{files:i,pathMap:t})]}):null]})}function pQ(e){var n=e.files,t=e.pathMap,r=(0,w.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(L.S,{children:(0,f.FD)("ul",{css:pK.list,children:[r.map(function(e){var n;return(0,f.Y)("li",{children:(0,f.Y)(lo,{path:e.path,prefix:t.get(e.path),source:null===(n=e.source)||void 0===n?void 0:n.path})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(P.EY,{color:"dimmer",children:["... ",n.length-20," more"," ",(0,tN.A)("file",n.length-20)]})})]})})}function pX(e){var n=(0,v._)((0,w.useState)(function(){return{show:!1,files:[]}}),2),t=n[0],r=n[1];return{openRestoreConfirmationModal:(0,w.useCallback)(function(e){return new Promise(function(n){0===e.length&&n(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),n(e)}})})},[]),restoreConfirmationModal:(0,w.useMemo)(function(){return(0,f.Y)(p$,(0,nr._)((0,en._)({},t),{pathMap:e}))},[t,e])}}var p0=[{"& > span:first-child":[W.wp.flex.grow(1),W.wp.textAlign.left]},{"& > span":[W.wp.flex.shrink(1)]}],p1=(0,z.x)({buttonFolded:[p0,W.wp.height("auto"),W.wp.py(8),W.wp.fontWeight.medium],buttonUnfolded:[p0,W.wp.height("auto"),W.wp.py(8),W.wp.fontWeight.medium,W.wp.border({color:eZ.LU.outlineDimmer,direction:"bottom"}),W.wp.borderRadius(8,8,0,0)],container:[W.wp.flex.grow(1),W.wp.borderRadius(8)],lists:[W.wp.borderRadius(0,0,8,8)],divider:[W.wp.height(1),W.wp.minHeight(1),W.wp.width("100%"),W.wp.backgroundColor.outlineDimmer],autoStageMessage:[W.wp.pt(4),W.wp.pb(8),W.wp.px(4),W.wp.center],noChangesMessage:[W.wp.py(16),W.wp.px(4),W.wp.center],details:[W.wp.rowWithGap(4),W.wp.fontWeight.normal,W.wp.color.foregroundDimmest]});function p2(e){var n,t,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,s=void 0!==l&&l,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(!1),2),S=g[0],Y=g[1],A=(0,w.useMemo)(function(){return(0,pO.b)(r.changes.map(function(e){return e.path}))},[r]),C=(0,v._)((0,w.useMemo)(function(){var e=[],n=[],t=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;s.staged&&e.push(s),s.type.worktree!==rG.PX.UNMODIFIED&&n.push(s)}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return[e,n]},[r.changes]),2),x=C[0],_=C[1],k=x.length>0&&_.length>0,D=pX(A),E=D.openRestoreConfirmationModal,R=D.restoreConfirmationModal,I=(0,w.useCallback)((n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("all"in e))return[3,2];return m(!0),[4,i(e)];case 1:return n.sent(),m(!1),[3,4];case 2:return[4,i(e)];case 3:n.sent(),n.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[i]),F=(0,w.useCallback)((t=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return Y(!0),[4,E(_)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return Y(!1),[3,8];case 4:if("string"==typeof e){if(!(t=_.find(function(n){return n.path===e})))throw Y(!1),Error("Could not find file in worktree list");n=[t]}else n=_.filter(function(n){return e.includes(n.path)});return[4,E(n)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:Y(!1),r.label=8;case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),[E,o,_]);return u?(0,f.Y)(p5,{setFolded:d,changeCount:_.length,stagedCount:x.length,disabled:s,folded:!0}):0===x.length&&0===_.length?(0,f.FD)(L.S,{style:{opacity:s?.725:void 0},css:p1.container,children:[(0,f.Y)(p5,{setFolded:d,changeCount:_.length,stagedCount:x.length,disabled:s}),(0,f.Y)(ed.ui,{css:p1.lists,elevated:!0,children:(0,f.Y)(L.S,{css:p1.noChangesMessage,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(L.S,{style:{opacity:s?.725:void 0},css:p1.container,children:[(0,f.Y)(p5,{setFolded:d,changeCount:_.length,stagedCount:x.length,disabled:s}),(0,f.FD)(ed.ui,{css:p1.lists,elevated:!0,children:[0===x.length?null:(0,f.Y)(pZ,{type:"index",files:x,stageFiles:I,restoreFiles:F,onFilePathClick:a,pathMap:A,foldable:k,disabled:s||h||S}),k?(0,f.Y)("div",{css:p1.divider}):null,0===_.length?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(pZ,{type:"worktree",files:_,stageFiles:I,restoreFiles:F,onFilePathClick:a,pathMap:A,foldable:k,disabled:s||h||S}),k?null:(0,f.Y)(L.S,{css:p1.autoStageMessage,children:(0,f.Y)(P.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),R]})}function p5(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,f.Y)(G.$n,{css:t?p1.buttonFolded:p1.buttonUnfolded,text:"Review Changes",secondaryText:(0,f.Y)(p4,{folded:t,changeCount:i,stagedCount:o}),onClick:function(){return r(!t)},iconRight:t?(0,f.Y)(ir.A,{}):(0,f.Y)(ii.A,{}),disabled:void 0!==a&&a,size:"small"})}function p4(e){var n=e.folded,t=e.changeCount,r=e.stagedCount;if(!n)return null;var i=t>0,o=r>0;return i||o?(0,f.FD)("span",{css:p1.details,children:[i?(0,f.FD)("span",{children:[t," ",(0,tN.A)("change",t)]}):null,i&&o?(0,f.Y)("span",{children:"/"}):null,o?(0,f.FD)("span",{children:[r," staged"]}):null]}):(0,f.Y)("span",{css:p1.details,children:(0,f.Y)("span",{children:"no changes"})})}function p3(e){var n=e.status,t=e.onStagedFileClick,r=e.defaultMessage,i=(0,v._)((0,w.useState)(n),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null!=r?r:""),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(0),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],S=dm();(0,w.useEffect)(function(){return a(n)},[n]);var Y=(0,k.A)().git;if(!o||!o.changes.length)return(0,f.Y)(L.S,{gap:8,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var A=o.changes.length,C=o.changes.filter(function(e){return e.staged}).length;function x(){return(x=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.stageFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rZ({context:"commit-area-status",gitService:Y,result:t,data:{opts:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:S(n.error),rZ({context:"commit-area-stage-files",gitService:Y,result:n,data:{opts:e}}),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function _(){return(_=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.restoreFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rZ({context:"commit-area-status",gitService:Y,result:t,data:{files:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:rZ({context:"commit-area-restore-files",gitService:Y,result:n,data:{files:e}}),S(n.error),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function D(){return E.apply(this,arguments)}function E(){return(E=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(""===s||m||0===A||d>0)return[2];if(g(!0),0!==C)return[3,2];return[4,Y.stageFiles({all:!0})];case 1:t.sent(),t.label=2;case 2:return[4,Y.commit({message:s})];case 3:if(!(e=t.sent()).error)return[3,4];return g(!1),S(e.error),rZ({context:"commit-area-commit",gitService:Y,result:e,data:{message:s}}),[3,6];case 4:return dg("commit-created",{hasDescription:-1!==s.trim().indexOf("\n\n")}),[4,Y.status()];case 5:n=t.sent(),g(!1),n.error?(S(n.error),rZ({context:"commit-area-status",gitService:Y,result:n,data:{message:s}})):(c(""),a(n)),Y.forceRefresh(),t.label=6;case 6:return[2]}})})).apply(this,arguments)}var R="Nothing to commit";if(m)R="Committing...";else if(C>0&&C<A){var I=(0,tN.A)("change",C);R="Commit ".concat(C," staged ").concat(I)}else A>0&&(R="Stage and commit all changes");var F=!s||0===A||d>0||m;return(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(pP,{message:s,disabled:m,onMessageChange:c,onCommitShortcut:D}),(0,f.Y)(p2,{status:o,stageFiles:function(e){return x.apply(this,arguments)},restoreFiles:function(e){return _.apply(this,arguments)},onStagedFileClick:t,disabled:m}),F?(0,f.Y)(rd.m_,{tooltip:d>0?"Changes in progress":0===A?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,f.Y)(G.$n,{text:R,onClick:D,disabled:F,loading:m,colorway:"primary",iconLeft:(0,f.Y)(an.A,{}),stretch:!0})}):(0,f.Y)(G.$n,{text:R,onClick:D,disabled:F,loading:m,colorway:"primary",iconLeft:(0,f.Y)(an.A,{}),stretch:!0})]})}var p8=/\s\(#(\d+)\)$/,p7=/^Revert "(.+)"/,p6=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function p9(e){var n=p7.exec(e.subject),t=p6.exec(e.body);if(n&&t){var r,i=t[1],o=n[1],a=p8.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var fe=/\B#\d+\b/g,fn=/^Merged? pull request (#\d+\b)/,ft=/^Merge branch '(.+)'/,fr=/into (.+)$/;function fi(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var n=e.subject.match(fe);if(n){var t,r=parseInt(n[n.length-1].slice(1),10);if(r)return p8.test(e.subject)&&(t=e.subject.replace(p8,"").trim()),!t&&fn.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(t=e.body),{type:"pull-request",id:r,subject:t,reverts:p9(e)}}}if(fn.test(e.subject)){var i,o=fn.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:p9(e)}}if(ft.test(e.subject)){var a=ft.exec(e.subject);if(a){var l=fr.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var fo={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(eZ.LU.purpleStrongest),borderRadius:"50%"},fa=(0,z.x)({markerContainer:[W.wp.display.flex,W.wp.align.center,W.wp.justify.center,W.wp.minHeight(20),W.wp.minWidth(20)],commitMarker:[W.wp.height(4),W.wp.width(4),W.wp.backgroundColor.foregroundDefault,W.wp.borderRadius("full")],collapsedMarkerIconDot:[W.wp.height(3),W.wp.width(3),W.wp.backgroundColor.foregroundDimmer,W.wp.borderRadius("full")],collapsedMarkerIconContainer:[W.wp.display.flex,W.wp.align.center,W.wp.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[W.wp.display.flex,W.wp.align.center,W.wp.justify.center,W.wp.height(20),W.wp.width(20),W.wp.backgroundColor.backgroundHighest,W.wp.borderRadius("full")],revertMarker:[W.wp.display.flex,W.wp.height(20),W.wp.width(20),W.wp.backgroundColor.orangeDimmest,W.wp.borderRadius("full"),W.wp.align.center,W.wp.justify.center],mergeMarker:[W.wp.display.flex,W.wp.height(20),W.wp.width(20),W.wp.backgroundColor.purpleDimmest,W.wp.borderRadius("full"),W.wp.align.center,W.wp.justify.center],mergeMarkerIconContainer:[W.wp.position.relative,W.wp.height(9),W.wp.width(13)],mergeMarkerIconLeft:[(0,en._)({},fo),W.wp.left(0)],mergeMarkerIconRight:[(0,en._)({},fo),W.wp.right(0)],boundaryMarker:[W.wp.height(6),W.wp.width(6),W.wp.backgroundColor.backgroundDefault,W.wp.borderRadius("full"),{border:"1px solid ".concat(eZ.LU.backgroundHighest)}]});function fl(e){var n=function(e){switch(e){case"none":default:return null;case"commit":return(0,f.Y)(fs,{});case"revert":return(0,f.Y)(fc,{});case"merge":return(0,f.Y)(fu,{});case"boundary":return(0,f.Y)(fd,{});case"collapsed":return(0,f.Y)(fp,{})}}(e.type);return n?(0,f.Y)("div",{css:fa.markerContainer,children:n}):null}function fs(){return(0,f.Y)("div",{css:fa.commitMarker})}function fc(){return(0,f.Y)("div",{css:fa.revertMarker,children:(0,f.Y)(oU.A,{size:12,color:eZ.LU.orangeStrongest})})}function fu(){return(0,f.Y)("div",{css:fa.mergeMarker,children:(0,f.FD)("div",{css:fa.mergeMarkerIconContainer,children:[(0,f.Y)("div",{css:fa.mergeMarkerIconLeft}),(0,f.Y)("div",{css:fa.mergeMarkerIconRight})]})})}function fd(){return(0,f.Y)("div",{css:fa.boundaryMarker})}function fp(){return(0,f.Y)("div",{css:fa.collapsedMarker,children:(0,f.FD)("div",{css:fa.collapsedMarkerIconContainer,children:[(0,f.Y)("div",{css:fa.collapsedMarkerIconDot}),(0,f.Y)("div",{css:fa.collapsedMarkerIconDot}),(0,f.Y)("div",{css:fa.collapsedMarkerIconDot})]})})}var ff=[W.wp.position.absolute,W.wp.left(0),W.wp.width(18)],fh=(0,z.x)({connectorSegmentBorderSolid:[ff,{borderRight:"1px solid ".concat(eZ.LU.outlineDimmest)}],connectorSegmentBorderDashed:[ff,{borderRight:"1px dashed ".concat(eZ.LU.outlineDimmest)}]});function fm(e){var n=e.boundaryTop,t=void 0!==n&&n,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,s=void 0!==l&&l,c=e.hideBottom,u=void 0!==c&&c;if(s&&u)return null;if(t===i&&!s&&!u)return(0,f.Y)(fv,{top:0,bottom:0,dashed:t&&i});var d=s?null:(0,f.Y)(fg,{start:"top",joint:a,dashed:t}),p=u?null:(0,f.Y)(fg,{start:"bottom",joint:a,dashed:i});return(0,f.FD)(f.FK,{children:[d,p]})}function fg(e){var n,t,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(n={},(0,g._)(n,r,0),(0,g._)(n,"height","50%"),n):(t={},(0,g._)(t,r,0),(0,g._)(t,r===i?"height":i,8),t);return(0,f.Y)(fv,(0,nr._)((0,en._)({},a),{dashed:void 0!==o&&o}))}function fv(e){var n=e.top,t=e.bottom,r=e.height,i=e.dashed;return(0,f.Y)("div",{css:void 0!==i&&i?fh.connectorSegmentBorderDashed:fh.connectorSegmentBorderSolid,style:{top:n,bottom:t,height:r}})}var fw=(0,z.x)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[oP.b.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[W.wp.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[W.wp.mt(4),W.wp.mb(8),W.wp.p(8),W.wp.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[W.wp.position.relative]});function fy(e){var n=e.boundaryTop,t=e.boundaryBottom,r=void 0!==t&&t,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,s=void 0===l?"top":l,c=e.marker,u=e.header,d=e.unfoldedContent,p=e.children,h=e.className,m=(0,v._)((0,w.useState)(!0),2),g=m[0],y=m[1];return(0,f.FD)(L.S,{className:h,css:W.wp.position.relative,children:[(0,f.Y)(fm,{boundaryTop:void 0!==n&&n,boundaryBottom:r,joint:s,hideTop:void 0!==i&&i,hideBottom:a}),c?(0,f.Y)(fS,{joint:s,children:c}):null,d?(0,f.FD)(L.S,{css:fw.containerInteractive,role:"button",tabIndex:0,onClick:function(){y(!g)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&y(!g)},children:[g?(0,f.Y)("div",{css:fw.nodeFoldedIconContainer,children:(0,f.Y)(ir.A,{})}):(0,f.Y)("div",{css:fw.nodeUnFoldedIconContainer,children:(0,f.Y)(ii.A,{})}),(0,f.FD)(L.S,{css:fw.nodeContentContainer,children:[u?(0,f.Y)(L.S,{css:fw.nodeHeader,children:u}):null,p?(0,f.Y)(L.S,{children:p}):null]})]}):(0,f.Y)(L.S,{css:fw.container,children:(0,f.FD)(L.S,{css:fw.nodeContentContainer,children:[u?(0,f.Y)(L.S,{css:fw.nodeHeader,children:u}):null,p?(0,f.Y)(L.S,{children:p}):null]})}),!d||g?null:(0,f.FD)(L.S,{css:fw.unfoldedContentContainer,children:[a?null:(0,f.Y)(fv,{top:0,bottom:0,dashed:r}),(0,f.Y)(ed.ui,{css:fw.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var fb=(0,z.x)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function fS(e){var n=e.joint,t=e.children;return(0,f.Y)("div",{css:fb[void 0===n?"top":n],children:t})}var fY=t(62514),fA=(0,z.x)({container:[W.wp.height("100%")],textContainer:[W.wp.center],text:[W.wp.flex.shrink(0)]});function fC(e){var n=e.text,t=(0,t7._)(e,["text"]);return(0,f.Y)(fy,(0,en._)({marker:(0,f.Y)(fl,{type:"boundary"}),joint:"center",header:(0,f.FD)(L.S,{css:fA.container,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(lV.a,{}),(0,f.FD)(L.S,{css:fA.textContainer,row:!0,gap:4,children:[(0,f.Y)(fY.A,{size:12,color:eZ.LU.foregroundDimmest}),(0,f.Y)(P.EY,{css:fA.text,variant:"small",color:"dimmest",multiline:!1,children:n})]}),(0,f.Y)(lV.a,{})]})},t))}var fx=(0,z.x)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:eZ.LU.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:eZ.LU.space2},"> dd":{marginLeft:eZ.LU.space12,paddingBottom:eZ.LU.space2}},listHeader:[W.wp.fontWeight.medium],commitList:[W.wp.colWithGap(2),W.wp.pl(4)]}),f_=function(e,n){var t=!e.body,r=null,i=null;return n&&"type"in n?(r=n,"pull-request"===n.type&&(n.reverts&&(i=n.reverts),n.subject&&(t=!0))):n&&(i=n),{hideBody:t,merge:r,revert:i}},fk=function(e){var n=e.hash;return(0,f.Y)(I.i,{size:"small",iconLeft:(0,f.Y)(tg.A,{}),textToCopy:n,text:n.slice(0,7),tooltipSuccessText:"Hash copied!"})},fD=function(e){var n=e.onClick,t=e.text,r=e.loading;return(0,f.Y)(rd.m_,{tooltip:"Discard current changes and restore files to time of commit",children:(0,f.Y)(G.$n,{text:t,onClick:n,size:"small",iconLeft:void 0!==r&&r?(0,f.Y)(tr.A,{}):(0,f.Y)(oU.A,{})})})},fE=function(e,n){return!(e.name===n.name&&e.email===n.email)},fR=function(e,n){return!(6e4>Math.abs(e-n))};function fI(e){var n=e.commit,t=e.info,r=fE(n.committer,n.author),i=fR(n.author.date,n.committer.date),o=f_(n,void 0===t?null:t),a=o.hideBody,l=o.merge,s=o.revert;return(0,f.FD)(L.S,{gap:8,children:[a?null:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(P.EY,{children:(0,f.Y)(lr._g,{body:n.body})}),(0,f.Y)(lV.a,{css:W.wp.backgroundColor.outlineDimmer})]}),(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{css:fx.listHeader,multiline:!1,children:"Author"}),(0,f.FD)("dl",{css:fx.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.author.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.author.email})]})]}),r?(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{css:fx.listHeader,multiline:!1,children:"Committer"}),(0,f.FD)("dl",{css:fx.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.committer.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.committer.email})]})]}):null,(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{css:fx.listHeader,multiline:!1,children:"Commit"}),(0,f.FD)("dl",{css:fx.definitionList,children:[i?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Authored:"}),(0,f.Y)("dd",{children:(0,f.Y)(ev.Dc,{date:n.author.date,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Committed:"}),(0,f.Y)("dd",{children:(0,f.Y)(ev.Dc,{date:n.committer.date,dateFormat:"absolute"})})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Date:"}),(0,f.Y)("dd",{children:(0,f.Y)(ev.Dc,{date:n.author.date,dateFormat:"absolute"})})]}),(0,f.Y)("dt",{children:"Hash:"}),(0,f.Y)("dd",{children:(0,f.Y)(fk,{hash:n.hash})}),l&&"pull-request"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"PR:"}),(0,f.FD)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Merged:"}),(0,f.Y)("dd",{children:l.source}),l.target?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Into:"}),(0,f.Y)("dd",{children:l.target})]}):null]}):null,s?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Reverted:"}),(0,f.Y)("dd",{children:s.hash})]}):null]})]}),l&&"simple"===l.type?(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{css:fx.listHeader,multiline:!1,children:"Merged"}),(0,f.FD)(L.S,{css:fx.commitList,children:[(0,f.Y)(P.EY,{multiline:!1,children:l.a}),(0,f.Y)(P.EY,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{css:fx.listHeader,multiline:!1,children:"Merged"}),(0,f.Y)(L.S,{css:fx.commitList,children:l.parents.map(function(e,n){return(0,f.Y)(P.EY,{multiline:!1,children:e},n)})})]}):null]})}var fF=(0,z.x)({headerText:[W.wp.rowWithGap(4),W.wp.flex.row,W.wp.align.stretch,W.wp.fontWeight.medium,{"> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}],headerContainer:[{"> span":{width:"calc(100%)"}}],button:[W.wp.reset.button,W.wp.linkStyle,W.wp.color.foregroundDefault,W.wp.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),fT=function(e){var n=e.author;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(d$,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(ev.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},fP=function(e){var n=e.children;return(0,f.Y)(P.EY,{css:fF.headerText,multiline:!1,maxLines:1,children:n})},fL=function(e){var n=e.commit,t=e.onViewCommitClick,r=e.children;return(0,f.Y)(L.S,{css:fF.headerContainer,gap:4,align:"start",justify:"start",children:(0,f.Y)(rd.m_,{tooltip:"View ".concat(n.hash.slice(0,7)),children:(0,f.Y)("button",{css:fF.button,onClick:function(){return t(n.hash)},children:r})})})};function fU(e){var n=e.commit,t=(0,t7._)(e,["commit"]);return(0,f.Y)(fy,(0,nr._)((0,en._)({marker:(0,f.Y)(fl,{type:"commit"}),header:(0,f.Y)(fP,{children:(0,f.Y)(lr.mO,{subject:n.subject})}),unfoldedContent:(0,f.Y)(fI,{commit:n})},t),{children:(0,f.Y)(fT,{author:n.author})}))}var fN=function(e){var n=e.commit,t=e.onViewCommitClick,r=(0,t7._)(e,["commit","onViewCommitClick"]);return(0,f.Y)(fy,(0,nr._)((0,en._)({marker:(0,f.Y)(fl,{type:"commit"}),header:(0,f.Y)(fL,{commit:n,onViewCommitClick:function(){return t(n.hash)},children:(0,f.Y)(fP,{children:(0,f.Y)(lr.mO,{subject:n.subject})})})},r),{children:(0,f.Y)(fT,{author:n.author})}))},fO=t(78832);function fM(e){var n,t=e.commit,r=e.info,i=(0,t7._)(e,["commit","info"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(fy,(0,nr._)((0,en._)({marker:(0,f.Y)(fl,{type:"merge"}),header:(0,f.FD)(fP,{children:[(0,f.Y)(lr.qW,{text:"merged"}),(0,f.Y)(fH,{info:r,hash:t.hash,subject:t.subject})]}),unfoldedContent:(0,f.Y)(fI,{commit:t,info:r})},i),{children:(0,f.FD)(L.S,{gap:8,children:[n?(0,f.Y)(P.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(lr.mO,{subject:n})}):null,(0,f.Y)(fT,{author:t.author})]})}))}var fB=function(e){var n,t=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,t7._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(fy,(0,nr._)((0,en._)({marker:(0,f.Y)(fl,{type:"merge"}),header:(0,f.Y)(fL,{commit:t,onViewCommitClick:function(){return i(t.hash)},children:(0,f.FD)(fP,{children:[(0,f.Y)(lr.qW,{text:"merged"}),(0,f.Y)(fH,{info:r,hash:t.hash,subject:t.subject})]})})},o),{children:(0,f.FD)(L.S,{gap:8,children:[n?(0,f.Y)(P.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(lr.mO,{subject:n})}):null,(0,f.Y)(fT,{author:t.author})]})}))};function fH(e){var n=e.info,t=e.hash,r=e.subject,i=(0,f.Y)("span",{css:W.wp.fontWeight.medium,children:r});switch(n.type){case"pull-request":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"pull request"}),(0,f.Y)(lr.Cv,{id:n.id}),n.reverts&&n.reverts.pr?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"-"}),(0,f.Y)(lr.e0,{text:"reverts"}),(0,f.Y)(lr.Cv,{id:n.reverts.pr})]}):null]});case"branch":if(!n.target)return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lr.Yi,{name:n.source})]});return(0,f.FD)(f.FK,{children:[(0,f.Y)(lr.Yi,{name:n.source}),(0,f.Y)("span",{children:"into"}),(0,f.Y)(lr.Yi,{name:n.target})]});case"simple":return(0,f.FD)(f.FK,{children:[(0,f.Y)(lr.Vw,{hash:n.a}),(0,f.Y)(fO.A,{css:{alignSelf:"center"},size:12}),(0,f.Y)(lr.Vw,{hash:n.b})]});case"octopus":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"commit"}),(0,f.Y)(lr.Vw,{hash:t}),(0,f.FD)("span",{children:["(",n.parents.length," parents)"]})]});default:return i}}function fz(e){var n=e.commit,t=e.info,r=(0,t7._)(e,["commit","info"]);return(0,f.Y)(fy,(0,nr._)((0,en._)({marker:(0,f.Y)(fl,{type:"revert"}),header:(0,f.FD)(fP,{children:[(0,f.Y)(lr.e0,{text:"reverted"}),(0,f.Y)(lr.Vw,{hash:t.hash}),(0,f.Y)(lr.mO,{subject:t.subject,quoted:!0})]}),unfoldedContent:(0,f.Y)(fI,{commit:n,info:t})},r),{children:(0,f.Y)(fT,{author:n.author})}))}var fW=function(e){var n=e.commit,t=e.info,r=e.onViewCommitClick,i=(0,t7._)(e,["commit","info","onViewCommitClick"]);return(0,f.Y)(fy,(0,nr._)((0,en._)({marker:(0,f.Y)(fl,{type:"revert"}),header:(0,f.Y)(fL,{commit:n,onViewCommitClick:function(){return r(n.hash)},children:(0,f.FD)(fP,{children:[(0,f.Y)(lr.e0,{text:"reverted"}),(0,f.Y)(lr.Vw,{hash:t.hash}),(0,f.Y)(lr.mO,{subject:t.subject,quoted:!0})]})})},i),{children:(0,f.Y)(fT,{author:n.author})}))},fG=(0,z.x)({body:[W.wp.flex.growAndShrink(1)],virtualItem:[W.wp.position.absolute,W.wp.top(0),W.wp.left(0),W.wp.width("100%"),W.wp.overflow("hidden")],virtualList:[W.wp.position.relative]}),fV=function(){return 60};function fj(e){var n=e.items,t=(0,w.useRef)(null),r=(0,ey.Te)({overscan:10,count:n.length,getScrollElement:function(){return t.current},estimateSize:fV});return(0,f.Y)("div",{ref:t,css:fG.body,children:(0,f.Y)("div",{css:fG.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:fG.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,f.Y)(fZ,{items:n,index:e.index})},e.key.toString())})})})}function fZ(e){var n=e.items,t=e.index,r=n[t],i=0===t,o=t===n.length-1;if("boundary"===r.type)return(0,f.Y)(fC,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=n[t-1]?n[t-1].type:null,l=n[t+1]?n[t+1].type:null;return(0,f.Y)(fq,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function fq(e){var n=e.commit,t=e.onViewCommitClick,r=(0,t7._)(e,["commit","onViewCommitClick"]),i=fi(n);if(i)return t?(0,f.Y)(fB,(0,en._)({info:i,commit:n,onViewCommitClick:t},r)):(0,f.Y)(fM,(0,en._)({info:i,commit:n},r));var o=p9(n);return o?t?(0,f.Y)(fW,(0,en._)({info:o,commit:n,onViewCommitClick:t},r)):(0,f.Y)(fz,(0,en._)({info:o,commit:n},r)):t?(0,f.Y)(fN,(0,en._)({commit:n,onViewCommitClick:t},r)):(0,f.Y)(fU,(0,en._)({commit:n},r))}var fK=(0,z.x)({warning:[W.wp.align.start],header:[W.wp.fontWeight.bold]});function f$(){return(0,f.FD)(f.FK,{children:[(0,f.Y)(tK.N,{css:fK.warning,icon:(0,f.Y)(oK.A,{}),colorway:"warning",text:(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:fK.header,children:"Can't push or pull from GitHub"}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,f.Y)(dx,{})]})}var fJ=t(20189),fQ=(0,z.x)({text:[W.wp.flex.shrink(1)]});function fX(e){var n=e.date,t=(0,v._)((0,w.useState)(null),2),r=t[0],i=t[1];return((0,w.useEffect)(function(){if(n){var e=function(){var e=new Date,t="just now";e.getTime()-n.getTime()>6e4&&(t=(0,fJ.A)(n,e,{addSuffix:!0})),i(t=t.replace(/minutes?/,"min"))};e();var t=setInterval(e,6e4);return function(){clearInterval(t),i(null)}}},[n]),r)?(0,f.FD)(P.EY,{css:fQ.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function f0(e){var n=e.hasRemoteMergeConflict,t=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&t&&o.push("Can't pull: you have uncommitted changes"),n&&(t||r)&&(t&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):t?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,f.Y)(f.FK,{children:o.map(function(e){return(0,f.Y)(tK.N,{text:e,colorway:"warning",icon:(0,f.Y)(oK.A,{})},e)})}):null}var f1=(0,z.x)({divider:[W.wp.mx(8)]});function f2(e){var n=e.ahead,t=e.behind;if(!n&&!t)return(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(t){var o=(0,tN.A)("commit",t);r="".concat(t," ").concat(o," to pull")}if(n){var a=(0,tN.A)("commit",n);i="".concat(n," ").concat(a," to push")}return(0,f.FD)(P.EY,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,f.Y)("span",{children:r}):null,r&&i?(0,f.Y)("span",{css:f1.divider,children:""}):null,i?(0,f.Y)("span",{children:i}):null]})}function f5(e){return f4.apply(this,arguments)}function f4(){return(f4=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=null,[4,Promise.race([e,new Promise(function(e){return n=setTimeout(function(){rj.v4(function(e){e.setTag("gitPane",!0),rj.Cp(Error("Remote update operation timed out"))}),e({error:rG.uA.TIMEOUT})},9e4)})])];case 1:return t=r.sent(),n&&clearTimeout(n),[2,t]}})})).apply(this,arguments)}var f3=(0,z.x)({container:[W.wp.flex.grow(1)],branch:[W.wp.mr(4),W.wp.color.foregroundDefault,W.wp.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[W.wp.color.foregroundDimmest],text:[W.wp.ml(4),W.wp.color.foregroundDimmest]});function f8(e){var n=e.upstream,t=e.remotes,r=(0,w.useMemo)(function(){return function(e,n){var t=null,r=null;if(e instanceof Map){var i=(0,rG.xM)(n),o=i[0];if(t=i[1],!o||!t)return null;var a=e.get(o);if(!a)return null;r=dE(a)}else t=n,r=dE(e);return r&&dk(r)?"".concat(r,"/tree/").concat(t):null}(t,n)},[n,t]);return(0,f.FD)(P.EY,{css:f3.container,variant:"small",multiline:!1,children:[r?(0,f.Y)("a",{css:f3.branch,href:r,target:"_blank",children:n}):(0,f.Y)("span",{css:f3.branch,children:n}),(0,f.Y)("span",{css:f3.divider,children:""}),(0,f.Y)("span",{css:f3.text,children:"upstream"})]})}var f7=t(51326),f6=(0,z.x)({container:[W.wp.borderRadius(8)],loading:[W.wp.height(64),nN.S.backgroundPulse(),W.wp.borderRadius(8)],header:[W.wp.py(4),W.wp.px(8),W.wp.rowWithGap(8),W.wp.align.center,W.wp.flex.shrink(1),W.wp.border({color:eZ.LU.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[W.wp.px(8),W.wp.pt(8),W.wp.pb(12),W.wp.colWithGap(8)],buttons:[W.wp.flex.grow(1)],sync:[W.wp.flex.grow(1)],pull:[W.wp.pr(12),W.wp.borderRadius(8,0,0,8),W.wp.border({color:eZ.LU.outlineDefault,direction:"right"})],push:[W.wp.borderRadius(0,8,8,0)]});function f9(e){var n=e.remotes,t=e.gotoPendingState,r=dm(),i=function(e){var n,t=e.onError,r=e.onPullConflicts,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],f=(0,v._)((0,w.useState)(!1),2),h=f[0],m=f[1],g=(0,k.A)().git,S=(0,rV.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w;return(0,b.YH)(this,function(y){switch(y.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:rG.Xo.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=y.sent()).error)return[2,o];if(a=o.state,o.type!==rG.UN.NORMAL)return[2,{error:rG.uA.INVALID_STATE}];return(a===rG.Gi.DIRTY_WORKTREE||a===rG.Gi.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=y.sent()).error)return[2,l];if(s=l.branch,c=null===(n=l.upstream)||void 0===n?void 0:n.branch,d=null!==(u=null===(t=l.upstream)||void 0===t?void 0:t.ahead)&&void 0!==u?u:0,f=null!==(p=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==p?p:0,!s)return[2,{error:rG.uA.HEAD_DETACHED}];if(i.ahead=d,i.behind=f,!c)return[3,7];return i.upstream=c,i.hasUnpulledCommits=f>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((h=y.sent()).error)return[2,h];return i.lastFetched=h.lastFetched,[4,e.canMergeBranches(s,c)];case 4:if((m=y.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(rG.HJ.GITHUB))return[3,6];if(!(g=(0,rG.z5)(c)))return[2,{error:rG.uA.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((v=y.sent()).error)return[2,v];if(!(w=v.remotes.get(g)))return[2,{error:rG.uA.INVALID_REFERENCE}];dk(w)&&(i.needGitHubConnection=!0),y.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?rG.Xo.MERGE:rG.Xo.REBASE),y.label=7;case 7:return[2,(0,nr._)((0,en._)({},i),{error:null})]}})}),function(e){return n.apply(this,arguments)}));if(!S)return{type:"loading"};if(S.error||!S.upstream)return{type:"error",error:S.error};if(!S.upstream)return{type:"noUpstream"};var Y=S.upstream,A=S.hasUnpulledCommits,C=S.hasUnpushedCommits,x=S.hasRemoteMergeConflict,_=S.pullMode,D=S.canPull,E=S.canPush,R=S.workTreeDirty,I=S.needGitHubConnection,F=S.ahead,T=S.behind,P=S.lastFetched;if(I)return{type:"needGitHubConnection",upstream:Y};var L=o||s||d||h,U=!Y||I||L,N=!D||L,O=!E||L,M=!D&&!E||x||L;function B(){return(B=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(U)return[2];return a(!0),[4,f5(g.fetch())];case 1:return e=n.sent(),g.forceRefresh(),a(!1),e.error?t(e.error):dg("remote-fetched"),[2]}})})).apply(this,arguments)}function H(){return(H=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(N)return[2];return c(!0),[4,f5(g.pull({mode:_,allowConflicts:!0}))];case 1:return e=n.sent(),c(!1),e.error?t(e.error):(e.hasConflicts&&r(),g.forceRefresh(),dg("upstream-pulled")),[2]}})})).apply(this,arguments)}function z(){return(z=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(O)return[2];return p(!0),[4,f5(g.push())];case 1:return e=n.sent(),g.forceRefresh(),p(!1),e.error?t(e.error):dg("upstream-pushed"),[2]}})})).apply(this,arguments)}function W(){return(W=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(M)return[2];if(m(!0),!D)return[3,2];return[4,f5(g.pull({mode:_}))];case 1:if((e=r.sent()).error)return t(e.error),m(!1),[2];dg("upstream-pulled"),r.label=2;case 2:if(!E)return[3,4];return[4,g.push()];case 3:if((n=r.sent()).error)return t(n.error),m(!1),[2];dg("upstream-pushed"),r.label=4;case 4:return g.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return B.apply(this,arguments)},fetching:o,fetchDisabled:U,lastFetched:P,pull:function(){return H.apply(this,arguments)},pulling:s,pullDisabled:N,pullMode:_,canPull:D,push:function(){return z.apply(this,arguments)},pushing:d,pushDisabled:O,canPush:E,sync:function(){return W.apply(this,arguments)},syncing:h,syncDisabled:M,upstream:Y,hasUnpulledCommits:A,hasUnpushedCommits:C,hasRemoteMergeConflict:x,workTreeDirty:R,ahead:F,behind:T}}({onError:r,onPullConflicts:t}),o="error"===i.type?i.error:null;return((0,w.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,f.Y)(ed.ui,{css:f6.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,f.FD)(ed.ui,{css:f6.container,elevated:!0,children:[(0,f.FD)(L.S,{css:f6.header,children:[(0,f.Y)(f8,{upstream:i.upstream,remotes:n}),(0,f.Y)(G.$n,{css:f6.fetch,text:"Fetch",iconLeft:(0,f.Y)(oj.A,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,f.Y)(L.S,{css:f6.body,children:(0,f.Y)(f$,{})})]}):(0,f.FD)(ed.ui,{css:f6.container,elevated:!0,children:[(0,f.FD)(L.S,{css:f6.header,children:[(0,f.Y)(f8,{upstream:i.upstream,remotes:n}),(0,f.Y)(fX,{date:i.lastFetched}),(0,f.Y)(G.$n,{css:f6.fetch,text:"Fetch",iconLeft:i.fetching?(0,f.Y)(tr.A,{}):(0,f.Y)(oj.A,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,f.FD)(L.S,{css:f6.body,children:[(0,f.Y)(f0,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,f.Y)(f2,{ahead:i.ahead,behind:i.behind}),(0,f.FD)(L.S,{css:f6.buttons,row:!0,gap:8,children:[(0,f.Y)("div",{css:f6.sync,children:(0,f.Y)(rd.m_,{tooltip:"Pull & push the latest changes",children:(0,f.Y)(G.$n,{css:f6.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,f.Y)(tr.A,{}):(0,f.Y)(fO.A,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,f.FD)(L.S,{row:!0,children:[(0,f.Y)(G.$n,{css:f6.pull,text:"Pull",iconLeft:i.pulling?(0,f.Y)(tr.A,{}):(0,f.Y)(ex.A,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,f.Y)(G.$n,{css:f6.push,text:"Push",iconLeft:i.pushing?(0,f.Y)(tr.A,{}):(0,f.Y)(f7.A,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}var he=(0,z.x)({remoteUrl:[{border:"none"},W.wp.height("auto"),W.wp.py(4),W.wp.px(8)]});function hn(e){var n=e.branch,t=e.remotes,r=(0,v._)((0,w.useMemo)(function(){if(n.type===rG.xx.LOCAL)return[null,null,null];var e=t.get(n.remote);if(!e)return[null,null,null];var r=dE(e),i=dR(e),o=dk(r);return[r,i,o]},[n,t]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,f.Y)(tq.v,{css:he.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,f.Y)(dC.A,{}):void 0,iconRight:(0,f.Y)(rp.A,{}),variant:"outlined",size:"small"}):null}var ht=(0,nR.i7)({from:{opacity:0},to:{opacity:1}}),hr=(0,z.x)({loadingView:[{animation:"".concat(ht," 0.125s 0.25s linear backwards")},W.wp.flex.grow(1),W.wp.display.flex,W.wp.center]});function hi(){return(0,f.Y)(L.S,{css:hr.loadingView,children:(0,f.Y)(tr.A,{size:48})})}var ho=(0,z.x)({view:[W.wp.pt(4),W.wp.pb(8),W.wp.px(4),W.wp.colWithGap(8),W.wp.flex.grow(1)],sectionContainer:[W.wp.colWithGap(8)],section:[W.wp.pt(8),W.wp.pb(16),W.wp.px(8),W.wp.colWithGap(8),W.wp.border({color:eZ.LU.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[],reviewChangesHeader:[],headerText:[W.wp.fontWeight.medium],replMergingHeader:[W.wp.rowWithGap(8),W.wp.align.center],switchToBranch:[W.wp.p(4),W.wp.flex.row,W.wp.align.center,W.wp.justify.spaceBetween,W.wp.mt(0),W.wp.mb(0)]});function ha(e){var n,t,r,i,o,a=e.status,l=e.remotes,s=e.branch,c=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,p=e.gotoPendingState,h=e.current,m=void 0!==h&&h,g=e.performPaneOperation,S=m?null==a?void 0:null===(i=a.upstream)||void 0===i?void 0:i.behind:void 0,Y=m?null==a?void 0:null===(o=a.upstream)||void 0===o?void 0:o.ahead:void 0,A=(n=dm(),r=(0,rV.A)((t=(0,y._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((n=d.sent()).error)return rZ({context:"use-branch-commits",gitService:e,result:n}),[2,{error:n.error}];if(!n.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!s)return[2,{error:null}];if(!(!s.tracking||0===S&&0===Y))return[3,3];return t=(0,rG.qK)(s,!0),[4,e.log({max:100,revRange:t})];case 2:if((r=d.sent()).error)return rZ({context:"use-branch-commits",gitService:e,result:r,data:{branch:s,behind:S,ahead:Y,revision:t}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,rG.qK)(s),[4,Promise.all([e.log({max:100,revRange:s.name}),e.log({max:100,revRange:"".concat(s.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(s.name)})])];case 4:if(o=d.sent(),l=(a=(0,v._)(o,3))[0],c=a[1],u=a[2],l.error)return rZ({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:l.error}];if(c.error)return rZ({context:"use-branch-commits-only-remote",gitService:e,result:c,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:c.error}];if(u.error)return rZ({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:c.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s,S,Y]),(0,w.useMemo)(function(){if(!r)return null;if(r.error)return n(r.error),{error:r.error};var e=r.log,t=r.onlyRemote,i=r.onlyLocal;return t||i?(e&&(e=pC(e,null!=t?t:[],null!=i?i:[])),{log:e,onlyRemote:t,onlyLocal:i,error:null}):{log:e,error:null}},[n,r])),C=!!l&&l.size>0,x=(null==s?void 0:s.type)===rG.xx.LOCAL,_=(0,w.useMemo)(function(){if(!A||A.error)return[];var e=[],n=A.log,t=void 0===n?[]:n,r=A.onlyRemote,i=void 0===r?[]:r,o=A.onlyLocal,a=void 0===o?[]:o,l=t.length>0,s=i.length>0,c=a.length>0;return s&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,ee._)(hl(i,u)))),c&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,ee._)(hl(a,u)))),l&&((s||c)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,ee._)(hl(t,u)))),e},[A,u]);return s?(0,f.FD)(L.S,{css:ho.view,children:[(0,f.FD)(L.S,{gap:8,children:[x?(0,f.Y)(L.S,{css:ho.section,children:(0,f.Y)(pA,{performPaneOperation:g,branch:s,onViewSettingsClick:d})}):null,m&&!x&&l&&C?(0,f.FD)(L.S,{css:ho.section,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(P.EY,{css:ho.headerText,multiline:!1,children:"Remote Updates"}),(0,f.Y)(hn,{branch:s,remotes:l})]}),(0,f.Y)(f9,{remotes:l,gotoPendingState:p})]}):null,m&&a?(0,f.FD)(L.S,{css:ho.section,children:[(0,f.Y)(L.S,{row:!0,gap:8,align:"center",children:(0,f.Y)(P.EY,{css:ho.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(p3,{status:a,onStagedFileClick:c})]}):null]}),A?(0,f.Y)(fj,{items:_}):(0,f.Y)(hi,{})]}):(0,f.Y)("div",{children:"No branch"})}function hl(e,n){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:n}})}function hs(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,f.Y)(P.EY,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}let hc=function(e){var n,t=(0,rV.A)((n=(0,y._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,n.isInitialized()];case 1:if((t=o.sent()).error)return[2,{error:t.error}];if(!t.initialized)return[2,{error:rG.uA.NOT_INITIALIZED}];return[4,n.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:rG.uA.NO_COMMITS}];return[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,w.useMemo)(function(){return t?t.error?{error:t.error}:t:null},[t])},hu=function(e){var n,t=dm(),r=(0,rV.A)((n=(0,y._)(function(n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return i=e.hash,[4,n.getFilesForCommit(i)];case 1:if(null==(o=s.sent())?void 0:o.error)return rZ({context:"use-commit-diffs",gitService:n,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o?void 0:null===(t=o.files)||void 0===t?void 0:t.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o?void 0:null===(r=o.files)||void 0===r?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,ee._)(a).concat((0,ee._)(l)))).map(function(e){var n,t;return{id:(0,nP.A)(),status:e.type,loading:!1,initial:{filename:(0,te.WP)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),path:(0,te._6)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),content:""},final:{filename:(0,te.WP)(e.path),path:(0,te._6)(e.path),content:""}}})}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,w.useMemo)(function(){return r?r.error?(t(r.error),null):r:null},[t,r])};var hd=function(){var e=(0,y._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=""===n?t:"".concat(n,"/").concat(t),[4,e.getFileContents({path:i,revision:r,convertToBase64:(0,te.FN)(i)})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null==o?void 0:o.content)&&void 0!==a?a:""]}})});return function(n,t,r,i){return e.apply(this,arguments)}}(),hp=function(){var e=(0,y._)(function(e,n,t){var r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=n.hash,[4,hd(e,t.final.path,t.final.filename,i)];case 1:if(o=l.sent(),a="",!(!n.grafted&&(null===(r=n.parents)||void 0===r?void 0:r.length)))return[3,3];return[4,hd(e,t.initial.path,t.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,nr._)((0,en._)({},t),{loading:!1,initial:(0,nr._)((0,en._)({},t.initial),{content:a}),final:(0,nr._)((0,en._)({},t.final),{content:o})})]}})});return function(n,t,r){return e.apply(this,arguments)}}(),hf=t(73886),hh=t(83290),hm=(0,z.x)({splitOrUnisonContainer:[W.wp.flex.wrap],emphasizedText:[W.wp.fontWeight.medium],buttonGroupItem:[W.wp.width(64),W.wp.height(32)],textContainer:[W.wp.mt(8),W.wp.overflow("break-all")]}),hg=function(e){var n=e.children;return(0,f.Y)(L.S,{css:hm.splitOrUnisonContainer,gap:8,align:"center",justify:"space-between",row:!0,children:n})},hv=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(it.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(L.S,{css:hm.buttonGroupItem,children:(0,f.Y)(it.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(L.S,{css:hm.buttonGroupItem,children:(0,f.Y)(it.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},hw=function(e){var n=e.value,t=e.onChange;return(0,f.Y)(eY.K0,{alt:"Markdown"===n?"View Source":"View Markdown",onClick:function(){return t("Markdown"===n?"Source":"Markdown")},children:"Markdown"===n?(0,f.Y)(hf.A,{}):(0,f.Y)(hh.A,{})})},hy=function(e){var n=e.files,t=e.totalFiles;return n===t?(0,f.FD)(P.EY,{css:hm.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:hm.emphasizedText,children:[t," changed ",(0,tN.A)("file",t),"."]})]}):(0,f.FD)(P.EY,{css:hm.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:hm.emphasizedText,children:[n," of ",t," changed ",(0,tN.A)("file",t),"."]})]})},hb=function(e){var n=e.query,t=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,s=e.setFolded,c=(0,w.useMemo)(function(){return i.filter(function(e){var t="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return t.toLowerCase().includes(n.toLowerCase())||r.toLowerCase().includes(n.toLowerCase())})},[n,i]);return(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(dQ.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Filter changed files"}),(0,f.FD)(hg,{children:[(0,f.Y)(hy,{files:c.length,totalFiles:r}),i.length>0?(0,f.Y)(hv,{value:o,onChange:function(e){return a(e)}}):null]}),c.map(function(e){var n;return(0,f.Y)(ih,{folded:null===(n=l[e.id])||void 0===n||n,setFolded:function(n){return s(e.id,n)},diff:e,splitOrUnified:o},e.id)})]})},hS=(0,z.x)({metaContainer:[W.wp.flex.wrap]});let hY=function(e){var n=e.author,t=e.committer,r=fE(t,n),i=fR(t.date,n.date);return(0,f.FD)(L.S,{css:hS.metaContainer,row:!0,gap:4,align:"center",children:[r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(d$,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(P.EY,{variant:"small",children:"authored"}),(0,f.Y)(ev.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(P.EY,{variant:"small",children:"and"})]}):null,r&&!i?(0,f.FD)(f.FK,{children:[(0,f.Y)(d$,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(P.EY,{variant:"small",children:"authored"}),(0,f.Y)(P.EY,{variant:"small",children:"and"})]}):null,(0,f.Y)(d$,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(P.EY,{variant:"small",children:"authored "}),(0,f.Y)(ev.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(P.EY,{variant:"small",children:"and "})]}):null,(0,f.Y)(P.EY,{variant:"small",children:"committed"}),(0,f.Y)(ev.Dc,{date:t.date,textColor:"dimmest",textVariant:"small"})]})};var hA=(0,z.x)({dullText:[W.wp.color.foregroundDimmest],tooltipContainer:[W.wp.display.inlineBlock]}),hC=function(e){var n=e.onViewCommitClick,t=e.hash;return(0,f.Y)("span",{css:hA.tooltipContainer,children:(0,f.Y)(rd.m_,{tooltip:"View commit",children:(0,f.Y)("button",{css:[W.wp.reset.button,W.wp.linkStyle,W.wp.fontWeight.medium],onClick:function(){return n(t)},children:t.slice(0,7)})})})};let hx=function(e){var n=e.parents,t=e.grafted,r=e.onViewCommitClick;return(0,f.FD)(P.EY,{variant:"small",children:[(0,f.FD)("span",{css:hA.dullText,children:[t?"Grafted with ":null,n.length," ",(0,tN.A)("parent",n.length)," "]}),0===n.length?null:n.map(function(e,t){return(0,f.FD)(w.Fragment,{children:[(0,f.Y)(hC,{hash:e,onViewCommitClick:r}),t===n.length-1?"":(0,f.Y)("span",{css:hA.dullText,children:", "})]},e)})]})},h_=function(e){var n=e.source,t=e.target;return t?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lr.Yi,{name:n}),(0,f.Y)("span",{children:" into "}),(0,f.Y)(lr.Yi,{name:t})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(lr.Yi,{name:n})]})};var hk="gitCommitSubject",hD=(0,nR.AH)([W.wp.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),hE=(0,z.x)({header:[(u={},(0,g._)(u,"& .".concat(hk),hD),(0,g._)(u,"& .".concat(hk," > div"),hD),(0,g._)(u,"& .".concat(hk," p"),hD),u)],markerContainer:[W.wp.display.inlineFlex,W.wp.mr(4)],mergeContainer:[W.wp.rowWithGap(4),W.wp.flex.row,W.wp.flex.wrap,W.wp.align.stretch,W.wp.flex.shrink(0)]});let hR=function(e){var n=e.merge,t=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,w.useMemo)(function(){var e,r=null;if((null==n?void 0:n.type)==="pull-request"?r=n.id:t&&(null==t?void 0:t.pr)&&(r=t.pr),r&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!==(e=dR(o))&&void 0!==e?e:void 0}},[n,i,t]);return(0,f.FD)(P.Y9,{level:2,variant:"subheadDefault",multiline:!0,css:hE.header,children:[n?(0,f.FD)("span",{css:hE.mergeContainer,children:[(0,f.Y)("span",{css:hE.markerContainer,children:(0,f.Y)(fl,{type:"merge"})}),(0,f.Y)(lr.qW,{text:"merged"}),(null==n?void 0:n.type)==="pull-request"?(0,f.FD)(f.FK,{children:["PR ",(0,f.Y)(lr.Cv,{id:n.id,hash:!0}),(null==t?void 0:t.pr)?(0,f.FD)(f.FK,{children:[(0,f.Y)(lr.e0,{text:"reverts"})," ",(0,f.Y)(lr.Cv,{id:t.pr,hash:!0})]}):null]}):null,(null==n?void 0:n.type)==="branch"?(0,f.Y)(f.FK,{children:(0,f.Y)(h_,{source:n.source,target:n.target})}):null]}):null,t&&!n?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:hE.markerContainer,children:(0,f.Y)(fl,{type:"revert"})}),(0,f.Y)(lr.e0,{text:"reverted"})," ",(0,f.Y)("button",{css:[W.wp.reset.button,W.wp.linkStyle,W.wp.fontWeight.medium],onClick:function(){(null==t?void 0:t.hash)!==void 0&&o(t.hash)},children:t.hash.slice(0,7)})," - "]}):null,(0,f.Y)(lr.mO,{className:hk,subject:r,remoteName:a})]})};var hI=(0,z.x)({content:[W.wp.p(16)],splitContainer:[W.wp.display.flex,W.wp.flex.row,W.wp.flex.shrink(1),W.wp.flex.wrap,W.wp.justify.spaceBetween,W.wp.maxWidth("100%"),W.wp.border({color:eZ.LU.outlineDimmest,direction:"bottom"}),W.wp.pb(16)]});let hF=function(e){var n,t,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,s=e.remotes,c=e.status,u=(0,w.useMemo)(function(){return(0,pO.b)(c?c.changes.map(function(e){return e.path}):[])},[c]),d=(0,w.useMemo)(function(){if(!c)return[];var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=c.changes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.type.worktree!==rG.PX.UNMODIFIED&&e.push(a)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},[c]),p=(0,nL.A)().showConfirm,h=dm(),m=(0,v._)((0,w.useState)(!1),2),g=m[0],S=m[1],Y=(0,v._)((0,w.useState)(""),2),A=Y[0],C=Y[1],x=(0,v._)((0,w.useState)("Split"),2),_=x[0],k=x[1],D=(0,v._)((0,w.useState)("Markdown"),2),E=D[0],R=D[1],I=(0,v._)((0,w.useState)({}),2),F=I[0],T=I[1],U=(0,v._)((0,w.useState)([]),2),N=U[0],O=U[1],M=f_(i,o),B=M.hideBody,H=M.merge,z=M.revert,G=i.hash,V=i.subject,j=i.body,Z=i.committer,q=i.author,K=i.grafted,$=null!==(t=i.parents)&&void 0!==t?t:[],J=hu(i),Q=(0,w.useCallback)((0,y._)(function(){var e,n,t,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((n=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(t=a.sent()).error?(h(t.error),rZ({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}})):p("Restored commit!"),r.forceRefresh(),[3,4];case 3:h(n.error),rZ({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,h,p]),X=pX(u),et=X.openRestoreConfirmationModal,er=X.restoreConfirmationModal,ei=(0,w.useCallback)((0,y._)(function(){var e,n,t,r=arguments;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(S(!0),0!==d.length)return[3,2];return[4,Q()];case 1:return i.sent(),S(!1),[2];case 2:return[4,et(d)];case 3:if(!i.sent())return[3,5];return[4,Q()];case 4:i.sent(),i.label=5;case 5:return S(!1),[3,10];case 6:if("string"==typeof e){if(!(t=d.find(function(n){return n.path===e})))throw S(!1),Error("Could not find file in worktree list");n=[t]}else n=d.filter(function(n){return e.includes(n.path)});return[4,et(n)];case 7:if(!i.sent())return[3,9];return[4,Q(e)];case 8:i.sent(),i.label=9;case 9:S(!1),i.label=10;case 10:return[2]}})}),[et,Q,d]);(0,w.useEffect)(function(){var e;O(null!==(e=null==J?void 0:J.diffs.map(function(e){return(0,nr._)((0,en._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[J]),(0,w.useEffect)(function(){null!==J&&J.error&&h(J.error)},[J,h]);var eo=(n=(0,y._)(function(e,n){var t,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(T(function(t){var r=(0,en._)({},t);return r[e]=n,r}),!(t=N.find(function(n){return n.id===e})))return h(rG.uA.INVALID_STATE),rZ({context:"commit-view",gitService:r,result:{error:rG.uA.INVALID_STATE},data:{diffId:e}}),[2];if(!(!n&&t.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,hp(r,i,t)];case 2:return o=l.sent(),O(function(n){var t=(0,ee._)(n),r=t.findIndex(function(n){return n.id===e});return t[r]=o,t}),[3,4];case 3:return rZ({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),h(a),[2];case 4:return[2]}})}),function(e,t){return n.apply(this,arguments)});return(0,f.FD)(L.S,{css:hI.content,gap:16,children:[(0,f.Y)(hR,{remotes:s,merge:H,revert:z,subject:V,onViewCommitClick:l}),(0,f.FD)(hg,{children:[(0,f.FD)(L.S,{row:!0,gap:8,css:[W.wp.flex.shrink(1)],align:"start",children:[(0,f.Y)(fk,{hash:G}),(0,f.Y)(fD,{onClick:function(){return ei()},text:"Restore All",loading:g})]}),B?null:(0,f.Y)(hw,{value:E,onChange:function(e){R(e)}})]}),B?null:(0,f.Y)(lr._g,{body:j,view:E}),(0,f.FD)(L.S,{css:hI.splitContainer,children:[(0,f.Y)(hY,{author:q,committer:Z}),(0,f.Y)(hx,{parents:$,grafted:K,onViewCommitClick:l})]}),null!==H?(0,f.Y)(P.EY,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===J?(0,f.Y)(hi,{}):(0,f.Y)(hb,{query:A,setQuery:C,totalDiffs:J.diffs.length,diffs:N,splitOrUnified:_,setSplitOrUnified:k,folded:F,setFolded:eo}),er]})};function hT(e){var n=e.hash,t=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,k.A)().git,l=dm(),s=hc(null!=n?n:"");if(null===s)return(0,f.Y)(hi,{});if(s.error)return s.error===rG.uA.NOT_INITIALIZED?i({type:lw.C.CURRENT_BRANCH}):(l(s.error),(s.error===rG.uA.UNKNOWN||s.error===rG.uA.UNKNOWN_NOT_GIT)&&rZ({context:"commit-view",gitService:a,result:s,data:{hash:n}})),null;if(null===s.commit)return l(rG.uA.UNKNOWN),null;var c=s.commit,u=fi(c)||p9(c);return(0,f.Y)(hF,{git:a,commit:c,info:u,onViewCommitClick:r,remotes:t,status:o})}var hP=(0,z.x)({branch:[oP.b.nofill,W.wp.py(12),W.wp.px(8),W.wp.colWithGap(2),W.wp.justify.center,W.wp.borderRadius(8),W.wp.flex.shrink(1)],branchMetadata:[W.wp.flex.shrink(1)]});function hL(e){var n=e.branch,t=e.current,r=e.onClick;return(0,f.FD)(L.S,{css:hP.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,rG.qK)(n,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,f.Y)(P.EY,{multiline:!1,children:(0,f.Y)(lr.Yi,{name:n.name,remote:n.type===rG.xx.REMOTE?n.remote:null,current:void 0!==t&&t,onClick:r,icon:!0})}),(0,f.Y)(hU,{branch:n})]})}function hU(e){var n=e.branch;return(0,f.FD)(L.S,{css:hP.branchMetadata,row:!0,gap:8,align:"center",children:[(0,f.Y)(d$,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,f.Y)(ev.Dc,{date:n.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var hN=(0,z.x)({expandButton:[{verticalAlign:"middle"},W.wp.justify.spaceBetween],branchListContainer:[W.wp.display.flex],topRow:[W.wp.p(4),W.wp.flex.row,W.wp.align.center,W.wp.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},W.wp.justify.spaceBetween,W.wp.borderRadius(8,8,0,0)],branchList:[W.wp.borderRadius(8)],branchListFoldable:[W.wp.borderRadius(0,0,8,8)]});function hO(e){var n=e.name,t=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,s=e.switchBranch,c=(0,v._)((0,w.useState)(!!a&&void 0!==l&&l),2),u=c[0],d=c[1],p=(0,w.useMemo)(function(){return t.map(function(e){return(0,f.Y)(hL,{branch:e,current:(0,rG.FF)(e,i),onClick:function(){return s(e)}},(0,rG.fn)(e))})},[t,i,s]);return u?(0,f.Y)(G.$n,{css:hN.expandButton,text:n,iconRight:(0,f.Y)(ir.A,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,f.FD)(L.S,{css:hN.branchListContainer,children:[(0,f.Y)(G.$n,{css:hN.topRowInteractive,text:n,iconRight:(0,f.Y)(ii.A,{}),onClick:function(){return d(!0)},size:"big"}),(0,f.Y)(ed.ui,{css:hN.branchListFoldable,elevated:!0,children:p})]}):(0,f.FD)(L.S,{css:hN.branchListContainer,children:[(0,f.Y)(L.S,{css:hN.topRow,children:(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:n})}),(0,f.Y)(ed.ui,{css:hN.branchList,elevated:!0,children:p})]})}var hM=(0,z.x)({container:[W.wp.p(8),W.wp.colWithGap(8),W.wp.borderRadius(8)],button:[W.wp.flex.grow(1)],inputDisabled:[{opacity:.75}]});function hB(){var e=(0,v._)((0,w.useState)(!0),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=dm(),u=(0,k.A)().git;function d(){t(!0),o("")}function p(){return h.apply(this,arguments)}function h(){return(h=(0,y._)(function(){var e;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(n||!i||l)return[2];return s(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(c(e.error),s(!1)):(u.forceRefresh(),s(!1),o(""),t(!0),dg("branch-created")),[2]}})})).apply(this,arguments)}if(n)return(0,f.Y)(G.$n,{text:"Create Branch",iconLeft:(0,f.Y)(rm.A,{}),onClick:function(){return t(!1)}});var m=!i||!(0,rG.eB)(i);return(0,f.FD)(ed.ui,{css:hM.container,elevated:!0,children:[(0,f.Y)(hH,{value:i,onChange:o,onSubmit:p,onCancel:d,disabled:l}),(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(G.$n,{css:hM.button,text:"Cancel",onClick:d,disabled:l}),(0,f.Y)(G.$n,{css:hM.button,text:"Create Branch",colorway:"primary",iconLeft:(0,f.Y)(rm.A,{}),onClick:p,loading:l,disabled:m})]})]})}function hH(e){var n=e.value,t=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,rG.Uy)(e)&&(null==r||r(e))}return(0,f.Y)(eA.pd,{value:n,css:t?hM.inputDisabled:void 0,disabled:t,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){return function(e,t){switch(e){case"Enter":null==i||i(),t();break;case"Escape":null==o||o(),t();break;case" ":if(""===n){t();break}a(n+"-"),t()}}(e.key,function(){return e.preventDefault()})},onBlur:function(){""===n&&(null==o||o())},autoFocus:!0})}function hz(e){var n,t,r=e.currentBranch,i=e.switchMode,o=dm(),a=(0,k.A)().git,l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1],u=(0,rV.A)((n=(0,y._)(function(e){var n,t,r,i,a,l,s,c,u,d,p,f,h,m,g,v,w,y,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.listBranches()];case 1:if((n=b.sent()).error)return o(n.error),rZ({context:"dashboard-view",gitService:e,result:n}),[2,n];return[4,e.findDefaultBranches()];case 2:if((t=b.sent()).error)return o(t.error),[2,t];r=n.branches,i=new Set,a=!0,l=!1,s=void 0;try{for(c=function(){var e=d.value,n=r.find(function(n){return(0,rG.CC)(n,e)});n&&i.add(n)},u=t.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)c()}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}p=Date.now()-5184e6,f=[],h=[],m=!0,g=!1,v=void 0;try{for(w=r[Symbol.iterator]();!(m=(y=w.next()).done);m=!0)S=y.value,i.has(S)||(S.commit.author.date>p?f.push(S):h.push(S))}catch(e){g=!0,v=e}finally{try{m||null==w.return||w.return()}finally{if(g)throw v}}return[2,{active:f,stale:h,important:Array.from(i),error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(t=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(null!==s)return[2];return(0,rG.CC)(r,e)&&i({type:lw.C.CURRENT_BRANCH}),c(e),[4,a.switchBranch(e)];case 1:return(n=t.sent()).error?(o(n.error),rZ({context:"dashboard-view",gitService:a,result:n,data:{branch:e.name}}),c(null)):(a.forceRefresh(),dg("branch-switched")),[2]}})}),function(e){return t.apply(this,arguments)});if((0,w.useEffect)(function(){null!==s&&(0,rG.CC)(r,s)&&(c(null),i({type:lw.C.CURRENT_BRANCH}))},[r,s,i]),!u||null!==s)return(0,f.Y)(hi,{});if(u.error)return(0,f.Y)("div",{children:u.error});var p=u.active,h=u.stale,m=u.important;return(0,f.Y)(L.S,{gap:8,children:(0,f.FD)(L.S,{css:[W.wp.pb(8),W.wp.px(8),W.wp.colWithGap(16)],children:[r?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(hO,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,f.Y)(hB,{})]}):null,(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,css:ho.switchToBranch,children:"Switch Branch"}),0===m.length?null:(0,f.Y)(hO,{branches:m,current:r,name:"Important",switchBranch:d,foldable:!0}),0===p.length?null:(0,f.Y)(hO,{branches:p,current:r,name:"Active",switchBranch:d,foldable:!0}),0===h.length?null:(0,f.Y)(hO,{branches:h,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function hW(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,f.Y)(P.EY,{multiline:!1,children:"Please checkout a branch."})]})}function hG(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{multiline:!0,children:"Unsupported state: your index is currently locked. This can happen if multiple git processes are running operations at the same time."}),(0,f.Y)(P.EY,{multiline:!0,children:"Please resolve the issue. If you are sure you do not have git operations running, you can delete your .git/index.lock file."})]})}var hV=(0,z.x)({fileLeft:[W.wp.flex.grow(1),W.wp.align.center]});function hj(e){var n=e.files,t=e.uniquePathMap,r=e.onFileClick,i=[];if(n instanceof Map){var o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,v._)(s.value,2),d=u[0],p=u[1],h=t.get(d);i.push({path:d,prefix:h,resolved:p})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}else{var m=!0,g=!1,w=void 0;try{for(var y,b=n[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var S=y.value,Y=t.get(S);i.push({path:S,prefix:Y,resolved:!0})}}catch(e){g=!0,w=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw w}}}return(0,f.Y)(L.S,{gap:4,children:i.map(function(e){var n=e.path,t=e.prefix,i=e.resolved;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.FD)(L.S,{css:hV.fileLeft,row:!0,gap:8,children:[(0,f.Y)(tt.A,{path:n}),(0,f.Y)(P.EY,{multiline:!1,children:(0,f.Y)(lr.mi,{path:n,prefix:t,onClick:function(){return r({path:n,type:"conflict"})}})})]}),i?(0,f.Y)(an.A,{color:eZ.LU.greenStronger}):(0,f.Y)(oK.A,{color:eZ.LU.orangeStronger})]},n)})})}function hZ(e){var n=e.hasConflicts?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:W.wp.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:W.wp.fontWeight.medium,children:"You are in the middle of a merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,f.Y)(tK.N,{colorway:"warning",icon:(0,f.Y)(oK.A,{}),text:n})}var hq=(0,z.x)({left:[{flexBasis:0,flexGrow:1},W.wp.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[W.wp.p(8),W.wp.rowWithGap(4),W.wp.flex.grow(1),W.wp.center,W.wp.borderRadius(8)]});function hK(e){var n,t=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,v._)((0,rG.xM)(r[0]),2),l=a[0],s=a[1];l&&s&&(n=(0,f.Y)(ed.ui,{css:hq.branch,elevated:!0,children:(0,f.Y)(lr.Yi,{remote:l,name:s,icon:!0,heading:!0})}))}return n||(n=r.map(function(e){return(0,f.Y)(ed.ui,{css:hq.branch,elevated:!0,children:(0,f.Y)(lr.Yi,{name:e,icon:!!i||(0,f.Y)(im.A,{size:16}),heading:!0})},e)})),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,f.Y)(L.S,{css:hq.left,children:n}),(0,f.Y)(tm.A,{size:24,color:eZ.LU.foregroundDimmest}),(0,f.Y)(L.S,{css:hq.right,children:(0,f.Y)(ed.ui,{css:hq.branch,elevated:!0,children:(0,f.Y)(lr.Yi,{name:t,icon:!0,current:!0,heading:!0})})})]})}function h$(e){return(0,f.Y)(nQ.Ay,(0,nr._)((0,en._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.527 3.67 8.25 8.25 0 0 0 7.554 7.553A3.751 3.751 0 0 1 21.75 18a3.75 3.75 0 0 1-7.43.726 9.75 9.75 0 0 1-7.57-4.53V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var hJ=(0,z.x)({container:[W.wp.pt(16),W.wp.pb(8),W.wp.px(8)],fakePaneHeader:[W.wp.p(8),W.wp.rowWithGap(8),W.wp.backgroundColor.backgroundDefault,W.wp.align.center,{borderBottom:"1px solid ".concat(eZ.LU.outlineDimmer)}],listContainer:[W.wp.p(8),W.wp.colWithGap(8),W.wp.borderRadius(8)],list:[W.wp.pb(8),W.wp.colWithGap(8)],listDisabled:[{opacity:.5},W.wp.pb(8),W.wp.colWithGap(8)],listHeader:[W.wp.pb(4),W.wp.flex.grow(1),W.wp.border({color:eZ.LU.outlineDimmer,direction:"bottom"})],listFiles:[W.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},W.wp.rowWithGap(8)]});function hQ(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=dm(),g=(0,k.A)().git,S=(0,w.useId)(),Y=(0,rV.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,w,y,S,Y;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.status()];case 1:if((n=b.sent()).error)return rZ({context:"use-merging-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:rG.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=b.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=b.sent()).error)return rZ({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:n,conflictingFiles:i}}),[2,o];a=o.commits,c=(s=(l=o.branches).length>0)?l:a,u=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,p=!0,f=!1,h=void 0;try{for(m=i[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)if(!(0,v._)(g.value,2)[1]){d=!1;break}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return w=(0,pO.b)(n.changes.map(function(e){return e.path})),y=i.size>0,S=u.length>0,Y=null!==n.upstream&&1===l.length&&l[0]===n.upstream.branch,[2,{refs:c,branch:t,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:s,allIsResolved:d,uniquePathMap:w,hasConflicts:y,hasOtherChanges:S,isUpstreamPull:Y,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,w.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(hi,{});if(Y.error)return null;var A=Y.refs,C=Y.branch,x=Y.conflictingFiles,_=Y.otherChangedFiles,D=Y.refsAreBranches,E=Y.allIsResolved,R=Y.uniquePathMap,I=Y.hasConflicts,F=Y.hasOtherChanges,T=Y.isUpstreamPull;function U(){return(U=(0,y._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!E||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=x.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,ee._)(_)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.mergeContinue()];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function N(){return(N=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.mergeAbort()];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rZ({context:"merging-view-abort",gitService:g,result:e,data:{branch:C}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var O=T?"Complete in-progress pull":"Complete in-progress merge";return I&&(O=T?"Resolve pull conflicts":"Resolve merge conflicts"),(0,f.FD)(L.S,{children:[(0,f.FD)(L.S,{css:hJ.fakePaneHeader,children:[(0,f.Y)(h$,{}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:O})]}),(0,f.FD)(L.S,{css:hJ.container,gap:12,children:[(0,f.Y)(hK,{branch:C,refs:A,refsAreBranches:D,isUpstreamPull:T}),(0,f.Y)(hZ,{hasConflicts:I}),(0,f.FD)(ed.ui,{css:hJ.listContainer,elevated:!0,children:[(0,f.FD)(L.S,{css:hJ.list,children:[(0,f.Y)(L.S,{css:hJ.listHeader,children:(0,f.Y)(P.EY,{css:W.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(L.S,{css:hJ.listFiles,children:I?(0,f.Y)(hj,{files:x,uniquePathMap:R,onFileClick:t}):(0,f.Y)(P.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),F?(0,f.FD)(L.S,{css:o?hJ.list:hJ.listDisabled,children:[(0,f.Y)(L.S,{css:hJ.listHeader,children:(0,f.Y)(P.EY,{css:W.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(L.S,{css:hJ.listFiles,children:(0,f.Y)(hj,{files:_,uniquePathMap:R,onFileClick:t})})]}):null]}),(0,f.FD)(L.S,{css:hJ.includeOtherFiles,tag:"label",children:[(0,f.Y)(nM.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(P.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(G.$n,{text:T?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,f.Y)(tr.A,{}):(0,f.Y)(h$,{}),disabled:!E||h,loading:s,onClick:function(){return U.apply(this,arguments)}}),(0,f.Y)(G.$n,{text:T?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,f.Y)(tr.A,{}):(0,f.Y)(ll.A,{}),disabled:h,loading:d,onClick:function(){return N.apply(this,arguments)}})]})]})]})}var hX=(0,z.x)({container:[W.wp.pt(16),W.wp.pb(8),W.wp.px(8)],fakePaneHeader:[W.wp.p(8),W.wp.rowWithGap(8),W.wp.backgroundColor.backgroundDefault,W.wp.align.center,{borderBottom:"1px solid ".concat(eZ.LU.outlineDimmer)}],listContainer:[W.wp.p(8),W.wp.colWithGap(8),W.wp.borderRadius(8)],list:[W.wp.pb(8),W.wp.colWithGap(8)],listDisabled:[{opacity:.5},W.wp.pb(8),W.wp.colWithGap(8)],listHeader:[W.wp.pb(4),W.wp.flex.grow(1),W.wp.border({color:eZ.LU.outlineDimmer,direction:"bottom"})],listFiles:[W.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},W.wp.rowWithGap(8)]});function h0(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=dm(),g=(0,k.A)().git,S=(0,w.useId)(),Y=(0,rV.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h;return(0,b.YH)(this,function(m){switch(m.label){case 0:return[4,e.status()];case 1:if((n=m.sent()).error)return rZ({context:"use-rebasing-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:rG.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=m.sent()).error)return[2,r];i=r.files,o=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),a=!0,l=!0,s=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(!(0,v._)(d.value,2)[1]){a=!1;break}}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return p=(0,pO.b)(n.changes.map(function(e){return e.path})),f=i.size>0,h=o.length>0,[2,{branch:t,conflictingFiles:i,otherChangedFiles:o,allIsResolved:a,uniquePathMap:p,hasConflicts:f,hasOtherChanges:h,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,w.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(hi,{});if(Y.error)return null;var A=Y.branch,C=Y.conflictingFiles,x=Y.otherChangedFiles,_=Y.allIsResolved,D=Y.uniquePathMap,E=Y.hasConflicts,R=Y.hasOtherChanges;function I(){return(I=(0,y._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!_||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=C.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,ee._)(x)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function F(){return(F=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rZ({context:"rebasing-view-abort",gitService:g,result:e,data:{branch:A}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var T="Complete in-progress rebase";return E&&(T="Resolve conflicts"),(0,f.FD)(L.S,{children:[(0,f.FD)(L.S,{css:hX.fakePaneHeader,children:[(0,f.Y)(h$,{}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:T})]}),(0,f.FD)(L.S,{css:hX.container,gap:12,children:[(0,f.Y)(hZ,{hasConflicts:E}),(0,f.FD)(ed.ui,{css:hX.listContainer,elevated:!0,children:[(0,f.FD)(L.S,{css:hX.list,children:[(0,f.Y)(L.S,{css:hX.listHeader,children:(0,f.Y)(P.EY,{css:W.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(L.S,{css:hX.listFiles,children:E?(0,f.Y)(hj,{files:C,uniquePathMap:D,onFileClick:t}):(0,f.Y)(P.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),R?(0,f.FD)(L.S,{css:o?hX.list:hX.listDisabled,children:[(0,f.Y)(L.S,{css:hX.listHeader,children:(0,f.Y)(P.EY,{css:W.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(L.S,{css:hX.listFiles,children:(0,f.Y)(hj,{files:x,uniquePathMap:D,onFileClick:t})})]}):null]}),(0,f.FD)(L.S,{css:hX.includeOtherFiles,tag:"label",children:[(0,f.Y)(nM.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(P.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(G.$n,{text:"commit and continue rebase",colorway:"primary",iconLeft:s?(0,f.Y)(tr.A,{}):(0,f.Y)(h$,{}),disabled:!_||h,loading:s,onClick:function(){return I.apply(this,arguments)}}),(0,f.Y)(G.$n,{text:"Abort rebase",colorway:"negative",iconLeft:d?(0,f.Y)(tr.A,{}):(0,f.Y)(ll.A,{}),disabled:h,loading:d,onClick:function(){return F.apply(this,arguments)}})]})]})]})}function h1(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,f.Y)(P.EY,{multiline:!1,children:"Please finish the rebase manually."})]})}function h2(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,f.Y)(P.EY,{multiline:!1,children:"Please finish the revert manually."})]})}function h5(e){var n=e.username,t=e.avatar,r=e.fullName;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(dZ.e,{src:null!=t?t:null,username:n,fullName:r}),(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:n})]})}var h4=(0,z.x)({list:{"> div:first-child":W.wp.borderRadius(8,8,0,0),"> div:last-child":[W.wp.borderRadius(0,0,8,8),{border:"none"}]},profile:[oP.b.filled,W.wp.flex.row,W.wp.justify.spaceBetween,W.wp.p(12),W.wp.borderRadius(0),W.wp.border({color:eZ.LU.outlineDefault,direction:"bottom"})],information:[W.wp.flex.shrink(1)],email:[W.wp.flex.shrink(1)],connectToGithubContainer:[W.wp.p(12),W.wp.backgroundColor.backgroundHigher],notConnectedText:[W.wp.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function h3(e){var n=e.profiles,t=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,i$.useRouter)(),a=(0,iQ.Po)(o),l=(0,w.useId)();return(0,f.FD)(eC.z,{name:l,css:h4.list,value:null!=t?t:"",children:[n.map(function(e){n=e.provider===rG.HJ.GITHUB?"GitHub":"Default Profile";var n,r=void 0;return e.provider===rG.HJ.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,f.Y)(h8,{profile:e,providerName:n,current:e.provider===t,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,f.FD)(L.S,{css:h4.connectToGithubContainer,gap:4,children:[(0,f.Y)(L.S,{row:!0,gap:4,align:"center",children:(0,f.Y)(h5,{username:"GitHub Account",fullName:"GitHub Account"})}),(0,f.Y)(P.EY,{color:"dimmest",css:h4.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,f.Y)(dx,{})]}):null]})}function h8(e){var n=e.profile,t=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=n.provider,l=n.name,s=n.username,c=n.email,u=n.avatar,d=(0,w.useId)();return(0,f.FD)(L.S,{onClick:function(){return o(a)},css:h4.profile,children:[(0,f.FD)(L.S,{css:h4.information,gap:4,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(h5,{username:s,avatar:u,fullName:l}),i?(0,f.Y)(tq.v,{css:h4.settingsButton,text:"".concat(r," Settings"),iconRight:(0,f.Y)(rp.A,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,f.Y)(P.EY,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,f.FD)(P.EY,{color:"dimmest",css:h4.email,multiline:!1,children:[l," <",c,">"]})]}),(0,f.Y)(eC.s,{css:h4.radio,id:d,checked:t,value:a})]})}var h7=(0,z.x)({profileContainer:[W.wp.flex.column]});function h6(){var e,n=(0,k.A)().git,t=(0,rV.A)((e=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){return n=e.getCurrentProfile(),[2,{profiles:e.getProfiles(),current:null!==(t=null==n?void 0:n.provider)&&void 0!==t?t:null,hasGitHub:!e.hasProfile(rG.HJ.GITHUB),error:null}]})}),function(n){return e.apply(this,arguments)}));if(!t)return null;if(null!==t.error)return rZ({context:"git-profiles",gitService:n,result:{error:t.error}}),null;var r=t.profiles,i=t.current,o=t.hasGitHub;return(0,f.Y)(L.S,{css:h7.profileContainer,children:(0,f.Y)(h3,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){n.setCurrentProfile(e),e===rG.HJ.REPLIT_DEFAULT?dg("profile-changed",{profile:"replit"}):e===rG.HJ.GITHUB&&dg("profile-changed",{profile:"github"})}})})}var h9=t(55937);function me(){var e=(0,et._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return me=function(){return e},e}function mn(){var e=(0,et._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return mn=function(){return e},e}function mt(){var e=(0,et._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return mt=function(){return e},e}var mr={},mi=(0,er.J1)(me()),mo=(mn(),(0,er.J1)(mt())),ma=t(1054),ml=t(74894),ms=(0,z.x)({errorText:[W.wp.color.accentNegativeStronger,W.wp.pl(4)]});function mc(e){var n,t,r,i,o,a=e.remoteName,l=e.updateRemote,s=(0,nL.A)().showConfirm,c=(0,k.A)().git,u=(0,iE.A)(),d=dY(),p=(0,nO.c)(),h=(0,_.A)(),m=(0,w.useRef)(null),g=(0,w.useRef)(null),S=(0,v._)((0,w.useState)(),2),Y=S[0],A=S[1],C=(n={variables:{replId:h}},t=(0,en._)({},mr,n),ei.I(mi,t)).data,x=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},D=x.slug,E=x.description,R=x.isPrivate,I=x.url,F=(0,v._)((r=(0,en._)({},mr,void 0),lZ.n(mo,r)),2),T=F[0],U=F[1].loading,N=(0,dS.P)({onAuth:function(){dg("github-user-connected")}}),O=(0,v._)((0,w.useState)(null==R||R),2),M=O[0],B=O[1],H=(0,v._)((0,w.useState)(D),2),z=H[0],V=H[1],j=(0,v._)((0,w.useState)(),2),Z=j[0],q=j[1],K=(0,v._)((0,w.useState)(null!=E?E:I&&"Repository for https://replit.com".concat(I)),2),$=K[0],J=K[1],Q=(0,v._)((0,w.useState)(),2),X=Q[0],ee=Q[1],et=function(){q(void 0),ee(void 0),A(void 0)},er=(i=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,c.getRemotes()];case 1:if((n=i.sent()).error)return A("Error finding current remotes, ".concat(n.error)),[2];if(!n.remotes.has(a))return[3,3];return[4,c.setRemoteURL({remote:a,url:e})];case 2:if((t=i.sent()).error)return A("Error (".concat(t.error,") setting ").concat(a," to use ").concat(e," as a remote.")),[2];return l(e),dg("remote-edited"),[2];case 3:return[4,c.addRemote({name:a,url:e})];case 4:if((r=i.sent()).error)return A("Error (".concat(r.error,") adding ").concat(a," ").concat(e," as a remote.")),[2];return l(e),dg("remote-added"),[2]}})}),function(e){return i.apply(this,arguments)}),eo=(o=(0,y._)(function(){var e,n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(et(),!z)return[2];if(!(0,rG.em)(z))return q("Invalid remote name."),[2];return[4,T({variables:{input:{name:z,description:null!=E?E:null,homepage:"replit.com".concat(I),isPrivate:M,ownerType:h9.nr.User}}})];case 1:if((null===(e=(r=i.sent()).data)||void 0===e?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)==="UserError")return A(r.data.createGithubRepo.message),[2];return(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(er(r.data.createGithubRepo.remoteUrl),dg("github-repository-published"),s("Created repository on Github")),[2]}})}),function(){return o.apply(this,arguments)});return d?(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,f.Y)(eA.pd,{ref:m,placeholder:"Enter repository name",value:z,onChange:function(e){q(void 0),V(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var n;e.preventDefault(),null===(n=g.current)||void 0===n||n.focus()}}}),(0,f.Y)(P.EY,{css:ms.errorText,multiline:!1,children:Z}),(0,f.Y)(ma.A,{height:1}),(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,f.Y)(eA.ov,{ref:g,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=$?$:void 0,onChange:function(e){ee(void 0),J(e.target.value)}}),(0,f.Y)(P.EY,{css:ms.errorText,multiline:!1,children:X}),(0,f.Y)(ma.A,{height:1}),(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,f.FD)(it.e2,{tag:"fieldset",id:p("privacy"),name:p("privacy"),value:M,onChange:function(e){return B(e)},row:!0,css:[W.wp.width("100%")],children:[(0,f.Y)(it.$O,{id:p("false"),value:!1,text:"Public",icon:(0,f.Y)(ml.A,{})}),(0,f.Y)(it.$O,{id:p("true"),value:!0,text:"Private",icon:(0,f.Y)(iV.A,{})})]}),(0,f.Y)(ma.A,{height:2}),(0,f.Y)(G.$n,{text:U?"Creating Repository on GitHub":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,f.Y)(dC.A,{}),onClick:eo,loading:U}),Y?(0,f.Y)(P.EY,{css:ms.errorText,maxLines:2,multiline:!1,children:Y}):null]}):u?(0,f.Y)(L.S,{children:(0,f.Y)(G.$n,{colorway:"primary",iconLeft:(0,f.Y)(dC.A,{}),text:"Open Account page to connect to GitHub",onClick:function(){db.M.openExternalUrl("/account#connected-services")}})}):(0,f.Y)(L.S,{children:(0,f.Y)(G.$n,{colorway:"primary",iconLeft:(0,f.Y)(dC.A,{}),text:"Connect to GitHub",onClick:N})})}var mu=(0,nR.AH)(W.wp.border({width:1,color:eZ.LU.outlineDimmer}),W.wp.borderRadius(8)),md=(0,nR.AH)(oP.b.filled,W.wp.flex.row,W.wp.justify.spaceBetween,W.wp.align.center,W.wp.px(8),W.wp.py(4),W.wp.borderRadius(8,8,0,0)),mp=(0,nR.AH)(W.wp.borderRadius(8,8,0,0)),mf=(0,nR.AH)(W.wp.borderRadius(8)),mh=(0,nR.AH)(W.wp.p(8)),mm=(0,nR.AH)(W.wp.flex.growAndShrink(1));function mg(e){var n=e.title,t=e.expanded,r=e.content,i=e.onClick;return(0,f.FD)(L.S,{css:mu,children:[(0,f.FD)(L.S,{css:[md,t?mp:mf],onClick:i,children:[(0,f.Y)(L.S,{css:mm,children:(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:n})}),t?(0,f.Y)(ii.A,{size:20}):(0,f.Y)(ir.A,{size:20})]}),t?(0,f.Y)(L.S,{css:mh,children:r}):null]})}var mv=(0,nR.AH)(W.wp.rowWithGap(4)),mw=(0,nR.AH)(W.wp.flex.growAndShrink(1)),my=(0,nR.AH)(W.wp.color.accentNegativeStronger,W.wp.pl(4));function mb(e){var n,t=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,k.A)().git,a=(0,v._)((0,w.useState)(),2),l=a[0],s=a[1];(0,w.useEffect)(function(){s(void 0)},[t]);var c=(0,v._)((0,w.useState)(),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(n=(0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(m(!0),!(0,rG.C2)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((n=a.sent()).error)throw rZ({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") setting ").concat(r," to use ").concat(l," as a remote."));return dg("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((t=a.sent()).error)throw rZ({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") adding ").concat(r," ").concat(l," as a remote."));return dg("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return m(!1),[7];case 7:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(L.S,{children:[(0,f.Y)(eA.pd,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:t,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),s(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&g()}}),u?(0,f.Y)(P.EY,{variant:"small",css:my,multiline:!1,children:u}):null,l&&l!==t?(0,f.FD)(f.FK,{children:[(0,f.Y)(ma.A,{height:1}),(0,f.FD)(L.S,{css:mv,children:[(0,f.Y)(G.$n,{css:mw,text:"Cancel",iconLeft:(0,f.Y)(dI.A,{}),onClick:function(){return s(void 0)}}),(0,f.Y)(G.$n,{css:mw,text:h?"Saving":"Save",loading:h,colorway:"primary",iconLeft:(0,f.Y)(an.A,{}),onClick:g})]})]}):null]})}var mS="origin",mY=function(e){return e[e.GitHub=0]="GitHub",e}(mY||{});function mA(){var e,n=(0,rV.A)((e=(0,y._)(function(e){var n,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((n=o.sent()).error)return rZ({context:"remote-config",gitService:e,result:n}),[2,{url:void 0,name:mS,error:n.error}];if(!(r=(0,v._)(null!==(t=n.remotes.values())&&void 0!==t?t:void 0,1)[0]))return[2,{url:void 0,name:mS,error:null}];return[2,{url:r.push||r.fetch,name:null!==(i=r.name)&&void 0!==i?i:mS,error:null}]}})}),function(n){return e.apply(this,arguments)}));return null==n?(0,f.FD)(L.S,{css:W.wp.center,children:[(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,f.Y)(hi,{})]}):(null==n?void 0:n.error)?null:(0,f.Y)(mC,{initialRemoteUrl:null==n?void 0:n.url,remoteName:null==n?void 0:n.name})}function mC(e){var n=e.initialRemoteUrl,t=e.remoteName,r=(0,v._)((0,w.useState)(n),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(""===n||void 0===n?0:void 0),2),l=a[0],s=a[1],c=function(e){o(e)};return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,f.Y)(ma.A,{height:1}),(0,f.Y)(mb,{remoteName:t,initialRemoteUrl:i,updateRemote:c}),(0,f.Y)(ma.A,{height:2}),(0,f.Y)(mg,{title:"GitHub",expanded:0===l,onClick:function(){return s(function(e){return 0===e?void 0:0})},content:(0,f.Y)(mc,{remoteName:t,updateRemote:c})})]})}var mx=(0,nR.AH)(W.wp.px(16));function m_(){return(0,f.FD)(L.S,{css:mx,children:[(0,f.Y)(ma.A,{height:2}),(0,f.Y)(mA,{}),(0,f.Y)(ma.A,{height:2}),(0,f.Y)(mk,{})]})}function mk(){return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,f.Y)(ma.A,{height:1}),(0,f.Y)(h6,{})]})}function mD(){return(0,f.Y)(L.S,{children:(0,f.Y)(P.EY,{multiline:!0,children:"Something went wrong. Please refresh the page and try again."})})}var mE=(0,z.x)({container:[W.wp.p(8),W.wp.pt(16)],fakePaneHeader:[W.wp.px(8),W.wp.py(4),W.wp.rowWithGap(8),W.wp.backgroundColor.backgroundDefault,W.wp.align.center,{borderBottom:"1px solid ".concat(eZ.LU.outlineDimmer)}]});function mR(e){var n=e.onFileClick,t=e.status;return(0,f.FD)(L.S,{children:[(0,f.Y)(mI,{}),(0,f.FD)(L.S,{css:mE.container,gap:16,children:[(0,f.Y)(tK.N,{colorway:"orange",icon:(0,f.Y)(oK.A,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,f.FD)(L.S,{css:ho.section,children:[(0,f.Y)(L.S,{css:ho.reviewChangesHeader,children:(0,f.Y)(P.EY,{css:ho.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(p3,{status:t,onStagedFileClick:n,defaultMessage:"Initial commit"})]})]})]})}function mI(){var e,n=dm(),t=(0,rV.A)((e=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(t=r.sent()).error&&(rZ({context:"unborn-branch-view-status",gitService:e,result:t}),n(t.error)),[2,t]}})}),function(n){return e.apply(this,arguments)}),[n]);return(null==t?void 0:t.error)?null:(0,f.Y)(L.S,{css:mE.fakePaneHeader,children:(null==t?void 0:t.branch)?(0,f.Y)(lr.Yi,{name:t.branch,current:!0,heading:!0}):null})}var mF=(0,z.x)({gitPane:[W.wp.position.relative,W.wp.display.flex,W.wp.minHeight("100%")],gitPaneContent:[W.wp.flex.growAndShrink(1),W.wp.overflow("auto")]});function mT(e){var n,t=e.isActive,r=e.performPaneOperation,i=e.mode,o=void 0===i?{type:lw.C.CURRENT_BRANCH}:i,a=(0,w.useRef)(),l=(0,w.useCallback)(function(e){r({operation:"replace",pane:{type:"git",data:{mode:e}}})},[r]),s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1];mN(void 0!==t&&t);var d=(0,rV.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=d.sent()).error)return[2,n];if(t=n.state,r=n.type,i=null,o=null,a=null,!(r!==rG.UN.INITIALIZING))return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return rZ({context:"git-pane-status",gitService:e,result:l,data:{state:t,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((s=d.sent()).error)return rZ({context:"git-pane-remotes",gitService:e,result:s,data:{state:t,type:r}}),[2,s];if(o=s.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((c=d.sent()).error)return rZ({context:"git-pane-branch",gitService:e,result:c,data:{state:t,type:r}}),[2,c];a=c.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return rZ({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:t,type:r}}),[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return n.apply(this,arguments)})),p=!d||d.error?null:d.currentBranch,h=(0,w.useCallback)(function(e){switch(l(e),e.type){case lw.C.DASHBOARD:dg("pane-mode-changed",{mode:"dashboard"});break;case lw.C.BRANCH:dg("pane-mode-changed",{mode:"branch"});break;case lw.C.CURRENT_BRANCH:dg("pane-mode-changed",{mode:"current-branch"});break;case lw.C.SETTINGS:dg("pane-mode-changed",{mode:"settings"})}},[l]),m=(0,w.useCallback)(function(){a.current?(h(a.current),a.current=void 0):h({type:lw.C.CURRENT_BRANCH})},[h]),g=(0,e1.A)(o),S=(0,w.useCallback)(function(e){var n=function(e){a.current=g.current,h(e)};switch(e.type){case lw.C.DASHBOARD:n(e);break;case lw.C.BRANCH:if((0,rG.FF)(e.branch,p)){n({type:lw.C.CURRENT_BRANCH});break}n(e);break;case lw.C.CURRENT_BRANCH:case lw.C.SETTINGS:case lw.C.COMMIT:n(e)}},[h,p,g]),Y=(0,w.useCallback)(function(e){var n=e.path,t=e.type,i=(0,n$.QY)({path:n});if("codeEditor"!==i){r({operation:"open",pane:{type:i,data:{path:n}},secondary:!0});return}"conflict"===(void 0===t?"change":t)?r({operation:"open",pane:{type:"codeEditor",data:{path:n}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:n,data:{type:"git",revision:"HEAD"}},right:{path:n,data:{type:"fs"}}}},secondary:!0})},[r]),A=(0,w.useCallback)(function(e){S({type:lw.C.COMMIT,hash:e})},[S]),C=(0,w.useCallback)(function(){u(!0)},[]);if(o.type===lw.C.BRANCH&&(0,rG.FF)(o.branch,p)&&h({type:lw.C.CURRENT_BRANCH}),(0,w.useEffect)(function(){return u(!1)},[d]),c||!d||d.error)return(0,f.Y)(mP,{children:(null==d?void 0:d.error)?(0,f.Y)(tZ.A,{pane:{type:"git"},headerText:"Git pane is unavailable.",bodyText:(0,f.FD)(f.FK,{children:["Something went wrong. Error: ",(0,f.Y)("code",{children:d.error})]}),asciiArt:"Computer"}):(0,f.Y)(hi,{})});switch(d.type){case rG.UN.INITIALIZING:case rG.UN.INTERMEDIATE:case rG.UN.DETACHED_HEAD:return(0,f.Y)(mP,{children:(0,f.Y)(mL,{state:d.state,status:d.status,onFileClick:Y,gotoPendingState:C})});case rG.UN.NORMAL:if(o.type===lw.C.BRANCH&&!o.branch||o.type===lw.C.CURRENT_BRANCH&&!p)return(0,f.Y)(mP,{header:(0,f.Y)(ps,{mode:lw.C.DASHBOARD,branch:null,switchMode:S,onBack:m}),children:(0,f.Y)(hz,{currentBranch:null,switchMode:S})});var x=null;return o.type===lw.C.CURRENT_BRANCH?x=p:o.type===lw.C.BRANCH&&(x=o.branch),(0,f.Y)(mP,{header:(0,f.Y)(ps,{mode:o.type,branch:x,switchMode:S,onBack:m}),children:(0,f.Y)(mU,{performPaneOperation:r,mode:o,status:d.status,remotes:d.remotes,currentBranch:p,switchMode:S,onStagedFileClick:Y,onViewCommitClick:A,onViewSettingsClick:function(){return S({type:lw.C.SETTINGS})},gotoPendingState:C})})}}function mP(e){var n=e.header,t=e.children,r=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0];return(0,f.Y)(dd.Provider,{value:r,children:(0,f.FD)(L.S,{css:mF.gitPane,children:[(0,f.Y)(dO,{}),n,(0,f.Y)(L.S,{css:mF.gitPaneContent,children:t})]})})}function mL(e){var n=e.state,t=e.status,r=e.onFileClick,i=e.gotoPendingState,o=(0,iq._P)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(n){case rG.Gi.NOT_INITIALIZED:return(0,f.Y)(tZ.A,{pane:{type:"git"},action:(0,f.Y)(dy,{})});case rG.Gi.ON_UNBORN_BRANCH:return(0,f.Y)(mR,{onFileClick:r,status:t});case rG.Gi.MERGING:return(0,f.Y)(hQ,{onFileClick:r,gotoPendingState:i});case rG.Gi.REBASING:return o?(0,f.Y)(h0,{gotoPendingState:i,onFileClick:r}):(0,f.Y)(h1,{});case rG.Gi.REVERTING:return(0,f.Y)(h2,{});case rG.Gi.CHERRY_PICKING:return(0,f.Y)(hs,{});case rG.Gi.APPLYING_MAILBOX:return(0,f.Y)(pp,{});case rG.Gi.BISECTING:return(0,f.Y)(pf,{});case rG.Gi.DETACHED_HEAD:return(0,f.Y)(hW,{});case rG.Gi.INDEX_LOCKED:return(0,f.Y)(hG,{});case rG.Gi.CLEAN:case rG.Gi.DIRTY_INDEX:case rG.Gi.DIRTY_WORKTREE:return(0,f.Y)(mD,{});default:(0,aI.A)(n)}}function mU(e){var n=e.mode,t=e.status,r=e.remotes,i=e.currentBranch,o=e.switchMode,a=e.onStagedFileClick,l=e.onViewCommitClick,s=e.onViewSettingsClick,c=e.gotoPendingState,u=e.performPaneOperation;switch(n.type){case lw.C.DASHBOARD:return(0,f.Y)(hz,{currentBranch:i,switchMode:o});case lw.C.BRANCH:return(0,f.Y)(ha,{performPaneOperation:u,status:t,branch:n.branch,remotes:r,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c});case lw.C.CURRENT_BRANCH:return(0,f.Y)(ha,{performPaneOperation:u,status:t,remotes:r,branch:i,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c,current:!0});case lw.C.SETTINGS:return(0,f.Y)(m_,{});case lw.C.COMMIT:return(0,f.Y)(hT,{status:t,remotes:r,onViewCommitClick:l,hash:n.hash,switchMode:o});default:(0,aI.A)(n)}}function mN(e){var n=(0,k.A)().git;(0,w.useEffect)(function(){e&&setTimeout(function(){n.forceRefresh()},100)},[e,n])}var mO=h.ZU.Object({type:h.ZU.Literal("git"),data:h.ZU.Optional(h.ZU.Object({mode:lw.$}))}),mM={Content:function(e){var n,t=e.options,r=t.isActive,i=t.performPaneOperation,o=e.pane;return(0,f.Y)(mT,{isActive:r,performPaneOperation:i,mode:null===(n=o.data)||void 0===n?void 0:n.mode})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.greenStrongest,size:n},children:(0,f.Y)(dv.A,{})})},getTitle:function(){return"Git"},description:"Version control for your App",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(mO,e)}};function mB(){var e=(0,nH.iO)();return(0,w.useCallback)(function(n,t,r){e({origin:"History2: useHistoryBSOD",error:n,tags:{source:"ws-history2",type:t},extras:(0,en._)({state:em.pX.current()},r)})},[e])}function mH(e){(0,re.u4)(t3.AZ.HISTORY_USED,{action:e,which:"ws"})}function mz(e){var n=e.onClose;return(0,f.Y)(G.$n,{text:"Cancel",onClick:function(){mH("historyExplicitlyClosed"),n()}})}function mW(){var e,n="/replEnvironmentMobile"===(0,i$.useRouter)().pathname,t=(0,em.N_)(),r=(0,em.DH)(),i=!t||0===t.count;return(0,f.Y)(V.d,{isDisabled:i,onChange:function(e){return r({comparing:e})},isSelected:null!==(e=null==t?void 0:t.comparing)&&void 0!==e&&e,children:n?"Compare":"Compare Latest"})}function mG(){var e=(0,em.N_)();if(!e||0===e.count)return null;var n=e.changes[e.version].timestamp;return(0,f.Y)(ev.Dc,{textColor:"dimmer",dateFormat:"switch",date:n})}function mV(e){var n=e.reversed,t=void 0!==n&&n,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,em.N_)(),s=(0,w.useMemo)(function(){return[t?W.wp.rowReverseWithGap(4):W.wp.rowWithGap(4),W.wp.align.center]},[t]);if(!l)return null;if(0===l.count)return(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(rR.A,{size:24}),(0,f.Y)(P.EY,{color:a,multiline:!1,children:"Server Authored"})]});var c=l.changes[l.version];if(!l.users)return(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(dZ.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(P.EY,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[c.userId];return u?(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(dZ.e,{size:24,src:u.image,username:u.username}),i?null:(0,f.Y)(P.EY,{color:a,multiline:!1,children:u.username})]}):c.timestamp>16546464e5?(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(rR.A,{size:24}),i?null:(0,f.Y)(P.EY,{color:a,multiline:!1,children:"Server Authored"})]}):(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(dZ.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(P.EY,{color:a,multiline:!1,children:"Unknown"})]})}var mj=t(5761);function mZ(){var e=(0,et._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return mZ=function(){return e},e}function mq(){var e=(0,et._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return mq=function(){return e},e}var mK=(0,er.J1)(mZ()),m$=(mq(),t(58663)),mJ=t(54013),mQ=function(e){function n(e){var t;return(0,uL._)(this,n),(t=(0,uP._)(this,n,[e])).name="UserError",t}return(0,uU._)(n,e),n}((0,mJ._)(Error));function mX(e,n,t){return new Promise(function(r,i){try{var o,a=e.watchTextFile(n,{onReady:(o=(0,y._)(function(e){var n,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t(e)];case 1:return n=l.sent(),r(n),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}var m0=m$.Ry;function m1(){return(m1=(0,y._)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=new Set,r=!0,i=!1,o=void 0;try{for(a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(s=l.value).userId&&t.add(s.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===t.size)return[2,{}];if(t.size>=m0)return[2,"too_many_users"];return[4,e.query({query:mK,variables:{ids:Array.from(t)}})];case 1:if(u=(c=b.sent()).data,d=c.error)throw d;p=u.currentUser?[u.currentUser].concat((0,ee._)(u.usersByIds)):u.usersByIds,f={},h=!0,m=!1,g=void 0;try{for(v=p[Symbol.iterator]();!(h=(w=v.next()).done);h=!0)f[(y=w.value).id]={id:y.id,username:y.username,image:y.image}}catch(e){m=!0,g=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw g}}return[2,f]}})})).apply(this,arguments)}function m2(){return(m2=(0,y._)(function(e,n,t){var r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:var l;return[4,mX(e,t,(l=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){return(n=e.fetchChanges,0===(t=e.version))?[2,{isDisposed:!1,result:[]}]:[2,n(1,t,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,n){return m1.apply(this,arguments)}(n,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}var m5=t(28220),m4=t(38253),m3=(0,nR.AH)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function m8(e){var n=e.onCloseHistory,t=(0,nL.A)().showError,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,k.A)().fs,u=(0,em.N_)(),d=mB(),p=(0,iq._P)({controlName:"flag-draft-buffers"}),h=(0,m5.UI)(),m="Reset",g=!0;function S(){return(S=(0,y._)(function(){var e,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!u||!c||l)return[2];i.label=1;case 1:var a,f;return i.trys.push([1,3,4,5]),s(!0),mH("versionRestored"),e=u.filePath,[4,(a=u.version+1,mX(c,e,(f=(0,y._)(function(n){var t,r,i,o,l,s,u,d;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(t=n.fetchChanges,r=n.writeChange,a>(i=n.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t(1,i,"")];case 2:if((l=f.sent()).isDisposed)throw new mQ("File deleted or removed.");return o=l.result,[3,4];case 3:throw f.sent(),new mQ("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:u=(s=(0,tp._)(o.slice(a,o.length).reverse()))[0],d=s.slice(1).reduce(function(e,n){return e.compose(n.invertedChanges)},u.invertedChanges);try{r(d)}catch(e){throw rj.Cp(e),new mQ("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}if(!(!p||h))return[3,6];return[4,c.flush(new Set([e]))];case 5:f.sent(),f.label=6;case 6:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return i.sent(),n(),[3,5];case 3:if((r=i.sent())instanceof mQ)return t(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),s(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(m="No history",g=!0):l||i?(m="Resetting...",g=!0):u.playing?(m="Playing...",g=!0):u.version===u.count-1?(m="Viewing latest",g=!0):(m="Reset editor to here",g=!1):(m="Loading...",g=!0),(0,f.FD)(f.FK,{children:[(0,f.Y)(G.$n,{text:m,disabled:g,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,f.Y)(m4.A,{})}),u&&0!==u.count&&(0,f.Y)(la.a,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,f.FD)(L.S,{gap:24,children:[(0,f.Y)(P.Y9,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,f.Y)(ed.ui,{elevated:!0,css:[W.wp.px(16),W.wp.py(12),W.wp.borderRadius(8)],children:(0,f.FD)("dl",{css:m3,children:[(0,f.Y)("dt",{children:"File"}),(0,f.Y)("dd",{children:u.filePath}),(0,f.Y)("dt",{children:"Version"}),(0,f.FD)("dd",{children:[u.version+1,(0,f.FD)("span",{css:[W.wp.color.foregroundDimmest],children:[(0,f.Y)("span",{css:W.wp.mx(8),children:"/"}),u.count]})]}),(0,f.Y)("dt",{children:"Date"}),(0,f.Y)("dd",{children:(0,f.Y)(ev.Dc,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Author"}),(0,f.Y)("dd",{children:(0,f.Y)(mV,{})})]})}),(0,f.Y)(tK.N,{icon:(0,f.Y)(rf.A,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,f.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(G.$n,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,f.Y)(G.$n,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return S.apply(this,arguments)},iconLeft:(0,f.Y)(m4.A,{})})]})]})})]})}let m7=(0,w.forwardRef)(function(e,n){var t=(0,em.N_)(),r=(0,w.useRef)(null);(0,w.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(t.count)),r.current.setAttribute("aria-valuenow",String(t.version+1)));var i=(0,w.useMemo)(function(){return(0,f.Y)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:eZ.LU.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(eZ.LU.foregroundDefault," inset")}}})},[]);return t&&t.count>1?i:null}),m6=(0,w.forwardRef)(function(e,n){var t=(0,em.N_)(),r=(0,w.useMemo)(function(){return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:eZ.LU.backgroundHighest,borderRadius:"2px"},children:(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:eZ.LU.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[n]),i=(0,w.useMemo)(function(){return(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,f.Y)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:eZ.LU.backgroundHighest,borderRadius:"2px"}})})},[n]);return t&&t.count>1?r:i});var m9=["ArrowLeft","ArrowRight","Home","End"];function ge(){var e=(0,em.N_)(),n=(0,em.DH)(),t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,w.useRef)(null),a=(0,w.useRef)(null),l=(0,w.useRef)(null),s=function(e){(0,ue.U)(o,"--scrubber-transition-time",e)},c=function(e){(0,ue.U)(o,"--scrubber-progress",e.toString())};return e&&!r&&(c(e.version/(e.count-1)),e.playing?s("50ms"):s("100ms")),(0,w.useEffect)(function(){if(e&&a.current&&l.current&&!r){var t=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=t.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,p=r.target===t?d/2:r.clientX-l.left,f=null,h=function(t){var r=Math.max(0,Math.min(1,(t-a.left-p)/(u-d)));r!==f&&(f=r,c(r),n({version:Math.round(r*(e.count-1)),playing:!1}))};h(r.clientX);var m=function(e){s("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),s("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),r.preventDefault(),r.stopPropagation()}};return t.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){t.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,n,r]),(0,w.useEffect)(function(){if(e&&l.current&&!r){var t=l.current,i=function(t){if(e&&m9.includes(t.key)){var r=t.shiftKey?10:1,i=e.version,o=e.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),s=null;switch(t.key){case"ArrowLeft":s=a;break;case"ArrowRight":s=l;break;case"Home":s=0;break;case"End":s=o}null!==s&&(n({version:s,playing:!1}),t.preventDefault(),t.stopPropagation())}};return t.addEventListener("keydown",i),function(){t.removeEventListener("keydown",i)}}},[e,n,r]),(0,w.useMemo)(function(){return(0,f.FD)(L.S,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,f.Y)(m6,{ref:a}),(0,f.Y)(m7,{ref:l})]})},[])}function gn(){var e=(0,em.N_)(),n=0,t=0;e&&0!==e.count&&(n=e.version+1,t=e.count);var r=e?"default":"dimmer";return(0,f.FD)(L.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(P.EY,{css:{minWidth:"2ch",textAlign:"right"},color:r,multiline:!1,children:n}),(0,f.Y)(P.EY,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,f.Y)(P.EY,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:t})]})}function gt(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}var gr=t(12923);function gi(){var e,n,t,r,i=(0,em.N_)(),o=(0,em.DH)(),a=(null!==(n=null==i?void 0:null===(e=i.changes)||void 0===e?void 0:e.length)&&void 0!==n?n:1)-1,l=null!==(t=null==i?void 0:i.version)&&void 0!==t?t:0,s=null!==(r=null==i?void 0:i.playing)&&void 0!==r&&r,c=!i||0===i.count,u=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gt,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)(function(){n(1)},[n]),s=(0,w.useCallback)(function(){if(e+1>t){a(!1);return}n(e+1)},[n,e,t]);return(0,w.useEffect)(function(){if(o){var e=setTimeout(function(){s()},r(t));return function(){return clearTimeout(e)}}},[o,s,r,t]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,p=u.start,h=u.stop;(0,w.useEffect)(function(){d&&!s?h():!d&&s&&p()},[s,d,p,h]);var m="Loading...";return i&&(d?m="Pause":i.version===i.count-1?m="Play file history from beginning":0===i.version?m="Play file history":i.version>0&&(m="Play file history from here")),(0,f.Y)(eY.K0,{alt:m,size:24,disabled:c,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!s})},children:d?(0,f.Y)(gr.A,{}):(0,f.Y)(oV.A,{})})}var go=t(50656);function ga(){return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(gi,{}),(0,f.Y)(gl,{}),(0,f.Y)(gn,{}),(0,f.Y)(gs,{})]})}function gl(){var e=(0,em.N_)(),n=(0,em.DH)(),t=!e||0===e.version||0===e.count;return(0,f.Y)(eY.K0,{alt:"Move backwards one version",size:24,disabled:t,onClick:function(){e&&e.version>0&&n({version:e.version-1})},children:(0,f.Y)(sF.A,{})})}function gs(){var e=(0,em.N_)(),n=(0,em.DH)(),t=!e||e.version===e.count-1||0===e.count;return(0,f.Y)(eY.K0,{alt:"Move forwards one version",size:24,disabled:t,onClick:function(){e&&e.version<e.count-1&&n({version:e.version+1})},children:(0,f.Y)(go.A,{})})}function gc(e){var n,t,r,i,o,a=e.filePath,l=e.onCloseHistory,s="/replEnvironmentMobile"===(0,i$.useRouter)().pathname,c=s?W.wp.borderRadius(0):W.wp.borderRadius(0,0,8,8),u=(0,em.N_)(),d=(0,em.DH)(),p=(0,em.s7)(),h=mB(),m=(t=(n=(0,v._)((0,w.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=n[1],i=(0,k.A)().fs,o=(0,mj.m)(),(0,w.useEffect)(function(){if(!a){r({data:null,loading:!1,error:null,handledError:null});return}r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,n,t){return m2.apply(this,arguments)})(i,o,a).then(function(n){var t=n.data,i=n.handledError;if(!e){if(i){r({data:null,loading:!1,error:null,handledError:i});return}r({data:t,loading:!1,error:null,handledError:null})}}).catch(function(n){e||(n instanceof Error||(n=Error(n)),r({data:null,loading:!1,error:n,handledError:null}))}),function(){e=!0}},[a,i,o]),t),g=m.data,y=m.loading,b=m.error;return(0,w.useEffect)(function(){if(b){h(b,"history2-index",{filePath:a});return}if(g&&!y)return d({filePath:a,changes:g.changes,users:g.users}),mH("historyLoaded"),function(){p()}},[a,g,y,b,h,d,p]),(0,f.FD)(L.S,{css:[W.wp.p(8),W.wp.zIndex(3),W.wp.overflow("hidden"),c,W.wp.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(eZ.LU.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],gap:8,children:[(0,f.FD)(ed.ui,{css:[W.wp.position.relative,W.wp.colWithGap(4),W.wp.px(12),W.wp.pt(8),W.wp.pb(8),W.wp.align.center,W.wp.borderRadius(8),W.wp.overflow("hidden")],elevated:!0,children:[(0,f.Y)(ge,{}),(0,f.FD)(L.S,{css:[W.wp.display.flex,W.wp.flex.row,W.wp.align.center,W.wp.justify.spaceBetween,W.wp.width("100%")],children:[(0,f.Y)(ga,{}),u&&u.count>0?(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(mG,{}),y||s?null:(0,f.Y)(P.EY,{color:"dimmer",multiline:!1,children:""}),(0,f.Y)(mV,{color:"dimmer",hideName:s,reversed:!0})]}):null]})]}),(0,f.FD)(L.S,{css:[W.wp.display.flex,W.wp.flex.row],children:[(0,f.Y)(gu,{justify:"flex-start",children:(0,f.Y)(mW,{})}),(0,f.FD)(gu,{justify:"flex-end",children:[(0,f.Y)(mz,{onClose:l}),(0,f.Y)(m8,{onCloseHistory:l})]})]})]})}function gu(e){var n=e.children,t=e.justify;return(0,f.Y)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:t,columnGap:eZ.LU.space8,minWidth:0},children:n})}var gd=t(81272),gp=t(40895),gf=t(15800),gh=(0,t(66160).D)();function gm(e){if(!(e instanceof no.ZX))return{compareTo:e.field(gh.state,!1),changed:!1};var n=e.state.field(gh.state,!1),t=e.startState.field(gh.state,!1)!==n;return{compareTo:n,changed:t}}function gg(e,n){e.state.field(gh.state,!1)!==n&&e.dispatch({effects:gh.effect.of(n)})}var gv=no.sU.define({create:function(){return null},update:function(e,n){var t=gm(n),r=t.compareTo,i=t.changed;if(!r)return null;if(!n.docChanged&&!i)return e;var o=n.state.doc.toString();return new gf.PF(o,r)}}),gw=null!==(d=globalThis.requestIdleCallback)&&void 0!==d?d:globalThis.requestAnimationFrame,gy=null!==(p=globalThis.cancelIdleCallback)&&void 0!==p?p:globalThis.cancelAnimationFrame,gb=na.NZ.line({class:"cm-diff-deleted"}),gS=function(e){function n(e,t){var r;return(0,uL._)(this,n),(r=(0,uP._)(this,n)).insertion=e,r.highlight=t,r}(0,uU._)(n,e);var t=n.prototype;return t.destroy=function(){this.pendingHighlight&&gy(this.pendingHighlight)},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},t.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},t.updateDOM=function(e){var n=this;return this.pendingHighlight&&(gy(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=gw(function(){if(n.highlight){n.pendingHighlight=null;try{var t=n.highlight();e.innerHTML="",e.append(t)}catch(e){}}})),!0},n}(na.xO),gY=no.sU.define({create:function(){return na.NZ.none},update:function(e,n){var t=n.state.field(gv,!1);if(!t)return na.NZ.none;var r=gm(n).changed;if(!n.docChanged&&!r)return e.map(n.changes);var i=[],o=function(e,n){i.push({from:e,to:e,value:n})},a=t.startInsertions();if(a){var l=!0,s=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,t=new gS(e.content,function(){return gA(n.state,e.content)});o(0,na.NZ.widget({widget:t,side:-1,block:!0}))}()}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}var p=!0,f=!1,h=void 0;try{for(var m,g=t.lines()[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.isDeleted&&o(v.from,gb),v.insertions){var w=!0,y=!1,b=void 0;try{for(var S,Y=v.insertions[Symbol.iterator]();!(w=(S=Y.next()).done);w=!0)!function(){var e=S.value,t=new gS(e.content,function(){return gA(n.state,e.content)});o(v.to,na.NZ.widget({widget:t,side:1,block:!0}))}()}catch(e){y=!0,b=e}finally{try{w||null==Y.return||Y.return()}finally{if(y)throw b}}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}return na.NZ.set(i,!0)},provide:function(e){return na.Lz.decorations.from(e)}});function gA(e,n){var t,r=document.createDocumentFragment(),i=null===(t=e.facet(gd.BH))||void 0===t?void 0:t.parser;if(!i){var o=document.createElement("span");return o.textContent=n,r.append(o),r}var a=i.parse(n),l=0;if((0,gp.DM)(a,{style:function(n){return(0,gd.GY)(e,n)}},function(e,t,i){if(e>l){var o=document.createElement("span");o.textContent=n.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=n.slice(e,t),r.append(a),l=t}),l<n.length){var s=document.createElement("span");s.textContent=n.slice(l),r.append(s)}return r}var gC=function(e){function n(e){var t;return(0,uL._)(this,n),(t=(0,uP._)(this,n)).line=e,t}(0,uU._)(n,e);var t=n.prototype;return t.eq=function(e){return this.line===e.line},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(na.wJ),gx=function(e){function n(e,t){var r;return(0,uL._)(this,n),(r=(0,uP._)(this,n)).elementClass="cm-diff-gutter-block",r.lines=e,t&&(r.preceding=t),r}(0,uU._)(n,e);var t=n.prototype;return t.eq=function(e){var n,t,r,i;if((null===(n=this.lines)||void 0===n?void 0:n.length)!==(null==e?void 0:null===(t=e.lines)||void 0===t?void 0:t.length)||(null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null==e?void 0:null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var s=0;s<this.lines.length;s++){var c=this.lines[s],u=e.lines[s];if(c.height!==u.height||c.left!==u.left||c.right!==u.right)return!1}return!0},t.toDOM=function(){var e=this,n=document.createElement("div");if(this.preceding){var t=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r+=c.height;var u=this.piece(c);u.style.position="absolute",u.style.top="-".concat(r,"px"),n.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}var d=this.lines.map(function(n){return e.piece(n)});return n.append.apply(n,(0,ee._)(d)),n},t.piece=function(e){var n=e.height,t=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==t&&(i.innerText=t.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(n,"px"),a.append(i,o),(null===t||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===t&&a.classList.add("cm-diff-gutter-inserted")),a},n}(na.wJ),g_=(0,na.cU)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var n=e.viewportLineBlocks,t=[],r=gm(e.state).compareTo,i=e.state.field(gv,!1),o=function(e,n){t.push({from:e,to:e,value:n})};if(!r||!i){var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=e.state.doc.lineAt(d.from).number;if(d.type===na._B.Text)o(d.from,new gC(p));else if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;if(w.type===na._B.Text){o(w.from,new gC(p));break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return no.om.of(t,!0)}var y=!0,b=!1,S=void 0;try{for(var Y,A=n[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var C=Y.value,x=[],_=e.state.doc.lineAt(C.from).number,k=i.line(_);if(k){var D=e.defaultLineHeight,E=k.offset,R=k.isDeleted,I=k.insertions,F=1===_?i.startInsertions():null,T=F?F.length:0,P=F?[]:null;if(!(Array.isArray(C.type)&&C.type.length>=T+(null!==(O=null==I?void 0:I.length)&&void 0!==O?O:0)+1)){if(F&&P){var L=!0,U=!1,N=void 0;try{for(var O,M,B=F[Symbol.iterator]();!(L=(M=B.next()).done);L=!0){var H=M.value;P.push({height:D,left:null,right:H.number})}}catch(e){U=!0,N=e}finally{try{L||null==B.return||B.return()}finally{if(U)throw N}}}if(x.push({height:C.height,left:_,right:R?null:_+E}),I){var z=!0,W=!1,G=void 0;try{for(var V,j=I[Symbol.iterator]();!(z=(V=j.next()).done);z=!0){var Z=V.value;x.push({height:D,left:null,right:Z.number})}}catch(e){W=!0,G=e}finally{try{z||null==j.return||j.return()}finally{if(W)throw G}}}o(C.from,new gx(x,P));continue}for(var q=0;q<C.type.length;q++){var K=C.type[q];if((null==K?void 0:K.type)===na._B.Text){if(F&&P)for(var $=0;$<F.length;$++){var J,Q=F[$],X=C.type[q-$-1];P.push({height:null!==(J=null==X?void 0:X.height)&&void 0!==J?J:D,left:null,right:Q.number})}if(x.push({height:K.height,left:_,right:R?null:_+E}),I)for(var ee=0;ee<I.length;ee++){var en,et=I[ee],er=C.type[q+ee+1];x.push({height:null!==(en=null==er?void 0:er.height)&&void 0!==en?en:D,left:null,right:et.number})}break}}o(C.from,new gx(x,P))}}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}return no.om.of(t,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(gm(a).changed)return!0}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1},initialSpacer:function(e){return new gC(e.state.doc.lines)},updateSpacer:function(e,n){var t=n.state.doc.lines;return gm(n.state).compareTo?new gx([{height:0,left:t,right:t}]):new gC(t)}}),gk="#0053A644",gD="#c93c3733",gE=[na.Lz.theme({".cm-diff-inserted":{backgroundColor:gk},".cm-diff-deleted":{backgroundColor:gD},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:gk,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:gD,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),gh.state,gv,gY,g_,(0,gd.Lv)({openText:"",closedText:""})],gR=t(39487),gI=function(e){return e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion",e}({}),gF=function(){function e(n){(0,uL._)(this,e),this.map=new Map,this.duration=n}var n=e.prototype;return n.set=function(e,n,t,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(n,{from:e,to:n,time:t,type:r,cursor:i})},n.get=function(e,n){var t=this.map.get(e);if(t)return t.get(n)},n.update=function(n){var t=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,s=this[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(!(t-c.time>this.duration)){var u=n.changes.mapPos(c.from,-1,no.iR.TrackDel),d=n.changes.mapPos(c.to,-1,no.iR.TrackDel);if(null!==u&&null!==d){var p=c.cursor;n.docChanged&&(p=!1),r.set(u,d,c.time,c.type,p)}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n.changes.iterChangedRanges(function(e,n,i,o){r.set(i,o,t,i!==o?0:1,!0)},!0),r},n.cursors=function(){var e,n,t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,t=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},n[Symbol.iterator]=function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,s=!1,c=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;e.push(p)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e[Symbol.iterator]()},e}(),gT=function(){function e(n){var t=this;(0,uL._)(this,e),this.view=n,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],n=t.view.scrollDOM.getBoundingClientRect(),r=t.view.scrollDOM.scrollTop,i=t.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var s,c=t.elements.values()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=u.dom,p=u.pos,f=u.offsetX,h=u.offsetY,m=t.view.coordsAtPos(p),g=t.view.lineBlockAt(p);if(!m){e.push({dom:d,x:null,y:null});continue}var v=g.top-r+n.top+t.view.documentPadding.top,w=Math.round((m.top-v)/t.view.defaultLineHeight)*t.view.defaultLineHeight+v,y=i+m.left-n.left+f,b=r+w-n.top+h;e.push({dom:d,x:y,y:b})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return e},write:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)!function(){var e=i.value,n=e.dom,t=e.x,r=e.y;if(null===t||null===r)return n.style.visibility="hidden",n.style.transition="none";n.style.visibility="",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),n.style.transition.startsWith("none")&&requestAnimationFrame(function(){n.style.transition=""})}()}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}var n=e.prototype;return n.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},n.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var n=Array.from(this.elements.values()),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=e.changes.mapPos(l.pos,-1,no.iR.TrackDel);if(!s){this.removeElement(l.dom);continue}l.pos=s}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},n.addElement=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:n,offsetX:t,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},n.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},n.updateElement=function(e,n){var t=n.pos,r=n.offsetX,i=n.offsetY,o=this.elements.get(e);o&&(void 0!==t&&(o.pos=t),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},n.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}(),gP="cm-flash-insertion",gL="cm-flash-deletion",gU="cm-flash-element",gN=na.Lz.theme((0,g._)({},".".concat(gP,", .").concat(gL),{display:"inline-block"})),gO=function(e){function n(){return(0,uL._)(this,n),(0,uP._)(this,n,arguments)}(0,uU._)(n,e);var t=n.prototype;return t.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},t.stop=function(){var e,n;null===(n=this.animation)||void 0===n||null===(e=n.cancel)||void 0===e||e.call(n)},t.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var n=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(n>1e3)){var t=this.type===gI.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[t,t,"transparent"]:["transparent",t,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-n}))}}},t.connectedCallback=function(){this.play()},t.attributeChangedCallback=function(e,n,t){"data-time"===e&&t&&this.play()},(0,gR._)(n,[{key:"type",get:function(){return this.classList.contains(gP)?gI.Insertion:gI.Deletion}},{key:"isPlaying",get:function(){var e;return(null===(e=this.animation)||void 0===e?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,mJ._)(HTMLElement));customElements.get(gU)||customElements.define(gU,gO);var gM=function(){function e(n){(0,uL._)(this,e),this.view=n,this.prevFlashes=new gF(1e3),this.decorations=na.NZ.set([]),this.hasRenderedOnce=!1,this.overlay=new gT(n)}var n=e.prototype;return n.destroy=function(){this.overlay.destroy()},n.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var n=this.prevFlashes.update(e),t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;switch(s.type){case gI.Insertion:t.push({from:s.from,to:s.to,value:(c=s.time,na.NZ.mark({class:gP,tagName:gU,attributes:{"data-time":c.toString()}}))});break;case gI.Deletion:var c,u,d=e.state.wordAt(s.from);d&&t.push({from:d.from,to:s.to,value:(u=s.time,na.NZ.mark({class:gL,tagName:gU,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var p=this.view.defaultLineHeight.toString()+"px",f=!0,h=!1,m=void 0;try{for(var g,v=n.cursors()[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value,y=w.type,b=w.pos,S=function(e,n){var t=e===gI.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=n,r.style.borderRadius="1px",r.style.backgroundColor=t,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(y,p);this.overlay.addElement(S,b)}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}this.prevFlashes=n,this.decorations=na.NZ.set(t,!0)},e}(),gB=na.Z9.fromClass(gM,{decorations:function(e){return e.decorations}}),gH=no.Nb.lowest([gN,gB]),gz=t(60768),gW=function(){function e(n){(0,uL._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var t=!0,r=!1,i=void 0;try{for(var o,a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0)o=this,function(){var e=a.value,n=e.changes,t=e.invertedChanges,r=null,i=!1;n.iterChangedRanges(function(e,n,t,o){i||(r||(r=o),t===o||(i=!0))}),o.forward.push(n),o.inverted.push(t),o.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}var n=e.prototype;return n.slice=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(n>this.length||t>this.length||n<0||t<0)throw Error("Invalid version range");if(n===t){if(0===this.length)return[no.VR.empty(0),null];var r=this.forward[n].newLength;return[no.VR.empty(r),null]}var i=n<t?gG(this.forward.slice(n,t)):gG(this.inverted.slice(t,n).reverse()),o=n<t?n:t-1,a=null!==(e=this.locations[o])&&void 0!==e?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},n.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},n.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var n=(0,v._)(this.slice(0,e),1)[0],t=no.EY.of([""]);return n.apply(t).sliceString(0)},(0,gR._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function gG(e){if(0===e.length)return no.VR.empty(0);if(1===e.length)return e[0];var n=(0,tp._)(e),t=n[0],r=n.slice(1),i=t,o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i}var gV=t(19310),gj=new nu.k(function(){return(0,na.BE)()}),gZ=[gH,gE];function gq(e){var n,t,r,i=e.filePath,o=(0,em.N_)(),a=(0,C.A)(),l=a.ref,s=a.view;(0,gV.Hn)(s),(0,em.sC)(s);var c=mB();n=(0,w.useMemo)(function(){return(null==o?void 0:o.changes)?new gW(o.changes):null},[null==o?void 0:o.changes]),t=(0,w.useMemo)(function(){return n?n.documentFor(n.length):null},[n]),r=(0,w.useRef)({current:-1,next:0,pending:!1}),(0,w.useEffect)(function(){if(s)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[s]),(0,w.useEffect)(function(){if(s&&o&&n){o.comparing?gg(s,t):gg(s,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,s&&n&&e.current!==e.next&&(function(e,n,t,r){var i=(0,v._)(n.slice(t+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,v._)(n.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?na.Lz.scrollIntoView(a,{yMargin:10}):void 0})}(s,n,e.current,e.next),e.current=e.next))}))}},[s,o,n,t]);var u=gj.use();return(0,f.Y)("div",{css:gz.jy,children:(0,f.Y)("div",{css:gz.mV,children:o&&0===o.count?(0,f.Y)(gK,{}):(0,f.Y)("div",{css:gz.mV,children:(0,f.Y)(A.Ay,{ref:l,css:gz.$1,filePath:i,extensions:[u,gZ],initializing:!o,onException:function(e){c(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function gK(){return(0,f.Y)("div",{css:[gz.mV,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,f.Y)("span",{children:"This file has no history."})})}var g$=h.ZU.Object({type:h.ZU.Literal("history"),data:h.ZU.Object({path:h.ZU.Union([h.ZU.String(),h.ZU.Null()])})}),gJ={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(gQ,(0,nr._)((0,en._)({},n.data),{performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.size;return(0,f.Y)(m4.A,{size:n})},getTitle:function(e){return e.data.path?"History - ".concat((0,te.WP)(e.data.path)):"History - no file open"},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(g$,e)}};function gQ(e){var n=e.path,t=e.performPaneOperation,r=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0],i=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0],o=(0,n2.KA)({path:n,performPaneOperation:t});(0,tn.Qt)(function(){if(o)return{commands:o}},[o]);var a=(0,td.A)(function(){return function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}},[n,t]);return n?(0,f.Y)(gV.dz.Provider,{value:r,children:(0,f.Y)(em.GK.Provider,{value:i,children:(0,f.FD)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,f.Y)(n2.ou,{path:n,performPaneOperation:t}),(0,f.Y)(gq,{filePath:n}),(0,f.Y)(gc,{filePath:n,onCloseHistory:a})]})})}):null}var gX=t(53370),g0=t(19551),g1=t.n(g0),g2=t(94424),g5=t(39735),g4=t(80062),g3=t(96979),g8=t(37673),g7=t(15785),g6=t(31352),g9=t(73943),ve=(0,w.memo)(g3.A),vn=(0,z.x)({bodyRoot:[W.wp.flex.growAndShrink(1),W.wp.overflowY("auto")],contentRoot:[W.wp.height("100%"),W.wp.width("100%"),W.wp.overflow("auto"),W.wp.zIndex(2),W.wp.align.center,W.wp.py(16),W.wp.px(16),W.wp.borderRadius(8),(0,g._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(g9.LO.tabletMin,"px)"),W.wp.px(32))],emptyState:[{"& button":[{color:eZ.LU.foregroundDimmer}]}],markdownContainer:[W.wp.width("100%"),{"& .rendered-markdown":[W.wp.flex.column,W.wp.center],"& .rendered-markdown > *":[W.wp.maxWidth(840),W.wp.width("100%")],"& .rendered-markdown > table":W.wp.maxWidth("100%")}],paneRoot:[W.wp.position.relative,W.wp.display.flex,W.wp.flex.column,W.wp.overflowY("hidden"),W.wp.height("100%"),W.wp.width("100%")]});function vt(e){var n,t,r=(0,k.A)().fs,i=(0,v._)((n=(0,w.useRef)(!1),t=(0,w.useRef)(null),[(0,t9.A)(function(){n.current=!0,t.current&&clearTimeout(t.current),t.current=setTimeout(function(){n.current=!1},150)},{type:"throttle",wait:37.5}),n]),2),o=i[0],a=i[1],l=(0,w.useRef)(null),s=(0,g2.j)(),c=e.path,u=e.performPaneOperation,d=(0,w.useCallback)(function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:c}}}),u({operation:"commit"})},[u,c]);(0,tn.Qt)(function(){return{commands:[{match:g4.G2,data:{label:"Open in Editor",icon:(0,f.Y)(hf.A,{}),type:"action",run:d}}]}},[d]);var p=e.isHidden,h=(0,g6.Af)();(0,w.useEffect)(function(){if(!p){var e=g1()(function(e){(0,g5.A)(e,{behavior:s?"auto":"smooth",scrollMode:"if-needed"})},100),n=g1()(function(n){if(c===(null==n?void 0:n.path)&&n&&!a.current){var t=l.current?function(e,n){var t=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==t?void 0:t.length))return null;var r=Array.from(t).reverse(),i=n.line,o=n.column,a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.dataset.sourcepos;if(!p)throw Error("Expected data source pos on selected element");var f=(0,v._)(p.split("-"),2),h=f[0],m=f[1],g=(0,v._)(h.split(":").map(Number),2),w=g[0],y=g[1],b=(0,v._)(m.split(":").map(Number),2),S=b[0],Y=b[1];if(i>=w&&o>=y&&(i<S||i===S&&o<=Y))return d}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}(l.current,n.position):null;t&&e(t)}},200),t=h.subscribe(n);return function(){n.cancel(),e.cancel(),t()}}},[h,p,s,c]);var m=(0,v._)((0,w.useState)(null),2),g=m[0],y=m[1];return(0,w.useEffect)(function(){return y(null),r.watchTextFile(c,{onReady:function(e){y(e.initialContent.toString())},onChange:function(e){y(e.latestContent)},onMoveOrDelete:function(e){e.eventType===e0.dV.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[c,r,u]),(0,f.FD)(L.S,{css:vn.paneRoot,children:[(0,f.Y)(n2.ou,{path:e.path,performPaneOperation:u,children:g&&g.trim().length?(0,f.Y)(g8.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:d,icon:(0,f.Y)(hf.A,{})}):null}),(0,f.Y)(L.S,{css:vn.bodyRoot,children:(0,f.Y)(vr,{ref:o,content:g,fs:r,markdownContainerRef:l,openInEditor:d,path:c})})]})}var vr=(0,w.forwardRef)(function(e,n){var t=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===t?(0,f.Y)(vi,{}):(0,f.Y)(L.S,{css:vn.contentRoot,gap:8,innerRef:n,children:(0,f.Y)(L.S,{innerRef:i,css:vn.markdownContainer,children:t.trim().length?(0,f.Y)(ve,{path:a,source:t,fs:r,sourcePos:!0}):(0,f.Y)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,f.FD)(L.S,{css:vn.emptyState,gap:4,align:"center",innerRef:n,children:[(0,f.Y)(P.EY,{color:"dimmer",children:(0,f.Y)("i",{children:"This file is empty"})}),(0,f.Y)(G.$n,{text:"Open in Editor",iconLeft:(0,f.Y)(hf.A,{}),onClick:o,variant:"nofill"})]})})})})});function vi(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1];return(0,w.useEffect)(function(){var e=setTimeout(function(){return t(!0)},500);return function(){clearTimeout(e)}},[]),n?(0,f.Y)(g7.A,{}):null}var vo=t(41646),va=h.ZU.Object({type:h.ZU.Literal("markdown"),data:h.ZU.Object({path:h.ZU.String({minLength:1})})}),vl={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vt,{path:n.data.path,isHidden:!!t.isHidden,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(vo.A,{fill:"currentColor",size:n})},getTitle:function(e){return e.data.path?(0,te.WP)(e.data.path):"Markdown"},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(va,e)}},vs=h.ZU.Object({type:h.ZU.Literal("media"),data:h.ZU.Object({path:h.ZU.String()})}),vc={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vu,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(tt.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,te.WP)(e.data.path)},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(vs,e)}};function vu(e){var n=e.path,t=e.performPaneOperation,r=(0,k.A)().fs,i=(0,n2.KA)({path:n,performPaneOperation:t}),o=i?(0,ee._)(i):[],a=(0,w.useCallback)(function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})},[t,n]),l={match:g4.G2,data:{label:"Open in Editor",icon:(0,f.Y)(hf.A,{}),type:"action",run:function(){a()}}};return(0,te.Z7)(n)&&o.push(l),(0,tn.Qt)(function(){if(i)return{commands:o}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n2.ou,{path:n,performPaneOperation:t,children:(0,f.Y)(g8.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,f.Y)(hf.A,{})})}),(0,f.Y)(n2.UC,{centered:!0,children:(0,f.Y)(ie.Ay,{filePath:n,fs:r})})]})}var vd="DATABASE_URL",vp="PGDATABASE",vf="PGHOST",vh="PGPORT",vm="5432",vg="PGUSER",vv="PGPASSWORD",vw=function(e){var n=e.connectionString,t=e.databaseName,r=new URL(n.replace("postgres://","https://").replace("postgresql://","https://"));return new Map([[vd,n],[vp,t],[vf,r.host],[vh,vm],[vg,r.username],[vv,r.password]])};function vy(){return(vy=(0,y._)(function(e){var n,t;function r(){return(r=(0,y._)(function(){var e,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return[4,n.read()];case 1:e=p.sent(),r=new Map,i=!0,o=!1,a=void 0;try{for(l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u=(c=(0,v._)(s.value,2))[0],d=c[1],e.get(u)!==d&&r.set(u,d)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r.size>0&&n.addEntries(r),[2]}})})).apply(this,arguments)}return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.secrets,t=vw({connectionString:e.connectionString,databaseName:e.databaseName}),[4,function(){return r.apply(this,arguments)}()];case 1:return i.sent(),[2]}})})).apply(this,arguments)}var vb=t(84102),vS=function(e){(0,re.u4)(re.AZ.DATABASE_USED,(0,en._)({type:"PostgreSQL",provider:"neon"},e))},vY=t(98335),vA=function(e){var n=e.envVarKey,t=e.envVarValue,r=e.isSecret,i=(0,nO.c)()("db-env-var-".concat(n)),o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1];return(0,f.FD)(L.S,{css:[W.wp.flex.wrap,W.wp.align.end,W.wp.pb(8),{gap:eZ.LU.space8}],row:!0,children:[(0,f.FD)(L.S,{css:[{flexBasis:250},W.wp.flex.grow(0),W.wp.flex.shrink(1)],gap:8,children:[(0,f.Y)("label",{css:W.wp.color.foregroundDimmer,htmlFor:i,children:n}),(0,f.Y)(eA.pd,{id:i,type:!r||a?"text":"password",readOnly:!0,value:t})]}),(0,f.Y)(G.$n,{text:"Copy",iconLeft:(0,f.Y)(eN.A,{}),onClick:function(){(0,eP.A)(t),vS({action:"envVarCopied",envVarKey:n,envVarType:"value"})}}),r?(0,f.Y)(G.$n,{text:a?"Hide":"View",iconLeft:a?(0,f.Y)(vY.A,{}):(0,f.Y)(hh.A,{}),onClick:function(){return l(function(e){return!e})}}):null]})},vC=function(e){return(0,w.useCallback)(function(n){return function(e){return vy.apply(this,arguments)}({secrets:e,connectionString:n.connectionString,databaseName:n.databaseName})},[e])},vx=function(e){var n=e.connectionString,t=e.databaseName,r=(0,td.A)(function(){return vw({connectionString:n,databaseName:t})},[n,t]),i=r.get(vf),o=r.get(vg),a=r.get(vv);if("string"!=typeof i||"string"!=typeof o||"string"!=typeof a)throw Error("Expected all envVars to exist");var l=vC((0,k.A)().secrets);return(0,w.useEffect)(function(){l({connectionString:n,databaseName:t})},[n,t,l]),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(vA,{envVarKey:vd,envVarValue:n,isSecret:!0}),(0,f.Y)(vA,{envVarKey:vp,envVarValue:t}),(0,f.Y)(vA,{envVarKey:vf,envVarValue:i}),(0,f.Y)(vA,{envVarKey:vh,envVarValue:vm}),(0,f.Y)(vA,{envVarKey:vg,envVarValue:o}),(0,f.Y)(vA,{envVarKey:vv,envVarValue:a,isSecret:!0})]})};function v_(){var e=(0,et._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return v_=function(){return e},e}var vk=(0,er.J1)(v_());function vD(){var e=(0,et._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return vD=function(){return e},e}var vE={},vR=(0,er.J1)(vD(),vk),vI=t(77762),vF=t(23108),vT=t(69891),vP=t(89223),vL=t(66286),vU=(0,z.x)({cta:[W.wp.width("100%")],ctaStatusBanner:[W.wp.textAlign.left]});function vN(e){var n=e.loading,t=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,s=e.setShowSupportForm,c=e.replId,u=(0,iQ.m6)();return t===h9.sb.NeedsSubscription||t===h9.sb.NeedsSubscriptionOrPaymentMethod?u?(0,f.Y)(tK.N,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,f.Y)(oK.A,{}),css:vU.ctaStatusBanner}):(0,f.FD)(f.FK,{children:[(0,f.Y)(i1.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to unpause database",css:vU.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,f.Y)(G.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:vU.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(cr.A,{}),onClick:function(){return a()}})]}):t===h9.sb.NeedsSmsVerification?(0,f.Y)(vF.A,{context:h9.SG.Neon,onSuccess:o}):t===h9.sb.NeedsPaymentMethod?u?(0,f.Y)(tK.N,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,f.Y)(oK.A,{}),css:vU.ctaStatusBanner}):(0,f.Y)(G.$n,{colorway:"primary",text:"Add a payment method",css:vU.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(cr.A,{}),onClick:function(){return a()}}):t===h9.sb.NeedsUnbanning?(0,f.Y)(uf.d,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,f.Y)(oK.A,{}),css:vU.ctaStatusBanner,onClick:function(){return s()}}):t===h9.sb.InsufficientBudget?(0,f.FD)(f.FK,{children:[(0,f.Y)(tK.N,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,f.Y)(oK.A,{}),css:vU.ctaStatusBanner}),(0,f.Y)(vP.h,{onUpdateSuccess:o,replId:c})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(G.$n,{colorway:"primary",onClick:i,text:"Unpause database",loading:n,css:vU.cta}),!1===r?(0,f.Y)(uf.d,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,f.Y)(oK.A,{}),css:vU.ctaStatusBanner,onClick:function(){return u?null:a()}}):null]})}function vO(e){var n=e.neonDatabase,t=e.currentUser,r=e.replId;return n.isEphemeral?(0,f.Y)(vT.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime,currentUser:t}):(0,f.Y)(vM,{replId:r,neonProjectId:n.projectId})}function vM(e){var n,t,r,i=e.replId,o=e.neonProjectId,a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,nL.A)().showError,h=(n={notifyOnNetworkStatusChange:!0,onError:function(e){p(e.message)}},t=(0,en._)({},vE,n),ei.I(vR,t)),m=h.loading,g=h.data,y=h.refetch,b=(0,v._)((0,vI.Yc)({refetchQueries:[{query:vI.Or,variables:{input:{replId:i}}}],onError:function(e){p("Error when unfreezing Neon database: ".concat(e.message)),vS({action:"unfreeze",success:!1})},update:function(e,n){var t,r=n.data,a=e.readQuery({query:vI.Or,variables:{input:{replId:i}}});(null==r?void 0:r.unfreezeNeonDatabase.__typename)==="UnfreezeNeonDatabaseResult"&&(null==a?void 0:null===(t=a.getNeonDatabases)||void 0===t?void 0:t.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:vI.Or,variables:{input:{replId:i}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.map(function(e){return e.projectId===o?(0,nr._)((0,en._)({},e),{isFrozen:!1}):e})}}})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){p("Error: Unfreezes Neon Database failed."),vS({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?vS({action:"unfreeze",success:!0}):(p("Error: Unfreezes Neon Database failed."),vS({action:"unfreeze",success:!1}))}}),2),S=b[0],Y=b[1].loading,A=(null==g?void 0:null===(r=g.currentUser)||void 0===r?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?g.currentUser.usageBasedBilling.capabilities:null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(la.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,f.Y)(vL.A,{onRequestClose:function(){return d(!1)}})}),(0,f.Y)(L.S,{gap:8,children:(0,f.Y)(vN,{replId:i,loading:m||Y,ubbExplanation:null==A?void 0:A.explanation,hasPaymentMethod:null==A?void 0:A.hasPaymentMethod,handleOnUnpause:function(){S({variables:{input:{replId:i,neonProjectId:o}}})},refetchUbbCapabilitiesQueryData:y,setShowPaymentMethodForm:function(){return s(!0)},showPaymentMethodForm:l,setShowSupportForm:function(){return d(!0)}})})]})}var vB=t(80425),vH=t(523),vz=t(31956),vW=t(76731),vG=t(19595),vV=t(535),vj=t(96233),vZ=t(15386),vq=t(49251),vK=t(50619),v$=t(77071),vJ=t(60620),vQ=t(89707),vX=t(47294),v0=t(74548),v1={"td,th":{border:"1px solid "+eZ.LU.outlineDefault}},v2={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},v5={outline:"2px solid ".concat(eZ.LU.accentPrimaryDefault),outlineOffset:"-2px"},v4=(0,nR.AH)({":focus:focus-visible":v5}),v3=(0,nR.AH)(v5),v8=(0,nR.AH)([v2,v1,v4]),v7=(0,nR.AH)([W.wp.fontWeight.medium,v2,v1,v4]),v6=(0,nR.AH)({"tbody > tr:hover":{backgroundColor:eZ.LU.backgroundHigher,cursor:"pointer"}});function v9(e){var n=e.type,t=e.style,r=e.children,i=(0,vZ.rs)().rowGroupProps;return(0,f.Y)(n,(0,nr._)((0,en._)({},i),{style:t,children:r}))}function we(e){var n=e.item,t=e.state,r=e.children,i=(0,w.useRef)(null),o=(0,vq.x)({node:n},t,i).rowProps;return(0,f.Y)("tr",(0,nr._)((0,en._)({css:v7},o),{ref:i,children:r}))}function wn(e){var n,t=e.column,r=e.state,i=(0,w.useRef)(null),o=(0,vK.f)({node:t},r,i).columnHeaderProps,a=(0,v$.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("th",(0,nr._)((0,en._)({},(0,vJ.v)(o,s)),{css:[l&&v3,v4],colSpan:t.colspan,style:{textAlign:(null!==(n=t.colspan)&&void 0!==n?n:1)>1?"center":"left"},ref:i,children:t.rendered}))}function wt(e){var n=e.item,t=e.children,r=e.state,i=(0,w.useRef)(null),o=(0,vQ.A)({node:n},r,i).rowProps,a=(0,v$.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("tr",(0,nr._)((0,en._)({css:[l&&v3,v8]},(0,vJ.v)(o,s)),{ref:i,children:t}))}function wr(e){var n=e.cell,t=e.state,r=(0,w.useRef)(null),i=(0,vX.a)({node:n},t,r).gridCellProps,o=(0,v$.o)(),a=o.isFocusVisible,l=o.focusProps;return(0,f.Y)("td",(0,nr._)((0,en._)({},(0,vJ.v)(i,l)),{css:[a&&v3,v4],ref:r,children:n.rendered}))}function wi(e){var n=e.selectionMode,t=e.selectionBehavior,r=(0,vH.j)((0,nr._)((0,en._)({},e),{showSelectionCheckboxes:"multiple"===n&&"replace"!==t})),i=(0,w.useRef)(null),o=r.collection,a=(0,v0.K)(e,r,i).gridProps;return(0,f.FD)("table",(0,nr._)((0,en._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&v6],style:{borderCollapse:"collapse"},children:[(0,f.Y)(v9,{type:"thead",children:o.headerRows.map(function(e){return(0,f.Y)(we,{item:e,state:r,children:(0,ee._)(e.childNodes).map(function(e){return(0,f.Y)(wn,{column:e,state:r},e.key)})},e.key)})}),(0,f.Y)(v9,{type:"tbody",children:(0,ee._)(o.body.childNodes).map(function(e){return(0,f.Y)(wt,{item:e,state:r,children:(0,ee._)(e.childNodes).map(function(e){return(0,f.Y)(wr,{cell:e,state:r},e.key)})},e.key)})})]}))}var wo=function(e){var n=e.ariaTableProps,t=e.rows,r=e.columns;return(0,f.FD)(wi,(0,nr._)((0,en._)({},n),{children:[(0,f.Y)(vz.A,{columns:r,children:function(e){return(0,f.Y)(vW.V,{children:e.value})}}),(0,f.Y)(vG.B,{items:t,children:function(e){return(0,f.Y)(vV.f,{children:function(n){return(0,f.Y)(vj.f,{children:e[n]})}})}})]}))};function wa(e){var n=e.headerColumns,t=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=n.map(function(e,n){return{key:"string"==typeof e?e:"".concat(n),value:e}}),l=t.map(function(e,t){for(var r={id:t},i=0;i<e.length;i++){var o=n[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,f.Y)(wo,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var wl=(0,z.x)({self:[W.wp.flex.column,W.wp.height("100%")],header:[W.wp.pb(8),W.wp.align.center],title:[W.wp.fontSize(14),W.wp.ml(8),W.wp.flex.growAndShrink(1)],main:[W.wp.overflow("auto"),W.wp.height("calc(100% - 60px)")]}),ws=function(e){var n=e.headerTitle,t=e.onGoBack,r=e.refresh,i=e.children;return(0,f.FD)(L.S,{css:wl.self,children:[(0,f.FD)(L.S,{css:wl.header,row:!0,children:[(0,f.Y)(eY.K0,{alt:"Go back",size:24,type:"button",onClick:t,children:(0,f.Y)(a7.A,{})}),(0,f.Y)(P.EY,{css:wl.title,multiline:!1,children:n}),"function"==typeof r?(0,f.Y)(eY.K0,{alt:"Refresh",size:24,type:"button",onClick:r,children:(0,f.Y)(oj.A,{})}):null]}),(0,f.Y)(L.S,{css:wl.main,children:i})]})},wc=(0,ez.eU)(["databaseManager"]),wu=(0,ez.eU)(null,function(e,n,t){var r=e(wc);n(wc,(0,ee._)(r).concat([t])),vS({action:"pageNav",databasePage:t})}),wd=(0,ez.eU)(null,function(e,n){var t=e(wc);n(wc,t.slice(0,t.length-1))}),wp=(0,ez.eU)(function(e){var n=e(wc);return n[n.length-1]}),wf=function(){return(0,eW.Xr)(wu)},wh=function(){return(0,eW.Xr)(wd)},wm=function(e,n){var t,r=(0,k.A)().psql,i=(0,v._)((0,w.useState)(),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,w.useCallback)((t=(0,y._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),c(!0),[4,r.run({query:e,connectionString:n})];case 2:return a(t.sent()),[3,4];case 3:return c(!1),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)}),[n,r,e]);return(0,w.useEffect)(function(){u()},[n,r,e,u]),{data:o,loading:s,refetch:u}},wg=function(e){var n=e.rows,t=e.columns;return!Array.isArray(n)||n.length<1?null:{headerColumns:null!=t?t:[],bodyData:n.map(function(e){return Object.values(e)})}},wv=function(e){return wm("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},ww=(0,ez.eU)(void 0),wy=(0,ez.eU)(function(e){var n=e(ww);return null==n?void 0:n.rows.reduce(function(e,n){var t=n.table_name,r=n.column_name;return e[t]||(e[t]=[]),e[t].push(r),e},{})}),wb=function(e){var n=wm("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,t=(0,eW.Xr)(ww);(0,w.useEffect)(function(){t(n)},[n,t])},wS=function(e){var n=e.tableName,t=e.connectionString;return wm("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(n.replace(/"/g,'""'),"';"),t).data},wY=function(e){var n=e.tableData,t=e.scrollRef,r=n.headerColumns,i=n.bodyData,o=wf(),a=(0,w.useCallback)(function(e){var n=parseInt(String(e),10);if(!isNaN(n)){var t=i[n][r.indexOf("Name")];o("table/".concat(t))}},[o,r,i]);return(0,f.Y)(wa,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:t})},wA=function(e){var n=e.psqlQueryResult,t=e.scrollRef,r=n.data;if(n.loading)return(0,f.Y)(L.S,{css:[W.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(tr.A,{})});if(null==r?void 0:r.error)return(0,f.Y)(L.S,{css:[W.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(P.EY,{css:[W.wp.color.accentNegativeDefault,W.wp.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?wg(r):null;return i?(0,f.Y)(wY,{tableData:i,scrollRef:t}):(0,f.Y)(L.S,{css:[W.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(P.EY,{css:[W.wp.color.accentPositiveDefault,W.wp.maxWidth("100%")],children:"No tables found"})})},wC=function(e){var n=e.connectionString,t=wh(),r=(0,w.useRef)(null),i=wv({connectionString:n}),o=i.refetch;return(0,f.Y)(ws,{headerTitle:"All tables",onGoBack:t,refresh:o,children:(0,f.Y)(L.S,{css:[W.wp.flex.growAndShrink(1),W.wp.overflow("auto")],innerRef:r,children:(0,f.Y)(wA,{psqlQueryResult:i,scrollRef:r})})})},wx="1px solid "+eZ.LU.outlineDefault,w_=(0,nR.AH)([W.wp.p(8),W.wp.backgroundColor.backgroundDefault,W.wp.align.center,W.wp.borderRadius(0),{borderLeft:wx,borderRight:wx,borderBottom:wx},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(eZ.LU.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:eZ.LU.backgroundHigher}}}]),wk=function(e){var n=wv({connectionString:e.connectionString}),t=n.data,r=n.loading,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)(function(){a(!0)},[]),s=t?wg(t):null,c=(0,w.useRef)(null);if(!s||r)return null;var u=s.bodyData.length,d=s.headerColumns,p=s.bodyData;return(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{css:[W.wp.overflow("auto"),W.wp.display.grid],innerRef:c,children:[(0,f.Y)(wY,{tableData:{headerColumns:d,bodyData:o?p:p.slice(0,5)},scrollRef:c}),u-5>0&&!o?(0,f.Y)(G.$n,{text:"".concat(u-5," more"),css:w_,onClick:l}):null]})})};function wD(e){var n=e.title,t=e.doWarnAtom,r=e.inactive,i=(0,eW.md)(t);return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(P.EY,{variant:"small",css:W.wp.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?n+" last run":n}),i?(0,f.Y)(oK.A,{color:eZ.LU.orangeStronger}):null]})}function wE(e){var n=e.title,t=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,s=void 0!==l&&l,c=(0,td.A)(function(){return(0,ez.eU)(function(e){return wI(e(r),e(t))})},[r,t]),u=(0,td.A)(function(){return(0,ez.eU)(function(e){var n,l,s,u,d;return a||(n=e(c),l=e(r),s=e(t),u=i&&e(i),d=o,"empty"===n||void 0===l?void 0:"vCPU"===d?wF(100*Math.min(1,l/s))+"% of "+u+" vCPUs":wF(l).toLocaleString()+"/"+wF(s).toLocaleString()+" "+d)})},[a,c,r,t,i,o]),d=(0,td.A)(function(){return(0,ez.eU)(function(e){var n=e(c);return"At limit"===n||"Close to limit"===n})},[c]);return(0,f.FD)(L.S,{css:[W.wp.flex.growAndShrink(2),{flexBasis:32}],gap:4,children:[n?(0,f.Y)(wD,{title:n,doWarnAtom:d,inactive:s}):null,(0,f.Y)(wR,{currentAtom:r,totalAtom:t,inactive:s,limitTextAtom:u,mini:!0})]})}function wR(e){var n=e.currentAtom,t=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,eW.md)(t),l=(0,eW.md)(n),s=(0,eW.md)(r),c=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return eZ.LU.accentNegativeDefault;case"Close to limit":return eZ.LU.orangeDefault}}(wI(l,a));return(0,f.Y)(tO.W,{css:o&&W.wp.height(8),total:a,current:l,color:c,disabled:i,tooltip:s})}function wI(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function wF(e){return Math.round((e+Number.EPSILON)*100)/100}var wT="https://docs.replit.com/cloud-services/storage-and-databases/postgresql-on-replit",wP="https://docs.replit.com/cloud-services/about-usage-based-billing#1-postgresql-usage-metrics";function wL(e){return(0,f.Y)(nQ.Ay,(0,nr._)((0,en._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6ZM6 3.75A2.25 2.25 0 0 0 3.75 6v2.25h10.5v-4.5H6Zm9.75 0v4.5h4.5V6A2.25 2.25 0 0 0 18 3.75h-2.25Zm4.5 6h-4.5v4.5h4.5v-4.5Zm0 6h-4.5v4.5H18A2.25 2.25 0 0 0 20.25 18v-2.25Zm-6 4.5v-4.5H3.75V18A2.25 2.25 0 0 0 6 20.25h8.25Zm-10.5-6h10.5v-4.5H3.75v4.5Z",clipRule:"evenodd"})}))}var wU=(0,z.x)({loadingGhost:[W.wp.borderRadius(6),{outline:"1px solid transparent"},W.wp.height(22)],storage:W.wp.rowWithGap(8)}),wN=function(e){var n=e.dbSize,t=e.totalSize,r=(0,vB.z)(n),i=(0,vB.z)(t),o=(0,td.A)(function(){return(0,ez.eU)(n)},[n]),a=(0,td.A)(function(){return(0,ez.eU)(t)},[t]);return(0,f.FD)(f.FK,{children:[(0,f.FD)(P.EY,{css:W.wp.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,f.Y)(wE,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},wO=function(e){var n,t,r=e.connectionString,i=e.quotaLogicalSizeBytes,o=wm("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),a=o.data,l=o.loading,s=wm("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=s.data,u=s.loading,d=parseInt(null!==(t=null==a?void 0:null===(n=a.rows[0])||void 0===n?void 0:n.sum)&&void 0!==t?t:"0",10),p=null==c?void 0:c.rows.length;return l||u?(0,f.Y)(ed.ui,{elevated:!0,css:wU.loadingGhost,justify:"center",align:"center",row:!0,children:(0,f.Y)(tr.A,{})}):(0,f.FD)(L.S,{css:wU.storage,children:[(0,f.FD)(P.EY,{multiline:!1,children:[p," ",1===p?"table":"tables"]}),(0,f.Y)(wN,{dbSize:d,totalSize:i?parseInt(i,10):0x280000000})]})},wM=function(e){var n=e.neonDatabase,t=e.connectionString,r=e.onOpenDatabaseViewerClick,i=(0,iq._P)({controlName:"flag-detective-pikachu"}),o=(0,ax.Z)("drizzle-studio-announcement"),a=o.setAsDone,l=o.isLoading,s=o.isDone;return(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(L.S,{children:(0,f.Y)(wO,{connectionString:t,quotaLogicalSizeBytes:n.quotaLogicalSizeBytes})}),(0,f.Y)(wk,{connectionString:t}),(0,f.Y)(G.$n,{text:"See my data",iconLeft:(0,f.Y)(wL,{}),onClick:function(){r(),i&&a()}}),!i||l||s?null:(0,f.Y)(tK.N,{colorway:"primary",closable:!0,closeAction:a,title:"New: Database Studio",text:'Click "See my data" to launch the new Database editor. Modify, query, and visualize your data in an easy-to-use interface.'})]})},wB=(0,sm.v)(["databaseStatusColor"]),wH=wB.cssVars,wz=wB.styleTokens,wW=(0,z.x)({statusDot:[W.wp.width(8),W.wp.height(8),W.wp.backgroundColor.accentPositiveStronger,W.wp.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(wz.databaseStatusColor,")"),backgroundColor:wz.databaseStatusColor}],text:{color:wz.databaseStatusColor}});function wG(e){var n=e.isFrozen;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",style:(0,g._)({},wH.databaseStatusColor,n?eZ.LU.foregroundDimmest:eZ.LU.accentPositiveStronger),children:[n?null:(0,f.Y)(L.S,{css:wW.statusDot}),(0,f.FD)(P.EY,{css:wW.text,multiline:!1,children:["Database ",n?"paused":"connected"]}),n?(0,f.Y)(iV.A,{css:wW.text}):null]})}var wV=function(e){var n=e.psqlQueryResult,t=e.tableName,r=e.connectionString,i=e.scrollRef,o=n.data,a=n.loading,l=wS({tableName:t,connectionString:r});if(a)return(0,f.Y)(L.S,{css:[W.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(tr.A,{})});if(null==o?void 0:o.error)return(0,f.Y)(L.S,{css:[W.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(P.EY,{css:[W.wp.color.accentNegativeDefault,W.wp.maxWidth("100%")],children:null==o?void 0:o.error})});var s=o?wg(o):null;if(!s)return(0,f.Y)(L.S,{css:[W.wp.p(32)],row:!0,justify:"center",children:(0,f.Y)(P.EY,{css:[W.wp.color.accentPositiveDefault,W.wp.maxWidth("100%")],children:"No rows"})});var c=s.headerColumns,u=s.bodyData;return(0,f.Y)(wa,{headerColumns:c.map(function(e,n){var t,r=null==l?void 0:null===(t=l.rows)||void 0===t?void 0:t.find(function(n){return n.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,f.Y)(oL.a,{text:i}):null;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(P.EY,{multiline:!1,children:e}),o]},n)}),bodyData:u,scrollRef:i})},wj=function(e){var n=e.tableName,t=e.connectionString,r=wh(),i=(0,w.useRef)(null),o=wm('SELECT * FROM "'.concat(n.replace(/"/g,'""'),'" LIMIT ').concat(500),t),a=o.refetch;return(0,f.Y)(ws,{headerTitle:n,onGoBack:r,refresh:a,children:(0,f.Y)(L.S,{css:[W.wp.flex.growAndShrink(1),W.wp.overflow("auto")],innerRef:i,children:(0,f.Y)(wV,{psqlQueryResult:o,tableName:n,connectionString:t,scrollRef:i})})})},wZ=h.ZU.Literal("overview"),wq=h.ZU.Literal("commands"),wK=h.ZU.Literal("settings"),w$=h.ZU.Literal("drizzle-studio");h.ZU.Union([wZ,wq,wK,w$]);var wJ=h.ZU.Object({restoreToCommitId:h.ZU.Optional(h.ZU.String())}),wQ=h.ZU.Union([h.ZU.Object({type:wK,data:h.ZU.Optional(wJ)})]),wX=h.ZU.Optional(wQ);function w0(e){if(e&&m.WT.Check(wX,e))return e}var w1=(0,w.createContext)(void 0),w2=function(){var e=(0,w.useContext)(w1);if(!e)throw Error("useNeonPaneTabs must be used within a TabProvider");return e},w5=function(e){var n=e.children,t=e.initialOpenAtTab,r=e.performPaneOperation,i=(0,v._)((0,w.useState)(function(){return t?t.type:"overview"}),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(function(){return w0(t)}),2),s=l[0],c=l[1],u=(0,w.useRef)(t);(0,w.useEffect)(function(){t&&t!==u.current&&(u.current=t,a(t.type),c(w0(t)))},[t]);var d=(0,w.useCallback)(function(e){a(e),s&&(u.current=void 0,c(void 0),r({operation:"replace",pane:{type:"neon"}}))},[s,r]),p=(0,w.useMemo)(function(){return{selectedTab:o,openAtTab:s,selectTab:d}},[o,s,d]);return(0,f.Y)(w1.Provider,{value:p,children:n})},w4=t(89374),w3=t(61913),w8=t(42780),w7=t(47534),w6=t(87189),w9=t(45354),ye=t(26205),yn=(0,ez.eU)(""),yt=(0,ez.eU)(null),yr=(0,ez.eU)(null,function(e,n,t){var r=t.query;r&&n(yn,r);var i=e(yt);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),yi=t(11571),yo=t(48363),ya=(0,yi.tG)("replDatabasesQueryHistory",[]),yl=function(e,n){return!e.isPinned&&n.isPinned?1:e.isPinned&&!n.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof n.pinnedTimestamp?e.pinnedTimestamp-n.pinnedTimestamp:n.timestamp-e.timestamp},ys=function(e,n){var t=e.findIndex(function(e){return!e.isPinned&&e.data===n.data});-1!==t?e.splice(t,1,n):e.push(n),e.sort(yl);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},yc=t(68062),yu=t(6083),yd=t(58868),yp=t(7079),yf=function(e){var n=e.id,t=e.data,r=e.isPinned,i=(0,yo.yF)((0,w.useCallback)(function(e,t){var r=e(ya).find(function(e){return e.id===n}),i=(null==r?void 0:r.data)||"";i&&(t(yr,{query:i}),vS({action:"queryHistoryItemSelected"}))},[n])),o=(0,yo.yF)((0,w.useCallback)(function(e,t){var r=e(ya);t(ya,(0,aR.jM)(r,function(e){var t=e.find(function(e){return e.id===n});t&&(t.isPinned=!t.isPinned,t.isPinned?t.pinnedTimestamp=Date.now():t.pinnedTimestamp=void 0),e.sort(yl)})),vS({action:"queryHistoryItemPinned"})},[n]));return(0,f.FD)(L.S,{css:[{borderTop:"1px solid ".concat(eZ.LU.outlineDefault),":hover":{background:eZ.LU.backgroundHigher}},W.wp.flex.row,W.wp.p(8),W.wp.color.foregroundDimmer,W.wp.align.center,W.wp.cursor.pointer],onClick:i,children:[(0,f.Y)(P.EY,{css:[W.wp.flex.growAndShrink(1)],multiline:!1,children:t}),(0,f.Y)(eY.K0,{alt:"Pin query",onClick:o,children:r?(0,f.Y)(yp.A,{fill:eZ.LU.accentPrimaryDefault}):(0,f.Y)(yd.A,{})})]})},yh=function(e){var n=e.onExpand,t=(0,eW.md)(ya);return(0,f.Y)(R.A,{onClick:n,headerContent:(0,f.FD)(L.S,{row:!0,gap:8,css:[W.wp.p(2)],align:"center",children:[(0,f.Y)(m4.A,{}),(0,f.Y)(P.EY,{css:[W.wp.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,f.Y)(L.S,{gap:8,css:[W.wp.height("100%")],children:0===t.length?(0,f.Y)(L.S,{css:[W.wp.p(8)],children:(0,f.Y)(P.EY,{css:[W.wp.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,f.Y)(L.S,{children:t.map(function(e){return(0,f.Y)(yf,(0,en._)({},e),e.id)})})})})},ym=new nl.L(function(){return(0,na.qf)((0,nc.J)((0,f.Y)("div",{css:[{fontFamily:eZ.LU.fontFamilyCode},W.wp.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),yg=new nu.k(function(e){return na.Lz.domEventHandlers({keydown:function(n){"Enter"===n.key&&n.metaKey&&(n.stopPropagation(),e())}})}),yv=new nu.k(function(e){return no.Nb.high((0,w4.ll)((0,en._)({dialect:w4.Rv},e)))}),yw=function(e){var n=e.queryResult,t=e.scrollRef;if(null==n?void 0:n.error)return(0,f.Y)(L.S,{css:W.wp.px(8),children:(0,f.Y)(P.EY,{css:[W.wp.color.accentNegativeDefault],children:null==n?void 0:n.error})});if(!(null==n?void 0:n.rows))return null;var r=wg(n);if(!r)return(0,f.Y)(L.S,{css:W.wp.px(8),children:(0,f.Y)(P.EY,{css:[W.wp.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,f.Y)(L.S,{css:W.wp.px(8),children:(0,f.Y)(wa,{headerColumns:i,bodyData:o,scrollRef:t})})},yy=(0,nR.AH)([W.wp.height("100%"),W.wp.position.relative,W.wp.overflow("auto")]),yb=(0,nR.AH)([W.wp.position.sticky,W.wp.top(0),W.wp.left(0),W.wp.zIndex(1),W.wp.backgroundColor.backgroundDefault]),yS=function(e){var n=e.connectionString,t=e.performPaneOperation,r=(0,v._)((0,eW.fp)(yn),2),i=r[0],o=r[1],a=(0,C.A)(),l=a.ref,s=a.view,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];(0,w.useEffect)(function(){return function(){var e;o(null!==(e=null==s?void 0:s.state.doc.toString())&&void 0!==e?e:"")}},[o,null==s?void 0:s.state.doc]);var p=(0,eW.Xr)(yt);(0,w.useEffect)(function(){p(s)},[p,s]),wb({connectionString:n});var h=(0,eW.md)(wy),m=w7.u4,g=(0,w3.A)({filePath:m}),S=(0,k.A)().psql,Y=(0,v._)((0,w.useState)(),2),x=Y[0],_=Y[1],D=(0,v._)((0,w.useState)(!1),2),E=D[0],R=D[1],I=(0,yo.yF)((0,w.useCallback)(function(e,n,t){if(t){var r={id:(0,nP.A)(),data:t,timestamp:Date.now()},i=e(ya);n(ya,(0,aR.jM)(i,function(e){ys(e,r)}))}},[])),F=(0,w.useCallback)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!s)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),R(!0),I(e=null==s?void 0:s.state.doc.toString()),[4,S.run({query:e,connectionString:n})];case 2:return _(t.sent()),vS({action:"queryRan"}),[3,4];case 3:return R(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,S,I,s]),T=wf(),P=(0,w.useCallback)(function(){T("databaseManager")},[T]),U=(0,w.useCallback)(function(){T("tableSchemas")},[T]),N=(0,w.useRef)(null),O=yv.use({schema:h}),M=(0,iq._P)({controlName:"flag-postgresql-pane-inline-ai"}),B=(0,iQ.m5)(),H=(0,w6.MC)({path:m}),z=(0,w6.r9)({path:m}),V=(0,w6.o0)({path:m}),j=(0,ye.C)({generateCode:H,editCode:z,explainCode:V,onMoreClick:void 0}),Z=(0,w.useCallback)(function(){s&&H(s,"unknown")},[s,H]),q=(0,w.useCallback)(function(e){return t({operation:"open",pane:e,secondary:!0})},[t]),K=(0,w.useCallback)(function(){q({type:"ghostwriterChat"})},[q]),$=(0,w8.m)({onGenerateCode:Z,onReplyInChat:K}),J=(0,w9.U)({isMobile:B,generateCode:H,filePath:m}),Q=yg.use(F),X=(0,yc.Kg)();return(0,f.Y)(ws,{headerTitle:"Database Contents",onGoBack:P,children:(0,f.FD)(L.S,{css:[yy],gap:8,innerRef:N,children:[(0,f.FD)(L.S,{css:[W.wp.pb(8),u?null:yb],gap:8,children:[(0,f.FD)(L.S,{css:[{border:"1px solid ".concat(eZ.LU.outlineDefault)},W.wp.borderRadius(2)],children:[(0,f.Y)(A.Ay,{ref:l,filePath:m,css:[gz.$1,W.wp.backgroundColor.backgroundDefault,W.wp.borderRadius(8),W.wp.overflow("auto"),W.wp.minHeight(100),W.wp.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[M?[]:ym,O,g,M&&!B?j:[],M?$:[],M?J:[],Q]}),(0,f.Y)(yh,{expanded:u,onExpand:function(){d(function(e){return!e})}})]}),(0,f.Y)(rd.m_,{placement:"top",tooltip:(0,f.Y)(yu._y,{keyCombo:"".concat(X,"Enter"),fontSize:12}),children:(0,f.Y)(G.$n,{text:"Run Query",iconLeft:E?(0,f.Y)(tr.A,{}):(0,f.Y)(an.A,{}),onClick:F,disabled:E})})]}),(0,f.Y)(yw,{queryResult:x,scrollRef:N}),(0,f.Y)(L.S,{gap:8,css:[W.wp.py(8)],children:(0,f.Y)(G.$n,{css:W.wp.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,f.Y)(wL,{}),onClick:U})})]})})},yY=(0,z.x)({header:[W.wp.pt(1)]});function yA(e){var n=e.neonDatabase,t=e.currentUser,r=e.replId,i=e.connectionString,o=e.performPaneOperation,a=(0,iq._P)({controlName:"flag-detective-pikachu"}),l=(0,eW.md)(wp),s=wf(),c=w2().selectTab,u=(0,w.useCallback)(function(){if(a){c("drizzle-studio");return}s("queryEditor")},[s,a,c]);if("queryEditor"===l)return(0,f.Y)(yS,{connectionString:i,performPaneOperation:o});if("tableSchemas"===l)return(0,f.Y)(wC,{connectionString:i});if(l.startsWith("table/")){var d=l.slice(l.indexOf("/")+1);return(0,f.Y)(wj,{tableName:d,connectionString:i})}return(0,f.FD)(f.FK,{children:[n.isEphemeral&&!n.isFrozen?(0,f.Y)(vT.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime,currentUser:t}):null,(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(L.S,{css:yY.header,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.Y)(wG,{isFrozen:n.isFrozen})}),n.isFrozen?(0,f.Y)(vO,{neonDatabase:n,currentUser:t,replId:r}):(0,f.Y)(wM,{neonDatabase:n,connectionString:i,onOpenDatabaseViewerClick:u})]})]})}var yC=t(25204),yx=t.n(yC);function y_(){var e=(0,et._)(["\n  query DatabaseUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            neonComputeTime {\n              usage\n            }\n            neonDataStorage {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return y_=function(){return e},e}function yk(){var e=(0,et._)(["\n  mutation RollbackNeonDatabase($input: RollbackNeonDatabaseInput!) {\n    rollbackNeonDatabase(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RollbackNeonDatabaseResult {\n        database {\n          id\n        }\n      }\n    }\n  }\n"]);return yk=function(){return e},e}var yD={},yE=(0,er.J1)(y_()),yR=(0,er.J1)(yk()),yI=t(81663),yF=t(12309),yT=t(90161),yP=t(67414),yL=t(39711),yU=t(79029),yN=(0,z.x)({title:W.wp.pb(8),card:[W.wp.p(8),W.wp.borderRadius(8),{outline:"1px solid transparent"}],error:[W.wp.color.accentNegativeStronger],dialogMessage:[W.wp.flex.growAndShrink(1)],dialogButtonContainer:[W.wp.display.flex,W.wp.flex.row,W.wp.justify.end],list:[W.wp.fontSize(12),{li:[W.wp.pt(1),{"&:before":[W.wp.mr(4),{content:'""'}]}]}],statusDateInput:[{margin:"4px -4px 0"}]}),yO=new yF.p("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"});function yM(e){var n=e.timeZone,t=e.validationError,r=e.commitError;return t?(0,f.Y)(P.EY,{css:yN.error,children:t}):r?(0,f.Y)(P.EY,{css:yN.error,children:"Could not determine timestamp from agent rollback"}):(0,f.Y)(P.EY,{color:"dimmest",children:n})}function yB(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,o=e.validationError,a=e.onRestore,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1];return(0,f.FD)(f.FK,{children:[(0,f.Y)(G.$n,{text:t?"":r?"Restored":"Restore",loading:t,iconLeft:t?(0,f.Y)(tr.A,{}):void 0,disabled:!!i||!!o||!n||t||r,onClick:function(){return c(!0)},colorway:r?"positive":"primary"}),i&&(0,f.Y)(P.EY,{css:yN.error,children:i}),(0,f.Y)(la.a,{isOpen:s,onRequestClose:function(){return c(!1)},children:(0,f.FD)(L.S,{gap:16,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(t0.A,{size:20}),(0,f.Y)(P.Y9,{variant:"subheadDefault",level:1,children:"Restoring your database"})]}),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(P.EY,{multiline:!0,css:yN.dialogMessage,children:"Your database will be restored to it's past state at:"}),(0,f.Y)(tK.N,{text:n?yO.format(n.toDate()):"Could not determine restore date"}),(0,f.Y)(tK.N,{icon:(0,f.Y)(oK.A,{}),colorway:"warning",text:(0,f.FD)(f.FK,{children:["This action cannot be undone.",(0,f.Y)("br",{}),(0,f.FD)("ul",{css:yN.list,children:[(0,f.Y)("li",{children:"All current data will be replaced with data from this backup"}),(0,f.Y)("li",{children:"Any changes made after this backup point will be lost"}),(0,f.Y)("li",{children:"Connected services may need to be reconfigured"}),(0,f.Y)("li",{children:"If you've deployed, any production data changed after this time will be lost"})]})]})})]}),(0,f.Y)(L.S,{css:yN.dialogButtonContainer,children:(0,f.Y)(G.$n,{colorway:"primary",onClick:function(){c(!1),a(n)},text:"Continue"})})]})})]})}function yH(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,o=e.minValue,a=e.maxValue,l=e.isFrozen,s=e.validationError,c=e.timeZone,u=e.onChange,d=e.onRestore;return(0,f.FD)(f.FK,{children:[(0,f.Y)(yU.A,{granularity:"second",hourCycle:24,minValue:o,maxValue:a,value:n?(0,yT.tR)(n):void 0,onChange:u,"aria-labelledby":"restore-timestamp",isDisabled:l||t}),(0,f.Y)(yM,{timeZone:c,validationError:s}),(0,f.Y)(yB,{value:n,loading:t,onRestore:d,restored:r,error:i,validationError:s})]})}function yz(e){var n,t=e.restoreToCommitId,r=e.value,i=e.loading,o=e.restored,a=e.error,l=e.minValue,s=e.maxValue,c=e.isFrozen,u=e.validationError,d=e.timeZone,p=e.onChange,h=e.onRestore,m=(0,rV.A)((n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.getCommit({commit:t})];case 1:if((n=r.sent()).error)return[2,n];return[2,{timestamp:n.committer.date,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t]),g=(0,w.useMemo)(function(){if(m&&!m.error)return(0,yP.TL)(new Date(m.timestamp).toISOString(),d)},[m,d]),v=!r||(null==g?void 0:g.compare(r))===0;return((0,w.useEffect)(function(){!r&&g&&p((0,yT.tR)(g))},[r,g,p]),m&&m.error)?(0,f.Y)(tK.N,{text:m.error,colorway:"negative"}):(0,f.FD)(f.FK,{children:[(0,f.Y)(tK.N,{colorway:v?"blurple":void 0,text:(0,f.FD)(f.FK,{children:[v?"Restoring database to time of agent rollback":(0,f.FD)(L.S,{row:!0,gap:4,children:["Restoring database to selected timestamp,"," ",(0,f.Y)(G.$n,{text:"restore to agent rollback",variant:"underlined",size:"small",onClick:function(){g&&p((0,yT.tR)(g))}})]}),(0,f.Y)(L.S,{css:yN.statusDateInput,children:(0,f.Y)(yU.A,{granularity:"second",hourCycle:24,minValue:l,maxValue:s,value:r?(0,yT.tR)(r):void 0,onChange:p,"aria-labelledby":"restore-timestamp",isDisabled:c||i||!r})})]})}),(0,f.Y)(yM,{timeZone:d,validationError:u,commitError:null==m?void 0:m.error}),(0,f.Y)(yB,{value:r||g,loading:i,onRestore:h,restored:o,error:a,validationError:u})]})}function yW(e){return(0,f.FD)(f.FK,{children:[(0,f.Y)(cW.J,{variant:"text","aria-label":"restore-timestamp",children:"Timestamp"}),"restoreToCommitId"in e&&e.restoreToCommitId?(0,f.Y)(yz,(0,en._)({},e)):(0,f.Y)(yH,(0,en._)({},e))]})}function yG(e){var n,t,r=e.neonDatabase,i=e.restoreToCommitId,o=(0,_.A)(),a=(0,yL.Xj)(),l=(0,yL.tB)(a),s=r.historyRetentionSeconds,c=s/86400,u=(0,yP.TL)(new Date(r.timeCreated).toISOString(),a).add({minutes:1}),d=l.subtract({seconds:s}),p=d>u?d:u,h=(0,v._)((0,w.useState)(),2),m=h[0],g=h[1],y=(0,v._)((0,w.useState)(),2),b=y[0],S=y[1],Y=(0,v._)((0,w.useState)(!1),2),A=Y[0],C=Y[1],x=(0,v._)((0,w.useState)(),2),k=x[0],D=x[1],E=(0,v._)((n={onError:function(e){var n,t;n="rollbackNeonDatabase",t={replId:o,neonProjectId:r.projectId},rj.v4(function(r){r.setTag("neon-pane",!0),r.setTag("context",n),t&&r.setExtras(t),rj.Cp(e)}),D("Something went wrong.")},onCompleted:function(e){if("RollbackNeonDatabaseResult"!==e.rollbackNeonDatabase.__typename){D(e.rollbackNeonDatabase.message);return}C(!0)}},t=(0,en._)({},yD,n),lZ.n(yR,t)),2),R=E[0],I=E[1].loading;return(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{variant:"subheadDefault",css:yN.title,children:"Restore"}),(0,f.FD)(ed.ui,{elevated:!0,css:yN.card,gap:4,children:[(0,f.Y)(L.S,{children:(0,f.FD)(P.EY,{color:"dimmer",children:["Quickly restore a branch to any point in its recent history. Every database has a retention history of ",c," ",(0,tN.A)("day",c),"."]})}),r.isFrozen?(0,f.Y)(tK.N,{text:"Database is frozen. You cannot restore a database that has been frozen.",colorway:"warning",icon:(0,f.Y)(oK.A,{})}):(0,f.Y)(yW,{restoreToCommitId:i,value:m,loading:I,restored:A,error:k,minValue:p,maxValue:l,isFrozen:r.isFrozen,validationError:b,timeZone:a,onChange:function(e){A&&(C(!1),D(void 0));var n=(0,yT.uB)(e,a);g(n);var t=(0,yT.uB)(p,a),r=(0,yT.uB)(l,a);if(0>n.compare(t)){var i=yO.format(t.toDate());S("Timestamp is before the databases history retention period (".concat(i,")"));return}if(n.compare(r)>0){S("Timestamp is in the future");return}S(void 0)},onRestore:function(e){if(!e){D("Could not determine restore date");return}R({variables:{input:{neonProjectId:r.projectId,replId:o,timestamp:e.toAbsoluteString()}}})}})]})]})}var yV=t(20778),yj=t(1670),yZ=(0,z.x)({link:[W.wp.hover(W.wp.color.accentPrimaryStrongest)],title:W.wp.pb(8),wrapper:[W.wp.flex.grow(1)],card:[W.wp.colWithGap(4),W.wp.p(8),W.wp.borderRadius(8),{outline:"1px solid transparent"}],projectId:[{p:W.wp.color.foregroundDimmer}],remove:[W.wp.py(8)],removeConfirm:[W.wp.p(8),W.wp.colWithGap(8)]});function yq(){var e=(0,sd.ET)(),n=e.orgId,t=e.orgSlug,r=n&&t?"".concat((0,sp.EG)({slug:t}).usage.href,"#postgres-storage"):"/usage#postgres-storage";return(0,f.Y)(yx(),{legacyBehavior:!0,href:r,passHref:!0,children:(0,f.Y)("a",{css:yZ.link,children:(0,f.Y)(P.EY,{children:"View account resource limits"})})})}var yK=function(e){var n=e.replId,t=e.neonDatabase,r=(0,nL.A)().showError,i=(0,v._)((0,vI.BI)({refetchQueries:[{query:vI.Or,variables:{input:{replId:n}}}],update:function(e,t,r){var i=t.data,o=r.variables;if(null==i||!i.deleteNeonDatabase||"success"in i.deleteNeonDatabase){var a=e.readQuery({query:vI.Or,variables:{input:{replId:n}}});o&&(null==a?void 0:a.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:vI.Or,variables:{input:{replId:n}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.filter(function(e){return e.databaseId!==o.input.databaseId})}}})}}}),2),o=i[0],a=i[1].loading,l=(0,w.useCallback)(function(){d(!0)},[]),s=(0,w.useCallback)((0,y._)(function(){var e,i,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({variables:{input:{replId:n,databaseId:t.databaseId}}})];case 1:if(i=(e=l.sent()).data,a=e.errors,d(!1),a&&a.length>0)return r("Error when deleting Neon database: ".concat(null==a?void 0:a.join())),vS({action:"removed",success:!1}),[2];if((null==i?void 0:i.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return r("Error: ".concat(null==i?void 0:i.deleteNeonDatabase.message)),vS({action:"removed",success:!1}),[2];return(null==i?void 0:i.deleteNeonDatabase.success)?vS({action:"removed",success:!0}):(r("Error: Delete Neon Database failed."),vS({action:"removed",success:!1})),[2]}})}),[o,t.databaseId,n,r]),c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];return{isPendingDelete:u,cancelDelete:(0,w.useCallback)(function(){d(!1)},[]),removeDatabase:s,deleteLoading:a,handleRemoveDatabaseClick:l}},y$=function(e){var n=yK({replId:e.replId,neonDatabase:e.neonDatabase}),t=n.isPendingDelete,r=n.cancelDelete,i=n.removeDatabase,o=n.deleteLoading,a=n.handleRemoveDatabaseClick;return(0,f.Y)(f.FK,{children:t||o?(0,f.FD)(ed.ui,{css:yZ.removeConfirm,elevated:!0,children:[(0,f.Y)(P.EY,{children:"Removing this database will permanently destroy all the data."}),(0,f.Y)(tK.N,{icon:(0,f.Y)(oK.A,{}),colorway:"warning",text:"This action cannot be undone."}),(0,f.Y)(G.$n,{text:"Yes, Remove Database",colorway:"negative",disabled:o,iconLeft:(0,f.Y)(rg.A,{}),onClick:i}),(0,f.Y)(G.$n,{autoFocus:!0,text:"Cancel",disabled:o,onClick:r})]}):(0,f.Y)(G.$n,{css:yZ.remove,text:"Remove Database",disabled:o,iconLeft:(0,f.Y)(rg.A,{}),onClick:a})})};function yJ(e){var n,t=e.neonDatabase,r=e.openAtTabData,i=(0,_.A)(),o=(n=(0,en._)({},yD,void 0),ei.I(yE,n)).data,a=(0,w.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.__typename)==="CurrentUser"){var i=null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.neonComputeTime.usage,a=i.resources.neonDataStorage.usage,l=(0,yj.h7)(o,{resourceUsageType:"Hours"}),s=(0,yj.h7)(a,{resourceUsageType:"GiB"}),c=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{computeTimeUsageFormatted:"".concat(l," of compute time used this billing period"),storageUsageFormatted:"".concat(s," of storage used this billing period"),renewalInfo:"Renews ".concat(c," ")}}}}({data:o})},[o]),l=(0,iq._P)({controlName:yI.g5,logFlagToAnalytics:!1});return(0,f.FD)(L.S,{justify:"space-between",css:yZ.wrapper,children:[(0,f.FD)(L.S,{gap:12,children:[(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{variant:"subheadDefault",css:yZ.title,children:"Database ID"}),(0,f.Y)(ed.ui,{elevated:!0,css:yZ.card,children:(0,f.Y)(yV.Ay,{css:yZ.projectId,children:"".concat(t.projectId)})})]}),(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{variant:"subheadDefault",css:yZ.title,children:"Account resource usage"}),(0,f.Y)(ed.ui,{elevated:!0,css:yZ.card,children:a?(0,f.FD)(f.FK,{children:[(0,f.FD)(L.S,{children:[(0,f.Y)(P.EY,{color:"dimmer",multiline:!1,children:null==a?void 0:a.computeTimeUsageFormatted}),(0,f.Y)(P.EY,{color:"dimmer",multiline:!1,children:null==a?void 0:a.storageUsageFormatted}),(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:null==a?void 0:a.renewalInfo})]}),(0,f.Y)(yq,{})]}):(0,f.Y)(L.S,{justify:"center",row:!0,children:(0,f.Y)(tr.A,{})})})]}),l?(0,f.Y)(yG,{neonDatabase:t,restoreToCommitId:null==r?void 0:r.restoreToCommitId}):null]}),(0,f.Y)(y$,{replId:i,neonDatabase:t})]})}var yQ=function(e){var n=e.size;return(0,f.FD)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===n?16:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,f.Y)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,f.Y)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,f.FD)("defs",{children:[(0,f.FD)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#B9FFB3"}),(0,f.Y)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,f.FD)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,f.Y)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},yX=(0,nR.AH)([W.wp.color.foregroundDimmest,{textDecoration:"underline"}]),y0=function(){return(0,f.Y)(L.S,{gap:8,css:[W.wp.py(8),W.wp.width("100%")],children:(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)("a",{target:"_blank",href:wT,css:yX,children:"Docs"}),(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(P.EY,{css:[W.wp.fontSize(14)],multiline:!1,children:"Powered by"}),(0,f.Y)(yQ,{})]})]})})},y1=t(27495);function y2(){return(0,f.Y)("div",{children:"Loading..."})}var y5=t.n(y1)()(function(){return Promise.all([t.e(9964),t.e(2609),t.e(1679)]).then(t.bind(t,81679)).then(function(e){return e.DrizzleStudio_DO_NOT_USE_OR_YOU_WILL_BE_FIRED})},{loadableGenerated:{webpack:function(){return[81679]}},ssr:!1,loading:function(){return(0,f.Y)(y2,{})}}),y4=function(e){var n,r=(0,v._)((0,w.useState)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t.e(3807).then(t.bind(t,86188))];case 1:return[2,e.sent().neon]}})})),1)[0];return(0,w.useCallback)((n=(0,y._)(function(n){var t,i,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:[],i=o.length>2?o[2]:void 0,[4,r];case 1:return[4,a.sent()(e)(n,t,{arrayMode:(null==i?void 0:i.mode)==="array"})];case 2:return[2,a.sent()]}})}),function(e){return n.apply(this,arguments)}),[r,e])};function y3(e){var n=e.connectionString,t=e.databaseId,r=y4(n);return(0,t8.M)(t3.AZ.DRIZZLE_STUDIO_USED,{action:"opened"}),(0,f.Y)(y5,{databaseId:"".concat(t.toString(),"-").concat(n),queryFn:r})}var y8=t(81273),y7=t(29390),y6=t(14487),y9=t.n(y6),be=t(66891),bn={tab:{color:"--tab-color",borderBottomColor:"--tab-border-bottom-color"},tabList:{boxShadow:"--tab-list-box-shadow"}},bt=function(e){return"var(".concat(e,")")},br=(0,z.x)({tab:[W.wp.display.flex,W.wp.reset.button,W.wp.position.relative,W.wp.rowWithGap(8),W.wp.p(8),W.wp.borderRadius(4,4,0,0),W.wp.align.center,{marginBottom:-1,color:bt(bn.tab.color),userSelect:"none"},oP.b.listItem,{paddingBottom:7,borderWidth:0,borderBottomWidth:"1px",borderBottomColor:bt(bn.tab.borderBottomColor)},{".with-dividers &":{"&:not(:last-child)":{marginRight:1},"&:not(:last-child)::after":{content:'""',position:"absolute",display:"block",width:1,height:16,backgroundColor:eZ.LU.outlineDefault,right:-1}}}],tabSpan:[{display:"inline-block",lineHeight:1}],tabList:[W.wp.display.flex,W.wp.flex.grow(0),W.wp.flex.row,W.wp.align.stretch,{paddingBottom:1,boxShadow:bt(bn.tabList.boxShadow)}],tabPanel:[W.wp.focusRing,{'&[data-inert="true"]':{display:"none"}}]}),bi=function(e){var n,t=e.isSelected,r=e.isFocused,i=e.isDisabled,o="transparent";r?o=eZ.LU.accentPrimaryDefault:t&&(o=eZ.LU.foregroundDefault);var a=eZ.LU.foregroundDimmer;return t?a=eZ.LU.foregroundDefault:i&&(a=eZ.LU.foregroundDimmest),n={},(0,g._)(n,bn.tab.color,a),(0,g._)(n,bn.tab.borderBottomColor,o),n},bo=function(e){var n=e.withUnderline;return(0,g._)({},bn.tabList.boxShadow,n?"inset 0 -1px 0 ".concat(eZ.LU.outlineDimmest):"none")};function ba(e){var n=e.children,t=e.onSelectionChange,r=e.defaultSelectedKey,i=(0,t7._)(e,["children","onSelectionChange","defaultSelectedKey"]);return(0,y8.wR)()?null:(0,f.Y)(sU.tU,(0,nr._)((0,en._)({},i),{onSelectionChange:t,defaultSelectedKey:r,children:n}))}var bl=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.withUnderline,i=e.withDividers,o=e.className,a=(0,t7._)(e,["children","withUnderline","withDividers","className"]);return(0,f.Y)(sU.wb,(0,nr._)((0,en._)({ref:n},a),{className:y9()(o,void 0!==i&&i&&"with-dividers"),css:br.tabList,style:bo({withUnderline:void 0===r||r}),children:t}))}),bs=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.id,i=(0,t7._)(e,["children","id"]);return(0,f.Y)(sU.Kp,(0,nr._)((0,en._)({id:r,ref:n},i),{css:br.tabPanel,children:t}))}),bc=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.iconRight,o=e.as,a=e.href,l=e.shallow,s=e.scroll,c=(0,t7._)(e,["children","iconLeft","iconRight","as","href","shallow","scroll"]),u=(0,en._)((0,nr._)((0,en._)({},c),{css:br.tab,style:function(e){return bi({isSelected:e.isSelected,isFocused:e.isFocusVisible,isDisabled:e.isDisabled})}}),(0,be.J)({as:o,href:a,shallow:l,scroll:s}));return"function"==typeof t?(0,f.Y)(sU.oz,(0,nr._)((0,en._)({ref:n},u),{children:function(e){return(0,f.FD)(f.FK,{children:[r,(0,f.Y)("span",{css:br.tabSpan,children:t(e)}),i]})}})):(0,f.FD)(sU.oz,(0,nr._)((0,en._)({ref:n},u),{children:[r,(0,f.Y)("span",{css:br.tabSpan,children:t}),i]}))});function bu(e){var n=e.children;return"function"==typeof n?(0,f.Y)(y7.pM,{children:n}):(0,f.Y)(f.FK,{children:n})}var bd=(0,z.x)({wrapper:[W.wp.flex.column,W.wp.flex.grow(1)],studioTabPanel:[W.wp.flex.column,W.wp.flex.grow(1)],overviewTabPanel:[W.wp.colWithGap(8),W.wp.flex.column,W.wp.flex.grow(1),W.wp.p(12)],docs:[vb.A,W.wp.maxWidth("100%")],footer:[W.wp.pt(16),W.wp.px(8)],settingsTabPanel:[W.wp.flex.column,W.wp.flex.grow(1),W.wp.p(12)],title:[W.wp.py(8),W.wp.my(8),{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:eZ.LU.outlineDefault}]}),bp=function(e){var n,t=e.neonDatabases,r=e.currentUser,i=e.performPaneOperation,o=(0,iq._P)({controlName:"flag-detective-pikachu"}),a=t[0],l=(0,_.A)(),s=w2(),c=s.selectedTab,u=s.selectTab,d=s.openAtTab,p=(0,eW.md)(eV);if("string"!=typeof vw({connectionString:a.connectionString,databaseName:a.databaseName}).get(vf))throw Error("Expected host to be set");var h=p||((n=new URL(a.connectionString.replace("postgres://","https://").replace("postgresql://","https://"))).pathname="/".concat(a.databaseName),n.search="?sslmode=require",n.toString().replace("https://","postgresql://"));return(0,f.FD)(ba,{css:bd.wrapper,onSelectionChange:u,selectedKey:c,children:[(0,f.FD)(bl,{withDividers:!1,children:[(0,f.Y)(bc,{id:"overview",iconLeft:(0,f.Y)(rf.A,{}),children:"Overview"}),o?(0,f.Y)(bc,{id:"drizzle-studio",iconLeft:(0,f.Y)(t0.A,{}),isDisabled:a.isFrozen,children:"My Data"}):null,(0,f.Y)(bc,{id:"commands",iconLeft:(0,f.Y)(hf.A,{}),children:"Commands"}),(0,f.Y)(bc,{id:"settings",iconLeft:(0,f.Y)(af.A,{}),children:"Settings"})]}),(0,f.FD)(bu,{children:[(0,f.Y)(bs,{id:"overview",css:bd.overviewTabPanel,children:(0,f.Y)(yA,{neonDatabase:a,currentUser:r,replId:l,connectionString:h,performPaneOperation:i})}),o?(0,f.Y)(bs,{id:"drizzle-studio",css:bd.studioTabPanel,children:a.isFrozen?(0,f.Y)(tK.N,{text:"This database is frozen and cannot be used.",colorway:"warning",icon:(0,f.Y)(oK.A,{})}):(0,f.Y)(y3,{connectionString:h,databaseId:a.databaseId})}):null,(0,f.FD)(bs,{id:"commands",css:bd.overviewTabPanel,children:[(0,f.Y)(yV.Ay,{css:bd.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: See [Neon documentation](https://neon.tech/docs/connect/connection-pooling) for connection pooling.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"}),(0,f.Y)(L.S,{css:bd.title,children:(0,f.Y)(P.EY,{variant:"subheadBig",multiline:!1,children:"Environment variables"})}),(0,f.Y)(vx,{connectionString:h,databaseName:a.databaseName})]}),(0,f.Y)(bs,{id:"settings",css:bd.settingsTabPanel,children:(0,f.Y)(yJ,{neonDatabase:a,openAtTabData:(null==d?void 0:d.type)==="settings"&&(null==d?void 0:d.data)?d.data:void 0})})]}),(0,f.Y)(L.S,{css:bd.footer,children:(0,f.Y)(y0,{})})]})};function bf(){var e=(0,et._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createDatabase {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return bf=function(){return e},e}var bh={},bm=(0,er.J1)(bf()),bg=t(76813),bv=t(2969),bw=(0,z.x)({cta:[W.wp.width("100%"),W.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[W.wp.colWithGap(8),W.wp.align.center],ctaStatusBanner:[W.wp.textAlign.left],payment:[W.wp.p(16),W.wp.borderRadius(12),W.wp.textAlign.left,W.wp.shadow(2)],detailsItem:[W.wp.display.grid,W.wp.gap(16),{gridTemplateColumns:"56px auto",gap:16}],detailsText:[W.wp.flex.growAndShrink(1),W.wp.textAlign.left]});function by(e){var n=e.loading,t=e.createDatabaseAuthz,r=e.handleOnCreate,i=e.refetchUbbCapabilitiesQueryData,o=e.setShowPaymentMethodForm,a=e.showPaymentMethodForm,l=e.setShowSupportForm,s=e.replId,c=(0,iQ.m6)();if(!t)return(0,f.Y)(L.S,{css:bw.ctaContainer,children:(0,f.Y)(tr.A,{})});if(!t.isAuthorized&&c)return(0,f.Y)(tK.N,{text:t.message,colorway:"warning",icon:(0,f.Y)(oK.A,{}),css:bw.ctaStatusBanner});switch(t.code){case h9.S4.RequiresPaymentMethodOrSubscription:case h9.S4.RequiresActiveSubscription:return(0,f.FD)(L.S,{css:bw.ctaContainer,children:[(0,f.Y)(i1.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to create a database",css:bw.cta,colorway:"primary",variant:"outlined",disabled:a,onPlanCheckoutComplete:i}),(0,f.Y)(G.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:bw.cta,disabled:a,loading:n,iconLeft:(0,f.Y)(cr.A,{}),onClick:function(){return o()}})]});case h9.S4.RequiresSmsVerification:return(0,f.Y)(vF.A,{context:h9.SG.Neon,onSuccess:i});case h9.S4.RequiresPaymentMethod:return(0,f.Y)(G.$n,{colorway:"primary",text:"Add a payment method",css:bw.cta,disabled:a,loading:n,iconLeft:(0,f.Y)(cr.A,{}),onClick:function(){return o()}});case h9.S4.RequiresUnbanning:return(0,f.Y)(uf.d,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,f.Y)(oK.A,{}),css:bw.ctaStatusBanner,onClick:function(){return l()}});case h9.S4.InsufficientBudget:return(0,f.FD)(f.FK,{children:[(0,f.Y)(tK.N,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,f.Y)(oK.A,{}),css:bw.ctaStatusBanner}),(0,f.Y)(vP.h,{onUpdateSuccess:i,replId:s})]});case h9.S4.FeatureDisabled:case h9.S4.FeatureUnsupportedForReplitTeams:case h9.S4.FeatureUnsupportedForTeamsEdu:case h9.S4.FeatureUnsupportedForTeamsFree:case h9.S4.FeatureUnsupportedForTeamsPro:case h9.S4.InsufficientPermissions:case h9.S4.InsufficientQuota:case h9.S4.RequiresActiveTeamsSubscription:case h9.S4.RequiresEmailVerification:return(0,f.Y)(tK.N,{text:t.message,colorway:"warning",icon:(0,f.Y)(oK.A,{}),css:bw.ctaStatusBanner});case h9.S4.Authorized:case h9.S4.AuthorizedQuota:return(0,f.Y)(G.$n,{colorway:"primary",onClick:r,css:bw.cta,text:n?"":"Create a database",iconLeft:n?(0,f.Y)(tr.A,{}):(0,f.Y)(f.FK,{}),loading:n});default:(0,aI.A)(t.code)}}var bb=function(){var e,n,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,_.A)(),c=(0,nL.A)().showError,u=(e={notifyOnNetworkStatusChange:!0,variables:{replId:s},onError:function(e){c(e.message)}},n=(0,en._)({},bh,e),ei.I(bm,n)),d=u.loading,p=u.data,h=u.refetch,m=(0,k.A)(),g=m.psql,S=vC(m.secrets),Y=(0,v._)((0,vI.ou)({refetchQueries:[{query:vI.Or,variables:{input:{replId:s}}}],onError:function(e){c("Error when creating Neon database: ".concat(e.message)),vS({action:"created",success:!1})},update:function(e,n){var t=n.data;(null==t?void 0:t.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"&&e.writeQuery({query:vI.Or,variables:{input:{replId:s}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:[t.createNeonDatabase.database]}}})},onCompleted:function(e){return(0,y._)(function(){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if((null==e?void 0:e.createNeonDatabase.__typename)!=="CreateNeonDatabaseResult")return[3,5];if(!(0,bv.I)(e.createNeonDatabase.database))return c("Error: could not create database, please try again"),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,g.ensureNixPsqlModuleInstalled(!0)];case 2:return r.sent(),S({connectionString:(n=e.createNeonDatabase.database).connectionString,databaseName:n.databaseName}),vS({action:"created",success:!0}),[3,4];case 3:return t=r.sent(),c("Error: ".concat(t.message)),[3,4];case 4:return[3,6];case 5:return c("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),vS({action:"created",success:!1}),[2];case 6:return[2]}})})()}}),2),A=Y[0],C=Y[1].loading,x=(null==p?void 0:p.repl.__typename)==="Repl"?p.repl.authorizations.createDatabase:void 0;return(0,f.FD)(f.FK,{children:[(0,f.Y)(la.a,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,f.Y)(vL.A,{onRequestClose:function(){return l(!1)}})}),(0,f.Y)(tZ.A,{pane:{type:"neon"},maxWidth:450,body:(0,f.FD)(L.S,{gap:16,children:[(0,f.FD)(L.S,{css:bw.detailsItem,children:[(0,f.Y)(bg.Y9,{}),(0,f.FD)(P.EY,{css:bw.detailsText,children:["Get charged for what you use across compute time and storage (",(0,f.Y)("a",{href:wP,target:"_blank",rel:"noopener",children:"see pricing"}),")."]})]}),(0,f.FD)(L.S,{css:bw.detailsItem,children:[(0,f.Y)(bg.iw,{}),(0,f.FD)(P.EY,{css:bw.detailsText,children:["Replit ",i0.en," members receive $",aC.Qz,"/month in credits to offset expenses (",(0,f.Y)("a",{href:wP,target:"_blank",rel:"noopener",children:"see allocations"}),")."]})]})]}),action:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(tq.v,{href:wT,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,f.Y)(t$.A,{}),text:"Learn more"}),(0,f.Y)(by,{replId:s,loading:d||C,createDatabaseAuthz:x,handleOnCreate:function(){A({variables:{input:{replId:s}}})},refetchUbbCapabilitiesQueryData:h,setShowPaymentMethodForm:function(){return i(!0)},showPaymentMethodForm:r,setShowSupportForm:function(){return l(!0)}}),r?(0,f.Y)(ed.ui,{elevated:!0,css:bw.payment,children:(0,f.Y)(ck.y,{onSuccess:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return i(!1),[4,h()];case 1:return e.sent(),[2]}})}),context:"workspace_postgresql_pane"})}):null]})})]})},bS=t(51570);let bY=function(e){var n=e.performPaneOperation,t=(0,bS.q)(),r=t.loading,i=t.neonDatabases,o=t.currentUser,a=(0,eW.md)(eG);return a&&o?(0,f.Y)(bp,{neonDatabases:[a],currentUser:o,performPaneOperation:n}):0===i.length&&r?(0,f.Y)(tZ.A,{pane:{type:"neon"},maxWidth:450,loading:!0}):i.length>0&&o?(0,f.Y)(bp,{neonDatabases:i,currentUser:o,performPaneOperation:n}):(0,f.Y)(bb,{})};var bA=t(46186),bC=h.ZU.Object({type:h.ZU.Literal("neon"),data:h.ZU.Optional(h.ZU.Object({openAtTab:wQ}))}),bx={Content:function(e){var n=e.pane.data,t=e.options;return(0,f.Y)(w5,{initialOpenAtTab:null==n?void 0:n.openAtTab,performPaneOperation:t.performPaneOperation,children:(0,f.Y)(bY,{performPaneOperation:t.performPaneOperation})})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.blueStrongest,size:n},children:(0,f.Y)(bA.A,{})})},getTitle:function(){return"Database"},description:"Fully-managed, usage-based PostgreSQL database with 10GB of fast read/write storage",category:n$.bY.CloudServices,decode:function(e){return m.WT.Decode(bC,e)}},b_=t(85311),bk=t(23033),bD=t(46097),bE=t(26325),bR=t(37535),bI="VNC ports do not require external port",bF=(0,z.x)({self:[W.wp.p(12),W.wp.colWithGap(16)],secondaryUrl:[W.wp.color.foregroundDimmest,W.wp.fontSize("small"),W.wp.focusRing,{"&:hover":[W.wp.cursor.pointer,W.wp.color.accentPrimaryStrongest]}],portHeader:[W.wp.align.baseline],openPort:[W.wp.color.accentPositiveStronger],localPortIcon:[W.wp.color.foregroundDefault,W.wp.px(4),{flex:"0 0 auto",marginLeft:"auto"}],portStatus:[W.wp.py(0),W.wp.px(4),W.wp.overflow("hidden")],newPort:[W.wp.color.foregroundDefault,W.wp.rowWithGap(4),W.wp.align.center,W.wp.my(1),W.wp.borderRadius(16),W.wp.height(20)],externalPortButton:[{"&":[W.wp.height(20),W.wp.borderRadius(16),W.wp.color.foregroundDefault]}],textButton:[W.wp.cursor.pointer,W.wp.reset.button,W.wp.color.accentPrimaryStronger,W.wp.focusRing,W.wp.hover(W.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[W.wp.height(20),W.wp.my(1)],newPortClose:W.wp.mr(4),vncTooltip:[W.wp.flex.growAndShrink(1)]});function bT(e){var n,t,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,s=(0,k.A)().ports.updateDotReplitPortsMapping,c=(n=(0,k.A)().ports,r=new Set(null==(t=(0,es.A)(n.portsState))?void 0:t.map(function(e){var n;return null!==(n=(0,bk.Zd)(e.configuration))&&void 0!==n&&n}).filter(Boolean)),Array.from(bk.ZA).sort(function(e,n){return e-n}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,f.Y)(L.S,{row:!0,children:void 0!==o&&0!==o?(0,f.Y)(G.$n,{css:bF.externalPortButton,iconRight:(0,f.Y)(dI.A,{}),text:":".concat(o),size:"small",onClick:function(){i&&(s(i,void 0,a),null==l||l())}}):(0,f.Y)(bR.in,{label:"Set external port",onAction:function(e){if(i){var n=c.find(function(n){return String(n.externalPort)===e});n&&n.isAvailable&&(s(i,n.externalPort,a),null==l||l())}},children:c.map(function(e){var n=e.isAvailable,t=e.externalPort;return(0,f.Y)(bR.Dr,{id:String(t),"aria-label":String(t),isDisabled:!n,label:":".concat(t)},String(t))})})})}function bP(e){var n=e.portState,t=null;switch(n.configuration.type){case bk.gH.MISCONFIGURED:t=(0,f.Y)(rd.m_,{tooltip:"Port misconfigured",delay:"default",children:(0,f.Y)(oK.A,{})});break;case bk.gH.CONFIG_MISSING:t=(0,f.Y)(rd.m_,{tooltip:"Configuration missing",delay:"default",children:(0,f.Y)(oK.A,{})});break;case bk.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:t=(0,f.Y)(oK.A,{});break;case bk.gH.FORWARDED:t=(0,f.Y)(tm.A,{});case bk.gH.INTERNAL_ONLY:}return(0,f.Y)("span",{css:bF.localPortIcon,children:t})}function bL(e){var n=e.portState,t=e.width,r=(0,bk.s$)(n.configuration)?"localhost":"0.0.0.0";return(0,f.FD)(bD.VP,{width:t||130,children:[(0,f.FD)(P.EY,{css:n.isOpen&&bF.openPort,children:[r,":",n.configuration.localPort]}),(0,f.Y)(bP,{portState:n})]})}function bU(e){var n=e.portState,t=e.openWebview,r=e.openVncOutput,i=e.width;if(n.configuration.type===bk.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,f.Y)(bD.VP,{width:i||180,children:(0,f.Y)(tK.N,{css:bF.portStatus,icon:(0,f.Y)(oK.A,{}),text:"No ports available"})});var o=!!r&&n.configuration.isVnc,a=!o&&!!t&&n.isOpen&&n.configuration.type===bk.gH.FORWARDED;return(0,f.FD)(bD.VP,{width:i||180,children:[n.configuration.isVnc?(0,f.Y)(rd.m_,{tooltip:bI,css:bF.vncTooltip,children:(0,f.Y)(tK.N,{css:bF.portStatus,icon:(0,f.Y)(rf.A,{}),text:bI})}):(0,f.Y)(bT,{localPort:n.configuration.localPort,externalPort:(0,bk.Zd)(n.configuration),isLocalhost:(0,bk.s$)(n.configuration)}),a?(0,f.Y)(eY.K0,{alt:"Open in Webview",onClick:t,css:W.wp.color.foregroundDefault,children:(0,f.Y)(rH.A,{})}):null,o?(0,f.Y)(eY.K0,{alt:"View VNC output",onClick:r,css:W.wp.color.foregroundDefault,children:(0,f.Y)(rH.A,{})}):null]})}function bN(e){var n,t=e.portState;return t.isOpen?(0,f.FD)(f.FK,{children:[(0,f.Y)(bD.VP,{width:100,children:(n=t.processInfo.cmdline[0].split("/"))[n.length-1]}),(0,f.Y)(bD.VP,{width:100,children:t.processInfo.pid})]}):(0,f.Y)(bD.VP,{width:100})}var bO=function(e){return e.OPEN_WEBVIEW="OPEN_WEBVIEW",e.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",e.EXTERNAL_LINK="EXTERNAL_LINK",e.REMOVE="REMOVE",e}(bO||{});function bM(e){var n=e.portState,t=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,f.Y)(rp.A,{})},{label:"Remove port config",key:"REMOVE",icon:(0,f.Y)(rg.A,{})}];return n.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,f.Y)(rH.A,{})}):r.unshift({label:"Open webview",key:"OPEN_WEBVIEW",icon:(0,f.Y)(rH.A,{})}),(0,f.Y)(bD.VP,{width:30,last:!0,children:(0,f.Y)(bR.in,{trigger:(0,f.Y)(eY.K0,{alt:"More",children:(0,f.Y)(s$.A,{})}),items:r,onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":t({type:e,payload:{portState:n}})}},children:function(e){return(0,f.Y)(bR.Dr,{label:e.label,icon:e.icon},e.key)}})})}function bB(e){var n=e.portState,t=e.portAction;return(0,f.FD)(bD.fI,{children:[(0,f.Y)(bL,{portState:n}),(0,f.Y)(bU,{portState:n,openWebview:function(){t({type:"OPEN_WEBVIEW",payload:{portState:n}})},openVncOutput:function(){t({type:"OPEN_VNC_OUTPUT",payload:{portState:n}})}}),(0,f.Y)(bN,{portState:n}),(0,f.Y)(bM,{portState:n,onAction:t})]},n.configuration.localPort)}var bH=function(e){var n=e.text,t=e.onClick;return(0,f.Y)("button",{css:bF.textButton,onClick:t,children:n})};function bz(e){var n,t=e.openDotReplit,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(),2),l=a[0],s=a[1],c=null===(n=(0,k.A)().ports.portsState.current)||void 0===n?void 0:n.some(function(e){return e.configuration.localPort===l});return i?(0,f.FD)(bD.fI,{children:[(0,f.FD)(bD.VP,{width:130,children:[(0,f.Y)(eY.K0,{css:bF.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,f.Y)(dI.A,{})}),(0,f.Y)(eA.pd,{css:bF.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return s(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,f.Y)(bD.VP,{children:c?(0,f.Y)(tK.N,{css:bF.portStatus,colorway:"warning",text:"Local port already exists"}):(0,f.Y)(bT,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,f.FD)(bD.fI,{children:[(0,f.Y)(bD.VP,{width:130,children:(0,f.Y)(G.$n,{css:bF.newPort,iconLeft:(0,f.Y)(rm.A,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,f.Y)(bD.VP,{children:(0,f.FD)(P.EY,{variant:"small",children:["This port config is saved in the"," ",(0,f.Y)(bH,{text:".replit file",onClick:t}),"."," "]})})]})}function bW(e){var n,t=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=e.ports,a=e.container,l=(0,iE.A)(),s=(0,b_.Ik)({container:a,ports:o,noDevToolsSuffix:l}),c=(0,nL.A)().showError,u=(0,k.A)().ports,d=u.portsState,p=u.removeDotReplitPortsMapping,h=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var n=(0,bk.Zd)(e.payload.portState.configuration);if(!(null==s?void 0:s.presentationUrl)){c("URL not available.");return}var t=(0,b_.jq)(null==s?void 0:s.presentationUrl,n).toString();window.open(t,"_blank");break;case"REMOVE":p(e.payload.portState.configuration.localPort,(0,bk.Zd)(e.payload.portState.configuration))}};return(0,f.FD)(L.S,{css:bF.self,children:[(null==s?void 0:s.presentationUrl)?(0,f.FD)(f.FK,{children:[(0,f.Y)(bE.A,{url:s.presentationUrl}),(0,f.Y)(lV.a,{})]}):null,(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(L.S,{css:bF.portHeader,row:!0,gap:8,children:[(0,f.Y)(P.EY,{children:"Ports"}),(0,f.Y)(yx(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/workspace-features/webview",passHref:!0,children:(0,f.Y)("a",{css:bF.secondaryUrl,target:"_blank",children:"Learn more"})})]}),(0,f.FD)(bD.XI,{children:[(0,f.FD)(bD.fI,{children:[(0,f.Y)(bD.VP,{header:!0,width:130,children:"Internal Port"}),(0,f.Y)(bD.VP,{header:!0,width:180,children:"External Port"}),(0,f.Y)(bD.VP,{header:!0,width:100,children:"Name"}),(0,f.Y)(bD.VP,{header:!0,width:100,children:"Pid"})]}),d.current&&(null===(n=d.current)||void 0===n?void 0:n.length)>0?d.current.map(function(e){return(0,f.Y)(bB,{portState:e,portAction:h},e.configuration.localPort)}):null,(0,f.Y)(bz,{openDotReplit:t})]})]})]})}var bG=t(8631),bV=h.ZU.Object({type:h.ZU.Literal("networking")}),bj={Content:function(e){var n,t=e.options.performPaneOperation,r=(0,nL.A)().showError,i=(0,k.A)(),o=i.fs,a=i.container,l=i.ports;return(0,f.Y)(bW,{openDotReplit:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,o.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return t({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(n=(0,y._)(function(e){return(0,b.YH)(this,function(n){return t({operation:"open",pane:{type:"webview",data:{ports:e?{type:"local",port:e}:void 0}},secondary:!0}),[2]})}),function(e){return n.apply(this,arguments)}),openVncOutput:(0,y._)(function(){return(0,b.YH)(this,function(e){return t({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})}),container:a,ports:l})},Icon:function(e){var n=e.size;return(0,f.Y)(bG.A,{size:n})},getTitle:function(){return"Networking"},description:"Configure web server ports for your App",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(bV,e)}},bZ=t(29975),bq=t(80149),bK=h.ZU.Object({type:h.ZU.Literal("objectStorage")}),b$={Content:bZ.A,Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.tealStrongest,size:n},children:(0,f.Y)(bq.A,{})})},getTitle:function(){return"Object Storage"},description:"Persistent, shared file storage which can be accessed programmatically in your App",category:n$.bY.CloudServices,decode:function(e){return m.WT.Decode(bK,e)}},bJ=t(34494),bQ=t.n(bJ),bX=t(74976),b0=t(94614),b1=(0,z.x)({create:[W.wp.p(8)],canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0}});function b2(e){var n=e.data,t=e.onSave,r=(0,w.useRef)(null),i=(0,w.useRef)(null),o=(0,k.A)().fs,a=(0,nL.A)(),l=a.showError,s=a.showConfirm,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,t9.A)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,w.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=bQ()({canvas:e,data:n}),a=function(){return t(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[n,t,r]),(0,f.FD)(f.FK,{children:[(0,f.Y)("canvas",{css:b1.canvas,ref:function(e){r.current=e,p(e)},tabIndex:0}),(0,f.Y)(la.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,f.Y)(b0.A,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current){d(!1);return}var n="".concat(e,".png"),t=i.current.curFrame().toPNG();o.writeFile(n,eQ.A.from(t)).then(function(e){if(e.error){l("Failed to write to file ".concat(n));return}s("Successfully exported to ".concat(n)),d(!1)})}})})]})}function b5(e){var n,t=e.activeFile,r=(0,k.A)().fs,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1],u=(0,nL.A)().showError,d=t.endsWith(".kbmsprite");(0,w.useEffect)(function(){var e=!1;function n(){return(n=(0,y._)(function(){var n,i,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,r.readFile(t)];case 1:if(n=l.sent(),a(!1),e)return[2];if(n.error)return u("failed to read ".concat(t)),[2];return o=(i=n.content.toString())&&JSON.parse(i),c(d?(0,bX.L)(o):o),[2]}})})).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){e=!0}},[r,t,u,d]);var p=(0,w.useCallback)((n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!d)return[3,2];return[4,(0,bX.t)(e)];case 1:e=n.sent(),n.label=2;case 2:return[4,r.writeFile(t,eQ.A.from(JSON.stringify(e)))];case 3:return n.sent().error&&u("Failed to save ".concat(t,", please try again")),[2]}})}),function(e){return n.apply(this,arguments)}),[r,t,u,d]);return o?(0,f.Y)(tr.A,{}):s?(0,f.Y)(b2,{data:s,onSave:p}):(0,f.Y)(b4,{onCreate:function(e){return c(e)}})}function b4(e){var n=e.onCreate,t=(0,v._)((0,w.useState)(""),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(""),2),a=o[0],l=o[1],s=Number(r),c=Number(a);return(0,f.FD)(L.S,{css:b1.create,gap:8,children:[(0,f.Y)(P.EY,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,f.Y)(eA.pd,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,f.Y)(eA.pd,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,f.Y)(G.$n,{text:"Create",disabled:!(s>0&&c>0),onClick:function(){n({width:Math.ceil(s),height:Math.ceil(c)})}})]})}var b3=t(10001),b8=h.ZU.Object({type:h.ZU.Literal("pedit"),data:h.ZU.Object({path:h.ZU.String()})}),b7={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(b6,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(b3.A,{size:n})},getTitle:function(e){return(0,te.WP)(e.data.path)},category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(b8,e)}};function b6(e){var n=e.path,t=e.performPaneOperation,r=(0,n2.KA)({path:n,performPaneOperation:t});return(0,tn.Qt)(function(){if(r)return{commands:r}},[r]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n2.ou,{path:n,performPaneOperation:t}),(0,f.Y)(n2.UC,{children:(0,f.Y)(b5,{activeFile:n})})]})}var b9=t(83766),Se=(0,z.x)({badge:[W.wp.backgroundColor.backgroundHighest,W.wp.borderRadius(4),{padding:"0 0.35em"}],container:[W.wp.p(8),W.wp.colWithGap(8)],header:[W.wp.py(4),W.wp.justify.spaceBetween,W.wp.flex.grow(1),W.wp.pr(16),W.wp.height(24)],result:[W.wp.borderRadius(4),W.wp.overflow("hidden")],problems:[W.wp.px(6),W.wp.py(6)]});function Sn(e){var n=e.isActive,t=e.performPaneOperation,r=(0,v._)((0,w.useState)({}),2),i=r[0],o=r[1],a=(0,H.t3)(),l=(0,tn.gB)(),s=(0,w.useCallback)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,n=r.value;if("codeEditor"===n[1].type){var t=l(n[0]);if(t&&"codeEditor"===t.type){var i=n[1].data.path,a=null===(e=t.fetchProblems)||void 0===e?void 0:e.call(t);i&&a&&o(function(e){return(0,nr._)((0,en._)({},e),(0,g._)({},i,a))})}}}()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},[l,a]);return((0,w.useEffect)(function(){n&&s()},[n,s]),(0,tn.Qt)(function(){return{type:"problems",updateProblems:function(e,n){o(function(t){return(0,nr._)((0,en._)({},t),(0,g._)({},e,n))})}}},[o]),Object.values(i).some(function(e){return e.length>0}))?(0,f.Y)(L.S,{css:Se.container,children:Object.keys(i).map(function(e){return 0===i[e].length?null:(0,f.Y)(ed.ui,{elevated:!0,css:Se.result,children:(0,f.Y)(R.A,{chevron:"end",defaultExpanded:!0,headerContent:(0,f.FD)(L.S,{css:Se.header,row:!0,gap:8,align:"center",children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(tt.A,{path:e}),(0,f.Y)(P.EY,{children:e})]}),(0,f.Y)(L.S,{css:Se.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,f.Y)(L.S,{css:Se.problems,children:i[e].map(function(n,r){var i=n.range.start.line+1,o=n.range.start.character;return(0,f.Y)(b9.A,{problem:n,onClick:function(){t({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})}):(0,f.Y)(tZ.A,{pane:{type:"problems"},maxWidth:450,bodyText:"No problems found in your workspace \uD83C\uDF89"})}function St(e){return(0,f.Y)(nQ.Ay,(0,nr._)((0,en._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Zm7.225 4.496a.75.75 0 0 1-.153 1.05L8.254 10l1.873 1.399a.75.75 0 1 1-.897 1.202l-2.679-2a.75.75 0 0 1 0-1.202l2.679-2a.75.75 0 0 1 1.05.152Zm3.44 0a.75.75 0 0 1 1.05-.152l2.679 2a.75.75 0 0 1 0 1.202l-2.679 2a.75.75 0 1 1-.897-1.202L15.746 10l-1.873-1.399a.75.75 0 0 1-.152-1.05Z",clipRule:"evenodd"})}))}var Sr=h.ZU.Object({type:h.ZU.Literal("problems")}),Si={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(Sn,{isActive:t,performPaneOperation:r})},Icon:function(e){var n=e.size;return(0,f.Y)(St,{size:n})},getTitle:function(){return"Problems"},description:"View problems in your code detected by static analysis tools like type checkers and linters",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Sr,e)}},So=t(7897);function Sa(){var e=(0,et._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return Sa=function(){return e},e}function Sl(){var e=(0,et._)(["\n  fragment ProjectMergeSectionCurrentUser on CurrentUser {\n    id\n  }\n"]);return Sl=function(){return e},e}var Ss=(0,er.J1)(Sa()),Sc=(0,er.J1)(Sl());function Su(){var e=(0,et._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return Su=function(){return e},e}function Sd(){var e=(0,et._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return Sd=function(){return e},e}function Sp(){var e=(0,et._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return Sp=function(){return e},e}function Sf(){var e=(0,et._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return Sf=function(){return e},e}function Sh(){var e=(0,et._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Sh=function(){return e},e}var Sm=(0,er.J1)(Su()),Sg=(0,er.J1)(Sd(),So.a$),Sv=(0,er.J1)(Sp(),Sg),Sw=(0,er.J1)(Sf(),Ss);function Sy(){var e=(0,et._)(["\n  query ProjectPane($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n    currentUser {\n      ...ProjectMergeSectionCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return Sy=function(){return e},e}Sh();var Sb={},SS=(0,er.J1)(Sy(),Sw,Sv,Sm,Sc),SY=t(63314),SA=t(33351),SC=function(){var e=(0,v._)((0,w.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},Sx=function(e){var n,t=e.ours,r=e.theirs,i=(0,v._)(SC(),2),o=i[0],a=i[1],l=(0,rV.A)((n=(0,y._)(function(e){var n,i,o,a,l,s,c;return(0,b.YH)(this,function(u){switch(u.label){case 0:return[4,Promise.all([e.log({max:100,revRange:t}),null!==r?e.log({max:100,revRange:"".concat(t,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(t)}):null])];case 1:if(n=u.sent(),o=(i=(0,v._)(n,3))[0],a=i[1],l=i[2],o.error)return[2,o];if(null==a?void 0:a.error)return[2,a];if(null==l?void 0:l.error)return[2,l];return[2,{error:null,both:o.commits,theirs:null!==(s=null==a?void 0:a.commits)&&void 0!==s?s:[],ours:null!==(c=null==l?void 0:l.commits)&&void 0!==c?c:[]}]}})}),function(e){return n.apply(this,arguments)}),[t,r,o]);return[(0,w.useMemo)(function(){return null===l?{error:null}:l.error?l:{error:null,both:pC(l.both,l.theirs,l.ours),theirs:l.theirs,ours:l.ours}},[l]),a]},S_=function(){var e,n=(0,k.A)().git,t=(0,v._)((0,w.useState)({loading:!1,error:null}),2),r=t[0],i=t[1];return[(0,w.useCallback)((e=(0,y._)(function(e){var t,r,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return t=e.remote,r=e.branch,a=void 0!==(o=e.allowConflicts)&&o,i({loading:!0,error:null}),[4,n.pull({mode:rG.Xo.MERGE,allowConflicts:a,experimental_override_remote:{name:t,branch:r}})];case 1:return(l=s.sent()).error?i({loading:!1,error:l.error}):(i({loading:!1,error:null}),n.forceRefresh()),[2]}})}),function(n){return e.apply(this,arguments)}),[n]),r]},Sk=function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,S,Y,A,C,x,_=e.selectedReplId,k=(n=null!=_?_:null,(r=(0,rV.A)((t=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!n)return[2,{hasStarted:!1,error:null,remote:null}];return[4,py({git:e,replId:n})];case 1:if((t=r.sent()).error)return[2,{hasStarted:!0,error:t.error}];return[2,{hasStarted:!0,error:null,remote:t.remote}]}})}),function(e){return t.apply(this,arguments)}),[n]))&&r.hasStarted?r.error?{state:"Error",error:r.error}:{state:"Success",error:null,remote:r.remote}:{state:"Loading",error:null}),D=(0,v._)(S_(),2),E=D[0],R=D[1],I=(0,v._)((o=(i=(0,v._)(SC(),2))[0],a=i[1],[(0,rV.A)((l=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return l.apply(this,arguments)}),[o]),a]),2),F=I[0],T=I[1],P=(0,v._)((c=(s=(0,v._)(SC(),2))[0],u=s[1],[(0,rV.A)((d=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return d.apply(this,arguments)}),[c]),u]),1)[0],L=(0,v._)(Sx({ours:"main",theirs:_?pw({replId:_,branch:"main"}):null}),2),U=L[0],N=L[1],O=(0,v._)((f=(p={remoteName:_?pv(_):null,onCompleted:function(){T(),N()}}).remoteName,h=p.onCompleted,g=(m=(0,v._)((0,w.useState)(!1),2))[0],S=m[1],A=(Y=(0,v._)(SC(),2))[0],C=Y[1],(0,rV.A)((x=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2,{error:null}];return S(!0),[4,e.fetch({remote:f})];case 1:return n=t.sent(),S(!1),null==n.error&&h(),[2,n]}})}),function(e){return x.apply(this,arguments)}),[f,A]),[g,C]),2);return{state:F,status:P,commits:U,isFetching:O[0],refetch:O[1],remote:k,pull:{state:R,doPull:function(e){"Success"===k.state&&E((0,nr._)((0,en._)({},e),{remote:k.remote.name}))}}}},SD=(0,w.createContext)(null);function SE(){var e=(0,w.useContext)(SD);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}var SR=t(88829);function SI(){var e=(0,et._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return SI=function(){return e},e}function SF(){var e=(0,et._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return SF=function(){return e},e}var ST={},SP=(0,er.J1)(SI(),Sg),SL=(0,er.J1)(SF(),SP),SU=t(62906),SN=t(40641),SO=(0,z.x)({replSelector:[W.wp.minWidth(300)],item:[W.wp.display.grid,W.wp.overflow("hidden"),{gap:4,gridAutoRows:"min-content",gridAutoFlow:"row",whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),SM={username:"Unknown User",image:""},SB=function(e){var n,t,r,i=e.replId,o=e.onSelect,a=e.selectedReplId,l=(0,t7._)(e,["replId","onSelect","selectedReplId"]),s=(0,v._)((0,w.useState)(""),2),c=s[0],u=s[1],d=(0,SU.A)(c,250),p=(0,nL.A)().showError,h=(0,v._)((0,w.useState)({options:[],mainRepl:null,nextCursor:null}),2),m=h[0],g=h[1],S=(n={variables:{id:i,replsInput:{count:10,filters:{title:{search:d}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var n,t,r,i=e&&"Repl"===e.repl.__typename&&(null===(n=e.repl.project)||void 0===n?void 0:n.__typename)==="Project"?e.repl.project:null,o=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&o||p("Something went wrong loading Apps - please try again."),g({mainRepl:null!==(t=null==i?void 0:i.mainRepl)&&void 0!==t?t:null,nextCursor:(null==o?void 0:o.pageInfo.hasNextPage)&&o.pageInfo.nextCursor?o.pageInfo.nextCursor:null,options:null!==(r=null==o?void 0:o.items)&&void 0!==r?r:[]})}},t=(0,en._)({},ST,n),ei.I(SL,t)),Y=S.loading,A=S.refetch,C=S.networkStatus,x=(r=(0,y._)(function(){var e,n,t,r,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!(m.nextCursor&&C!==SR.p.fetchMore))return[3,2];return n=m.options,[4,A({id:i,replsInput:{count:10,filters:{title:{search:d}},cursor:m.nextCursor}})];case 1:(r=(t=l.sent())&&"Repl"===t.data.repl.__typename&&(null===(e=t.data.repl.project)||void 0===e?void 0:e.__typename)==="Project"&&"ReplConnection"===t.data.repl.project.repls.__typename?t.data.repl.project.repls:null)||p("Something went wrong loading Apps - please try again."),a=null!==(o=null==r?void 0:r.items)&&void 0!==o?o:[],g((0,nr._)((0,en._)({},m),{nextCursor:(null==r?void 0:r.pageInfo.hasNextPage)&&r.pageInfo.nextCursor?r.pageInfo.nextCursor:null,options:n.concat(a)})),l.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)}),_=(0,td.A)(function(){var e=m.mainRepl,n=m.options.filter(function(e){return e.id!==i});return""===d&&e&&e.id!==i?[e].concat((0,ee._)(n.filter(function(n){return n.id!==e.id}))):n},[m,i,d]),k=(0,v._)((0,w.useState)(!1),2),D=k[0],E=k[1];(0,w.useEffect)(function(){if(!D){var e=_.find(function(e){return e.id===a});e&&(E(!0),""===c&&u(e.title))}},[D,c,a,_]);var R=(0,e1.A)(o),I=(0,w.useCallback)(function(e){var n=_.find(function(n){return n.id===e});n&&(R.current(n),u(n.title))},[_,R]);return(0,f.Y)(SN.a,(0,nr._)((0,en._)({menuTrigger:"focus",inputValue:c,onInputChange:function(e){u(e)},onSelectionChange:I,items:_,selectedKey:a,css:SO.replSelector,isLoading:Y,allowsEmptyCollection:!0,onLoadMore:x,emptyMessage:"No Apps found",maxHeight:200},l),{children:function(e){var n,t,r,i;return(0,f.FD)(F.if,{textValue:e.title,children:[(0,f.Y)(dZ.e,{src:null!==(r=null===(n=e.owner)||void 0===n?void 0:n.image)&&void 0!==r?r:SM.image,username:null!==(i=null===(t=e.owner)||void 0===t?void 0:t.username)&&void 0!==i?i:SM.username,size:24}),(0,f.FD)(L.S,{css:SO.item,children:[(0,f.Y)(P.EY,{children:e.title}),(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(P.EY,{children:e.owner?"@".concat(e.owner.username):""}),m.mainRepl&&m.mainRepl.id===e.id?(0,f.Y)(oL.a,{text:"Main Repl",variant:"filled"}):null]})]})]})}}))},SH=t(6710),Sz=t(42796).hp,SW=[{"& > span:first-child-of-type":[W.wp.flex.grow(1),W.wp.textAlign.left]},{"& > span":[W.wp.flex.shrink(1)]},W.wp.height("auto"),W.wp.p(8),W.wp.fontWeight.medium,W.wp.backgroundColor.backgroundHigher,W.wp.flex.row,W.wp.align.center,W.wp.justify.spaceBetween,W.wp.overflow("hidden"),W.wp.cursor.pointer],SG=(0,z.x)({buttonFolded:[SW,W.wp.borderRadius(8)],buttonUnfolded:[SW,W.wp.borderRadius(8,8,0,0)],rowContainer:[W.wp.position.relative,W.wp.zIndex(1),W.wp.overflow("hidden")],diffContainer:[W.wp.flex.grow(1),W.wp.borderRadius(8)],bodyContainer:[W.wp.borderRadius(0,0,8,8),W.wp.p(8),W.wp.display.flex,W.wp.flex.row,W.wp.flex.wrap,W.wp.align.center,W.wp.justify.center,W.wp.backgroundColor.backgroundDefault,W.wp.border({color:eZ.LU.outlineDimmer,direction:"bottom"}),W.wp.border({color:eZ.LU.outlineDimmer,direction:"left"}),W.wp.border({color:eZ.LU.outlineDimmer,direction:"right"})],bodyLoading:[W.wp.p(8)],noChangesContainer:[W.wp.py(8),W.wp.px(8),W.wp.center,W.wp.width("100%")],innerContainer:[W.wp.display.flex,W.wp.align.center],splitContainer:[W.wp.p(8),W.wp.display.flex,W.wp.flex.row,W.wp.justify.spaceBetween,W.wp.maxWidth("100%"),W.wp.align.center],splitChild:[{flexBasis:"50%"}]}),SV=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(L.S,{css:t?SG.buttonFolded:SG.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(L.S,{css:[SG.rowContainer,W.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(tt.A,{path:o}),(0,f.Y)(P.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(P.EY,{multiline:!1,color:"dimmest",css:[W.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(tm.A,{}),(0,f.Y)(tt.A,{path:a}),(0,f.Y)(P.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(P.EY,{multiline:!1,color:"dimmest",css:[W.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(tt.A,{path:a}),(0,f.Y)(P.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(P.EY,{multiline:!1,color:"dimmest",css:[W.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(I.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(L.S,{css:SG.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(r9,{type:i.status}),(0,f.Y)(eY.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(ir.A,{}):(0,f.Y)(ii.A,{})})]})]})},Sj=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(r3,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(A.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[r$.X.of(no.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},SZ=function(e){return(0,te.FN)(e)?"media":(0,te.m6)(e)?"ot":"binary"},Sq=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(L.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(ie.jM,{src:(0,ie.p4)(n,(0,te.P7)(r)),fileName:r,mime:(0,te.P7)(r)})});case"ot":return(0,f.Y)(A.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},SK=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.initial.content===n.final.content)return(0,f.Y)(L.S,{css:SG.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(L.S,{css:SG.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,SH.A)(Sz.from(n.initial.content))?"binary":SZ(n.initial.filename),o=(0,SH.A)(Sz.from(n.final.content))?"binary":SZ(n.final.filename);if("binary"===i||"binary"===o)return(0,f.Y)(L.S,{css:SG.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(L.S,{css:SG.noChangesContainer,children:(0,f.Y)(L.S,{css:SG.innerContainer,children:(0,f.Y)(ie.jM,{src:(0,ie.p4)(n.final.content,(0,te.P7)(n.final.filename)),fileName:n.final.filename,mime:(0,te.P7)(n.final.filename)})})});case"ot":return(0,f.Y)(L.S,{css:SG.noChangesContainer,children:(0,f.Y)(A.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(L.S,{css:SG.noChangesContainer,children:(0,f.Y)(P.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===o?(0,f.Y)(Sj,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(L.S,{css:SG.splitContainer,children:[(0,f.Y)(L.S,{css:SG.splitChild,align:"center",justify:"center",children:(0,f.Y)(Sq,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(L.S,{css:SG.splitChild,children:(0,f.Y)(Sq,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},S$=function(e){var n,t=e.diff,r=e.fetchDiffFileContents,i=e.splitOrUnified,o=(0,v._)((0,w.useState)({expanded:!1,loading:!1,content:null,error:null}),2),a=o[0],l=o[1],s=(n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(l((0,nr._)((0,en._)({},a),{expanded:!e,loading:null==a.content})),e)return[3,2];return[4,r(t)];case 1:n=i.sent(),l(function(e){return(0,nr._)((0,en._)({},e),{loading:!1,error:n.error?n.error:null,content:null==n.error?{initial:n.content.base,final:n.content.head}:null})}),i.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.FD)(L.S,{css:SG.diffContainer,children:[(0,f.Y)(SV,{folded:!a.expanded,setFolded:s,diff:t}),a.expanded?(0,f.FD)(ed.ui,{css:SG.bodyContainer,elevated:!0,children:[a.error?(0,f.Y)(tK.N,{colorway:"negative",icon:(0,f.Y)(oK.A,{}),text:a.error}):null,a.loading?(0,f.Y)(L.S,{css:SG.bodyLoading,children:(0,f.Y)(tr.A,{})}):null,a.content?(0,f.Y)(SK,{diff:(0,nr._)((0,en._)({},t),{initial:(0,nr._)((0,en._)({},t.initial),{content:a.content.initial}),final:(0,nr._)((0,en._)({},t.final),{content:a.content.final})}),splitOrUnified:i}):null]}):null]},t.id)},SJ=function(e){return e.Git="Git",e.Fs="Fs",e}({});function SQ(){return(SQ=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.path,[4,e.fs.readFile(n,{fromDisk:!0})];case 1:if((t=r.sent()).error)return[2,{content:null,error:t.error}];return[2,{content:t.content.toString("utf8"),error:null}]}})})).apply(this,arguments)}function SX(e){return S0.apply(this,arguments)}function S0(){return(S0=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(n=e.file,t=e.fs,r=e.git,"Fs"!==n.type)return[3,2];return[4,function(e){return SQ.apply(this,arguments)}({path:n.path,fs:t})];case 1:case 3:return[2,i.sent()];case 2:return[4,r.getFileContents({path:n.path,revision:n.revision,convertToBase64:(0,te.FN)(n.path)})]}})})).apply(this,arguments)}function S1(e){return S2.apply(this,arguments)}function S2(){return(S2=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return n=e.fs,t=e.git,r=e.base,i=e.head,s=Promise.all,[4,SX({git:t,fs:n,file:i})];case 1:return c=[p.sent()],[4,SX({git:t,fs:n,file:r})];case 2:return[4,s.apply(Promise,[c.concat([p.sent()])])];case 3:if(a=(o=v._.apply(void 0,[p.sent(),2]))[0],(l=o[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(a.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!==(u=l.content)&&void 0!==u?u:"",head:null!==(d=a.content)&&void 0!==d?d:""}}]}})})).apply(this,arguments)}var S5={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},S4={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"};function S3(e){switch(e){case rG.PX.UNMODIFIED:return null;case rG.PX.MODIFIED:return rG.Os.MODIFIED;case rG.PX.TYPE_CHANGED:return rG.Os.TYPE_CHANGED;case rG.PX.DELETED:return rG.Os.DELETED;case rG.PX.RENAMED:return rG.Os.RENAMED;case rG.PX.COPIED:return rG.Os.COPIED;case rG.PX.UNTRACKED:case rG.PX.UNMERGED:case rG.PX.ADDED:return rG.Os.ADDED;default:(0,aI.A)(e)}}var S8=function(e,n){return""===e?n:"".concat(e,"/").concat(n)};function S7(e,n){return n.filter(function(n){var t="".concat(n.final.path,"/").concat(n.final.filename),r="".concat(n.initial.path,"/").concat(n.initial.filename);return t.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}function S6(e){var n=e.children,t=e.headerContent;return(0,f.FD)(L.S,{gap:16,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Changed Files"}),t]}),n]})}function S9(e){var n,t,r,i,o,a,l,s,c,u=(0,k.A)(),d=u.fs,p=u.git,h=(0,v._)((0,w.useState)(""),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)("Split"),2),Y=S[0],A=S[1],C=(n={type:"revisionToRevisionDiff",head:e.head,base:e.base},t=(0,nr._)((0,en._)({},n),{flags:(0,nr._)((0,en._)({},S5),{nameStatus:!0})}),i=(0,rV.A)((r=(0,y._)(function(e){var n,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=function(e){var n,t=e.base,r=null!==(n=e.flags)&&void 0!==n?n:S5,i=["git","diff"];switch(Object.keys(r).forEach(function(e){S4[e]&&i.push(S4[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(t,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",t);break;default:(0,aI.A)(e)}return i}(t),[4,e.escapeHatchGitExecRead(n.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((r=i.sent()).error||null===r.output)return[2,{error:rG.uA.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return r.apply(this,arguments)})),o=(0,td.A)(function(){return null==i?{loading:!0,error:null,data:null}:i.error?{loading:!1,error:i.error,data:null}:{loading:!1,error:null,data:i.diff}},[i]),(0,td.A)(function(){if(null==o||o.loading)return{loading:!0,error:null,data:null};if(o.error)return{loading:!1,error:o.error,data:null};var e,n=null!==(e=o.data)&&void 0!==e?e:"",t=(0,rG.By)(n),r=(0,rG.GM)(n);return{loading:!1,error:null,data:Array.from(new Set((0,ee._)(t).concat((0,ee._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var n,t;return{id:(0,nP.A)(),status:e.type,initial:{filename:(0,te.WP)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),path:(0,te._6)(null!==(t=e.originalPath)&&void 0!==t?t:e.path)},final:{filename:(0,te.WP)(e.path),path:(0,te._6)(e.path)}}})}},[o])),x=(0,td.A)(function(){var e;return S7(m,null!==(e=C.data)&&void 0!==e?e:[])},[m,C]),_=(a=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,S1({git:p,fs:d,base:{type:SJ.Git,revision:e.base,path:S8(n.initial.path,n.initial.filename)},head:{type:SJ.Git,revision:e.head,path:S8(n.final.path,n.final.filename)}})];case 1:return[2,t.sent()]}})}),function(e){return a.apply(this,arguments)}),D=(l=SE().status,s=(0,td.A)(function(){return l&&null==l.error?l.changes:[]},[l]),(0,td.A)(function(){return s.map(function(e){var n,t,r,i,o=null!==(r=null!==(t=S3(e.type.worktree))&&void 0!==t?t:S3(e.type.index))&&void 0!==r?r:rG.Os.UNKNOWN,a=null!==(i=null===(n=e.source)||void 0===n?void 0:n.path)&&void 0!==i?i:e.path;return{id:(0,nP.A)(),status:o,initial:{filename:(0,te.WP)(a),path:(0,te._6)(a)},final:{filename:(0,te.WP)(e.path),path:(0,te._6)(e.path)}}})},[s])),E=(0,td.A)(function(){return S7(m,D)},[m,D]),R=(c=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,S1({git:p,fs:d,base:{type:SJ.Git,revision:"HEAD",path:S8(e.initial.path,e.initial.filename)},head:{type:SJ.Fs,path:S8(e.final.path,e.final.filename)}})];case 1:return[2,n.sent()]}})}),function(e){return c.apply(this,arguments)});return C.loading?(0,f.Y)(S6,{children:(0,f.Y)(tr.A,{})}):C.error||null==C.data?(0,f.Y)(S6,{children:(0,f.Y)(P.EY,{children:"Something went wrong. Please try another Repl."})}):0===C.data.length&&0===D.length?(0,f.Y)(S6,{children:(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(aW.A,{}),(0,f.Y)(P.EY,{children:"No changes to merge"})]})}):(0,f.Y)(S6,{headerContent:(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(il,{value:Y,onChange:A}),(0,f.Y)(dQ.I,{value:m,onChange:function(e){g(e.target.value)},onClear:function(){g("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,f.FD)(L.S,{gap:12,children:[E.length?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(P.Y9,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),E.map(function(e){return(0,f.Y)(S$,{diff:e,splitOrUnified:Y,fetchDiffFileContents:R},e.id)})]}):null,x.length?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(P.Y9,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),x.map(function(e){return(0,f.Y)(S$,{diff:e,splitOrUnified:Y,fetchDiffFileContents:_},e.id)})]}):null]})})}var Ye=function(e){var n=e.selectedRepl,t=e.isMainRepl,r=pw({replId:n.id,branch:"main"}),i="HEAD";return(0,f.Y)(S9,{base:t?i:r,head:t?r:i})};function Yn(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,k.A)().fs;return(0,w.useEffect)(function(){var e=!1,n=r.watchPathStat(".gitignore",{onNewStat:function(n){e||t(!n.exists)},onError:function(){}});return function(){e=!0,n()}},[r]),n?(0,f.Y)(tK.N,{icon:(0,f.Y)(rf.A,{}),text:(0,f.FD)(P.EY,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,f.Y)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}var Yt=t(53055);function Yr(e){var n,t=e.selectedRepl,r=(0,rV.A)((n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=t.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(n.state!==rG.Gi.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})}),function(e){return n.apply(this,arguments)})),i=null==r?void 0:r.message;return(0,f.FD)(L.S,{gap:12,children:[(0,f.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,f.FD)(P.EY,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",t?(0,f.Y)(yx(),(0,nr._)((0,en._)({target:"_blank"},(0,Yt.q1)(t,{initialPaneType:"project"})),{children:t.title})):"a fork","."]}),i?(0,f.Y)(tK.N,{icon:(0,f.Y)(rf.A,{}),colorway:"negative",text:i}):null]})}var Yi=t(20797),Yo=t(26211);function Ya(){var e=(0,et._)(["\n  query PushToRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return Ya=function(){return e},e}var Yl={},Ys=(0,er.J1)(Ya(),Yo.c,Yo.N),Yc=t(7942),Yu=t(86848),Yd=t(55902),Yp=t(12139);function Yf(){return(Yf=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.git,t=e.commitMessage,[4,n.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,n.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==rG.Gi.DIRTY_INDEX)return[3,4];return[4,n.commit({message:t})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})})).apply(this,arguments)}var Yh=(0,z.x)({infoIcon:[W.wp.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}}),Ym=function(e){return e.CannotMerge="CannotMerge",e.NothingToMerge="NothingToMerge",e.OnlyUncommittedChanges="OnlyUncommittedChanges",e.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",e.OnlyCommittedChanges="OnlyCommittedChanges",e}(Ym||{}),Yg=function(){var e,n,t=SE(),r=t.commits,i=t.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==rG.UN.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var o=i.state===rG.Gi.DIRTY_WORKTREE||i.state===rG.Gi.DIRTY_INDEX,a=!!((null==r?void 0:null===(e=r.ours)||void 0===e?void 0:e.length)&&(null==r?void 0:null===(n=r.ours)||void 0===n?void 0:n.length)>0);return o&&!a?"OnlyUncommittedChanges":o&&a?"UncommittedAndCommittedChanges":!o&&a?"OnlyCommittedChanges":"NothingToMerge"};function Yv(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,S,Y,A,C,x,_,D,E,R,I=e.sourceRepl,F=e.destinationRepl,T=e.projectId,U=e.mainReplId,N=e.orgId,O=e.currentUser,M=(0,nL.A)().showError,B=(0,nO.c)()("includeUncommittedChanges"),H=(0,v._)((0,w.useState)(!1),2),z=H[0],W=H[1],V=(0,v._)((t=(n={destinationReplId:F.id,sourceReplId:I.id,onSuccess:function(e){var n=e.didAutoCommit;(0,SA.L)({action:"merge",orgId:N,projectId:T,autoCommitEnabled:n,sourceReplType:I.id===U?"mainRepl":"devRepl",destinationReplType:F.id===U?"mainRepl":"devRepl"})}}).sourceReplId,r=n.destinationReplId,i=n.onSuccess,o=(0,k.A)().git,a=(0,w.useRef)(null),s=(l=(0,v._)((0,w.useState)(!1),2))[0],c=l[1],d=(u=(0,nL.A)()).showError,p=u.showConfirm,h={variables:{id:r}},m=(0,en._)({},Yl,h),g=ei.I(Ys,m),S=(0,w.useCallback)(function(){if(!g.data)return null;var e=g.data,n=e.repl,t=e.currentUser;if(!t||"Repl"!==n.__typename)return null;if(a.current){if(a.current.replId===n.id&&a.current.currentUserId===t.id)return a.current;a.current.container.close()}var r=(0,Yc.Ay)({onUnrecoverableError:function(e){rj.Cp(e,{tags:{projects:!0},extra:{replid:n.id}})}});r.connect({context:(0,Yu.O)({repl:n,currentUser:t}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,w7.Ay)({container:r}),o=(0,Yd.A)({container:r,fs:i}),l=(0,Yp.Ay)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return a.current={container:r,git:o,fs:i,replspace:l,replId:n.id,currentUserId:t.id},a.current},[g.data]),(0,w.useEffect)(function(){if(a.current){var e=a.current.container;return function(){e.close()}}},[]),[(0,w.useCallback)((0,y._)(function(){var e,n,r,a,l,s,u,f,h,m,v=arguments;return(0,b.YH)(this,function(w){switch(w.label){case 0:if(e=(v.length>0&&void 0!==v[0]?v[0]:{autoCommit:!1}).autoCommit,null==(r=(null===(n=g.data)||void 0===n?void 0:n.repl.__typename)==="Repl"?g.data.repl:null))return d("Please try again."),[2];a=r.title,c(!0),w.label=1;case 1:if(w.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return Yf.apply(this,arguments)}({git:o,commitMessage:e.message})];case 2:if((l=w.sent()).error)return d(l.error),[2];w.label=3;case 3:if(!(s=S()))return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,(u=s.git).getRepositoryState()];case 4:if((f=w.sent()).error)return d('Could not merge: the "'.concat(a,"\" Repl's git state could not be read, please try again.")),[2];if(f.state!==rG.Gi.CLEAN)return d('Could not merge: the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.')),[2];return[4,py({git:u,replId:t})];case 5:if(w.sent().error)return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,u.pull({experimental_override_remote:{name:pv(t),branch:"main"},allowConflicts:!1,mode:rG.Xo.REBASE})];case 6:if((h=w.sent()).error){switch(h.error){case rG.uA.MERGE_CONFLICT:m="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case rG.uA.DIRTY_WORKTREE:m='the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.');break;case rG.uA.HEAD_DETACHED:m='the "'.concat(a,'" Repl is on an unknown branch, please open that repl and checkout a branch before merging.');break;default:m='please check the "'.concat(a,'" Repl or try again.')}return d("Could not merge: ".concat(m)),[2]}return p("Changes pushed!"),o.forceRefresh(),null==i||i({didAutoCommit:!!e}),[3,9];case 7:return w.sent(),d("Could not merge: something went wrong, please try again."),[3,9];case 8:return c(!1),[7];case 9:return[2]}})}),[g,S,t,d,p,o,i]),{loading:s}]),2),j=V[0],Z=V[1].loading,q=(C=(Y={replId:F.id,orgId:N,projectId:T,currentUserId:O.id}).replId,x=Y.orgId,_=Y.projectId,D=Y.currentUserId,Object.values(null!==(A=(0,Yi.Si)({orgId:x,projectId:_})[C])&&void 0!==A?A:{}).filter(function(e){return e.id!==D})),K=Yg(),$="NothingToMerge"===K||"CannotMerge"===K||Z,J="Automatic commit for ".concat(I.title);switch(K){case"NothingToMerge":R="You do not have any commits to merge in yet";break;case"CannotMerge":R="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":R="Your changes will be pulled into ".concat(F.title);break;default:(0,aI.A)(K)}var Q=(E=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:switch(K){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return M("No changes to merge"),[3,10];case 2:return M("You cannot merge right now"),[3,10];case 3:return[4,j({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,j({autoCommit:!!z&&{message:J}})];case 7:return[4,j({autoCommit:{message:J}})];case 9:(0,aI.A)(K),e.label=10;case 10:return[2]}})}),function(){return E.apply(this,arguments)});return(0,f.FD)(L.S,{gap:8,children:[q.length>0?(0,f.Y)(tK.N,{icon:(0,f.Y)(oK.A,{}),colorway:"orange",text:"".concat(F.title," has active coders (@").concat(q[0].username).concat(q.length>1?" and others":"","). Merging may disrupt ongoing work.")}):null,(0,f.Y)(rd.m_,{tooltip:R,isDisabled:null===R,placement:"top",maxWidth:300,children:(0,f.Y)(G.$n,{colorway:"primary",text:"Merge changes into ".concat(F.title),disabled:$,onClick:Q,loading:Z,iconLeft:Z?(0,f.Y)(tr.A,{}):void 0})}),"OnlyUncommittedChanges"===K?(0,f.FD)(L.S,{row:!0,gap:6,children:[(0,f.Y)(rf.A,{css:Yh.infoIcon}),(0,f.Y)(P.EY,{color:"dimmer",css:Yh.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===K?(0,f.FD)(L.S,{row:!0,gap:6,children:[(0,f.Y)(nM.S,{id:B,checked:z,onChange:W}),(0,f.Y)(cW.J,{htmlFor:B,children:(0,f.Y)(P.EY,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,f.Y)(rd.m_,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,f.Y)(rf.A,{css:Yh.infoIcon})})]}):null]})}function Yw(){var e=(0,et._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return Yw=function(){return e},e}var Yy={},Yb=(0,er.J1)(Yw()),YS=t(44147),YY=(0,z.x)({input:[W.wp.py(0),W.wp.minHeight(24),W.wp.pl(12)]}),YA=function(){var e,n=(0,k.A)().git;return(0,w.useCallback)((e=(0,y._)(function(e){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,n.stageFiles({all:!0})];case 1:return t.sent(),[4,n.commit({message:e,allowEmpty:!1})];case 2:return t.sent(),n.forceRefresh(),[2]}})}),function(n){return e.apply(this,arguments)}),[n])},YC=function(e){var n,t=e.onDone,r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=YA(),l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),c(!0),[4,a(i)];case 1:n.sent(),c(!1),n.label=2;case 2:return"Escape"===e.key&&(o(""),t()),[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.Y)(eA.pd,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:u,onChange:function(e){o(e.target.value)},disabled:s,onBlur:t,css:YY.input})},Yx=(0,sm.v)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),Y_=Yx.cssVars,Yk=Yx.styleTokens,YD=[W.wp.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],YE=(0,z.x)({graph:[W.wp.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,g._)({},W.kL.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[W.wp.flex.column,W.wp.align.start,W.wp.justify.end,{listStyleType:"none",gridArea:Yk["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[W.wp.py(4),W.wp.rowWithGap(8),{gridArea:Yk["segment-grid-area"]}],title:[{gridArea:Yk["segment-grid-area"]}],commit:[W.wp.pr(8),{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[oP.b.nofill,W.wp.border({width:0})]}],decoration:[W.wp.position.relative,{height:"100%",width:16}],commitDot:[YD,{backgroundColor:Yk["commit-graph-color"]}],commitDotUntracked:[YD,{"&:before":[YD,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(Yk["commit-graph-color"])}],border:"2px solid ".concat(eZ.LU.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:Yk["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(Yk["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:Yk["commit-graph-color"]}}],commitColumn:[W.wp.viewStyle,W.wp.colWithGap(8),W.wp.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:Yk["commit-text-foreground"]}],commitDescription:[{color:Yk["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[W.wp.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(Yk["commit-graph-color"]),borderLeft:"2px solid ".concat(Yk["commit-graph-color"]),height:9,width:9}],curveUp:[W.wp.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(Yk["commit-graph-color"]),borderRight:"2px solid ".concat(Yk["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:Yk["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:Yk["commit-graph-color"]}],compactLine:[W.wp.height("100%"),W.wp.position.relative,{gridArea:"spacer"},(0,g._)({},W.kL.min("tabletMin"),{display:"none"})]}),YR=function(e){var n=e.children,t=e.hasLeft,r=e.hasRight;return(0,f.FD)(L.S,{css:YE.graph,children:[n,(0,f.Y)(YP,{hasLeft:t,hasRight:r}),(0,f.Y)("div",{css:YE.compactLine,children:(0,f.Y)("div",{css:YE.decoration,children:(0,f.Y)("div",{css:YE.fullLine,style:t?(0,g._)({},Y_["commit-graph-color"],eZ.LU.accentPrimaryDefault):{}})})})]})},YI=function(e){var n,t,r=e.children,i=e.area,o=e.title,a=e.action;if(!w.Children.count(r))return null;var l="common"===i?(n={},(0,g._)(n,Y_["segment-grid-area"],i),(0,g._)(n,Y_["commit-graph-color"],eZ.LU.outlineDefault),(0,g._)(n,Y_["commit-text-foreground"],eZ.LU.foregroundDimmer),(0,g._)(n,Y_["commit-extended-text-foreground"],eZ.LU.foregroundDimmest),n):(t={},(0,g._)(t,Y_["segment-grid-area"],i),(0,g._)(t,Y_["commit-graph-color"],eZ.LU.accentPrimaryDefault),(0,g._)(t,Y_["commit-text-foreground"],eZ.LU.accentPrimaryStrongest),(0,g._)(t,Y_["commit-extended-text-foreground"],eZ.LU.foregroundDimmest),t);return(0,f.FD)(f.FK,{children:["common"===i?null:(0,f.Y)(YT,{area:i,children:o}),"common"===i?null:(0,f.Y)(YF,{area:i,children:a}),(0,f.Y)(L.S,{style:l,tag:"ol",css:YE.segment,"aria-label":i,children:r})]})},YF=function(e){var n=e.children,t=e.area,r=(0,g._)({},Y_["segment-grid-area"],"action-".concat(t));return(0,f.Y)(L.S,{style:r,css:YE.action,row:!0,children:n})},YT=function(e){var n=e.children,t=e.area,r=(0,g._)({},Y_["segment-grid-area"],"title-".concat(t));return(0,f.Y)(L.S,{style:r,css:YE.title,children:"string"==typeof n?(0,f.Y)(P.Y9,{level:3,variant:"subheadDefault",color:"dimmer",children:n}):n})},YP=function(e){var n=e.hasLeft,t=e.hasRight,r=(0,g._)({},Y_["commit-graph-color"],n?eZ.LU.accentPrimaryDefault:"transparent"),i=(0,g._)({},Y_["commit-graph-color"],t?eZ.LU.accentPrimaryDefault:"transparent");return n||t?(0,f.FD)(f.FK,{children:[(0,f.FD)("div",{css:YE.splitLeft,children:[(0,f.FD)("div",{css:YE.decoration,children:[(0,f.Y)("div",{css:YE.line,"data-line":!0,style:r}),(0,f.Y)("div",{css:YE.fullLine,"data-full-line":!0,style:r})]}),(0,f.Y)("div",{css:YE.curveRight,style:i}),(0,f.Y)("div",{css:YE.sidewaysLine,style:i})]}),(0,f.Y)("div",{css:YE.splitRight,style:i,children:(0,f.Y)("div",{css:YE.curveUp})})]}):null},YL=function(e){var n=e.onClick,t=e.children,r=e.className;return n?(0,f.Y)(G.SC,{className:r,onPress:n,css:W.wp.reset.button,children:t}):(0,f.Y)("div",{className:r,children:t})},YU=function(e){var n=e.message,t=e.description,r=e.type,i=e.onClick;return(0,f.FD)(L.S,{tag:"li",css:YE.commit,row:!0,align:"start",justify:"start","data-interactive":!!i,children:[(0,f.FD)("div",{css:YE.decoration,children:[(0,f.Y)("div",{css:YE.line}),(0,f.Y)("div",{css:"working"===r?YE.commitDotUntracked:YE.commitDot})]}),(0,f.FD)(YL,{onClick:i,css:YE.commitColumn,children:[(0,f.Y)(P.EY,{multiline:!1,css:YE.commitMessage,style:"working"===r?(0,g._)({},Y_["commit-text-foreground"],eZ.LU.accentPrimaryStronger):{},children:n}),t?(0,f.Y)(P.EY,{css:YE.commitDescription,children:t}):null]})]})},YN=function(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1];return n?(0,f.Y)("li",{children:(0,f.Y)(YC,{onDone:function(){return t(!1)}})}):(0,f.Y)(YU,{type:"working",message:"uncommitted changes",onClick:function(){return t(!0)}})},YO=function(e){var n,t,r,i,o,a,l,s,c,u,d,p=(u={variables:{id:e.selectedRepl.id}},d=(0,en._)({},Yy,u),ei.I(Yb,d)).data,h=SE(),m=h.state,g=h.commits,v=(null==m?void 0:m.error)?null:null!==(l=null==m?void 0:m.state)&&void 0!==l?l:null,w=(null==m?void 0:m.error)?null:null!==(s=null==m?void 0:m.type)&&void 0!==s?s:null,y=(null==p?void 0:null===(n=p.repl)||void 0===n?void 0:n.__typename)==="Repl"&&p.repl.title||"Remote",b=w===rG.UN.NORMAL&&v!==rG.Gi.CLEAN;if(null==g?void 0:g.error)return(0,f.Y)(P.EY,{children:g.error});var S=!!(null==g?void 0:null===(t=g.theirs)||void 0===t?void 0:t.length),Y=!!(null==g?void 0:null===(r=g.ours)||void 0===r?void 0:r.length)||b;return(0,f.FD)(YR,{hasLeft:S,hasRight:Y,children:[S?(0,f.Y)(YI,{area:"left",title:y,children:null==g?void 0:null===(i=g.theirs)||void 0===i?void 0:i.map(function(e){return(0,f.Y)(YU,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,YS.K)(e.author.date))},e.hash)})}):null,Y?(0,f.FD)(YI,{area:"right",title:"My workspace",children:[b?(0,f.Y)(YN,{}):null,null==g?void 0:null===(o=g.ours)||void 0===o?void 0:o.map(function(e){return(0,f.Y)(YU,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,YS.K)(e.author.date))},e.hash)})]}):null,(0,f.Y)(YI,{area:"common",children:null==g?void 0:null===(a=g.both)||void 0===a?void 0:a.map(function(e){return(0,f.Y)(YU,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,YS.K)(e.author.date))},e.hash)})})]})},YM=function(e){var n=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0];return(0,f.FD)(dd.Provider,{value:n,children:[(0,f.Y)(dO,{}),(0,f.Y)(YO,(0,en._)({},e))]})},YB=(0,z.x)({header:[W.wp.p(8),W.wp.rowWithGap(2),W.wp.border({color:eZ.LU.outlineDimmest,direction:"bottom"})],headerLeft:[W.wp.flex.wrap,W.wp.align.center,{flex:1}],comboBoxAndActions:[W.wp.flex.wrap,W.wp.flex.shrink(1)],iconButton:[W.wp.color.foregroundDimmer,W.wp.hover(W.wp.color.foregroundDefault)],headerRight:[W.wp.pt(4)],swapIcon:[W.wp.color.foregroundDimmest,{rotate:"90deg"}],warnings:[W.wp.p(8),{"&:empty":W.wp.display.none}],toggle:[W.wp.minWidth(123)],errorView:[W.wp.rowWithGap(8),W.wp.justify.center],viewSection:[W.wp.px(8),W.wp.py(12),{":not(:last-of-type)":W.wp.border({color:eZ.LU.outlineDimmest,direction:"bottom"})}]}),YH=function(e){var n=e.selectedRepl,t=e.currentRepl,r=e.remoteResult,i=e.tab,o=e.isMainRepl;return n?"Loading"===r.state?(0,f.Y)(tr.A,{}):"Error"===r.state?(0,f.Y)(P.EY,{children:"Something went wrong, please try again."}):"changes"===i?(0,f.Y)(Ye,{selectedRepl:n,isMainRepl:o}):(0,f.Y)(YM,{selectedRepl:n,currentRepl:t}):(0,f.Y)(P.EY,{children:"Select a Repl to compare against your current Repl."})},Yz=(0,w.forwardRef)(function(e,n){var t,r,i,o,a,l=e.repl,s=e.project,c=e.openGitPane,u=e.org,d=e.currentUser,p=!!s.mainRepl&&l.id===s.mainRepl.id,h=(0,v._)((0,w.useState)(p?null:null!==(r=s.mainRepl)&&void 0!==r?r:null),2),m=h[0],g=h[1],y=(0,v._)((0,w.useState)("changes"),2),b=y[0],S=y[1],Y=function(){return S("changes"===b?"commits":"changes")};(0,w.useEffect)(function(){(0,SA.L)({action:"tabOpened",orgId:u.id,projectId:s.id,tab:b,replType:p?"mainRepl":"devRepl"})},[b,s,u,p]);var A=Sk({selectedReplId:null!==(i=null==m?void 0:m.id)&&void 0!==i?i:null}),C=A.isFetching,x=A.refetch,_=A.state,k=A.remote,D=A.pull,E=D.doPull,R=D.state,I=R.error,F=R.loading,T=(null==_?void 0:_.error)?null:null!==(o=null==_?void 0:_.state)&&void 0!==o?o:null;return(0,f.Y)(SD.Provider,{value:A,children:(0,f.FD)(L.S,{innerRef:n,children:[(0,f.FD)(L.S,{css:YB.header,children:[(0,f.FD)(L.S,{css:YB.headerLeft,row:!0,gap:8,children:["changes"===b?(0,f.Y)(G.$n,{css:YB.toggle,text:"Changes",iconLeft:(0,f.Y)(aW.A,{}),iconRight:(0,f.Y)(fO.A,{css:YB.swapIcon}),onClick:Y},"toggle"):(0,f.Y)(G.$n,{css:YB.toggle,text:"Commits",iconLeft:(0,f.Y)(im.A,{}),iconRight:(0,f.Y)(fO.A,{css:YB.swapIcon}),onClick:Y},"toggle"),(0,f.Y)(P.EY,{color:"dimmer",multiline:!0,children:"compared against"}),(0,f.FD)(L.S,{css:YB.comboBoxAndActions,row:!0,gap:8,children:[(0,f.Y)(SB,{"aria-label":"Select a Repl",replId:l.id,selectedReplId:null!==(a=null==m?void 0:m.id)&&void 0!==a?a:null,onSelect:g}),(0,f.FD)(L.S,{row:!0,gap:0,align:"center",children:[(0,f.Y)(eY.K0,{alt:"Pull",onClick:function(){E({branch:"main"}),(0,SA.L)({action:"pull",orgId:u.id,projectId:s.id,replType:p?"mainRepl":"devRepl"})},disabled:F||p,css:YB.iconButton,children:C?(0,f.Y)(tr.A,{}):(0,f.Y)(fY.A,{})}),m?(0,f.Y)(sS.A,(0,nr._)((0,en._)({alt:"Go to ".concat(m.title),target:"_blank"},(0,Yt.q1)(m,{initialPaneType:"project"})),{css:YB.iconButton,children:(0,f.Y)(rp.A,{})})):null]})]})]}),(0,f.Y)(L.S,{css:YB.headerRight,row:!0,gap:8,children:(0,f.Y)(eY.K0,{alt:"Fetch",onClick:x,disabled:"Success"!==k.state,css:YB.iconButton,children:C?(0,f.Y)(tr.A,{}):(0,f.Y)(oj.A,{})})})]}),(0,f.FD)(L.S,{css:YB.warnings,gap:12,children:[I===rG.uA.DIRTY_WORKTREE?(0,f.Y)(L.S,{css:YB.errorView,children:(0,f.Y)(tK.N,{colorway:"negative",icon:(0,f.Y)(oK.A,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,I===rG.uA.MERGE_CONFLICT?(0,f.FD)(L.S,{css:YB.errorView,children:[(0,f.Y)(tK.N,{colorway:"negative",icon:(0,f.Y)(oK.A,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,f.Y)(G.$n,{text:"Resolve Manually",onClick:function(){c(),E({branch:"main",allowConflicts:!0}),(0,SA.L)({projectId:s.id,orgId:u.id,action:"pullWithConflicts",replType:p?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,T===rG.Gi.MERGING?(0,f.Y)(tK.N,{colorway:"primary",text:"Merge in progress"}):null,T===rG.Gi.REBASING?(0,f.Y)(tK.N,{colorway:"primary",text:"Rebase in progress"}):null,(0,f.Y)(Yn,{})]}),p?(0,f.Y)(L.S,{css:YB.viewSection,children:(0,f.Y)(Yr,{selectedRepl:null!=m?m:void 0})}):null,!p&&m?(0,f.Y)(L.S,{css:YB.viewSection,children:(0,f.Y)(Yv,{destinationRepl:m,sourceRepl:l,projectId:s.id,mainReplId:null===(t=s.mainRepl)||void 0===t?void 0:t.id,orgId:u.id,currentUser:d})}):null,(0,f.Y)(L.S,{css:YB.viewSection,children:(0,f.Y)(YH,{currentRepl:l,selectedRepl:m,remoteResult:k,isMainRepl:p,tab:b})})]})})}),YW=t(77660),YG=(0,z.x)({container:[W.wp.p(8)],loading:[W.wp.p(16)]});function YV(e){var n,t,r,i,o=e.isActive,a=e.performPaneOperation,l=(0,ut.Jw)(SY.X.id,SY.F.ProjectPane),s=(0,_.A)(),c=(0,YW.Q)(),u=(n={variables:{id:s}},t=(0,en._)({},Sb,n),ei.I(SS,t)),d=u.data,p=u.loading,h=u.error,m=(null==d?void 0:d.repl.__typename)==="Repl"?d.repl:null,g=(null==d?void 0:d.currentUser)?d.currentUser:null,v=(null==m?void 0:null===(r=m.project)||void 0===r?void 0:r.__typename)==="Project"?m.project:null,y=(null==v?void 0:null===(i=v.org)||void 0===i?void 0:i.__typename)==="Org"?v.org:null,b=(0,nL.A)().showError,S="error"===c.state?c.error:null;return((0,w.useEffect)(function(){S&&b(S)},[b,S]),mN(o),p||"loading"===c.state)?(0,f.Y)(L.S,{css:YG.loading,row:!0,gap:8,justify:"center",children:(0,f.Y)(tr.A,{})}):y&&v?!h&&m&&g?(0,f.Y)(Yz,{ref:l,repl:m,project:v,org:y,openGitPane:function(){return a({operation:"open",pane:{type:"git"}})},currentUser:g}):(0,f.Y)(L.S,{css:YG.container,children:(0,f.Y)(P.EY,{children:"Something went wrong, please try again."})}):(0,f.Y)(L.S,{css:YG.container,children:(0,f.Y)(P.EY,{children:"This Repl is not a project!"})})}function Yj(e){return(0,f.Y)(nQ.Ay,(0,nr._)((0,en._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.5 3.675V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6Zm10 0a.75.75 0 0 1 .75-.75h3A2.75 2.75 0 0 1 18.75 8v6.325A3.751 3.751 0 0 1 18 21.75a3.75 3.75 0 0 1-.75-7.425V8A1.25 1.25 0 0 0 16 6.75h-3a.75.75 0 0 1-.75-.75ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var YZ=h.ZU.Object({type:h.ZU.Literal("project")}),Yq={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(YV,{isActive:t,performPaneOperation:r})},Icon:function(){return(0,f.Y)(Yj,{})},getTitle:function(){return"Project"},description:"Manage changes in your Project and sync or merge changes across Apps in the Project",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(YZ,e)}},YK=t(70299),Y$=t(41827),YJ=t(72412),YQ=t(77325),YX=t(21177),Y0=t(26928),Y1=t(29835),Y2=t(26030),Y5=t(94143),Y4=t(97905),Y3=(0,ez.eU)(0),Y8=(0,ez.eU)(function(e){return e(Y3)<=Y4.bX?"compact":"normal"}),Y7={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},Y6=(0,nR.AH)([W.wp.position.absolute,W.wp.left(8),W.wp.right(0),W.wp.zIndex(5)]);function Y9(e){var n=e.lineNumber,t=e.paneHeight,r=e.shell,i=e.sendToShellChannel,o=e.onClose,a=(0,w.useMemo)(function(){return null==r?void 0:r._term},[r]),l=(0,w.useMemo)(function(){var e,n=null==a?void 0:a._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[a]),s=(0,w.useRef)(""),c=(0,w.useRef)(!1),u=(0,w.useRef)(null),d=(0,v._)((0,w.useState)(64),2),p=d[0],h=d[1],m=(0,w.useRef)(null),g=(0,w.useCallback)(function(e){return h(e.height)},[h]),y=(0,Y.Jc)({onCode:function(e){if(null===e){s.current="";return}s.current!==e&&(c.current&&(r.write(Y7.CURSOR_RESTORE),r.write(Y7.ERASE_TO_END_OF_SCREEN)),r.write(Y7.CURSOR_SAVE),r.write(Y7.COLOR_BRIGHT_BLACK),r.write(e.replaceAll("\n","\r\n")),r.write(Y7.COLOR_RESET),c.current=!0,s.current=e)}}),b=y.sendMessage,S=y.stopMessage,A=y.getCode,C=y.loading,x=y.completed,_=y.error,k=y.clearError,D=(0,w.useCallback)(function(){(0,re.u4)(re.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),S(),c.current&&(r.write(Y7.CURSOR_RESTORE),r.write(Y7.ERASE_TO_END_OF_SCREEN),r.write(Y7.COLOR_RESET)),o()},[r,S,o]);(0,w.useEffect)(function(){return r.onData(function(){S(),o()}).dispose},[r,S,o]);var E=(0,Y4.D3)({id:(0,nP.A)(),inputRef:m,loading:C,onSubmit:function(){U?P():((0,re.u4)(re.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:R}),N())},onClose:D}),R=E.value,I=E.setValue,F=E.onKeyDown,T=E.escPressed,P=(0,w.useCallback)(function(){var e,n=null===(e=A())||void 0===e?void 0:e.code;if(!c.current||!n){D();return}r.write(Y7.CURSOR_RESTORE),r.write(Y7.ERASE_TO_END_OF_SCREEN),r.write(Y7.COLOR_RESET),i(n),(0,re.u4)(re.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),o()},[r,A,o,D,i]),U=x&&u.current===R,N=(0,w.useCallback)(function(){u.current=R,(0,re.u4)(re.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:R}),b({message:R})},[b,R]),O=l.height*(n+1)+8,M="top";O+p>t&&(M="bottom",O=t-l.height*(n+1)+4);var B=(0,Y.Gk)(),H=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0],z=(0,eW.Xr)(Y3,{store:H}),W=(0,eW.md)(Y8,{store:H}),V=(0,t9.A)(function(e){return z(e.width)});return(0,f.Y)(L.S,{css:Y6,style:{top:"top"===M?O:void 0,bottom:"bottom"===M?O:void 0},children:(0,f.FD)(Y4.y1,{requestMeasure:g,type:"generateCode",isCodeMirrorPocket:!1,error:_,clearError:k,innerRef:V,children:[(0,f.Y)(Y4.pd,{value:R,inputRef:m,onChange:function(e){return I(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:F,autoFocus:!0}),(0,f.FD)(Y4.wi,{children:[(0,f.FD)(f.FK,{children:[(0,f.Y)(Y4.sb,{type:"generateCode"}),x?(0,f.Y)(eY.K0,{alt:"Rerun the same prompt",onClick:function(){return N()},size:12,colorway:"grey",children:(0,f.Y)(oj.A,{})}):null]}),U?(0,f.FD)(f.FK,{children:[(0,f.Y)(G.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,re.u4)(re.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),D()}}),(0,f.Y)(G.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:P,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,f.Y)(Y4.XT,{escPressed:T,connecting:!B,loading:C,disabled:!R||!R.trim(),promptPresentation:"normal"===W,onClick:function(){C?((0,re.u4)(re.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:R}),S()):((0,re.u4)(re.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:R}),N())}})]})]})})}var Ae=t(34926);function An(e){var n=e.portsOpenedByThisShell,t=e.performPaneOperation,r=e.onClose,i=(0,k.A)().ports,o=(0,w.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),a=(0,w.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,f.Y)(Ae.yN,{configurations:n.map(function(e){return e.configuration}),openWebview:function(){t({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:n.length>0?{type:"local",port:n[0].configuration.localPort}:void 0}}})},openNetworkingTool:function(){t({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===n.length&&o(n[0].configuration.localPort)},onDoExposePort:function(){1===n.length&&a(n[0].configuration.localPort)}})}var At=t(86691),Ar=t(90172),Ai=(0,nR.AH)([W.wp.height("100%"),W.wp.overflow("hidden"),{"& .xterm":[W.wp.pl(8),W.wp.pt(8),W.wp.pb(4),W.wp.height("100%")]}]),Ao=(0,z.x)({container:[W.wp.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:Ai,xtermWithBorderRadius:[Ai,{"& .xterm-viewport":[W.wp.borderRadius(0,0,8,8)]}]}),Aa=(0,nR.AH)([W.wp.position.absolute,W.wp.flex.row,W.wp.top(8),W.wp.right(8),W.wp.height(30),W.wp.align.center,W.wp.zIndex(8),{opacity:0}]);function Al(e){var n,t,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,s=e.openSearchAndReplace,c=e.openAIWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,p=e.currentPromptLineNumber,h=e.onOpenGeneratePrompt,m=e.onCloseGeneratePrompt,g=e.searchState,y=e.setSearchState,b=(0,n1.gc)("accessibleTerminal").preferences.accessibleTerminal,S=(0,Y1.kP)(null!==(n=null==i?void 0:i.cgroup)&&void 0!==n?n:void 0);r&&g.isSearching&&(t=(0,f.Y)(At.p,{searchValue:g.searchText,setSearchValue:function(e){y({isSearching:!0,searchText:e})},findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return y({isSearching:!1})}}));var Y=(0,iQ.m5)(),A=(0,Y2.EF)().onContextMenu,C=(0,Y5.P)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:c,openShellSearch:function(e){y({isSearching:!0,searchText:e})},openSearchAndReplace:s,openGeneratePrompt:h});(0,Ar.Z)({xterm:r,onAskAssistant:function(e){c((0,YX.yt)(e))}}),(0,w.useEffect)(function(){null==r||r.fit()},[r,S]);var x=(0,v._)((0,w.useState)(0),2),_=x[0],k=x[1],D=(0,t9.A)(function(e){k(e.height)},{type:"throttle",wait:200});return(0,f.FD)(L.S,{className:l,innerRef:D,css:Ao.container,onKeyDown:function(e){"f"===e.key&&(0,Y0.T$)(e)&&(y({isSearching:!0,searchText:""}),e.preventDefault())},children:[!b&&(0,f.Y)(YQ.s,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,f.FD)(L.S,{css:[W.wp.coverContainer,W.wp.flex.column],onClick:function(){d&&(m(),null==r||r.focus())},children:[(0,f.Y)(L.S,{css:[Y?Ao.xterm:Ao.xtermWithBorderRadius,W.wp.flex.growAndShrink(1),d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return A(e,{command:C})}}),(0,f.Y)(An,{portsOpenedByThisShell:S,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),r&&d?(0,f.Y)(Y9,{lineNumber:p,paneHeight:_,shell:r,sendToShellChannel:o,onClose:function(){m(),r.focus()}}):null,r?(0,f.Y)(L.S,{className:"controls",css:Aa,children:t}):null]})}var As=t(42796).hp,Ac=(0,nR.AH)([W.wp.position.relative,W.wp.height("100%")]);function Au(e){var n,t,r=e.shellId,i=e.paneId,o=e.performPaneOperation,a=e.userId,l=e.xterm,s=e.xtermRef,c=e.currentPromptLineNumber,u=e.isGeneratePromptVisible,d=e.onOpenGeneratePrompt,p=e.onCloseGeneratePrompt,h=e.searchState,m=e.setSearchState,g=(0,v._)((0,w.useState)(void 0),2),S=g[0],A=g[1],C=(0,w.useCallback)(function(e){o({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[o]),x=(0,Y.Au)({onSession:function(e){o({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,_=(0,Y.dm)(),k=_.assistantMode,D=_.getAssistantMessageModel,E=_.getAssistantMessageIntent,R=(0,cv.L)().authorizations,I=(0,u8.T)({mode:k,authz:R}),F=(0,w.useCallback)(function(e){var n=D(I);(0,re.u4)(re.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:k,model:n,message_content:e,message_source:"shell"}),x({kind:"message",message:e,intent:E(),model:n})},[x,D,E,I,k]),T=(0,w.useRef)(null);(0,np.b)((n=(0,y._)(function(e,n){var t,o,s,c,u,d,p;return(0,b.YH)(this,function(f){var h;return(t=n.signal,l)?(s=(o=e.shellExec.connect.stream({id:r,userId:a,processViewId:i,size:l.getSize()},{signal:t})).reqWritable,c=o.resReadable,u=function(e){s.write({$kind:"stdin",stdin:new Uint8Array(As.from(e))})},T.current=u,d=l.onResize((h=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.resize.rpc({id:r,userId:a,processViewId:i,size:n})];case 1:return t.sent(),[2]}})}),function(e){return h.apply(this,arguments)})),p=l.onData(u),l.write("\x1bc"),(0,y._)(function(){var e,n,t,r,i,o,a;return(0,b.YH)(this,function(s){switch(s.label){case 0:e=!1,n=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),r=(0,nt._)(c),s.label=2;case 2:return[4,r.next()];case 3:if(!(e=!(i=s.sent()).done))return[3,5];if(!(o=i.value).ok)return l.clear(),[2];"output"===o.payload.$kind&&l.write(o.payload.output),s.label=4;case 4:return e=!1,[3,2];case 5:return[3,12];case 6:return a=s.sent(),n=!0,t=a,[3,12];case 7:if(s.trys.push([7,,10,11]),!(e&&null!=r.return))return[3,9];return[4,r.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(n)throw t;return[7];case 11:return[7];case 12:return[2]}})})(),[2,function(){T.current=null,s.close(),d.dispose(),p.dispose()}]):[2]})}),function(e,t){return n.apply(this,arguments)}),[l,r,a,i]),(0,np.b)((t=(0,y._)(function(e,n){var t,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,i=e.shellExec.monitor.subscribe({id:r},{signal:t}).resReadable,o=!1,a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),s=(0,nt._)(i),p.label=2;case 2:return[4,s.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok){if("NO_PROCESS_MATCHING_ID"===u.payload.code)return[3,4];return[3,5]}"NotStarted"!==u.payload.state&&u.payload.cgroupPath&&A({cgroup:u.payload.cgroupPath}),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),a=!0,l=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=s.return))return[3,9];return[4,s.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[r]);var P=(0,w.useCallback)(function(e){return!!T.current&&(T.current(e),!0)},[T]);return(0,YJ.A)({sendInput:P,paste:function(e){return!!l&&(l.paste(e),!0)}}),(0,f.Y)(L.S,{css:Ac,children:(0,f.Y)(Al,{shell:l,shellMetadata:S,shellRef:s,performPaneOperation:o,currentPromptLineNumber:c,isGeneratePromptVisible:u,sendToShellChannel:P,openSearchAndReplace:C,openAIWithMessage:F,onOpenGeneratePrompt:d,onCloseGeneratePrompt:p,searchState:h,setSearchState:m})})}var Ad=t(18226),Ap=t(55382),Af=t(89020),Ah=(0,z.x)({wrapper:[W.wp.height("100%"),W.wp.flex.column],headerWrapper:[W.wp.flex.growAndShrink(0),W.wp.align.center,W.wp.justify.spaceBetween,W.wp.rowWithGap(4),W.wp.px(4),W.wp.border({direction:"bottom",color:eZ.LU.outlineDimmest}),W.wp.height(28)],headerGroupLeft:[W.wp.flex.growAndShrink(1)],headerGroupRight:[W.wp.flex.shrink(0)],failureWrapper:[W.wp.p(8),W.wp.color.accentNegativeStronger],avatarWrapper:[W.wp.flex.growAndShrink(0),W.wp.rowWithGap(4),W.wp.align.center],terminalWrapper:[W.wp.height("100%"),W.wp.flex.growAndShrink(1)],shellListButton:[W.wp.viewStyle,W.wp.reset.button,W.wp.p(2),W.wp.height(22),W.wp.rowWithGap(8),W.wp.align.center,oP.b.nofill,W.wp.flex.shrink(1),{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonLabel:[W.wp.display.flex,W.wp.align.center,W.wp.rowWithGap(8),W.wp.flex.shrink(1)],shellListItem:[W.wp.display.flex,W.wp.rowWithGap(8),W.wp.borderRadius(),W.wp.px(6),W.wp.py(4),W.wp.align.center,W.wp.color.foregroundDefault,W.wp.cursor.pointer,{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(eZ.LU.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:eZ.LU.interactiveBackground},"&[data-selected]":{backgroundColor:eZ.LU.interactiveBackgroundActive},"&[aria-disabled]":{color:eZ.LU.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[W.wp.font.code,W.wp.fontSize(eZ.LU.fontSizeSmall),W.wp.flex.growAndShrink(1),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],shellListItemIndexText:[W.wp.font.code,W.wp.fontSize(eZ.LU.fontSizeSmall)],shellListItemCommand:[W.wp.font.code,W.wp.fontSize(eZ.LU.fontSizeSmall)],shellListCurrentText:[W.wp.fontSize(eZ.LU.fontSizeSmall),W.wp.color.greyDefault],shellListNotRunningText:[W.wp.fontSize(eZ.LU.fontSizeSmall),W.wp.color.greyDefault],runningShellsCountBadge:[W.wp.width(18),W.wp.height(18),W.wp.align.center,W.wp.justify.center,W.wp.backgroundColor.backgroundHighest,W.wp.borderRadius("full"),W.wp.fontSize(eZ.LU.fontSizeSmall)]});function Am(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,y,b,S,Y,A,C,x,D,E,R,I,F,T,P,U,N,O,M,B,H,z,W,G,V=e.paneId,j=e.performPaneOperation,Z=e.emitPaneMetrics,q=e.initialPwd,K=e.initialCmd,$=e.isActive,J=(0,v._)((0,w.useState)({state:"not-connected"}),2),Q=J[0],X=J[1],ee="connected"===Q.state?Q.id:void 0,et=(0,ad.T)(),er=(0,w.useCallback)(function(e){return X({state:"connected",id:e})},[X]),ei=(r=(n={isActive:$,performPaneOperation:j,emitPaneMetrics:Z}).performPaneOperation,i=n.emitPaneMetrics,o=n.isActive,a=(0,w.useCallback)(function(e){r({operation:"open",secondary:!0,pane:{type:(0,n$.QY)(e),data:e}})},[r]),l=(0,w.useCallback)(function(e,n){r({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:{type:"local",path:e,port:n}}}})},[r]),s=(0,k.A)().fs,c=(0,_.A)(),u=(0,Y$.j)(),d=(0,w.useRef)(null),p=(0,w.useRef)(""),m=(h=(0,v._)((0,w.useState)(0),2))[0],y=h[1],S=(b=(0,v._)((0,w.useState)(!1),2))[0],Y=b[1],A=(0,w.useRef)(!1),C=(0,Ad.QU)({onFTCSState:function(e){var n=e.state;n===Ad.Od.CommandExecuted&&(A.current=!0),n===Ad.Od.CommandFinished&&(A.current=!1),d.current=n},onOpenGeneratePrompt:function(){A.current||Y(!0)},onUpdateCurrentPromptLineNumber:y}),x=(0,w.useCallback)(function(e,n){if(n.startsWith("A")){var t=n.replace(/^A;/,"");u("user:shell:exec",{command:t}),(0,re.u4)(re.AZ.SHELL_COMMAND_EVALED,{context:t,replId:c,api:"pid2",pwd:p.current})}if(n.startsWith("B")){var r=n.replace(/^B;/,"");p.current=r}},[u,c]),D=(0,w.useCallback)(function(e){return r({operation:"open",pane:e,secondary:!0})},[r]),R=(E=(0,v._)((0,Ap.A)({openFile:a,listFiles:s.listFiles,openWebview:l,onInBandOSCMessages:(t={},(0,g._)(t,Ad.n8,C),(0,g._)(t,82,x),t),openPane:D,emitPaneMetrics:i}),2))[0],I=E[1],F=(0,w.useCallback)(function(){A.current||((0,re.u4)(re.AZ.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),Y(!0))},[]),T=(0,w.useCallback)(function(){Y(!1)},[]),P=(0,w.useId)(),U="scope-shell-".concat(P),(0,pD.RD)(U,o),(0,pD.SJ)(function(){return[Ad.Ws.id,{run:function(){A.current||Y(!0)},scope:U,bubble:!1}]},[Y]),(0,tn.HP)(function(){return R},[R]),O=(N=(0,v._)((0,w.useState)({isSearching:!1}),2))[0],M=N[1],B=(0,w.useCallback)(function(){var e;M({isSearching:!0,searchText:null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:""})},[R]),H=(0,w.useCallback)(function(){M({isSearching:!1})},[]),z=(0,w.useCallback)(function(){O.isSearching?H():B()},[B,H,O]),W=(0,w.useCallback)(function(){null==R||R.clear()},[R]),G=(0,w.useMemo)(function(){return[{match:g4.G2,data:{type:"action",label:"Clear Shell",icon:(0,f.Y)(rg.A,{}),run:W}},{match:g4.G2,data:{type:"action",label:"Find in Shell",icon:(0,f.Y)(uv.A,{}),run:B}}]},[B,W]),(0,tn.Qt)(function(){return{commands:G,type:"shell"}},[G]),{xterm:R,xtermRef:I,searchState:O,setSearchState:M,toggleSearch:z,isGeneratePromptVisible:S,currentPromptLineNumber:m,onOpenGeneratePrompt:F,onCloseGeneratePrompt:T,clearShell:W});return(0,f.FD)(L.S,{css:Ah.wrapper,children:[(0,f.Y)(Ag,{step:Q,setStep:X,shellId:ee,initialCmd:K,initialPwd:q,switchShellSession:er,toggleSearch:ei.toggleSearch,clearShell:ei.clearShell}),(0,f.FD)(L.S,{css:Ah.terminalWrapper,children:[et&&void 0!==ee?(0,f.Y)(Au,(0,en._)({shellId:ee,paneId:V,performPaneOperation:j,userId:et},ei)):null,"errored"===Q.state?(0,f.Y)(L.S,{css:Ah.failureWrapper,children:"Failed to load the Shell."}):null]})]})}function Ag(e){var n=e.shellId,t=e.step,r=e.setStep,i=e.initialPwd,o=e.initialCmd,a=e.switchShellSession,l=e.toggleSearch,s=e.clearShell,c=(0,w.useRef)(!1),u=(0,e9.I)(function(e){var n;return n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(c.current)return[2];return c.current=!0,[4,e.shellExec.spawn.rpc({cmd:"bash",cwd:(null==n?void 0:n.restoreFromPaneState)?i:void 0,initialCmd:(null==n?void 0:n.restoreFromPaneState)?o:void 0,autoCleanup:!0})];case 1:return(t=a.sent()).ok?r({state:"connected",id:t.payload.id}):"UNEXPECTED_DISCONNECT"===t.payload.code?r({state:"not-connected"}):r({state:"errored"}),c.current=!1,[2]}})}),function(e){return n.apply(this,arguments)}},[r,i,o]),d=(0,e9.I)(function(e){return(0,y._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!n)return[3,2];return[4,e.shellExec.kill.rpc({id:n})];case 1:t.sent(),t.label=2;case 2:return[2]}})})},[n]);return(0,f.FD)(L.S,{css:Ah.headerWrapper,children:[(0,f.Y)(L.S,{css:Ah.headerGroupLeft,row:!0,gap:2,align:"center",children:(0,f.Y)(Av,{shellId:n,spawnShell:u,switchShellSession:a,step:t})}),(0,f.FD)(L.S,{css:Ah.headerGroupRight,row:!0,gap:4,align:"center",children:[(0,f.Y)(eY.K0,{alt:"Search in Shell",onClick:function(){l()},children:(0,f.Y)(uv.A,{color:eZ.LU.foregroundDimmest})}),(0,f.Y)(eY.K0,{alt:"Clear Output",onClick:function(){s()},children:(0,f.Y)(rg.A,{color:eZ.LU.foregroundDimmest})}),(0,f.Y)(eY.K0,{alt:"Kill Shell",disabled:void 0===d,onClick:function(){null==d||d()},children:(0,f.Y)(dI.A,{color:eZ.LU.foregroundDimmest})})]})]})}function Av(e){var n,t=e.step,r=e.shellId,i=e.spawnShell,o=e.switchShellSession,a=(0,v._)((0,w.useState)([]),2),l=a[0],s=a[1],c=l.find(function(e){return e.id===r});(0,np.b)((n=(0,y._)(function(e,n){var t,r,i,o,a,l,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,r=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,nt._)(r),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];s(u.payload.processes.filter(function(e){return"Running"===e.state})),p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[]),(0,w.useEffect)(function(){"not-connected"===t.state&&(null==i||i({restoreFromPaneState:!0}))},[i,t.state]),(0,w.useEffect)(function(){"connected"!==t.state||l.find(function(e){return e.id===r})||(l.length>0?o(l[0].id):null==i||i())},[r,l,i,t.state,o]);var u=c&&"Running"===c.state&&c.isInRecoveryMode;return c&&"Running"===c.state?(0,f.FD)(f.FK,{children:[(0,f.FD)(bR.in,{trigger:(0,f.FD)(cM.$,{css:Ah.shellListButton,children:[(0,f.Y)(ir.A,{size:12}),(0,f.Y)(L.S,{css:Ah.shellListButtonLabel,children:(0,f.Y)(Ay,{shellState:c})}),(0,f.Y)(Aw,{userIdsToProcessViewIds:c.userIdsToProcessViewIds}),l.length>1?(0,f.Y)(rd.m_,{tooltip:"".concat(l.length," Shells are running"),children:(0,f.Y)(L.S,{css:Ah.runningShellsCountBadge,children:l.length})}):null]}),children:[l.filter(function(e){return"Running"===e.state}).sort(function(e,n){var t,r;return("Running"===e.state&&null!==(t=e.idx)&&void 0!==t?t:0)-("Running"===n.state&&null!==(r=n.idx)&&void 0!==r?r:0)}).map(function(e){var n,t=null!==(n=e.command)&&void 0!==n?n:e.previousCommand,r=e.cwd.replace(/^\/home\/runner/,"~"),i="".concat(r).concat(t?": ".concat(t):""),a=e.id===c.id;return(0,f.FD)(uc.Dr,{css:Ah.shellListItem,onAction:function(){o(e.id)},textValue:i,children:[(0,f.Y)(Ay,{shellState:e}),a?(0,f.Y)(P.EY,{css:Ah.shellListCurrentText,children:"Current"}):null,(0,f.Y)(Aw,{userIdsToProcessViewIds:e.userIdsToProcessViewIds})]},e.id)}),(0,f.Y)(bR.wv,{}),(0,f.Y)(bR.Dr,{label:"New Shell",icon:(0,f.Y)(rm.A,{}),onAction:function(){null==i||i()}})]}),u?(0,f.Y)(rd.m_,{tooltip:"The nix environment failed to build. Check if your replit.nix is configured properly. For more information look into /run/replit/env/error.",children:(0,f.Y)(oK.A,{color:eZ.LU.accentNegativeDefault})}):null]}):null}function Aw(e){var n=e.userIdsToProcessViewIds,t=(0,th.Q4)(),r=(0,w.useMemo)(function(){var e;return null!==(e=Object.keys(null!=n?n:{}).map(function(e){return parseInt(e,10)}).map(function(e){return t.find(function(n){return n.id===e})}).filter(Boolean))&&void 0!==e?e:[]},[n,t]);return 0===r.length?null:(0,f.Y)(L.S,{css:Ah.avatarWrapper,children:r.map(function(e){return(0,f.Y)(Af.A,{user:e,size:16},e.id)})})}function Ay(e){var n,t,r=e.shellState,i=(0,iL.D)().isDarkColorScheme,o=(0,w.useCallback)(function(e){if(void 0===e)return eZ.LU.white;var n=i?W.iB.categorical:(0,ee._)(W.iB.categorical).reverse();return n[e%n.length]},[i]);if("Running"!==r.state)return(0,f.Y)(P.EY,{css:Ah.shellListNotRunningText,children:"Not Running"});var a=void 0!==r.command||void 0!==r.previousCommand;return(0,f.FD)(f.FK,{children:[(0,f.FD)(P.EY,{css:Ah.shellListItemIndexText,style:{color:o(r.idx)},children:["[",null!==(n=r.idx)&&void 0!==n?n:"?","]"]}),(0,f.FD)(P.EY,{children:[(0,f.Y)(P.EY,{css:Ah.shellListItemText,children:r.cwd.replace(/^\/home\/runner/,"~")}),a?(0,f.FD)(f.FK,{children:[":\xa0",(0,f.Y)(P.EY,{css:Ah.shellListItemCommand,style:{color:void 0===r.command?eZ.LU.greyDefault:void 0},children:null!==(t=r.command)&&void 0!==t?t:r.previousCommand})]}):null]})]})}var Ab=h.ZU.Object({type:h.ZU.Literal("shell"),data:h.ZU.Optional(h.ZU.Object({initialPwd:h.ZU.Optional(h.ZU.String()),initialCmd:h.ZU.Optional(h.ZU.String())}))}),AS={Content:function(e){var n,t,r=e.pane,i=e.options;return(0,f.Y)(Am,{paneId:i.paneId,isActive:i.isActive,initialPwd:null===(n=r.data)||void 0===n?void 0:n.initialPwd,initialCmd:null===(t=r.data)||void 0===t?void 0:t.initialCmd,performPaneOperation:i.performPaneOperation,emitPaneMetrics:i.emitPaneMetrics})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.blueStrongest,size:n},children:(0,f.Y)(oZ.A,{})})},getTitle:function(){return"Shell"},description:"Directly access your App through a command line interface (CLI)",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Ab,e)}};function AY(){var e=(0,et._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n"]);return AY=function(){return e},e}function AA(){var e=(0,et._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return AA=function(){return e},e}var AC={},Ax=(0,er.J1)(AY()),A_=(0,er.J1)(AA()),Ak=t(53667),AD=t(24897),AE=t(52394),AR=t(71181),AI=t(47096),AF=t(22380),AT=t(38398),AP=t(99182),AL=t(78385),AU=t(60732),AN=t(12975),AO=t(48729),AM=t(60676),AB=t(95836);function AH(e){return(0,f.FD)(AB.A,(0,nr._)((0,en._)({},e),{children:[(0,f.FD)("g",{clipPath:"url(#clip0_6530_283)",children:[(0,f.Y)("mask",{id:"mask0_6530_283",width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:(0,f.Y)("path",{fill:"#fff",fillRule:"evenodd",d:"M17.019 23.836c.378.147.809.138 1.19-.046l4.942-2.377A1.5 1.5 0 0 0 24 20.06V3.939a1.5 1.5 0 0 0-.85-1.352L18.21.21a1.494 1.494 0 0 0-1.705.29l-9.46 8.63-4.12-3.128a.999.999 0 0 0-1.276.057L.327 7.261a1 1 0 0 0-.001 1.48L3.899 12 .326 15.26a1 1 0 0 0 .001 1.479L1.65 17.94a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.262.514.336Zm.985-17.284L10.826 12l7.178 5.448V6.552Z",clipRule:"evenodd"})}),(0,f.FD)("g",{mask:"url(#mask0_6530_283)",children:[(0,f.Y)("path",{fill:"#0065A9",d:"M23.15 2.591 18.207.211A1.495 1.495 0 0 0 16.5.5L.312 15.26a1 1 0 0 0 0 1.479l1.323 1.202a1 1 0 0 0 1.277.057l19.495-14.79A.993.993 0 0 1 24 4v-.057a1.5 1.5 0 0 0-.85-1.352Z"}),(0,f.Y)("g",{filter:"url(#filter0_d_6530_283)",children:(0,f.Y)("path",{fill:"#007ACC",d:"m23.15 21.409-4.944 2.38A1.495 1.495 0 0 1 16.5 23.5L.312 8.74a1 1 0 0 1 0-1.479L1.636 6.06a1 1 0 0 1 1.277-.057l19.495 14.79A.993.993 0 0 0 24 20v.058a1.5 1.5 0 0 1-.85 1.35Z"})}),(0,f.Y)("g",{filter:"url(#filter1_d_6530_283)",children:(0,f.Y)("path",{fill:"#1F9CF0",d:"M18.206 23.79a1.495 1.495 0 0 1-1.706-.29c.553.553 1.5.162 1.5-.621V1.12C18 .34 17.053-.054 16.5.5a1.496 1.496 0 0 1 1.706-.29l4.944 2.377c.52.25.85.776.85 1.352v16.122a1.5 1.5 0 0 1-.85 1.352l-4.944 2.377Z"})}),(0,f.Y)("path",{fill:"url(#paint0_linear_6530_283)",fillRule:"evenodd",d:"M17.004 23.836c.378.147.81.138 1.19-.046l4.942-2.377a1.5 1.5 0 0 0 .85-1.352V3.939a1.5 1.5 0 0 0-.85-1.352L18.195.21A1.494 1.494 0 0 0 16.49.5L7.03 9.13 2.91 6.002a.999.999 0 0 0-1.276.057L.313 7.261a1 1 0 0 0-.002 1.48L3.885 12 .31 15.26a1 1 0 0 0 .002 1.479l1.321 1.202a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.263.514.336Zm.985-17.284L10.812 12l7.177 5.448V6.552Z",clipRule:"evenodd",opacity:".25"})]})]}),(0,f.FD)("defs",{children:[(0,f.FD)("filter",{id:"filter0_d_6530_283",width:"28.015",height:"22.139",x:"-2.015",y:"3.799",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("filter",{id:"filter1_d_6530_283",width:"11.5",height:"27.876",x:"14.5",y:"-1.938",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("linearGradient",{id:"paint0_linear_6530_283",x1:"11.985",x2:"11.985",y1:".062",y2:"23.938",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#fff"}),(0,f.Y)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,f.Y)("clipPath",{id:"clip0_6530_283",children:(0,f.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))}function Az(){return(0,f.Y)(AO.A,{src:"/public/images/cursor-ide-logo.png",width:24,height:24,alt:"Cursor Logo"})}function AW(e){var n=e.editor,t=e.disabled,r=(0,AL.A)(n),i=r.openEditor,o=r.onConfirmConfig,a=r.isConfigModalOpen,l=r.closeConfigModal;return(0,f.FD)(ed.ui,{css:Aj.connectInstructions,elevated:!0,children:[(0,f.FD)(L.S,{css:Aj.connectHeader,children:[(0,f.FD)(P.Y9,{level:3,children:["Connect to ","vscode"===n?"VS Code":"Cursor"]}),(0,f.FD)(P.EY,{color:"dimmer",children:["One-click SSH setup will launch"," ","vscode"===n?"VS Code":"Cursor"," and configure keys for you."]})]}),(0,f.Y)(G.$n,{text:t?"SSH Key Setup Required":"Launch ".concat("vscode"===n?"VS Code":"Cursor"),iconLeft:"vscode"===n?(0,f.Y)(AH,{}):(0,f.Y)(Az,{}),css:Aj.launchEditorButton,disabled:t,onClick:function(){(0,re.u4)(re.AZ.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane",editor:n}),i()}}),(0,f.Y)(la.a,{isOpen:a,onRequestClose:l,centered:!0,children:(0,f.Y)(AF.A,{onConfirm:o})})]})}function AG(e){var n=e.sshHostname,t=e.sshUser,r=e.sshPort,i=(0,AP.A)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(t,"@").concat(n);return(0,f.FD)(ed.ui,{css:Aj.connectInstructions,elevated:!0,children:[(0,f.FD)(L.S,{css:Aj.connectHeader,children:[(0,f.Y)(P.Y9,{level:3,children:"Connect manually"}),(0,f.Y)(P.EY,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,f.Y)(AI.A,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,re.u4)(re.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function AV(e){var n=e.onPurchaseComplete,t=e.org,r=e.sshAuthz,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return r.code===h9.S4.RequiresActiveSubscription&&(null==t?void 0:t.type)!==h9.NT.Team?(0,f.FD)(L.S,{gap:16,children:[(0,f.FD)(P.Y9,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",i0.en," Members."]}),(0,f.FD)(P.EY,{children:["With SSH, you can access your App's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,f.Y)("a",{href:"https://docs.replit.com/replit-workspace/ssh",target:"_blank",children:"Learn more here"})]}),(0,f.Y)(G.$n,{onClick:function(){return a(!0)},text:"Join Replit ".concat(i0.en),iconLeft:(0,f.Y)(cG.A,{}),colorway:"blurple"}),(0,f.Y)(iX.A,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",onPurchaseComplete:n,analyticsContext:{upgrade:{context:"workspace_ssh_pane"}}})]}):(0,f.Y)(tK.N,{colorway:"warning",text:r.message})}var Aj=(0,z.x)({tabContainer:[W.wp.colWithGap(8),W.wp.p(8)],connectEmptyState:[W.wp.center,W.wp.border({color:eZ.LU.outlineDefault,width:1,style:"dashed"}),W.wp.borderRadius(4),W.wp.py(24),W.wp.px(12)],connectHeader:[W.wp.colWithGap(4)],connectInstructions:[W.wp.colWithGap(12),W.wp.p(8),W.wp.borderRadius(4)],connectContainer:[W.wp.py(8)],launchEditorButton:[W.wp.borderRadius(8)]});function AZ(e){var n=e.legacyKeys,t=e.openFile,r=(0,_.A)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,v._)((0,w.useState)(function(){return!eB.A.get(i,"boolean")}),2),a=o[0],l=o[1],s=(0,w.useRef)(!1);return((0,w.useEffect)(function(){return eB.A.get(i,"boolean")||l(!0),function(){s.current&&eB.A.set(i,!0)}},[i]),n&&0!==n.length&&a)?(0,f.Y)(L.S,{children:(0,f.Y)(uf.d,{colorway:"warning",iconLeft:(0,f.Y)(oK.A,{}),text:"Don't see your SSH keys here? We're moving from App-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){t(AR.L),s.current=!0}})}):null}function Aq(e){var n,t,r,i,o,a,l=(o=(0,en._)({},AC,void 0),ei.I(A_,o)),s=l.data,c=l.loading,u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(0),2),m=h[0],g=h[1],S=(t=(n=(0,v._)((0,w.useState)(null),2))[0],r=n[1],i=(0,k.A)().fs,(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,i.readFile(AR.L)];case 1:if((e=n.sent()).error===e0.Tr.NotFound||e.error===e0.Tr.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,AD.A)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),t),Y=(0,AN.A)();if(c||!Y)return(0,f.Y)(tZ.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});var A=Y.sshHostname,C=Y.sshUser,x=Y.sshPort,_=s&&(null===(a=s.currentUser)||void 0===a?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===s.currentUser.publicSshKeys.__typename?s.currentUser.publicSshKeys.keys:[],D=_.length>=Ak.L,E=0===_.length;return(0,f.FD)(j.tU,{selectedIndex:m,onSelectionChange:g,children:[(0,f.FD)(j.wb,{children:[(0,f.Y)(j.oz,{iconLeft:(0,f.Y)(cG.A,{}),children:"Connect"}),(0,f.Y)(j.oz,{iconLeft:(0,f.Y)(AM.A,{}),children:"Keys"})]}),(0,f.FD)(j.T2,{children:[(0,f.Y)(j.Kp,{children:(0,f.FD)(L.S,{css:Aj.tabContainer,children:[(0,f.Y)(P.Y9,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,f.Y)(P.EY,{color:"dimmer",children:"SSH allows you to connect to an App from another machine or IDE."}),(0,f.FD)(L.S,{css:Aj.connectContainer,gap:16,children:[(0,f.Y)(AW,{editor:"vscode",disabled:E}),(0,f.Y)(AW,{editor:"cursor",disabled:E}),E?(0,f.FD)(L.S,{css:Aj.connectEmptyState,gap:8,children:[(0,f.Y)(AM.A,{size:24,color:eZ.LU.foregroundDimmest}),(0,f.Y)(P.EY,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,f.Y)(G.$n,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){g(1)}})]}):(0,f.Y)(AG,{sshHostname:A,sshPort:x,sshUser:C})]}),(0,f.Y)(AT.p,{})]})}),(0,f.Y)(j.Kp,{children:(0,f.FD)(L.S,{css:Aj.tabContainer,children:[(0,f.FD)(L.S,{row:!0,justify:"space-between",children:[(0,f.Y)(P.Y9,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,f.Y)(rd.m_,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!D,children:(0,f.Y)(G.$n,{text:"Add SSH key",colorway:"primary",size:"small",disabled:D,iconLeft:(0,f.Y)(rm.A,{}),onClick:function(){return p(!0)}})})]}),(0,f.Y)(P.EY,{color:"dimmer",children:"Add authorized keys to configure SSH access to this App."}),(0,f.Y)(AZ,{legacyKeys:S,openFile:e.openFile}),(0,f.Y)(AU.f,{keys:_}),(0,f.Y)(la.a,{isOpen:d,onRequestClose:function(){return p(!1)},centered:!0,children:(0,f.Y)(AE.P,{onConfirm:function(){return p(!1)}})})]})})]})]})}function AK(e){var n,t,r,i=(t={variables:{replId:(0,_.A)()}},r=(0,en._)({},AC,t),ei.I(Ax,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,f.Y)(tZ.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,f.Y)(L.S,{children:(0,f.Y)(P.EY,{children:"This App is private and your subscription expired. Please reload for further action."})});var s=o.repl.authorizations.connectUsingSsh;return s.isAuthorized?(0,f.Y)(Aq,(0,en._)({},e)):(0,f.Y)(AV,{sshAuthz:s,org:null!==(n=o.repl.org)&&void 0!==n?n:void 0,onPurchaseComplete:function(){l()}})}var A$=t(40182),AJ=h.ZU.Object({type:h.ZU.Literal("ssh")}),AQ=(0,z.x)({root:[W.wp.height("100%"),W.wp.overflowY("auto"),n$.tK],container:[W.wp.flex.grow(1)],wrapper:[W.wp.flex.grow(1),W.wp.py(8),W.wp.position.relative]}),AX={Content:function(e){var n=e.options;return(0,f.Y)(L.S,{css:AQ.root,children:(0,f.Y)(L.S,{css:AQ.container,gap:8,children:(0,f.Y)(L.S,{css:AQ.wrapper,children:(0,f.Y)(AK,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,n2.af)(e),secondary:!0})}})})})})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.yellowStrongest,size:n},children:(0,f.Y)(A$.A,{})})},getTitle:function(){return"SSH"},description:"Configure remote access to connect to this Repl from another machine or IDE",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(AJ,e)}},A0=t(48358),A1=t(10768),A2=t(32670),A5=(0,z.x)({toolButton:[W.wp.display.inlineBlock],actionContent:[W.wp.width(450),W.wp.maxWidth("100%"),W.wp.colWithGap(16)],diagnosisContent:[W.wp.p(8),W.wp.colWithGap(8)]});function A4(e){var n=e.vncUrl,t=e.onRetry,r=e.openNetworkingTool,i=null!=(0,Y1.ff)(A1.wF),o=(0,f.Y)(G.$n,{iconLeft:(0,f.Y)(oj.A,{}),text:"Refresh connection",onClick:t});return i?(0,f.Y)(tZ.A,{pane:{type:"vnc"},action:(0,f.FD)(L.S,{css:A5.actionContent,children:[(0,f.Y)(tK.N,{colorway:"warning",text:(0,f.FD)(f.FK,{children:["There was an error connecting to the server",n?(0,f.FD)(f.FK,{children:[" at ",(0,f.Y)("br",{}),n]}):""]})}),n?(0,f.Y)(R.A,{headerContent:"Diagnosis",children:(0,f.Y)(L.S,{css:A5.diagnosisContent,children:(0,f.Y)(yV.Ay,{children:"If you see a connection error, it's possible that your internet service provider (ISP) has security settings blocking the URL shown above.\n\nPlease contact your ISP and ask them to unblock the URL. Here are the support links for common ISPs:\n\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n      "})})}):null,o]})}):(0,f.Y)(tZ.A,{pane:{type:"vnc"},bodyText:(0,f.FD)(P.EY,{multiline:!0,children:["No VNC server is currently running with compatible ports available to view. Try running your App, and check the"," ",(0,f.Y)(G.$n,{css:A5.toolButton,text:"Networking tool",iconLeft:(0,f.Y)(bG.A,{}),size:"small",onClick:r})," ","to ensure ports are being forwarded correctly."]}),action:o})}var A3=function(e){return e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected",e.Errored="Errored",e}(A3||{}),A8=(0,z.x)({root:[W.wp.position.relative,W.wp.height("100%"),W.wp.width("100%")],target:[W.wp.height("100%"),W.wp.width("100%")],overlay:[W.wp.coverContainer,W.wp.backgroundColor.backgroundDefault,{"&:empty":[W.wp.display.none]}],audio:[W.wp.position.absolute,W.wp.bottom(0),W.wp.right(0),{padding:"0.2em"}]});function A7(e){var n,r,i,o,a=e.fs,l=e.secrets,s=e.container,c=e.openNetworkingTool,u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(void 0),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(!1),2),Y=S[0],A=S[1],C=(0,v._)((0,w.useState)("Connecting"),2),x=C[0],k=C[1],D=(0,v._)((0,w.useState)(null),2),E=D[0],R=D[1],I=(0,v._)((0,w.useState)(!1),2),F=I[0],T=I[1],P=(0,v._)((0,w.useState)(!1),2),L=P[0],U=P[1],N=(0,w.useRef)(0),O=(0,w.useRef)(!1),M=(r=(n=(0,v._)((0,w.useState)(null),2))[0],i=n[1],o=(0,A2.A)(s),(0,w.useEffect)(function(){if(!r){if(s.getConnectionState()===A1.KN.CONNECTED){if(!o)return;i((0,b_.jq)(o.replace("http","ws"),A1.wF).toString());return}return s.onConnectionStateChanged(function(e){e===A1.KN.CONNECTED&&o&&i((0,b_.jq)(o.replace("http","ws"),A1.wF).toString())})}},[o,r,s]),{vncUrl:r}).vncUrl;(0,re.u4)(re.AZ.VNC_OPENED),(0,w.useEffect)(function(){return O.current=!0,function(){O.current=!1}},[]);var B=(0,v._)((0,w.useState)(null),2),H=B[0],z=B[1],W=(0,w.useRef)(function(){return null});(0,w.useEffect)(function(){W.current()},[H]);var G=(0,t9.A)(function(e){return z(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),V=(0,w.useRef)(function(e){});(0,w.useEffect)(function(){V.current(L)},[L]),(0,w.useEffect)(function(){if(!d){var e=!1;return t.e(2517).then(t.bind(t,2517)).then(function(n){e||p(n)}),function(){e=!0}}},[d]),(0,w.useEffect)(function(){"Disconnected"===x&&setTimeout(function(){k("Connecting")},Math.random()*(Math.pow(2,N.current)-1)*1e3)},[x]),(0,w.useEffect)(function(){if("Disconnected"===x){var e=setTimeout(function(){k("Connecting")},Math.random()*(Math.pow(2,N.current)-1)*1e3);return function(){clearTimeout(e)}}},[x]);var j=(0,_.A)();return(0,w.useEffect)(function(){if(M&&E&&d&&"Connecting"===x){N.current++;var e=d.default,n=s.getConnectionMetadata(),t={credentials:{username:null==n?void 0:n.token,password:null!=m?m:""}};(0,re.u4)(re.AZ.VNC_CONNECTED);var r=new e(E,M,t);r.scaleViewport=!0,r.resizeSession=!0;var i=function(){N.current=0,k("Connected")},o=function(e){var n=e.detail.capabilities.audio;T(void 0!==window.MediaSource&&!!n)},a=function(e){if(W.current=function(){return null},V.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var n=s.getConnectionMetadata(),t=n?(0,eL.pI)(n.token):null;(0,re.u4)(re.AZ.VNC_ERRORED,{vncUrl:M,replId:j,cluster:null==t?void 0:t.cluster}),k("Errored");return}k("Disconnected")},c=function(){var e,n=function(){A(!0)};(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,l.read()];case 1:if(!(e=t.sent().get("VNC_PASSWORD")))return n(),[2];return g(e),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return rj.Cp(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",a),r.addEventListener("securityfailure",c),W.current=function(){return r._windowResize()},T(!1),U(!1),V.current=function(n){n?((0,re.u4)(re.AZ.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){O.current||(W.current=function(){return null},V.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[d,E,s,M,a,m,x,j,l]),(0,f.FD)("div",{"data-cy":"vnc",css:A8.root,children:[F?(0,f.FD)("label",{css:A8.audio,children:["\uD83C\uDFA7"," ",(0,f.Y)("input",{type:"checkbox",checked:L,onChange:function(e){return U(e.target.checked)}})]}):null,(0,f.Y)("div",{ref:function(e){G(e),R(e)},css:A8.target,"data-cy":"vnc-output-".concat(x.toLowerCase())}),(0,f.FD)("div",{css:A8.overlay,children:["Connecting"===x?(0,f.Y)(tZ.A,{pane:{type:"vnc"},loading:!0}):null,"Disconnected"===x?(0,f.Y)(tZ.A,{pane:{type:"vnc"},bodyText:"Disconnected"}):null,"Errored"===x?(0,f.Y)(A4,{vncUrl:M,onRetry:function(){return k("Connecting")},openNetworkingTool:c}):null]}),(0,f.Y)(la.a,{isOpen:Y,onRequestClose:function(){return A(!1)},children:(0,f.Y)(b0.A,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return A(!1)},onConfirm:function(e){g(e),A(!1)}})})]})}var A6=h.ZU.Object({type:h.ZU.Literal("vnc")}),A9=(0,z.x)({container:[W.wp.flex.growAndShrink(1)]}),Ce={Content:function(e){var n=e.options.performPaneOperation,t=(0,k.A)(),r=t.fs,i=t.container,o=t.secrets,a=(0,w.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);return(0,f.Y)(L.S,{css:A9.container,children:(0,f.Y)(A7,{fs:r,container:i,secrets:o,openNetworkingTool:a})})},Icon:function(e){var n=e.size;return(0,f.Y)(rH.A,{size:n})},getTitle:function(){return"Output"},description:"View your App's desktop screen output",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(A6,e)}},Cn=t(36856),Ct=t(83085),Cr=(0,z.x)({unavailable:[W.wp.p(8)]}),Ci=h.ZU.Object({type:h.ZU.Literal("workflows")}),Co={Content:function(e){var n=e.options.isActive;return(0,iq._P)({controlName:"flag-work-flows",logFlagToAnalytics:!0})?(0,f.Y)(Ct.A,{isActive:n}):(0,f.Y)(L.S,{css:Cr.unavailable,children:(0,f.Y)(P.EY,{children:"Workflows is not available."})})},Icon:function(e){var n=e.size;return(0,f.Y)(nQ.Vx.Provider,{value:{color:eZ.LU.greenStrongest,size:n},children:(0,f.Y)(aT.A,{})})},getTitle:function(){return"Workflows"},description:"Configure different ways to run your App",category:n$.bY.WorkspaceFeatures,decode:function(e){return m.WT.Decode(Ci,e)}};function Ca(){return{codeEditor:ts.N,webview:Cn.QS,media:vc,binary:ta,pedit:b7,vnc:Ce,adminPanel:n0,runnerOutput:YK.a,shell:AS,dependencies:rB,envEditor:iZ,draw:iz,git:mM,diff:iA,history:gJ,database:t2,neon:bx,markdown:vl,csvPreview:tc.J,ssh:AX,ghostwriterChat:du,problems:Si,networking:bj,objectStorage:b$,workflows:Co,project:Yq,devdocs:rW,agentFiles:n9,integrations:gX.u,videoPlayer:A0.Rd}}},28220:(e,n,t)=>{"use strict";t.d(n,{UI:()=>s,dz:()=>l});var r=t(30758),i=t(99813),o=t(71549),a=(0,i.eU)(!1),l=function(e){var n=(0,o.ob)(a);(0,r.useEffect)(function(){return e.watch(function(e){var t,r;if(e.error){if("NOT_FOUND"===e.error){n(!0);return}n(!1)}n(!(null===(r=e.config)||void 0===r?void 0:null===(t=r.autoSave)||void 0===t?void 0:t.disabled))})},[e,n])},s=function(){return(0,o.h)(a)}},96216:(e,n,t)=>{"use strict";t.d(n,{b:()=>l,d:()=>a});var r=t(99813),i=t(71549),o=(0,r.eU)(null);function a(){return(0,i.ob)(o)}function l(){return(0,i.h)(o)}},79672:(e,n,t)=>{"use strict";t.d(n,{Nf:()=>l,X$:()=>c,zg:()=>s});var r=t(30758),i=t(99813),o=t(71549),a=(0,i.eU)(!1);function l(){return(0,o.h)(a)}function s(){var e=(0,o.ob)(a);return(0,r.useCallback)(function(){return e(!0)},[e])}function c(e){var n=(0,o.ob)(a),t=(0,r.useRef)(!1);(0,r.useEffect)(function(){t.current||(t.current=!0,n(e))},[n,e])}},5609:(e,n,t)=>{"use strict";t.d(n,{Ln:()=>l,li:()=>a});var r=t(99813),i=t(71549),o=(0,r.eU)(null);function a(){return(0,i.ob)(o)}function l(){return(0,i.h)(o)}},99966:(e,n,t)=>{"use strict";t.d(n,{N0:()=>M,Pt:()=>B,No:()=>L,Tb:()=>O});var r=t(66622),i=t(27189),o=t(60049),a=t(30758),l=t(96489),s=t.n(l),c=t(99813),u=t(11571),d=t(20837),p=t(45009),f=t(30632),h=t(72813);function m(){var e=(0,p._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var v={},w=(0,f.J1)(m()),y=(0,f.J1)(g(),w),b=t(63679),S=t(83733),Y=t(20334),A=t(99655),C=t(57218),x=t(2807),_=t(94450),k=t(56677),D=t(39424),E=t(58411),R=t(19346),I=t(88859),F=t(71549),T=(0,c.eU)([]),P=(0,u.mg)(T,function(e){return new Set(e.map(function(e){return e.type}))},s());function L(){return(0,F.h)(P)}var U=["shell","git","diff","envEditor","deployments","database","neon","ghostwriterChat","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","dependencies","project","workflows","integrations","runnerOutput","networking"],N=["agentChat","ghostwriterChat","deployments"];function O(){return(0,F.h)(T)}function M(){return(0,F.Ou)(T)}function B(){var e,n,t,i,l,s,c,u=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).supportsAgent,p=(0,F.ob)(T),f=(l=(null==(i=(n={variables:{replId:(0,S.A)()}},t=(0,d._)({},v,n),h.I(y,t)).data)?void 0:null===(e=i.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==i?void 0:i.repl:null)?{repl:l,currentUser:(null==i?void 0:i.currentUser)||null}:{repl:null,currentUser:null},m=f.repl,g=f.currentUser,w=(0,o.useRouter)(),I=(0,A.m5)(),P=(0,b._P)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),L=(0,b._P)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),O=!!(null==m?void 0:null===(c=m.authorizations)||void 0===c?void 0:null===(s=c.viewDeploymentConfig)||void 0===s?void 0:s.isAuthorized),M=(0,b._P)({controlName:"flag-object-storage-pane"}),B=(0,b._P)({controlName:"flag-work-flows",logFlagToAnalytics:!0}),H=(0,b._P)({controlName:"flag-doc-your-devs"}),z=(0,b._P)({controlName:"flag-ws-guided-tour"}),W=(0,E.I)(),G=(0,x.Q)().hasProject,V=(0,k.oR)(),j=(0,D.A)().isTutorial,Z=(0,C.J)().configs.some(function(e){return"nix"!==e.id}),q=(0,_.uE)(),K=(null==g?void 0:g.isAdmin)||!!w.query.debug,$=(0,R.Vv)(),J=(0,Y.g)();(0,a.useEffect)(function(){var e=I&&(null==m?void 0:m.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(m&&g){var n=!J,t=!J,i=L||!J&&P,o=[[{type:"shell"},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},n],[{type:"runnerOutput"},!J],[{type:"git"},!0],[{type:"dependencies"},!0],[{type:"envEditor"},!0],[{type:"debugger"},!0],[{type:"tutorial"},j],[{type:"database"},t],[{type:"neon"},i],[{type:"replAuth"},Z],[{type:"preferences"},!0],[{type:"adminPanel"},K],[{type:"deployments"},O],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},V],[{type:"problems"},!0],[{type:"networking"},!0],[{type:"objectStorage"},M],[{type:"workflows"},B],[{type:"project"},G],[{type:"devdocs"},H],[{type:"integrations"},!0],[{type:"workspaceTourGuide"},z&&K],[{type:"agentProgress"},!!u],[{type:"agentChat"},!!(W&&u&&!I)]],a=!0,l=!1,s=void 0;try{for(var c,d=q[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;o.push([{type:"extension",data:{extensionId:f.extension.extensionId,installationId:f.extension.installationId,name:f.name||f.extension.manifest.name,icon:f.icon||f.extension.manifest.icon,baseUrl:f.extension.baseUrl,path:f.handler}},!0])}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}var h=!0,v=!1,w=void 0;try{for(var y,b=o[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var S=(0,r._)(y.value,2),Y=S[0];S[1]&&(!I||U.includes(Y.type))&&e.push(Y)}}catch(e){v=!0,w=e}finally{try{h||null==b.return||b.return()}finally{if(v)throw w}}p(e.map(function(e){return{title:$.getTitle(e),pane:e}}).sort(function(e,n){return N.includes(e.pane.type)?-1:N.includes(n.pane.type)?1:e.title.localeCompare(n.title)}).map(function(e){return e.pane}))}},[p,I,m,g,Z,L,P,j,K,O,V,q,$,M,B,J,G,H,z,u,W])}(0,c.eU)(function(e){var n=Array.from(e(I.Jp).values()).flat(),t=e(I.tx),r=(0,i._)(n).concat((0,i._)(t)).sort(function(e,n){return n.lastActiveAt-e.lastActiveAt}),o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=function(){var e=c.value;return 8===o.length?"break":(0,R.Dx)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===o.findIndex(function(n){return n.type===e.pane.type})&&o.push(e.pane))}();if("break"===d)break}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return o})},20387:(e,n,t)=>{"use strict";t.d(n,{IW:()=>W,Eo:()=>V,cz:()=>ek,wb:()=>eS,AK:()=>B,oE:()=>M,Jl:()=>el,cQ:()=>eo,I7:()=>eY,oh:()=>P,ch:()=>es,bD:()=>eC,d_:()=>eI,sT:()=>eD,KZ:()=>eE,qP:()=>eR,wS:()=>eg,Ah:()=>e_,jP:()=>ee,z1:()=>N,b7:()=>er,gR:()=>ew,MP:()=>ex,Ss:()=>O,vJ:()=>H,af:()=>z,j3:()=>ei,nd:()=>J,hk:()=>en,XO:()=>et,mP:()=>X,OK:()=>F,If:()=>Z,g3:()=>eh});var r=t(13454),i=t(20837),o=t(66622),a=t(27189),l=t(5482),s=t(30656),c=t.n(s),u=t(30758),d=t(96489),p=t.n(d),f=t(51297),h=t(99813),m=t(11571),g=t(84321),v=t(51439),w=t(16483),y=t(35642),b=t(62906),S=t(63679),Y=t(26190),A=t(29665),C=t(84504),x=t(24481),_=t(27382),k=t(75895),D=t(76862),E=t(71549),R=t(89968),I=(0,h.eU)();function F(){return(0,E.h)(I)}var T=(0,h.eU)(!0);function P(){return(0,E.h)(T)}var L=(0,h.eU)(null,function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,f.jM)(e(I),t);return n(I,i),r.persist&&e(em).persist(),i});function U(){return(0,E.ob)(L)}function N(){var e=U();return(0,u.useCallback)(function(n){return e(function(e){if(!e){e={runButton:n};return}e.runButton=n},{persist:!0})},[e])}function O(){var e=U();return(0,u.useCallback)(function(n,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e?void 0:null===(r=e.workflow)||void 0===r?void 0:r[n];i&&t(i)},{persist:r})},[e])}function M(){var e=U();return(0,u.useCallback)(function(n){return e(function(e){var t;null==e||null===(t=e.workflow)||void 0===t||t.splice(n,1)},{persist:!0})},[e])}function B(){var e=O();return(0,u.useCallback)(function(n){return e(n.workflowIndex,function(e){null==e||e.tasks.splice(n.taskIndex,1)},{persist:!0})},[e])}function H(){var e=O();return(0,u.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks[n.taskIndex]=t},{persist:i})},[e])}function z(){var e=O();return(0,u.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks=t},{persist:i})},[e])}function W(){var e=O();return(0,u.useCallback)(function(n){return e(n,function(e){var n,t=null!==(n=e.tasks[e.tasks.length-1])&&void 0!==n?n:{};e.tasks.push(t?(0,i._)({},t):{task:"shell.exec",args:""})})},[e])}var G=(0,h.eU)(null,function(e,n,t){var r=n(L,function(e){if(void 0===e)return{workflow:[t]};e.workflow?e.workflow.push(t):e.workflow=[t]},{persist:!0});return c()(null==r?void 0:r.workflow),r.workflow.length-1});function V(){return(0,E.ob)(G)}var j=(0,h.eU)(void 0);function Z(){return(0,E.h)(j)}var q=(0,h.eU)(function(e){var n,t=e(I);return null!==(n=null==t?void 0:t.workflow)&&void 0!==n?n:[]}),K=(0,m.mg)(q,function(e){var n;return null!==(n=null==e?void 0:e.map(function(e,n){return n}))&&void 0!==n?n:[]},p()),$=(0,h.eU)(function(e){var n=function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e.tasks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if("workflow.run"===l.task&&!r.includes(l.args))return(0,y._)('workflow "'.concat(l.args,'" not found'))}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return(0,y.Ok)(null)},t=e(q),r=e(Q),i={};return t.forEach(function(e,t){var r=n(e);r.ok||(i[t]=r.error)}),i});function J(e){return(0,E.h)((0,u.useMemo)(function(){return(0,m.mg)($,function(n){return e in n?n[e]:null})},[e]))}var Q=(0,m.mg)(q,function(e){var n;return null!==(n=null==e?void 0:e.map(function(e){return e.name}))&&void 0!==n?n:[]},p());function X(){return(0,E.h)(q)}function ee(){return(0,E.h)(ed)}function en(){return(0,E.h)(K)}function et(){return(0,E.h)(Q)}function er(e){var n,t;return(0,E.h)((n=e.workflowIndex,t=e.taskIndex,(0,u.useMemo)(function(){return(0,m.mg)(q,function(e){var r;return e?null===(r=e[n])||void 0===r?void 0:r.tasks[t]:null})},[n,t])))}function ei(e){return(0,E.h)((0,u.useMemo)(function(){return(0,m.mg)(q,function(n){return n?n[e]:null})},[e]))}function eo(){return(0,E.Ou)(q)}function ea(e){var n=(0,u.useMemo)(function(){return(0,h.eU)(function(n){var t,r=null===(t=n(q)[e])||void 0===t?void 0:t.name;if(!r)return null;var i=n(j);return i?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=Object.values(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.workflow.name===n&&t.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.length?t.sort(function(e,n){return e.startTime-n.startTime}):null}(i,r):null})},[e]);return(0,u.useMemo)(function(){return(0,m.mg)(n,function(e){return e?e[e.length-1]:null})},[n])}function el(e){return(0,E.Ou)(ea(e))}function es(e){var n;return(0,E.AI)((n=ea(e),(0,u.useMemo)(function(){return(0,m.mg)(n,function(e){return(null==e?void 0:e.step)===w.zY.RUNNING})},[n])))}function ec(){return(ec=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,e.updateDotReplit([(null===(t=n.workflow)||void 0===t?void 0:t.length)||n.runButton?{path:"workflows",op:"add",value:JSON.stringify(n)}:{path:"workflows",op:"remove",value:""}])];case 1:if(r.sent().error)return[2,(0,y._)("Error applying update")];return[2,(0,y.Ok)(null)]}})})).apply(this,arguments)}var eu=(0,h.eU)(function(e){var n=e(I);if(!(null==n?void 0:n.workflow)||!(null==n?void 0:n.runButton))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.workflow[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.name===n.runButton)return l}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null}),ed=(0,m.mg)(eu,function(e){var n;return null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null}),ep=(0,h.eU)(function(e){var n=e(q).find(function(e){var n;return null===(n=e.metadata)||void 0===n?void 0:n.dotReplitRun});return n?n.name:null}),ef=(0,h.eU)(function(e){var n=e(j);if(!n)return null;var t=Object.values(n).filter(function(e){return e.step===w.zY.RUNNING});return 0===t.length?null:t});function eh(){var e,n=(0,E.h)(ed),t=(0,S._P)({controlName:"flag-run-migration"}),r=(0,E.h)(ep);!n&&t&&(n=r);var i=(0,E.h)(ef),o=ex();e=(0,u.useMemo)(function(){return null!==i&&i.some(function(e){return"agent"===e.userId})},[i])?C.ll.RUNNING:(null==i?void 0:i.some(function(e){return e.step===w.zY.RUNNING}))?C.ll.RUNNING:C.ll.IDLE;var a=(0,A.I)(function(e){return function(t){return o(t),!!n&&e.workflows.runWorkflow.rpc({workflowId:n})}},[o,n]),l=(0,A.I)(function(e){return function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).graceful;null==i||i.forEach(function(t){e.workflows.stopRun.rpc({runId:t.runId,graceful:n})})}},[i]);return null!==i||null!==n?{workflowId:n,run:a,stop:l,step:e,runningWorkflows:i}:null}var em=(0,h.eU)({persist:(0,r._)(function(){return(0,l.YH)(this,function(e){return[2,(0,y.Ok)(null)]})})});function eg(){var e=(0,E.Ou)(em);return(0,u.useCallback)(function(){return(0,e().persist)()},[e])}var ev=(0,h.eU)(!1);function ew(e){var n=(0,E.ob)(ev);(0,u.useEffect)(function(){n(e)},[n,e]),(0,u.useEffect)(function(){return function(){n(!1)}},[n,e])}var ey={PARSE_ERROR:"Failed to parse workflow configs from .replit",NOT_FOUND:"Missing .replit file",READ_FILE:"Error reading .replit"},eb=(0,h.eU)(void 0);function eS(){return(0,E.h)(eb)}function eY(e){var n,t,i,o,a,s,c=e.dotReplit,d=(0,E.Ou)(I),f=(0,E.ob)(I),h=(0,E.Ou)(ev),m=(0,E.ob)(eb),g=(0,E.ob)(T),v=(0,u.useCallback)(function(e){g(!1);var n=d();n&&h()||p()(e,n)||f(e||{})},[g,d,h,f]),w=(0,u.useCallback)(function(e){g(!1),(0,_.Sb)(e.code)?m({code:e.code,message:ey[e.code],extras:e.extras}):m(void 0)},[m,g]);t=(n={onWorkflowsConfigChange:v,onRunStateChange:(0,E.ob)(j),onDotReplitStateChange:w}).onWorkflowsConfigChange,i=n.onDotReplitStateChange,o=n.onRunStateChange,a=(0,S._P)({controlName:"flag-run-migration"}),(0,D.b)((s=(0,r._)(function(e,n){var s;function c(){return(c=(0,r._)(function(){var n,r,o,a,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:n=e.workflows.config.subscribe({},{signal:s}).resReadable,r=!1,o=!1,l.label=1;case 1:l.trys.push([1,6,7,12]),c=(0,k._)(n),l.label=2;case 2:return[4,c.next()];case 3:if(!(r=!(u=l.sent()).done))return[3,5];if(!(d=u.value).ok)return(0,_.QS)(d.payload)&&i(d.payload),[3,4];if(void 0!==d.payload.dotReplitState)return i(d.payload.dotReplitState),[3,4];t(d.payload.config),l.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return p=l.sent(),o=!0,a=p,[3,12];case 7:if(l.trys.push([7,,10,11]),!(r&&null!=c.return))return[3,9];return[4,c.return()];case 8:l.sent(),l.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}function u(){return(u=(0,r._)(function(){var n,t,r,i,a,c,u,d;return(0,l.YH)(this,function(l){switch(l.label){case 0:n=e.workflows.runState.subscribe({},{signal:s}).resReadable,t=!1,r=!1,l.label=1;case 1:l.trys.push([1,6,7,12]),a=(0,k._)(n),l.label=2;case 2:return[4,a.next()];case 3:if(!(t=!(c=l.sent()).done))return[3,5];if(!(u=c.value).ok)return[3,4];o(u.payload.state),l.label=4;case 4:return t=!1,[3,2];case 5:return[3,12];case 6:return d=l.sent(),r=!0,i=d,[3,12];case 7:if(l.trys.push([7,,10,11]),!(t&&null!=a.return))return[3,9];return[4,a.return()];case 8:l.sent(),l.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}return(0,l.YH)(this,function(t){switch(t.label){case 0:return s=n.signal,[4,e.workflows.init.rpc({useWorkflowGenerators:a},{signal:s})];case 1:if(!t.sent().ok)return[2];return[4,Promise.all([function(){return c.apply(this,arguments)}(),function(){return u.apply(this,arguments)}()])];case 2:return t.sent(),[2]}})}),function(e,n){return s.apply(this,arguments)}),[a,t,i,o]);var b=(0,E.AI)(I),Y=(0,E.ob)(em);(0,u.useEffect)(function(){Y({persist:(0,r._)(function(){var e,n,t;return(0,l.YH)(this,function(r){return(n=b.current)?(t=null===(e=n.workflow)||void 0===e?void 0:e.filter(function(e){var n;return!(null===(n=e.metadata)||void 0===n?void 0:n.generated)}),[2,function(e,n){return ec.apply(this,arguments)}(c,{runButton:n.runButton,workflow:t})]):[2,(0,y._)("No config found")]})})})},[c,Y,b])}var eA=(0,h.eU)([]);function eC(e,n){var t=(0,E.ob)(eA),r=(0,Y.A)(e);(0,u.useEffect)(function(){var e=function(e){r.current(e)};return t(function(n){return(0,a._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t].concat((0,a._)(n)))}function ex(){var e=(0,E.h)(eA);return(0,u.useCallback)(function(n){e.forEach(function(e){return e(n)})},[e])}function e_(e){var n=(0,o._)((0,u.useState)(e.getRunState()),2),t=n[0],r=n[1];return(0,u.useEffect)(function(){return r(e.getRunState()),e.onStateChanged(function(e){r(e)})},[e]),t}function ek(){var e=(0,R.A)().didDisconnect,n=e_((0,x.A)().runner),t=P(),r=eh(),i=et(),o=(0,v.Ff)(),a=(0,u.useMemo)(function(){var e=o.runState,n=o.transitionReason;return null!=r&&!!r.runningWorkflows&&(e===g.g32.AGENT_STATE_RUNNING||e===g.g32.AGENT_STATE_PAUSING||e===g.g32.AGENT_STATE_PAUSED&&(null==n?void 0:n.$kind)==="waitingOnUserResponse")&&r.runningWorkflows.some(function(e){return"agent"===e.userId})},[null==r?void 0:r.runningWorkflows,o]),l=(0,b.A)(a,1e3),s=(0,u.useMemo)(function(){return n===C.ll.RUNNING},[n]),c=(0,u.useMemo)(function(){return(null==r?void 0:r.step)===C.ll.RUNNING},[null==r?void 0:r.step]),d=(0,u.useMemo)(function(){return s||c},[s,c]),p=(0,b.A)(d,100),f=(0,u.useMemo)(function(){return l?p:d},[l,p,d]),h=(0,u.useMemo)(function(){return e||t||n===C.ll.OFFLINE},[e,t,n]),m=(0,u.useMemo)(function(){return!!(null==r?void 0:r.workflowId)},[null==r?void 0:r.workflowId]);return{isWorkflowsLoading:t,isWorkflowsRunning:c,isPid1RunnerRunning:s,isRunning:f,isAgentRunning:l,isOffline:h,isDisabled:(0,u.useMemo)(function(){var e,n=null!==(e=null==r?void 0:r.workflowId)&&void 0!==e?e:_.Ov;return m&&!i.includes(n)},[m,i,null==r?void 0:r.workflowId]),runButtonRunsWorkflows:m}}function eD(){var e=(0,x.A)().runner,n=e_(e),t=eh(),r=ek(),i=r.isRunning,o=r.runButtonRunsWorkflows;return(0,u.useCallback)(function(){if(!i){if(o){var r;null==t||null===(r=t.run)||void 0===r||r.call(t,C.QG.RUN_BUTTON_CLICKED)}else(n===C.ll.IDLE||n===C.ll.STOPPING)&&e.run(C.QG.RUN_BUTTON_CLICKED)}},[i,e,n,o,t])}function eE(){var e=(0,x.A)().runner,n=eh(),t=ek(),r=t.isRunning,i=t.isPid1RunnerRunning,o=t.isWorkflowsRunning;return(0,u.useCallback)(function(){if(r&&(i&&e.stopRun(),o)){var t;null==n||null===(t=n.stop)||void 0===t||t.call(n,{graceful:!0})}},[i,r,o,e,n])}function eR(){var e=eD(),n=eE(),t=ek().isRunning;return(0,u.useCallback)(function(){t?n():e()},[t,e,n])}function eI(){var e=eD(),n=eE(),t=ek().isRunning,r=(0,Y.A)(t),i=(0,o._)((0,u.useState)(!1),2),a=i[0],l=i[1];return(0,u.useEffect)(function(){a&&(r.current||(e(),l(!1)))},[a,r,e]),(0,u.useCallback)(function(){a||(r.current?(l(!0),n()):e())},[a,r,e,n])}},50244:(e,n,t)=>{"use strict";t.d(n,{A:()=>d,C:()=>m});var r=t(13454),i=t(20837),o=t(66622),a=t(5482);function l(){return(l=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}var s=t(26928),c=t(10415),u=new RegExp(/(file:\/\/)?\/home\/runner\/[^/]+\/(.*)/);function d(e,n,t,r){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,n,t,i){var l,u,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:return u=(l=(0,o._)((0,c.z)(e-1,!1,n),2))[0],d=l[1]+1,[4,m(u,(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,i()];case 1:return[2,null===(e=n.sent())||void 0===e?void 0:e.files]}})}))];case 1:return[2,p.sent().map(function(e){var r=e.from,i=e.to,o=e.file,a=e.line,l=e.col;return{range:(0,c.W)(d,r,i,n),text:o,activate:function(e,n){(0,s.T$)(e)&&t({path:n,line:a,col:l})}}})]}})})).apply(this,arguments)}var f=/[a-zA-Z0-9_\-.[\]$@()]+/,h='", line ';function m(e,n){return g.apply(this,arguments)}function g(){return(g=(0,r._)(function(e,n){var t,r,o,s,c,d,p,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.race([n(),(function(e){return l.apply(this,arguments)})(5e3).then(function(){return[]})])];case 1:if(!(t=a.sent())||0===t.length)return[2,[]];for(r=[],o=0,s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e[o+n]},c=function(){var n=e[o];return o++,n},d=function(){var n=o;c();for(var t="";/\d/.test(s());)t+=c();if(0===t.length)return o=n,null;if(":"!==s())return{line:parseInt(t,10),col:0};c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o--,{line:parseInt(t,10),col:0}):{line:parseInt(t,10),col:parseInt(r,10)}},p=function(){for(var n=o,t=0;t<h.length;t++)c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o=n,null):{line:parseInt(r,10),col:0}},m=function(){var n=o,r="";for("."===s()&&"/"===s(1)&&(r+=c(),r+=c()),("("===s()||"["===s())&&c();o<e.length;){var a=s();if(f.test(a))r+=c();else if("/"===a){if("/"===r[r.length-1])break;r+=c()}else break}var l={line:1,col:0};if(":"===s()){var m=d();m&&(l=m)}else if(e.substring(o,o+h.length)===h){var g=p();g&&(l=g,n--)}(r.startsWith("a/")||r.startsWith("b/"))&&(e.indexOf("diff --git ")>=0||e.indexOf("--- a/")>=0||e.indexOf("+++ b/")>=0)&&t.indexOf(r.substring(2))>=0&&(r=r.substring(2),n+=2);var v=r.replace(u,"$2").replace(/^\.?\//,"").trim();return v&&t.find(function(e){return e===v||e.substring(e.lastIndexOf("/")+1)===v})?(0,i._)({file:v,from:n,to:o},l):null};o<e.length;)(g=m())?r.push(g):c();return[2,r]}})})).apply(this,arguments)}},10415:(e,n,t)=>{"use strict";function r(e,n,t,r){var i=t-n;return{start:{x:(n+1)%r.cols,y:e+Math.floor((n+1)/r.cols)},end:{x:(n+i)%r.cols,y:e+Math.floor((n+i)/r.cols)}}}function i(e,n,t){var r,i,o="";do{var a=t.buffer.active.getLine(e);if(!a)break;a.isWrapped&&e--,i=a.isWrapped}while(i);var l=e;do{var s=t.buffer.active.getLine(e+1);r=!!s&&s.isWrapped;var c=t.buffer.active.getLine(e);if(!c)break;o+=c.translateToString(!r&&n).substring(0,t.cols),e++}while(r);return[o,l]}t.d(n,{W:()=>r,z:()=>i})},55382:(e,n,t)=>{"use strict";t.d(n,{P:()=>M,A:()=>H});var r,i=t(13454),o=t(66622),a=t(27189),l=t(5482),s=t(30758),c=t(55195),u=t(1979),d=t(62580),p=t(20521),f=t(54341),h=t(63679),m=t(1175),g=t(26190),v=t(14349),w=t(98734),y=t(1953),b=t(68062),S=t(75820),Y=t(19551),A=t.n(Y)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),C="replit-icons-font",x=t(21980),_="BESbswy";function k(e){return D.apply(this,arguments)}function D(){return(D=(0,i._)(function(e){return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return R.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([I("serif",e),I("sans-serif",e),I("monospace",e)])]}})})).apply(this,arguments)}function E(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function R(){return(R=(0,i._)(function(e,n){var t,r,i,o,a,s;return(0,l.YH)(this,function(l){return t=n.fontInfo,i=void 0===(r=n.characters)?_:r,a=void 0===(o=n.timeout)?3e3:o,s=E(t),[2,new Promise(function(n,r){var o=!1,l=x.vF.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout(function(){o=!0,l("xterm font loading timed out"),n()},a);e.load(s,i).then(function(){o||(clearTimeout(c),n())}).catch(function(e){o||(clearTimeout(c),r(e))})})]})})).apply(this,arguments)}function I(e,n){return F.apply(this,arguments)}function F(){return(F=(0,i._)(function(e,n){var t,r,i,o,a,s,c,u,d;return(0,l.YH)(this,function(l){return(t=n.fontInfo,i=void 0===(r=n.characters)?_:r,a=void 0===(o=n.timeout)?3e3:o,s=E(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),u=c.offsetWidth,c.style.font=s,(d=function(){return u!==c.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())},50),i=setTimeout(function(){if(clearInterval(r),document.body.removeChild(c),d()){e();return}n(Error("Font loading timed out "+t.family))},a)})]})})).apply(this,arguments)}function T(e){c.Cp(e)}var P='"ReplitHack"',L=String.fromCharCode(61095);function U(){return(U=(0,i._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return function(){if(!document.getElementById(C)){var e=document.createElement("style");e.id=C,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([k({fontInfo:{family:"replit-icons"},characters:L}).catch(T),k({fontInfo:{family:P,weight:"400"}}).catch(T),k({fontInfo:{family:P,weight:"400",style:"italic"}}).catch(T),k({fontInfo:{family:P,weight:"700"}}).catch(T),k({fontInfo:{family:P,weight:"700",style:"italic"}}).catch(T)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var N=t(82402),O=t(65640),M=1e4;function B(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function H(e){var n,r,Y,C,x,_,k,D,E=(0,o._)((0,s.useState)(null),2),R=E[0],I=E[1],F=(0,o._)((0,s.useState)(null),2),T=F[0],L=F[1],H=(0,N.V)(),z=(0,d.gc)("fontSize","accessibleTerminal","shellBellAudio").preferences,W=z.fontSize,G=z.accessibleTerminal,V=z.shellBellAudio,j=(0,y.iO)(),Z=(0,f.A)(),q=(0,m.a)(),K=null==e?void 0:e.openFile,$=(0,g.A)(null==e?void 0:e.openWebview),J=null==e?void 0:e.listFiles,Q=(0,s.useMemo)(function(){return K&&J?{openFile:K,listFiles:J}:null},[K,J]),X=(0,h._P)({controlName:"flag-nudges-pane-linking",logFlagToAnalytics:!1}),ee=(0,g.A)(null==e?void 0:e.onInBandOSCMessages),en={screenReaderMode:G,fileLinking:Q,terminalTheme:H,fontSize:W,scrollback:null==e?void 0:e.scrollback,openPane:null!==(D=null==e?void 0:e.openPane)&&void 0!==D?D:null,flagNudgesPaneLinking:X,emitPaneMetrics:null==e?void 0:e.emitPaneMetrics},et=(0,g.A)(en),er=(0,v.A)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==T||T.fit())},{type:"debounce",wait:200}),ei=(0,s.useRef)(null),eo=(0,s.useRef)(null),ea=(0,g.A)(null==e?void 0:e.size),el=(0,S.bU)();return(0,s.useLayoutEffect)(function(){if(R){var n=[];return(function(){return r.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){c.v4(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),c.Cp(Error("Loading chunk failed"))});return}j({error:e,origin:"Xterm: init"})}),function(){n.forEach(function(e){return e()})}}function r(){return(r=(0,i._)(function(){var r,i,s,d,f,h,m,g,v,y,Y,A,C,x,_,k,D,E,I,F,T,N,H,z,W,G;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,Promise.all([Promise.all([(0,u.jc)(function(){return t.e(2766).then(t.t.bind(t,5711,23))}),(0,u.jc)(function(){return t.e(949).then(t.t.bind(t,30949,23))}),(0,u.jc)(function(){return t.e(2734).then(t.t.bind(t,32734,23))}),(0,u.jc)(function(){return t.e(9978).then(t.t.bind(t,79978,23))}),(0,u.jc)(function(){return t.e(2549).then(t.t.bind(t,32549,23))}),(0,u.jc)(function(){return t.e(2951).then(t.bind(t,42951))}),(0,u.jc)(function(){return t.e(7049).then(t.bind(t,49430))}),(0,u.jc)(function(){return t.e(9957).then(t.t.bind(t,39957,23))}),(0,u.jc)(function(){return t.e(734).then(t.t.bind(t,70734,23))})]),function(){return U.apply(this,arguments)}()])];case 1:var V;if(m=o._.apply(void 0,[l.sent(),1]),v=(g=(0,o._)(m[0],9))[0].Terminal,y=g[1].FitAddon,Y=g[2].SearchAddon,A=g[3].WebLinksAddon,C=g[4].Unicode11Addon,x=g[5].FileLinkAddon,_=g[6].PaneLinkAddon,k=g[7].CanvasAddon,D=g[8].WebglAddon,!R)return[2];return I={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(E=et.current.scrollback)&&void 0!==E?E:M,tabStopWidth:4,fontFamily:"".concat(P,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:et.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:et.current.terminalTheme,screenReaderMode:et.current.screenReaderMode,logger:{trace:function(e,n){return(r=O).trace.apply(r,["xterm: "+e].concat((0,a._)(n)))},debug:function(e,n){return(i=O).debug.apply(i,["xterm: "+e].concat((0,a._)(n)))},info:function(e,n){return(s=O).info.apply(s,["xterm: "+e].concat((0,a._)(n)))},warn:function(e,n){return(d=O).warn.apply(d,["xterm: "+e].concat((0,a._)(n)))},error:function(e,n){"string"==typeof e&&e.includes("Parsing error")||O.error("xterm: "+e,n)}}},(null===(f=ea.current)||void 0===f?void 0:f.cols)!==void 0&&(I.cols=ea.current.cols),(null===(h=ea.current)||void 0===h?void 0:h.rows)!==void 0&&(I.rows=ea.current.rows),F=new v(I),et.current.fileLinking?(ei.current=new x(et.current.fileLinking.openFile,et.current.fileLinking.listFiles),F.loadAddon(ei.current)):ei.current=null,!eo.current&&(null==e?void 0:e.openPane)&&(eo.current=new _(e.openPane,X,e.emitPaneMetrics)),eo.current&&F.loadAddon(eo.current),T=new y,F.loadAddon(T),N=new A((V=function(e){Z?p.M.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==$.current){$.current(t.pathname,parseInt(t.port,10));return}V(n)})),F.loadAddon(N),H=new Y,F.loadAddon(H),z=new C,F.loadAddon(z),F.unicode.activeVersion="11",F.open(R),n.push(function(){try{F.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!B())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(B()||!q||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new k;F.loadAddon(e);return}var n=new D;F.loadAddon(n),n.onContextLoss(function(){n.dispose(),F.loadAddon(new k)})}catch(e){var t=new k;F.loadAddon(t)}}(),W=!1,G=null,F.attachCustomKeyEventHandler(function(e){var n=(0,b.te)(e);if(n){var t=n;G&&(t=(0,b.Y)(G,n));var r=el(t);switch(r.kind){case S.VO.NoMatch:G=null;break;case S.VO.WaitingForChord:return G=r.key,!1;case S.VO.MatchFound:return G=null,!1}}return(!window.navigator.clipboard||"c"!==e.key.toLowerCase()||!e.ctrlKey||!e.shiftKey||("keyup"===e.type&&F.hasSelection()&&(0,w.A)(F.getSelection()).catch(function(e){c.v4(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),c.Cp(e)})}),e.preventDefault(),e.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!W)&&(W="escape"===e.key.toLowerCase(),!0))}),ee.current&&Object.entries(ee.current).forEach(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];F.parser.registerOscHandler(Number(t),function(e){return r(F,e),!0})}),L({onKey:F.onKey.bind(F),onData:F.onData.bind(F),onResize:F.onResize.bind(F),write:F.write.bind(F),fit:function(){var e=R.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&T.fit()},focus:function(){return F.focus()},clear:function(){return F.clear()},findPrevious:function(e,n){return H.findPrevious(e,n)},findNext:function(e,n){return H.findNext(e,n)},getSize:function(){return{cols:F.cols,rows:F.rows}},paste:function(e){return F.paste(e)},_term:F}),er(R),[2]}})})).apply(this,arguments)}},[R,er,et,j,ea,el,Z,q,$,ee,null==e?void 0:e.openPane,null==e?void 0:e.emitPaneMetrics,X]),n=null==T?void 0:T._term,r=en.screenReaderMode,Y=en.fileLinking,C=en.terminalTheme,x=en.openPane,_=en.emitPaneMetrics,k=en.flagNudgesPaneLinking,(0,s.useEffect)(function(){n&&C&&(n.options.theme=C)},[n,C]),(0,s.useEffect)(function(){n&&(n.options.screenReaderMode=r)},[n,r]),(0,s.useEffect)(function(){if(n){if(Y){if(!ei.current){var e=!1;return t.e(2951).then(t.bind(t,42951)).then(function(t){var r=t.FileLinkAddon;e||(ei.current=new r(Y.openFile,Y.listFiles),n.loadAddon(ei.current))}),function(){e=!0}}ei.current.update(Y.openFile,Y.listFiles),ei.current.reactivate()}else ei.current&&ei.current.deactivate();if(x){if(!eo.current){var r=!1;return t.e(7049).then(t.bind(t,49430)).then(function(e){var t=e.PaneLinkAddon;r||(eo.current=new t(x,k,_),n.loadAddon(eo.current))}),function(){r=!0}}eo.current.update(x,null!=_?_:null)}else eo.current&&eo.current.deactivate()}},[n,Y,ei,eo,x,_,k]),(0,s.useEffect)(function(){var e=null==T?void 0:T._term;e&&W&&e.options.fontSize!==W&&(e.options.fontSize=W,e.refresh(0,e.rows-1),T.fit())},[W,T]),(0,s.useEffect)(function(){if(V){var e=null==T?void 0:T._term;if(e)return e.onBell(A).dispose}},[V,T]),[T,I]}},82402:(e,n,t)=>{"use strict";t.d(n,{V:()=>a});var r=t(30758),i=t(82542),o=t(7564);function a(){var e=(0,i.D)().values;return(0,r.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.T5.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},16483:(e,n,t)=>{"use strict";t.d(n,{Jc:()=>R,Dr:()=>c,zY:()=>s});var r=t(20837),i=t(43952),o=t(40174),a=o.ZU.Integer({minimum:0,maximum:65535}),l=o.ZU.Object({forwarded:o.ZU.Boolean(),port:a,address:o.ZU.String(),externalPort:a,comm:o.ZU.String({description:"Comm is the name chosen by the thread / process. Sometimes it has nice information to disambiguate between multiple instances of that process."}),cmdline:o.ZU.Array(o.ZU.String(),{description:"Cmdline is the commandline arguments provided when the process started."}),cgroup:o.ZU.String({description:"Cgroup is the cgroup of the process, as reported by `/proc/${pid}/cgroup`"}),pid:o.ZU.Integer(),pidChain:o.ZU.Array(o.ZU.Integer(),{description:"PidChain is the list of process ids in the hierarchy of the process, starting with the current process id and ending with 1 (pid1)."})});o.ZU.Array(l);var s=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e}({}),c=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e.ERROR="ERROR",e}({}),u=o.ZU.Object({task:o.ZU.Literal("dummy.echo"),args:o.ZU.Optional(o.ZU.String())}),d=o.ZU.Object({task:o.ZU.Literal("dummy.echo")}),p=o.ZU.Object({task:o.ZU.Literal("dummy.print"),args:o.ZU.String()}),f=o.ZU.Object({task:o.ZU.Literal("dummy.print")}),h=o.ZU.Object({task:o.ZU.Literal("dummy.sleep"),args:o.ZU.Optional(o.ZU.Number({minimum:0}))}),m=o.ZU.Object({task:o.ZU.Literal("dummy.sleep")}),g=o.ZU.Object({task:o.ZU.Literal("dummy.pass")}),v=o.ZU.Object({task:o.ZU.Literal("dummy.pass")}),w=o.ZU.Object({task:o.ZU.Literal("dummy.fail")}),y=o.ZU.Object({task:o.ZU.Literal("dummy.fail")}),b=o.ZU.Object({task:o.ZU.Literal("shell.exec"),args:o.ZU.String(),env:o.ZU.Optional(o.ZU.Record(o.ZU.String(),o.ZU.String())),waitForPort:o.ZU.Optional(o.ZU.Number())}),S=o.ZU.Object({task:o.ZU.Literal("shell.exec"),cgroupPath:o.ZU.Optional(o.ZU.String()),pid:o.ZU.Optional(o.ZU.Integer()),isInRecoveryMode:o.ZU.Optional(o.ZU.Boolean()),openPorts:o.ZU.Optional(o.ZU.Array(l))}),Y=o.ZU.Object({task:o.ZU.Literal("workspace.openWebview"),args:o.ZU.Number({minimum:0})}),A=o.ZU.Object({task:o.ZU.Literal("workspace.openWebview")}),C=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),args:o.ZU.String()}),x=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),hasUserFacingOutput:o.ZU.Boolean()}),_=o.ZU.Object({task:o.ZU.Literal("packager.installForAll")}),k=o.ZU.Object({task:o.ZU.Literal("packager.installForAll"),hasUserFacingOutput:o.ZU.Boolean()}),D=o.ZU.Object({task:o.ZU.Literal("workflow.run"),args:o.ZU.String()}),E=o.ZU.Object({task:o.ZU.Literal("workflow.run"),runId:o.ZU.String()}),R=o.ZU.Union([u,w,g,p,h,_,C,b,D,Y]),I=o.ZU.Union([d,y,v,f,m,k,x,S,E,A]),F=o.ZU.Union([o.ZU.Literal("parallel"),o.ZU.Literal("sequential")]),T=o.ZU.Object({agentRequireRestartOnSave:o.ZU.Optional(o.ZU.Boolean({description:"Meant for agent use only. Some frameworks have Hot Module Replacement or other mechanisms to automatically serve updated contents when files change. This metadata option is intended to be set to true when the frameworks do not have support for HMR, and the caller is expected to manually restart the workflow after saving files."})),agentRestartPatterns:o.ZU.Optional(o.ZU.Array(o.ZU.String(),{description:"Meant for agent use only. Specify a list of glob patterns used for matching file change events that would require a restart."})),generated:o.ZU.Optional(o.ZU.Boolean({description:"Used for auto-generated workflows, generated workflows should be kept read-only, and do not persist in .replit, examples being run button workflow, or package.json generated workflows."})),dotReplitRun:o.ZU.Optional(o.ZU.Boolean({description:"Only used by the workflow generated from .replit run configuration, only to be set internally in workflow service state and should not be persisted in dotreplit (unless potentially duplicated by the user)"}))}),P=o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Literal("system"),o.ZU.Number()]),L=o.ZU.Object({name:o.ZU.String(),mode:o.ZU.Optional(F),metadata:o.ZU.Optional(T),tasks:o.ZU.Array(R),author:o.ZU.Optional(P)});o.ZU.Object({workflows:o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(L))})}),o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(L))});var U={userIds:o.ZU.Array(o.ZU.Number()),metadata:o.ZU.Optional(I)},N=o.ZU.Union([o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("NOT_STARTED")})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("RUNNING"),isReady:o.ZU.Optional(o.ZU.Boolean()),startTime:o.ZU.Number()})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("FAILED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("FINISHED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("ERROR"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String())})),message:o.ZU.String()}))]);o.ZU.Record(o.ZU.String(),o.ZU.Object({runId:o.ZU.String(),startTime:o.ZU.Number(),endTime:o.ZU.Optional(o.ZU.Number()),step:o.ZU.Enum(s),tasks:o.ZU.Array(N),workflow:L,userId:o.ZU.Optional(o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Number()]))}))},23369:(e,n,t)=>{"use strict";t.d(n,{Qu:()=>o,T3:()=>r,W_:()=>i});var r="replit-repltuned-v1-5-3b",i={"replit-repltuned-v1-5-3b":{},"replit-v1-5-3b":{}},o=new Set(Object.keys(i))},64719:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r="file://";function i(e){var n=e;return e.startsWith(r)&&(n=e.slice(r.length)),n.startsWith("/")&&(n=n.slice(1)),n}},87546:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(78542),i=t(60762),o=function(){function e(){(0,r._)(this,e)}return e.get=function(e,n){var t,r;try{t=sessionStorage.getItem(e)}catch(e){}if(null==t)return null;try{r=JSON.parse(t)}catch(e){}return null==r||"array"===n&&!Array.isArray(r)||n&&(void 0===r?"undefined":(0,i._)(r))!==n?null:r},e.set=function(e,n){try{sessionStorage.setItem(e,JSON.stringify(n))}catch(e){}},e.remove=function(e){try{sessionStorage.removeItem(e)}catch(e){}},e.keys=function(){try{return Object.keys(sessionStorage)}catch(e){return[]}},e}()},80425:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function o(e,n){var t,o=n||{},a=o.signed,l=o.digitsNumber,s=o.isKib,c=o.isKibNotation;if(t=void 0!==a&&a?e<0?"-":"+":"",0===e)return"".concat(t,"0B");var u=void 0===s||s?1024:1e3,d=Math.floor(Math.log(Math.abs(e))/Math.log(u));return"".concat(t).concat(parseFloat(Math.abs(e/Math.pow(u,d)).toFixed(void 0===l?2:l))).concat((void 0!==c&&c?r:i)[d])}},58663:(e,n,t)=>{"use strict";t.d(n,{Ry:()=>o,vF:()=>r,z$:()=>i});var r=100,i=3,o=250},69932:(e,n,t)=>{"use strict";t.d(n,{KY:()=>l});var r=t(27189),i=t(23369),o=t(18799),a=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],l={layout:{id:"layout",name:"Default Layout",description:"Change the layout of the editor.",type:"select",editorPreferencesKey:"isLayoutStacked",options:[{id:"side-by-side",editorPreferencesValue:!1,title:"side-by-side"},{id:"stacked",editorPreferencesValue:!0,title:"stacked"}]},fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:a},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:a},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:a},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:a},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:a},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:a},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:a},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:a},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Play a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:a},agentAudioNotification:{id:"agentAudioNotification",name:"Agent Audio Notification",description:"Play a sound when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentAudioNotification",options:a},agentPushNotification:{id:"agentPushNotification",name:"Agent Push Notification",description:"Send a push notification when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentPushNotification",options:a},assistantPushNotification:{id:"assistantPushNotification",name:"Assistant Push Notification",description:"Send a push notification when the Assistant needs your response.",type:"boolean",editorPreferencesKey:"assistantPushNotification",options:a},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},completeCodeEngine:{id:"completeCodeEngine",name:"AI Code Completion Engine",description:"The engine used for code completion.",type:"select",editorPreferencesKey:"completeCodeEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i.Qu).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},codeRepairHighlight:{id:"codeRepairHighlight",name:"AI Code Repair",description:"Highlights language-related errors that AI can fix for you (available for Python files).",type:"boolean",editorPreferencesKey:"codeRepairHighlight",options:a},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:'Code completion provides inline "ghost text" suggestions while you code.',type:"boolean",editorPreferencesKey:"codeSuggestion",options:a},chatEngine:{id:"chatEngine",name:"AI Chat Engine",description:"The engine used for chat completion.",type:"select",editorPreferencesKey:"chatEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(o.k0).map(function(e){return{id:e.qualified,editorPreferencesValue:e.qualified,title:e.readable}})))},ghostwriterModelSelection:{id:"ghostwriterModelSelection",name:"AI Model Type",description:"Which AI model to use for chat. Advanced models require more power and have usage limits. They are most useful for tasks that are ambiguous or require creativity.",type:"select",editorPreferencesKey:"ghostwriterModelSelection",options:[{id:"basic",editorPreferencesValue:"basic",title:"Basic"},{id:"advanced",editorPreferencesValue:"advanced",title:"Advanced"}]},assistantAutoApplyChanges:{id:"assistantAutoApplyChanges",name:"Auto Apply Changes",description:"Automatically apply changes made by the AI assistant to your code.",type:"boolean",editorPreferencesKey:"assistantAutoApplyChanges",options:a},assistantAutoRestartRepl:{id:"assistantAutoRestartRepl",name:"Auto Restart Workflows",description:"Automatically restart workflows after applying code changes.",type:"boolean",editorPreferencesKey:"assistantAutoRestartRepl",options:a},assistantAdvancedModelOverride:{id:"assistantAdvancedModelOverride",name:"Advanced Model Override",description:"Override the default advanced model.",type:"select",editorPreferencesKey:"assistantAdvancedModelOverride",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(o.k0).map(function(e){return{id:e.qualified,editorPreferencesValue:e.qualified,title:e.readable}})))}}},76515:(e,n,t)=>{"use strict";t.d(n,{$l:()=>r,DX:()=>u,Gz:()=>c,Oe:()=>d,Pt:()=>p,b0:()=>f,g8:()=>l,sY:()=>i,vA:()=>a,xv:()=>o,y:()=>s});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,s=/^(https:\/\/)?(www\.)?((discordapp\.com\/invite)|(discord\.gg))\/(\w+)$/,c="https://twitter.com/",u="https://www.linkedin.com/in/",d="https://github.com/",p="https://x.com/",f=/\/$/},81750:(e,n,t)=>{"use strict";function r(e){return!e.origin&&"/@replit/Blank-Repl"===e.rootOriginReplUrl}t.d(n,{u:()=>r})},68543:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(13454),i=t(16530),o=t(5482),a=t(88467),l=t(23405),s=function(e){return e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STDERR_RECEIVED="STDERR_RECEIVED",e.STATE_CHANGED="STATE_CHANGED",e}({});function c(e){var n,t=e.container,c=(0,l.Ay)(),u=null,d=!1;function p(){return(p=(0,r._)(function(){return(0,o.YH)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){c.once(s.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}var f="",h="",m=t.openChannel({service:"exec"},function(e){var n=e.channel,t=!1;return n.onCommand(function(e){if(null!=e.output)f+=e.output,c.emit(s.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)h+=e.stderr,c.emit(s.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!t){t=!0;return}c.emit(s.STATE_CHANGED,{state:e.state,outputBuffer:f,stderrBuffer:h}),e.state===a.api.State.Stopped&&(f="",h="")}}),u=n,c.emit(s.CHANNEL_OPENED,n),function(){u=null}});return{request:(n=(0,r._)(function(e){var n,t,r,l,s,c,u,d,f,h;return(0,o.YH)(this,function(o){switch(o.label){case 0:return n=e.env,t=e.args,l=void 0===(r=e.lifecycle)?a.api.Exec.Lifecycle.NON_BLOCKING:r,c=void 0!==(s=e.splitStderr)&&s,u=e.noUserEnv,d=(0,i._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,function(){return p.apply(this,arguments)}()];case 1:return h=(f=o.sent()).request({exec:{env:n,args:t,lifecycle:l,splitStderr:c,noUserEnv:null!=u&&u}}),l===a.api.Exec.Lifecycle.STDIN&&"stdin"in d&&(f.send({input:d.stdin}),f.send({inputClose:{}})),[2,h]}})}),function(e){return n.apply(this,arguments)}),onOutput:function(e){return c.on(s.OUTPUT_RECEIVED,e),function(){c.off(s.OUTPUT_RECEIVED,e)}},onStderr:function(e){return c.on(s.STDERR_RECEIVED,e),function(){c.off(s.STDERR_RECEIVED,e)}},onStateChanged:function(e){return c.on(s.STATE_CHANGED,e),function(){c.off(s.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}},15064:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(13454),i=t(5482),o=t(25161),a=t(76605);function l(e){var n=e.container,t=e.dotReplit,l=(0,o.F)(null),s=(0,o.F)(null),c=(0,o.F)(null),u=(0,o.F)(null),d=null;function p(){return u.current?Promise.resolve(u.current):new Promise(function(e){var n=u.subscribe(function(t){t&&(n(),e(t))})})}return n.openChannel({service:"toolchain"},function(e){var n=e.channel;u.set(n);var t=n.onCommand(function(e){if(e.toolchainChanged){if(!e.toolchainChanged.configs)throw Error("Expected toolchain changed configs");l.current=e.toolchainChanged.configs}else if(e.nixModulesChanged){if(!e.nixModulesChanged.modules)throw Error("Expected modules changed modules");s.current=e.nixModulesChanged.modules,c.current=e.nixModulesChanged.modulesV2}});return n.request({toolchainGetRequest:{}}).then(function(e){var n;l.current=(null===(n=e.toolchainGetResponse)||void 0===n?void 0:n.configs)||null}),n.request({nixModulesGetRequest:{}}).then(function(e){var n;s.current=(null===(n=e.nixModulesGetResponse)||void 0===n?void 0:n.modules)||null}),n.request({nixModuleConfigGetRequest:{}}).then(function(e){var n;c.current=(null===(n=e.nixModuleConfigGetResponse)||void 0===n?void 0:n.modules)||null}),function(){t()}}),{configs:l,modules:s,moduleConfig:c,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise(function(e){var n=l.subscribe(function(t){if(n(),null===t)throw Error("Returned toolchain config should not be null");e(t)})})},getRegistry:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:if(d)return[2,d];return[4,p()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,d=e.sent().nixModulesGetRegistryResponse||null]}})})()},getModuleConfig:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,e.sent().request({nixModuleConfigGetRequest:{}})];case 2:return[2,e.sent().nixModuleConfigGetResponse||null]}})})()},setModuleConfig:function(e){return(0,r._)(function(){return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return[4,n.sent().request({nixModuleConfigSetRequest:{modules:e}})];case 2:return[2,n.sent().nixModuleConfigSetResponse||null]}})})()},addModule:function(e){return(0,r._)(function(){var n,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if(-1!==(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).indexOf(e))return[3,3];return r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])];case 2:i.sent(),i.label=3;case 3:return[2]}})})()},removeModule:function(e){return(0,r._)(function(){var n,r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if((l=(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).filter(function(n){if(e===n)return!1;var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e})).length===r.length)return[2];return[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},upgradeModule:function(e,n){return(0,r._)(function(){var r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);return l=((null===(r=o.config)||void 0===r?void 0:r.modules)||[]).map(function(t){return e===t?n:t}),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},buildModules:function(){return(0,r._)(function(){var e,n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return e=this,[4,p()];case 1:return n=t.sent(),[2,new Promise(function(t){var r=e.configs.subscribe(function(e){e&&(r(),t(void 0))});n.send({nixModulesBuildRequest:{}})})]}})}).apply(this)}}}},25213:e=>{e.exports={container:"SuggestDeploy_container__mhqVk",assistant:"SuggestDeploy_assistant__3QtV_",message:"SuggestDeploy_message__iTjaA",cannotDeploy:"SuggestDeploy_cannotDeploy__k4COd",status:"SuggestDeploy_status__pC0MY",isConfiguredManually:"SuggestDeploy_isConfiguredManually__AoTAt",isStale:"SuggestDeploy_isStale__2mrmU",properties:"SuggestDeploy_properties__fshqC",propertiesHeader:"SuggestDeploy_propertiesHeader__Coxab",propertiesTitle:"SuggestDeploy_propertiesTitle__04Wis",propertiesButton:"SuggestDeploy_propertiesButton__xb2aJ",isExpanded:"SuggestDeploy_isExpanded__GCiLA",propertyListWrapper:"SuggestDeploy_propertyListWrapper__Ie_1h",propertyList:"SuggestDeploy_propertyList__eFFXV",propertyTerm:"SuggestDeploy_propertyTerm__96oby"}},17668:e=>{e.exports={root:"AgentInput_root__x0F7C"}},8322:e=>{e.exports={inner:"AgentForceNewSessionOptions_inner__fV8MW",or:"AgentForceNewSessionOptions_or__sisTq",root:"AgentForceNewSessionOptions_root__vN9nk"}},80971:e=>{e.exports={button:"ExpandableProgress_button__OoY_w",buttonLeft:"ExpandableProgress_buttonLeft__BlA9j",thought:"ExpandableProgress_thought__GbLBP",progressRendererWrap:"ExpandableProgress_progressRendererWrap__Xqqae",bar:"ExpandableProgress_bar__vq0rt"}},20328:e=>{e.exports={root:"StartRapidBuild_root__s8Xzb",stackSurface:"StartRapidBuild_stackSurface__7p2bc"}},33753:e=>{e.exports={root:"AppProposal_root___kyGq",content:"AppProposal_content__eIQ8X",startBuildingButton:"AppProposal_startBuildingButton__gDe1H",proposal:"AppProposal_proposal__wa0CR"}},74240:e=>{e.exports={root:"Chat_root__NyF_v",attachmentsWrapper:"Chat_attachmentsWrapper__9qzcY"}},93869:e=>{e.exports={footer:"Footer_footer__C_ofZ"}},52652:e=>{e.exports={root:"StatusBar_root__eefWa",bar:"StatusBar_bar__EDR_4",text:"StatusBar_text__zHrxo"}},77532:e=>{e.exports={loading:"Lobby_loading__6cU4I"}}}]);
//# sourceMappingURL=3055-49e028abc027a23b.js.map